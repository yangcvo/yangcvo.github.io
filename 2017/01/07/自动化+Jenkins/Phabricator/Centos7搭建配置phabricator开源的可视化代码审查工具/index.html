<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Centos7æ­å»ºé…ç½®phabricatorå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…· | Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		<article>
	
		<h1>Centos7æ­å»ºé…ç½®phabricatorå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·</h1>
	
	<div class="article__infos">
		<span class="article__date">2017-01-07</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/automation/">automation</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Phabricator/">Phabricator</a>
			</span>
		
	</div>

	

	
		<h2 id="Phabricatoræ˜¯ç”±Fackbookå¼€å‘çš„ä¸€ä¸ªå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·ã€‚"><a href="#Phabricatoræ˜¯ç”±Fackbookå¼€å‘çš„ä¸€ä¸ªå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·ã€‚" class="headerlink" title="Phabricatoræ˜¯ç”±Fackbookå¼€å‘çš„ä¸€ä¸ªå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·ã€‚"></a>Phabricatoræ˜¯ç”±Fackbookå¼€å‘çš„ä¸€ä¸ªå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·ã€‚</h2><p>å…¬å¸é¡¹ç›®ç®¡ç†å’Œä»£ç å®¡æŸ¥ä¸€ç›´ç”¨<code>jira</code>å’Œ<code>git</code>æ¥åš,æœ€è¿‘å‘ç°ä¸€ä¸ªä¸é”™çš„å¼€æºçš„é¡¹ç›®ç®¡ç†å¹³å° è‡ªå·±æ­å»ºä¸‹æ„Ÿè§‰è¿˜æŒºå¥½ç”¨çš„è¯å°±è½¬ç§»è¿‡æ¥äº†ã€‚</p>
<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>åœ¨Phabricatorä¸­ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„é’ˆå¯¹æ¯ä¸€æ®µä»£ç è¿›è¡Œäº¤é™…è®¨è®º;è´Ÿè´£å®¡æŸ¥çš„å·¥ç¨‹å¸ˆå¯ä»¥æ¥å—ä»£ç æ”¹å˜ï¼Œå¯ä»¥æå‡ºç–‘é—®è¦æ±‚åŸä½œè€…ç»§ç»­ä¿®æ”¹ç­‰ç­‰ã€‚</p>
<p>åœ¨Pharbricatorä¸­ï¼Œå¯ä»¥æ–°å»ºä»£ç ä»“åº“ï¼ˆä¹Ÿå°±æ˜¯åœ¨phabricatorä¸­å®¿ä¸»ä»“åº“ï¼‰ï¼Œä¹Ÿå¯ä»¥å¯¼å…¥å¤–éƒ¨ä»“åº“ï¼ˆä»å¤–éƒ¨ä»“åº“æ‹‰å–æ•°æ®ï¼Œå¹¶è·Ÿè¸ªè¯¥å¤–éƒ¨ä»“åº“ä¿æŒæ•°æ®åŒæ­¥ï¼Œphabricatorå†…éƒ¨æœ‰ä¸€ä¸ªæ›´æ–°æœºåˆ¶ï¼‰;æ”¯æŒhttp ï¼Œä¹Ÿæ”¯æŒsshï¼ˆä¸è¿‡é…ç½®æ¯”è¾ƒéº»çƒ¦ç‚¹ï¼‰; Phabricatoræ”¯æŒä¸¤ç§ä»£ç å®¡æŸ¥å·¥ä½œæµï¼šâ€œæäº¤å‰å®¡æŸ¥â€å’Œâ€œauditâ€ï¼ˆæäº¤åå®¡æŸ¥ï¼‰ã€‚</p>
<h3 id="åœ¨Phabricatorçš„ä¸»é¢æ¿ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå·¥å…·ï¼š"><a href="#åœ¨Phabricatorçš„ä¸»é¢æ¿ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå·¥å…·ï¼š" class="headerlink" title="åœ¨Phabricatorçš„ä¸»é¢æ¿ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå·¥å…·ï¼š"></a>åœ¨Phabricatorçš„ä¸»é¢æ¿ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå·¥å…·ï¼š</h3><ul>
<li>å·®åˆ† - å®¡æŸ¥ä»£ç ï¼šç®¡ç†é¢„æ¨ä»£ç å®¡æŸ¥å·¥ä½œæµç¨‹;</li>
<li>Maniphest - ä»»åŠ¡å’Œé”™è¯¯ï¼šç®¡ç†æˆå‘˜çš„æ‰€æœ‰ä»»åŠ¡å’ŒBugï¼Œå¯å¯¹ä»»åŠ¡æˆ–Bugå±•å¼€è®¨è®º;</li>
<li>Diffusion - ä¸»æœºå’Œæµè§ˆå­˜å‚¨åº“ï¼šç®¡ç†ä»£ç ä»“åº“ï¼Œæ”¯æŒGit / Hg / SVN;</li>
<li>å®¡è®¡ - æµè§ˆå’Œå®¡è®¡æäº¤ï¼šç®¡ç†åæ¨ä»£ç å®¡æŸ¥å·¥ä½œæµç¨‹;</li>
<li>Phriction - Wikiï¼šæ–‡æ¡£ç®¡ç†;</li>
<li>é¡¹ç›® - ç»„ç»‡ï¼šå·¥ç¨‹ç®¡ç†ï¼Œå¯å…³è”èµ„æºåº“;</li>
<li>æºä»£ç æ‰˜ç®¡åœ¨<a href="https://github.com/phacility/phabricator" target="_blank" rel="external">Github</a></li>
</ul>
<h3 id="ç‰¹æ€§ï¼š"><a href="#ç‰¹æ€§ï¼š" class="headerlink" title="ç‰¹æ€§ï¼š"></a>ç‰¹æ€§ï¼š</h3><p>ä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰<br>gitä»“åº“<br>è·Ÿè¸ªbug<br>é¡¹ç›®ç®¡ç†<br>å›¢é˜Ÿæ²Ÿé€š</p>
<p>å…³äºphabricatoræ›´å¤šçš„ä»‹ç»ï¼Œè®¿é—®é¡¹ç›®å®˜ç½‘ï¼š<a href="httpsï¼š//secure.phabricator.com/book/phabricator/article/introduction/">phabricator</a></p>
<h3 id="ç¯å¢ƒè¦æ±‚ï¼š"><a href="#ç¯å¢ƒè¦æ±‚ï¼š" class="headerlink" title="ç¯å¢ƒè¦æ±‚ï¼š"></a>ç¯å¢ƒè¦æ±‚ï¼š</h3><p>Phabricatoræ˜¯ä¸€ä¸ªLAMPåº”ç”¨å¥—ä»¶ï¼Œå› æ­¤æœ€åŸºæœ¬çš„è¦æ±‚å°±æ˜¯LAMPç¯å¢ƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">* Linuxç³»ç»Ÿç¯å¢ƒï¼šcentos7.1 64ä½</div><div class="line">* Apacheï¼ˆæˆ–nginxï¼Œæˆ–lighttpdï¼‰ï¼šéœ€è¦Apache 2.2.7ä»¥ä¸Šç‰ˆæœ¬ã€‚</div><div class="line">* MySQLï¼šMySQLå¿…éœ€</div><div class="line">* PHPï¼šéœ€è¦PHP5.2ä»¥ä¸Šç‰ˆæœ¬</div><div class="line"></div><div class="line">è¿™é‡Œæˆ‘å®‰è£…ç‰ˆæœ¬ï¼š</div><div class="line">* Apache 2.2.15</div><div class="line">* mysql 5.6.29</div><div class="line">* php 5.4.16</div></pre></td></tr></table></figure>
<h3 id="phabricatorå®‰è£…"><a href="#phabricatorå®‰è£…" class="headerlink" title="phabricatorå®‰è£…"></a>phabricatorå®‰è£…</h3><p>å‚è€ƒï¼š<a href="https : //secure.phabricator.com/book/phabricator/article/installation_guide/">å®˜ç½‘phabricatorå®‰è£…</a></p>
<p>å…·ä½“è¿‡ç¨‹ä¸æè¿°ï¼Œä»¥æˆ‘å‚è€ƒçš„ç½‘ç»œèµ„æºè¿›è¡Œè¯´æ˜ã€‚ç½‘ä¸Šçš„èµ„æºå‚è€ƒäº†ç‰¹åˆ«å¤šï¼Œåªæ”¾æˆ‘è®¤ä¸ºæœ€æœ‰å¸®åŠ©çš„ã€‚</p>
<p>é¦–å…ˆï¼Œ<code>phabricator</code>æ˜¯åŸºäºphpçš„ï¼ŒåŒæ—¶éœ€è¦å‘é€é‚®ä»¶ï¼ˆæé†’ä»£ç å®¡æŸ¥è€…ï¼‰ï¼Œæ‰€ä»¥å‡å®šæœåŠ¡å™¨ä¸Šå·²ç»é…ç½®å¥½äº†<code>phpï¼Œmysqlï¼Œnginxï¼Œpostfix</code>ç­‰ç¯å¢ƒ;åŒæ—¶ï¼Œå®˜æ–¹æ¨èå¼€å¯APCæ€§èƒ½.</p>
<p>###1 å®‰è£…MariaDBæ•°æ®åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install mariadb mariadb-server</div></pre></td></tr></table></figure>
<p>å¯åŠ¨MariadbæœåŠ¡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">systemctl start mariadb</div><div class="line">systemctl <span class="built_in">enable</span> mariadb</div></pre></td></tr></table></figure>
<p>è¿è¡ŒMySQLåˆå§‹åŒ–å®‰è£…è„šæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql_secure_installation</div></pre></td></tr></table></figure>
<p>é»˜è®¤å¯†ç ä¸ºç©ºã€‚</p>
<p>è¿™é‡Œéœ€è¦é…ç½®ä¼˜åŒ–my.cnf å¦‚æœé»˜è®¤ä¸ä¼˜åŒ–ä¹Ÿæ˜¯å¯ä»¥çš„ä¸è¿‡å®‰è£…å®Œæˆä»¥åå¯ä»¥çœ‹åˆ°æˆ‘ä¸‹é¢æ–‡ç« ä¼šå‡ºç°10å¤šä¸ªé—®é¢˜ å¤§éƒ¨åˆ†éƒ½æ˜¯è·ŸMySQLç›¸å…³çš„ã€‚</p>
<h5 id="é…ç½®ä¼˜åŒ–MariaDBæ•°æ®åº“ï¼š"><a href="#é…ç½®ä¼˜åŒ–MariaDBæ•°æ®åº“ï¼š" class="headerlink" title="é…ç½®ä¼˜åŒ–MariaDBæ•°æ®åº“ï¼š"></a>é…ç½®ä¼˜åŒ–MariaDBæ•°æ®åº“ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">vim /etc/my.cnf</div><div class="line">[mysqld]</div><div class="line">innodb_buffer_pool_size = 1600M</div><div class="line">max_allowed_packet = <span class="string">"33554432"</span></div><div class="line">sql_mode=STRICT_ALL_TABLES</div><div class="line">ft_stopword_file=/var/www/html/phabricator/resources/sql/stopwords.txt</div><div class="line">ft_min_word_len = 3</div></pre></td></tr></table></figure>
<h5 id="éœ€è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼š"><a href="#éœ€è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼š" class="headerlink" title="éœ€è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼š"></a>éœ€è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">[root@Phabricator sql]<span class="comment"># mysql -uroot -pqwde1dsdfg3.com</span></div><div class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</div><div class="line">Your MariaDB connection id is 75</div><div class="line">Server version: 5.5.52-MariaDB MariaDB Server</div><div class="line"></div><div class="line">Copyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.</div><div class="line"></div><div class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> help. Type <span class="string">'\c'</span> to clear the current input statement.</div><div class="line"></div><div class="line">MariaDB [(none)]&gt; REPAIR TABLE phabricator_search.search_documentfield;</div><div class="line">+-----------------------------------------+--------+----------+----------+</div><div class="line">| Table                                   | Op     | Msg_type | Msg_text |</div><div class="line">+-----------------------------------------+--------+----------+----------+</div><div class="line">| phabricator_search.search_documentfield | repair | status   | OK       |</div><div class="line">+-----------------------------------------+--------+----------+----------+</div><div class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</div></pre></td></tr></table></figure>
<ul>
<li>mysql 5.6å®‰è£…ï¼Œä¸è¿‡è¿™é‡Œæˆ‘æœ€åå¯ç”¨çš„æ˜¯5.6ç‰ˆæœ¬ï¼ŒåŸå› å·²ç»è¯´æ˜äº†.</li>
</ul>
<h3 id="2-å®‰è£…Apache"><a href="#2-å®‰è£…Apache" class="headerlink" title="2 å®‰è£…Apache"></a>2 å®‰è£…Apache</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ï¼ƒyum -y install httpd</div></pre></td></tr></table></figure>
<p>é…ç½®Apacheï¼Œæé«˜ä¸€ç‚¹å®‰å…¨æ€§ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sed -i <span class="string">'s/^/#&amp;/g'</span> /etc/httpd/conf.d/welcome.conf  <span class="comment"># æ³¨é‡Šæ‰æ¯ä¸€è¡Œ</span></div><div class="line">sed -i <span class="string">"s/Options Indexes FollowSymLinks/Options FollowSymLinks/"</span> /etc/httpd/conf/httpd.conf</div></pre></td></tr></table></figure>
<p>å¯åŠ¨Apache webæœåŠ¡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">systemctl start httpd</div><div class="line">systemctl <span class="built_in">enable</span> httpd</div></pre></td></tr></table></figure>
<h3 id="3-å®‰è£…PHPå’Œä¸€äº›æ¨¡å—"><a href="#3-å®‰è£…PHPå’Œä¸€äº›æ¨¡å—" class="headerlink" title="3 å®‰è£…PHPå’Œä¸€äº›æ¨¡å—"></a>3 å®‰è£…PHPå’Œä¸€äº›æ¨¡å—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install php php-mysqli php-mbstring php-gd php-curl php-cli php-common php-process</div></pre></td></tr></table></figure>
<p>é…ç½®ä¼˜åŒ– ä¸ç„¶å®‰è£…æˆåŠŸä»¥åä¼šå‡ºç°é—®é¢˜é”™è¯¯æç°âŒï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">1. æœªé…ç½®æœåŠ¡å™¨æ—¶åŒº  </div><div class="line"></div><div class="line">[root@Phabricator sql]<span class="comment"># vim /etc/php.ini</span></div><div class="line">ä¾‹ </div><div class="line">;date.timezone = </div><div class="line">æ”¹æˆ: </div><div class="line">date.timezone = Asia/Shanghai </div><div class="line"> </div><div class="line">PHP post_max_sizeæœªé…ç½® </div><div class="line">å°†PHP é…ç½®ä¸­çš„post_max_size è°ƒæ•´ä¸ºè‡³å°‘32MBã€‚è®¾ç½®ä¸ºè¾ƒå°å€¼æ—¶ï¼Œå¤§æ–‡ä»¶ä¸Šä¼ å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚</div><div class="line">post_max_size = 32M</div></pre></td></tr></table></figure>
<ul>
<li>php5.4ç‰ˆæœ¬å¯ä»¥ç›´æ¥ä½¿ç”¨<a href="https://secure.phabricator.com/diffusion/P/browse/master/scripts/install/install_rhel-derivs.sh" target="_blank" rel="external">phabricator.sh</a>æä¾›çš„è„šæœ¬å®‰è£…ï¼Œè¿™ä¸ªè„šæœ¬ä¼šæ£€æŸ¥<code>phabricator</code>éœ€è¦çš„ç¯å¢ƒï¼Œæ²¡æœ‰çš„ä¼šè‡ªåŠ¨å®‰è£…ï¼Œä¹‹åä¼šå®‰è£…å¥½phabricatorï¼Œå®‰è£…å‚è€ƒ<a href="https://my.oschina.net/yoyoko/blog/126325" target="_blank" rel="external">phabricator</a>å®‰è£…å‘å¯¼.</li>
</ul>
<h3 id="4-å®‰è£…Git"><a href="#4-å®‰è£…Git" class="headerlink" title="4 å®‰è£…Git"></a>4 å®‰è£…Git</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install git</div></pre></td></tr></table></figure>
<p>å¯å‚è€ƒç½‘ä¸Šé˜²ç«å¢™å’Œselinuxå»ºè®®æ ¹æ®æ­¤æ–‡ç« é…ç½®ä¸€ä¸‹.</p>
<p>å¦‚æœä½ å·²ç»è®¾ç½®å¥½LAMPç¯å¢ƒï¼Œä½ å¯ä»¥å·²ç»è·å¾—ä½ æ‰€éœ€çš„ä»»ä½•ä¸œä¸œã€‚å¦‚ä½•å®‰è£…LAMPå¯ä»¥æŸ¥çœ‹æˆ‘å†™<a href="http://blog.yangcvo.me/2014/12/07/Linux%E7%AC%94%E8%AE%B0/LAMP/yum%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8D%B8%E8%BD%BDLAMP%E7%8E%AF%E5%A2%83/" target="_blank" rel="external">yumä¸€é”®å®‰è£…ä¸å¸è½½LAMPç¯å¢ƒ</a></p>
<h3 id="5-ä¸‹è½½å®‰è£…Phabricator"><a href="#5-ä¸‹è½½å®‰è£…Phabricator" class="headerlink" title="5 ä¸‹è½½å®‰è£…Phabricator"></a>5 ä¸‹è½½å®‰è£…Phabricator</h3><p>æ—¢ç„¶ä½ å·²ç»å®‰è£…ä»¥ä¸Šæ‰€éœ€çš„ä¾èµ–ç¯å¢ƒæœåŠ¡ï¼Œä¸‹é¢è·å–Phabricatorä»¥åŠå…¶ä¾èµ–åŒ…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mkdir /var/www/html/</div><div class="line"><span class="built_in">cd</span> /var/www/html/</div><div class="line">git <span class="built_in">clone</span> https://github.com/phacility/libphutil.git</div><div class="line">git <span class="built_in">clone</span> https://github.com/phacility/arcanist.git</div><div class="line">git <span class="built_in">clone</span> https://github.com/phacility/phabricator.git</div><div class="line">chown -R apache: /var/www/html/*</div></pre></td></tr></table></figure>
<h3 id="6-åˆ›å»ºApacheè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶"><a href="#6-åˆ›å»ºApacheè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶" class="headerlink" title="6 åˆ›å»ºApacheè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶"></a>6 åˆ›å»ºApacheè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/httpd/conf.d/phabricator.conf</div></pre></td></tr></table></figure>
<p>å†™å…¥å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;VirtualHost *:80&gt;</div><div class="line">    ServerAdmin phabricator.ihaozhuo.com</div><div class="line">    DocumentRoot /var/www/html/phabricator/webroot/</div><div class="line">    ServerName phabricator.ihaozhuo.com</div><div class="line">    ServerAlias phabricator.ihaozhuo.com</div><div class="line">    RewriteEngine on</div><div class="line">    RewriteRule ^/rsrc/(.*)     -                       [L,QSA]</div><div class="line">    RewriteRule ^/favicon.ico   -                       [L,QSA]</div><div class="line">    RewriteRule ^(.*)$          /index.php?__path__=<span class="variable">$1</span>  [B,L,QSA]</div><div class="line">    &lt;Directory /var/www/html/phabricator/webroot/&gt;</div><div class="line">        AllowOverride All</div><div class="line">    &lt;/Directory&gt;</div><div class="line">    ErrorLog /var/<span class="built_in">log</span>/httpd/phabricator.ihaozhuo.com-error_log</div><div class="line">    CustomLog /var/<span class="built_in">log</span>/httpd/phabricator.ihaozhuo.com-access_log common</div><div class="line">&lt;/VirtualHost&gt;</div></pre></td></tr></table></figure>
<p>â—ï¸â—ï¸æ³¨æ„æ›¿æ¢ä¸Šé¢çš„åŸŸåã€‚<br>å…¶ä¸­<code>/var/www/html/phabricator/webroot</code>æ˜¯æˆ‘çš„<code>phabricator</code>å®‰è£…è·¯å¾„ï¼Œå¤§å®¶ä½¿ç”¨æ—¶å€™æ¢æˆè‡ªå·±çš„å³å¯ã€‚<br>å®‰è£…å¥½phabricatorä¹‹åï¼Œéœ€è¦ä½¿ç”¨phabricatorå®‰è£…ç›®å½•ä¸‹binæ–‡ä»¶å¤¹ä¸‹çš„å‘½ä»¤æ¥æ›´æ–°ä¸‹.</p>
<h3 id="é‡å¯apacheæœåŠ¡ï¼š"><a href="#é‡å¯apacheæœåŠ¡ï¼š" class="headerlink" title="é‡å¯apacheæœåŠ¡ï¼š"></a>é‡å¯apacheæœåŠ¡ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">systemctl restart httpd</div></pre></td></tr></table></figure>
<h3 id="7-è®¾ç½®MariaDBæ•°æ®åº“"><a href="#7-è®¾ç½®MariaDBæ•°æ®åº“" class="headerlink" title="7 è®¾ç½®MariaDBæ•°æ®åº“"></a>7 è®¾ç½®MariaDBæ•°æ®åº“</h3><p>é…ç½®Phabricatorè¿æ¥MariaDBéœ€è¦çš„ä¿¡æ¯ï¼š</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span> <span class="string">/var/www/html/phabricator/</span></div><div class="line"><span class="string">./bin/config</span> <span class="keyword">set</span> mysql.host localhost  </div><div class="line"><span class="string">./bin/config</span> <span class="keyword">set</span> mysql.port 3306</div><div class="line"><span class="string">./bin/config</span> <span class="keyword">set</span> mysql.user root</div><div class="line"><span class="string">./bin/config</span> <span class="keyword">set</span> mysql.pass &lt;your-MySQL-root-password&gt;</div></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºæ•°æ®åº“ï¼š"><a href="#åˆ›å»ºæ•°æ®åº“ï¼š" class="headerlink" title="åˆ›å»ºæ•°æ®åº“ï¼š"></a>åˆ›å»ºæ•°æ®åº“ï¼š</h3><p>å‡ºç°é—®é¢˜ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[root@phabricator bin]<span class="comment"># ./storage upgrade</span></div><div class="line">MySQL Credentials Not Configured</div><div class="line"></div><div class="line">Unable to connect to MySQL using the configured credentials. You must</div><div class="line">configure standard credentials before you can upgrade storage. Run these</div><div class="line">commands to <span class="built_in">set</span> up credentials:</div><div class="line"></div><div class="line">  phabricator/ $ ./bin/config <span class="built_in">set</span> mysql.host __host__</div><div class="line">  phabricator/ $ ./bin/config <span class="built_in">set</span> mysql.user __username__</div><div class="line">  phabricator/ $ ./bin/config <span class="built_in">set</span> mysql.pass __password__</div><div class="line"></div><div class="line">These standard credentials are separate from any administrative credentials</div><div class="line">provided to this <span class="built_in">command</span> with __--user__ or __--password__, and must be</div><div class="line">configured correctly before you can proceed.</div><div class="line"></div><div class="line">Raw MySQL Error: Attempt to connect to root@localhost failed with error</div><div class="line"><span class="comment">#2002: Can't connect to local MySQL server through socket</span></div><div class="line"><span class="string">'/var/lib/mysql/mysql.sock'</span> (2).</div></pre></td></tr></table></figure>
<p>å‡ºç°è¿™ä¸€æ­¥é—®é¢˜ å°±æ˜¯å› ä¸ºæ²¡æœ‰é…ç½®å¥½MySQLçš„è¿æ¥åœ°å€ä¿¡æ¯ã€‚é…ç½®ä¸‹mysqlçš„userå’Œpasså°±è¡Œã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@Phabricator <span class="built_in">local</span>]<span class="comment">#  cat /var/www/html/phabricator/conf/local/local.json</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"mysql.pass"</span>: <span class="string">"qwde1dsdfg3.com"</span>,</div><div class="line">  <span class="string">"mysql.user"</span>: <span class="string">"root"</span>,</div><div class="line">  <span class="string">"mysql.port"</span>: <span class="string">"3306"</span>,</div><div class="line">  <span class="string">"mysql.host"</span>: <span class="string">"localhost"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼š"><a href="#é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼š" class="headerlink" title="é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼š"></a>é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">[root@Phabricator phabricator]<span class="comment"># ./bin/storage upgrade</span></div><div class="line">Before running storage upgrades, you should take down the Phabricator web</div><div class="line">interface and stop any running Phabricator daemons (you can <span class="built_in">disable</span> this</div><div class="line">warning with --force).</div><div class="line"></div><div class="line">    Are you ready to <span class="built_in">continue</span>? [y/N] y</div><div class="line"></div><div class="line">Loading quickstart template onto <span class="string">"localhost:3306"</span>...</div><div class="line">Applying patch <span class="string">"phabricator:db.packages"</span> to host <span class="string">"localhost:3306"</span>...</div><div class="line">Applying patch <span class="string">"phabricator:20160201.revision.properties.1.sql"</span> to host <span class="string">"localhost:3306"</span>...</div><div class="line">Applying patch <span class="string">"phabricator:20160201.revision.properties.2.sql"</span> to host <span class="string">"localhost:3306"</span>...</div><div class="line">Applying patch <span class="string">"phabricator:20160706.phame.blog.parentdomain.2.sql"</span> to host <span class="string">"localhost:3306"</span>...</div><div class="line">Applying patch <span class="string">"phabricator:20160706.phame.blog.parentsite.1.sql"</span> to host <span class="string">"localhost:3306"</span>...</div><div class="line">Applying patch <span class="string">"phabricator:20160707.calendar.01.stub.sql"</span> to host <span class="string">"localhost:3306"</span>...</div><div class="line">Applying patch <span class="string">"phabricator:20160711.files.01.builtin.sql"</span> to host <span class="string">"localhost:3306"</span>...</div><div class="line">.....</div><div class="line">.....</div><div class="line"></div><div class="line">Missing Key</div><div class="line">phabricator_search       search_documentfield     corpus            Surplus Key</div><div class="line">phabricator_search       search_documentfield     key_corpus        Missing Key</div><div class="line">phabricator_worker       worker_archivetask       key_modified      Missing Key</div><div class="line">Applying schema adjustments...</div><div class="line">Done.</div><div class="line">Completed applying all schema adjustments.</div></pre></td></tr></table></figure>
<h3 id="8-æŸ¥çœ‹æ•°æ®åº“ï¼š"><a href="#8-æŸ¥çœ‹æ•°æ®åº“ï¼š" class="headerlink" title="8 æŸ¥çœ‹æ•°æ®åº“ï¼š"></a>8 æŸ¥çœ‹æ•°æ®åº“ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">[root@Phabricator phabricator]<span class="comment"># mysql -uroot -pqwde1dsdfg3.com</span></div><div class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</div><div class="line">Your MariaDB connection id is 177</div><div class="line">Server version: 5.5.52-MariaDB MariaDB Server</div><div class="line"></div><div class="line">Copyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.</div><div class="line"></div><div class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> help. Type <span class="string">'\c'</span> to clear the current input statement.</div><div class="line"></div><div class="line">MariaDB [(none)]&gt; show databases;</div><div class="line">+--------------------------+</div><div class="line">| Database                 |</div><div class="line">+--------------------------+</div><div class="line">| information_schema       |</div><div class="line">| mysql                    |</div><div class="line">| performance_schema       |</div><div class="line">| phabricator_almanac      |</div><div class="line">| phabricator_audit        |</div><div class="line">| phabricator_auth         |</div><div class="line">| phabricator_badges       |</div><div class="line">| phabricator_cache        |</div><div class="line">| phabricator_calendar     |</div><div class="line">| phabricator_chatlog      |</div><div class="line">| phabricator_conduit      |</div><div class="line">| phabricator_config       |</div><div class="line">| phabricator_conpherence  |</div><div class="line">| phabricator_countdown    |</div><div class="line">| phabricator_daemon       |</div><div class="line">| phabricator_dashboard    |</div><div class="line">| phabricator_differential |</div><div class="line">| phabricator_diviner      |</div><div class="line">| phabricator_doorkeeper   |</div><div class="line">| phabricator_draft        |</div><div class="line">| phabricator_drydock      |</div><div class="line">| phabricator_fact         |</div><div class="line">| phabricator_feed         |</div><div class="line">| phabricator_file         |</div><div class="line">| phabricator_flag         |</div><div class="line">| phabricator_fund         |</div><div class="line">|      .......             |</div><div class="line">+--------------------------+</div><div class="line">61 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</div></pre></td></tr></table></figure>
<p>â—ï¸â—ï¸æ³¨ï¼šupgradeä¹‹åï¼Œshow databasesä½ ä¼šå‘ç°å»ºç«‹äº†è®¸å¤šphabrictorå¼€å¤´çš„æ•°æ®åº“ã€‚</p>
<p>###8.1 é…ç½®URLï¼š</p>
<p>æœªé…ç½®æ­¤å®‰è£…çš„åŸºæœ¬URIï¼Œå¹¶ä¸”åœ¨é…ç½®ä¹‹å‰ï¼Œä¸»è¦åŠŸèƒ½å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚<br>æ‚¨åº”è¯¥å°†åŸºæœ¬URIè®¾ç½®ä¸ºæ‚¨å°†ç”¨äºè®¿é—®Phabricatorçš„URIï¼Œå¦‚â€œ<a href="http://phabricator.example.com/â€ã€‚" target="_blank" rel="external">http://phabricator.example.com/â€ã€‚</a><br>å¦‚æœä½¿ç”¨çš„ç«¯å£ä¸æ˜¯80ï¼ˆhttpï¼‰æˆ–443ï¼ˆhttpsï¼‰ï¼Œè¯·åŒ…æ‹¬åè®®ï¼ˆhttpæˆ–httpsï¼‰ï¼ŒåŸŸåå’Œç«¯å£å·ã€‚<br>åŸºäºæ­¤è¯·æ±‚ï¼Œæ­£ç¡®çš„è®¾ç½®ä¼¼ä¹æ˜¯ï¼š<code>http : //phabricator.ihaozhuo.com/</code><br>è¦é…ç½®åŸºæœ¬URIï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@Phabricator phabricator]<span class="comment">#  ./bin/config set phabricator.base-uri 'http://phabricator.ihaozhuo.com/'</span></div><div class="line">Set <span class="string">'phabricator.base-uri'</span> <span class="keyword">in</span> <span class="built_in">local</span> configuration.</div></pre></td></tr></table></figure>
<h3 id="9-è®¾ç½®é˜²ç«å¢™"><a href="#9-è®¾ç½®é˜²ç«å¢™" class="headerlink" title="9 è®¾ç½®é˜²ç«å¢™"></a>9 è®¾ç½®é˜²ç«å¢™</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">firewall-cmd --zone=public --permanent --add-service=http</div><div class="line">firewall-cmd --reload</div></pre></td></tr></table></figure>
<h3 id="9-1-Phabricator-Daemons-Are-Not-Running"><a href="#9-1-Phabricator-Daemons-Are-Not-Running" class="headerlink" title="9.1 Phabricator Daemons Are Not Running"></a>9.1 Phabricator Daemons Are Not Running</h3><p>å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">phabricator/ $ ./bin/phd start</div></pre></td></tr></table></figure></p>
<h3 id="10-å®Œæˆå®‰è£…"><a href="#10-å®Œæˆå®‰è£…" class="headerlink" title="10 å®Œæˆå®‰è£…"></a>10 å®Œæˆå®‰è£…</h3><p>é…ç½®phabricatorï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /var/www/html/phabricator/</div><div class="line">./bin/config <span class="built_in">set</span> phabricator.base-uri <span class="string">'http://your_domain_or_IP'</span></div><div class="line">./bin/phd start</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨æµè§ˆå™¨è®¿é—®ï¼š<a href="http://your_domain_or_IP" target="_blank" rel="external">http://your_domain_or_IP</a></p>
<p>ç„¶åæ ¹æ®æç¤ºä¿®å¤ä¸€äº›é—®é¢˜ã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/Phabricator_01.png" alt=""></figure></p>
<p>ç™»å½•è¿›æ¥ç®¡ç†ç•Œé¢ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/Phabricator_02.png" alt=""></figure></p>
<h3 id="åˆ›å»ºé¡¹ç›®ä¾‹å­ï¼š"><a href="#åˆ›å»ºé¡¹ç›®ä¾‹å­ï¼š" class="headerlink" title="åˆ›å»ºé¡¹ç›®ä¾‹å­ï¼š"></a>åˆ›å»ºé¡¹ç›®ä¾‹å­ï¼š</h3><p> Projects â€”â€”ã€‹ Create Project â€”â€”ã€‹å¡«å†™å¥½é¡¹ç›®åç§° â€”â€”ã€‹Create New Project </p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/Phabricator_03.png" alt=""></figure></p>
<p>åˆ›å»ºå®Œæˆæ•ˆæœï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/Phabricator_04.png" alt=""></figure></p>
<h3 id="å®‰è£…å®Œæˆä»¥åå‡ºç°10å¤šä¸ªé—®é¢˜è§£å†³ï¼š"><a href="#å®‰è£…å®Œæˆä»¥åå‡ºç°10å¤šä¸ªé—®é¢˜è§£å†³ï¼š" class="headerlink" title="å®‰è£…å®Œæˆä»¥åå‡ºç°10å¤šä¸ªé—®é¢˜è§£å†³ï¼š"></a>å®‰è£…å®Œæˆä»¥åå‡ºç°10å¤šä¸ªé—®é¢˜è§£å†³ï¼š</h3><p>æ±‰åŒ–ç¿»è¯‘è¿‡æ¥ï¼š<br> <figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/phabricator_05.png" alt=""></figure></p>
<p>â“è¯´æ˜ï¼šæŒ‰é—®é¢˜æç¤ºæ“ä½œè§£å†³æ•…éšœã€‚ä¸€èˆ¬éƒ½æœ‰é—®é¢˜ä¿®å¤è§£å†³æ–¹æ³•çš„ï¼Œå®˜æ–¹è¿™ç‚¹è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚</p>
<ul>
<li>æ£˜æ‰‹é—®é¢˜1 å¦‚æœé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼šAlternate File Domain Not Configured</li>
</ul>
<p>æ“ä½œäº†è¿™æ¡å‘½ä»¤å¤±æ•ˆ æœ€å¥½åˆ«æ“ä½œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">phabricator/ $ ./bin/config <span class="built_in">set</span> security.alternate-file-domain &lt;domain&gt;</div><div class="line"></div><div class="line">[root@Phabricator phabricator]<span class="comment"># ./bin/config set security.alternate-file-domain http://cdn.phabricator.com</span></div></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯CDNæ•°æ®å­˜æ”¾å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ã€‚ä¸ç„¶ä¼šå‡ºç°è®¿é—®å¤±è´¥ã€‚<br>æˆ‘æ˜¯å‚è€ƒè¿™ç¯‡æ–‡æ¡£è§£å†³é—®é¢˜ï¼š<a href="https://community.bitnami.com/t/phabricator-not-rendering-resources-over-https/39005" target="_blank" rel="external">Phabricator not rendering resources over https</a>åˆ é™¤<code>security.alternate-file-domain</code>å¯ä»¥è®¿é—®ã€‚</p>
<ul>
<li>æ£˜æ‰‹é—®é¢˜2 PHP Extension â€˜APCâ€™ Not Installed  å‚è€ƒæ–‡ç« ï¼š<a href="http://php.net/manual/zh/apc.installation.php" target="_blank" rel="external">PHP Extension â€˜APCâ€™ Not Installed</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># yum install php-pear</span></div><div class="line"><span class="comment"># pecl install apc</span></div><div class="line"><span class="comment"># echo "extension=apc.so" &gt;&gt; /etc/php.ini</span></div><div class="line"><span class="comment"># echo "apc.enabled=1" &gt;&gt; /etc/php.ini</span></div><div class="line"><span class="comment"># cp /usr/share/pear/apc.php /var/www/html/apc.php (this step is optional)</span></div><div class="line"><span class="comment"># /etc/init.d/httpd restart</span></div></pre></td></tr></table></figure>
<p>phabricatorå®˜ç½‘é…ç½®è¯´æ˜<a href="https://secure.phabricator.com/book/phabricator/article/configuration_guide/" target="_blank" rel="external">Configuration Guide</a></p>
<h3 id="1-èº«ä»½éªŒè¯æä¾›è€…"><a href="#1-èº«ä»½éªŒè¯æä¾›è€…" class="headerlink" title="1. èº«ä»½éªŒè¯æä¾›è€…"></a>1. èº«ä»½éªŒè¯æä¾›è€…</h3><p>Phabricatorç™»å½•çš„æ–¹æ³•è¢«ç§°ä¸ºèº«ä»½éªŒè¯æä¾›è€…ï¼ˆAuthentication Providersï¼‰ã€‚ä¾‹å¦‚,å½“æˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ªâ€ç”¨æˆ·å/å¯†ç â€èº«ä»½éªŒè¯æä¾›è€…,é‚£ä¹ˆç”¨æˆ·å¯ä»¥é€šè¿‡ä¼ ç»Ÿçš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•ã€‚Phabricatoræ”¯æŒå¤šç§ç™»å½•ç³»ç»Ÿã€‚å½“æˆ‘ä»¬ä½¿ç”¨Administratorsç™»å½•åˆ°åå°ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯ç”¨æˆ–ç¦ç”¨è¿™äº›Providersï¼Œé…ç½®ç”¨æˆ·å¦‚ä½•æ³¨å†Œæˆ–ç™»å½•åˆ°Phabricatorã€‚</p>
<p>åœ¨å…¬å¸å†…éƒ¨ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨<code>Username/Password</code>æˆ–LDAPï¼Œå¯¹äºå¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»ä¼¼äºGitHubç­‰OAuthç¬¬ä¸‰æ–¹ç™»å½•ã€‚åœ¨ä½¿ç”¨<code>Username/Password</code>ç™»å½•æ–¹å¼æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é™åˆ¶æ³¨å†Œç”¨æˆ·æ—¶çš„é‚®ç®±åç¼€ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æˆå…¬å¸çš„é‚®ç®±åŸŸåã€‚</p>
<h3 id="1-1-ä¿®æ”¹ç™»å½•æ–¹å¼"><a href="#1-1-ä¿®æ”¹ç™»å½•æ–¹å¼" class="headerlink" title="1.1 ä¿®æ”¹ç™»å½•æ–¹å¼"></a>1.1 ä¿®æ”¹ç™»å½•æ–¹å¼</h3><p>ç½‘é¡µä¸Šå¯ä»¥å¯¹å…¶è¿›è¡Œç›¸åº”çš„ä¿®æ”¹ã€‚å…·ä½“ä½ç½®åœ¨ï¼š<br>å·¦ä¾§èœå•<code>Auth -&gt; Add Provider -&gt; username/password</code>(è´¦å·å¯†ç æ–¹å¼ç™»å½•)<br>æ”¯æŒ è´¦å·å¯†ç ç™»å½•ä»¥åŠç¬¬ä¸‰æ–¹ï¼ˆfacebookã€githubç­‰ï¼‰è´¦å·ç™»å½•ã€‚å¦å¤–ï¼Œå¯ä»¥é€‰æ‹©ç”¨æˆ·è‡ªä¸»æ³¨å†Œï¼Œæˆ–è€…ç¦ç”¨ï¼ˆç®¡ç†å‘˜é…ç½®ï¼‰ã€‚</p>
<p>è¿™é‡Œé€‰æ‹©LDAPåŒæ­¥éœ€è¦å®‰è£…PHP LDAPæ‰©å±•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Before you can <span class="built_in">set</span> up or use LDAP, you need to install the PHP LDAP extension. It is not currently installed, so PHP can not talk to LDAP. Usually you can install it with `yum install php-ldap`, `apt-get install php5-ldap`, or a similar package manager command.</div><div class="line"></div><div class="line">yum install php-ldap -y</div></pre></td></tr></table></figure>
<p>æ³¨ï¼šå¦‚æœç¬¬ä¸€æ¬¡ç®¡ç†å‘˜ç™»å½•ä»¥åï¼Œæ²¡æœ‰ä¿®æ”¹ç™»å½•æ–¹å¼ï¼Œæ¥ç€é€€å‡ºã€‚ä¸‹æ¬¡ç™»å½•å¯èƒ½ä¼šè¢«é”ä½ï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è§£é”ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/bin/auth recover &lt;username&gt;</div></pre></td></tr></table></figure>
<h3 id="1-2-è®¾ç½®ç”¨æˆ·ç™»å½•è®¤è¯æ–¹å¼"><a href="#1-2-è®¾ç½®ç”¨æˆ·ç™»å½•è®¤è¯æ–¹å¼" class="headerlink" title="1.2 è®¾ç½®ç”¨æˆ·ç™»å½•è®¤è¯æ–¹å¼"></a>1.2 è®¾ç½®ç”¨æˆ·ç™»å½•è®¤è¯æ–¹å¼</h3><p>ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼Œåœ¨å·¦ä¾§çš„èœå•ä¸­é€‰æ‹© Auth ï¼Œç„¶åç‚¹å‡»å³ä¸Šä¾§ Add Providerï¼Œåœ¨åˆ—è¡¨ä¸­é€‰åˆ™ä½ éœ€è¦çš„è®¤è¯æ–¹å¼ã€‚</p>
<p>æˆ‘é€‰æ‹©æ˜¯<code>Username/Password</code>çš„æ–¹å¼ï¼Œå³ç”¨æˆ·è‡ªå·±æ³¨å†Œ<code>Phabricator</code>è´¦å·ã€‚ä¸ºäº†ä¿éšœå®‰å…¨ï¼Œæˆ‘è®¾ç½®äº†åªå…è®¸å…¬å¸é‚®ç®±åœ°å€æ³¨å†Œï¼š<code>Config ---&gt; Core Settings ---&gt; Authentication ---&gt; auth.email-domains</code>ã€‚ä½ è¿˜å¯ä»¥é€‰æ‹© auth.require-approval ï¼Œå³æ–°æ³¨å†Œç”¨æˆ·éœ€è¦ç®¡ç†å‘˜æ‰¹å‡†ã€‚</p>
<h3 id="1-3-è®¾ç½®é‚®ä»¶å‘é€æœåŠ¡å‚æ•°"><a href="#1-3-è®¾ç½®é‚®ä»¶å‘é€æœåŠ¡å‚æ•°" class="headerlink" title="1.3 è®¾ç½®é‚®ä»¶å‘é€æœåŠ¡å‚æ•°"></a>1.3 è®¾ç½®é‚®ä»¶å‘é€æœåŠ¡å‚æ•°</h3><p>é¦–å…ˆï¼Œé…ç½® mail-adapter ï¼ˆé‚®ä»¶å‘é€æ–¹å¼ï¼‰ï¼š<code>Config ---&gt; Core Settings ---&gt; Mail ---&gt; metamta.mail-adapter</code>ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ PhabricatorMailImplementationPHPMailerAdapter ï¼Œé€šè¿‡SMTPçš„æ–¹å¼å‘é€é‚®ä»¶ã€‚åœ¨é€‰æ‹©å®Œä¹‹åï¼Œéœ€è¦è®¾ç½®SMTPæœåŠ¡å™¨åœ°å€ã€è´¦å·å’Œå¯†ç ï¼šConfig â€”&gt; Core Settings â€”&gt; PHPMailer â€”&gt; metamta.mail-adapterï¼Œæ ¹æ®ä½ è‡ªå·±é‚®ç®±çš„é…ç½®ï¼Œç›¸åº”çš„è®¾ç½® phpmailer.smtp-hostã€phpmailer.smtp-portã€phpmailer.smtp-protocolã€phpmailer.smtp-userã€phpmailer.smtp-passwordã€phpmailer.smtp-encoding ã€‚</p>
<h3 id="2-é‚®ç®±å…³è”"><a href="#2-é‚®ç®±å…³è”" class="headerlink" title="2.é‚®ç®±å…³è”"></a>2.é‚®ç®±å…³è”</h3><p>åˆ‡æ¢åˆ°<code>phabricator/bin/</code>ç›®å½•ä¸‹è¿è¡Œ<code>daemonï¼š./bin/phd start</code>ã€‚ æ³¨æ„æ¯æ¬¡é‡å¯éœ€è¦å†æ¬¡å¯ç”¨ï¼Œå› æ­¤å»ºè®®æ”¾åˆ°å¯åŠ¨è„šæœ¬ä¸Šã€‚</p>
<p>é…ç½®mailï¼šé€šè¿‡webè®¿é—®phabricatorå¹¶åœ¨é¡µé¢ä¸Šè¿›è¡Œé…ç½®ï¼šï¼ˆè¿™é‡Œä½¿ç”¨çš„æ˜¯å¤–éƒ¨SMTP serverçš„æ–¹å¼ï¼Œæ›´å¤šæ–¹å¼å‚è§phabricator docsï¼‰</p>
<pre><code>ç”¨administratorè´¦å·ç™»å½•åï¼Œåœ¨administrationæ é€‰æ‹©Configè¿›å…¥
</code></pre><p>1ï¼‰é€‰æ‹©mailï¼Œè®¾ç½®<br>    metamta.default-address â€“ xxxx@163.com // æ³¨æ„ï¼šè¿™é‡Œå¿…é¡»è¦ç”¨ä¸smtpæœåŠ¡å™¨å¯¹åº”çš„é‚®ç®±åœ°å€ï¼Œä¸ç„¶é‚®ä»¶å‘ä¸å‡ºå»</p>
<pre><code>metamta.domain -- phabricator.myproject.com // éšæ„

metamta.mail-adapter: set to &quot;PhabricatorMailImplementationPHPMailerAdapter&quot;

metamta.send-immediately: Send Via Daemons ï¼ˆç›®å‰ç‰ˆæœ¬è²Œä¼¼æ²¡æœ‰ï¼‰
</code></pre><p>2ï¼‰é€‰æ‹©PHPMailerï¼Œè®¾ç½®ï¼šï¼ˆä»¥163.comçš„SMTP serverä¸ºä¾‹ï¼‰<br>    phpmailer.mailer: set to â€œsmtpâ€. ï¼ˆé»˜è®¤ï¼‰</p>
<pre><code>phpmailer.smtp-host: smtp.163.com 

phpmailer.smtp-port: 25 ï¼ˆé»˜è®¤ï¼‰

phpmailer.smtp-user: xxxx

phpmailer.smtp-password: xxxx
</code></pre><p>ç›®å‰ç‰ˆæœ¬é¡µé¢ä¸Šä¸èƒ½é…ç½®PHPMailerï¼Œåªèƒ½ä½¿ç”¨å·¥å…·/bin/configå·¥å…·setç›¸å¯¹åº”çš„é…ç½®é¡¹ã€‚</p>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">phabricator/</span> $ ./<span class="string">bin/</span><span class="string">mail </span><span class="built_in">list-outbound</span>   <span class="comment"># List outbound mail.</span></div><div class="line"><span class="string">phabricator/</span> $ ./<span class="string">bin/</span><span class="string">mail </span><span class="string">show-outbound </span>  <span class="comment"># Show details about messages.</span></div><div class="line"><span class="string">phabricator/</span> $ ./<span class="string">bin/</span><span class="string">mail </span><span class="string">send-test </span>      <span class="comment"># Send test messages.</span></div></pre></td></tr></table></figure>
<h3 id="3-å‚è€ƒï¼š"><a href="#3-å‚è€ƒï¼š" class="headerlink" title="3. å‚è€ƒï¼š"></a>3. å‚è€ƒï¼š</h3><p><a href="https://www.oschina.net/question/191440_125562" target="_blank" rel="external">https://www.oschina.net/question/191440_125562</a>  Phabricatorå…¥é—¨æ‰‹å†Œ</p>
<p><a href="http://blog.csdn.net/zzllabcd/article/details/49997421" target="_blank" rel="external">http://blog.csdn.net/zzllabcd/article/details/49997421</a> 10.04Ubuntuå®‰è£…</p>
<p><a href="http://www.cnblogs.com/clovn/p/5103611.html" target="_blank" rel="external">http://www.cnblogs.com/clovn/p/5103611.html</a> debian7å®‰è£…</p>
<p><a href="https://secure.phabricator.com/book/phabricator/article/installation_guide/" target="_blank" rel="external">https://secure.phabricator.com/book/phabricator/article/installation_guide/</a> å®˜æ–¹guider</p>
<p><a href="https://liuzhichao.com/p/1992.html" target="_blank" rel="external">https://liuzhichao.com/p/1992.html</a>  Phabricator å®è·µä¹‹é…ç½®è´¦å·å’Œæ³¨å†Œ</p>
<p><a href="https://www.oschina.net/question/191440_125562" target="_blank" rel="external">https://www.oschina.net/question/191440_125562</a> å…¥é—¨æ‰‹å†Œ</p>
<p><a href="http://www.jianshu.com/p/b1a75a14638c" target="_blank" rel="external">http://www.jianshu.com/p/b1a75a14638c</a>  ç®€ä¹¦ä¸­çš„åˆ†äº«ï¼ˆè¾ƒä¸ºå®Œæ•´ï¼‰</p>
<p><a href="http://www.cnblogs.com/ToDoToTry/p/3956687.html" target="_blank" rel="external">http://www.cnblogs.com/ToDoToTry/p/3956687.html</a> git serveræ­å»ºæŒ‡å—</p>
<p><a href="https://my.oschina.net/miger/blog/775609" target="_blank" rel="external">https://my.oschina.net/miger/blog/775609</a> linuxå¹³å°arcå·¥å…·çš„ä½¿ç”¨</p>
<p><a href="http://blog.csdn.net/peapon/article/details/29881575" target="_blank" rel="external">http://blog.csdn.net/peapon/article/details/29881575</a> windowsä¸­arcçš„ä½¿ç”¨</p>

	

	
		<span class="different-posts"><a href="/2017/01/07/è‡ªåŠ¨åŒ–+Jenkins/Phabricator/Centos7æ­å»ºé…ç½®phabricatorå¼€æºçš„å¯è§†åŒ–ä»£ç å®¡æŸ¥å·¥å…·/" onclick="window.history.go(-1); return false;">â¬…ï¸ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2019 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
