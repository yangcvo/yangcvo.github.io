<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Personal blog, thinking and sharing of technology and life">
    <meta name="keyword"  content="undefined">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
          ç ”ç©¶å­¦ä¹  Elasticsearch 5.0.0 åŠŸèƒ½æå‡å“ªäº›,ESå¦‚ä½•å¼¹æ€§è¿ç§»æ—¥å¿—æ•°æ®ï¼Œå®‰è£…éœ€è¦ä»€ä¹ˆç¯å¢ƒï¼Ÿ - Yancy&#39;s blog
        
    </title>

    <link rel="canonical" href="http://blog.yancy.cc/2017/03/30/æ—¥å¿—åˆ†æå¹³å°/Elasticsearch/ç ”ç©¶å­¦ä¹  Elasticsearch 5.0.0 åŠŸèƒ½æå‡å“ªäº›,ESå¦‚ä½•å¼¹æ€§è¿ç§»æ—¥å¿—æ•°æ®ï¼Œå®‰è£…éœ€è¦ä»€ä¹ˆç¯å¢ƒï¼Ÿ/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Yancy&#39;s blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/ARCHIVES/archives.html">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/ABOUT/About.html">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Image to hack wechat -->
<!-- <img src="http://blog.yancy.cc/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="{{ site.baseurl }}/{% if page.header-img %}{{ page.header-img }}{% else %}{{ site.header-img }}{% endif %}" width="0" height="0"> -->

<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('/img/home-bg.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                          <a class="tag" href="/tags/#Elasticsearch" title="Elasticsearch">Elasticsearch</a>
                        
                    </div>
                    <h1>ç ”ç©¶å­¦ä¹  Elasticsearch 5.0.0 åŠŸèƒ½æå‡å“ªäº›,ESå¦‚ä½•å¼¹æ€§è¿ç§»æ—¥å¿—æ•°æ®ï¼Œå®‰è£…éœ€è¦ä»€ä¹ˆç¯å¢ƒï¼Ÿ</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by Yancy on
                        2017-03-30
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <p>ES ç°åœ¨æ™®éå¤§å…¬å¸éƒ½å·²ç»åœ¨ä½¿ç”¨ï¼Œæœ‰çš„ç”¨æ¥åšæ•°æ®å­˜å‚¨ï¼Œä¹Ÿæœ‰åšæ€§èƒ½ç›‘æ§ï¼Œä¹Ÿæœ‰åšæ—¥å¿—æ”¶é›†ï¼Œè·Ÿå¤§æ•°æ®ç»“åˆåšæ—¥å¿—åˆ†æã€‚<br>ä»Šå¤©åœ¨å®¶æ— èŠç ”ç©¶å®˜ç½‘å­¦ä¹ äº†ä¸‹Elasticsearch5.0.0 åŠŸèƒ½æ–°å¢å“ªäº›ï¼Œä¸ªäººè§‰å¾—ESä¹Ÿæ˜¯ç°åœ¨å¼€æºæ—¥å¿—åˆ†æå¹³å°æ¯”è¾ƒç«çš„ï¼Œä»14å¹´å¼€å§‹é™†ç»­ä½¿ç”¨é¢‘ç‡ä¸æ–­æå‡ã€‚<br>ä¹‹å‰ä¹Ÿæœ‰äº†è§£è¿‡Graylog  ç°åœ¨æ¯”ES åšæ•°æ®å­˜å‚¨åˆ†æ ä¸é”™çš„æ˜¯Graylog æ¯”ESæ€§èƒ½å¥½ã€‚<br>åºŸè¯ä¸å¤šè¯´äº†å“ˆå“ˆ</p>
<a id="more"></a>
<h3 id="Elasticsearch-5-0-0å‘å¸ƒ"><a href="#Elasticsearch-5-0-0å‘å¸ƒ" class="headerlink" title="Elasticsearch 5.0.0å‘å¸ƒ"></a>Elasticsearch 5.0.0å‘å¸ƒ</h3><p>2016å¹´10æœˆ26æ—¥å‘å¸ƒ Elasticsearch 5.0.0 ä»Šå¤©å»ä¸‹è½½å§ï¼ä½ çŸ¥é“ä½ æƒ³ã€‚</p>
<p><a href="https://www.elastic.co/downloads/elasticsearch" target="_blank" rel="external">ä¸‹è½½Elasticsearch 5.0.0</a><br><a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.0/release-notes-5.0.0.html" target="_blank" rel="external">Elasticsearch 5.0.0å‘è¡Œè¯´æ˜</a><br><a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.0/release-notes-5.0.0.html" target="_blank" rel="external">å¼¹æ€§æœç´¢5.0çªç ´å˜åŒ–</a></p>
<p>Elasticsearch 5.0.0å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ© è¿™æ˜¯æœ‰å²ä»¥æ¥æœ€å¿«ï¼Œæœ€å®‰å…¨ï¼Œæœ€å…·å¼¹æ€§ï¼Œæœ€ç®€å•æ˜“ç”¨çš„Elasticsearchç‰ˆæœ¬ï¼Œå®ƒå…·æœ‰ä¸€ç³»åˆ—å¢å¼ºåŠŸèƒ½å’Œæ–°åŠŸèƒ½ã€‚</p>
<ul>
<li>ç´¢å¼•æ€§èƒ½</li>
<li>å–é£ŸèŠ‚ç‚¹</li>
<li>æ— ç—›è„šæœ¬</li>
<li>æ–°çš„æ•°æ®ç»“æ„</li>
<li>æœç´¢å’Œèšåˆ</li>
<li>ç”¨æˆ·å‹å¥½</li>
<li>å¼¹æ€§</li>
<li>Java RESTå®¢æˆ·ç«¯</li>
<li>è¿ç§»åŠ©æ‰‹</li>
</ul>
<blockquote>
<p>ä¸‹é¢ä»å®˜ç½‘ä¸Šé¢ç¿»è¯‘å¾—æ¥çš„ï¼š</p>
</blockquote>
<h3 id="ç´¢å¼•æ€§èƒ½"><a href="#ç´¢å¼•æ€§èƒ½" class="headerlink" title="ç´¢å¼•æ€§èƒ½"></a>ç´¢å¼•æ€§èƒ½</h3><p>ç”±äºåŒ…æ‹¬æ›´å¥½çš„æ•°å­—æ•°æ®ç»“æ„ï¼ˆå‚è§æ–°æ•°æ®ç»“æ„ï¼‰çš„ä¸€äº›æ›´æ”¹ï¼Œç´¢å¼•ååé‡åœ¨5.0.0ä¸­æœ‰äº†æ˜¾ç€æ”¹å–„ï¼Œé”ä¸­çš„äº‰ç”¨å‡å°‘ï¼Œé˜»æ­¢å¯¹åŒä¸€æ–‡æ¡£çš„å¹¶å‘æ›´æ–°ï¼Œä»¥åŠå‡å°‘äº‹åŠ¡æ—¥å¿—æ—¶çš„é”å®šéœ€æ±‚ã€‚å¼‚æ­¥translog fsyncingå°†ç‰¹åˆ«æœ‰åˆ©äºæ—‹è½¬ç£ç›˜çš„ç”¨æˆ·ï¼Œè€Œä¾èµ–Elasticsearchè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£IDæ—¶ï¼Œä»…è¿½åŠ ç”¨ä¾‹ï¼ˆåŸºäºæ€è€ƒæ—¶é—´çš„äº‹ä»¶ï¼‰å…·æœ‰å¾ˆå¤§çš„ååé‡æé«˜ã€‚å¯¹å®æ—¶æ–‡æ¡£GETçš„æ”¯æŒçš„å†…éƒ¨å˜åŒ–æ„å‘³ç€ç´¢å¼•ç¼“å†²åŒºå¯ç”¨çš„å†…å­˜æ›´å¤šï¼Œåƒåœ¾æ”¶é›†æ—¶é—´å°‘å¾—å¤šã€‚</p>
<p>æ ¹æ®æ‚¨çš„ç”¨ä¾‹ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°åœ¨æé«˜ååé‡çš„25ï¼…è‡³80ï¼…ä¹‹é—´ã€‚</p>
<h3 id="IngestèŠ‚ç‚¹"><a href="#IngestèŠ‚ç‚¹" class="headerlink" title="IngestèŠ‚ç‚¹"></a>IngestèŠ‚ç‚¹</h3><p>ã€€ã€€å‘Elasticsearchæ·»åŠ æ•°æ®æ›´ç®€å•äº†ã€‚Logstashæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œè€Œä¸€äº›è¾ƒå°çš„ç”¨æˆ·åªéœ€è¦è¿‡æ»¤å™¨ï¼Œä¸éœ€è¦å®ƒæ‰€æä¾›çš„ä¼—å¤šè·¯ç”±é€‰é¡¹ã€‚å› æ­¤ï¼ŒElasticå°†ä¸€äº›æœ€æµè¡Œçš„Logstashè¿‡æ»¤å™¨ï¼ˆå¦‚grokã€splitï¼‰ç›´æ¥åœ¨Elasticsearchä¸­å®ç°ä¸ºå¤„ç†å™¨ã€‚å¤šä¸ªå¤„ç†å™¨å¯ä»¥ç»„åˆæˆä¸€ä¸ªç®¡é“ï¼Œåœ¨ç´¢å¼•æ—¶åº”ç”¨åˆ°æ–‡æ¡£ä¸Šã€‚</p>
<h3 id="Painlessè„šæœ¬"><a href="#Painlessè„šæœ¬" class="headerlink" title="Painlessè„šæœ¬"></a>Painlessè„šæœ¬</h3><p>ã€€ã€€Elasticsearchä¸­å¾ˆå¤šåœ°æ–¹ç”¨åˆ°äº†è„šæœ¬ï¼Œè€Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œè„šæœ¬åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ç¦ç”¨çš„ï¼Œè¿™ä»¤äººç›¸å½“å¤±æœ›ã€‚ä¸ºæ­¤ï¼ŒElasticå¼€å‘äº†ä¸€ç§æ–°çš„è„šæœ¬è¯­è¨€Painlessã€‚è¯¥è¯­è¨€æ›´å¿«ã€æ›´å®‰å…¨ï¼Œè€Œä¸”é»˜è®¤æ˜¯å¯ç”¨çš„ã€‚ä¸ä»…å¦‚æ­¤ï¼Œå®ƒçš„æ‰§è¡Œé€Ÿåº¦æ˜¯Groovyçš„4å€ï¼Œè€Œä¸”æ­£åœ¨å˜å¾—æ›´å¿«ã€‚Painlesså·²ç»æˆä¸ºé»˜è®¤è„šæœ¬è¯­è¨€ï¼Œè€ŒGroovyã€Javascriptå’ŒPythonéƒ½é­åˆ°å¼ƒç”¨ã€‚è¦äº†è§£æœ‰å…³è¿™é—¨æ–°è¯­è¨€çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·ç‚¹å‡»è¿™é‡Œã€‚</p>
<h3 id="æ–°æ•°æ®ç»“æ„"><a href="#æ–°æ•°æ®ç»“æ„" class="headerlink" title="æ–°æ•°æ®ç»“æ„"></a>æ–°æ•°æ®ç»“æ„</h3><p>ã€€ã€€Lucene 6å¸¦æ¥äº†ä¸€ä¸ªæ–°çš„Points æ•°æ®ç»“æ„K-Dæ ‘ï¼Œç”¨äºå­˜å‚¨æ•°å€¼å‹å’Œåœ°ç†ä½ç½®å­—æ®µï¼Œå½»åº•æ”¹å˜äº†æ•°å€¼å‹å€¼çš„ç´¢å¼•å’Œæœç´¢æ–¹å¼ã€‚åŸºå‡†æµ‹è¯•è¡¨æ˜ï¼ŒPointså°†æŸ¥è¯¢é€Ÿåº¦æå‡äº†36%ï¼Œå°†ç´¢å¼•é€Ÿåº¦æå‡äº†71%ï¼Œè€Œå ç”¨çš„ç£ç›˜å’Œå†…å­˜ç©ºé—´åˆ†åˆ«å‡å°‘äº†66%å’Œ85%ï¼ˆå‚è§â€œåœ¨5.0ä¸­æœç´¢æ•°å€¼â€ï¼‰ã€‚</p>
<h4 id="æœç´¢å’Œèšåˆ"><a href="#æœç´¢å’Œèšåˆ" class="headerlink" title="æœç´¢å’Œèšåˆ"></a>æœç´¢å’Œèšåˆ</h4><p>ã€€ã€€å€ŸåŠ©å³æ—¶èšåˆï¼ŒKibanaå›¾è¡¨ç”Ÿæˆé€Ÿåº¦æ˜¾è‘—æå‡ã€‚Elasticç”¨ä¸€å¹´çš„æ—¶é—´å¯¹æœç´¢APIè¿›è¡Œäº†é‡æ„ï¼ŒElasticsearchç°åœ¨å¯ä»¥æ›´å·§å¦™åœ°æ‰§è¡ŒèŒƒå›´æŸ¥è¯¢ï¼Œåªé’ˆå¯¹å·²ç»å‘ç”Ÿå˜åŒ–çš„ç´¢å¼•é‡æ–°è®¡ç®—èšåˆï¼Œè€Œä¸æ˜¯é’ˆå¯¹æ¯ä¸ªæŸ¥è¯¢ä»å¤´å¼€å§‹é‡æ–°è®¡ç®—ã€‚åœ¨æœç´¢æ–¹é¢ï¼Œé»˜è®¤çš„ç›¸å…³æ€§è®¡ç®—å·²ç»ç”±TF/IDFæ¢æˆäº†æ›´å…ˆè¿›çš„BM25ã€‚è¡¥å…¨å»ºè®®ç¨‹åºç»è¿‡äº†å®Œå…¨é‡å†™ï¼Œå°†å·²åˆ é™¤çš„æ–‡æ¡£ä¹Ÿè€ƒè™‘äº†è¿›æ¥ã€‚</p>
<h3 id="æ›´å‹å¥½"><a href="#æ›´å‹å¥½" class="headerlink" title="æ›´å‹å¥½"></a>æ›´å‹å¥½</h3><p>ã€€ã€€Elasticsearch 5.0æ›´å®‰å…¨ã€æ›´æ˜“ç”¨ã€‚ä»–ä»¬é‡‡ç”¨äº†â€œå°½æ—©æç¤ºâ€çš„æ–¹æ³•ã€‚å¦‚æœå‡ºç°äº†é—®é¢˜ï¼Œåˆ™æ–°ç‰ˆæœ¬ä¼šåŠæ—©ç»™å‡ºæç¤ºã€‚ä¾‹å¦‚ï¼ŒElasticsearch 5.0ä¼šä¸¥æ ¼éªŒè¯è®¾ç½®ã€‚å¦‚æœå®ƒä¸èƒ½è¯†åˆ«æŸé¡¹è®¾ç½®çš„å€¼ï¼Œå°±ä¼šç»™å‡ºæç¤ºå’Œå»ºè®®ã€‚ä¸ä»…å¦‚æ­¤ï¼Œé›†ç¾¤å’Œç´¢å¼•è®¾ç½®ç°åœ¨å¯ä»¥é€šè¿‡nullè¿›è¡Œè§£é™¤ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰å…¶ä»–çš„ä¸€äº›æ”¹è¿›ï¼Œä¾‹å¦‚ï¼Œrolloverå’Œshrink APIå¯ç”¨äº†ä¸€ç§æ–°çš„æ¨¡å¼æ¥ç®¡ç†åŸºäºæ—¶é—´çš„ç´¢å¼•ï¼Œå¼•å…¥æ–°çš„cluster-allocation-explain APIï¼Œç®€åŒ–ç´¢å¼•åˆ›å»ºã€‚</p>
<h3 id="å¼¹æ€§"><a href="#å¼¹æ€§" class="headerlink" title="å¼¹æ€§"></a>å¼¹æ€§</h3><p>ã€€ã€€Elasticsearchåˆ†å¸ƒå¼æ¨¡å‹çš„æ¯ä¸€éƒ¨åˆ†éƒ½è¢«åˆ†è§£ã€é‡æ„å’Œç®€åŒ–ï¼Œæå‡äº†å¯é æ€§ã€‚é›†ç¾¤çŠ¶æ€æ›´æ–°ç°åœ¨ä¼šç­‰å¾…é›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ç¡®è®¤ã€‚å¦‚æœä¸€ä¸ªâ€œå¤åˆ¶ç‰‡ï¼ˆreplica shardï¼‰â€è¢«â€œä¸»ç‰‡ï¼ˆprimaryï¼‰â€æ ‡è®°ä¸ºå¤±è´¥ï¼Œåˆ™ä¸»ç‰‡ä¼šç­‰å¾…â€œä¸»èŠ‚ç‚¹ï¼ˆmasterï¼‰â€çš„å“åº”ã€‚ç´¢å¼•ç°åœ¨ä½¿ç”¨æ•°æ®è·¯å¾„ä¸­çš„UUIDï¼Œè€Œä¸æ˜¯ç´¢å¼•åï¼Œé¿å…äº†å‘½åå†²çªã€‚å¦å¤–ï¼ŒElasticsearchç°åœ¨è¿›è¡Œå¯åŠ¨æ£€æŸ¥ï¼Œç¡®ä¿ç³»ç»Ÿé…ç½®æ²¡æœ‰é—®é¢˜ã€‚é…ç½®æ¯”è¾ƒéº»çƒ¦ï¼Œä½†å¦‚æœåªæ˜¯è¯•ç”¨ï¼Œå¼€å‘äººå‘˜ä¹Ÿå¯ä»¥é€‰æ‹©localhost-onlyæ¨¡å¼ï¼Œé¿å…ç¹ççš„é…ç½®ã€‚å¦å¤–ï¼Œæ–°ç‰ˆæœ¬è¿˜å¢åŠ äº†æ–­è·¯å™¨åŠå…¶ä»–ä¸€äº›è½¯é™åˆ¶ï¼Œé™åˆ¶è¯·æ±‚ä½¿ç”¨çš„å†…å­˜å¤§å°ï¼Œä¿æŠ¤é›†ç¾¤å…å—æ¶æ„ç”¨æˆ·æ”»å‡»ã€‚<br>ã€€ã€€æ­¤å¤–ï¼Œè¯¥ç‰ˆæœ¬è¿˜æä¾›äº†ä¸€ä¸ªåº•å±‚çš„Java REST/HTTPå®¢æˆ·ç«¯ï¼Œå¯ä»¥ç”¨äºç›‘å¬ã€æ—¥å¿—è®°å½•ã€è¯·æ±‚è½®è¯¢ã€æ•…éšœèŠ‚ç‚¹é‡è¯•ç­‰ã€‚å®ƒä½¿ç”¨Java 7ï¼Œå°†ä¾èµ–é™åˆ°äº†æœ€ä½ï¼Œæ¯”Transportå®¢æˆ·ç«¯çš„ä¾èµ–å†²çªå°‘ã€‚è€Œåœ¨åŸºå‡†æµ‹è¯•ä¸­ï¼Œå®ƒçš„æ€§èƒ½å¹¶ä¸è¾“äºTransportå®¢æˆ·ç«¯ã€‚ä¸è¿‡ï¼Œè¿™æ˜¯ä¸€ä¸ªåº•å±‚å®¢æˆ·ç«¯ï¼Œç›®å‰è¿˜æ²¡æœ‰æä¾›ä»»ä½•æŸ¥è¯¢æ„å»ºå™¨æˆ–è¾…åŠ©å™¨ã€‚å®ƒçš„è¾“å…¥å‚æ•°å’Œè¾“å‡ºç»“æœéƒ½æ˜¯JSONã€‚<br>ã€€ã€€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥ç‰ˆæœ¬å¼•å…¥äº†è®¸å¤šç ´åæ€§æ›´æ”¹ï¼Œå¥½åœ¨ä»–ä»¬æä¾›äº†ä¸€ä¸ªè¿ç§»è¾…åŠ©æ’ä»¶ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜ä»Elasticsearch 2.3.x/2.4.xè¿ç§»åˆ°Elasticsearch 5.0ã€‚å¦‚æœæ˜¯ä»æ›´æ—©çš„Elasticsearchç‰ˆæœ¬å‘æœ€æ–°çš„5.0ç‰ˆæœ¬è¿ç§»ï¼Œåˆ™è¯·æŸ¥é˜…å‡çº§æ–‡æ¡£ã€‚</p>
<h3 id="Java-RESTå®¢æˆ·ç«¯"><a href="#Java-RESTå®¢æˆ·ç«¯" class="headerlink" title="Java RESTå®¢æˆ·ç«¯"></a>Java RESTå®¢æˆ·ç«¯</h3><p>ç»è¿‡å¤šå¹´çš„ç­‰å¾…ï¼Œæˆ‘ä»¬ç»ˆäºå‘å¸ƒäº†ä¸€ä¸ªä½çº§çš„Java HTTP / RESTå®¢æˆ·ç«¯ã€‚å®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„HTTPå®¢æˆ·ç«¯ï¼Œå…·æœ‰æœ€å°‘çš„ä¾èµ–å…³ç³»ï¼Œå¯ä»¥å¤„ç†å—…æ¢ï¼Œè®°å½•ï¼Œå¾ªç¯è¯·æ±‚ï¼Œå¹¶é‡è¯•èŠ‚ç‚¹æ•…éšœã€‚å®ƒä½¿ç”¨çš„RESTå±‚å†å²ä¸Šæ¯”Java APIæ›´ç¨³å®šï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥è·¨è¶Šå‡çº§ä½¿ç”¨ï¼Œç”šè‡³å¯èƒ½åœ¨ä¸»è¦ç‰ˆæœ¬ä¹‹é—´è¿›è¡Œå‡çº§ã€‚å®ƒä¸Java 7ä¸€èµ·å·¥ä½œï¼Œå¹¶ä¸”å…·æœ‰æœ€å°çš„ä¾èµ–æ€§ï¼Œå¯¼è‡´æ¯”ä¼ è¾“å®¢æˆ·ç«¯æ›´å°‘çš„ä¾èµ–å†²çªã€‚å®ƒåªæ˜¯HTTPï¼Œå› æ­¤å¯ä»¥åƒæ‰€æœ‰å…¶ä»–HTTPå®¢æˆ·ç«¯ä¸€æ ·è¿›è¡Œé˜²ç«å¢™/ä»£ç†ã€‚åœ¨æˆ‘ä»¬çš„åŸºå‡†æµ‹è¯•ä¸­ï¼ŒJava RESTå®¢æˆ·ç«¯ ä¸Transportå®¢æˆ·ç«¯çš„åŠŸèƒ½ç±»ä¼¼ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªä½çº§å®¢æˆ·ç«¯ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬ä¸æä¾›ä»»ä½•å¯ä»¥åœ¨IDEä¸­è‡ªåŠ¨å®Œæˆçš„æŸ¥è¯¢æ„å»ºå™¨æˆ–å¸®åŠ©å™¨ã€‚å®ƒæ˜¯JSON-inï¼ŒJSON-outï¼Œç”±ä½ æ¥æ„å»ºJSONã€‚å¼€å‘ä¸ä¼šåœæ­¢åœ¨è¿™é‡Œ - æˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªAPIï¼Œå®ƒå°†å¸®åŠ©æ‚¨æ„å»ºæŸ¥è¯¢å¹¶è§£æå“åº”ã€‚æ‚¨å¯ä»¥æŒ‰ç…§é—®é¢˜ï¼ƒ19055ä¸­çš„æ›´æ”¹è¿›è¡Œæ“ä½œã€‚</p>
<h3 id="è¿ç§»åŠ©æ‰‹"><a href="#è¿ç§»åŠ©æ‰‹" class="headerlink" title="è¿ç§»åŠ©æ‰‹"></a>è¿ç§»åŠ©æ‰‹</h3><p>Elasticsearch Migration Helperæ˜¯ä¸€ä¸ªç½‘ç«™æ’ä»¶ï¼Œå¯ä»¥å¸®åŠ©ä»<code>Elasticsearch 2.3.x / 2.4.x</code>è¿ç§»åˆ°Elasticsearch 5.0ã€‚å®ƒæœ‰ä¸‰ä¸ªå·¥å…·ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">é›†ç¾¤æ£€æŸ¥</div><div class="line">å¯¹é›†ç¾¤ï¼ŒèŠ‚ç‚¹å’Œç´¢å¼•æ‰§è¡Œä¸€ç³»åˆ—æ£€æŸ¥ï¼Œå¹¶æé†’æ‚¨å‡çº§ä¹‹å‰éœ€è¦è§£å†³çš„ä»»ä½•å·²çŸ¥é—®é¢˜ã€‚</div><div class="line"><span class="selector-tag">Reindex</span>åŠ©æ‰‹</div><div class="line">åœ¨<span class="selector-tag">v2</span><span class="selector-class">.0</span><span class="selector-class">.0</span>ä¹‹å‰åˆ›å»ºçš„ç´¢å¼•éœ€è¦é‡æ–°ç¼–å·ï¼Œæ‰èƒ½åœ¨<span class="selector-tag">Elasticsearch</span> 5<span class="selector-class">.x</span>ä¸­ä½¿ç”¨ã€‚<span class="selector-tag">reindex</span>å¸®åŠ©å™¨ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å‡çº§æ—§ç´¢å¼•ã€‚</div><div class="line">å¼ƒç”¨æ—¥å¿—</div><div class="line"><span class="selector-tag">Elasticsearch</span>é™„å¸¦äº†ä¸€ä¸ªå¼ƒç”¨è®°å½•å™¨ï¼Œæ¯å½“ä½¿ç”¨ä¸æ¨èä½¿ç”¨çš„åŠŸèƒ½æ—¶ï¼Œå®ƒå°†è®°å½•æ¶ˆæ¯ã€‚æ­¤å·¥å…·å¯å¯ç”¨æˆ–ç¦ç”¨ç¾¤é›†ä¸Šçš„å¼ƒç”¨æ—¥å¿—è®°å½•ã€‚</div></pre></td></tr></table></figure>
<p>å®˜ç½‘æ¨èè¿ç§»æ–‡æ¡£ï¼šInstruction for <a href="(https://github.com/elastic/elasticsearch-migration/blob/2.x/README.asciidoc">install the Elasticsearch migration helper. </a>)</p>
<h3 id="Elasticsearch-5-0-0-å®‰è£…éœ€è¦å“ªäº›è¦æ±‚ã€‚"><a href="#Elasticsearch-5-0-0-å®‰è£…éœ€è¦å“ªäº›è¦æ±‚ã€‚" class="headerlink" title="Elasticsearch 5.0.0 å®‰è£…éœ€è¦å“ªäº›è¦æ±‚ã€‚"></a>Elasticsearch 5.0.0 å®‰è£…éœ€è¦å“ªäº›è¦æ±‚ã€‚</h3><p>Elasticsearchéœ€è¦ä¾èµ–Java JDK1.8</p>
<h3 id="Communicative-learning"><a href="#Communicative-learning" class="headerlink" title="Communicative learning:"></a>Communicative learning:</h3><p>ğŸ§  Linux shell_ senior operation and maintenance faction: QQ group <code>459096184</code> circle (system operation and maintenance - application operation and maintenance - automation operation and maintenance - virtualization technology research, welcome to join)<br>ğŸ§  BigData-Exchange School:QQ group <code>521621407</code> circles (big data Yun Wei) (Hadoop developer) (big data research enthusiasts) welcome to join</p>
<p>Bidata have internal WeChat exchange group, learn from each other, join QQ group has links.</p>


                <hr>

                
                <!-- å¤šè¯´ Share start -->
                </style>
                <div class="ds-share"
                    style="text-align: right"
                    data-thread-key="2017/03/30/æ—¥å¿—åˆ†æå¹³å°/Elasticsearch/ç ”ç©¶å­¦ä¹  Elasticsearch 5.0.0 åŠŸèƒ½æå‡å“ªäº›,ESå¦‚ä½•å¼¹æ€§è¿ç§»æ—¥å¿—æ•°æ®ï¼Œå®‰è£…éœ€è¦ä»€ä¹ˆç¯å¢ƒï¼Ÿ/"
                    data-title="ç ”ç©¶å­¦ä¹  Elasticsearch 5.0.0 åŠŸèƒ½æå‡å“ªäº›,ESå¦‚ä½•å¼¹æ€§è¿ç§»æ—¥å¿—æ•°æ®ï¼Œå®‰è£…éœ€è¦ä»€ä¹ˆç¯å¢ƒï¼Ÿ"
                    data-url="http://blog.yancy.cc/2017/03/30/æ—¥å¿—åˆ†æå¹³å°/Elasticsearch/ç ”ç©¶å­¦ä¹  Elasticsearch 5.0.0 åŠŸèƒ½æå‡å“ªäº›,ESå¦‚ä½•å¼¹æ€§è¿ç§»æ—¥å¿—æ•°æ®ï¼Œå®‰è£…éœ€è¦ä»€ä¹ˆç¯å¢ƒï¼Ÿ/"
                    data-images=""
                    data-content="ES ç°åœ¨æ™®éå¤§å…¬å¸éƒ½å·²ç»åœ¨ä½¿ç”¨ï¼Œæœ‰çš„ç”¨æ¥åšæ•°æ®å­˜å‚¨ï¼Œä¹Ÿæœ‰åšæ€§èƒ½ç›‘æ§ï¼Œä¹Ÿæœ‰åšæ—¥å¿—æ”¶é›†ï¼Œè·Ÿå¤§æ•°æ®... | Yancy&#39;s blog " >
                    <div class="ds-share-inline">
                      <ul  class="ds-share-icons-16">
                        <li data-toggle="ds-share-icons-more"><a class="ds-more" href="#">åˆ†äº«åˆ°ï¼š</a></li>
                        <li><a class="ds-wechat flat" href="javascript:void(0);" data-service="wechat">å¾®ä¿¡</a></li>
                        <li><a class="ds-weibo flat" href="javascript:void(0);" data-service="weibo">å¾®åš</a></li>
                        <li><a class="ds-douban flat" href="javascript:void(0);" data-service="douban">è±†ç“£</a></li>
                      </ul>
                      <div class="ds-share-icons-more">
                      </div>
                    </div>
                <hr>
                </div>
                <!-- å¤šè¯´ Share end-->
                

                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2017/04/05/è¿ç»´ç¬”è®°/ã€ç¿»è¯‘ã€‘ç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœ/" data-toggle="tooltip" data-placement="top" title="ã€ç¿»è¯‘ã€‘ç›‘æ§ä¸åªæ˜¯ä¸ºäº†å¤„ç†æ•…éšœ">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2017/03/30/Bigdata-hadoop/Kafka/Kafkaæ—¥å¿—å­˜å‚¨è§£æä¸å®è·µæ•°æ®å­˜å‚¨ä¼˜åŒ–/" data-toggle="tooltip" data-placement="top" title="Kafkaæ—¥å¿—å­˜å‚¨è§£æä¸å®è·µæ•°æ®å­˜å‚¨ä¼˜åŒ–">Next Post &rarr;</a>
                        </li>
                    
                </ul>
		 

                
                <!-- å¤šè¯´è¯„è®ºæ¡† start -->
                <div class="comment">
                    <div class="ds-thread"
                        data-thread-key="2017/03/30/æ—¥å¿—åˆ†æå¹³å°/Elasticsearch/ç ”ç©¶å­¦ä¹  Elasticsearch 5.0.0 åŠŸèƒ½æå‡å“ªäº›,ESå¦‚ä½•å¼¹æ€§è¿ç§»æ—¥å¿—æ•°æ®ï¼Œå®‰è£…éœ€è¦ä»€ä¹ˆç¯å¢ƒï¼Ÿ/"
                        data-title="ç ”ç©¶å­¦ä¹  Elasticsearch 5.0.0 åŠŸèƒ½æå‡å“ªäº›,ESå¦‚ä½•å¼¹æ€§è¿ç§»æ—¥å¿—æ•°æ®ï¼Œå®‰è£…éœ€è¦ä»€ä¹ˆç¯å¢ƒï¼Ÿ"
                        data-url="http://blog.yancy.cc/2017/03/30/æ—¥å¿—åˆ†æå¹³å°/Elasticsearch/ç ”ç©¶å­¦ä¹  Elasticsearch 5.0.0 åŠŸèƒ½æå‡å“ªäº›,ESå¦‚ä½•å¼¹æ€§è¿ç§»æ—¥å¿—æ•°æ®ï¼Œå®‰è£…éœ€è¦ä»€ä¹ˆç¯å¢ƒï¼Ÿ/" >
                    </div>
                </div>
                <!-- å¤šè¯´è¯„è®ºæ¡† end -->
                

                

            </div>
    <!-- Side Catalog Container -->
        

    <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Elasticsearch" title="Elasticsearch">Elasticsearch</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="http://openskill.cn/" target="_blank">openskill.cn</a></li>
                    
                        <li><a href="http://yuzhouwan.com/" target="_blank">Benedict Jin&#39;s Blog</a></li>
                    
                </ul>
                
            </div>

        </div>
    </div>
</article>



<!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
<script type="text/javascript">
    // dynamic User by Hux
    var _user = 'kaijun';

    // duoshuo comment query.
    var duoshuoQuery = {short_name: _user };
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- å¤šè¯´å…¬å…±JSä»£ç  end -->






<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                    <li>
                        <a target="_blank" href="https://twitter.com/yancyoo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/benet1006">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">çŸ¥</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/yangcvo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/yangcvo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Yancy&#39;s blog 2019 
                    <br>
                 Theme by <a href="http://blog.yancy.cc">Yancy</a>
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span>
                    Ported by <a href="http://github.com/yangcvo">Github</a>

                    <!--<iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=kaijun&repo=hexo-theme-huxblog&type=star&count=true" >
                    </iframe>--> 
		</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://blog.yancy.cc/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->




<!-- Baidu Tongji -->


<!-- Side Catalog -->





<!-- Image to hack wechat -->
<img src="http://blog.yancy.cc/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
