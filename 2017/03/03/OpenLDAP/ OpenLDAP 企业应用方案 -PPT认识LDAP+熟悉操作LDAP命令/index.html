<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>OpenLDAPä¼ä¸šåº”ç”¨æ–¹æ¡ˆ-PPTè®¤è¯†LDAP+ç†Ÿæ‚‰æ“ä½œLDAPå‘½ä»¤ | Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		<article>
	
		<h1>OpenLDAPä¼ä¸šåº”ç”¨æ–¹æ¡ˆ-PPTè®¤è¯†LDAP+ç†Ÿæ‚‰æ“ä½œLDAPå‘½ä»¤</h1>
	
	<div class="article__infos">
		<span class="article__date">2017-03-03</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/OpenLDAP/">OpenLDAP</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/OpenLDAP/">OpenLDAP</a>
			</span>
		
	</div>

	

	
		<h4 id="è®¤è¯†LDAPç†Ÿæ‚‰LDAPé…ç½®"><a href="#è®¤è¯†LDAPç†Ÿæ‚‰LDAPé…ç½®" class="headerlink" title="è®¤è¯†LDAPç†Ÿæ‚‰LDAPé…ç½®"></a>è®¤è¯†LDAPç†Ÿæ‚‰LDAPé…ç½®</h4><p>LDAPç›®å½•ä¸­å¯ä»¥å­˜å‚¨å„ç§ç±»å‹çš„æ•°æ®ï¼šç”µå­é‚®ä»¶åœ°å€ã€é‚®ä»¶è·¯ç”±ä¿¡æ¯ã€äººåŠ›èµ„æºæ•°æ®ã€å…¬ç”¨å¯†åŒ™ã€è”ç³»äººåˆ—è¡¨ï¼Œç­‰ç­‰<br>ä½†æ˜¯ä¸æ˜¯å…³ç³»å‹æ•°æ®åº“ã€‚ä¸è±¡è¢«è®¾è®¡æˆæ¯åˆ†é’Ÿéœ€è¦å¤„ç†æˆç™¾ä¸Šåƒæ¡æ•°æ®å˜åŒ–çš„æ•°æ®åº“<br>å¯ä»¥æŠŠæ•°æ®â€œæ¨â€åˆ°è¿œç¨‹çš„åŠå…¬å®¤ï¼Œä»¥å¢åŠ æ•°æ®çš„å®‰å…¨æ€§<br>å¤åˆ¶åŠŸèƒ½ï¼Œæ•°æ®åº“äº§å•†å°±ä¼šè¦ä½ æ”¯ä»˜é¢å¤–çš„è´¹ç”¨ï¼Œè€Œä¸”ä¹Ÿå¾ˆéš¾ç®¡ç†</p>
<a id="more"></a>
<h4 id="LDAPç»„ç»‡-ç›®å½•æ ‘çš„ç»“æ„"><a href="#LDAPç»„ç»‡-ç›®å½•æ ‘çš„ç»“æ„" class="headerlink" title="LDAPç»„ç»‡-ç›®å½•æ ‘çš„ç»“æ„"></a>LDAPç»„ç»‡-ç›®å½•æ ‘çš„ç»“æ„</h4><figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">LDAPç›®å½•ä¸­çš„æ‰€æœ‰è®°å½•é¡¹éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„â€œDistinguished Nameâ€</div><div class="line">ç°åœ¨ä¸ºå…¬å¸çš„å‘˜å·¥è®¾ç½®ä¸€ä¸ªDNã€‚å¯ä»¥ç”¨åŸºäºcnæˆ–uidï¼ˆUser IDï¼‰ï¼Œä½œä¸ºå…¸å‹çš„ç”¨æˆ·å¸å·</div><div class="line">ç”¨uidè¡¨ç¤ºâ€œUser IDâ€ï¼Œä¸è¦æŠŠå®ƒå’ŒUNIXçš„uidå·æ··æ·†äº† ï¼Œå¤§å¤šæ•°å…¬å¸éƒ½ä¼šç»™æ¯ä¸€ä¸ªå‘˜å·¥å”¯ä¸€çš„ç™»å½•åï¼Œå› æ­¤ç”¨è¿™ä¸ªåŠæ³•å¯ä»¥å¾ˆå¥½åœ°ä¿å­˜å‘˜å·¥çš„ä¿¡æ¯</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">LDIFæ–‡ä»¶æ ¼å¼ä¾‹å­ï¼šä¸€ä¸ªæ™®é€šç”¨æˆ·éƒ½è¦å­˜å“ªäº›ä¿¡æ¯?</div><div class="line"></div><div class="line">ä½ å¯ä»¥ç”¨LDAPå­˜å‚¨å„ç§ç±»å‹çš„æ•°æ®å¯¹è±¡ï¼Œåªè¦è¿™äº›å¯¹è±¡å¯ä»¥ç”¨å±æ€§æ¥è¡¨ç¤ºï¼Œä¸‹é¢è¿™äº›æ˜¯å¯ä»¥åœ¨LDAPä¸­å­˜å‚¨çš„ä¸€äº›ä¿¡æ¯ï¼š </div><div class="line">å‘˜å·¥ä¿¡æ¯ï¼šå‘˜å·¥çš„å§“åã€ç™»å½•åã€å£ä»¤ã€å‘˜å·¥å·ã€ä»–çš„ç»ç†çš„ç™»å½•åï¼Œé‚®ä»¶æœåŠ¡å™¨ï¼Œç­‰ç­‰ã€‚ </div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">lDAPé»˜è®¤ç«¯å£ï¼šç«¯å£ä¸º<span class="number">389</span></div><div class="line"></div><div class="line">LDAPåŒæ­¥é…ç½®:</div><div class="line"><span class="comment"># Where to store the replica logs for database #1</span></div><div class="line"><span class="comment">#replogfileÂ Â Â Â  /var/lib/ldap/master-slapd.replog</span></div><div class="line"></div><div class="line">replogfile /var/<span class="class"><span class="keyword">lib</span>/<span class="title">ldap</span>/<span class="title">master</span>-<span class="title">slapd</span>.<span class="title">replog</span></span></div><div class="line">replicaÂ Â Â Â Â Â Â Â  host=<span class="number">192.168</span>.<span class="number">7.108</span>:<span class="number">389</span></div><div class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  binddn=<span class="string">"cn=admin,dc=ldap,dc=monkey,dc=com,dc=de"</span></div><div class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  bindmethod=simple credentials=<span class="string">'password'</span></div></pre></td></tr></table></figure>
<h5 id="OpenLDAP-åŒ…åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…äº†å¾ˆå¤šç¨‹åºï¼š"><a href="#OpenLDAP-åŒ…åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…äº†å¾ˆå¤šç¨‹åºï¼š" class="headerlink" title="OpenLDAP åŒ…åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…äº†å¾ˆå¤šç¨‹åºï¼š"></a>OpenLDAP åŒ…åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…äº†å¾ˆå¤šç¨‹åºï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"> å®ˆæŠ¤è¿›ç¨‹ï¼š</div><div class="line"></div><div class="line"></div><div class="line">- slapdï¼šä¸» LDAP æœåŠ¡å™¨</div><div class="line"></div><div class="line">- slurpdï¼šè´Ÿè´£ä¸å¤åˆ¶ LDAP æœåŠ¡å™¨ä¿æŒåŒæ­¥çš„æœåŠ¡å™¨</div><div class="line"></div><div class="line">- å¯¹ç½‘ç»œä¸Šçš„ç›®å½•è¿›è¡Œæ“ä½œçš„å®¢æˆ·æœºç¨‹åºã€‚ä¸‹é¢è¿™ä¸¤ä¸ªç¨‹åºæ˜¯ä¸€å¯¹å„¿ï¼š</div><div class="line"></div><div class="line">- ldapaddï¼šæ‰“å¼€ä¸€ä¸ªåˆ° LDAP æœåŠ¡å™¨çš„è¿æ¥ï¼Œç»‘å®šã€ä¿®æ”¹æˆ–å¢åŠ æ¡ç›®</div><div class="line"></div><div class="line">- ldapsearchï¼šæ‰“å¼€ä¸€ä¸ªåˆ° LDAP æœåŠ¡å™¨çš„è¿æ¥ï¼Œç»‘å®šå¹¶ä½¿ç”¨æŒ‡å®šçš„å‚æ•°è¿›è¡Œæœç´¢</div><div class="line"></div><div class="line">- å¯¹æœ¬åœ°ç³»ç»Ÿä¸Šçš„æ•°æ®åº“è¿›è¡Œæ“ä½œçš„å‡ ä¸ªç¨‹åºï¼š</div><div class="line"></div><div class="line">- slapaddï¼šå°†ä»¥ LDAP ç›®å½•äº¤æ¢æ ¼å¼ï¼ˆLDIFï¼‰æŒ‡å®šçš„æ¡ç›®æ·»åŠ åˆ° LDAP æ•°æ®åº“ä¸­</div><div class="line"></div><div class="line">- slapcatï¼šæ‰“å¼€ LDAP æ•°æ®åº“ï¼Œå¹¶å°†å¯¹åº”çš„æ¡ç›®è¾“å‡ºä¸º LDIF æ ¼å¼</div></pre></td></tr></table></figure>
<h5 id="Openldapå‘½ä»¤æ“ä½œæ€»ç»“ï¼š"><a href="#Openldapå‘½ä»¤æ“ä½œæ€»ç»“ï¼š" class="headerlink" title="Openldapå‘½ä»¤æ“ä½œæ€»ç»“ï¼š"></a>Openldapå‘½ä»¤æ“ä½œæ€»ç»“ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">è§£è¯»é…ç½®æ–‡ä»¶ï¼š</div><div class="line"></div><div class="line">vim /etc/openldap/slapd.conf</div><div class="line"></div><div class="line"></div><div class="line">ä¾‹å­ </div><div class="line"></div><div class="line">åˆ›å»ºç”¨æˆ·</div><div class="line"></div><div class="line">ldapadd -x -D <span class="string">"cn=Manager,dc=jollychic,dc=com"</span> -w secret <span class="_">-f</span> /root/test.ldif </div><div class="line">ldapadd -x -D <span class="string">"cn=Manager,dc=jollychic,dc=com"</span> -w secret (è¿™æ ·å†™å°±æ˜¯åœ¨å‘½ä»¤è¡Œæ·»åŠ æ¡ç›®)</div><div class="line"></div><div class="line">-x   è¿›è¡Œç®€å•è®¤è¯</div><div class="line">-D   ç”¨æ¥ç»‘å®šæœåŠ¡å™¨çš„DN</div><div class="line">-w   ç»‘å®šDNçš„å¯†ç </div><div class="line">-b   æŒ‡å®šè¦æŸ¥è¯¢çš„æ ¹èŠ‚ç‚¹</div><div class="line">-H   åˆ¶å®šè¦æŸ¥è¯¢çš„æœåŠ¡å™¨</div><div class="line">-S   æç¤ºçš„è¾“å…¥å¯†ç </div><div class="line"><span class="_">-s</span> pass æŠŠå¯†ç è®¾ç½®ä¸ºpass</div><div class="line"><span class="_">-a</span> pass è®¾ç½®old passwdä¸ºpass</div><div class="line">-A   æç¤ºçš„è®¾ç½®old passwd</div><div class="line">-I   ä½¿ç”¨saslä¼šè¯æ–¹å¼</div><div class="line"></div><div class="line">è¿™æ ·å¯ä»¥è®¿é—®æ•´ä¸ªçš„æ´»åŠ¨ç›®å½•ç»“æ„.</div><div class="line"></div><div class="line">ldapsearch -x -W -D <span class="string">"cn=Manager,dc=jollychic,dc=com"</span> -b <span class="string">"dc=jollychic,dc=com"</span> </div><div class="line">se12pa</div><div class="line"></div><div class="line">ldapsearch -x -W -D <span class="string">"uid=764,ou=users,dc=jollychic,dc=com"</span> -b <span class="string">"uid=764,ou=users,dc=jollychic,dc=com"</span></div><div class="line">ä½¿ç”¨ç®€å•è®¤è¯ï¼Œç”¨ <span class="string">"ou=users,dc=jollychic,dc=com"</span> è¿›è¡Œç»‘å®šï¼Œè¦æŸ¥è¯¢çš„æ ¹æ˜¯ <span class="string">"dc=jollychic,dc=com"</span>ã€‚è¿™æ ·ä¼šæŠŠç»‘å®šçš„ç”¨æˆ·èƒ½è®¿é—®<span class="string">"uid=764,ou=users,dc=jollychic,dc=com"</span>ä¸‹çš„</div><div class="line">æ‰€æœ‰æ•°æ®æ˜¾ç¤ºå‡ºæ¥ã€‚</div><div class="line"></div><div class="line"></div><div class="line">ldapdelete -x -D <span class="string">"cn=Manager,dc=jollychic,dc=com"</span> -W <span class="string">"uid=900,ou=users,dc=jollychic,dc=com"</span> -S</div><div class="line">ldapmodifyå‘½ä»¤,åœ¨changetypeæ—¶è¾“å…¥ï¼šdelete</div><div class="line"></div><div class="line"></div><div class="line">ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼š</div><div class="line"></div><div class="line">ldappasswd -x -D <span class="string">"cn=Manager,dc=jollychic,dc=com"</span> -W <span class="string">"uid=900,ou=users,dc=jollychic,dc=com"</span> -S</div><div class="line">New password:</div><div class="line">Re-enter new password:</div><div class="line">Enter LDAP Password:</div><div class="line">å°±å¯ä»¥æ›´æ”¹å¯†ç äº†ï¼Œå¦‚æœåŸæ¥è®°å½•ä¸­æ²¡æœ‰å¯†ç ï¼Œå°†ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªuserPasswordã€‚</div><div class="line"><span class="comment">##Enter LDAP password" æ˜¯ "cn=Manager,dc=jollychic,dc=com"ç®¡ç†å‘˜çš„å¯†ç .</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">ç®¡ç†å‘˜å¯†ç æ›´æ”¹</div><div class="line"><span class="comment">#slappasswd</span></div><div class="line">New password</div><div class="line">Re-enter new password</div></pre></td></tr></table></figure>

	

	
		<span class="different-posts"><a href="/2017/03/03/OpenLDAP/ OpenLDAP ä¼ä¸šåº”ç”¨æ–¹æ¡ˆ -PPTè®¤è¯†LDAP+ç†Ÿæ‚‰æ“ä½œLDAPå‘½ä»¤/" onclick="window.history.go(-1); return false;">â¬…ï¸ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2019 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
