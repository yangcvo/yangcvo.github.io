<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Kafkaæ€§èƒ½ä¼˜åŒ–â€“JVMå‚æ•°é…ç½®ä¼˜åŒ– | Yancy&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Kafkaé›†ç¾¤ç¨³å®šGCè°ƒä¼˜ã€€ã€€è°ƒGCæ˜¯é—¨æ‰‹è‰ºæ´»ï¼Œå¹¸äºJava 7å¼•è¿›äº†G1 åƒåœ¾å›æ”¶ï¼Œä½¿å¾—GCè°ƒä¼˜å˜çš„æ²¡é‚£ä¹ˆéš¾ã€‚G1ä¸»è¦æœ‰ä¸¤ä¸ªé…ç½®é€‰é¡¹æ¥è°ƒä¼˜ï¼šMaxGCPauseMillis å’Œ InitiatingHeapOccupancyPercentï¼Œå…·ä½“å‚æ•°è®¾ç½®å¯ä»¥å‚è€ƒGoogleï¼Œè¿™é‡Œä¸èµ˜è¿°ã€‚ ã€€ã€€Kafka brokerèƒ½å¤Ÿæœ‰æ•ˆçš„åˆ©ç”¨å †å†…å­˜å’Œå¯¹è±¡å›æ”¶ï¼Œæ‰€ä»¥è¿™äº›å€¼å¯ä»¥è°ƒå°ç‚¹ã€‚å¯¹äº 64Gbå†…å­˜ï¼ŒKaf">
<meta name="keywords" content="Kafka">
<meta property="og:type" content="article">
<meta property="og:title" content="Kafkaæ€§èƒ½ä¼˜åŒ–â€“JVMå‚æ•°é…ç½®ä¼˜åŒ–">
<meta property="og:url" content="http://blog.yancy.cc/2017/07/04/Bigdata-hadoop/Kafka/kafkaæ€§èƒ½ä¼˜åŒ–â€“JVMå‚æ•°é…ç½®ä¼˜åŒ–/index.html">
<meta property="og:site_name" content="Yancy&#39;s blog">
<meta property="og:description" content="Kafkaé›†ç¾¤ç¨³å®šGCè°ƒä¼˜ã€€ã€€è°ƒGCæ˜¯é—¨æ‰‹è‰ºæ´»ï¼Œå¹¸äºJava 7å¼•è¿›äº†G1 åƒåœ¾å›æ”¶ï¼Œä½¿å¾—GCè°ƒä¼˜å˜çš„æ²¡é‚£ä¹ˆéš¾ã€‚G1ä¸»è¦æœ‰ä¸¤ä¸ªé…ç½®é€‰é¡¹æ¥è°ƒä¼˜ï¼šMaxGCPauseMillis å’Œ InitiatingHeapOccupancyPercentï¼Œå…·ä½“å‚æ•°è®¾ç½®å¯ä»¥å‚è€ƒGoogleï¼Œè¿™é‡Œä¸èµ˜è¿°ã€‚ ã€€ã€€Kafka brokerèƒ½å¤Ÿæœ‰æ•ˆçš„åˆ©ç”¨å †å†…å­˜å’Œå¯¹è±¡å›æ”¶ï¼Œæ‰€ä»¥è¿™äº›å€¼å¯ä»¥è°ƒå°ç‚¹ã€‚å¯¹äº 64Gbå†…å­˜ï¼ŒKaf">
<meta property="og:image" content="https://cdn2.hubspot.net/hubfs/540072/Kafka_Connect_graphic.png">
<meta property="og:updated_time" content="2017-11-30T13:55:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kafkaæ€§èƒ½ä¼˜åŒ–â€“JVMå‚æ•°é…ç½®ä¼˜åŒ–">
<meta name="twitter:description" content="Kafkaé›†ç¾¤ç¨³å®šGCè°ƒä¼˜ã€€ã€€è°ƒGCæ˜¯é—¨æ‰‹è‰ºæ´»ï¼Œå¹¸äºJava 7å¼•è¿›äº†G1 åƒåœ¾å›æ”¶ï¼Œä½¿å¾—GCè°ƒä¼˜å˜çš„æ²¡é‚£ä¹ˆéš¾ã€‚G1ä¸»è¦æœ‰ä¸¤ä¸ªé…ç½®é€‰é¡¹æ¥è°ƒä¼˜ï¼šMaxGCPauseMillis å’Œ InitiatingHeapOccupancyPercentï¼Œå…·ä½“å‚æ•°è®¾ç½®å¯ä»¥å‚è€ƒGoogleï¼Œè¿™é‡Œä¸èµ˜è¿°ã€‚ ã€€ã€€Kafka brokerèƒ½å¤Ÿæœ‰æ•ˆçš„åˆ©ç”¨å †å†…å­˜å’Œå¯¹è±¡å›æ”¶ï¼Œæ‰€ä»¥è¿™äº›å€¼å¯ä»¥è°ƒå°ç‚¹ã€‚å¯¹äº 64Gbå†…å­˜ï¼ŒKaf">
<meta name="twitter:image" content="https://cdn2.hubspot.net/hubfs/540072/Kafka_Connect_graphic.png">
  
  <link rel="stylesheet" href="/css/index.css">
</head>

<body style="


  background-color: #eff0f6

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title">Clover Tuan</a>
  </header>
  <div class="ctnWrap">
    <div class="icons">
      
        
          
            <a href="https://dribbble.com/clovertuan" target="_blank" class="nav-icn iconfont icon-dribbble"></a>
          
        
          
            <a href="https://www.behance.net/clovertuan" target="_blank" class="nav-icn iconfont icon-behance"></a>
          
        
          
            <a href="http://clovertuan.lofter.com/" target="_blank" class="nav-icn iconfont icon-lofter"></a>
          
        
          
            <a href="https://www.instagram.com/clovertuan/" target="_blank" class="nav-icn iconfont icon-instagram"></a>
          
        
          
            <a href="https://github.com/cloverTuan" target="_blank" class="nav-icn iconfont icon-github"></a>
          
        
      
    </div>
    <div class="menu">
      
        
            <a href="/" class="nav-menu ">HOME</a>
          
        
            <a href="/archives" class="nav-menu ">ARCHIVE</a>
          
        
            <a href="/about" class="nav-menu ">ABOUT</a>
          
        
      
    </div>
  </div>
</nav>
    <div id="main"><section class="article">
  <h2 class="title">Kafkaæ€§èƒ½ä¼˜åŒ–â€“JVMå‚æ•°é…ç½®ä¼˜åŒ–</h2>
  <p class="sub">Jul 4, 2017</p>
  <article class="content">
    </p>
<h3 id="Kafka-Brokerä¸ªæ•°å†³å®šå› ç´ "><a href="#Kafka-Brokerä¸ªæ•°å†³å®šå› ç´ " class="headerlink" title="Kafka Brokerä¸ªæ•°å†³å®šå› ç´ "></a>Kafka Brokerä¸ªæ•°å†³å®šå› ç´ </h3><p>ã€€ã€€ç£ç›˜å®¹é‡ï¼šé¦–å…ˆè€ƒè™‘çš„æ˜¯æ‰€éœ€ä¿å­˜çš„æ¶ˆæ¯æ‰€å ç”¨çš„æ€»ç£ç›˜å®¹é‡å’Œæ¯ä¸ªbrokeræ‰€èƒ½æä¾›çš„ç£ç›˜ç©ºé—´ã€‚å¦‚æœKafkaé›†ç¾¤éœ€è¦ä¿ç•™ 10 TBæ•°æ®ï¼Œå•ä¸ªbrokerèƒ½å­˜å‚¨ 2 TBï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦çš„æœ€å°Kafkaé›†ç¾¤å¤§å°5ä¸ªbrokerã€‚æ­¤å¤–ï¼Œå¦‚æœå¯ç”¨å‰¯æœ¬å‚æ•°ï¼Œåˆ™å¯¹åº”çš„å­˜å‚¨ç©ºé—´éœ€è‡³å°‘å¢åŠ ä¸€å€ï¼ˆå–å†³äºå‰¯æœ¬å‚æ•°ï¼‰ã€‚è¿™æ„å‘³ç€å¯¹åº”çš„Kafkaé›†ç¾¤è‡³å°‘éœ€è¦ 10 ä¸ªbrokerã€‚</p>
<p>ã€€ã€€è¯·æ±‚é‡ï¼šå¦å¤–ä¸€ä¸ªè¦è€ƒè™‘çš„æ˜¯Kafkaé›†ç¾¤å¤„ç†è¯·æ±‚çš„èƒ½åŠ›ã€‚è¿™ä¸»è¦å–å†³äºå¯¹Kafka clientè¯·æ±‚çš„ç½‘ç»œå¤„ç†èƒ½åŠ›ï¼Œç‰¹åˆ«æ˜¯ï¼Œæœ‰å¤šä¸ªconsumeræˆ–è€…ç½‘è·¯æµé‡ä¸ç¨³å®šã€‚å¦‚æœï¼Œé«˜å³°æ—¶åˆ»ï¼Œå•ä¸ªbrokerçš„ç½‘ç»œæµé‡è¾¾åˆ°80%ï¼Œè¿™æ—¶æ˜¯æ’‘ä¸ä½ä¸¤ä¸ªconsumerçš„ï¼Œé™¤éæœ‰ä¸¤ä¸ªbrokerã€‚å†è€…ï¼Œå¦‚æœå¯ç”¨äº†å‰¯æœ¬å‚æ•°ï¼Œåˆ™éœ€è¦è€ƒè™‘å‰¯æœ¬è¿™ä¸ªé¢å¤–çš„consumerã€‚ä¹Ÿå¯ä»¥æ‰©å±•å¤šä¸ªbrokeræ¥å‡å°‘ç£ç›˜çš„ååé‡å’Œç³»ç»Ÿå†…å­˜ã€‚</p>
<h3 id="ä¸»è¦æ˜¯å¯åŠ¨è„šæœ¬å’Œlog4jåŸºæœ¬å‚æ•°çš„è®¾ç½®å’Œä¼˜åŒ–ï¼Œè¿™äº›å‚æ•°è—çš„æ¯”è¾ƒæ·±ã€‚"><a href="#ä¸»è¦æ˜¯å¯åŠ¨è„šæœ¬å’Œlog4jåŸºæœ¬å‚æ•°çš„è®¾ç½®å’Œä¼˜åŒ–ï¼Œè¿™äº›å‚æ•°è—çš„æ¯”è¾ƒæ·±ã€‚" class="headerlink" title="ä¸»è¦æ˜¯å¯åŠ¨è„šæœ¬å’Œlog4jåŸºæœ¬å‚æ•°çš„è®¾ç½®å’Œä¼˜åŒ–ï¼Œè¿™äº›å‚æ•°è—çš„æ¯”è¾ƒæ·±ã€‚"></a>ä¸»è¦æ˜¯å¯åŠ¨è„šæœ¬å’Œlog4jåŸºæœ¬å‚æ•°çš„è®¾ç½®å’Œä¼˜åŒ–ï¼Œè¿™äº›å‚æ•°è—çš„æ¯”è¾ƒæ·±ã€‚</h3><h3 id="1ã€JVMå‚æ•°é…ç½®ä¼˜åŒ–"><a href="#1ã€JVMå‚æ•°é…ç½®ä¼˜åŒ–" class="headerlink" title="1ã€JVMå‚æ•°é…ç½®ä¼˜åŒ–"></a>1ã€JVMå‚æ•°é…ç½®ä¼˜åŒ–</h3><p>å¦‚æœä½¿ç”¨çš„CMS GCç®—æ³•ï¼Œå»ºè®®JVM Heapä¸è¦å¤ªå¤§ï¼Œåœ¨4GBä»¥å†…å°±å¯ä»¥ã€‚JVMå¤ªå¤§ï¼Œå¯¼è‡´Major GCæˆ–è€…Full GCäº§ç”Ÿçš„â€œstop the worldâ€æ—¶é—´è¿‡é•¿ï¼Œå¯¼è‡´brokerå’Œzkä¹‹é—´çš„sessionè¶…æ—¶ï¼Œæ¯”å¦‚é‡æ–°é€‰ä¸¾controllerèŠ‚ç‚¹å’Œæå‡follow replicaä¸ºleader replicaã€‚<br>JVMä¹Ÿä¸èƒ½è¿‡å°ï¼Œå¦åˆ™ä¼šå¯¼è‡´é¢‘ç¹åœ°è§¦å‘gcæ“ä½œï¼Œä¹Ÿå½±å“Kafkaçš„ååé‡ã€‚å¦å¤–ï¼Œéœ€è¦é¿å…CMS GCè¿‡ç¨‹ä¸­çš„å‘ç”Ÿpromotion failureå’Œconcurrent failureé—®é¢˜ã€‚CMSInitiatingOccupancyFraction=70å¯ä»¥é¢„é˜²concurrent failureé—®é¢˜ï¼Œæå‰å‡ºå‘Major GCã€‚<br>Kafka JVMå‚æ•°å¯ä»¥ç›´æ¥ä¿®æ”¹å¯åŠ¨è„šæœ¬<code>bin/kafka-server-start.sh</code><br>ä¸­çš„å˜é‡å€¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›åŸºæœ¬å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ ¹æ®å®é™…çš„gcçŠ¶å†µå’Œè°ƒè¯•GCéœ€è¦å¢åŠ ä¸€äº›ç›¸å…³çš„å‚æ•°ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> KAFKA_HEAP_OPTS=<span class="string">"-Xmx8G -Xms8G -Xmn4G -XX:PermSize=64m -XX:MaxPermSize=128m  -XX:SurvivorRatio=6  -XX:CMSInitiatingOccupancyFraction=70 -XX:+UseCMSInitiatingOccupancyOnly"</span></div></pre></td></tr></table></figure>
<p>éœ€è¦å…³æ³¨gcæ—¥å¿—ä¸­çš„YGCæ—¶é—´ä»¥åŠCMS GCé‡Œé¢çš„CMS-initial-markå’ŒCMS-remarkä¸¤ä¸ªé˜¶æ®µçš„æ—¶é—´ï¼Œè¿™äº›GCè¿‡ç¨‹æ˜¯â€œstop the worldâ€æ–¹å¼å®Œæˆçš„ã€‚</p>
<blockquote>
<p>jdk1.8 ä¼˜åŒ–çš„è¯ä¼šæç¤ºMaxPermSize=128m,PermSize=64m å­—é¢æ„æ€æ˜¯MaxPermSizeä¸éœ€è¦æˆ‘ä»¬é…ç½®äº†,jdk1.8 ç‰ˆæœ¬åŠŸèƒ½å…¶å®å·²ä¸éœ€è¦è¿™ä¸ªä¼˜åŒ–å‚æ•°ï¼š</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[jollybi@kafka3 kafka_2.10-0.8.2.1]$ /data/tools/kafka_2.10-0.8.2.1/bin/kafka-server-start.sh /data/tools/kafka_2.10-0.8.2.1/config/server.properties &amp;</div><div class="line">[1] 10312</div><div class="line">[jollybi@kafka3 kafka_2.10-0.8.2.1]$ Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=64m; support was removed <span class="keyword">in</span> 8.0</div><div class="line">Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=128m; support was removed <span class="keyword">in</span> 8.0</div><div class="line"></div><div class="line">ä¼˜åŒ–å‚æ•°ï¼š</div><div class="line"><span class="built_in">export</span> KAFKA_HEAP_OPTS=<span class="string">"-Xmx4G -Xms4G -Xmn2G  -XX:SurvivorRatio=6  -XX:CMSInitiatingOccupancyFraction=70 -XX:+UseCMSInitiatingOccupancyOnly"</span></div><div class="line"><span class="built_in">export</span> JMX_PORT=<span class="string">"9999"</span>  <span class="comment">### Kafka Managerç›‘æ§ç›‘å¬jmxç«¯å£,å¦‚æœæ²¡æœ‰å¯ä¸è®¾ç½®ã€‚</span></div></pre></td></tr></table></figure>
<h3 id="2ã€æ‰“å¼€JMXç«¯å£"><a href="#2ã€æ‰“å¼€JMXç«¯å£" class="headerlink" title="2ã€æ‰“å¼€JMXç«¯å£"></a>2ã€æ‰“å¼€JMXç«¯å£</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ä¸»è¦æ˜¯ä¸ºäº†é€šè¿‡JMXç«¯å£ç›‘æ§Kafka Brokerä¿¡æ¯ã€‚å¯ä»¥åœ¨bin/kafka-server-start.shä¸­æ‰“å¼€JMXç«¯å£å˜é‡ã€‚</div><div class="line"><span class="built_in">export</span> JMX_PORT=9999</div></pre></td></tr></table></figure>
<h3 id="3ã€è°ƒæ•´log4jçš„æ—¥å¿—çº§åˆ«"><a href="#3ã€è°ƒæ•´log4jçš„æ—¥å¿—çº§åˆ«" class="headerlink" title="3ã€è°ƒæ•´log4jçš„æ—¥å¿—çº§åˆ«"></a>3ã€è°ƒæ•´log4jçš„æ—¥å¿—çº§åˆ«</h3><p>å¦‚æœé›†ç¾¤ä¸­topicå’Œpartitionæ•°é‡è¾ƒå¤§æ—¶ï¼Œå› ä¸ºlog4jçš„æ—¥å¿—çº§åˆ«å¤ªä½ï¼Œå¯¼è‡´è¿›ç¨‹æŒç»­å¾ˆé•¿çš„æ—¶é—´åœ¨æ‰“å°æ—¥å¿—ã€‚æ—¥å¿—é‡å·¨å¤§ï¼Œå¯¼è‡´å¾ˆå¤šé¢å¤–çš„æ€§èƒ½å¼€é”€ã€‚ç‰¹åˆ«æ˜¯contolleræ—¥å¿—çº§åˆ«ä¸ºtraceçº§åˆ«ï¼Œè¿™ç‚¹æ¯”è¾ƒå‘ã€‚<br>Tips é€šè¿‡JMXç«¯å£è®¾ç½®log4jæ—¥å¿—çº§åˆ«ï¼Œä¸ç”¨é‡å¯brokerèŠ‚ç‚¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">è®¾ç½®æ—¥å¿—çº§åˆ«ï¼š</div><div class="line">java -jar cmdline-jmxclient-0.10.3.jar - localhost:9999 kafka:<span class="built_in">type</span>=kafka.Log4jController <span class="built_in">set</span>LogLevel=kafka.controller,INFO</div><div class="line">java -jar cmdline-jmxclient-0.10.3.jar - localhost:9999 kafka:<span class="built_in">type</span>=kafka.Log4jController <span class="built_in">set</span>LogLevel=state.change.logger,INFO</div><div class="line"> </div><div class="line">æ£€æŸ¥æ—¥å¿—çº§åˆ«ï¼š</div><div class="line">java -jar cmdline-jmxclient-0.10.3.jar - localhost:9999 kafka:<span class="built_in">type</span>=kafka.Log4jController getLogLevel=kafka.controller</div><div class="line">java -jar cmdline-jmxclient-0.10.3.jar - localhost:9999 kafka:<span class="built_in">type</span>=kafka.Log4jController getLogLevel=state.change.logger</div></pre></td></tr></table></figure>
<h3 id="4ã€æ€§èƒ½ä¼˜åŒ–æŠ€å·§"><a href="#4ã€æ€§èƒ½ä¼˜åŒ–æŠ€å·§" class="headerlink" title="4ã€æ€§èƒ½ä¼˜åŒ–æŠ€å·§"></a>4ã€æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h3><p>4.1ã€é…ç½®åˆé€‚çš„partitonsæ•°é‡ã€‚</p>
<p>è¿™ä¼¼ä¹æ˜¯kafkaæ–°æ‰‹å¿…é—®å¾—é—®é¢˜ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»ç†è§£ï¼Œpartitonæ˜¯kafkaçš„å¹¶è¡Œå•å…ƒã€‚ä»producerå’Œbrokerçš„è§†è§’çœ‹ï¼Œå‘ä¸åŒçš„partitionå†™å…¥æ˜¯å®Œå…¨å¹¶è¡Œçš„ï¼›è€Œå¯¹äºconsumerï¼Œå¹¶å‘æ•°å®Œå…¨å–å†³äºpartitionçš„æ•°é‡ï¼Œå³ï¼Œå¦‚æœconsumeræ•°é‡å¤§äºpartitionæ•°é‡ï¼Œåˆ™å¿…æœ‰consumeré—²ç½®ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºkafkaçš„ååä¸partitionæ—¶çº¿æ€§å…³ç³»ã€‚partitionçš„æ•°é‡è¦æ ¹æ®ååæ¥æ¨æ–­ï¼Œå‡å®špä»£è¡¨ç”Ÿäº§è€…å†™å…¥å•ä¸ªpartitionçš„æœ€å¤§ååï¼Œcä»£è¡¨æ¶ˆè´¹è€…ä»å•ä¸ªpartitionæ¶ˆè´¹çš„æœ€å¤§ååï¼Œæˆ‘ä»¬çš„ç›®æ ‡ååæ˜¯tï¼Œé‚£ä¹ˆpartitionçš„æ•°é‡åº”è¯¥æ˜¯t/på’Œt/cä¸­è¾ƒå¤§çš„é‚£ä¸€ä¸ªã€‚å®é™…æƒ…å†µä¸­ï¼Œpçš„å½±å“å› ç´ æœ‰æ‰¹å¤„ç†çš„è§„æ¨¡ï¼Œå‹ç¼©ç®—æ³•ï¼Œç¡®è®¤æœºåˆ¶å’Œå‰¯æœ¬æ•°ç­‰ï¼Œç„¶è€Œï¼Œå¤šæ¬¡benchmarkçš„ç»“æœè¡¨æ˜ï¼Œå•ä¸ªpartitionçš„æœ€å¤§å†™å…¥åååœ¨10MB/secå·¦å³ï¼›cçš„å½±å“å› ç´ æ˜¯é€»è¾‘ç®—æ³•ï¼Œéœ€è¦åœ¨ä¸åŒåœºæ™¯ä¸‹å®æµ‹å¾—å‡ºã€‚</p>
<p>è¿™ä¸ªç»“è®ºä¼¼ä¹å¤ªä¹¦ç”Ÿæ°”å’Œä¸å®ç”¨ã€‚æˆ‘ä»¬é€šå¸¸å»ºè®®partitionçš„æ•°é‡ä¸€å®šè¦å¤§äºç­‰äºæ¶ˆè´¹è€…çš„æ•°é‡æ¥å®ç°æœ€å¤§å¹¶å‘ã€‚å®˜æ–¹æ›¾æµ‹è¯•è¿‡1ä¸‡ä¸ªpartitionçš„æƒ…å†µï¼Œæ‰€ä»¥ä¸éœ€è¦å¤ªæ‹…å¿ƒpartitionè¿‡å¤šçš„é—®é¢˜ã€‚ä¸‹é¢çš„çŸ¥è¯†ä¼šæœ‰åŠ©äºè¯»è€…åœ¨ç”Ÿäº§ç¯å¢ƒåšå‡ºæœ€ä½³çš„é€‰æ‹©ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">aã€ä¸€ä¸ªpartitionå°±æ˜¯ä¸€ä¸ªå­˜å‚¨kafka-logçš„ç›®å½•ã€‚</div><div class="line">bã€ä¸€ä¸ªpartitionåªèƒ½å¯„å®¿åœ¨ä¸€ä¸ªbrokerä¸Šã€‚</div><div class="line">cã€å•ä¸ªpartitionæ˜¯å¯ä»¥å®ç°æ¶ˆæ¯çš„é¡ºåºå†™å…¥çš„ã€‚</div><div class="line">dã€å•ä¸ªpartitionåªèƒ½è¢«å•ä¸ªæ¶ˆè´¹è€…è¿›ç¨‹æ¶ˆè´¹ï¼Œä¸è¯¥æ¶ˆè´¹è€…æ‰€å±äºçš„æ¶ˆè´¹ç»„æ— å…³ã€‚è¿™æ ·åšï¼Œæœ‰åŠ©äºå®ç°é¡ºåºæ¶ˆè´¹ã€‚</div><div class="line">eã€å•ä¸ªæ¶ˆè´¹è€…è¿›ç¨‹å¯åŒæ—¶æ¶ˆè´¹å¤šä¸ªpartitionï¼Œå³partitioné™åˆ¶äº†æ¶ˆè´¹ç«¯çš„å¹¶å‘èƒ½åŠ›ã€‚</div><div class="line">fã€partitionè¶Šå¤šåˆ™fileå’Œmemoryæ¶ˆè€—è¶Šå¤§ï¼Œè¦åœ¨æœåŠ¡å™¨æ‰¿å—æœåŠ¡å™¨è®¾ç½®ã€‚</div><div class="line">gã€æ¯ä¸ªpartitionä¿¡æ¯éƒ½å­˜åœ¨æ‰€æœ‰çš„zkèŠ‚ç‚¹ä¸­ã€‚</div><div class="line">hã€partitionè¶Šå¤šåˆ™å¤±è´¥é€‰ä¸¾è€—æ—¶è¶Šé•¿ã€‚</div><div class="line">kã€offsetæ˜¯å¯¹æ¯ä¸ªpartitionè€Œè¨€çš„ï¼Œpartitionè¶Šå¤šï¼ŒæŸ¥è¯¢offsetå°±è¶Šè€—æ—¶ã€‚</div><div class="line">iã€partitionçš„æ•°é‡æ˜¯å¯ä»¥åŠ¨æ€å¢åŠ çš„ï¼ˆåªèƒ½åŠ ä¸èƒ½å‡ï¼‰ã€‚</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å»ºè®®çš„åšæ³•æ˜¯ï¼Œå¦‚æœæ˜¯3ä¸ªbrokerçš„é›†ç¾¤ï¼Œæœ‰5ä¸ªæ¶ˆè´¹è€…ï¼Œé‚£ä¹ˆå»ºè®®partitionçš„æ•°é‡æ˜¯15ï¼Œä¹Ÿå°±æ˜¯brokerå’Œconsumeræ•°é‡çš„æœ€å°å…¬å€æ•°ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¤§äºæ¶ˆè´¹è€…çš„brokeræ•°é‡çš„å€æ•°ï¼Œæ¯”å¦‚6æˆ–è€…9ï¼Œè¿˜è¯·è¯»è€…è‡ªè¡Œæ ¹æ®å®é™…ç¯å¢ƒè£å®šã€‚</p>
<h3 id="Communicative-learning"><a href="#Communicative-learning" class="headerlink" title="Communicative learning:"></a>Communicative learning:</h3><p>ğŸ§  Linux shell_ senior operation and maintenance faction: QQ group <code>459096184</code> circle (system operation and maintenance - application operation and maintenance - automation operation and maintenance - virtualization technology research, welcome to join)<br>ğŸ§  BigData-Exchange School:QQ group <code>521621407</code> circles (big data Yun Wei) (Hadoop developer) (big data research enthusiasts) welcome to join</p>
<p>Bidata have internal WeChat exchange group, learn from each other, join QQ group has links.</p>
  </article>
  <footer class="f-cf">
    
      <a href="/2017/07/11/Bigdata-hadoop/Kafka/KafKaæ‰©å®¹ç¾¤é›†(Topic.partitionsè¿ç§»)/" class="link f-fl">âŸµKafKaåŠ¨æ€æ‰©å®¹ç¾¤é›†-(Topic.partitionsè¿ç§»)</a>
    
    
      <a href="/2017/06/29/Bigdata-hadoop/Kafka/å¦‚ä½•æ‰‹åŠ¨æ›´æ–°Kafkaä¸­æŸä¸ªTopicçš„åç§»é‡/" class="link f-fr">Bigdata-å¦‚ä½•æ‰‹åŠ¨æ›´æ–°Kafkaä¸­æŸä¸ªTopicçš„åç§»é‡âŸ¶</a>
    
  </footer>
</section></div>
    <footer id="footer" class="f-cf">
  d.guangying@foxmail.com
  
    
      
        Â· <a href="https://dribbble.com/clovertuan" target="_blank" class="nav-icn">Dribbble</a>
      
    
      
        Â· <a href="https://www.behance.net/clovertuan" target="_blank" class="nav-icn">Behance</a>
      
    
      
        Â· <a href="http://clovertuan.lofter.com/" target="_blank" class="nav-icn">Lofter</a>
      
    
      
        Â· <a href="https://www.instagram.com/clovertuan/" target="_blank" class="nav-icn">Instagram</a>
      
    
      
        Â· <a href="https://github.com/cloverTuan" target="_blank" class="nav-icn">GitHub</a>
      
    
  
  <span class="copyright">All rights reserved @Clover Tuan</span>
</footer>
  </div>
</body>
</html>