<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Yancy&#39;s blog</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="Personal blog, thinking and sharing of technology and life">
<meta property="og:type" content="website">
<meta property="og:title" content="Yancy&#39;s blog">
<meta property="og:url" content="http://blog.yancy.cc/page/3/index.html">
<meta property="og:site_name" content="Yancy&#39;s blog">
<meta property="og:description" content="Personal blog, thinking and sharing of technology and life">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Yancy&#39;s blog">
<meta name="twitter:description" content="Personal blog, thinking and sharing of technology and life">
  
  
  <link rel="shortcut icon" href="/icons/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/icons/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/icons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icons/android-chrome-192x192.png" sizes="192x192">
  <meta name="msapplication-square70x70logo" content="/icons/smalltile.png" />
  <meta name="msapplication-square150x150logo" content="/icons/mediumtile.png" />
  <meta name="msapplication-wide310x150logo" content="/icons/widetile.png" />
  <meta name="msapplication-square310x310logo" content="/icons/largetile.png" />
  
  <link rel="stylesheet" type="text/css" href="/css/style.css">
  
  <link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <script src="//cdn.bootcss.com/jquery/2.1.0/jquery.min.js" type="text/javascript"></script>

  

  
  
</head>


<body>
  <div id="container">
    <header id="header" class="print-invisible">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo"><span class="site-title">Yancy&#39;s blog</span></a>
      <nav id="main-nav">
        
      </nav>
      
      <nav id="sub-nav">
        <div class="profile" id="profile-nav">
          <a id="profile-anchor" href="javascript:;"><img class="avatar" src="/"><i class="fa fa-caret-down"></i></a>
        </div>
      </nav>
      
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="http://blog.yancy.cc"></form>
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
      
      <td>
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://blog.yancy.cc"></form>
      </td>
      </tr>
    </table>
  </div>
</header>
    <div class="outer">
      
        <aside id="profile">
  <div class="inner profile-inner">
  	<div class="base-info profile-block">
      <img id="avatar" src="/">
      <h2 id="name">Pan Jiabang</h2>
      <h3 id="title">undefined</h3>
      <span id="location"><i class="fa fa-map-marker"></i>undefined</span>
      <a id="follow" href="undefined" target="_blank">FOLLOW</a>
    </div>
    <div class="article-info profile-block">
      <div class="article-info-block">
        29
        <span>posts</span>
      </div>
      <div class="article-info-block">
        11
        <span>tags</span>
      </div>
    </div>
    
    
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
        
        
        
        <td><a href="http://github.com/JamesPan" target="_blank" title="github"><i   class="fa fa-github"></i></a></td>
        
        
        
        <td><a href="http://weibo.com/panjiabang" target="_blank" title="weibo"><i   class="fa fa-weibo"></i></a></td>
        
        
        
        <td><a href="https://twitter.com/_JamesPan_" target="_blank" title="twitter"><i   class="fa fa-twitter"></i></a></td>
        
        
        
          
        
        <td><a href="https://telegram.me/jamespan" target="_blank" title="telegram"><i   class="fa fa-paper-plane"></i></a></td>
        
        
        
        <td><a href="/atom.xml" target="_blank" title="rss"><i   class="fa fa-rss"></i></a></td>
        
        </tr>
      </table>
    </div>
    
  </div>
</aside>
      
      <section id="main">
      <article id="post-个人生活记录/考驾照的艰辛历程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/11/个人生活记录/考驾照的艰辛历程/">考驾照的艰辛历程</a>
    </h1>
  

        
        <div class="article-meta">
          <div class="article-date">
  <div class="article-date" style="display:inline;">
    <i class="fa fa-upload" aria-hidden="true"></i>
    <time datetime="2016-09-11T12:32:17.000Z" itemprop="datePublished">2016-09-11</time>
  </div>
  <div style="display:inline;">
    <i class="fa fa-edit" aria-hidden="true"></i>
    <time datetime="2017-05-14T16:40:48.000Z" itemprop="dateUpdated">2017-05-15</time>
  </div>
</div>

          

          


          
        </div>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      
        <p>🍓</p>
<p>   今天是2016年9月11号，在过几天就是中秋节了，刚刚大学毕业出来一年了，在加上实习工作一年多了，算起来工作两年多了，在读大学和参加一些技术培训班就没有时间去考一本属于自己的驾照，一直拖到现在的确是挺忙的。</p>
<p>   …….</p>
<p>   <strong>经验之谈</strong></p>
<p>   9月10号我是在网上预订了考试报名的–<a href="http://jx.jiakaobaodian.com/jiaxiao/" target="_blank" rel="external">驾校服务平台</a><br>   这边点击报名他们会主动联系你，会安排到他们公司集合，会跟你讲一系列的考驾照的流程非常不错，而且有司机专门接送。</p>
<p>下面是我到他们公司的时候，给我看的驾照手册：</p>
<p>这里我也拍照下来啦。的确非常方便，还有后面让我下载<code>1217的APP</code>可以预约考试。</p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/jiaxiao1.png" alt=""><br><img src="http://7xrthw.com1.z0.glb.clouddn.com/jiaxiao2.png" alt=""><br><img src="http://7xrthw.com1.z0.glb.clouddn.com/jiaxiao3.png" alt=""></p>
<h4 id="他们驾校合作平台我的理解："><a href="#他们驾校合作平台我的理解：" class="headerlink" title="他们驾校合作平台我的理解："></a>他们驾校合作平台我的理解：</h4><p>他们这种合作平台就是跟杭州大大小小的驾校合作，可是现在很多驾校师傅服务不周到，他们都是自己招聘的专业师傅和新车，一对一培训非常有效，而且服务好。</p>
<p>这点是也是我们的方便的好处在杭州网上报名我的<code>价格是：3999</code></p>
<p>先是在这边公司签合同报名好需要交钱的</p>
<h4 id="报名缴费细节："><a href="#报名缴费细节：" class="headerlink" title="报名缴费细节："></a>报名缴费细节：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">第一笔：1000+30 </div><div class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 1000元 是给车管所的费用.</span></span></div><div class="line"></div><div class="line">也就是你考科目一和科目四考试场地和工本费📚书本费用还有光盘💿费用就是查看学习资料的。</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"><span class="comment"># 30元  是体检的费用。</span></span></div><div class="line"></div><div class="line">在杭州市要体检的非常正规，有视力科，听力科，四肢运动🏃科，还有身高体重等等。</div><div class="line"></div><div class="line">第二笔：2969</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"><span class="comment">##这个是给公司平台的也是他们给教练发工资的说白了。其实跟驾校合作的，这样大家应该很明白了把。</span></span></div></pre></td></tr></table></figure>
<h4 id="杭州报名考试需要注意的："><a href="#杭州报名考试需要注意的：" class="headerlink" title="杭州报名考试需要注意的："></a>杭州报名考试需要注意的：</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="bullet">* </span>考试前要多问问杭州本地的考完的老师傅，考试要带身份证和暂住证，听说现在G20峰会过后就不用暂住证了，不过还要等国家政策出来才能考驾照。</div><div class="line"></div><div class="line"><span class="bullet">* </span>科目一选择上课地点最好选择自己比较近的。不懂的可以问平台的客服。这点非常棒👍</div><div class="line"></div><div class="line"><span class="bullet">* </span>学习科目一：可以去网上看看模拟题，很简单的。第一次做就90分了。</div><div class="line"></div><div class="line"><span class="bullet">* </span>去报名的时候还会给你发票记得留着，因为考试需要看的，别到时候很麻烦补办。</div></pre></td></tr></table></figure>
<p>下面分享下报名成功资料这么多：</p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/jiaxiao4.png" alt=""></p>

      
    </div>
    

    

    

    <footer class="article-footer print-invisible">
      
      
    <a class="article-category-link" href="/categories/生活/">生活</a>

 
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Personal-life-record/">Personal life record</a></li></ul>


    </footer>
  </div>
  
</article>
<div class="print-invisible">
  

</div>


    
      <article id="post-个人生活记录/厨艺依然好👍" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/02/个人生活记录/厨艺依然好👍/">厨艺依然好👍</a>
    </h1>
  

        
        <div class="article-meta">
          <div class="article-date">
  <div class="article-date" style="display:inline;">
    <i class="fa fa-upload" aria-hidden="true"></i>
    <time datetime="2016-09-02T13:18:06.000Z" itemprop="datePublished">2016-09-02</time>
  </div>
  <div style="display:inline;">
    <i class="fa fa-edit" aria-hidden="true"></i>
    <time datetime="2017-03-14T05:55:50.000Z" itemprop="dateUpdated">2017-03-14</time>
  </div>
</div>

          

          


          
        </div>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      
        <p> 一个男的能做的出一手好的美食是多么棒👍的一件事。这还要感谢我有一个特别的棒的父亲。</p>
<p> 记得小时候12岁我就开始学会做饭，学会第一道菜南瓜饭🎃。</p>
<p> 这个的确也是我对做美食也很感兴趣，什么红烧鸡翅，红烧排骨，红烧肉，🐟鱼类最拿手了。 江南家常菜都比较会点，这也是我一个优点吧。 </p>
<p>自己出来工作，在外面工作来往同事朋友来家里玩，自己会下厨可以露一手。</p>
<p><strong>最近工作不是特别忙就继续拿起程式菜谱小弄了几道小菜：</strong></p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/cai.JPG" alt=""></p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/cai1.JPG" alt=""><br><img src="http://7xrthw.com1.z0.glb.clouddn.com/cai2.JPG" alt=""><br><img src="http://7xrthw.com1.z0.glb.clouddn.com/cai3.JPG" alt=""><br><img src="http://7xrthw.com1.z0.glb.clouddn.com/cai4.JPG" alt=""><br><img src="http://7xrthw.com1.z0.glb.clouddn.com/cai5.JPG" alt=""></p>
<p><strong>是不是特别棒</strong>👍 😁 </p>

      
    </div>
    

    

    

    <footer class="article-footer print-invisible">
      
      
    <a class="article-category-link" href="/categories/生活/">生活</a>

 
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Personal-life-record/">Personal life record</a></li></ul>


    </footer>
  </div>
  
</article>
<div class="print-invisible">
  

</div>


    
      <article id="post-个人生活记录/推荐一个保护眼睛👀的软件－f-lux" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/31/个人生活记录/推荐一个保护眼睛👀的软件－f-lux/">推荐一个保护眼睛👀的软件－f-lux</a>
    </h1>
  

        
        <div class="article-meta">
          <div class="article-date">
  <div class="article-date" style="display:inline;">
    <i class="fa fa-upload" aria-hidden="true"></i>
    <time datetime="2016-07-31T08:35:30.000Z" itemprop="datePublished">2016-07-31</time>
  </div>
  <div style="display:inline;">
    <i class="fa fa-edit" aria-hidden="true"></i>
    <time datetime="2017-09-19T08:15:08.000Z" itemprop="dateUpdated">2017-09-19</time>
  </div>
</div>

          

          


          
        </div>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      
        <p>最近天天加班然后晚上盯着电脑，眼睛一直很干涩，非常难受。正巧昨天在GitHub上闲逛，无意间发现了别人推荐的这个软件f.lux，Mac上下载试用了一下。觉得很不错，推荐一下！也许是我孤陋寡闻了，可能大家都已经在用了……</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><code>f.lux</code>的功能很简单，就是可以根据时间的变化调节电脑的显示。但是这里的调节不是简单的亮度调节，而是调节显示屏的色温（简单的说就是白天冷色调，晚上暖色调）。可以从<a href="https://justgetflux.com/" target="_blank" rel="external">f.lux官网</a>下载安装，然后打开，界面如下：</p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/f.lux1.png" alt=""></p>
<p>官网翻译:</p>
<p>你<code>f.lux</code>安装程序是一个.zip文件 - 它应该是在你下载的文件夹中。双击它安装f.lux。</p>
<p>一旦f.lux安装并运行，你应该看到f.lux Preferences窗口出现。在这里，你可以输入自己的位置，并设置你平时的起床时间。f.lux使用此信息为您创建一个自定义照明计划。</p>
<p>你可以打开首随时查看和更改您的f.lux设置。<br>该f.lux菜单总是可以找到您的系统时钟的左侧。</p>
<p><a href="https://justgetflux.com/news/pages/macquickstart/" target="_blank" rel="external">官网使用说明地址</a></p>
<h3 id="f-lux"><a href="#f-lux" class="headerlink" title="f.lux"></a>f.lux</h3><p>白天是每当太阳在你的位置。默认情况下，f.lux在6500K白天，并且不改变你的屏幕的颜色。</p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/f.lux3.png" alt=""></p>
<p>如果你喜欢很暖白天的颜色，选择选项&gt;扩展白天设置从f.lux菜单。</p>
<p>日落时太阳已经下山了，但你是清醒的。如果你是一个早起的人，这也是你的日出前的清晨设置。<br>日落的颜色被设计成与正常的暖白光室内照明很好地工作。如果平时在日出前醒来，你可能更喜欢一个更温和的（4500K或亮）日落设置。</p>
<p>睡前是当你上床准备（或已经在它）睡觉前的时间。<br>在睡前设置你的唤醒时间的变化。它清除掉，从你的屏幕尽可能提醒的光芒使你能感觉到自己的身体越来越厌倦。你可以去用f.lux随时随地睡觉-每当你感到困倦。</p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/f.lux4.png" alt=""></p>
<p><code>f.lux</code>的色温调节有三个时段，分别是白天、日落和睡眠。日落时间会根据设置的经纬度自动设置，每个时间段的色温可以自已定义，也可以选择右上角的定义好的模式。</p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/f.lux2.png" alt=""></p>
<h3 id="多系统支持"><a href="#多系统支持" class="headerlink" title="多系统支持"></a>多系统支持</h3><p>目前<code>f.lux</code> 支持<code>Windows</code>、<code>Mac</code>、<code>Linux</code>以及iOS（要越狱）。几乎覆盖了当前主要的操作系统，Android也很快会支持。</p>
<p>这个软件很小，而且装上之后系统资源占用很低，非常值得一试的软件。从现在开始保护你的眼睛吧！</p>

      
    </div>
    

    

    

    <footer class="article-footer print-invisible">
      
      
    <a class="article-category-link" href="/categories/生活/">生活</a>

 
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Personal-life-record/">Personal life record</a></li></ul>


    </footer>
  </div>
  
</article>
<div class="print-invisible">
  

</div>


    
      <article id="post-个人生活记录/坚持一个月3公里跑步🏃下来" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/29/个人生活记录/坚持一个月3公里跑步🏃下来/">坚持一个月3公里跑步🏃下来</a>
    </h1>
  

        
        <div class="article-meta">
          <div class="article-date">
  <div class="article-date" style="display:inline;">
    <i class="fa fa-upload" aria-hidden="true"></i>
    <time datetime="2016-07-29T06:50:26.000Z" itemprop="datePublished">2016-07-29</time>
  </div>
  <div style="display:inline;">
    <i class="fa fa-edit" aria-hidden="true"></i>
    <time datetime="2017-03-14T05:55:54.000Z" itemprop="dateUpdated">2017-03-14</time>
  </div>
</div>

          

          


          
        </div>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      
        <h3 id="坚持跑步🏃"><a href="#坚持跑步🏃" class="headerlink" title="坚持跑步🏃"></a>坚持跑步🏃</h3><p>写这篇日记是因为受到之前看到一篇特别好的文章，是运维的赵班长写的，分享他的技术博客论坛：<a href="https://www.unixhot.com/" target="_blank" rel="external">https://www.unixhot.com/</a></p>
<p>因为之前很早认识他了，看过他录的ELK全部视频，受益匪浅，这个是去年的事情了。</p>
<h3 id="跑步需要一个圈子"><a href="#跑步需要一个圈子" class="headerlink" title="跑步需要一个圈子"></a>跑步需要一个圈子</h3><p>因为也有一部分的原因是：朋友圈一直在刷跑步的记录，让我也很感兴趣，因为一个人的确是不想跑的，而且这时候：2016年7月20日时杭州今年最热的天气：<code>高温40°c</code>更加没有毅力去坚持每天给自己身体充电了。</p>
<p>在之前的公司也是天天加班熬夜，没有经常锻炼，一米8的个子从读书出来，62体重。<br>到现在58已经瘦了很多，之前的八块腹肌，现在成了4块。</p>
<p>圈子可以加APP里面很多运动跑步团，现在APP做的还是很不错的。</p>
<h3 id="推荐使用APP-GPS定位"><a href="#推荐使用APP-GPS定位" class="headerlink" title="推荐使用APP GPS定位"></a>推荐使用APP GPS定位</h3><p>我一开始用了<code>悦动圈</code>后来用了<code>虎扑跑步</code>，现在在用<code>6只脚</code>。</p>
<h3 id="每天记录："><a href="#每天记录：" class="headerlink" title="每天记录："></a>每天记录：</h3><p>第一天：3公里下来，发现退步了不少，好久没运动，身体的体能变这么差，看样子以后要多锻炼了看看能坚持几天。</p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/yundong1.png" alt="-w350"><br><img src="http://7xrthw.com1.z0.glb.clouddn.com/yundong3.png" alt="-w350"></p>
<p>第二天：昨天3公里，今天4公里，明天继续坚持。</p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/yundon4.png" alt="-w350"><br><img src="http://7xrthw.com1.z0.glb.clouddn.com/yundon5.png" alt="-w350"></p>
<p>第三天：全程跑下来，全身湿透，好比蒸桑拿一样，太热</p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/yundon6.png" alt="-w350"></p>
<p>后面坚持了一个月下来，每天跑完拉拉韧带，做下有氧运动是比较好的方式。</p>
<p>运动一个月发现睡眠更好了。之前一直失眠，以后继续坚持，跑步🏃又在网上买了专业的运动服最好买两套可以换洗，跑鞋。</p>
<p>因为爱上了跑步，也认识了很多健身的朋友。希望努力以后可以把身体的体重往60发展。哈哈</p>

      
    </div>
    

    

    

    <footer class="article-footer print-invisible">
      
      
    <a class="article-category-link" href="/categories/生活/">生活</a>

 
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Personal-life-record/">Personal life record</a></li></ul>


    </footer>
  </div>
  
</article>
<div class="print-invisible">
  

</div>


    
      <article id="post-个人生活记录/黄山之旅" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/05/个人生活记录/黄山之旅/">黄山之旅</a>
    </h1>
  

        
        <div class="article-meta">
          <div class="article-date">
  <div class="article-date" style="display:inline;">
    <i class="fa fa-upload" aria-hidden="true"></i>
    <time datetime="2016-05-04T16:27:43.000Z" itemprop="datePublished">2016-05-05</time>
  </div>
  <div style="display:inline;">
    <i class="fa fa-edit" aria-hidden="true"></i>
    <time datetime="2017-03-14T05:56:00.000Z" itemprop="dateUpdated">2017-03-14</time>
  </div>
</div>

          

          


          
        </div>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      
        <h4 id="俗话说：“五岳归来不看山-黄山归来不看岳-”黄山以奇松、怪石、云海、温泉、冬雪“五绝”闻名中外"><a href="#俗话说：“五岳归来不看山-黄山归来不看岳-”黄山以奇松、怪石、云海、温泉、冬雪“五绝”闻名中外" class="headerlink" title="俗话说：“五岳归来不看山,黄山归来不看岳.”黄山以奇松、怪石、云海、温泉、冬雪“五绝”闻名中外."></a>俗话说：“五岳归来不看山,黄山归来不看岳.”黄山以奇松、怪石、云海、温泉、冬雪“五绝”闻名中外.</h4><p>2016年5月1号 我和女票一起去黄山看日出。</p>
<p>出发前来一张： </p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/ghost9.pic.jpg" alt=""></p>
<ul>
<li>4月29号我匆匆忙忙的买好了前往黄山风景区的大巴汽车票，第一次去也不懂很多，前提安排都没做好准备就出发了因为当天看5月1号是天气预报说雷阵雨转中雨，就害怕看日出的泡汤。</li>
<li>4月30号我和女票一起坐长途大巴到黄山风景区差不多4个多小时，挺方便的，直达风景区脚下，到那边是中午4点多，那时候天气很好，根本感觉不到明天会有雷阵雨的袭击。</li>
</ul>
<h3 id="到那边先要做好几点："><a href="#到那边先要做好几点：" class="headerlink" title="到那边先要做好几点："></a>到那边先要做好几点：</h3><ul>
<li>定好住宿酒店：因为那边酒店是挺多的，如果赶上节日去的话，估计也没了，所以要去的话，提前一个周，价格便宜几百。如果是想看日出的最好早点定，因为山上的酒店，几乎稍微一般般都要1.5K以上<br>带好雨具： 因为那边黄山常年梅雨天气比较多，因为我那边玩，没带雨具，很多推销的卖一次性的雨衣，就千万不要买。最好自己带着，我是因为定酒店，酒店有送雨具，还有黄山旅游讲解景点和一幅地图。 （那是不是想问我是什么酒店：黄山大红门酒店 地理位置：寨西兆成天地B4幢）</li>
<li>那边的旅游门票：到那边以后只有一个南门是旅游的登上入口，旅游节假日人特别多，就需要排队，售票处是5点半开门。</li>
<li>选择走路上山还是乘坐索道：如果当天上去当天下来，我还是建议早上云古寺乘坐索道上去，到索道那边需要统一坐大巴车上去，大巴车需要购买门票，每个人20元，因为私家车是不能上去的。为什么建议早上乘坐索道上去好，因为早上风景太阳刚刚出来，上面风景最好，主要一些景点都是在山顶上面。 下来可以步行慢慢从后山下来，可以看到迎客松和天都峰。如果走路上去走路下来，就往慈光阁上去，因为那边上山的话比较轻松。下山可以往云海大峡谷那边。</li>
</ul>
<p>印象最深的是：从云古寺坐索道上去 走不远就可以看到一颗连理松身体分开的，很独特。<br><img src="http://7xrthw.com1.z0.glb.clouddn.com/ghost5.pic.jpg" alt=""></p>
<p>谈谈吃的： 到那边记得吃的当地的徽菜特产点臭鳜鱼，和毛豆腐特别不错。还有笋肉，都挺好吃的。 那边最多的就是梅干菜烧饼，是那边的特产。 </p>
<p>赶上了看日出的那一瞬间： </p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/ghost6.pic.jpg" alt=""></p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/ghost7.pic.jpg" alt=""></p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/ghost3.pic.jpg" alt=""></p>
<p>非常愉快的一次登山旅程。</p>

      
    </div>
    

    

    

    <footer class="article-footer print-invisible">
      
      
    <a class="article-category-link" href="/categories/生活/">生活</a>

 
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Personal-life-record/">Personal life record</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/旅行日记/">旅行日记</a></li></ul>


    </footer>
  </div>
  
</article>
<div class="print-invisible">
  

</div>


    
      <article id="post-个人生活记录/在一起的第588天💕" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/14/个人生活记录/在一起的第588天💕/">在一起的第588天💕</a>
    </h1>
  

        
        <div class="article-meta">
          <div class="article-date">
  <div class="article-date" style="display:inline;">
    <i class="fa fa-upload" aria-hidden="true"></i>
    <time datetime="2016-02-14T14:04:06.000Z" itemprop="datePublished">2016-02-14</time>
  </div>
  <div style="display:inline;">
    <i class="fa fa-edit" aria-hidden="true"></i>
    <time datetime="2017-05-14T16:28:51.000Z" itemprop="dateUpdated">2017-05-15</time>
  </div>
</div>

          

          


          
        </div>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      
        <h3 id="今天2016年2月14日我们的第二个情人节："><a href="#今天2016年2月14日我们的第二个情人节：" class="headerlink" title="今天2016年2月14日我们的第二个情人节："></a>今天2016年2月14日我们的第二个情人节：</h3><p> 夜已经很深了，我还坐在电脑前写信给你,慢慢把我们在一起点点滴滴记录下来,这些天总是有很多话想对你说,但对你的思念扰乱了我所有的思绪。我不知道该说些什么或怎么说？说心里话，和你的每一天我很快乐很幸福，是我一生中从未有过的！真的XXL。<br><img src="http://7xrthw.com1.z0.glb.clouddn.com/IMG_0200.JPG" alt=""></p>
<p>   在这个13亿茫茫人海当中，你已我相距<code>1325公里</code>因缘分而相识，因相趣而相知，你是一个文文静静，高高大大，很懂事，很孝顺的女孩子，懂的体贴别人，关爱自己身边的人，你一米72，我一米八，走在一起别人总说我们很般配,其实我听了心里还是廷美滋滋的，因为很幸福.<br>   知道么，和你在一起，已经过了不知不觉的1年228天了，和你在一起的日子，总是太快太短促了，还记得我们的相识么？-_-，那已经是在一年前的事情了。2014年9月23日，很清楚的记得当时的情景，我是老板，你是买家，因为一件衣服的聊起来了，但是保留在我计算机中的聊天记录却让你我回忆起曾经美好的种种经历，和你一起上网看我们的记录，我们那些日子一起说好的旅行，我们那些彼此约定，都一一兑现了。看着你甜蜜的微笑便要为这个人努力奋斗，因为，我爱你！<br>   虽然我们在异地，可是我们爱对彼此是那么信任感情的坚定，现在……却沉浸在和你在一起的美好的日子里，受到了一群好朋友的关心满满的祝福，我很满足……满足！</p>

      
    </div>
    

    

    

    <footer class="article-footer print-invisible">
      
      
    <a class="article-category-link" href="/categories/生活/">生活</a>

 
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Personal-life-record/">Personal life record</a></li></ul>


    </footer>
  </div>
  
</article>
<div class="print-invisible">
  

</div>


    
      <article id="post-日志分析平台/Elasticsearch/Elasticsearch1.7版本的索引定时自动清理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/30/日志分析平台/Elasticsearch/Elasticsearch1.7版本的索引定时自动清理/">Elasticsearch1.7版本的索引定时自动清理</a>
    </h1>
  

        
        <div class="article-meta">
          <div class="article-date">
  <div class="article-date" style="display:inline;">
    <i class="fa fa-upload" aria-hidden="true"></i>
    <time datetime="2016-01-30T09:56:03.000Z" itemprop="datePublished">2016-01-30</time>
  </div>
  <div style="display:inline;">
    <i class="fa fa-edit" aria-hidden="true"></i>
    <time datetime="2017-09-19T09:45:56.000Z" itemprop="dateUpdated">2017-09-19</time>
  </div>
</div>

          

          


          
        </div>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      
        <h1 id="elasticsearch的索引定时自动清理"><a href="#elasticsearch的索引定时自动清理" class="headerlink" title="elasticsearch的索引定时自动清理"></a>elasticsearch的索引定时自动清理</h1><p>之前用 logstash来做日志收集 并用 elasticsearch来搜索，因为日志没有进行过滤，没几天就发现elasticsearch的索引文件大的吓人，之前还真没清理过。其实要说清理也简单，直接到 elasticsearch data文件夹里删掉就行了，写个脚本定期清理集群es的日志数据。</p>
<p>这里我清理1月7号的。</p>
<p>这里后面是索引名称。<br>app_error-2017.01.07</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@es_01 sh]<span class="comment"># curl -XDELETE 'http://10.47.88.206:9200/app_error-2017.01.07'</span></div><div class="line">&#123;<span class="string">"acknowledged"</span>:<span class="literal">true</span>&#125;[root@es_01 sh]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>shell 7天清理一次数据写在计划任务里面：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line">now=`date +%Y%m%d`</div><div class="line"><span class="built_in">echo</span> <span class="variable">$now</span></div><div class="line">days_07_before=`date <span class="_">-d</span> <span class="string">"<span class="variable">$now</span> 7 days ago"</span> +%Y.%m.%d`</div><div class="line"><span class="built_in">echo</span> <span class="variable">$days_30_before</span></div><div class="line">curl -XDELETE <span class="string">"http://10.47.88.206:9200/app_error-<span class="variable">$days_07_before</span>"</span> &gt; /dev/null 2&gt;&amp;1</div><div class="line">curl -XDELETE <span class="string">"http://10.47.88.206:9200/app_info-<span class="variable">$days_07_before</span>"</span> &gt; /dev/null 2&gt;&amp;1</div><div class="line">curl -XDELETE <span class="string">"http://10.47.88.206:9200/logback_app_error-<span class="variable">$days_07_before</span>"</span> &gt; /dev/null 2&gt;&amp;1</div><div class="line">curl -XDELETE <span class="string">"http://10.47.88.206:9200/logback_app_info-<span class="variable">$days_07_before</span>"</span> &gt; /dev/null 2&gt;&amp;1</div></pre></td></tr></table></figure>
<p>计划任务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">10 0 * * * /opt/sh/logstash-null.sh</div></pre></td></tr></table></figure>

      
    </div>
    

    

    

    <footer class="article-footer print-invisible">
      
      
    <a class="article-category-link" href="/categories/日志分析平台/">日志分析平台</a>

 
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Elasticsearch/">Elasticsearch</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Log-analysis-platform/">Log analysis platform</a></li></ul>


    </footer>
  </div>
  
</article>
<div class="print-invisible">
  

</div>


    
      <article id="post-日志分析平台/Elasticsearch/logstash如何收集tomcat日志分析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/29/日志分析平台/Elasticsearch/logstash如何收集tomcat日志分析/">logstash如何写tomcat,redis,nginx日志收集规则</a>
    </h1>
  

        
        <div class="article-meta">
          <div class="article-date">
  <div class="article-date" style="display:inline;">
    <i class="fa fa-upload" aria-hidden="true"></i>
    <time datetime="2016-01-29T09:56:03.000Z" itemprop="datePublished">2016-01-29</time>
  </div>
  <div style="display:inline;">
    <i class="fa fa-edit" aria-hidden="true"></i>
    <time datetime="2017-09-19T08:44:18.000Z" itemprop="dateUpdated">2017-09-19</time>
  </div>
</div>

          

          


          
        </div>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      
        <h5 id="logstash如何收集tomcat日志分析（可以参考我下面写的模板）"><a href="#logstash如何收集tomcat日志分析（可以参考我下面写的模板）" class="headerlink" title="logstash如何收集tomcat日志分析（可以参考我下面写的模板）"></a>logstash如何收集tomcat日志分析（可以参考我下面写的模板）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line">我想实现对tomcat的日志采集，正常应该创建一个file的input，这个input指定了监听的文件或者目录....然后过滤器（如果没有特殊要求，先可以不进行解析，原始的日志直接存就行）....最后使用一个elastcisearch插件，发送到es中去.</div><div class="line"></div><div class="line">input &#123;</div><div class="line">        stdin&#123;&#125;</div><div class="line"></div><div class="line">        file &#123;</div><div class="line">                <span class="built_in">type</span> =&gt; <span class="string">"tomcat_card"</span></div><div class="line">                path =&gt; <span class="string">"/srv/tomcat/logs/card/*.log"</span></div><div class="line">                start_position =&gt; <span class="string">"beginning"</span></div><div class="line">        &#125;</div><div class="line">        file &#123;</div><div class="line">                <span class="built_in">type</span> =&gt; <span class="string">"tomcat_family"</span></div><div class="line">                path =&gt; <span class="string">"/srv/tomcat/logs/family/*.log"</span></div><div class="line">                start_position =&gt; <span class="string">"beginning"</span></div><div class="line"></div><div class="line">        &#125;</div><div class="line">        file &#123;</div><div class="line">                <span class="built_in">type</span> =&gt; <span class="string">"tomcat_mission"</span></div><div class="line">                path =&gt; <span class="string">"/srv/tomcat/logs/mission/*.log"</span></div><div class="line">                start_position =&gt; <span class="string">"beginning"</span></div><div class="line"></div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">filter &#123;</div><div class="line"></div><div class="line">        grok &#123;</div><div class="line">                match =&gt; [</div><div class="line">                                <span class="string">"message"</span>, <span class="string">"%&#123;TIMESTAMP_ISO8601:logdate&#125; %&#123;WORD:loglevel&#125;%&#123;SPACE&#125;%&#123;NOTSPACE:loggername&#125; - %&#123;GREEDYDATA:msg&#125;"</span>,</div><div class="line">                                <span class="string">"message"</span>, <span class="string">"%&#123;GREEDYDATA:msg&#125;"</span></div><div class="line">                         ]</div><div class="line"></div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">output&#123;</div><div class="line">        <span class="keyword">if</span> [<span class="built_in">type</span>] == <span class="string">"tomcat_card"</span> &#123;</div><div class="line">        elasticsearch &#123;</div><div class="line">                host =&gt; <span class="string">"192.168.1.234"</span></div><div class="line">                protocol =&gt; <span class="string">"http"</span></div><div class="line">                index   =&gt; <span class="string">"tomcat_card-%&#123;+YYYYY.MM.dd&#125;"</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">        <span class="keyword">if</span> [<span class="built_in">type</span>] == <span class="string">"tomcat_family"</span> &#123;</div><div class="line">        elasticsearch &#123;</div><div class="line">                host =&gt; <span class="string">"192.168.1.234"</span></div><div class="line">                protocol =&gt; <span class="string">"http"</span></div><div class="line">                index   =&gt; <span class="string">"tomcat_card-%&#123;+YYYYY.MM.dd&#125;"</span></div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> [<span class="built_in">type</span>] == <span class="string">"tomcat_mission"</span> &#123;</div><div class="line">        elasticsearch &#123;</div><div class="line">                host =&gt; <span class="string">"192.168.1.234"</span></div><div class="line">                protocol =&gt; <span class="string">"http"</span></div><div class="line">                index   =&gt; <span class="string">"tomcat_mission-%&#123;+YYYYY.MM.dd&#125;"</span></div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="logstash日志采集nginx配置"><a href="#logstash日志采集nginx配置" class="headerlink" title="logstash日志采集nginx配置"></a>logstash日志采集nginx配置</h5><p>/etc/logstash/conf.d/nginx.conf</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">input &#123;</div><div class="line">file &#123;</div><div class="line">path =&gt; <span class="string">"/data/wwwlogs/nginx_json.log"</span></div><div class="line">codec =&gt; <span class="string">"json"</span></div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">filter &#123;</div><div class="line">mutate &#123;</div><div class="line">split =&gt; [ <span class="string">"upstreamtime"</span>, <span class="string">","</span> ]</div><div class="line">&#125;</div><div class="line">mutate &#123;</div><div class="line">convert =&gt; [ <span class="string">"upstreamtime"</span>, <span class="string">"float"</span> ]</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">output &#123;</div><div class="line">kafka &#123;</div><div class="line">bootstrap_servers =&gt; <span class="string">"10.0.0.11:9092"</span></div><div class="line">topic_id =&gt; <span class="string">"logstash"</span></div><div class="line">compression_type =&gt; <span class="string">"gzip"</span></div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="创建一个从日志文件读取，并写入redis的配置文件-本文件采用默认方式进行输入，输出"><a href="#创建一个从日志文件读取，并写入redis的配置文件-本文件采用默认方式进行输入，输出" class="headerlink" title="创建一个从日志文件读取，并写入redis的配置文件(本文件采用默认方式进行输入，输出)"></a>创建一个从日志文件读取，并写入redis的配置文件(本文件采用默认方式进行输入，输出)</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#cat agent.conf</span></div><div class="line">input &#123;</div><div class="line">    file &#123;</div><div class="line">        path =&gt; <span class="string">"/var/log/httpd/access_log"</span>    //设置读取的日志路径</div><div class="line">        sincedb_path =&gt; <span class="string">"../.sincedb"</span></div><div class="line">        <span class="built_in">type</span> =&gt; <span class="string">"httpd"</span></div><div class="line">        start_position =&gt; <span class="string">"beginning"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">output &#123;</div><div class="line">    redis &#123;</div><div class="line">        host =&gt; [<span class="string">"127.0.0.1"</span>]</div><div class="line">        port =&gt; 6379</div><div class="line">        batch =&gt; <span class="literal">true</span></div><div class="line">            batch_events =&gt; 5</div><div class="line">            data_type =&gt; <span class="string">"list"</span></div><div class="line">            key =&gt; <span class="string">"logstash:redis"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">配置一个从redis读取日志并输出到es的配置文件</div><div class="line"></div><div class="line"><span class="comment">#cat index.conf</span></div><div class="line">input &#123;</div><div class="line">  redis &#123;</div><div class="line">    host =&gt; [<span class="string">"127.0.0.1"</span>]</div><div class="line">    port =&gt; 6379</div><div class="line">    data_type =&gt; <span class="string">"list"</span></div><div class="line">    key =&gt; “<span class="built_in">log</span> stash:redis<span class="string">"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">output &#123;</div><div class="line">        elasticsearch &#123;</div><div class="line">        host =&gt; "127.0.0.1<span class="string">"</span></div><div class="line">        protocol =&gt; "http<span class="string">"</span></div><div class="line">        index =&gt; "logstash-%&#123;<span class="built_in">type</span>&#125;-%&#123;+YYYY.MM.dd&#125;<span class="string">"</span></div><div class="line">        index_type =&gt; "%&#123;<span class="built_in">type</span>&#125;<span class="string">"</span></div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">启动logstash</div></pre></td></tr></table></figure>

      
    </div>
    

    

    

    <footer class="article-footer print-invisible">
      
      
    <a class="article-category-link" href="/categories/日志分析平台/">日志分析平台</a>

 
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Log-analysis-platform/">Log analysis platform</a></li></ul>


    </footer>
  </div>
  
</article>
<div class="print-invisible">
  

</div>


    
      <article id="post-日志分析平台/Elasticsearch/ELK-Elasticsearch-Logstash-Kibana-搭建日志集中分析平台实践" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/21/日志分析平台/Elasticsearch/ELK-Elasticsearch-Logstash-Kibana-搭建日志集中分析平台实践/">ELK(Elasticsearch + Logstash + Kibana)搭建日志集中分析平台实践</a>
    </h1>
  

        
        <div class="article-meta">
          <div class="article-date">
  <div class="article-date" style="display:inline;">
    <i class="fa fa-upload" aria-hidden="true"></i>
    <time datetime="2016-01-21T09:56:03.000Z" itemprop="datePublished">2016-01-21</time>
  </div>
  <div style="display:inline;">
    <i class="fa fa-edit" aria-hidden="true"></i>
    <time datetime="2017-09-07T15:31:39.000Z" itemprop="dateUpdated">2017-09-07</time>
  </div>
</div>

          

          


          
        </div>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      
        <h4 id="关注可参考："><a href="#关注可参考：" class="headerlink" title="关注可参考："></a>关注可参考：</h4><p>本文将安装Elasticsearch-1.7.2, Logstash-1.5.5, Kibana-4.1.5。 请注意版本要求，有些组件需要响应的版本要求。<br>logstash是负责搜集和转发日志的，es用于存储和检索，kibana提供web端的展现…他们是独立运行的，也可以部署在同一台机器，也可以不同的机器。</p>
<p>可以关注我的Github上面有详细文档：<a href="https://github.com/yangcvo/ELK" target="_blank" rel="external">https://github.com/yangcvo/ELK</a><br> 启动脚本下载：<a href="https://github.com/yangcvo/ELK" target="_blank" rel="external">https://github.com/yangcvo/ELK</a></p>
<ul>
<li>详细配置优化做集群与写收集日志规则教程: <a href="https://github.com/yangcvo/ELK" target="_blank" rel="external">https://github.com/yangcvo/ELK</a></li>
</ul>
<h4 id="组件预览"><a href="#组件预览" class="headerlink" title="组件预览"></a>组件预览</h4><ul>
<li><p>JDK  <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="external">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p>
</li>
<li><p>Elasticsearch <a href="https://www.elastic.co/downloads/elasticsearch" target="_blank" rel="external">https://www.elastic.co/downloads/elasticsearch</a></p>
</li>
<li><p>Logstash <a href="https://www.elastic.co/downloads/logstash" target="_blank" rel="external">https://www.elastic.co/downloads/logstash</a></p>
</li>
</ul>
<ul>
<li><p>Kibana下载地址:<a href="https://www.elastic.co/downloads/kibana" target="_blank" rel="external">https://www.elastic.co/downloads/kibana</a></p>
</li>
<li><p>redis下载地址: <a href="http://redis.io/download" target="_blank" rel="external">http://redis.io/download</a></p>
</li>
</ul>
<h4 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作:"></a>准备工作:</h4><p>服务端：系统centos 6.7   ip:192.168.1.234   JDK1.8    Elasticsearch-1.7.2  Kibana-4.1.2<br>客户端：系统centos 6.7   ip:192.168.1.235   JDK1.8    Logash-1.4.2</p>
<h4 id="基本配置设置FQDN："><a href="#基本配置设置FQDN：" class="headerlink" title="基本配置设置FQDN："></a>基本配置设置FQDN：</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">创建SSL证书的时候需要配置FQDN</div><div class="line">#修改hostname</div><div class="line">cat /etc/hostname</div><div class="line">elk</div><div class="line"></div><div class="line">#修改hosts</div><div class="line">cat /etc/hosts</div><div class="line"><span class="number">127.0</span>.<span class="number">0.1</span> localhost localhost<span class="selector-class">.localdomain</span> localhost4 localhost4<span class="selector-class">.localdomain4</span></div><div class="line">::<span class="number">1</span> localhost localhost<span class="selector-class">.localdomain</span> localhost6 localhost6<span class="selector-class">.localdomain6</span></div><div class="line"><span class="number">192.168</span>.<span class="number">1.234</span> elk<span class="selector-class">.ooxx</span><span class="selector-class">.com</span> elk</div><div class="line"></div><div class="line">#刷新环境</div><div class="line">hostname -F /etc/hostname</div><div class="line"></div><div class="line">#复查结果</div><div class="line">hostname -f</div><div class="line">elk<span class="selector-class">.ooxx</span><span class="selector-class">.com</span></div><div class="line"></div><div class="line">hostname</div><div class="line">elk</div></pre></td></tr></table></figure>
<h4 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#service iptables stop</span></div><div class="line"><span class="comment">#setenforce 0</span></div><div class="line"></div><div class="line">不过这里我防火墙是开启的，后期添加出去端口即可。</div><div class="line">或者可以不关闭防火墙，但是要在iptables中打开相关的端口：</div><div class="line"></div><div class="line"><span class="comment"># vim /etc/sysconfig/iptables</span></div><div class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT</div><div class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 9200 -j ACCEPT</div><div class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 9292 -j ACCEPT</div><div class="line"><span class="comment"># service iptables restart</span></div></pre></td></tr></table></figure>
<h4 id="安装java："><a href="#安装java：" class="headerlink" title="安装java："></a>安装java：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ElasticSearch和Logstash依赖于JDK，所以需要安装JDK：</div><div class="line"><span class="comment"># yum -y install java-1.8.0-openjdk*</span></div><div class="line"><span class="comment"># java -version</span></div><div class="line">这里我是用yum安装方法，也可以自行下载tar包，注意设置java路径。</div><div class="line">java也可到这个地址下载https://www.reucon.com/cdn/java/</div></pre></td></tr></table></figure>
<h4 id="安装Elasticsearch："><a href="#安装Elasticsearch：" class="headerlink" title="安装Elasticsearch："></a>安装Elasticsearch：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">RPM安装</div><div class="line">下载ElasticSearch ElasticSearch默认的对外服务的HTTP端口是9200，节点间交互的TCP端口是9300。</div><div class="line">.以 CentOS 下使用安装包RPM安装</div><div class="line">＃mkdir -p /opt/software &amp;&amp; <span class="built_in">cd</span> /opt/software</div><div class="line">＃wget -c https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.7.2.noarch.rpm</div><div class="line">＃rpm -ivh elasticsearch-1.7.2.noarch.rpm</div><div class="line"></div><div class="line">可以自定义下存储文件目录 用RPM 安装。</div><div class="line"></div><div class="line">vim /etc/elasticsearch/elasticsearch.yml</div><div class="line">cluster.name: graylog-development</div><div class="line">node.data: <span class="literal">true</span></div><div class="line">index.number_of_shards: 5</div><div class="line">index.number_of_replicas: 1</div><div class="line">path.data: /home/data/es-data   自定存储目录</div><div class="line">path.work: /home/data/es-work</div><div class="line">network.host: 192.168.1.234</div></pre></td></tr></table></figure>
<h4 id="启动es相关服务"><a href="#启动es相关服务" class="headerlink" title="启动es相关服务"></a>启动es相关服务</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">service elasticsearch <span class="keyword">start</span></div><div class="line">service elasticsearch <span class="keyword">status</span></div></pre></td></tr></table></figure>
<h4 id="es源码安装"><a href="#es源码安装" class="headerlink" title="es源码安装"></a>es源码安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">这里我是源码安装的</div><div class="line">下载ElasticSearch ElasticSearch默认的对外服务的HTTP端口是9200，节点间交互的TCP端口是9300。</div><div class="line">Elasticsearch - https://www.elastic.co/downloads/elasticsearch</div><div class="line">tar -zxvf elasticsearch-1.7.1.tar.gz -C /usr/<span class="built_in">local</span>/</div><div class="line"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/elasticsearch-1.7.1/config/</div><div class="line"></div><div class="line">然后给目录做个软链接：</div><div class="line">ln <span class="_">-s</span> elasticsearch-1.7.1/ /usr/<span class="built_in">local</span>/elasticsearch</div><div class="line"></div><div class="line">这里需要修改配置文件：</div><div class="line">配置前先创建几个目录文件</div><div class="line">mkdir /data/es-data -p</div><div class="line"> mkdir /data/es-work -p</div><div class="line"> mkdir   /usr/<span class="built_in">local</span>/elasticsearch-1.7.1/config/logs</div><div class="line"> mkdir   /usr/<span class="built_in">local</span>/elasticsearch-1.7.1/config/plugins</div></pre></td></tr></table></figure>
<h4 id="配置Elasticsearch："><a href="#配置Elasticsearch：" class="headerlink" title="配置Elasticsearch："></a>配置Elasticsearch：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">vim elasticsearch.yml</div><div class="line"></div><div class="line"></div><div class="line">cluster.name: elasticsearch   集群名称  </div><div class="line"></div><div class="line"><span class="comment">#################################### Node #####################################</span></div><div class="line"></div><div class="line"><span class="comment"># Node names are generated dynamically on startup, so you're relieved</span></div><div class="line"><span class="comment"># from configuring them manually. You can tie this node to a specific name:</span></div><div class="line"><span class="comment">#</span></div><div class="line">node.name: “linux_es”   这里我做了集群所以需要两个节点，这里我写了一个节点名称</div><div class="line"></div><div class="line"><span class="comment"># Every node can be configured to allow or deny being eligible as the master,</span></div><div class="line"><span class="comment"># and to allow or deny to store the data.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Allow this node to be eligible as a master node (enabled by default):</span></div><div class="line"><span class="comment">#</span></div><div class="line">node.master: <span class="literal">true</span>   集群master 启动</div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Allow this node to store data (enabled by default):</span></div><div class="line"><span class="comment">#</span></div><div class="line">node.data: <span class="literal">true</span>  数据存放<span class="literal">true</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># Set the number of shards (splits) of an index (5 by default):</span></div><div class="line"><span class="comment">#</span></div><div class="line">index.number_of_shards: 5</div><div class="line"></div><div class="line"><span class="comment"># Set the number of replicas (additional copies) of an index (1 by default):</span></div><div class="line"><span class="comment">#</span></div><div class="line">index.number_of_replicas: 1</div><div class="line"></div><div class="line"><span class="comment">#################################### Paths ####################################</span></div><div class="line"></div><div class="line"><span class="comment"># Path to directory containing configuration (this file and logging.yml):</span></div><div class="line"><span class="comment">#</span></div><div class="line">path.conf: /usr/<span class="built_in">local</span>/elasticsearch/config  这里开启es配置文件目录路径</div><div class="line"></div><div class="line"><span class="comment"># Path to directory where to store index data allocated for this node.</span></div><div class="line"><span class="comment">#</span></div><div class="line">path.data: /data/es-data     es数据存放目录  这里需要自己新建目录</div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Can optionally include more than one location, causing data to be striped across</span></div><div class="line"><span class="comment"># the locations (a la RAID 0) on a file level, favouring locations with most free</span></div><div class="line"><span class="comment"># space on creation. For example:</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#path.data: /path/to/data1,/path/to/data2</span></div><div class="line"></div><div class="line"><span class="comment"># Path to temporary files:</span></div><div class="line"><span class="comment">#</span></div><div class="line">path.work: /data/es-work   </div><div class="line"></div><div class="line"><span class="comment"># Path to log files:</span></div><div class="line"><span class="comment">#</span></div><div class="line">path.logs: /usr/<span class="built_in">local</span>/elasticsearch/logs   es的存放日志  这里需要自己创建下文件</div><div class="line"></div><div class="line"><span class="comment"># Path to where plugins are installed:</span></div><div class="line"><span class="comment">#</span></div><div class="line">path.plugins: /usr/<span class="built_in">local</span>/elasticsearch/plugins   es安装插件存放路径</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Set this property to true to lock the memory:</span></div><div class="line"><span class="comment">#</span></div><div class="line">bootstrap.mlockall: <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>源码安装启动需要执行 ：<code>/usr/local/elasticsearch/bin/elasticsearch</code><br>才能启动；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">这里需要/etc/init.d/创建启动脚本。</div><div class="line">可以到我github上面下载。</div><div class="line">[root@ELK elasticsearch-servicewrapper]<span class="comment"># mv service/ /usr/local/elasticsearch/bin/</span></div><div class="line">[root@ELK elasticsearch-servicewrapper]<span class="comment"># cd /usr/local/elasticsearch</span></div><div class="line">[root@ELK elasticsearch]<span class="comment"># /usr/local/elasticsearch/bin/service/elasticsearch install    这里是安装es</span></div><div class="line">Detected RHEL or Fedora:</div><div class="line">Installing the Elasticsearch daemon..</div><div class="line">[root@ELK elasticsearch]<span class="comment"># vim /etc/init.d/elasticsearch   查看安装es启动配置文件</span></div><div class="line">[root@ELK elasticsearch]<span class="comment"># service elasticsearch start  启动es </span></div><div class="line">Starting Elasticsearch...</div><div class="line">Waiting <span class="keyword">for</span> Elasticsearch......</div><div class="line">running: PID:31360   服务已启动了。</div><div class="line"></div><div class="line">启动相关服务</div><div class="line">service elasticsearch start</div><div class="line">service elasticsearch status</div><div class="line"></div><div class="line">配置 elasticsearch 服务随系统自动启动</div><div class="line"><span class="comment"># chkconfig --add elasticsearch</span></div><div class="line"></div><div class="line">测试ElasticSearch服务是否正常，预期返回200的状态码</div><div class="line"><span class="comment"># curl -X GET http://localhost:9200</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"name"</span> : <span class="string">"elk"</span>,</div><div class="line">  <span class="string">"cluster_name"</span> : <span class="string">"elasticsearch"</span>,</div><div class="line">  <span class="string">"cluster_uuid"</span> : <span class="string">"-4Rqn4IzS1GfnsodqZD8Tg"</span>,</div><div class="line">  <span class="string">"version"</span> : &#123;</div><div class="line">    <span class="string">"number"</span> : <span class="string">"1.7.2"</span>,</div><div class="line">    <span class="string">"build_hash"</span> : <span class="string">"d38a34e7b75af4e17ead16f156feffa432b22be3"</span>,</div><div class="line">    <span class="string">"build_timestamp"</span> : <span class="string">"2016-01-03T16:28:56Z"</span>,</div><div class="line">    <span class="string">"build_snapshot"</span> : <span class="literal">false</span>,</div><div class="line">    <span class="string">"lucene_version"</span> : <span class="string">"5.5.2"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"tagline"</span> : <span class="string">"You Know, for Search"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="安装-head、marvel、bigdesk插件"><a href="#安装-head、marvel、bigdesk插件" class="headerlink" title="安装 head、marvel、bigdesk插件:"></a>安装 head、marvel、bigdesk插件:</h4><h6 id="head插件"><a href="#head插件" class="headerlink" title="head插件"></a>head插件</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">插件安装方法1：</div><div class="line">/usr/<span class="built_in">local</span>/elasticsearch/bin/plugin -install mobz/elasticsearch-head</div><div class="line">重启es 即可。</div><div class="line">打开http://localhost:9200/_plugin/head/</div><div class="line"></div><div class="line">插件安装方法2：</div><div class="line">1.https://github.com/mobz/elasticsearch-head下载zip 解压</div><div class="line">2.建立/usr/<span class="built_in">local</span>/elasticsearch/plugins/head/文件</div><div class="line">3.将解压后的elasticsearch-head-master文件夹下的文件copy到/usr/<span class="built_in">local</span>/elasticsearch/plugins/head/</div><div class="line">重启es 即可。</div><div class="line"></div><div class="line">打开http://localhost:9200/_plugin/head/</div></pre></td></tr></table></figure>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/elk_head.png" alt=""></p>
<h6 id="Marvel插件"><a href="#Marvel插件" class="headerlink" title="Marvel插件"></a>Marvel插件</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Elasticsearch 的集群和数据管理界面 Marvel 非常赞，可惜只对开发环境免费，</div><div class="line">参考链接：https://www.elastic.co/guide/en/marvel/current/configuration.html</div><div class="line"></div><div class="line">插件安装</div><div class="line">/usr/<span class="built_in">local</span>/elasticsearch/bin/plugin -i elasticsearch/marvel/latest</div><div class="line"></div><div class="line">重启es 即可。</div><div class="line">完成后重启服务访问 http://192.168.1.234:9200/_plugin/marvel/</div><div class="line"></div><div class="line">如何看不到下面的页面，就修改下这里的参数看看有没有配置：vim elasticsearch.yml  </div><div class="line">network.host: 192.168.1.234  </div><div class="line">在重启es 然后在查看就有数据。</div></pre></td></tr></table></figure>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/elk_marvel.png" alt=""></p>
<h4 id="bigdesk插件"><a href="#bigdesk插件" class="headerlink" title="bigdesk插件"></a>bigdesk插件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">看需求安装</div><div class="line">功能: 监控查看cpu、内存使用情况,索引数据、搜索情况,http连接数等</div><div class="line">安装</div><div class="line"><span class="comment">#/elstaicsearch/bin/plugin -i lukas-vlcek/bigdesk</span></div><div class="line">重启es 即可。</div><div class="line">完成后重启服务访问 http://192.168.1.234:9200/_plugin/bigdesk</div></pre></td></tr></table></figure>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/elk_bigdesk.png" alt=""></p>
<h4 id="安装Kibana"><a href="#安装Kibana" class="headerlink" title="安装Kibana:"></a>安装Kibana:</h4><p>在es机器上面安装kibana.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">到https://www.elastic.co/downloads/kibana  找合适的版本。</div><div class="line">每个版本下面有这么一行内容，一定要注意这些内容：Compatible with Elasticsearch 1.4.4 - 1.7</div><div class="line"><span class="built_in">cd</span> /opt/software/  &amp;&amp; wget https://download.elastic.co/kibana/kibana/kibana-4.1.2-linux-x64.tar.gz</div><div class="line"><span class="comment">#解压</span></div><div class="line"></div><div class="line">＃tar zxvf kibana-4.1.2-linux-x64.tar.gz -C /usr/<span class="built_in">local</span> </div><div class="line">＃<span class="built_in">cd</span>  /usr/<span class="built_in">local</span>/ &amp;&amp; mv kibana-4.1.2-linux-x64 kibana</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">#创建kibana启动脚本服务</span></div><div class="line">vi /etc/rc.d/init.d/kibana</div><div class="line"></div><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment">### BEGIN INIT INFO</span></div><div class="line"><span class="comment"># Provides:          kibana</span></div><div class="line"><span class="comment"># Default-Start:     2 3 4 5</span></div><div class="line"><span class="comment"># Default-Stop:      0 1 6</span></div><div class="line"><span class="comment"># Short-Description: Runs kibana daemon</span></div><div class="line"><span class="comment"># Description: Runs the kibana daemon as a non-root user</span></div><div class="line"><span class="comment">### END INIT INFO</span></div><div class="line"></div><div class="line"><span class="comment"># Process name</span></div><div class="line">NAME=kibana</div><div class="line">DESC=<span class="string">"Kibana4"</span></div><div class="line">PROG=<span class="string">"/etc/init.d/kibana"</span></div><div class="line"></div><div class="line"><span class="comment"># Configure location of Kibana bin</span></div><div class="line">KIBANA_BIN=/usr/<span class="built_in">local</span>/kibana/bin</div><div class="line"></div><div class="line"><span class="comment"># PID Info</span></div><div class="line">PID_FOLDER=/var/run/kibana/</div><div class="line">PID_FILE=/var/run/kibana/<span class="variable">$NAME</span>.pid</div><div class="line">LOCK_FILE=/var/lock/subsys/<span class="variable">$NAME</span></div><div class="line">PATH=/bin:/usr/bin:/sbin:/usr/sbin:<span class="variable">$KIBANA_BIN</span></div><div class="line">DAEMON=<span class="variable">$KIBANA_BIN</span>/<span class="variable">$NAME</span></div><div class="line"></div><div class="line"><span class="comment"># Configure User to run daemon process</span></div><div class="line">DAEMON_USER=root</div><div class="line"><span class="comment"># Configure logging location</span></div><div class="line">KIBANA_LOG=/var/<span class="built_in">log</span>/kibana.log</div><div class="line"></div><div class="line"><span class="comment"># Begin Script</span></div><div class="line">RETVAL=0</div><div class="line"></div><div class="line"><span class="keyword">if</span> [ `id -u` <span class="_">-ne</span> 0 ]; <span class="keyword">then</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"You need root privileges to run this script"</span></div><div class="line">        <span class="built_in">exit</span> 1</div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="comment"># Function library</span></div><div class="line">. /etc/init.d/<span class="built_in">functions</span></div><div class="line"> </div><div class="line"><span class="function"><span class="title">start</span></span>() &#123;</div><div class="line">        <span class="built_in">echo</span> -n <span class="string">"Starting <span class="variable">$DESC</span> : "</span></div><div class="line"></div><div class="line">pid=`pidofproc -p <span class="variable">$PID_FILE</span> kibana`</div><div class="line">        <span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$pid</span>"</span> ] ; <span class="keyword">then</span></div><div class="line">                <span class="built_in">echo</span> <span class="string">"Already running."</span></div><div class="line">                <span class="built_in">exit</span> 0</div><div class="line">        <span class="keyword">else</span></div><div class="line">        <span class="comment"># Start Daemon</span></div><div class="line"><span class="keyword">if</span> [ ! <span class="_">-d</span> <span class="string">"<span class="variable">$PID_FOLDER</span>"</span> ] ; <span class="keyword">then</span></div><div class="line">                        mkdir <span class="variable">$PID_FOLDER</span></div><div class="line">                <span class="keyword">fi</span></div><div class="line">daemon --user=<span class="variable">$DAEMON_USER</span> --pidfile=<span class="variable">$PID_FILE</span> <span class="variable">$DAEMON</span> 1&gt;<span class="string">"<span class="variable">$KIBANA_LOG</span>"</span> 2&gt;&amp;1 &amp;</div><div class="line">                sleep 2</div><div class="line">                pidofproc node &gt; <span class="variable">$PID_FILE</span></div><div class="line">                RETVAL=$?</div><div class="line">                [[ $? <span class="_">-eq</span> 0 ]] &amp;&amp; success || failure</div><div class="line"><span class="built_in">echo</span></div><div class="line">                [ <span class="variable">$RETVAL</span> = 0 ] &amp;&amp; touch <span class="variable">$LOCK_FILE</span></div><div class="line">                <span class="built_in">return</span> <span class="variable">$RETVAL</span></div><div class="line">        <span class="keyword">fi</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="title">reload</span></span>()</div><div class="line">&#123;</div><div class="line">    <span class="built_in">echo</span> <span class="string">"Reload command is not implemented for this service."</span></div><div class="line">    <span class="built_in">return</span> <span class="variable">$RETVAL</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="title">stop</span></span>() &#123;</div><div class="line">        <span class="built_in">echo</span> -n <span class="string">"Stopping <span class="variable">$DESC</span> : "</span></div><div class="line">        killproc -p <span class="variable">$PID_FILE</span> <span class="variable">$DAEMON</span></div><div class="line">        RETVAL=$?</div><div class="line"><span class="built_in">echo</span></div><div class="line">        [ <span class="variable">$RETVAL</span> = 0 ] &amp;&amp; rm <span class="_">-f</span> <span class="variable">$PID_FILE</span> <span class="variable">$LOCK_FILE</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></div><div class="line">  start)</div><div class="line">        start</div><div class="line">;;</div><div class="line">  stop)</div><div class="line">        stop</div><div class="line">        ;;</div><div class="line">  status)</div><div class="line">        status -p <span class="variable">$PID_FILE</span> <span class="variable">$DAEMON</span></div><div class="line">        RETVAL=$?</div><div class="line">        ;;</div><div class="line">  restart)</div><div class="line">        stop</div><div class="line">        start</div><div class="line">        ;;</div><div class="line">  reload)</div><div class="line">reload</div><div class="line">;;</div><div class="line">  *)</div><div class="line"><span class="comment"># Invalid Arguments, print the following message.</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"Usage: <span class="variable">$0</span> &#123;start|stop|status|restart&#125;"</span> &gt;&amp;2</div><div class="line"><span class="built_in">exit</span> 2</div><div class="line">        ;;</div><div class="line"><span class="keyword">esac</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">#修改启动权限</span></div><div class="line">chmod +x /etc/rc.d/init.d/kibana</div><div class="line"></div><div class="line"><span class="comment">#启动kibana服务</span></div><div class="line">service kibana start</div><div class="line">service kibana status</div><div class="line"></div><div class="line"><span class="comment">#查看端口</span></div><div class="line"></div><div class="line">netstat -nltp</div><div class="line"></div><div class="line">Active Internet connections (only servers)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name   </div><div class="line">tcp        0      0 0.0.0.0:9200                0.0.0.0:*                   LISTEN      1765/java           </div><div class="line">tcp        0      0 0.0.0.0:9300                0.0.0.0:*                   LISTEN      1765/java           </div><div class="line">tcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN      1509/sshd           </div><div class="line">tcp        0      0 0.0.0.0:5601                0.0.0.0:*                   LISTEN      1876/node           </div><div class="line">tcp        0      0 :::22                       :::*                        LISTEN      1509/sshd</div></pre></td></tr></table></figure>
<h4 id="配置Kibana："><a href="#配置Kibana：" class="headerlink" title="配置Kibana："></a>配置Kibana：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">#编辑kibana.yaml  修改端口，设置host 可以设置本地服务器IP</span></div><div class="line">vi /usr/<span class="built_in">local</span>/kibana/config/kibana.yml</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># Kibana is served by a back end server. This controls which port to use.</span></div><div class="line"></div><div class="line">port: 5601</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># The host to bind the server to.</span></div><div class="line">host: <span class="string">"0.0.0.0"</span></div><div class="line"></div><div class="line"><span class="comment"># The Elasticsearch instance to use for all your queries.</span></div><div class="line">elasticsearch_url: <span class="string">"http://localhost:9200"</span></div><div class="line"></div><div class="line"><span class="comment"># preserve_elasticsearch_host true will send the hostname specified in `elasticsearch`. If you set it to false,</span></div><div class="line"><span class="comment"># then the host you use to connect to *this* Kibana instance will be sent.</span></div><div class="line">elasticsearch_preserve_host: <span class="literal">true</span></div><div class="line"></div><div class="line"><span class="comment"># Kibana uses an index in Elasticsearch to store saved searches, visualizations</span></div><div class="line"><span class="comment"># and dashboards. It will create a new index if it doesn't already exist.</span></div><div class="line">kibana_index: <span class="string">".kibana"</span></div><div class="line"></div><div class="line"><span class="comment"># If your Elasticsearch is protected with basic auth, this is the user credentials</span></div><div class="line"><span class="comment"># used by the Kibana server to perform maintence on the kibana_index at statup. Your Kibana</span></div><div class="line"><span class="comment"># users will still need to authenticate with Elasticsearch (which is proxied thorugh</span></div><div class="line"><span class="comment"># the Kibana server)</span></div><div class="line"><span class="comment"># kibana_elasticsearch_username: user</span></div><div class="line"><span class="comment"># kibana_elasticsearch_password: pass</span></div><div class="line"></div><div class="line"><span class="comment"># If your Elasticsearch requires client certificate and key</span></div><div class="line"><span class="comment"># kibana_elasticsearch_client_crt: /path/to/your/client.crt</span></div><div class="line"><span class="comment"># kibana_elasticsearch_client_key: /path/to/your/client.key</span></div><div class="line"></div><div class="line"><span class="comment"># If you need to provide a CA certificate for your Elasticsarech instance, put</span></div><div class="line"><span class="comment"># the path of the pem file here.</span></div><div class="line"><span class="comment"># ca: /path/to/your/CA.pem</span></div><div class="line"></div><div class="line"><span class="comment"># The default application to load.</span></div><div class="line">default_app_id: <span class="string">"discover"</span></div><div class="line"></div><div class="line"><span class="comment"># Time in milliseconds to wait for elasticsearch to respond to pings, defaults to</span></div><div class="line"><span class="comment"># request_timeout setting</span></div><div class="line"><span class="comment"># ping_timeout: 1500</span></div><div class="line"></div><div class="line"><span class="comment"># Time in milliseconds to wait for responses from the back end or elasticsearch.</span></div><div class="line"><span class="comment"># This must be &gt; 0</span></div><div class="line">request_timeout: 300000</div><div class="line"></div><div class="line"><span class="comment"># Time in milliseconds for Elasticsearch to wait for responses from shards.</span></div><div class="line"><span class="comment"># Set to 0 to disable.</span></div><div class="line">shard_timeout: 0</div><div class="line"></div><div class="line"><span class="comment"># Time in milliseconds to wait for Elasticsearch at Kibana startup before retrying</span></div><div class="line"><span class="comment"># startup_timeout: 5000</span></div><div class="line"></div><div class="line"><span class="comment"># Set to false to have a complete disregard for the validity of the SSL</span></div><div class="line"><span class="comment"># certificate.</span></div><div class="line">verify_ssl: <span class="literal">true</span></div><div class="line"></div><div class="line"><span class="comment"># SSL for outgoing requests from the Kibana Server (PEM formatted)</span></div><div class="line"><span class="comment"># ssl_key_file: /path/to/your/server.key</span></div><div class="line"><span class="comment"># ssl_cert_file: /path/to/your/server.crt</span></div><div class="line"></div><div class="line"><span class="comment"># Set the path to where you would like the process id file to be created.</span></div><div class="line"><span class="comment"># pid_file: /var/run/kibana.pid</span></div><div class="line"></div><div class="line"><span class="comment"># If you would like to send the log output to a file you can set the path below.</span></div><div class="line"><span class="comment"># This will also turn off the STDOUT log output.</span></div><div class="line"><span class="comment"># log_file: ./kibana.log</span></div><div class="line"></div><div class="line"><span class="comment"># Plugins that are included in the build, and no longer found in the plugins/ folder</span></div><div class="line">bundled_plugin_ids:</div><div class="line">- plugins/dashboard/index</div><div class="line">- plugins/discover/index</div><div class="line">- plugins/doc/index</div><div class="line">- plugins/kibana/index</div><div class="line">- plugins/markdown_vis/index</div><div class="line">- plugins/metric_vis/index</div><div class="line">- plugins/settings/index</div><div class="line">- plugins/table_vis/index</div><div class="line">- plugins/vis_types/index</div><div class="line">- plugins/visualize/index</div></pre></td></tr></table></figure>
<h4 id="安装Logstash"><a href="#安装Logstash" class="headerlink" title="安装Logstash"></a>安装Logstash</h4><p>客户端：系统centos 6.7   ip:192.168.1.235 </p>
<h6 id="rpm安装"><a href="#rpm安装" class="headerlink" title="rpm安装"></a>rpm安装</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">#下载rpm包</span></div><div class="line">wget https://download.elastic.co/logstash/logstash/packages/centos/logstash-1.5.4-1.noarch.rpm</div><div class="line"><span class="comment">#安装</span></div><div class="line">yum localinstall logstash-1.5.4-1.noarch.rpm</div><div class="line"></div><div class="line">这里修改下hosts：vim /etc/hosts</div><div class="line">127.0.0.1   tomcat_A1</div></pre></td></tr></table></figure>
<h6 id="源码安装"><a href="#源码安装" class="headerlink" title="源码安装"></a>源码安装</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">我这里源码包安装</div><div class="line"><span class="comment"># wget https://download.elasticsearch.org/logstash/logstash/logstash-1.5.1.tar.gz</span></div><div class="line"><span class="comment">#curl -O https://download.elastic.co/logstash/logstash/logstash-1.5.4.tar.gz</span></div><div class="line"><span class="comment">#tar -zxvf logstash-1.5.1.tar.gz</span></div><div class="line"><span class="comment">#mv logstash-1.5.1 /usr/local/</span></div><div class="line"><span class="comment">#ln -s /usr/local/logstash-1.5.1/ /usr/local/logstash</span></div><div class="line"></div><div class="line">下载启动脚本</div><div class="line">生产都是运行在后台的，我这里源码安装没有init脚本启动。 去Github下载  https://github.com/benet1006/ELK_config.git</div><div class="line"><span class="comment">#cp logstash.init /etc/init.d/logstash</span></div><div class="line"><span class="comment">#chmod +x /etc/init.d/logstash</span></div><div class="line">这个脚本我做过修改。</div><div class="line"></div><div class="line"><span class="comment">#启动logstash服务</span></div><div class="line">service logstash start</div><div class="line">service logstash status</div><div class="line"></div><div class="line"><span class="comment">#查看5000端口</span></div><div class="line">netstat -nltp</div><div class="line"></div><div class="line">Active Internet connections (only servers)</div><div class="line">Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name</div><div class="line">tcp 0 0 0.0.0.0:9200 0.0.0.0:* LISTEN 1765/java</div><div class="line">tcp 0 0 0.0.0.0:9300 0.0.0.0:* LISTEN 1765/java</div><div class="line">tcp 0 0 0.0.0.0:9301 0.0.0.0:* LISTEN 2309/java</div><div class="line">tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 1509/sshd</div><div class="line">tcp 0 0 0.0.0.0:5601 0.0.0.0:* LISTEN 1876/node</div><div class="line">tcp 0 0 0.0.0.0:5000 0.0.0.0:* LISTEN 2309/java</div><div class="line">tcp 0 0 :::22 :::* LISTEN 1509/sshd</div><div class="line"></div><div class="line"></div><div class="line">修改启动脚本</div><div class="line">vim /etc/init.d/logstash </div><div class="line">指定的目录自己源码安装的路径。</div><div class="line"></div><div class="line">name=logstash</div><div class="line">pidfile=<span class="string">"/var/run/<span class="variable">$name</span>.pid"</span></div><div class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</div><div class="line">LS_USER=logstash</div><div class="line">LS_GROUP=logstash</div><div class="line">LS_HOME=/usr/<span class="built_in">local</span>/logstash 安装路径</div><div class="line">LS_HEAP_SIZE=<span class="string">"1000m"</span></div><div class="line">LS_JAVA_OPTS=<span class="string">"-Djava.io.tmpdir=<span class="variable">$&#123;LS_HOME&#125;</span>"</span></div><div class="line">LS_LOG_DIR=/usr/<span class="built_in">local</span>/logstash</div><div class="line">LS_LOG_FILE=<span class="string">"<span class="variable">$&#123;LS_LOG_DIR&#125;</span>/<span class="variable">$name</span>.log"</span></div><div class="line">LS_CONF_FILE=/etc/logstash.conf     收集日志的规则conf</div><div class="line">LS_OPEN_FILES=16384</div><div class="line">LS_NICE=19</div><div class="line">LS_OPTS=<span class="string">""</span></div><div class="line"></div><div class="line">https://www.elastic.co/guide/en/logstash/current/plugins-inputs-file.html</div><div class="line">这个是<span class="built_in">log</span> stash的官方文档的配置说明。</div><div class="line">这个配置说明上面我先修改下我之前的配置文件。</div></pre></td></tr></table></figure>
<h4 id="logstash测试："><a href="#logstash测试：" class="headerlink" title="logstash测试："></a>logstash测试：</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">将<span class="selector-tag">logstash</span><span class="selector-class">.ooxx</span><span class="selector-class">.com</span>换成你自己的域名。同时，到域名解析那添加<span class="selector-tag">elk</span><span class="selector-class">.ooxx</span><span class="selector-class">.com</span>的<span class="selector-tag">A</span>记录。</div><div class="line">使用那种方式都行，不过如果<span class="selector-tag">logstash</span>服务端的<span class="selector-tag">IP</span>地址变换了，证书不可用了。</div><div class="line"></div><div class="line">这里查看日志有主机名返回不然就跟下面一样 <span class="selector-tag">host</span>：0<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span></div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">＃/usr/<span class="built_in">local</span>/logstash/bin/logstash <span class="_">-e</span> <span class="string">'input &#123; stdin&#123; &#125; &#125; output &#123; stdout&#123;codec =&gt; rubydebug&#125; &#125;'</span></div></pre></td></tr></table></figure>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/elk_logstash.png" alt=""></p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">配置log stash－实现系统日志收集input</div><div class="line"></div><div class="line">vim <span class="meta-keyword">/etc/</span>logstash.conf  这里我们之间先创建一个.conf  我们写在／etc/ 编写好以后让logstash去调用。</div><div class="line"> <span class="class">input </span>&#123;</div><div class="line"> <span class="class">stdin </span>&#123; &#125;</div><div class="line"> &#125;</div><div class="line"></div><div class="line"> <span class="class">output </span>&#123;</div><div class="line"></div><div class="line"> <span class="class">elasticsearch </span>&#123;</div><div class="line"> host =&gt; <span class="string">"192.168.1.234"</span></div><div class="line"> protocol =&gt; <span class="string">"http"</span></div><div class="line"> &#125;</div><div class="line"></div><div class="line"> <span class="class">stdout </span>&#123;</div><div class="line"> codec =&gt; rubydebug</div><div class="line"> &#125;</div><div class="line"> &#125;</div><div class="line"></div><div class="line">然后在用logstash去调用</div><div class="line"><span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/logstash/</span>bin/logstash -f <span class="meta-keyword">/etc/</span>logstash.conf</div></pre></td></tr></table></figure>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/elk_logstash_01.png" alt=""><br>vim /etc/logstash.conf   </p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/elk_logstash_03.png" alt=""></p>
<p>官方文档file的配置文件和类型。<br>官方文档下面还有个这个从头读到尾这样规定，这个非常好，这里我在做修改。</p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/elk_logstash5.png" alt=""></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">然后在启动<span class="built_in">log</span> stash脚本.</div><div class="line"></div><div class="line"><span class="comment"># /etc/init.d/logstash start</span></div><div class="line"><span class="comment">## ps -ef | grep logstash</span></div><div class="line"></div><div class="line">启动完了以后在查看下／var/<span class="built_in">log</span>/messages </div><div class="line">然后在登陆到 http://192.168.1.234:9200/_plugin/head/</div></pre></td></tr></table></figure>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/elk.logstash06.png" alt=""></p>
<h4 id="扩展阅读"><a href="#扩展阅读" class="headerlink" title="扩展阅读"></a>扩展阅读</h4><p><a href="http://www.chenshake.com/centos-install-7-x-elk-elasticsearchlogstashkibana/" target="_blank" rel="external">CentOS 7.x安装ELK(Elasticsearch+Logstash+Kibana)</a></p>
<p><a href="http://blog.chinaunix.net/xmlrpc.php?r=blog/article&amp;uid=17291169&amp;id=4898582" target="_blank" rel="external">Centos 6.5 安装nginx日志分析系统 elasticsearch + logstash + redis + kibana</a></p>
<p><a href="https://www.ulyaoth.net/threads/logstash-forwarder-and-grok-examples.32413/" target="_blank" rel="external">logstash-forwarder and grok examples</a></p>

      
    </div>
    

    

    

    <footer class="article-footer print-invisible">
      
      
    <a class="article-category-link" href="/categories/日志分析平台/">日志分析平台</a>

 
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Log-analysis-platform/">Log analysis platform</a></li></ul>


    </footer>
  </div>
  
</article>
<div class="print-invisible">
  

</div>


    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
      </nav>
    </section>
      
        <aside id="sidebar" class="print-invisible">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">recents</h3>
    <div class="widget">
      <ul id="recent-post" class="">
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2017/08/11/日志分析平台/Elasticsearch/ElasticStack 5.x+Kibana-5.5.x+Logstash版本部署概述/" class="thumbnail">
  
    <span style="background-image:url(//i.imgur.com/w2aNvOlm.jpg)" alt="ElasticStack 5.x+Kibana-5.5.x+Logstash版本部署概述" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              
              <p class="item-title"><a href="/2017/08/11/日志分析平台/Elasticsearch/ElasticStack 5.x+Kibana-5.5.x+Logstash版本部署概述/" class="title">ElasticStack 5.x+Kibana-5.5.x+Logstash版本部署概述</a></p>
              <p class="item-category"><a class="article-category-link" href="/categories/日志分析平台/">日志分析平台</a></p>
              <p class="item-date"><time datetime="2017-08-11T09:56:03.000Z" itemprop="datePublished">2017-08-11</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2017/07/30/日志分析平台/Elasticsearch/研究学习 Elasticsearch 5.0.0 功能提升哪些,ES如何弹性迁移日志数据，安装需要什么环境？/" class="thumbnail">
  
    <span style="background-image:url(//i.imgur.com/w2aNvOlm.jpg)" alt="研究学习 Elasticsearch 5.0.0 功能提升哪些,ES如何弹性迁移日志数据，安装需要什么环境？" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              
              <p class="item-title"><a href="/2017/07/30/日志分析平台/Elasticsearch/研究学习 Elasticsearch 5.0.0 功能提升哪些,ES如何弹性迁移日志数据，安装需要什么环境？/" class="title">研究学习 Elasticsearch 5.0.0 功能提升哪些,ES如何弹性迁移日志数据，安装需要什么环境？</a></p>
              <p class="item-category"><a class="article-category-link" href="/categories/日志分析平台/">日志分析平台</a></p>
              <p class="item-date"><time datetime="2017-07-30T09:56:03.000Z" itemprop="datePublished">2017-07-30</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2017/07/04/Bigdata-hadoop/Kafka/kafka性能优化–JVM参数配置优化/" class="thumbnail">
  
    <span style="background-image:url(//i.imgur.com/w2aNvOlm.jpg)" alt="Kafka性能优化–JVM参数配置优化" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              
              <p class="item-title"><a href="/2017/07/04/Bigdata-hadoop/Kafka/kafka性能优化–JVM参数配置优化/" class="title">Kafka性能优化–JVM参数配置优化</a></p>
              <p class="item-category"><a class="article-category-link" href="/categories/Big-data-Hadoop/">Big data Hadoop</a></p>
              <p class="item-date"><time datetime="2017-07-04T03:22:00.000Z" itemprop="datePublished">2017-07-04</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2017/06/30/Bigdata-hadoop/Kafka/Kafka日志存储解析与实践数据存储优化/" class="thumbnail">
  
    <span style="background-image:url(//i.imgur.com/w2aNvOlm.jpg)" alt="Kafka日志存储解析与实践数据存储优化" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              
              <p class="item-title"><a href="/2017/06/30/Bigdata-hadoop/Kafka/Kafka日志存储解析与实践数据存储优化/" class="title">Kafka日志存储解析与实践数据存储优化</a></p>
              <p class="item-category"><a class="article-category-link" href="/categories/Big-data-Hadoop/">Big data Hadoop</a></p>
              <p class="item-date"><time datetime="2017-06-30T06:46:00.000Z" itemprop="datePublished">2017-06-30</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2017/06/29/Bigdata-hadoop/Kafka/如何手动更新Kafka中某个Topic的偏移量/" class="thumbnail">
  
    <span style="background-image:url(//i.imgur.com/w2aNvOlm.jpg)" alt="Bigdata-如何手动更新Kafka中某个Topic的偏移量" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              
              <p class="item-title"><a href="/2017/06/29/Bigdata-hadoop/Kafka/如何手动更新Kafka中某个Topic的偏移量/" class="title">Bigdata-如何手动更新Kafka中某个Topic的偏移量</a></p>
              <p class="item-category"><a class="article-category-link" href="/categories/大数据/">大数据</a></p>
              <p class="item-date"><time datetime="2017-06-29T06:46:00.000Z" itemprop="datePublished">2017-06-29</time></p>
            </div>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap widget-list">
    <h3 class="widget-title">links</h3>
    <div class="widget">
      <ul>
        
      </ul>
    </div>
  </div>


  
</aside>

      
    </div>
    <footer id="footer" class="print-invisible">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Yancy<br />
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="https://github.com/ppoffice/hexo-theme-icarus">icarus</a>.<br />
      Deploy with docker image <a href="https://microbadger.com/#/images/jamespan/blog">jamespan/blog</a>.
    </div>
  </div>
</footer>
    

<script async="async" src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


  
  <script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script>
  <link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css">

<script type="text/javascript">
(function($) {
  // Caption
  $('.article-entry').each(function(i) {
    $(this).find('img').each(function() {
      if ($(this).parent().hasClass('fancybox')) return;
      if ($(this).hasClass('nofancy')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + ($(this).attr('data-src') == null ? this.src : $(this).attr('data-src')) + '" title="' + alt + '" class="fancybox"></a>');
    });
  });
  if ($.fancybox) {
    $('.fancybox').fancybox({
      helpers: {
        overlay: {
          locked: false
        }
      }
    });
  }

  // Profile card
  $(document).on('click', function () {
    $('#profile').removeClass('card');
  }).on('click', '#profile-anchor', function (e) {
    e.stopPropagation();
    $('#profile').toggleClass('card');
  }).on('click', '.profile-inner', function (e) {
    e.stopPropagation();
  });

  // Toc optimize
  if ($('#toc').children().length == 0) {
    $('#toc').remove();
  }
})(jQuery);
</script>


  </div>
</body>
</html>
