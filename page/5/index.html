<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		
	<span class="different-posts different-posts_earlier">ğŸ“– <a href="/page/4">earlier posts</a> ğŸ“–</span>




	<article>
	
		<h1><a href="/2016/11/24/Node.js-npm/Node.js-Gruntå·¥å…·æ­å»ºåå°ç®¡ç†å®è·µ/">Node.js+Gruntå·¥å…·æ­å»ºåå°ç®¡ç†å®è·µ</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-11-24</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Grunt/">Grunt</a> <a class="article__tag-link" href="/tags/Node-js/">Node.js</a>
			</span>
		
	</div>

	

	
		<p>æœ€è¿‘å¼„ç°åº¦å‘å¸ƒç³»ç»Ÿï¼Œç”±äºæœ€è¿‘ä½“æ£€é¡¹ç›®éœ€è¦å¯¹cssæ–‡ä»¶å’Œjsæ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼Œå„ç§æ¯”è¾ƒä¹‹åï¼Œé€‰æ‹©äº†gruntè¿›è¡Œæ„å»ºã€‚googleä¸€ä¸‹ï¼Œå‡ ä¹éƒ½æ˜¯gruntæœ€æ–°ç‰ˆçš„ä½¿ç”¨è¯´æ˜<code>æŸ¥çœ‹gruntjsçš„å…¥é—¨ Getting started</code>ï¼Œåˆæ˜¯äº‘é‡Œé›¾é‡Œçš„ï¼Œå¥½å§ï¼Œåªèƒ½è€å¿ƒçœ‹æ–‡æ¡£å’Œä¸æ–­çš„å®è·µå§ã€‚</p>
		<p><a class="article__read-more-link" href="/2016/11/24/Node.js-npm/Node.js-Gruntå·¥å…·æ­å»ºåå°ç®¡ç†å®è·µ/">...read more</a></p>
	

	

</article>




	<article>
	
		<h1><a href="/2016/11/14/æ—¥å¿—åˆ†æå¹³å°/Graylog/graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ/">graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-11-14</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Log-Analysis-Platform/">Log Analysis Platform</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Graylog/">Graylog</a>
			</span>
		
	</div>

	

	
		<h1 id="graylog-å‡çº§2-1-é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ"><a href="#graylog-å‡çº§2-1-é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ" class="headerlink" title="graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ"></a>graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ</h1><p>å‚è€ƒå®˜ç½‘ï¼š<a href="http://docs.graylog.org/en/2.1/pages/upgrade/graylog-2.1.html" target="_blank" rel="external">å‡çº§åˆ°Graylogçš„2.1.x</a></p>
<h3 id="ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ"><a href="#ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ" class="headerlink" title="ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ"></a>ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ</h3><p>åœ¨å…¬å¸æœåŠ¡æœºå­éƒ¨ç½²è¶Šæ¥è¶Šå¤šçš„æƒ…å†µä¸‹ï¼Œè®©æˆ‘ä»¬æ¥æƒ³æƒ³ä¼šé‡åˆ°çš„é—®é¢˜ï¼š</p>
<ul>
<li>å¼€å‘äººå‘˜ä¸èƒ½ç™»å½•çº¿ä¸ŠæœåŠ¡å™¨æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼Œç»è¿‡è¿ç»´å‘¨è½¬è´¹æ—¶è´¹åŠ›</li>
<li>æ—¥å¿—æ•°æ®åˆ†æ•£åœ¨å¤šä¸ªç³»ç»Ÿï¼Œéš¾ä»¥æŸ¥æ‰¾</li>
<li>æ—¥å¿—æ•°æ®é‡å¤§ï¼ŒæŸ¥è¯¢é€Ÿåº¦æ…¢</li>
<li>ä¸€ä¸ªè°ƒç”¨ä¼šæ¶‰åŠå¤šä¸ªç³»ç»Ÿï¼Œéš¾ä»¥åœ¨è¿™äº›ç³»ç»Ÿçš„æ—¥å¿—ä¸­å¿«é€Ÿå®šä½æ•°æ®</li>
<li>æ•°æ®ä¸å¤Ÿå®æ—¶</li>
<li>å¾ˆéš¾å¯¹æ•°æ®è¿›è¡ŒæŒ–æ˜ï¼Œåˆ†æï¼Œä¸šåŠ¡å‘Šè­¦ï¼Œå®¡è®¡</li>
<li>è¿™äº›é—®é¢˜çš„å­˜åœ¨è®©å¼€å‘ä»¥åŠè¿ç»´äººå‘˜å¾ˆæ˜¯å¤´ç—›ï¼Œä¸¥é‡å½±å“æ•ˆç‡ï¼</li>
</ul>
<h3 id="äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ"><a href="#äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ" class="headerlink" title="äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ"></a>äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ</h3><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ—¥å¿—çš„é›†ä¸­ç®¡ç†æ–¹æ¡ˆï¼ŒgraylogæŠ€æœ¯æ ˆï¼š</p>
<ul>
<li>java ï¼ˆjdk1.8.0_66/ï¼‰ç¯å¢ƒ</li>
<li>Collector-sidecarï¼ˆæ”¶é›†æ—¥å¿—ï¼‰æˆ–è€…syslog</li>
<li>Mongodbï¼ˆå­˜å‚¨æ—¥å¿—æºæ–‡ä»¶ï¼‰</li>
<li>Elasticsearchï¼ˆæä¾›æœç´¢æ—¥å¿—ï¼‰</li>
<li>Graylog2.1.1ï¼ˆæœç´¢å’Œè§†å›¾å±•ç¤ºæ—¥å¿—ï¼Œå‘Šè­¦å’Œæƒé™ï¼‰</li>
</ul>
<p>æœ‰äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±èƒ½æŠŠæ—¥å¿—å…ˆæ”¶é›†èµ·æ¥ï¼Œè¿›è¡Œæˆ‘ä»¬æƒ³è¦çš„åˆ†æä¹‹åï¼Œwebçš„å½¢å¼å±•ç¤ºå‡ºæ¥ï¼Œæä¾›æŸ¥è¯¢ï¼</p>
<h3 id="ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²"><a href="#ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²" class="headerlink" title="ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²"></a>ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²</h3><p>å®‰è£…ç¯å¢ƒï¼šlinux centOSç³»ç»Ÿå®‰è£…ï¼Œå·²å®‰è£…JDK1.8ç‰ˆæœ¬ï¼Œå®‰è£…å¯åŠ¨é¡ºåº</p>
<p>1.å®‰è£…éƒ¨ç½²mongodb<br>2.å®‰è£…éƒ¨ç½²elasticsearch<br>3.å®‰è£…éƒ¨ç½²graylog<br>4.å®‰è£…éƒ¨ç½²Graylog Collector Sidecar</p>
<hr>
<p> <strong>1ï¼šå®‰è£…éƒ¨ç½²mongodb</strong> <strong>Javaä¹Ÿå®‰è£…</strong>  å‚è€ƒæˆ‘åšæ–‡æœ‰ä»‹ç»ã€‚ </p>
<p> <strong>2ï¼šå®‰è£…éƒ¨ç½²elasticsearch</strong></p>
<p><strong>(1)ä¸‹è½½jaråŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">wget https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz</div><div class="line"></div><div class="line">å¦‚æœæŠ¥é”™</div><div class="line">æ‰§è¡Œ</div><div class="line"></div><div class="line">wget --no-check-certificate</div><div class="line"></div><div class="line">https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz</div></pre></td></tr></table></figure>
<p><strong>(2)è§£å‹jaråŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf elasticsearch-2.3.5.tar.gz -C /opt/</div></pre></td></tr></table></figure>
<p><strong>(3)ä¿®æ”¹elasticsearch.ymlé…ç½®æ–‡ä»¶</strong></p>
<p> è¿™é‡Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼šé…ç½®å‰å…ˆåˆ›å»ºå‡ ä¸ªç›®å½•æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir /home/data/es-data -p</div><div class="line">mkdir /home/data/es-work -p</div></pre></td></tr></table></figure>
<p>elasticsearch-2.3.5å®‰è£…ç›®å½•confä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">vim elasticsearch-2.3.5/config/elasticsearch.yml</div><div class="line"> </div><div class="line">cluster.name: graylog              <span class="comment">#é›†ç¾¤åç§°å»ºè®®å‘½ågraylogï¼Œä¾¿äºè¯†åˆ«åŒºåˆ†</span></div><div class="line">node.name: elasticsearch-node-1     <span class="comment"># elasticsearché›†ç¾¤èŠ‚ç‚¹åç§°</span></div><div class="line">network.host: 192.168.1.234    <span class="comment"># ç»‘å®šèŠ‚ç‚¹IP</span></div><div class="line">http.port: 9200         <span class="comment"># å¤–éƒ¨è®¿é—®ç«¯å£ï¼Œé»˜è®¤ï¼Œä¹Ÿå¯ä»¥å®‰å…¨è€ƒè™‘ä¿®æ”¹</span></div><div class="line">path.logs: /home/data/logs</div><div class="line">path.data: /home/data/es-data</div><div class="line">discovery.zen.ping.multicast.enabled: <span class="literal">false</span>   <span class="comment">#å¤šæ’­å‘ç°æ–¹å¼å…³é—­ï¼Œå› ä¸ºgraylogé‡‡ç”¨å•æ’­æ–¹å¼å‘ç°elasticsearché›†ç¾¤æ–¹å¼</span></div><div class="line">discovery.zen.ping.unicast.hosts                   <span class="comment">#å¤šä¸ªèŠ‚ç‚¹ç”¨é€—å·éš”å¼€</span></div><div class="line">discovery.zen.minimum_master_nodes: 3    <span class="comment"># elasticsearché›†ç¾¤èŠ‚ç‚¹ï¼Œæœ€å°‘é€‰ä¸¾æ•°ï¼Œè¿™ä¸ªæ•°ä¸€å®šè¦è®¾ç½®ä¸ºæ•´ä¸ªé›†ç¾¤èŠ‚ç‚¹ä¸ªæ•°çš„ä¸€åŠåŠ 1ï¼Œå³N/2+1ï¼Œå¿…é¡»ä¸ºå¥‡æ•°</span></div></pre></td></tr></table></figure>
<p><strong>(4)å¯åŠ¨elasticsearchæœåŠ¡</strong></p>
<p>æ–°å»ºä¸€ä¸ªelasticsearchç”¨æˆ·ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒelasticsearchæœåŠ¡ä¸èƒ½ä½¿ç”¨rootç”¨æˆ·å¯åŠ¨</p>
<p>åˆ›å»ºelasticsearchç”¨æˆ·ç»„åŠelasticsearchç”¨æˆ·ï¼Œæ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">groupadd elasticsearch</div><div class="line">useradd elasticsearch -g elasticsearch -p elasticsearch</div></pre></td></tr></table></figure>
<p>å…¶ä¸­-gä½¿ç”¨æˆ·å±äºæŸä¸ªç»„ï¼Œ-pä¸ºæ–°ç”¨æˆ·ä½¿ç”¨åŠ å¯†å¯†ç ï¼‰<br>æ›´æ”¹elasticsearch-2.3.5æ–‡ä»¶å¤¹åŠå†…éƒ¨æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·åŠç»„ä¸ºelasticsearch:elasticsearch</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chown -R elasticsearch:elasticsearch  /home/data/</div><div class="line">chown -R elasticsearch:elasticsearch  elasticsearch-2.3.5</div></pre></td></tr></table></figure>
<p>åˆ‡æ¢ç”¨æˆ·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">su elasticsearch</div></pre></td></tr></table></figure>
<p>åœ¨elasticsearch-2.3.5/binç›®å½•ä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[elasticsearch@graylog bin]$ ps -ef | grep elasticsearch</div><div class="line">root     18265 16004  0 14:27 pts/1    00:00:00 su elasticsearch</div><div class="line">502      18405     1 62 14:27 pts/1    00:00:13 /srv/jdk1.8.0_66/bin/java -Xms256m -Xmx1g -Djava.awt.headless=<span class="literal">true</span> -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+HeapDumpOnOutOfMemoryError -XX:+DisableExplicitGC -Dfile.encoding=UTF-8 -Djna.nosys=<span class="literal">true</span> -Des.path.home=/opt/elasticsearch-2.3.5 -cp /opt/elasticsearch-2.3.5/lib/elasticsearch-2.3.5.jar:/opt/elasticsearch-2.3.5/lib/* org.elasticsearch.bootstrap.Elasticsearch start <span class="_">-d</span></div><div class="line">502      18530 18266  0 14:27 pts/1    00:00:00 grep --color=auto ela</div></pre></td></tr></table></figure>
<p><strong>(5)æ£€æŸ¥elasticsearchæœåŠ¡çŠ¶æ€</strong></p>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æµ‹è¯•Elasticsearchæ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</p>
<p>$ curl -XGET â€˜<a href="http://localhost:9200/_cluster/health?pretty=true" target="_blank" rel="external">http://localhost:9200/_cluster/health?pretty=true</a>â€˜</p>
<p>è¾“å‡ºçš„ä¿¡æ¯å¦‚ä¸‹è¡¨ç¤ºElasticsearchå®‰è£…æˆåŠŸï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[elasticsearch@graylog bin]$ curl -XGET <span class="string">'http://192.168.1.234:9200/_cluster/health?pretty=true'</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"cluster_name"</span> : <span class="string">"graylog"</span>,</div><div class="line">  <span class="string">"status"</span> : <span class="string">"yellow"</span>,</div><div class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</div><div class="line">  <span class="string">"number_of_nodes"</span> : 1,</div><div class="line">  <span class="string">"number_of_data_nodes"</span> : 1,</div><div class="line">  <span class="string">"active_primary_shards"</span> : 30,</div><div class="line">  <span class="string">"active_shards"</span> : 30,</div><div class="line">  <span class="string">"relocating_shards"</span> : 0,</div><div class="line">  <span class="string">"initializing_shards"</span> : 0,</div><div class="line">  <span class="string">"unassigned_shards"</span> : 30,</div><div class="line">  <span class="string">"delayed_unassigned_shards"</span> : 0,</div><div class="line">  <span class="string">"number_of_pending_tasks"</span> : 0,</div><div class="line">  <span class="string">"number_of_in_flight_fetch"</span> : 0,</div><div class="line">  <span class="string">"task_max_waiting_in_queue_millis"</span> : 0,</div><div class="line">  <span class="string">"active_shards_percent_as_number"</span> : 50.0</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3ï¼šå®‰è£…éƒ¨ç½²graylog-2-1ç‰ˆæœ¬"><a href="#3ï¼šå®‰è£…éƒ¨ç½²graylog-2-1ç‰ˆæœ¬" class="headerlink" title="3ï¼šå®‰è£…éƒ¨ç½²graylog-2.1ç‰ˆæœ¬"></a>3ï¼šå®‰è£…éƒ¨ç½²graylog-2.1ç‰ˆæœ¬</h3><p><strong>(1)ä¸‹è½½å®‰è£…åŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://packages.graylog2.org/releases/graylog/graylog-2.1.1.tgz</div></pre></td></tr></table></figure>
<p><strong>(2)è§£å‹å®‰è£…åŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf graylog-2.1.1.tgz -C /opt/.</div></pre></td></tr></table></figure>
<p><strong>(3)ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p>
<p>ä¿®æ”¹å®‰è£…ç›®å½•ä¸‹ graylog.conf.example æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim graylog.conf.example</div></pre></td></tr></table></figure>
<p>web_listen_uri å€¼æ˜¯graylogå¯åŠ¨æˆåŠŸåï¼ŒwebæœåŠ¡è®¿é—®åœ°å€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">web_listen_uri = http://192.168.1.234:9000/</div></pre></td></tr></table></figure>
<p>rest_listen_uri çš„å€¼ï¼Œæ˜¯graylogå¯åŠ¨æˆåŠŸåï¼Œapiè®¿é—®åœ°å€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rest_listen_uri = http://192.168.1.234:9000/api/</div></pre></td></tr></table></figure>
<p>root_timezone = UTC  #è®¾ç½®æ—¶åŒºï¼Œå¦åˆ™é»˜è®¤ä½¿ç”¨çš„æ˜¯UTCæ—¶é—´ä¹Ÿå°±æ˜¯ä¸–ç•Œæ—¶é—´ è¿™é‡Œæ˜¯å¿…é¡»æ”¹ä¸‹çš„ï¼Œå› ä¸ºåæœŸæ”¶é›†æ—¥å¿—æ˜¾ç¤ºæ—¶é—´æ˜¯æœ‰å˜åŒ–çš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">root_timezone = Asia/Shanghai</div></pre></td></tr></table></figure>
<p>å…¶ä¸­ password_secret çš„å€¼ç”¨å‘½ä»¤ç”Ÿæˆ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">yum install -y pwgen</div><div class="line">pwgen -N 1 <span class="_">-s</span> 96       H1R5v17kWtyDxj2PzxLMxu41D6HDt9JzhfZcj6QlCURVddgkLAdnUmpkdIscmmu4ELKsTrHwKvPmxFKSYyTn0YlqebbpQqyr</div><div class="line"></div><div class="line">    password_secret = H1R5v17kWtyDxj2PzxLMxu41D6HDt9JzhfZcj6QlCURVddgkLAdnUmpkdIscmmu4ELKsTrHwKvPmxFKSYyTn0YlqebbpQqyr</div></pre></td></tr></table></figure>
<p>å…¶ä¸­root_password_sha2 çš„å€¼ä½¿ç”¨å‘½ä»¤ç”Ÿæˆ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">echo</span> -n Ihaozhuo_b313 | sha256sum  (è¿™é‡Œå¯¹å¯†ç 123456å“ˆå¸ŒåŠ å¯†)</div><div class="line"></div><div class="line"><span class="built_in">fc</span>88c28d48b0cb97f3fb5286cc35c520409ef037acd30ec687f0c0bd3d5a5115 </div><div class="line">   </div><div class="line">root_password_sha2 = <span class="built_in">fc</span>88c28d48b0cb97f3fb5286cc35c520409ef037acd30ec687f0c0bd3d5a5115</div></pre></td></tr></table></figure>
<p>elasticsearch_cluster_name å€¼å¿…é¡»æ˜¯elasticsearché…ç½®æ–‡ä»¶ä¸­çš„cluster_name</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">elasticsearch_cluster_name = graylog</div></pre></td></tr></table></figure>
<p>elasticsearch_discovery_zen_ping_unicast_hosts å¡«å†™elasticsearchåœ°å€ï¼Œå¦‚æœæ˜¯å¤šä¸ªï¼Œç”¨é€—å·éš”å¼€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">elasticsearch_discovery_zen_ping_unicast_hosts = 192.168.1.234:9300</div></pre></td></tr></table></figure>
<p>elasticsearch_discovery_zen_ping_multicast_enabled = false å¤šæ’­æ¨¡å¼å…³é—­</p>
<p>ç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªElasticsearch shardï¼Œéœ€è¦æŠŠelasticsearch_shardså‚æ•°è®¾ç½®ä¸º1ï¼š<br>elasticsearché›†ç¾¤åˆ†ç‰‡æ•°é‡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">elasticsearch_shards = 1</div></pre></td></tr></table></figure>
<p>elasticsearchç»‘å®šçš„èŠ‚ç‚¹IP</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">299 elasticsearch_network_host = 192.168.1.234</div><div class="line">300 elasticsearch_network_bind_host = 192.168.1.234</div><div class="line">301 elasticsearch_network_publish_host = 192.168.1.234</div></pre></td></tr></table></figure>
<p>mongodbå®‰è£…æœåŠ¡çš„ipåœ°å€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongodb_uri = mongodb://192.168.1.234/graylog</div></pre></td></tr></table></figure>
<p>è¿™é‡Œmongodbæ˜¯å®‰è£…åœ¨æˆ‘åŒä¸€å°æœåŠ¡å™¨ä¸Šé¢çš„ã€‚å¦‚æœè¦æŠŠmongodbå•ç‹¬æœåŠ¡å™¨è·‘è¿æ¥æ–¹å¼é…ç½®æ–‡ä»¶é‡Œé¢ä¹Ÿæœ‰ä¾‹å­è¯´æ˜ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongodb_uri =mongodb://graylog:123456@160.17.2.251:27017/graylog2             <span class="comment">#è¿æ¥åˆ°mongodbçš„æœåŠ¡å™¨åœ°å€ä¸º160.17.2.251:27017ï¼Œè´¦å·ä¸ºgraylogï¼Œå¯†ç ä¸º123456 æ•°æ®åº“ä¸ºgraylog2</span></div></pre></td></tr></table></figure>
<p> è®¾ç½®å‘Šè­¦é‚®ä»¶å‘é€è€…ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> <span class="comment"># Email transport</span></div><div class="line">transport_email_enabled = <span class="literal">false</span></div><div class="line">transport_email_hostname = smtp.exmail.qq.com</div><div class="line">transport_email_port = 465</div><div class="line">transport_email_use_auth = <span class="literal">true</span></div><div class="line">transport_email_use_tls = <span class="literal">true</span></div><div class="line">transport_email_use_ssl = <span class="literal">true</span></div><div class="line">transport_email_auth_username = chengyangyang@qq.cn</div><div class="line">transport_email_auth_password = beneTqq</div><div class="line">transport_email_subject_prefix = [graylog]</div><div class="line">transport_email_from_email = chengyangyang@qq.cn</div></pre></td></tr></table></figure>
<p><strong>(4)å¤åˆ¶é…ç½®æ–‡ä»¶</strong></p>
<p> å› ä¸ºgraylogå®‰è£…binç›®å½•ä¸‹ï¼Œé»˜è®¤å¯åŠ¨é…ç½®æ–‡ä»¶</p>
<p>é…ç½®æ–‡ä»¶è·¯å¾„ï¼š<code>/etc/graylog/server/server.conf</code></p>
<p>æ‰€ä»¥éœ€è¦å°†<code>graylog.conf.example</code> å¤åˆ¶åˆ°<code>/etc/graylog/server/</code>ç›®å½•ä¸‹ï¼Œå¹¶ä¸”æ”¹å <code>server.conf</code></p>
<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir -p /etc/graylog/server/ </div><div class="line">cp graylog.conf.example /etc/graylog/server/server.conf</div></pre></td></tr></table></figure>
<p><strong>(5)å¯åŠ¨graylog</strong></p>
<p>åœ¨graylogå®‰è£…binç›®å½•ä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./graylogctl start</div></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ—¥å¿—ï¼Œåœ¨graylogå®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tail -200f /<span class="built_in">log</span>/graylog-server.log</div></pre></td></tr></table></figure>
<p>å¦‚æœæŠ¥é”™ï¼š</p>
<p>åŸå› ï¼š</p>
<p>åœ¨mongodbç‰ˆæœ¬2.6ä¹‹åï¼Œæ˜¯éœ€è¦æ—¥å¿—journalingè®¾ç½®çš„ï¼Œè€Œé»˜è®¤æƒ…å†µä¸‹æ˜¯å…³é—­çš„</p>
<p>è§£å†³åŠæ³•ï¼š</p>
<p>åœ¨mongodbå¯åŠ¨å‘½ä»¤åŠ ä¸Š â€“journal</p>
<p>æœ€åå¯åŠ¨å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./mongod --dbpath=/usr/<span class="built_in">local</span>/mongodb/data/ --fork --logpath=/usr/<span class="built_in">local</span>/mongodb/logs --storageEngine=mmapv1 --journal</div></pre></td></tr></table></figure>
<p>é‡å¯mongodbåï¼Œé‡å¯graylogæœåŠ¡å³å¯ï¼</p>
<p><strong>(6)å¯åŠ¨graylog(æŠ¥é”™äºŒ)</strong></p>
<p>æŸ¥çœ‹æ—¥å¿—ï¼Œåœ¨graylogå®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">tail -200f /<span class="built_in">log</span>/graylog-server.log</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;com.mongodb.MongoSocketOpenException: Exception opening socket&#125;, caused by &#123;java.net.ConnectException: æ‹’ç»è¿æ¥&#125;&#125;]&#125;. Waiting <span class="keyword">for</span> 30000 ms before timing out</div><div class="line">2016-11-22 15:10:29,355 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Elastic Beats Input 1.1.1 [org.graylog.plugins.beats.BeatsInputPlugin]</div><div class="line">2016-11-22 15:10:29,357 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Collector 1.1.1 [org.graylog.plugins.collector.CollectorPlugin]</div><div class="line">2016-11-22 15:10:29,357 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Enterprise Integration Plugin 1.1.1 [org.graylog.plugins.enterprise_integration.EnterpriseIntegrationPlugin]</div><div class="line">2016-11-22 15:10:29,358 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: MapWidgetPlugin 1.1.1 [org.graylog.plugins.map.MapWidgetPlugin]</div><div class="line">2016-11-22 15:10:29,359 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Pipeline Processor Plugin 1.1.1 [org.graylog.plugins.pipelineprocessor.ProcessorPlugin]</div><div class="line">2016-11-22 15:10:29,359 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Anonymous Usage Statistics 2.1.1 [org.graylog.plugins.usagestatistics.UsageStatsPlugin]</div><div class="line">2016-11-22 15:10:29,487 INFO : org.graylog2.bootstrap.CmdLineTool - Running with JVM arguments: -Djava.library.path=./../lib/sigar -Xms1g -Xmx1g -XX:NewRatio=1 -XX:+ResizeTLAB -XX:+UseConcMarkSweepGC -XX:+CMSConcurrentMTEnabled -XX:+CMSClassUnloadingEnabled -XX:+UseParNewGC -XX:-OmitStackTraceInFastThrow</div></pre></td></tr></table></figure>
<p>æç¤ºmongodb æ‹’ç»è¿æ¥ã€‚ è¿™ä¸ªæ—¶å€™éœ€è¦çœ‹ä¸‹ç«¯å£åœ°å€æ˜¯å¦æ˜¯IPåœ°å€è¿˜æ˜¯127.0.0.1 å¦‚æœä¸æ˜¯éœ€è¦ä¿®æ”¹ä¸‹åœ¨é‡å¯æœåŠ¡å°±å¯ä»¥äº†ã€‚</p>
<p><strong>æŸ¥çœ‹å¯åŠ¨æœåŠ¡ç«¯å£ï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[root@graylog graylog-2.1.1]<span class="comment"># netstat -ntulp</span></div><div class="line">Active Internet connections (only servers)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name</div><div class="line">tcp        0      0 127.0.0.1:27017             0.0.0.0:*                   LISTEN      22308/mongod</div><div class="line">tcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN      1974/sshd</div><div class="line">tcp        0      0 127.0.0.1:25                0.0.0.0:*                   LISTEN      1287/master</div><div class="line">tcp        0      0 ::ffff:192.168.1.234:9350   :::*                        LISTEN      23642/java</div><div class="line">tcp        0      0 ::ffff:192.168.1.234:9000   :::*                        LISTEN      23642/java</div><div class="line">tcp        0      0 ::ffff:192.168.1.234:9200   :::*                        LISTEN      18405/java</div><div class="line">tcp        0      0 ::ffff:192.168.1.234:9300   :::*                        LISTEN      18405/java</div><div class="line">tcp        0      0 :::22                       :::*                        LISTEN      1974/sshd</div><div class="line">tcp        0      0 ::1:25                      :::*                        LISTEN      1287/master</div></pre></td></tr></table></figure>
<p><strong>(6)è®¿é—®graylog</strong></p>
<p>graylogå¯åŠ¨æˆåŠŸåï¼Œæµè§ˆå™¨è®¿é—®ï¼š<strong>graylogå®‰è£…IP:9000</strong></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog10.png" alt=""></figure></p>
<h3 id="å››ï¼šæ€»ç»“"><a href="#å››ï¼šæ€»ç»“" class="headerlink" title="å››ï¼šæ€»ç»“"></a>å››ï¼šæ€»ç»“</h3><p>åˆ°æ­¤ï¼ŒåŸºç¡€çš„é›†ä¸­æ—¥å¿—ç®¡ç†graylogå®‰è£…å®Œæ¯•ï¼ï¼Œåç»­å°†ç»§ç»­ä»‹ç»ï¼š</p>
<p>å®‰è£…éƒ¨ç½²Graylog Collector Sidecar æ”¶é›†åº”ç”¨æ—¥å¿—</p>
<p>é‡‡ç”¨syslogæ”¶é›†æ—¥å¿—æ–¹å¼</p>
<p>graylogä¸€äº›ä½¿ç”¨ï¼ŒåŒ…æ‹¬æ—¥å¿—æˆªå–ï¼Œå‘Šè­¦ç­‰ã€‚</p>
<p>ä¹‹å‰ä¹Ÿå®è·µè¿‡ELKæŠ€æœ¯æ ˆï¼Œåæ¥é€‰å‹graylogï¼Œæ˜¯åŸºäºgraylogå¸¦æœ‰çš„æƒé™ç®¡ç†ï¼Œå’Œå‘Šè­¦åŠŸèƒ½æ¯”è¾ƒå®Œå–„ï¼</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/11/13/æ—¥å¿—åˆ†æå¹³å°/Graylog/Graylogâ€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch/">Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-11-13</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Log-Analysis-Platform/">Log Analysis Platform</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Graylog/">Graylog</a>
			</span>
		
	</div>

	

	
		<p>æ‘˜è¦: æèµ·æ—¥å¿—èšåˆå·¥å…·ï¼Œæœ‰å¼€æºç•Œçš„ELKï¼Œå•†ä¸šç•Œçš„Splunkï¼Œä½†æˆ‘è¦ä»‹ç»å¼€æºçš„åèµ·ä¹‹ç§€Graylogï¼Œå¯ä»¥è¯´æ˜¯é¾™å¤´è€å¤§Splunkçš„å¼€æºç‰ˆã€‚</p>
<h1 id="Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch"><a href="#Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch" class="headerlink" title="Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch"></a>Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch</h1><p>å…ˆçœ‹çœ‹ æ¨èï¼<a href="https://my.oschina.net/HeAlvin/blog/378262" target="_blank" rel="external">å›½å¤–ç¨‹åºå‘˜æ•´ç†çš„ç³»ç»Ÿç®¡ç†å‘˜èµ„æºå¤§å…¨</a> ä¸­ï¼Œå›½å¤–ç¨‹åºå‘˜æ•´ç†çš„æ—¥å¿—èšåˆå·¥å…·çš„åˆ—è¡¨ï¼š</p>
<p><strong>æ—¥å¿—ç®¡ç†å·¥å…·ï¼šæ”¶é›†ï¼Œè§£æï¼Œå¯è§†åŒ–</strong></p>
<ul>
<li>Elasticsearch - ä¸€ä¸ªåŸºäºLuceneçš„æ–‡æ¡£å­˜å‚¨ï¼Œä¸»è¦ç”¨äºæ—¥å¿—ç´¢å¼•ã€å­˜å‚¨å’Œåˆ†æã€‚</li>
<li>Fluentd - æ—¥å¿—æ”¶é›†å’Œå‘å‡º</li>
<li>Flume -åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†å’Œèšåˆç³»ç»Ÿ</li>
<li>Graylog2 -å…·æœ‰æŠ¥è­¦é€‰é¡¹çš„å¯æ’å…¥æ—¥å¿—å’Œäº‹ä»¶åˆ†ææœåŠ¡å™¨</li>
<li>Heka -æµå¤„ç†ç³»ç»Ÿï¼Œå¯ç”¨äºæ—¥å¿—èšåˆ</li>
<li>Kibana - å¯è§†åŒ–æ—¥å¿—å’Œæ—¶é—´æˆ³æ•°æ®</li>
<li>Logstash -ç®¡ç†äº‹ä»¶å’Œæ—¥å¿—çš„å·¥å…·</li>
<li>Octopussy -æ—¥å¿—ç®¡ç†è§£å†³æ–¹æ¡ˆï¼ˆå¯è§†åŒ–/æŠ¥è­¦/æŠ¥å‘Šï¼‰</li>
</ul>
<p>Graylogä¸ELKæ–¹æ¡ˆçš„å¯¹æ¯”</p>
<ul>
<li>ELKï¼š Logstash -&gt; Elasticsearch -&gt; Kibana ï¼ˆä½¿ç”¨äº†ä¸€äº›æ’ä»¶head ï¼Œmarvelï¼‰</li>
<li>Graylogï¼š Graylog Collector -&gt; Graylog Server(å°è£…Elasticsearch) -&gt; Graylog Web</li>
</ul>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/Graylog.png" alt=""></figure></p>
<p>åšä¸ºè¿ç»´ï¼Œå…¬å¸å†…éƒ¨ä½¿ç”¨elkå¤„ç†æ—¥å¿—å‘ç°å¾ˆå¤šé—®é¢˜ã€‚</p>
<p>é¡ºä¾¿æˆªå›¾äº†å‡ å¼ ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog-elk.png" alt=""></figure><br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog-elk1.png" alt=""></figure></p>
<p>ä¹‹å‰è¯•è¿‡Logstash + Elasticsearch + Kibanaçš„æ–¹æ¡ˆï¼Œå‘ç°æœ‰å‡ ä¸ªç¼ºç‚¹ï¼š</p>
<ol>
<li>ä¸èƒ½å¤„ç†å¤šè¡Œæ—¥å¿—ï¼Œæ¯”å¦‚Mysqlæ…¢æŸ¥è¯¢ï¼ŒTomcat/Jettyåº”ç”¨çš„Javaå¼‚å¸¸æ‰“å°</li>
<li>ä¸èƒ½ä¿ç•™åŸå§‹æ—¥å¿—ï¼Œåªèƒ½æŠŠåŸå§‹æ—¥å¿—åˆ†å­—æ®µä¿å­˜ï¼Œè¿™æ ·æœç´¢æ—¥å¿—ç»“æœæ˜¯ä¸€å †Jsonæ ¼å¼æ–‡æœ¬ï¼Œæ— æ³•é˜…è¯»ã€‚</li>
<li>ä¸å¤åˆæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ—¥å¿—è¡Œï¼Œè¢«å…¨éƒ¨ä¸¢å¼ƒã€‚</li>
<li>kibanaç»“åˆä½¿ç”¨ç»å¸¸ä¼šå‡ºç°å¡æ­»ã€‚èµ„æºæ¶ˆè€—éå¸¸å¤§ã€‚</li>
</ol>
<p>æœ¬ç€è§£å†³ä»¥ä¸Š3ä¸ªç¼ºç‚¹çš„åŸåˆ™ï¼Œå†æ¬¡å¯»æ‰¾æ›¿ä»£æ–¹æ¡ˆã€‚ é¦–å…ˆæ‰¾åˆ°äº†å•†ä¸šæ—¥å¿—å·¥å…·Splunkï¼Œå·ç§°æ—¥å¿—ç•Œçš„Googleï¼Œæ„æ€æ˜¯å…¨æ–‡æœç´¢æ—¥å¿—çš„èƒ½åŠ›ï¼Œä¸å…‰èƒ½è§£å†³ä»¥ä¸Š3ä¸ªç¼ºç‚¹ï¼Œè¿˜æä¾›æœç´¢å•è¯é«˜äº®æ˜¾ç¤ºï¼Œä¸åŒé”™è¯¯çº§åˆ«æ—¥å¿—æ ‡è‰²ç­‰å¸å¼•äººçš„ç‰¹æ€§ï¼Œä½†æ˜¯å…è´¹ç‰ˆæœ‰500Mé™åˆ¶ï¼Œä»˜è´¹ç‰ˆæ®è¯´è¦3ä¸‡ç¾åˆ€ï¼Œåªèƒ½æ”¾å¼ƒï¼Œç»§ç»­å¯»æ‰¾ã€‚ æœ€åæ‰¾åˆ°äº†Graylogï¼Œç¬¬ä¸€çœ¼çœ‹åˆ°Graylogï¼Œåªæ˜¯ç³»ç»Ÿæ—¥å¿—syslogçš„é‡‡é›†å·¥å…·ï¼Œä¸€ç‚¹ä¹Ÿæ²¡å¸å¼•åˆ°æˆ‘ã€‚ä½†åæ¥æ·±å…¥äº†è§£åï¼Œæ‰å‘ç°Graylogç®€ç›´å°±æ˜¯å¼€æºç‰ˆçš„Splunkã€‚ æˆ‘è‡ªå·±æ€»ç»“çš„Graylogå¸å¼•äººçš„åœ°æ–¹ï¼š</p>
<ol>
<li>ä¸€ä½“åŒ–æ–¹æ¡ˆï¼Œå®‰è£…æ–¹ä¾¿ï¼Œä¸åƒELKæœ‰3ä¸ªç‹¬ç«‹ç³»ç»Ÿé—´çš„é›†æˆé—®é¢˜ã€‚</li>
<li>é‡‡é›†åŸå§‹æ—¥å¿—ï¼Œå¹¶å¯ä»¥äº‹åå†æ·»åŠ å­—æ®µï¼Œæ¯”å¦‚http_status_codeï¼Œresponse_timeç­‰ç­‰ã€‚</li>
<li>è‡ªå·±å¼€å‘é‡‡é›†æ—¥å¿—çš„è„šæœ¬ï¼Œå¹¶ç”¨curl/ncå‘é€åˆ°Graylog Serverï¼Œå‘é€æ ¼å¼æ˜¯è‡ªå®šä¹‰çš„GELFï¼ŒFluntedå’ŒLogstashéƒ½æœ‰ç›¸åº”çš„è¾“å‡ºGELFæ¶ˆæ¯çš„æ’ä»¶ã€‚è‡ªå·±å¼€å‘å¸¦æ¥å¾ˆå¤§çš„è‡ªç”±åº¦ã€‚å®é™…ä¸Šåªéœ€è¦ç”¨inotifywaitç›‘æ§æ—¥å¿—çš„modifyäº‹ä»¶ï¼Œå¹¶æŠŠæ—¥å¿—çš„æ–°å¢è¡Œç”¨curl/netcatå‘é€åˆ°Graylog Serverå°±å¯ã€‚</li>
<li>æœç´¢ç»“æœé«˜äº®æ˜¾ç¤ºï¼Œå°±åƒgoogleä¸€æ ·ã€‚</li>
<li>æœç´¢è¯­æ³•ç®€å•ï¼Œæ¯”å¦‚ï¼š source:mongo AND reponse_time_ms:&gt;5000ï¼Œé¿å…ç›´æ¥è¾“å…¥elasticsearchæœç´¢jsonè¯­æ³•</li>
<li>æœç´¢æ¡ä»¶å¯ä»¥å¯¼å‡ºä¸ºelasticsearchçš„æœç´¢jsonæ–‡æœ¬ï¼Œæ–¹ä¾¿ç›´æ¥å¼€å‘è°ƒç”¨elasticsearch rest apiçš„æœç´¢è„šæœ¬ã€‚</li>
</ol>
<p>Graylogå›¾è§£</p>
<p>Graylogå¼€æºç‰ˆå®˜ç½‘ï¼š <a href="https://www.graylog.org/" target="_blank" rel="external">https://www.graylog.org/</a></p>
<p>æ¥å‡ å¼ å®˜ç½‘çš„æˆªå›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog2.png" alt=""></figure></p>
<p><figure class="figure"><img src="https://www.graylog.org/assets/itops_full-87fe2811ab676116142c145affa95b902635b1d6da99718057e8ae9d45c15007.png" alt=""></figure></p>
<p><figure class="figure"><img src="https://www.graylog.org/assets/overview_dashboard-3817012f923d4a00e9bde1c0547796319cf0396149464f434cfc2ae83a9da826.png" alt=""></figure></p>
<p>Graylogæ˜¯å¼ºå¤§çš„æ—¥å¿—ç®¡ç†ã€åˆ†æå·¥å…·ã€‚å®ƒåŸºäº Elasticsearch, Javaå’ŒMongoDBã€‚</p>
<p>Graylogå¯ä»¥æ”¶é›†ç›‘æ§å¤šç§ä¸åŒåº”ç”¨çš„æ—¥å¿—ã€‚ä½†æ˜¯ä¸ºäº†ç¤ºèŒƒè¯´æ˜ï¼Œæˆ‘åªæ”¶é›†syslogã€‚å¹¶ä¸”ï¼Œæˆ‘å°†ä¼šæŠŠç”¨åˆ°çš„ç»„ä»¶å…¨éƒ¨å®‰è£…åˆ°ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡å™¨ä¸Šã€‚å¯¹äºå¤§å‹ã€ç”Ÿäº§ç³»ç»Ÿä½ å¯ä»¥æŠŠç»„ä»¶åˆ†å¼€å®‰è£…åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ã€‚</p>
<h3 id="Graylogçš„ç»„ä»¶"><a href="#Graylogçš„ç»„ä»¶" class="headerlink" title="Graylogçš„ç»„ä»¶"></a>Graylogçš„ç»„ä»¶</h3><p>Graylogæœ‰4ä¸ªåŸºæœ¬ç»„ä»¶ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Graylog <span class="built_in">Server</span>ï¼šè¿™ä¸ªæœåŠ¡è´Ÿè´£æ¥æ”¶å’Œå¤„ç†æ—¥å¿—/æ¶ˆæ¯ï¼Œå¹¶ä¸”å’Œå…¶ä»–ç»„ä»¶æ²Ÿé€šã€‚</div><div class="line">Elasticsearchï¼šå­˜å‚¨æ‰€æœ‰çš„æ—¥å¿—ï¼Œå®ƒçš„æ€§èƒ½ä¾èµ–å†…å­˜å’Œç¡¬ç›˜IOã€‚</div><div class="line">MongoDBï¼šå­˜å‚¨å…ƒæ•°æ®ï¼Œè´Ÿè½½ä¸é«˜ã€‚</div><div class="line">graylog-Webæ¥å£ï¼šç”¨æˆ·æ¥å£ã€‚</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯Graylogç»„ä»¶ä¹‹é—´çš„å…³ç³»å›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog3.png" alt=""></figure></p>
<p>ä¸‹é¢æ¥è‡ªæˆ‘å…¬å¸å†…éƒ¨åˆ†äº«çš„PPTæ‹å›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/Graylog4-ppt.png" alt=""></figure></p>
<p>ç”Ÿäº§ç¯å¢ƒ æˆ‘å‚è€ƒç½‘ä¸Šä¸€äº›åšå®¢ç”»çš„å›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog5.png" alt=""></figure></p>
<h3 id="ç³»ç»Ÿè¦æ±‚ï¼š"><a href="#ç³»ç»Ÿè¦æ±‚ï¼š" class="headerlink" title="ç³»ç»Ÿè¦æ±‚ï¼š"></a>ç³»ç»Ÿè¦æ±‚ï¼š</h3><ul>
<li>CentOS 6.7</li>
<li>å†…å­˜è‡³å°‘2GB</li>
<li>æœ‰rootæƒé™</li>
<li>æœåŠ¡å™¨ipæ˜¯192.168.1.234ï¼Œå·²å®‰è£… 1.8.0_77-b03</li>
</ul>
<p>è¿™é‡Œæˆ‘åªæ˜¯ä¸¾ä¾‹å•ä¸€æ¨¡å¼è·‘æœåŠ¡ã€‚</p>
<h3 id="å®‰è£…MongoDB"><a href="#å®‰è£…MongoDB" class="headerlink" title="å®‰è£…MongoDB"></a>å®‰è£…MongoDB</h3><p>MongoDBçš„å®‰è£…éå¸¸ç®€å•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯¼å…¥MongoDB GPGå¯†é’¥åˆ°rpmï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">vim</span> <span class="string">/etc/yum.repos.d/mongodb-org-3.0.repo</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">[mongodb-org-3.0]</span></div><div class="line"><span class="string">name=MongoDB</span> <span class="string">Repository</span></div><div class="line"><span class="string">baseurl=http://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.0/x86_64/</span></div><div class="line"><span class="string">gpgcheck=0</span></div><div class="line"><span class="string">enabled=1</span></div><div class="line"><span class="meta">---</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">yum</span> <span class="string">install</span> <span class="bullet">-y</span> <span class="string">mongodb-org</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">vi</span> <span class="string">/etc/yum.conf</span></div><div class="line"><span class="string">æœ€åä¸€è¡Œæ·»åŠ ï¼š</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">exclude=mongodb-org,mongodb-org-server,mongodb-org-shell,mongodb-org-mongos,mongodb-org-tools</span></div><div class="line"><span class="meta">---</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">service</span> <span class="string">mongod</span> <span class="string">start</span></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">chkconfig</span> <span class="string">mongod</span> <span class="string">on</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">vi</span> <span class="string">/etc/security/limits.conf</span></div><div class="line"><span class="string">æœ€åä¸€è¡Œæ·»åŠ ï¼š</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">*</span>                <span class="string">soft</span>    <span class="string">nproc</span>           <span class="number">65536</span></div><div class="line"><span class="string">*</span>                <span class="string">hard</span>    <span class="string">nproc</span>           <span class="number">65536</span></div><div class="line"><span class="string">mongod</span>           <span class="string">soft</span>    <span class="string">nproc</span>           <span class="number">65536</span></div><div class="line"></div><div class="line"><span class="string">*</span>                <span class="string">soft</span>    <span class="string">nofile</span>          <span class="number">131072</span></div><div class="line"><span class="string">*</span>                <span class="string">hard</span>    <span class="string">nofile</span>          <span class="number">131072</span></div><div class="line"><span class="meta">---</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">vi</span> <span class="string">/etc/init.d/mongod</span></div><div class="line"><span class="string">ulimit</span> <span class="bullet">-f</span> <span class="string">unlimited</span> <span class="string">è¡Œå‰æ’å…¥ï¼š</span></div><div class="line"><span class="meta">---</span></div><div class="line">  <span class="string">if</span> <span class="string">test</span> <span class="bullet">-f</span> <span class="string">/sys/kernel/mm/transparent_hugepage/enabled;</span> <span class="string">then</span></div><div class="line">    <span class="string">echo</span> <span class="string">never</span> <span class="string">&gt; /sys/kernel/mm/transparent_hugepage/enabled</span></div><div class="line">  fi</div><div class="line">  if test -f /sys/kernel/mm/transparent_hugepage/defrag; then</div><div class="line">    echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</div><div class="line">  fi</div><div class="line">---</div><div class="line">[root@graylog ~]# /etc/init.d/mongod restart</div></pre></td></tr></table></figure>
<h3 id="å®‰è£…Elasticsearch"><a href="#å®‰è£…Elasticsearch" class="headerlink" title="å®‰è£…Elasticsearch"></a>å®‰è£…Elasticsearch</h3><p>Graylogç›®å‰ä¸ºæ­¢åªèƒ½ä½¿ç”¨Elasticsearch 2.0ä»¥å‰çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥ï¼Œåœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘å°†å®‰è£…Elasticsearch 1.7.xã€‚</p>
<p>æ·»åŠ Elasticsearch GPGå¯†é’¥ï¼š</p>
<pre><code>$ sudo rpm --import http://packages.elastic.co/GPG-KEY-elasticsearch
</code></pre><p>åˆ›å»ºElasticsearchæºï¼š</p>
<pre><code>$ sudo vim /etc/yum.repos.d/elasticsearch.repo
</code></pre><p>å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="section">[elasticsearch-1.7]</span></div><div class="line"><span class="attr">name</span>=Elasticsearch repository for <span class="number">1.7</span>.x packages</div><div class="line"><span class="attr">baseurl</span>=http://packages.elastic.co/elasticsearch/<span class="number">1.7</span>/centos</div><div class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></div><div class="line"><span class="attr">gpgkey</span>=http://packages.elastic.co/GPG-KEY-elasticsearch</div><div class="line"><span class="attr">enabled</span>=<span class="number">1</span></div></pre></td></tr></table></figure>
<p>å®‰è£…Elasticsearchï¼š</p>
<pre><code>$ sudo yum -y install elasticsearch
</code></pre><p>é…ç½®å‰å…ˆåˆ›å»ºå‡ ä¸ªç›®å½•æ–‡ä»¶</p>
<pre><code>mkdir /data/es-data -p
mkdir /data/es-work -p
</code></pre><p>Elasticsearchå®‰è£…å®Œæˆä¹‹åï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code>sudo vim /etc/elasticsearch/elasticsearch.yml

 node.data: true  # æ•°æ®å­˜æ”¾true
</code></pre><p>æ‰¾åˆ°cluster.nameä¸€è¡Œï¼Œå–æ¶ˆè¿™ä¸€è¡Œçš„æ³¨é‡Šï¼Œå¹¶æŠŠå€¼æ”¹ä¸ºgraylog-developmentï¼š</p>
<pre><code>cluster.name: graylog-development


 path.data: /data/es-data     esæ•°æ®å­˜æ”¾ç›®å½•  è¿™é‡Œéœ€è¦è‡ªå·±æ–°å»ºç›®å½•

 path.work: /data/es-work   
</code></pre><p>ä½ ä¹Ÿè®¸æƒ³è¦é™åˆ¶å¤–éƒ¨è®¿é—®Elasticsearchï¼ˆç«¯å£9200ï¼‰ï¼Œè¿™æ ·å¯ä»¥æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚æ‰¾åˆ°network.hostä¸€è¡Œï¼Œå–æ¶ˆæ³¨é‡Šï¼Œå¹¶æŠŠå€¼æ”¹ä¸ºlocalhostï¼š</p>
<pre><code>network.host: 192.168.1.234
</code></pre><p>ä¿å­˜é€€å‡ºæ–‡ä»¶ã€‚</p>
<p>é‡å¯Elasticsearchï¼š</p>
<pre><code>$ service elasticsearch start
</code></pre><p>è®¾ç½®å¼€æœºå¯åŠ¨ï¼š</p>
<pre><code>$ chkconfig --add elasticsearch
</code></pre><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æµ‹è¯•Elasticsearchæ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</p>
<pre><code>$ curl -XGET &apos;http://localhost:9200/_cluster/health?pretty=true&apos;
</code></pre><p>è¾“å‡ºçš„ä¿¡æ¯å¦‚ä¸‹è¡¨ç¤ºElasticsearchå®‰è£…æˆåŠŸï¼š</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">drwxr-xr-x. <span class="number">2</span> root   root  <span class="number">4096</span> <span class="number">9</span>æœˆ  <span class="number">23</span> <span class="number">2011</span> src</div><div class="line">[root<span class="symbol">@ELK</span> <span class="keyword">local</span>]<span class="meta">#  curl -XGET <span class="string">'http://192.168.1.234:9200/_cluster/health?pretty=true'</span></span></div><div class="line">&#123;</div><div class="line">  <span class="string">"cluster_name"</span> : <span class="string">"graylog-development"</span>,</div><div class="line">  <span class="string">"status"</span> : <span class="string">"yellow"</span>,</div><div class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</div><div class="line">  <span class="string">"number_of_nodes"</span> : <span class="number">1</span>,</div><div class="line">  <span class="string">"number_of_data_nodes"</span> : <span class="number">1</span>,</div><div class="line">  <span class="string">"active_primary_shards"</span> : <span class="number">37</span>,</div><div class="line">  <span class="string">"active_shards"</span> : <span class="number">37</span>,</div><div class="line">  <span class="string">"relocating_shards"</span> : <span class="number">0</span>,</div><div class="line">  <span class="string">"initializing_shards"</span> : <span class="number">0</span>,</div><div class="line">  <span class="string">"unassigned_shards"</span> : <span class="number">37</span>,</div><div class="line">  <span class="string">"delayed_unassigned_shards"</span> : <span class="number">0</span>,</div><div class="line">  <span class="string">"number_of_pending_tasks"</span> : <span class="number">0</span>,</div><div class="line">  <span class="string">"number_of_in_flight_fetch"</span> : <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®‰è£…Graylag</p>
<p>Graylogçš„æœ€æ–°ç‰ˆæ˜¯1.1.4ï¼Œä¸‹è½½é“¾æ¥å¦‚ä¸‹ï¼š<br><a href="https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-server-1.1.4-1.noarch.rpm" target="_blank" rel="external">https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-server-1.1.4-1.noarch.rpm</a><br><a href="https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-web-1.1.4-1.noarch.rpm" target="_blank" rel="external">https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-web-1.1.4-1.noarch.rpm</a></p>
<p>ç°åœ¨Graylogçš„æ‰€æœ‰ä¾èµ–è½¯ä»¶å®‰è£…å®Œæˆï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬æ¥å®‰è£…graylog-serverã€‚</p>
<p>é¦–å…ˆï¼Œä¸‹è½½Graylog RPMè½¯ä»¶åŒ…ï¼š</p>
<pre><code>$ cd 
$ sudo rpm -Uvh https://packages.graylog2.org/repo/packages/graylog-1.3-repository-el7_latest.rpm
</code></pre><p>å®‰è£…graylog-serverï¼š</p>
<pre><code>yum -y install graylog-server
</code></pre><p>å®‰è£…pwgenï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒç”Ÿæˆéšæœºå¯†ç ï¼š</p>
<pre><code>yum -y install epel-release
yum -y install pwgen
</code></pre><p>ç°åœ¨æˆ‘ä»¬æ¥è®¾ç½®Graylogç®¡ç†å‘˜çš„å¯†é’¥ã€‚é…ç½®æ–‡ä»¶ä½äº/etc/graylog/server/server.confç›®å½•ï¼Œéœ€è¦ä¿®æ”¹password_secretå‚æ•°ï¼š</p>
<pre><code>$ SECRET=$(pwgen -s 96 1)
$ sudo -E sed -i -e &apos;s/password_secret =.*/password_secret = &apos;$SECRET&apos;/&apos; /etc/graylog/server/server.conf
</code></pre><p>æ‰§è¡Œå®Œä¸Šé¢å‘½ä»¤ä¹‹åï¼Œpassword_secretå‚æ•°çš„æ ·å­ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog6.png" alt=""></figure></p>
<p>è¿™ä¸€æ­¥ï¼Œè®¾ç½®ç®¡ç†å‘˜å¯†ç ã€‚ç”±äºå¯†ç ä½¿ç”¨shaå“ˆå¸Œç®—æ³•ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ˜æ–‡å¯†ç è½¬æ¢ä¸ºhashï¼Œç„¶åèµ‹å€¼ç»™root_password_sha2å‚æ•°ã€‚ä¾‹å¦‚ï¼Œæˆ‘è¦è®¾ç½®çš„ç®¡ç†å‘˜å¯†ç æ˜¯ Ihaozhuo_b313ï¼Œå®ƒå¯¹åº”çš„hashä¸ºï¼š</p>
<pre><code>$ echo -n Ihaozhuo_b313 | sha256sum | awk &apos;{print $1}&apos;
</code></pre><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog7.png" alt=""></figure></p>
<p>ç¼–è¾‘/etc/graylog/server/server.confï¼Œè®¾ç½®root_password_sha2å‚æ•°ï¼š</p>
<pre><code>$ sudo vim /etc/graylog/server/server.conf
</code></pre><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog8.png" alt=""></figure></p>
<p>ç°åœ¨Graylogç®¡ç†å‘˜å¯†ç ä¸ºIhaozhuo_b313ã€‚</p>
<p>é…ç½®rest_transport_uriå‚æ•°ï¼Œè®¾ç½®Graylog webæ¥å£å’ŒæœåŠ¡å™¨çš„æ²Ÿé€šæ–¹å¼ã€‚ç”±äºæˆ‘ä»¬æŠŠæ‰€æœ‰ç»„ä»¶éƒ½å®‰è£…åˆ°äº†å•ç‹¬çš„ä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œéœ€è¦æŠŠå€¼è®¾ç½®ä¸º<strong>127.0.0.1</strong> æˆ– <strong>localhost</strong>ã€‚æ‰¾åˆ°rest_transport_uriä¸€è¡Œï¼Œå–æ¶ˆæ³¨é‡Šï¼Œå¹¶æŠŠå€¼è®¾ç½®ä¸ºï¼š</p>
<pre><code>rest_transport_uri = http://192.168.1.234:12900/
</code></pre><p>ç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªElasticsearch shardï¼Œéœ€è¦æŠŠelasticsearch_shardså‚æ•°è®¾ç½®ä¸º1ï¼š</p>
<pre><code>elasticsearch_shards = 1
</code></pre><p>æ›´æ”¹elasticsearch_cluster_nameå‚æ•°ï¼Œåº”è¯¥å’Œå‰é¢Elasticsearchçš„<strong>cluster.name</strong>å‚æ•°ç›¸å¯¹åº”ï¼š</p>
<pre><code>elasticsearch_cluster_name = graylog-development
</code></pre><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog9.png" alt=""></figure></p>
<p>å–æ¶ˆä¸‹é¢ä¸¤è¡Œçš„æ³¨é‡Šï¼Œæ£€æµ‹Elasticsearchï¼š</p>
<pre><code>172 elasticsearch_discovery_zen_ping_multicast_enabled = false
173 elasticsearch_discovery_zen_ping_unicast_hosts = 192.168.1.234:9300
</code></pre><p>å¯åŠ¨graylog-serverï¼š</p>
<pre><code>/etc/init.d/graylog-web restart
</code></pre><h3 id="å®‰è£…Graylog-Web"><a href="#å®‰è£…Graylog-Web" class="headerlink" title="å®‰è£…Graylog Web"></a>å®‰è£…Graylog Web</h3><p>å®‰è£…Graylog Webï¼š</p>
<pre><code>$ sudo yum -y install graylog-web
</code></pre><p>å®‰è£…å®Œæˆä¹‹åé…ç½®Graylog Webçš„å¯†é’¥ï¼Œé…ç½®æ–‡ä»¶ä½äº/etc/graylog/web/web.confï¼Œæ›´æ”¹application.secretå‚æ•°ï¼š</p>
<pre><code>$ SECRET=$(pwgen -s 96 1)
$ sudo -E sed -i -e &apos;s/application\.secret=&quot;&quot;/application\.secret=&quot;&apos;$SECRET&apos;&quot;/&apos; /etc/graylog/web/web.conf
</code></pre><p>é…ç½®graylog2-server.uriså‚æ•°ï¼Œå®ƒçš„å€¼åº”è¯¥å’ŒGraylogçš„rest_listen_uriå‚æ•°ç›¸å¯¹åº”ï¼š</p>
<pre><code>$ sudo vim /etc/graylog/web/web.conf

graylog2-server.uris=&quot;http://127.0.0.1:12900/&quot;
</code></pre><p>é‡å¯graylog-webï¼š</p>
<pre><code>/etc/init.d/graylog-web restart
</code></pre><h3 id="é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—"><a href="#é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—" class="headerlink" title="é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—"></a>é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—</h3><h4 id="ç™»å½•Graylog-Web"><a href="#ç™»å½•Graylog-Web" class="headerlink" title="ç™»å½•Graylog Web"></a>ç™»å½•Graylog Web</h4><p>ä½¿ç”¨æµè§ˆå™¨è®¿é—®GraylogæœåŠ¡å™¨çš„åŸŸåæˆ–IPï¼š<strong><a href="http://graylog_public_IP_domain:9000/" target="_blank" rel="external">http://graylog_public_IP_domain:9000/</a></strong>ã€‚</p>
<p>ä½ åº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ªç™»å½•ç•Œé¢ï¼Œä½¿ç”¨adminåšä¸ºç”¨æˆ·åå’Œå‰é¢è®¾ç½®çš„å¯†ç ç™»å½•ã€‚</p>
<p>ç™»å½•ä¹‹åï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog10.png" alt=""></figure></p>
<p>ä¸Šé¢çš„çº¢æ•°å­—1æ˜¯é€šçŸ¥ï¼ˆyou have a node without any running inputsï¼‰ï¼Œä¸‹é¢è®¾ç½®é€šè¿‡UDPæ¥æ”¶syslogã€‚</p>
<p>åˆ›å»ºsyslog UDPè¾“å…¥</p>
<p>æ·»åŠ è¦æ¥æ”¶çš„å…¶ä»–æœåŠ¡å™¨syslogæ—¥å¿—ï¼šSystem-&gt;Inputs-&gt;Syslog UDP-&gt;Launch new inputã€‚</p>
<p>åœ¨å¼¹å‡ºçš„çª—å£ä¸Šè¾“å…¥å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>Title: syslog</li>
<li>Port: 8514</li>
<li>Bind address: è¿™é‡Œå†™Graylog-serveræœåŠ¡å™¨ä¸»æœºIP</li>
</ul>
<p>ç‚¹å‡»Launch</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog11.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog12.png" alt=""></figure></p>
<p>å¦‚æœä½ éœ€è¦æ”¶é›†å¤šä¸ªæœåŠ¡å™¨çš„æ—¥å¿—ï¼Œé‡å¤ä¸Šé¢æ­¥éª¤ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„GraylogæœåŠ¡å™¨å·²ç»åšå¥½äº†æ¥æ”¶å…¶ä»–æœåŠ¡å™¨å‘æ¥æ—¥å¿—çš„å‡†å¤‡ã€‚ä¸‹é¢æˆ‘ä»¬è¿˜éœ€è¦é…ç½®å…¶ä»–æœåŠ¡å™¨ï¼Œè®©è¿™äº›æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€æ—¥å¿—ã€‚</p>
<h4 id="é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog"><a href="#é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog" class="headerlink" title="é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog"></a>é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog</h4><p>å‚è€ƒå®˜ç½‘ï¼š<a href="https://marketplace.graylog.org/addons/a47beb3b-0bd9-4792-a56a-33b27b567856" target="_blank" rel="external">ä»Linuxç³»ç»Ÿæ—¥å¿—å‘é€åˆ°Graylog</a></p>
<p>SSHç™»å½•â€œå…¶ä»–æœåŠ¡å™¨â€ï¼Œåˆ›å»ºrsyslogé…ç½®æ–‡ä»¶90-graylog.confï¼š</p>
<pre><code>sudo vim /etc/rsyslog.d/90-graylog.conf
</code></pre><p>æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ŒæŠŠ graylog_server_IP æ›¿æ¢ä¸ºGraylogæœåŠ¡å™¨ipåœ°å€ï¼š</p>
<pre><code>$template GRAYLOGRFC5424,&quot;&lt;%pri%&gt;%protocol-version% %timestamp:::date-rfc3339%    %HOSTNAME% %app-name% %procid% %msg%\n&quot;
*.* @graylog_server_IP:8514;GRAYLOGRFC5424
</code></pre><p>é‡å¯rsyslogæœåŠ¡ä½¿ç”Ÿæ•ˆï¼š</p>
<pre><code>/etc/init.d/rsyslog restart
</code></pre><p>é…ç½®å®Œæˆä¹‹åï¼Œå›åˆ°Graylog Webï¼Œç‚¹å‡»Sourcesï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰æ–°æ·»åŠ rsyslogã€‚</p>
<h4 id="Graylogä½¿ç”¨httpåè®®å‘é€ï¼š"><a href="#Graylogä½¿ç”¨httpåè®®å‘é€ï¼š" class="headerlink" title="Graylogä½¿ç”¨httpåè®®å‘é€ï¼š"></a>Graylogä½¿ç”¨httpåè®®å‘é€ï¼š</h4><p>æ·»åŠ è¦æ¥æ”¶çš„å…¶ä»–æœåŠ¡å™¨syslogæ—¥å¿—ï¼šSystem-&gt;Inputs-&gt;GELF HTTP-&gt;Launch new inputã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog14.png" alt=""></figure></p>
<p>ç„¶ååœ¨æœåŠ¡å™¨ä¸Šé¢å‘é€ä¸‹é¢å‘½ä»¤ã€‚</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog-development ~]</span># curl -XPOST http://<span class="number">192.168.1.234:12201</span>/gelf -p0 -d '&#123;<span class="string">"short_message"</span>:<span class="string">"Hello there"</span>, <span class="string">"host"</span>:<span class="string">"example.org"</span>, <span class="string">"facility"</span>:<span class="string">"test"</span>, <span class="string">"_foo"</span>:<span class="string">"bar"</span>&#125;'</div><div class="line"><span class="string">[root@graylog-development ~]</span># curl -XPOST http://<span class="number">192.168.1.234:12201</span>/gelf -p0 -d '&#123;<span class="string">"short_message"</span>:<span class="string">"æµ‹è¯•"</span>, <span class="string">"host"</span>:<span class="string">"example.org"</span>, <span class="string">"facility"</span>:<span class="string">"test"</span>, <span class="string">"_foo"</span>:<span class="string">"bar"</span>&#125;'</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå®šä¹‰192.168.1.234 æ˜¯graylog-serveræœåŠ¡å™¨åœ°å€ 12201 ç«¯å£æ˜¯ä¹‹å‰åˆ›å»ºå¥½çš„ã€‚</p>
<h3 id="æœç´ Graylog"><a href="#æœç´ Graylog" class="headerlink" title="æœç´ Graylog"></a>æœç´ Graylog</h3><p>å‡å¦‚ä½ è¦æœç´¢helloï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog13.png" alt=""></figure></p>
<p>ä¸Šé¢å®‰è£…é…ç½®äº†åŸºæœ¬çš„GraylogæœåŠ¡å™¨ã€‚</p>
<h3 id="æ—¶åŒºå’Œé«˜äº®è®¾ç½®"><a href="#æ—¶åŒºå’Œé«˜äº®è®¾ç½®" class="headerlink" title="æ—¶åŒºå’Œé«˜äº®è®¾ç½®"></a>æ—¶åŒºå’Œé«˜äº®è®¾ç½®</h3><p>adminå¸å·çš„æ—¶åŒºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">vi</span> <span class="string">/etc/graylog/server/server.conf</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="number">30</span> <span class="string">root_timezone</span> <span class="string">=</span> <span class="string">Asia/Shanghai</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">/etc/init.d/graylog-server</span> <span class="string">restart</span></div></pre></td></tr></table></figure>
<p>å…¶ä»–å¸å·çš„é»˜è®¤æ—¶åŒºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">vi</span> <span class="string">/etc/graylog/web/web.conf</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="number">18</span> <span class="string">timezone="Asia/Shanghai"</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">/etc/init.d/graylog-web</span> <span class="string">restart</span></div></pre></td></tr></table></figure>
<p>å…è®¸æŸ¥è¯¢ç»“æœé«˜äº®ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">vi</span> <span class="string">/etc/graylog/server/server.conf</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="number">147</span> <span class="string">allow_highlighting</span> <span class="string">=</span> <span class="literal">true</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">/etc/init.d/graylog-server</span> <span class="string">restart</span></div></pre></td></tr></table></figure>
<h3 id="ç§»åŠ¨æ•°æ®ç›®å½•"><a href="#ç§»åŠ¨æ•°æ®ç›®å½•" class="headerlink" title="ç§»åŠ¨æ•°æ®ç›®å½•"></a>ç§»åŠ¨æ•°æ®ç›®å½•</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ç§»åŠ¨elasticsearchçš„æ•°æ®ç›®å½•</div><div class="line">[root@graylog ~]<span class="comment"># sudo /etc/init.d/elasticsearch stop</span></div><div class="line">[root@graylog ~]<span class="comment"># sudo cp -rp /var/lib/elasticsearch/ /data/</span></div><div class="line">[root@graylog ~]<span class="comment"># sudo vi /etc/sysconfig/elasticsearch</span></div><div class="line">+<span class="number">16</span> DATA_DIR=/data/elasticsearch</div><div class="line">[root@graylog ~]<span class="comment"># sudo /etc/init.d/elasticsearch start</span></div><div class="line"></div><div class="line">ç§»åŠ¨mongoçš„æ•°æ®ç›®å½•</div><div class="line">[root@graylog ~]<span class="comment"># sudo /etc/init.d/mongod stop</span></div><div class="line">[root@graylog ~]<span class="comment"># sudo cp -rp /var/lib/mongo /data/</span></div><div class="line">[root@graylog ~]<span class="comment"># sudo vi /etc/mongod.conf</span></div><div class="line">---</div><div class="line"><span class="number">13</span> dbpath=/<span class="keyword">var</span>/lib/mongo<span class="function"></span></div><div class="line">-&gt;</div><div class="line"><span class="number">13</span> dbpath=/data/mongo</div><div class="line">---</div><div class="line">[mtagent@access2 ~]$ sudo /etc/init.d/mongod start</div></pre></td></tr></table></figure>
<h4 id="å…¶ä½™å‚è€ƒæ–‡æ¡£"><a href="#å…¶ä½™å‚è€ƒæ–‡æ¡£" class="headerlink" title="å…¶ä½™å‚è€ƒæ–‡æ¡£"></a>å…¶ä½™å‚è€ƒæ–‡æ¡£</h4><p><a href="http://docs.graylog.org/en/1.3/" target="_blank" rel="external">å‚è€ƒå®˜ç½‘</a></p>
<p><a href="http://blog.topspeedsnail.com/archives/4066" target="_blank" rel="external">Centos7 æ­å»ºgraylog</a></p>
<p><a href="https://my.oschina.net/fitnessefan/blog/464351?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">Graylogâ€”â€”æ—¥å¿—èšåˆå·¥å…·ä¸­çš„åèµ·ä¹‹ç§€</a></p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/11/10/è¿ç»´ç¬”è®°/å¦‚ä½•è§£å†³æŠ½å¥–çš„æ€§èƒ½é—®é¢˜å’Œç§’æ€çš„è®¨è®º  /">å¦‚ä½•è§£å†³ç§’æ€çš„æ€§èƒ½é—®é¢˜å’Œå¾®ä¿¡æ¨å¹¿æ´»åŠ¨çš„è®¨è®º</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-11-10</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/è¿ç»´ç¬”è®°/">è¿ç»´ç¬”è®°</a>
			</span><br />
		
		
	</div>

	

	
		<p>æœ€è¿‘ä¸šåŠ¡è¯•æ°´å¾®ä¿¡æŠ½å¥–æ´»åŠ¨ï¼Œå…¬å¸ç°åœ¨æ‰“ç®—æ¨å¹¿ä¸‹äº§å“ã€‚å¢åŠ äº›ç²‰ä¸é‡ ä¹‹å‰ç»å¸¸çœ‹åˆ°æ·˜å®çš„åŒè¡Œä»¬è®¨è®ºç§’æ€ï¼Œè®¨è®ºç”µå•†ï¼Œè¿™æ¬¡ç»ˆäºè½®åˆ°æˆ‘ä»¬è‡ªå·±ç†è®ºç»“åˆå®é™…ä¸€æ¬¡äº†ã€‚</p>
<p>psï¼šè¿›å…¥æ­£æ–‡å‰å…ˆè¯´ä¸€ç‚¹ä¸ªäººæ„Ÿå—ï¼Œä¹‹å‰çœ‹æ·˜å®çš„pptæ„Ÿè§‰éƒ½æ‡‚äº†ï¼Œç­‰åˆ°è‡ªå·±å‡ºè§£å†³æ–¹æ¡ˆçš„æ—¶å€™å‘ç°è¿˜æ˜¯æœ‰å¾ˆå¤šæƒ³ä¸åˆ°çš„åœ°æ–¹å…¶å®éƒ½æ²¡æ‡‚ï¼Œå†æ¬¡éªŒè¯äº†â€œç»†èŠ‚æ˜¯é­”é¬¼â€çš„ç†è®ºã€‚å¹¶ä¸”ä¸€ä¸ªäººçš„èƒ½åŠ›æœ‰é™ï¼Œåªæœ‰å¤§å®¶ä¸€èµ·è®¨è®ºæ‰èƒ½æƒ³çš„æ›´å‘¨å…¨ï¼Œæ›´ç»†è‡´ã€‚å¥½äº†ï¼Œé—²è¯å°‘è¯´ï¼Œä¸‹é¢è¿›å…¥æ­£æ–‡ã€‚</p>
<h4 id="ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ</h4><p>å¾®ä¿¡ç§¯åˆ†å…‘æ¢ç°é‡‘æˆ–æŠ¢è´­æŠ½å¥–æ´»åŠ¨ä¸€èˆ¬ä¼šç»è¿‡ã€å…³æ³¨å…¬ä¼—å·ã€‘ã€åˆ†äº«æ´»åŠ¨è·å¾—ç§¯åˆ†ã€‘ã€ç§¯åˆ†å…‘æ¢ã€‘ã€æŠ½å¥–å®‰å…¨ç¯èŠ‚ã€‘è¿™3ä¸ªå¤§ç¯èŠ‚ï¼Œè€Œå…¶ä¸­ã€æŠ¢è®¢å•ã€‘è¿™ä¸ªç¯èŠ‚æ˜¯æœ€è€ƒéªŒä¸šåŠ¡æä¾›æ–¹çš„æŠ—å‹èƒ½åŠ›çš„ã€‚</p>
<p>ç§¯åˆ†å…‘æ¢ç¯èŠ‚ä¸€èˆ¬ä¼šå¸¦æ¥2ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>1ã€é«˜å¹¶å‘</li>
</ul>
<p>ã€€ã€€æ¯”è¾ƒç«çƒ­çš„æŠ½å¥–åœ¨çº¿äººæ•°éƒ½æ˜¯20wèµ·çš„ï¼Œå¦‚æ­¤ä¹‹é«˜çš„åœ¨çº¿äººæ•°å¯¹äºç½‘ç«™æ¶æ„ä»å‰åˆ°åéƒ½æ˜¯ä¸€ç§è€ƒéªŒã€‚</p>
<ul>
<li>2ã€æŠ½å¥–äººå‘˜è¿‡å¤š</li>
<li>3ã€ æŠ¢è®¢å•</li>
</ul>
<p>ã€€ã€€ä»»ä½•å•†å“éƒ½ä¼šæœ‰æ•°é‡ä¸Šé™ï¼Œå¦‚ä½•é¿å…æˆåŠŸä¸‹è®¢å•ä¹°åˆ°å•†å“çš„äººæ•°ä¸è¶…è¿‡å•†å“æ•°é‡çš„ä¸Šé™ï¼Œè¿™æ˜¯æ¯ä¸ªæŠ¢è´­æ´»åŠ¨éƒ½è¦é¢ä¸´çš„éš¾é¢˜ã€‚</p>
<h4 id="äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ"><a href="#äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ"></a>äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ</h4><p>é¦–å…ˆï¼Œäº§å“è§£å†³æ–¹æ¡ˆæˆ‘ä»¬å°±ä¸äºˆè®¨è®ºäº†ã€‚æˆ‘ä»¬åªè®¨è®ºæŠ€æœ¯è§£å†³æ–¹æ¡ˆ</p>
<p><strong>1ã€å‰ç«¯æ¶æ„</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">é¢å¯¹é«˜å¹¶å‘çš„æŠ¢è´­æ´»åŠ¨ï¼Œå‰ç«¯å¸¸ç”¨çš„ä¸‰æ¿æ–§æ˜¯ã€æ‰©å®¹ã€‘ã€é™æ€åŒ–ã€‘ã€é™æµã€‘</div><div class="line"></div><div class="line">ã€€ã€€Aï¼šæ‰©å®¹</div><div class="line">ã€€ã€€</div><div class="line">ã€€åŠ æœºå™¨ï¼Œè¿™æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œé€šè¿‡å¢åŠ å‰ç«¯æ± çš„æ•´ä½“æ‰¿è½½é‡æ¥æŠ—å³°å€¼ã€‚ </div><div class="line">ã€€è¿™é‡Œæˆ‘ä»¬éƒ½æ˜¯å¤šå°ä¸»ä»é›†ç¾¤å»è·‘ã€‚</div><div class="line"></div><div class="line">ã€€ã€€Bï¼šé™æ€åŒ–</div><div class="line"></div><div class="line">ã€€ã€€å°†æ´»åŠ¨é¡µé¢ä¸Šçš„æ‰€æœ‰å¯ä»¥é™æ€çš„å…ƒç´ å…¨éƒ¨é™æ€åŒ–ï¼Œå¹¶å°½é‡å‡å°‘åŠ¨æ€å…ƒç´ ã€‚é€šè¿‡CDNæ¥æŠ—å³°å€¼ã€‚</div><div class="line">ã€€ã€€è¿™é‡Œæˆ‘ä»¬éƒ½æ˜¯æŠŠå›¾ç‰‡é™æ€æ”¾åœ¨åˆæ‹äº‘å’Œé˜¿é‡Œäº‘ä¸Šé¢ã€‚</div><div class="line">ã€€</div><div class="line">ã€€ã€€Cï¼šé™æµ</div><div class="line"></div><div class="line">ã€€ã€€ä¸€èˆ¬éƒ½ä¼šé‡‡ç”¨IPçº§åˆ«çš„é™æµï¼Œå³é’ˆå¯¹æŸä¸€ä¸ªIPï¼Œé™åˆ¶å•ä½æ—¶é—´å†…å‘èµ·è¯·æ±‚æ•°é‡ã€‚</div><div class="line">ã€€ã€€æˆ–è€…æ´»åŠ¨å…¥å£çš„æ—¶å€™å¢åŠ æ¸¸æˆæˆ–è€…é—®é¢˜ç¯èŠ‚è¿›è¡Œæ¶ˆå³°æ“ä½œã€‚</div><div class="line">ã€€ã€€æˆ‘ä»¬é‡‡ç”¨Nginxå‰é¢åšäº†åå‘ä»£ç†åé¢ä¼˜åŒ–nginxã€‚</div><div class="line">ã€€ã€€</div><div class="line">ã€€ã€€Dï¼šæœ‰æŸæœåŠ¡</div><div class="line"></div><div class="line">ã€€ã€€æœ€åä¸€æ‹›ï¼Œåœ¨æ¥è¿‘å‰ç«¯æ± æ‰¿è½½èƒ½åŠ›çš„æ°´ä½ä¸Šé™çš„æ—¶å€™ï¼Œéšæœºæ‹’ç»éƒ¨åˆ†è¯·æ±‚æ¥ä¿æŠ¤æ´»åŠ¨æ•´ä½“çš„å¯ç”¨æ€§ã€‚</div></pre></td></tr></table></figure>
<p><strong>2ã€åç«¯æ¶æ„</strong></p>
<p>é‚£ä¹ˆåç«¯çš„æ•°æ®åº“åœ¨é«˜å¹¶å‘å’Œè¶…å–ä¸‹ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿä¸»è¦ä¼šæœ‰å¦‚ä¸‹3ä¸ªé—®é¢˜ï¼šï¼ˆä¸»è¦è®¨è®ºå†™çš„é—®é¢˜ï¼Œè¯»çš„é—®é¢˜é€šè¿‡å¢åŠ cacheå¯ä»¥å¾ˆå®¹æ˜“çš„è§£å†³ï¼‰</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ã€€ã€€Iï¼šã€€é¦–å…ˆMySQLè‡ªèº«å¯¹äºé«˜å¹¶å‘çš„å¤„ç†æ€§èƒ½å°±ä¼šå‡ºç°é—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒMySQLçš„å¤„ç†æ€§èƒ½ä¼šéšç€å¹¶å‘threadä¸Šå‡è€Œä¸Šå‡ï¼Œä½†æ˜¯åˆ°äº†ä¸€å®šçš„å¹¶å‘åº¦ä¹‹åä¼šå‡ºç°æ˜æ˜¾çš„æ‹ç‚¹ï¼Œä¹‹åä¸€è·¯ä¸‹é™ï¼Œæœ€ç»ˆç”šè‡³ä¼šæ¯”å•threadçš„æ€§èƒ½è¿˜è¦å·®ã€‚</div><div class="line"></div><div class="line">ã€€ã€€IIï¼š å…¶æ¬¡ï¼Œè¶…å–çš„æ ¹ç»“åœ¨äºå‡åº“å­˜æ“ä½œæ˜¯ä¸€ä¸ªäº‹åŠ¡æ“ä½œï¼Œéœ€è¦å…ˆ<span class="keyword">select</span>ï¼Œç„¶å<span class="keyword">insert</span>ï¼Œæœ€å<span class="keyword">update</span> <span class="number">-1</span>ã€‚æœ€åè¿™ä¸ª<span class="number">-1</span>æ“ä½œæ˜¯ä¸èƒ½å‡ºç°è´Ÿæ•°çš„ï¼Œä½†æ˜¯å½“å¤šç”¨æˆ·åœ¨æœ‰åº“å­˜çš„æƒ…å†µä¸‹å¹¶å‘æ“ä½œï¼Œå‡ºç°è´Ÿæ•°è¿™æ˜¯æ— æ³•é¿å…çš„ã€‚</div><div class="line"></div><div class="line">ã€€ã€€IIIï¼šæœ€åï¼Œå½“å‡åº“å­˜å’Œé«˜å¹¶å‘ç¢°åˆ°ä¸€èµ·çš„æ—¶å€™ï¼Œç”±äºæ“ä½œçš„åº“å­˜æ•°ç›®åœ¨åŒä¸€è¡Œï¼Œå°±ä¼šå‡ºç°äº‰æŠ¢<span class="keyword">InnoDB</span>è¡Œé”çš„é—®é¢˜ï¼Œå¯¼è‡´å‡ºç°äº’ç›¸ç­‰å¾…ç”šè‡³æ­»é”ï¼Œä»è€Œå¤§å¤§é™ä½MySQLçš„å¤„ç†æ€§èƒ½ï¼Œæœ€ç»ˆå¯¼è‡´å‰ç«¯é¡µé¢å‡ºç°è¶…æ—¶å¼‚å¸¸ã€‚</div><div class="line">ã€€ã€€</div><div class="line">ã€€ã€€è¿™ä¸ªæœ‰é‡åˆ°è¿‡çš„ï¼Œå°±æ˜¯é”è¡¨å¯¼è‡´è®¿é—®å‡ºç°ç½‘ç»œå¼‚å¸¸ã€‚</div></pre></td></tr></table></figure>
<p>é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ æˆ‘ä»¬å…ˆçœ‹çœ¼æ·˜å®çš„é«˜å¤§ä¸Šè§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Iï¼šå…³é—­æ­»é”æ£€æµ‹ï¼Œæé«˜å¹¶å‘å¤„ç†æ€§èƒ½ã€‚</div><div class="line">IIï¼šä¿®æ”¹æºä»£ç ï¼Œå°†æ’é˜Ÿæåˆ°è¿›å…¥å¼•æ“å±‚å‰ï¼Œé™ä½å¼•æ“å±‚é¢çš„å¹¶å‘åº¦ã€‚</div><div class="line">IIIï¼šç»„æäº¤ï¼Œé™ä½<span class="keyword">server</span>å’Œå¼•æ“çš„äº¤äº’æ¬¡æ•°ï¼Œé™ä½IOæ¶ˆè€—ã€‚</div></pre></td></tr></table></figure>
<h3 id="è§£å†³æ–¹æ¡ˆ1ï¼š"><a href="#è§£å†³æ–¹æ¡ˆ1ï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆ1ï¼š"></a>è§£å†³æ–¹æ¡ˆ1ï¼š</h3><p>å°†å­˜åº“ä»MySQLå‰ç§»åˆ°Redisä¸­ï¼Œæ‰€æœ‰çš„å†™æ“ä½œæ”¾åˆ°å†…å­˜ä¸­ï¼Œç”±äºRedisä¸­ä¸å­˜åœ¨é”æ•…ä¸ä¼šå‡ºç°äº’ç›¸ç­‰å¾…ï¼Œå¹¶ä¸”ç”±äºRedisçš„å†™æ€§èƒ½å’Œè¯»æ€§èƒ½éƒ½è¿œé«˜äºMySQLï¼Œè¿™å°±è§£å†³äº†é«˜å¹¶å‘ä¸‹çš„æ€§èƒ½é—®é¢˜ã€‚ç„¶åé€šè¿‡é˜Ÿåˆ—ç­‰å¼‚æ­¥æ‰‹æ®µï¼Œå°†å˜åŒ–çš„æ•°æ®å¼‚æ­¥å†™å…¥åˆ°DBä¸­ã€‚</p>
<p>ä¼˜ç‚¹ï¼šè§£å†³æ€§èƒ½é—®é¢˜<br>ç¼ºç‚¹ï¼šæ²¡æœ‰è§£å†³è¶…å–é—®é¢˜ï¼ŒåŒæ—¶ç”±äºå¼‚æ­¥å†™å…¥DBï¼Œå­˜åœ¨æŸä¸€æ—¶åˆ»DBå’ŒRedisä¸­æ•°æ®ä¸ä¸€è‡´çš„é£é™©ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ2ï¼š"><a href="#è§£å†³æ–¹æ¡ˆ2ï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆ2ï¼š"></a>è§£å†³æ–¹æ¡ˆ2ï¼š</h3><p>å¼•å…¥é˜Ÿåˆ—ï¼Œç„¶åå°†æ‰€æœ‰å†™DBæ“ä½œåœ¨å•é˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Œå®Œå…¨ä¸²è¡Œå¤„ç†ã€‚å½“è¾¾åˆ°åº“å­˜é˜€å€¼çš„æ—¶å€™å°±ä¸åœ¨æ¶ˆè´¹é˜Ÿåˆ—ï¼Œå¹¶å…³é—­è´­ä¹°åŠŸèƒ½ã€‚è¿™å°±è§£å†³äº†è¶…å–é—®é¢˜ã€‚</p>
<p>ä¼˜ç‚¹ï¼šè§£å†³è¶…å–é—®é¢˜ï¼Œç•¥å¾®æå‡æ€§èƒ½ã€‚<br>ç¼ºç‚¹ï¼šæ€§èƒ½å—é™äºé˜Ÿåˆ—å¤„ç†æœºå¤„ç†æ€§èƒ½å’ŒDBçš„å†™å…¥æ€§èƒ½ä¸­æœ€çŸ­çš„é‚£ä¸ªï¼Œå¦å¤–å¤šå•†å“åŒæ—¶æŠ¢è´­çš„æ—¶å€™éœ€è¦å‡†å¤‡å¤šæ¡é˜Ÿåˆ—ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ3ï¼š"><a href="#è§£å†³æ–¹æ¡ˆ3ï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆ3ï¼š"></a>è§£å†³æ–¹æ¡ˆ3ï¼š</h3><p>å°†å†™æ“ä½œå‰ç§»åˆ°MCä¸­ï¼ŒåŒæ—¶åˆ©ç”¨MCçš„è½»é‡çº§çš„é”æœºåˆ¶CASæ¥å®ç°å‡åº“å­˜æ“ä½œã€‚<br>ä¼˜ç‚¹ï¼šè¯»å†™åœ¨å†…å­˜ä¸­ï¼Œæ“ä½œæ€§èƒ½å¿«ï¼Œå¼•å…¥è½»é‡çº§é”ä¹‹åå¯ä»¥ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªå†™å…¥æˆåŠŸï¼Œè§£å†³å‡åº“å­˜é—®é¢˜ã€‚<br>ç¼ºç‚¹ï¼šæ²¡æœ‰å®æµ‹ï¼ŒåŸºäºCASçš„ç‰¹æ€§ä¸çŸ¥é“é«˜å¹¶å‘ä¸‹æ˜¯å¦ä¼šå‡ºç°å¤§é‡æ›´æ–°å¤±è´¥ï¼Ÿä¸è¿‡åŠ é”ä¹‹åè‚¯å®šå¯¹å¹¶å‘æ€§èƒ½ä¼šæœ‰å½±å“ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ4ï¼š"><a href="#è§£å†³æ–¹æ¡ˆ4ï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆ4ï¼š"></a>è§£å†³æ–¹æ¡ˆ4ï¼š</h3><p>å°†æäº¤æ“ä½œå˜æˆä¸¤æ®µå¼ï¼Œå…ˆç”³è¯·åç¡®è®¤ã€‚ç„¶ååˆ©ç”¨Redisçš„åŸå­è‡ªå¢æ“ä½œï¼ˆç›¸æ¯”è¾ƒMySQLçš„è‡ªå¢æ¥è¯´æ²¡æœ‰ç©ºæ´ï¼‰ï¼ŒåŒæ—¶åˆ©ç”¨Redisçš„äº‹åŠ¡ç‰¹æ€§æ¥å‘å·ï¼Œä¿è¯æ‹¿åˆ°å°äºç­‰äºåº“å­˜é˜€å€¼çš„å·çš„äººéƒ½å¯ä»¥æˆåŠŸæäº¤è®¢å•ã€‚ç„¶åæ•°æ®å¼‚æ­¥æ›´æ–°åˆ°DBä¸­ã€‚</p>
<p>ä¼˜ç‚¹ï¼šè§£å†³è¶…å–é—®é¢˜ï¼Œåº“å­˜è¯»å†™éƒ½åœ¨å†…å­˜ä¸­ï¼Œæ•…åŒæ—¶è§£å†³æ€§èƒ½é—®é¢˜ã€‚<br>ç¼ºç‚¹ï¼šç”±äºå¼‚æ­¥å†™å…¥DBï¼Œå¯èƒ½å­˜åœ¨æ•°æ®ä¸ä¸€è‡´ã€‚å¦å¯èƒ½å­˜åœ¨å°‘ä¹°ï¼Œä¹Ÿå°±æ˜¯å¦‚æœæ‹¿åˆ°å·çš„äººä¸çœŸæ­£ä¸‹è®¢å•ï¼Œå¯èƒ½åº“å­˜å‡ä¸º0ï¼Œä½†æ˜¯è®¢å•æ•°å¹¶æ²¡æœ‰è¾¾åˆ°åº“å­˜é˜€å€¼ã€‚</p>
<p> ä¸‰ã€æ€»ç»“</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>ã€å‰ç«¯ä¸‰æ¿æ–§ã€æ‰©å®¹ã€‘ã€é™æµã€‘ã€é™æ€åŒ–ã€‘</div><div class="line"><span class="number">2</span>ã€åç«¯ä¸¤æ¡è·¯ã€å†…å­˜ã€‘+ã€æ’é˜Ÿã€‘</div></pre></td></tr></table></figure>
<h4 id="æµ‹è¯•æ€»ç»“ç»éªŒ"><a href="#æµ‹è¯•æ€»ç»“ç»éªŒ" class="headerlink" title="æµ‹è¯•æ€»ç»“ç»éªŒ"></a>æµ‹è¯•æ€»ç»“ç»éªŒ</h4><p>ç¬¬ä¸€æ¬¡åšæŠ½å¥–æ´»åŠ¨ï¼Œæµ‹è¯•é‚£è¾¹æµ‹è¯•å‡ºå¾ˆå¤šé—®é¢˜ã€‚ ä¸‹é¢æ˜¯é‡åˆ°çš„é—®é¢˜ã€‚</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">æµ‹è¯•ç¬¬ä¸€æ¬¡: è®¿é—®å‹æµ‹å‡ºç°äº†è®¿é—®ç™½å±ã€‚å®šä½ï¼šä»£ç å†™çš„æœ‰é—®é¢˜ã€‚ tomcatéœ€è¦åšä¼˜åŒ–ã€‚ æˆ‘ä»¬ä¸€èˆ¬ç”¨æˆ·é‡ç²‰ä¸åœ¨100W</div><div class="line"></div><div class="line">æµ‹è¯•ç¬¬äºŒæ¬¡ï¼š å‡ºç°æ•°æ®åº“<span class="meta">CPU</span>ç“¶é¢ˆè¿‡é«˜ã€‚ä¸»ä»åŒæ­¥ï¼Œç„¶ååšäº†æ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼Œ redisé›†ç¾¤ç¼“å­˜ã€‚ æœ€ä¸»è¦æ˜¯æ•°æ®åº“SQLè¯­å¥åšäº†ä¼˜åŒ–ã€‚ä¼˜åŒ–äº†æå‡äº†å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚</div><div class="line"></div><div class="line">æµ‹è¯•ç¬¬ä¸‰æ¬¡ï¼šè¿˜æœ‰å‡ºç°äº†<span class="number">503</span>è®¿é—®å—é™äº†ã€‚ åé¢åšäº†nginxä»£ç† é˜²æ­¢åŒä¸€ä¸ª<span class="built_in">IP</span>åŒä¸€ä¸ªæ—¶é—´è¶…è¿‡å¤šå°‘æ¬¡å»è¯·æ±‚ï¼Œä¼šè¢«å—é™ã€‚ ä¸è¿‡è¿™ä¸ªåšDDOSæ”»å‡» æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†å½±å“ç”¨æˆ·åä½“éªŒåº¦ã€‚</div></pre></td></tr></table></figure>
<h4 id="å››ã€éæŠ€æœ¯æ„Ÿæƒ³"><a href="#å››ã€éæŠ€æœ¯æ„Ÿæƒ³" class="headerlink" title="å››ã€éæŠ€æœ¯æ„Ÿæƒ³"></a>å››ã€éæŠ€æœ¯æ„Ÿæƒ³</h4><p>1ã€å›¢é˜Ÿçš„åŠ›é‡æ˜¯æ— ç©·çš„ï¼Œå„ç§å„æ ·çš„è§£å†³æ–¹æ¡ˆï¼ˆå…ˆä¸è°ˆå¯è¡Œæ€§ï¼‰éƒ½æ˜¯åœ¨å°ä¼™ä¼´ä»¬ä¸ƒå˜´å…«èˆŒä¸­è®¨è®ºå‡ºæ¥çš„ã€‚æˆ‘ä»¬éœ€è¦è®©æ‰€æœ‰äººéƒ½å‘å‡ºè‡ªå·±çš„å£°éŸ³ï¼Œä¸è¦ç€æ€¥å»å¦å®šã€‚<br>2ã€ä¼˜åŒ–éœ€è¦ä»æ•´ä½“å±‚é¢å»æ€è€ƒï¼Œä¸è¦åªçº ç»“äºè‡ªå·±è´Ÿè´£çš„éƒ¨åˆ†ï¼Œå¦‚æœåªç›¯ç€ä¸€ä¸ªç‚¹æ€è€ƒï¼Œæœ€åå¾ˆå¯èƒ½å°±èµ°è¿›æ­»èƒ¡åŒä¸­äº†ã€‚<br>3ã€æœ‰å¾ˆå¤šä¸œè¥¿ä»¥ä¸ºè¯»è¿‡äº†å°±æ‡‚äº†ï¼Œå…¶å®ä¸ç„¶ã€‚ä¾ç„¶è¿˜æ˜¯éœ€è¦å®è·µï¼Œå¦åˆ™åˆ«äººçš„çŸ¥è¯†æ°¸è¿œä¸å¯èƒ½å˜æˆè‡ªå·±çš„ã€‚<br>4ã€å¤šæ€è€ƒä¸ºä»€ä¹ˆï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Œä¸è¦æƒ³å½“ç„¶ã€‚åªæœ‰è¿™æ ·æ‰èƒ½æ·±å…¥è¿›å»ï¼Œè€Œä¸æ˜¯ç•™åœ¨è¡¨é¢ã€‚</p>
<h3 id="äº¤æµå­¦ä¹ ï¼š"><a href="#äº¤æµå­¦ä¹ ï¼š" class="headerlink" title="äº¤æµå­¦ä¹ ï¼š"></a>äº¤æµå­¦ä¹ ï¼š</h3><p>ğŸ§  Linux shell_é«˜çº§è¿ç»´æ´¾: <code>459096184</code>    åœˆå­ (ç³»ç»Ÿè¿ç»´-åº”ç”¨è¿ç»´-è‡ªåŠ¨åŒ–è¿ç»´-è™šæ‹ŸåŒ–æŠ€æœ¯ç ”ç©¶æ¬¢è¿åŠ å…¥)<br>ğŸ§  BigData-Exchange School : <code>521621407</code>  åœˆå­ï¼ˆå¤§æ•°æ®è¿ç»´)ï¼ˆHadoopå¼€å‘äººå‘˜)ï¼ˆå¤§æ•°æ®ç ”ç©¶çˆ±å¥½è€…) æ¬¢è¿åŠ å…¥</p>
<p>ç›¸åº”Bidataæœ‰å†…éƒ¨å¾®ä¿¡äº¤æµç¾¤äº’ç›¸å­¦ä¹ ï¼ŒåŠ å…¥QQç¾¤æœ‰é“¾æ¥ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/11/02/è¿ç»´å®‰å…¨/è¿ç»´å®‰å…¨é‡è¦æ€§ï¼šåˆ›ä¸šå…¬å¸å¦‚ä½•ç»´æŠ¤å¥½æœåŠ¡å™¨/">è¿ç»´å®‰å…¨é‡è¦æ€§ï¼šåˆ›ä¸šå…¬å¸å¦‚ä½•ç»´æŠ¤å¥½æœåŠ¡å™¨</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-11-02</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/è¿ç»´å®‰å…¨/">è¿ç»´å®‰å…¨</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Operation-safety/">Operation safety</a>
			</span>
		
	</div>

	

	
		<h3 id="è¿ç»´å®‰å…¨é‡è¦æ€§-åˆ›ä¸šå…¬å¸å¦‚ä½•ç»´æŠ¤å¥½æœåŠ¡å™¨"><a href="#è¿ç»´å®‰å…¨é‡è¦æ€§-åˆ›ä¸šå…¬å¸å¦‚ä½•ç»´æŠ¤å¥½æœåŠ¡å™¨" class="headerlink" title="è¿ç»´å®‰å…¨é‡è¦æ€§:åˆ›ä¸šå…¬å¸å¦‚ä½•ç»´æŠ¤å¥½æœåŠ¡å™¨"></a>è¿ç»´å®‰å…¨é‡è¦æ€§:åˆ›ä¸šå…¬å¸å¦‚ä½•ç»´æŠ¤å¥½æœåŠ¡å™¨</h3><p>2016å¹´ä¸‹åŠå¹´ï¼Œå‹’ç´¢è½¯ä»¶æˆäº†ä¼ä¸šå®‰å…¨çš„ä¸€ä¸ªè‡´å‘½ä¼¤ã€‚å¡å·´æ–¯åŸºåœ¨2016å¹´12æœˆä»½å‘å¸ƒçš„å¹´åº¦çƒ­é—¨äº‹ä»¶ï¼šåŠ å¯†å‹’ç´¢æŠ¥å‘Šæ˜¾ç¤ºï¼Œæˆªæ­¢åˆ°2016å¹´ï¼Œå…¨çƒæœ‰114ä¸ªå›½å®¶å—åˆ°åŠ å¯†å‹’ç´¢äº‹ä»¶çš„å½±å“ï¼Œå…±å‘ç°44000å¤šä¸ªå‹’ç´¢è½¯ä»¶æ ·æœ¬ã€‚äºšä¿¡å®‰å…¨å‘å¸ƒçš„å‹’ç´¢è½¯ä»¶é£é™©ç ”ç©¶æŠ¥å‘Šä¹Ÿæ˜¾ç¤ºï¼Œè¿‘åä¸ªæœˆå†…ï¼Œå…¨çƒä¼ æ’­çš„å‹’ç´¢è½¯ä»¶æ•°é‡å¢é•¿äº†15å€ï¼Œä¸­å›½å‹’ç´¢è½¯ä»¶æ•°é‡å¢é•¿æ›´æ˜¯çªç ´äº†67å€ã€‚</p>
<p>ä¼ä¸šå¦‚é­åˆ°å‹’ç´¢ï¼Œéœ€è¦æŒ‰ç…§è¦æ±‚æ”¯ä»˜â€œèµé‡‘â€ï¼Œå¦åˆ™æ–‡ä»¶å°†æœ‰å¯èƒ½æ°¸è¿œæ— æ³•æ‰“å¼€ã€‚å‹’ç´¢è½¯ä»¶æ¬ºè¯ˆé‡‘é¢å·¨å¤§ï¼Œä¸”é˜²èŒƒå›°éš¾ï¼›é€šå¸¸ï¼Œä¼ä¸šæ”¯å‡ºçš„èµé‡‘ï¼Œä¼šç”¨æ¥å‘å±•ä¸‹ä¸€ä»£å‹’ç´¢è½¯ä»¶ã€‚è¿‘æœŸï¼Œå›½å¤–å®‰å…¨ç ”ç©¶äººå‘˜è¿˜å‘ç°ï¼Œæœ‰å‹’ç´¢è½¯ä»¶ç›®æ ‡é”å®š LinuxæœåŠ¡å™¨ï¼Œè¿˜æœ‰æ–°å‹çš„å‹’ç´¢è½¯ä»¶é›†æˆäº†DDoSåŠŸèƒ½ã€‚å¯é¢„æµ‹ï¼ŒåŠ å¯†å‹’ç´¢äº‹ä»¶ä»ä¼šæŒç»­è”“å»¶ã€‚</p>
<h3 id="é˜¿é‡Œäº‘å®‰å…¨å›¢é˜Ÿæ·±å…¥åˆ†æå‹’ç´¢è½¯ä»¶èƒŒåæˆå› "><a href="#é˜¿é‡Œäº‘å®‰å…¨å›¢é˜Ÿæ·±å…¥åˆ†æå‹’ç´¢è½¯ä»¶èƒŒåæˆå› " class="headerlink" title="é˜¿é‡Œäº‘å®‰å…¨å›¢é˜Ÿæ·±å…¥åˆ†æå‹’ç´¢è½¯ä»¶èƒŒåæˆå› "></a>é˜¿é‡Œäº‘å®‰å…¨å›¢é˜Ÿæ·±å…¥åˆ†æå‹’ç´¢è½¯ä»¶èƒŒåæˆå› </h3><p>é˜¿é‡Œäº‘å®‰å…¨å›¢é˜Ÿç¬¬ä¸€æ—¶é—´å‘ŠçŸ¥ç”¨æˆ·å‹’ç´¢è½¯ä»¶çš„è”“å»¶è¶‹åŠ¿ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›åº”æ€¥åŠ å›ºæ–¹æ¡ˆã€‚åŒæ—¶ï¼Œä»å‹’ç´¢è½¯ä»¶è¡Œä¸ºæ–¹å¼æ–¹é¢ç€æ‰‹ï¼Œç ”å‘é’ˆå¯¹å‹’ç´¢åŠ å¯†è½¯ä»¶çš„æŸ¥æ€åŠŸèƒ½ï¼Œä¿è¯ç”¨æˆ·äº‘ä¸Šå®‰å…¨ã€‚</p>
<p>ç‚¹å‡»é“¾æ¥æŸ¥çœ‹åŠ å¯†å‹’ç´¢è½¯ä»¶é˜²æŠ¤æ–¹æ¡ˆï¼š<a href="https://help.aliyun.com/knowledge_detail/48701.html" target="_blank" rel="external">https://help.aliyun.com/knowledge_detail/48701.html</a></p>
<p>é˜¿é‡Œäº‘å®‰å…¨é€šè¿‡å¯¹ç›®å‰å‹’ç´¢äº‹ä»¶çš„æ•°æ®åˆ†æï¼Œå‘ç°è¢«å‹’ç´¢è½¯ä»¶å…¥ä¾µçš„å—å®³è€…ï¼Œéƒ½æœ‰ä¸¤å¤§å…±æ€§ï¼š</p>
<h3 id="1ã€å…³é”®è´¦å·å­˜åœ¨å¼±å£ä»¤æˆ–æ— è®¤è¯æœºåˆ¶"><a href="#1ã€å…³é”®è´¦å·å­˜åœ¨å¼±å£ä»¤æˆ–æ— è®¤è¯æœºåˆ¶" class="headerlink" title="1ã€å…³é”®è´¦å·å­˜åœ¨å¼±å£ä»¤æˆ–æ— è®¤è¯æœºåˆ¶"></a>1ã€å…³é”®è´¦å·å­˜åœ¨å¼±å£ä»¤æˆ–æ— è®¤è¯æœºåˆ¶</h3><p>Â· æœåŠ¡å™¨ç™»å½•å…³é”®è´¦å·(rootã€administrator)å¯†ç ç®€å•æˆ–ç©ºå¯†ç ï¼›<br>Â· æ•°æ®åº“(Redisã€MongoDBã€MySQLã€MSsql Server)ç­‰ç›¸å…³é‡è¦ä¸šåŠ¡æœåŠ¡ç›´æ¥å¯ä»¥æ— å¯†ç ç™»å½•ã€‚</p>
<h3 id="2ã€æ— è®¿é—®æ§åˆ¶ç­–ç•¥ï¼Œä¸šåŠ¡â€œè£¸å¥”â€åœ¨äº’è”ç½‘ä¸Š"><a href="#2ã€æ— è®¿é—®æ§åˆ¶ç­–ç•¥ï¼Œä¸šåŠ¡â€œè£¸å¥”â€åœ¨äº’è”ç½‘ä¸Š" class="headerlink" title="2ã€æ— è®¿é—®æ§åˆ¶ç­–ç•¥ï¼Œä¸šåŠ¡â€œè£¸å¥”â€åœ¨äº’è”ç½‘ä¸Š"></a>2ã€æ— è®¿é—®æ§åˆ¶ç­–ç•¥ï¼Œä¸šåŠ¡â€œè£¸å¥”â€åœ¨äº’è”ç½‘ä¸Š</h3><p>Â· RDPã€SSHã€Redisã€MongoDBã€MySQLã€MSsql Serverç­‰é«˜å±æœåŠ¡ç›´æ¥è£¸å¥”åœ¨äº’è”ç½‘ä¸Š</p>
<p>ä»¥ä¸Šä¸¤ç±»é—®é¢˜æ˜¯é»‘å®¢åˆ©ç”¨æˆæœ¬è¾ƒä½çš„æ”»å‡»æ–¹å¼ã€‚æ”»å‡»è€…ä¸éœ€è¦è·å–è´¦å·å¯†ç ï¼Œå°±å¯ä»¥å¯¹ä¸šåŠ¡é€ æˆé‡åˆ›ã€‚ç›®å‰ï¼Œå¤§éƒ¨åˆ†å‹’ç´¢è½¯ä»¶æ”»å‡»éƒ½æ˜¯é€šè¿‡Windowså¯æ‰§è¡Œæ–‡ä»¶ä¸­åŒ…å«çš„æ¶æ„ä»£ç å®ç°çš„ï¼Œéšç€å‹’ç´¢è½¯ä»¶çš„ä¸æ–­â€œå˜ç§â€ï¼Œè¿˜å¯èƒ½æ¼”åŒ–å‡ºæ–°çš„æ”»å‡»æ–¹å¼ã€‚</p>
<h4 id="äº‘è®¡ç®—å¹³å°å¦‚ä½•å¸®åŠ©ä¼ä¸šå‡å°‘è¢«å‹’ç´¢é£é™©"><a href="#äº‘è®¡ç®—å¹³å°å¦‚ä½•å¸®åŠ©ä¼ä¸šå‡å°‘è¢«å‹’ç´¢é£é™©" class="headerlink" title="äº‘è®¡ç®—å¹³å°å¦‚ä½•å¸®åŠ©ä¼ä¸šå‡å°‘è¢«å‹’ç´¢é£é™©"></a>äº‘è®¡ç®—å¹³å°å¦‚ä½•å¸®åŠ©ä¼ä¸šå‡å°‘è¢«å‹’ç´¢é£é™©</h4><p>äº‘è®¡ç®—å¹³å°çš„å¨èƒæƒ…æŠ¥èƒ½åŠ›ï¼ŒåŸºç¡€å®‰å…¨åŠŸèƒ½ï¼Œå®‰å…¨äº§å“å’Œä¸“å®¶å›¢é˜Ÿï¼Œèƒ½å¤Ÿæœ‰æ•ˆå¸®åŠ©ä¼ä¸šå‡å°‘é£é™©ã€‚ç›¸æ¯”è‡ªå»ºIDCçš„å°é—­ç¯å¢ƒï¼Œäº‘ä¸Šçš„å®‰å…¨é˜²æŠ¤é€‰æ‹©å’Œç®¡ç†æ‰‹æ®µæ›´åŠ å¤šæ ·åŒ–ï¼Œä¼ä¸šåœ¨äº†è§£ä¸šåŠ¡ç°çŠ¶å’Œé˜²å¾¡æƒ…å†µçš„å‰æä¸‹ï¼Œå¯åœ¨äº‘ä¸Šå®šåˆ¶é˜²å¾¡ç­–ç•¥ï¼Œæ‰¾åˆ°åˆé€‚è‡ªå·±çš„é¢„é˜²æªæ–½ã€‚</p>
<p>äº‘å¹³å°ä¸ºä¼ä¸šæä¾›å¿…è¦çš„å®‰å…¨å·¥å…·ï¼ˆå¦‚å¿«ç…§åŠŸèƒ½ï¼‰ï¼Œå¹¶å…·å¤‡å¼ºå¤§çš„å®¹ç¾ã€æ•°æ®æ¢å¤èƒ½åŠ›ï¼›ç»éªŒä¸°å¯Œçš„å®‰å…¨ä¸“å®¶ï¼Œä¼šé’ˆå¯¹æœ€æ–°çš„æ”»å‡»ç±»å‹åˆ¶å®šç›¸åº”åŠ å›ºæªæ–½ã€‚</p>
<p> åœ¨åº”å¯¹å‹’ç´¢è½¯ä»¶æ”»å‡»çš„åœºæ™¯ä¸‹ï¼Œé˜¿é‡Œäº‘å»ºè®®ä¼ä¸šé‡‡ç”¨ä»¥ä¸‹é˜²æŠ¤æªæ–½ï¼š</p>
<h4 id="å®šæœŸå¤‡ä»½æ•°æ®ã€‚"><a href="#å®šæœŸå¤‡ä»½æ•°æ®ã€‚" class="headerlink" title="å®šæœŸå¤‡ä»½æ•°æ®ã€‚"></a>å®šæœŸå¤‡ä»½æ•°æ®ã€‚</h4><p>åœ¨é˜¿é‡Œäº‘ä¸Šï¼Œå»ºè®®ä¼ä¸šå¼€å¯é•œåƒå’Œå¿«ç…§ï¼Œæ¯å¤©è¿›è¡Œå¤‡ä»½ï¼Œå¹¶ä¿å­˜3ä»½ä»¥ä¸Šçš„ç‰ˆæœ¬ã€‚è¿™æ ·å³ä½¿é‡åˆ°å‹’ç´¢è½¯ä»¶ç—…æ¯’å…¥ä¾µï¼Œä¹Ÿå¯ä»¥è¿…é€Ÿæ¢å¤åˆ°1å¤©å‰çš„ä¸šåŠ¡æ•°æ®ã€‚</p>
<h4 id="å¯¹æœåŠ¡å™¨è¿›è¡Œåˆç†çš„å®‰å…¨åŸŸè§„åˆ’ã€‚"><a href="#å¯¹æœåŠ¡å™¨è¿›è¡Œåˆç†çš„å®‰å…¨åŸŸè§„åˆ’ã€‚" class="headerlink" title="å¯¹æœåŠ¡å™¨è¿›è¡Œåˆç†çš„å®‰å…¨åŸŸè§„åˆ’ã€‚"></a>å¯¹æœåŠ¡å™¨è¿›è¡Œåˆç†çš„å®‰å…¨åŸŸè§„åˆ’ã€‚</h4><p>å»ºè®®ä½¿ç”¨é˜¿é‡Œäº‘çš„VPCæœåŠ¡ï¼Œç”¨äºéš”ç¦»ä¸åŒç§Ÿæˆ·é—´ä¸šåŠ¡åº”ç”¨ã€‚åŒæ—¶å°†ä¸åŒå®‰å…¨çº§åˆ«çš„æœåŠ¡å™¨ï¼Œåˆ’åˆ†åˆ°ä¸åŒçš„å®‰å…¨åŸŸã€‚ä»¥å…ä½å®‰å…¨åŸŸçš„æœåŠ¡å™¨ä¸­æ‹›åï¼Œæ„ŸæŸ“é«˜å®‰å…¨åŸŸçš„å…¶å®ƒæœåŠ¡å™¨ã€‚</p>
<h4 id="æœåŠ¡å£ä»¤å’Œè¿œç¨‹è®¿é—®æƒé™ç®¡ç†ã€‚"><a href="#æœåŠ¡å£ä»¤å’Œè¿œç¨‹è®¿é—®æƒé™ç®¡ç†ã€‚" class="headerlink" title="æœåŠ¡å£ä»¤å’Œè¿œç¨‹è®¿é—®æƒé™ç®¡ç†ã€‚"></a>æœåŠ¡å£ä»¤å’Œè¿œç¨‹è®¿é—®æƒé™ç®¡ç†ã€‚</h4><p>æœåŠ¡å™¨çš„å£ä»¤å»ºè®®è‡³å°‘8ä½ä»¥ä¸Šï¼ŒåŒæ—¶å¿…é¡»åŒ…å«å¤æ‚çš„å­—ç¬¦ã€‚ä¸åº”å‘å¤–ç½‘ç›´æ¥å¼€æ”¾æœåŠ¡å™¨çš„è¿œç¨‹è®¿é—®æƒé™ã€‚å¦‚éœ€è¦è¿œç¨‹è¿ç»´ï¼Œå»ºè®®é€šè¿‡é˜¿é‡Œäº‘.äº‘å¸‚åœºä¸Šçš„IPsecVPNæˆ–SSLVPNçš„è¿œç¨‹è®¿é—®è§£å†³æ–¹æ¡ˆã€‚æ¨èä¼ä¸šåœ¨VPCç½‘å…³å¤„éƒ¨ç½²äº‘å¸‚åœºçš„ä¸“ä¸šé˜²ç«å¢™é•œåƒç³»ç»Ÿï¼šå…¶å¯åŒæ—¶æ”¯æŒVPNçš„è¿œç¨‹è®¿é—®ï¼Œè¿˜å¯å®ç°VPCå—åŒ—å‘æµé‡çš„è®¿é—®æ§åˆ¶ã€‚</p>
<h4 id="æœåŠ¡å™¨å¯¹å¤–åªå¼€æ”¾å¿…è¦çš„ç«¯å£ï¼Œæ§åˆ¶æœåŠ¡å™¨çš„ä¸»åŠ¨å¤–è”è®¿é—®ã€‚"><a href="#æœåŠ¡å™¨å¯¹å¤–åªå¼€æ”¾å¿…è¦çš„ç«¯å£ï¼Œæ§åˆ¶æœåŠ¡å™¨çš„ä¸»åŠ¨å¤–è”è®¿é—®ã€‚" class="headerlink" title="æœåŠ¡å™¨å¯¹å¤–åªå¼€æ”¾å¿…è¦çš„ç«¯å£ï¼Œæ§åˆ¶æœåŠ¡å™¨çš„ä¸»åŠ¨å¤–è”è®¿é—®ã€‚"></a>æœåŠ¡å™¨å¯¹å¤–åªå¼€æ”¾å¿…è¦çš„ç«¯å£ï¼Œæ§åˆ¶æœåŠ¡å™¨çš„ä¸»åŠ¨å¤–è”è®¿é—®ã€‚</h4><p>å¯ä»¥åœ¨VPC ç½‘å…³å¤„çš„é˜²ç«å¢™ï¼Œæˆ–é˜¿é‡Œäº‘å®‰å…¨ç»„é˜²ç«å¢™ä¸Šï¼Œè®¾ç½®æœåŠ¡å™¨å¯¹å¤–è®¿é—®ç«¯å£ã€‚åªå¼€æ”¾å¿…è¦çš„ç«¯å£ï¼Œå‡å°‘æ”»å‡»é¢ï¼Œä¿æŠ¤æœåŠ¡å™¨çš„å®‰å…¨ã€‚åŒæ—¶ï¼Œé€šè¿‡é˜¿é‡Œäº‘å®‰å…¨ç»„é˜²ç«å¢™ç¦æ­¢æœåŠ¡å™¨çš„ä¸»åŠ¨è®¿é—®è¡Œä¸ºï¼Œä»¥é˜»æ­¢å—æ„ŸæŸ“æœåŠ¡å™¨å¯èƒ½ä¼šå°è¯•è¿æ¥C&amp;CæœåŠ¡å™¨ã€‚</p>
<h4 id="æœåŠ¡å™¨å£ä»¤å’Œæ¼æ´çš„é˜²æŠ¤ã€‚"><a href="#æœåŠ¡å™¨å£ä»¤å’Œæ¼æ´çš„é˜²æŠ¤ã€‚" class="headerlink" title="æœåŠ¡å™¨å£ä»¤å’Œæ¼æ´çš„é˜²æŠ¤ã€‚"></a>æœåŠ¡å™¨å£ä»¤å’Œæ¼æ´çš„é˜²æŠ¤ã€‚</h4><p>å»ºè®®ä½¿ç”¨é˜¿é‡Œäº‘äº‘ç›¾çš„å®‰éª‘å£«äº§å“ï¼Œä»¥å¯¹éæ³•ç ´è§£å¯†ç çš„è¡Œä¸ºè¿›è¡Œè¯†åˆ«ï¼Œé¿å…è¢«é»‘å®¢å¤šæ¬¡çŒœè§£å¯†ç è€Œå…¥ä¾µã€‚åŒæ—¶å¯ä»¥ä¸€é”®æ¸…é™¤ç½‘ç«™åé—¨ç»´æŠ¤æœåŠ¡å™¨ç¯å¢ƒçº¯å‡€ï¼Œæ‰¹é‡ä¿®å¤é«˜å±æ¼æ´ã€‚</p>
<h4 id="Webåº”ç”¨æ¼æ´çš„é˜²æŠ¤ã€‚"><a href="#Webåº”ç”¨æ¼æ´çš„é˜²æŠ¤ã€‚" class="headerlink" title="Webåº”ç”¨æ¼æ´çš„é˜²æŠ¤ã€‚"></a>Webåº”ç”¨æ¼æ´çš„é˜²æŠ¤ã€‚</h4><p>å¯¹äºWebç½‘ç«™ï¼Œæ¨èä½¿ç”¨é˜¿é‡Œäº‘äº‘ç›¾WAFï¼Œç”¨äºé˜²å¾¡OWASP å¸¸è§å¨èƒï¼Œå¹¶å¯¹SQLæ³¨å…¥ã€XSSè·¨ç«™ã€Webshellä¸Šä¼ ã€åé—¨éš”ç¦»ä¿æŠ¤ã€å‘½ä»¤æ³¨å…¥ã€éæ³•HTTPåè®®è¯·æ±‚ã€å¸¸è§WebæœåŠ¡å™¨æ¼æ´æ”»å‡»ã€æ ¸å¿ƒæ–‡ä»¶éæˆæƒè®¿é—®ã€è·¯å¾„ç©¿è¶Šã€æ‰«æé˜²æŠ¤ç­‰å®‰å…¨é˜²æŠ¤ï¼›å®šæœŸåŠæ—¶æ›´æ–°0dayè¡¥ä¸ï¼Œå¯¹ç½‘ç«™è¿›è¡Œå®‰å…¨é˜²æŠ¤ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/10/29/è‡ªåŠ¨åŒ–+Jenkins/Jenkins/è®²å¦‚ä½•ç»“åˆjenkins+ ansibleæ„å»ºå‘å¸ƒç³»ç»Ÿ/">è®²å¦‚ä½•ç»“åˆjenkins+ ansibleæ„å»ºå‘å¸ƒç³»ç»Ÿ</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-10-29</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/automation/">automation</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Jenkins/">Jenkins</a>
			</span>
		
	</div>

	

	
		<h1 id="jenkins-ansibleï¼Œæ‰“é€ ä¸€ä¸ªwebæ„å»ºå‘å¸ƒç³»ç»Ÿ"><a href="#jenkins-ansibleï¼Œæ‰“é€ ä¸€ä¸ªwebæ„å»ºå‘å¸ƒç³»ç»Ÿ" class="headerlink" title="jenkins+ansibleï¼Œæ‰“é€ ä¸€ä¸ªwebæ„å»ºå‘å¸ƒç³»ç»Ÿ"></a>jenkins+ansibleï¼Œæ‰“é€ ä¸€ä¸ªwebæ„å»ºå‘å¸ƒç³»ç»Ÿ</h1><p>è‡ªåŠ¨åŒ–è¿™å—æˆ‘ä»¬æµ‹è¯•ç”Ÿäº§ç¯å¢ƒå·²ç»ç”¨èµ·æ¥äº†ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¸»è¦è®²æˆ‘ä»¬å¦‚ä½•å®ç°æ•´ä¸ªwebå‘å¸ƒç³»ç»Ÿï¼Œå¦‚ä½•å®‰è£…é…ç½®çœ‹æˆ‘blogä¸Šé¢æœ‰ã€‚</p>
<p>éœ€è¦äº†è§£å‡ æ¬¾è‡ªåŠ¨åŒ–å·¥å…·ï¼š SaltStack,Ansible,Puppet,jenkins</p>
<p>æ‰€ä»¥æˆ‘ä»¬ç¬¬1æ­¥åšçš„å°±æ˜¯ï¼šç”¨Ansible + Jenkinsæå®šè‡ªåŠ¨å‘å¸ƒã€‚Ansibleæ˜¯ç›¸å¯¹ç®€å•çš„æ‰¹é‡ç®¡ç†å·¥å…·ï¼Œæ”¯æŒæ¨¡æ¿ç®¡ç†ç­‰é«˜çº§åŠŸèƒ½ã€‚æå®šäº†è‡ªåŠ¨å‘å¸ƒï¼Œå¼€å‘çš„æœåŠ¡å™¨éœ€æ±‚å·²ç»æ˜æ˜¾ä¸‹é™ï¼Œåªè¦æŠŠä»£ç æäº¤åˆ° Gitä¸»å¹²ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘å‘å¸ƒã€‚</p>
<p>Gitä½¿ç”¨çš„æ˜¯ GitLabï¼ŒåæœŸåŒæ—¶ä¸ºäº†å®‰å…¨æˆ‘ä»¬åšäº†ä¸€å±‚LDAPä»£ç†ï¼Œæ•ˆæœç›¸å½“äºâ€œå°†å†›ä»¤â€ï¼Œæ“ä½œæœºã€Gitå’ŒJenkinsç”¨ OpenLDAP åšç»Ÿä¸€è®¤è¯ï¼Œåç»­ç”¨åˆ°çš„Redmineã€Grafanaã€Zabbixç­‰éƒ½æ¥å…¥äº†OpenLDAPè®¤è¯ï¼Œæ¯ä¸ªäººéƒ½æœ‰ä¸ªåŠ¨æ€å£ä»¤ï¼Œæ¯æ¬¡éªŒè¯éƒ½éœ€è¦ç”¨åˆ°ã€‚</p>
<h3 id="æµç¨‹ç»“æ„"><a href="#æµç¨‹ç»“æ„" class="headerlink" title="æµç¨‹ç»“æ„"></a>æµç¨‹ç»“æ„</h3><p> ç®€å•ç»˜åˆ¶äº†ä¸‹Jenkinsçš„ä¸€ä¸ªæµç¨‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins4.png" alt=""></figure></p>
<p> æ‹“æ‰‘å›¾</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins5.png" alt=""></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">    &gt; è¯¥å¹³å°ä»¥jenkins ä¸ºä¸­å¿ƒï¼Œç„¶åå›´ç»•ä»–è¿›è¡Œæ‰©å±•ã€‚</div><div class="line"></div><div class="line">    &gt; ä»£ç å…¨å±€é…ç½®é€šè¿‡â€æ–‡ä»¶ç®¡ç†å¹³å°â€ è¿›è¡Œç®¡ç†ã€‚æ¯æ¬¡ä»£ç è¿›è¡Œbuildæ—¶ï¼Œpullä¸€ä¸‹é…ç½®ã€‚ä½¿é…ç½®ä¸ºæœ€æ–°çš„ã€‚</div><div class="line"></div><div class="line">    &gt; å¼€å‘äººå‘˜å°†ä»£ç pushåˆ°gitlabï¼Œå¼€å‘è€…ä¹‹é—´ç›¸äº’reviewä»£ç ã€‚ç„¶åmurgeåˆ°masteråˆ†æ”¯ã€‚jenkinsä¸Šçš„pullä»£ç åˆ°workspaceç©ºé—´ã€‚</div><div class="line"></div><div class="line">     &gt; å®‰è£…ä¸€äº›ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚ </div><div class="line"></div><div class="line">     &gt; ä»£ç å’Œé…ç½®æ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼Œé€šè¿‡rediså­˜å‚¨çš„ç‰ˆæœ¬ä¿¡æ¯åˆ›å»ºç‰ˆæœ¬ã€‚</div><div class="line"></div><div class="line">     &gt; æŠŠå°†è¦å‘å¸ƒçš„ç‰ˆæœ¬æ¨é€åˆ°è¿œç«¯æœºå™¨ï¼ŒreloadæœåŠ¡å®ç°ä¸Šçº¿ã€‚</div><div class="line"></div><div class="line">     &gt; å½“å‘å¸ƒçš„ä»£ç å‡ºç°é—®é¢˜ï¼Œå›æ»šæŒ‡å®šç‰ˆæœ¬(é»˜è®¤å›æ»šä¸Šä¸€ç‰ˆæœ¬)ï¼Œæœ€å¤šå¯å›æ»šä¹‹å‰5ä¸ªç‰ˆæœ¬ã€‚</div><div class="line">``` </div><div class="line"></div><div class="line">ansibleæ˜¯æ–°å‡ºç°çš„è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·ï¼ŒåŸºäºPythonå¼€å‘ï¼Œé›†åˆäº†ä¼—å¤šè¿ç»´å·¥å…·ï¼ˆpuppetã€cfengineã€chefã€funcã€fabricï¼‰çš„ä¼˜ç‚¹ï¼Œå®ç°äº†æ‰¹é‡ç³»ç»Ÿé…ç½®ã€æ‰¹é‡ç¨‹åºéƒ¨ç½²ã€æ‰¹é‡è¿è¡Œå‘½ä»¤ç­‰åŠŸèƒ½ã€‚ansibleæ˜¯åŸºäºæ¨¡å—å·¥ä½œçš„ï¼Œæœ¬èº«æ²¡æœ‰æ‰¹é‡éƒ¨ç½²çš„èƒ½åŠ›ã€‚çœŸæ­£å…·æœ‰æ‰¹é‡éƒ¨ç½²çš„æ˜¯ansibleæ‰€è¿è¡Œçš„æ¨¡å—ï¼Œansibleåªæ˜¯æä¾›ä¸€ç§æ¡†æ¶ã€‚ä¸»è¦åŒ…æ‹¬ï¼š</div><div class="line"></div><div class="line">```bash</div><div class="line">(1)ã€è¿æ¥æ’ä»¶connection pluginsï¼šè´Ÿè´£å’Œè¢«ç›‘æ§ç«¯å®ç°é€šä¿¡ï¼›</div><div class="line">(2)ã€host inventoryï¼šæŒ‡å®šæ“ä½œçš„ä¸»æœºï¼Œæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œé¢å®šä¹‰ç›‘æ§çš„ä¸»æœºï¼›</div><div class="line">(3)ã€å„ç§æ¨¡å—æ ¸å¿ƒæ¨¡å—ã€<span class="built_in">command</span>æ¨¡å—ã€è‡ªå®šä¹‰æ¨¡å—ï¼›</div><div class="line">(4)ã€å€ŸåŠ©äºæ’ä»¶å®Œæˆè®°å½•æ—¥å¿—é‚®ä»¶ç­‰åŠŸèƒ½ï¼›</div><div class="line">(5)ã€playbookï¼šå‰§æœ¬æ‰§è¡Œå¤šä¸ªä»»åŠ¡æ—¶ï¼Œéå¿…éœ€å¯ä»¥è®©èŠ‚ç‚¹ä¸€æ¬¡æ€§è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚</div></pre></td></tr></table></figure>
<p>è¿™é‡Œä¹‹å‰ç”¨Jenkinsä½¿ç”¨èµ·æ¥ã€‚é‡åˆ°ä¸ªéš¾é¢˜è¿™é‡Œåˆ†æå“ªå‡ ç‚¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">githubä½œä¸ºæºä»£ç ä»“åº“ </div><div class="line">jenkinsåšä¸ºæ‰“åŒ…æœåŠ¡å™¨ï¼ŒWebæ§åˆ¶æœåŠ¡å™¨</div><div class="line">åœ¨jenkinsçš„ç³»ç»Ÿé…ç½®é‡Œï¼Œå¯ä»¥æ‰¾åˆ°mavenï¼Œgitï¼ŒJavaç›¸å…³çš„é…ç½®ï¼Œåªè¦å‹¾é€‰äº†ï¼Œåœ¨å¼€æ—¶æ‰§è¡Œjobæ—¶ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½ã€‚</div><div class="line">ansibleæŠŠwaråŒ…ï¼Œå‘å¸ƒåˆ°è¿œç¨‹æœºå™¨</div><div class="line">tomcatæ¯å°æœåŠ¡å™¨ç¯å¢ƒéƒ½éœ€è¦åœ¨ansible /etc/ansible/hostsé…ç½®å¥½ï¼Œè¿™æ ·å¯ä»¥è®©å®ƒè‡ªåŠ¨åŒ–ä¸‹å‘åˆ°å¯¹åº”æœºå™¨ã€‚</div><div class="line">æŠŠjenkinsç”Ÿæˆçš„waråŒ…å‘å¸ƒåˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šã€‚</div><div class="line">è¿›å…¥è¯¥é¡¹ç›®çš„workspaceç›®å½•ä¸‹ä¿å­˜è¯¥playbookçš„ä»“åº“å­ç›®å½•ä¸‹, æ£€æŸ¥ansibleç‰ˆæœ¬, å¹¶æ‰§è¡Œæœ€ç»ˆçš„éƒ¨ç½²å‘½ä»¤.ä¼šä¸ä¼šå‘å¸ƒå‡ºç°ä¹±ç ã€‚</div></pre></td></tr></table></figure>
<p><strong>ç›‘æ§ï¼š</strong></p>
<p>ç”±äºåŸå§‹çš„ç›‘æ§ä¸æ»¡è¶³å¿«é€Ÿå¢é•¿çš„ä¸šåŠ¡ï¼Œæˆ‘è¿™è¾¹éƒ¨ç½²äº†å¼€æºç›‘æ§ç³»ç»Ÿ Zabbixï¼Œè™½ç„¶è¿ç»´èƒ½å¤Ÿå¾ˆå¥½çš„ä½¿ç”¨Zabbixï¼Œä½†å…¶ä»–éƒ¨é—¨åŒäº‹æ€»è§‰å¾—æ˜“ç”¨æ€§ä¸é«˜ã€è€Œä¸”å¾ˆå¤šå®šåˆ¶åŒ–ç›‘æ§å®ç°èµ·æ¥å¾ˆéº»çƒ¦ã€‚è¿˜æ˜¯éœ€è¦æœ‰è¿ç»´å¼€å‘åŒäº‹å¸®å¿™è¾…åŠ©ä¼šæ›´å¥½ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/10/10/è¿ç»´ç¬”è®°/ä¸ªäººæ€»ç»“ï¼šä¸ºä»€è¦å­¦ä¹ dockerï¼Œå¦‚ä½•å­¦ä¹ Docker/">ä¸ªäººæ€»ç»“ï¼šä¸ºä»€è¦å­¦ä¹ dockerï¼Œå¦‚ä½•å­¦ä¹ Docker</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-10-10</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/è¿ç»´ç¬”è®°/">è¿ç»´ç¬”è®°</a>
			</span><br />
		
		
	</div>

	

	
		<p>å­¦ä¹ ä»»ä½•ä¸€ä¸ªå¼€æºæ–°æŠ€æœ¯ï¼Œé¦–å…ˆé—®è‡ªå·±å‡ ä¸ªé—®é¢˜ï¼š</p>
<h6 id="1-ä¸ºä»€è¦å­¦ä¹ å®ƒï¼Ÿ"><a href="#1-ä¸ºä»€è¦å­¦ä¹ å®ƒï¼Ÿ" class="headerlink" title="1. ä¸ºä»€è¦å­¦ä¹ å®ƒï¼Ÿ"></a>1. ä¸ºä»€è¦å­¦ä¹ å®ƒï¼Ÿ</h6><h6 id="2-å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ"><a href="#2-å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ" class="headerlink" title="2. å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ"></a>2. å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ</h6><h6 id="3-å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ"><a href="#3-å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ" class="headerlink" title="3. å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ"></a>3. å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ</h6><h6 id="4-è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#4-è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="4. è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"></a>4. è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</h6><p>æ‹¿æˆ‘ä¸ªäººçš„å­¦ä¹ ç»éªŒæ¥ä¸¾ä¾‹ï¼ˆæœ¬äººä¹‹å‰æ¯”è¾ƒäº†è§£KVMï¼ŒESxi,OpenStackï¼‰</p>
<h3 id="ä¸ºä»€è¦å­¦ä¹ dockerï¼Ÿ"><a href="#ä¸ºä»€è¦å­¦ä¹ dockerï¼Ÿ" class="headerlink" title="ä¸ºä»€è¦å­¦ä¹ dockerï¼Ÿ"></a>ä¸ºä»€è¦å­¦ä¹ dockerï¼Ÿ</h3><p>ä¸ªäººå›ç­”ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">dockeræ˜¯è½»é‡çº§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œdockerä½¿linuxå®¹å™¨æŠ€æœ¯çš„åº”ç”¨æ›´åŠ ç®€å•å’Œæ ‡å‡†åŒ–</div><div class="line">dockerçš„é€Ÿåº¦å¾ˆå¿«,å®¹å™¨å¯åŠ¨æ—¶æ¯«ç§’çº§çš„</div><div class="line">dockerå°†å¼€å‘å’Œè¿ç»´èŒè´£åˆ†æ¸…</div><div class="line">dockerè§£å†³äº†ä¾èµ–åœ°ç‹±é—®é¢˜</div><div class="line">dockeræ”¯æŒå‡ ä¹æ‰€æœ‰æ“ä½œç³»ç»Ÿ</div><div class="line">dockeræœ‰ç€é£é€Ÿå‘å±•çš„ç”Ÿæ€åœˆ</div><div class="line">å¾ˆå¤šITå·¨å¤´é€æ¸åŠ å…¥å’Œæ”¯æŒ</div></pre></td></tr></table></figure>
<p>å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ</p>
<p>å›ç­”ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">äº‘è®¡ç®—æ¦‚å¿µç›¸å…³ï¼ˆrestapi, å¾®æœåŠ¡ï¼ŒOpenStackï¼‰</div><div class="line">Linux ç³»ç»Ÿç®¡ç†ï¼ˆè½¯ä»¶åŒ…ç®¡ç†ï¼Œç”¨æˆ·ç®¡ç†ï¼Œè¿›ç¨‹ç®¡ç†ç­‰ï¼‰</div><div class="line">Linux å†…æ ¸ç›¸å…³ï¼ˆCgroup, namespace ç­‰ï¼‰</div><div class="line">Linux æ–‡ä»¶ç³»ç»Ÿå’Œå­˜å‚¨ç›¸å…³ï¼ˆAUFSï¼ŒBRFS,devicemapper ç­‰ï¼‰</div><div class="line">Linux ç½‘ç»œï¼ˆç½‘æ¡¥ï¼Œveth,iptablesç­‰ï¼‰</div><div class="line">Linuxå®‰å…¨ç›¸å…³ï¼ˆAppmor,Selinux ç­‰ï¼‰</div><div class="line">Linuxè¿›ç¨‹ç®¡ç†ï¼ˆSupervisord,Systemd etc)</div><div class="line">Linuxå®¹å™¨æŠ€æœ¯ï¼ˆLXCç­‰ï¼‰</div><div class="line">å¼€å‘è¯­è¨€ï¼ˆPython, GO,Shell ç­‰ï¼‰</div></pre></td></tr></table></figure>
<p>3.å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">å›ç­”ï¼šä¸ªäººä½“ä¼šæœ€å¥½æœ‰ä¸€ä¸ªå®é™…çš„éœ€æ±‚æˆ–é¡¹ç›®æ¥è¾¹å®è·µè¾¹å­¦ä¹ ï¼Œå…¥é—¨å¯ä»¥å‚è€ƒ</div><div class="line">ï¼ˆç¬¬ä¸€æœ¬dockerä¹¦ï¼‰å†™çš„ä¸é”™ï¼Œéå¸¸é€‚åˆå…¥é—¨ã€‚</div><div class="line"></div><div class="line">é™¤æ­¤ä¹‹å¤–ï¼Œé˜…è¯»ç‰›äººçš„blogæ¯”å¦‚å®˜æ–¹blog http://blog.docker.com/</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œå‚ä¸ç¤¾åŒºäº’åŠ¨ä¹Ÿæ˜¯å¾ˆå¥½çš„å­¦ä¹ æ–¹å¼ã€‚</p>
<p>è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ<br>å›ç­”ï¼šdockeréå¸¸é€‚ç”¨äºdev/test CI/CD åœºæ™¯ï¼Œç”¨å®Œå°±æ‰”ã€‚è¿˜æœ‰å°±æ˜¯PasSäº†ã€‚</p>
<h3 id="ä¸ºä»€è¦å­¦ä¹ Docker"><a href="#ä¸ºä»€è¦å­¦ä¹ Docker" class="headerlink" title="ä¸ºä»€è¦å­¦ä¹ Docker"></a>ä¸ºä»€è¦å­¦ä¹ Docker</h3><ul>
<li><p>1.å­¦ä¹ Dockerï¼Œå¦‚æœæ²¡æœ‰äº‘è®¡ç®—çš„åŸºæœ¬çŸ¥è¯†ï¼Œä»¥åŠå†…æ ¸çš„åŸºæœ¬çŸ¥è¯†ï¼Œé‚£ä¹ˆå­¦ä¹ å¹¶ç†è§£èµ·æ¥ä¼šç¨åƒåŠ›ã€‚ä½œä¸ºå®¹å™¨ï¼ŒDockerå®¹å™¨çš„ä¼˜åŠ¿åœ¨å“ªï¼Œä¸è¶³åœ¨å“ªï¼Œæœ€å¥½äº†è§£å®¹å™¨çš„å®ç°æ˜¯æ€æ ·çš„ï¼ˆç®€å•äº†è§£ï¼‰ï¼›æ‹¥æœ‰é•œåƒç®¡ç†ï¼ŒDockeråˆè¯¥å¦‚ä½•ä½“ç°è½¯ä»¶å¼€å‘ï¼Œé›†æˆï¼Œéƒ¨ç½²ï¼Œå‘å¸ƒï¼Œå†è¿­ä»£çš„è½¯ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†ä¼˜åŠ¿ã€‚ä»¥ä¸Šä¸¤ç‚¹æˆ‘è®¤ä¸ºæœ€ä¸ºå…³é”®ï¼Œæœ‰è¿™ä¸¤æ–¹é¢çš„è®¤è¯†åŠ¿å¿…ä¼šå¯¹ä¹‹åçš„å·¥ä½œå¸®åŠ©å·¨å¤§ã€‚</p>
</li>
<li><p>2.å…³äºå­¦ä¹ èµ„æºï¼Œèµ·ç çš„ç¡¬ä»¶è®¾æ–½æ€»æ˜¯è¦æœ‰çš„ã€‚DockeråŠå…¶ç”Ÿæ€çš„å‘å±•å¾ˆå¿«ï¼Œä¸ä½¿ç”¨çº¯ç†è®ºè‚¯å®šæ”¶æ•ˆç”šå¾®ã€‚å¦å¤–ï¼Œèµ„æºè¿˜åŒ…æ‹¬Dockerå®˜æ–¹ï¼Œå„å¤§ç”µå­åª’ä½“å¹³å°ï¼ŒæŠ€æœ¯è®ºå›ï¼Œå¼€æºç¤¾åŒºç­‰ï¼Œå¾€å¾€å¤§æ‹¿çš„è§‚ç‚¹èƒ½ç‚¹ç ´è‡ªå·±çš„å›°æƒ‘ï¼Œæˆ–è€…è®©è‡ªå·±çŸ¥é“å“ªæ–¹é¢çš„è®¤è¯†è¿˜å¾ˆæ¬ ç¼ºï¼Œä»¥åŠè®©è‡ªå·±å°‘èµ°å¾ˆå¤šçš„å¼¯è·¯ã€‚</p>
</li>
<li><p>3.ä¸ªäººå…´è¶£çš„è¯ï¼Œå½’ç»“ä¸ºå¼ºæ‰­çš„ç“œä¸ç”œã€‚èµ·ç åº”è¯¥è®¤åŒDockerçš„è®¾è®¡ä»·å€¼ï¼Œä»¥åŠDockerçš„æœªæ¥æ½œåŠ›ï¼Œå½“ç„¶æœ‰ä¾æ®çš„æ‰¹åˆ¤Dockerå¹¶å¸¦åŠ¨å¤§å®¶çš„æ€è€ƒï¼Œä¹Ÿæ˜¯æ·±åˆ‡å…³æ³¨çš„è¡¨ç°ã€‚</p>
</li>
<li><p>4.ä¸ªäººå‘å±•æ–¹å‘ï¼Œæˆ‘è®¤ä¸ºå¦‚æœéœ€è¦æŠŠDockerå½“ä½œè½¯ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†å·¥å…·çš„è¯ï¼Œé‚£ç”¨å¥½Dockeræœ€ä¸ºé‡è¦ï¼ŒAPIåŠå‘½ä»¤çš„ç†è§£ä¸ä½¿ç”¨æ˜¯å¿…éœ€çš„ã€‚å¦‚æœä¸“æ³¨ç³»ç»Ÿè®¾è®¡æ–¹é¢ï¼Œé‚£ä¹ˆé™¤Dockerä»¥ä¸Šçš„çŸ¥è¯†ä¸ç»éªŒä¹‹å¤–ï¼Œè‹¥æœ‰Dockeræºç çš„å­¦ä¹ ä¸ç†è§£ï¼Œé‚£ä¹ˆè¿™äº›è‚¯å®šä¼šè®©ä½ çš„Dockeræ°´å¹³æé«˜ä¸€ä¸ªå±‚æ¬¡ã€‚</p>
</li>
</ul>
<ul>
<li><p>å­¦ä¹ Dockerï¼Œæœ€å¤§çš„å¥½å¤„æ˜¯è·Ÿè¿›æ–°æŠ€æœ¯å‘å±•æ–¹å‘ã€‚æˆ‘è§‰å¾—åœ¨æ ¡ç”Ÿåº”è¯¥æ²¡æœ‰å¤šå°‘ç¡¬æ€§éœ€æ±‚åœ¨Dockerçš„ç ”ç©¶ä¸Šï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå­¦æ ¡æ²¡åšå…·ä½“åº”ç”¨è¦æ±‚çš„åŸå› ã€‚æœ€å®é™…çš„åšæ³•æ˜¯çœ‹ä¸€äº›Dockerä½¿ç”¨æ¡ˆä¾‹ï¼Œè‡ªå·±å®è·µå‡ºä¸€äº›ç»éªŒåº”è¯¥ä¼šå†ä»¥åçš„ç¤¾ä¼šå®è·µä¸­èµ·åˆ°ä½œç”¨ã€‚</p>
</li>
<li><p>ç ”ç©¶dockerçš„æºä»£ç ï¼Œåº”è¯¥åˆ°ä½ ä¸‹å®šå†³å¿ƒä»äº‹äº‘è®¡ç®—æ–¹é¢çš„äº‹ä¸šæˆ–è€…ç ”ç©¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦ä»¥ç ”ç©¶è€…çš„èº«ä»½å»åšä»”ç»†çš„æºç åˆ†æçš„å·¥ä½œã€‚</p>
</li>
</ul>
<h4 id="Dockerç«èµ·æ¥çš„çœŸæ­£åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Dockerç«èµ·æ¥çš„çœŸæ­£åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Dockerç«èµ·æ¥çš„çœŸæ­£åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Dockerç«èµ·æ¥çš„çœŸæ­£åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>æˆ‘è®¤ä¸ºæœ‰è¿™ä¹ˆå‡ ç‚¹ï¼Œ</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">æ™®é€šå¼€å‘è€…æœ‰æœºä¼šæ¥è§¦å®¹å™¨æŠ€æœ¯ï¼Œäº«å—å¼€å‘å‘å¸ƒä¸€ä½“åŒ–çš„ä¾¿åˆ©ã€‚</div><div class="line">å®¹å™¨äº‘æ˜¯åŒºåˆ«äºä¼ ç»ŸIaaSæœåŠ¡çš„å¦ä¸€ç§æ›´å¿«é€Ÿæ›´é«˜æ•ˆçš„è½»é‡çº§é€‰æ‹©ã€‚</div><div class="line">åŸºäºé•œåƒçš„ç¬¬äºŒä¸ªGitHubã€<span class="keyword">CI</span>/<span class="keyword">CD</span>æœåŠ¡ã€ä»£ç å‘å¸ƒã€åœ¨çº¿debugã€‚</div></pre></td></tr></table></figure>
<h3 id="äº¤æµå­¦ä¹ ï¼š"><a href="#äº¤æµå­¦ä¹ ï¼š" class="headerlink" title="äº¤æµå­¦ä¹ ï¼š"></a>äº¤æµå­¦ä¹ ï¼š</h3><p>ğŸ§  Linux shell_é«˜çº§è¿ç»´æ´¾: <code>459096184</code>    åœˆå­ (ç³»ç»Ÿè¿ç»´-åº”ç”¨è¿ç»´-è‡ªåŠ¨åŒ–è¿ç»´-è™šæ‹ŸåŒ–æŠ€æœ¯ç ”ç©¶æ¬¢è¿åŠ å…¥)<br>ğŸ§  BigData-Exchange School : <code>521621407</code>  åœˆå­ï¼ˆå¤§æ•°æ®è¿ç»´)ï¼ˆHadoopå¼€å‘äººå‘˜)ï¼ˆå¤§æ•°æ®ç ”ç©¶çˆ±å¥½è€…) æ¬¢è¿åŠ å…¥</p>
<p>ç›¸åº”Bidataæœ‰å†…éƒ¨å¾®ä¿¡äº¤æµç¾¤äº’ç›¸å­¦ä¹ ï¼ŒåŠ å…¥QQç¾¤æœ‰é“¾æ¥ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/09/24/Node.js-npm/Node.jsä½¿ç”¨pm2è¿›ç¨‹å®ˆæŠ¤+keymetricså®æ—¶ç›‘æ§Node.jsç¨‹åº/">Node.jsä½¿ç”¨pm2è¿›ç¨‹å®ˆæŠ¤+keymetricså®æ—¶ç›‘æ§Node.jsç¨‹åº</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-09-24</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Node-js/">Node.js</a>
			</span>
		
	</div>

	

	
		<p>é€šè¿‡pm2èƒ½å®ˆæŠ¤node.jsç¨‹åºæ°¸è¿œåœ¨çº¿ï¼Œåœ¨å®é™…åº”ç”¨ä¸­æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚å¦å¤–ï¼Œpm2é…åˆkeymetricsèƒ½å®æ—¶ç›‘æ§node.jsç¨‹åºçš„è¿è¡Œï¼Œè¾¾åˆ°ç›‘æ§node.jsç¨‹åºçš„ç›®çš„ã€‚</p>
		<p><a class="article__read-more-link" href="/2016/09/24/Node.js-npm/Node.jsä½¿ç”¨pm2è¿›ç¨‹å®ˆæŠ¤+keymetricså®æ—¶ç›‘æ§Node.jsç¨‹åº/">...read more</a></p>
	

	

</article>





	<span class="different-posts">ğŸ“– <a href="/page/6">more posts</a> ğŸ“–</span>



	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2017 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
