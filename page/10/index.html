<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		
	<span class="different-posts different-posts_earlier">ğŸ“– <a href="/page/9">earlier posts</a> ğŸ“–</span>




	<article>
	
		<h1><a href="/2015/12/10/è‡ªåŠ¨åŒ–+Jenkins/saltstack/æœåŠ¡è‡ªåŠ¨åŒ–éƒ¨ç½²å¹³å°ä¹‹Saltstackæ€»ç»“/">è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·-æœåŠ¡è‡ªåŠ¨åŒ–éƒ¨ç½²å¹³å°ä¹‹Saltstackæ€»ç»“</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2015-12-10</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Automation/">Automation</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Saltstack/">Saltstack</a>
			</span>
		
	</div>

	

	
		<h1 id="æœåŠ¡è‡ªåŠ¨åŒ–éƒ¨ç½²å¹³å°ä¹‹Saltstackæ€»ç»“"><a href="#æœåŠ¡è‡ªåŠ¨åŒ–éƒ¨ç½²å¹³å°ä¹‹Saltstackæ€»ç»“" class="headerlink" title="æœåŠ¡è‡ªåŠ¨åŒ–éƒ¨ç½²å¹³å°ä¹‹Saltstackæ€»ç»“"></a>æœåŠ¡è‡ªåŠ¨åŒ–éƒ¨ç½²å¹³å°ä¹‹Saltstackæ€»ç»“</h1><p>Saltstackæ˜¯ä¸€ä¸ªæ–°çš„åŸºç¡€è®¾æ–½ç®¡ç†å·¥å…·ã€‚ç›®å‰å¤„äºå¿«é€Ÿå‘å±•é˜¶æ®µï¼Œå¯ä»¥çœ‹åšæ˜¯å¼ºåŒ–çš„Func+å¼±åŒ–çš„Puppetçš„ç»„åˆã€‚é—´æ¥çš„åæ˜ å‡ºäº†saltstackçš„ä¸¤å¤§åŠŸèƒ½ï¼šè¿œç¨‹æ‰§è¡Œå’Œé…ç½®ç®¡ç†ã€‚</p>
<p>SaltStack ä¿æŒäº†è¾“å…¥ã€è¾“å‡ºã€é…ç½®æ–‡ä»¶çš„ä¸€è‡´æ€§ï¼Œæ‰€æœ‰æ–‡ä»¶å‡ä½¿ç”¨YAMLæ ¼å¼ã€‚ä¸»è¦è´Ÿè´£é…ç½®ç®¡ç†å’Œè¿œç¨‹æ‰§è¡Œï¼ˆåœ¨è¿œç¨‹ä¸»æœºè¿è¡Œé¢„å®šä¹‰æˆ–ä»»æ„çš„å‘½ä»¤ï¼Œä¹Ÿå«è¿œç¨‹æ‰§è¡Œï¼Œè¿™æ˜¯ Saltçš„æ ¸å¿ƒåŠŸèƒ½ã€‚æ¥ä¸‹æ¥çš„é“¾æ¥å±•ç¤ºäº†æ¨¡å—ï¼ˆmoduleï¼‰å’Œè¿”å›å™¨ï¼ˆreturnerï¼‰ï¼Œè¿™æ˜¯è¿œç¨‹æ‰§è¡Œçš„å…³é”®æ‰€åœ¨ã€‚ï¼‰</p>
<p>Saltæ˜¯åŸºäºpythonå†™çš„ç»å…¸C/Sæ¡†æ¶çš„è‡ªåŠ¨åŒ–éƒ¨ç½²å¹³å°ã€‚ç”±Masterå’ŒMinionæ„æˆï¼Œé€šè¿‡ZeroMQè¿›è¡Œé€šä¿¡ã€‚</p>
<p>Masterä¸Minionè®¤è¯</p>
<p>1.minion åœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ï¼Œä¼šåœ¨/etc/salt/pki/minion/ï¼ˆè¯¥è·¯å¾„åœ¨/etc/salt/minioné‡Œé¢è®¾ç½®ï¼‰ä¸‹è‡ªåŠ¨ç”Ÿæˆ minion.pem(private key)å’Œminion.pub(public key)ï¼Œç„¶åå°†minion.pubå‘é€ç»™masterã€‚</p>
<p>2.master åœ¨æ¥æ”¶åˆ°minionçš„public keyåï¼Œé€šè¿‡salt-keyå‘½ä»¤accept minion public keyï¼Œè¿™æ ·åœ¨masterçš„/etc/salt/pki/master/minionsä¸‹çš„å°†ä¼šå­˜æ”¾ä»¥minion idå‘½åçš„public key, ç„¶åmasterå°±èƒ½å¯¹minionå‘é€æŒ‡ä»¤äº†ã€‚</p>
<p>Masterä¸Minionçš„è¿æ¥</p>
<p>Saltstack masterå¯åŠ¨åé»˜è®¤ç›‘å¬4505å’Œ4506ä¸¤ä¸ªç«¯å£ã€‚4505(publish_port)ä¸ºsaltçš„æ¶ˆæ¯å‘å¸ƒç³»ç»Ÿï¼Œ4506(ret_port) ä¸ºsaltå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡çš„ç«¯å£ã€‚å¦‚æœä½¿ç”¨lsofæŸ¥çœ‹4505ç«¯å£ï¼Œä¼šå‘ç°æ‰€æœ‰çš„Minionåœ¨4505ç«¯å£æŒç»­ä¿æŒåœ¨ESTABLISHED</p>
<p>å‚è€ƒæ–‡æ¡£:</p>
<p><a href="http://blog.javachen.com/2013/11/18/study-note-of-saltstack/" target="_blank" rel="external">http://blog.javachen.com/2013/11/18/study-note-of-saltstack/</a>   ç»å…¸æ­å»ºæ¡†æ¶<br><a href="http://www.linuxyw.com/179.html" target="_blank" rel="external">http://www.linuxyw.com/179.html</a>                                                  saltæ­å»ºå‚è€ƒ</p>
<p><a href="http://blog.halfss.com/blog/2013/05/22/yun-wei-zi-dong-hua-zhi-saltxue-xi-bi-ji/" target="_blank" rel="external">http://blog.halfss.com/blog/2013/05/22/yun-wei-zi-dong-hua-zhi-saltxue-xi-bi-ji/</a></p>
<h3 id="saltçš„å®‰è£…ï¼š"><a href="#saltçš„å®‰è£…ï¼š" class="headerlink" title="saltçš„å®‰è£…ï¼š"></a>saltçš„å®‰è£…ï¼š</h3><blockquote>
<p>masterç«¯ï¼š</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#yum install salt-master -y                         saltä¸»æ§ç«¯å®‰è£…</span></div><div class="line"><span class="comment">#vim /etc/salt/master                                saltä¸»é…ç½®æ–‡ä»¶ä¿®æ”¹</span></div><div class="line">interface: æœåŠ¡ç›‘å¬IP</div><div class="line">auto_accept: Trueï¼ˆå¯é€‰ï¼Œkeyé€šè¿‡â€˜salt-key <span class="_">-a</span> keynameâ€™å‘½ä»¤æ‰‹åŠ¨è¿›è¡Œè®¤è¯ï¼‰</div><div class="line">æ³¨æ„ï¼škeyname å°±æ˜¯å®¢æˆ·ç«¯ä¸­è®¾ç½®çš„idæ ‡è¯†(å¯ä»¥æŸ¥çœ‹salt-minionç«¯çš„é…ç½®)</div><div class="line"></div><div class="line"><span class="comment">#salt-master -l debug                                   debugæ¨¡å¼ï¼ŒæŸ¥çœ‹saltéƒ½è¿›è¡Œå“ªäº›æ“ä½œ</span></div><div class="line"><span class="comment">#/etc/init.d/salt-master restart                     é‡å¯saltæœåŠ¡</span></div><div class="line"><span class="comment">#/etc/init.d/salt-master status                      æŸ¥çœ‹çŠ¶æ€</span></div><div class="line"></div><div class="line"><span class="comment">#netstat -antlp | grep 4505                            ç¡®ä¿æ¶ˆæ¯å‘å¸ƒç«¯å£æ­£å¸¸</span></div><div class="line"><span class="comment">#netstat -antlp | grep 4506                            ç¡®ä¿å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡ç«¯å£æ­£å¸¸</span></div><div class="line"></div><div class="line"><span class="comment">#/etc/init.d/salt-master restart</span></div><div class="line"><span class="comment"># /etc/init.d/salt-master status</span></div><div class="line"></div><div class="line"><span class="comment"># salt-key                                                      æŸ¥çœ‹è®¤è¯ç›¸å…³ä¿¡æ¯</span></div><div class="line"><span class="comment"># salt-key -a wy-pe2                                     æ‰‹åŠ¨æ·»åŠ è®¤è¯key(ç»™wy-pe2ä¸»æœºæ·»åŠ è®¤è¯)</span></div><div class="line"></div><div class="line"><span class="comment">#iptables -F                                                   å…³é—­é˜²ç«å¢™ä»¥å…å½±å“è®¤è¯</span></div><div class="line"><span class="comment">#salt-key -a wy-pe2</span></div><div class="line"><span class="comment">#salt-key -L                                                   æŸ¥çœ‹è®¤è¯ä¿¡æ¯(ä¼šæœ‰æ˜¾ç¤ºå·²ç»è®¤è¯å’Œæœªè®¤è¯çš„ç›¸å…³ä¿¡æ¯)</span></div><div class="line">[root@wy-pe1 ~]<span class="comment"># salt-key -L</span></div><div class="line">Accepted Keys:</div><div class="line">wy-pe2                                                                å·²ç»å…è®¸çš„key(è¡¨ç¤ºwy-pe2å·²ç»å…è®¸è®¤è¯äº†)</div><div class="line">Unaccepted Keys:</div><div class="line">Rejected Keys:</div><div class="line"></div><div class="line"><span class="comment">#cd /etc/salt/pki/master/minions                            åœ¨masterä¸­çš„minionsç›®å½•ä¸­ç”Ÿæˆè®¤è¯çš„key</span></div><div class="line"><span class="comment">#setenforce 0                                                            æš‚æ—¶å…³é—­selinux</span></div><div class="line"><span class="comment">#/etc/init.d/salt-master restart</span></div><div class="line"></div><div class="line">æ‰§è¡Œè¿œç¨‹å‘½ä»¤(ä½¿ç”¨saltå†…å»ºçš„æ¨¡å—):</div><div class="line"><span class="comment">#salt â€˜wy-pe2â€² test.ping                                            æµ‹è¯•masterå’Œminionè¿›è¡Œé€šä¿¡(åœ¨masterç«¯è¿›è¡Œpingå“åº”æµ‹è¯•)</span></div><div class="line">[root@wy-pe1 ~]<span class="comment"># salt â€˜wy-pe2â€² test.ping                å¦‚æœèƒ½pingé€šï¼Œåˆ™ä¸ºTrue</span></div><div class="line">wy-pe2:</div><div class="line">True</div><div class="line"></div><div class="line"><span class="comment">#lsof -i:4505                                                               æŸ¥çœ‹åˆ°minionç«¯éƒ½å’Œ4505ä¿æŒå»ºç«‹</span></div><div class="line">[root@wy-pe1 ~]<span class="comment"># lsof -i:4505</span></div><div class="line">COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</div><div class="line">salt-mast 8568 root   12u  IPv4  63217      0t0  TCP *:4505 (LISTEN)</div><div class="line">salt-mast 8568 root   14u  IPv4  65101      0t0  TCP wy-pe1:4505-&gt;wy-pe2:51237 (ESTABLISHED)(è¡¨ç¤ºå»ºç«‹è¿æ¥äº†)</div><div class="line">æ³¨æ„:å¦‚æœè®¤è¯é‚£å—æ²¡åšå¥½ï¼Œå°±ä¼šå½±å“ç›¸å…³çš„é“¾æ¥</div></pre></td></tr></table></figure>
<h2 id="Saltå®¢æˆ·ç«¯å®‰è£…ï¼š"><a href="#Saltå®¢æˆ·ç«¯å®‰è£…ï¼š" class="headerlink" title="Saltå®¢æˆ·ç«¯å®‰è£…ï¼š"></a>Saltå®¢æˆ·ç«¯å®‰è£…ï¼š</h2><blockquote>
<p>minionç«¯å®‰è£…é…ç½®ï¼š</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#yum install salt-minion -y</span></div><div class="line"><span class="comment">#vim /etc/salt/minion                                                ä¿®æ”¹minionå®¢æˆ·ç«¯ä¸»é…ç½®</span></div><div class="line">master: æœåŠ¡ç«¯ä¸»æœºå</div><div class="line">id: å®¢æˆ·ç«¯ä¸»æœºå(å…¶å®ä¹Ÿå°±æ˜¯è®¤è¯keyçš„åå­—)                ç”¨æ¥å’Œmasterè¿›è¡Œè®¤è¯</div><div class="line"><span class="comment">#/etc/init.d/salt-minion restart                             é‡å¯æœåŠ¡</span></div><div class="line"><span class="comment">#cd /etc/salt/pki/minion/                                    åœ¨è¿™ä¸ªç›®å½•åº•ä¸‹ä¼šç”Ÿæˆä¸¤ä¸ªè®¤è¯æ–‡ä»¶(minion.pub minion.pem)</span></div><div class="line"></div><div class="line">salt-minionç«¯ä¸èƒ½æ­£å¸¸å¯åŠ¨çš„è§£å†³æ­¥éª¤:ï¼ˆä¸€èˆ¬å°±æ˜¯iptableså’Œselinuxçš„å½±å“ï¼‰</div><div class="line"><span class="comment">#/etc/init.d/salt-minion restart</span></div><div class="line"><span class="comment"># tail -f /var/log/messages</span></div><div class="line"><span class="comment">#/etc/init.d/salt-minion restart</span></div><div class="line"><span class="comment">#iptables -F</span></div><div class="line"><span class="comment">#tail -f /var/log/salt/minion</span></div><div class="line"><span class="comment">#salt-minion -l debug</span></div><div class="line"><span class="comment">#setenforce 0</span></div><div class="line"><span class="comment">#/etc/init.d/salt-minion restart</span></div><div class="line"></div><div class="line"></div><div class="line">å®‰è£…å®Œæ¯•ï¼Œåœ¨masterå’Œminionè®¤è¯å®Œæ¯•ä¹‹åä¼šåœ¨minionä¸»æœºä¸Šçš„/etc/salt/pki/minion/ç›®å½•åº•ä¸‹ç”Ÿæˆæ–°çš„minion_master.pub</div><div class="line"></div><div class="line">é—®é¢˜1ï¼šæ¡£masterå’Œminionè¿›è¡Œè®¤è¯çš„æ—¶å€™ï¼Œmasteræ²¡æœ‰æ¥æ”¶åˆ°public key(minion)</div><div class="line">(è¿™ä¸ªåœ¨åæ¥çš„é“¾æ¥è¿‡ç¨‹ä¸­ä¼šé€ æˆmasterå’Œminionä¸èƒ½é“¾æ¥)</div><div class="line"></div><div class="line">é—®é¢˜2ï¼šè¾…æœºsalt-minionæ€»æ˜¯åœ¨æŸ¥çœ‹æœåŠ¡çŠ¶æ€çš„æ—¶å€™æ˜¾ç¤ºå¤±è´¥(but pid exitsï¼)</div><div class="line"><span class="comment"># salt-minion -l debug æŸ¥çœ‹saltå®¢æˆ·ç«¯è¯¦ç»†ä¿¡æ¯</span></div></pre></td></tr></table></figure>
<h2 id="saltçš„ç®€å•ä½¿ç”¨ï¼š"><a href="#saltçš„ç®€å•ä½¿ç”¨ï¼š" class="headerlink" title="saltçš„ç®€å•ä½¿ç”¨ï¼š"></a>saltçš„ç®€å•ä½¿ç”¨ï¼š</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">saltå¯ä»¥ç›´æ¥è®©minionæ‰§è¡Œæ¨¡å—å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œshellå‘½ä»¤</div><div class="line">1.salt -C â€˜wy-pe1 and wy-pe2 or wy-peNâ€™ test.ping        -Cè¡¨ç¤ºå¤šå‚æ•°(è¡¨ç¤ºåœ¨æµ‹è¯•å¤šå°ä¸»æœºçš„å­˜æ´»çŠ¶æ€)</div><div class="line"><span class="comment"># salt â€˜*â€™ disk.usage                                                                æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ(ä½¿ç”¨å†…å»ºæ¨¡å—æŸ¥çœ‹æ‰€æœ‰minionç«¯çš„ç£ç›˜ä½¿ç”¨æƒ…å†µ)</span></div><div class="line"><span class="comment">#salt â€˜*â€™ cmd.run â€˜df -hâ€™                                                          ä½¿ç”¨cmd.runç›´æ¥è°ƒç”¨è¿œç¨‹shellå‘½ä»¤(åŠŸèƒ½åŒä¸Š)</span></div><div class="line"><span class="comment"># salt â€˜*â€™ cmd.run â€œcat /root/lallâ€                                            æŸ¥çœ‹å®¢æˆ·ç«¯ä¸»æœºçš„/root/lallæ–‡ä»¶</span></div></pre></td></tr></table></figure>
<h3 id="2-nodegroupå¯¹minionè¿›è¡Œåˆ†ç»„ï¼š"><a href="#2-nodegroupå¯¹minionè¿›è¡Œåˆ†ç»„ï¼š" class="headerlink" title="2.nodegroupå¯¹minionè¿›è¡Œåˆ†ç»„ï¼š"></a>2.nodegroupå¯¹minionè¿›è¡Œåˆ†ç»„ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">nodegroups:</div><div class="line">group1: â€˜L@foo.domain.com,bar.domain.com,baz.domain.com or bl*.domain.comâ€™</div><div class="line">group2: â€˜G@os :Debian and foo.domain.comâ€™</div><div class="line"></div><div class="line">group3:â€™wy-pe2â€²</div><div class="line">è¿›è¡Œåˆ†ç»„æµ‹è¯•ï¼š</div><div class="line"><span class="comment"># salt -N group3 test.ping</span></div><div class="line">wy-pe2:</div><div class="line">True</div></pre></td></tr></table></figure>
<h3 id="3-grainså¯¹minionåŸºæœ¬ä¿¡æ¯çš„ç®¡ç†ï¼š"><a href="#3-grainså¯¹minionåŸºæœ¬ä¿¡æ¯çš„ç®¡ç†ï¼š" class="headerlink" title="3.grainså¯¹minionåŸºæœ¬ä¿¡æ¯çš„ç®¡ç†ï¼š"></a>3.grainså¯¹minionåŸºæœ¬ä¿¡æ¯çš„ç®¡ç†ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">salt â€˜wy-pe2â€² grins.ls                                                            æŸ¥çœ‹grainsåˆ†ç±»</div><div class="line">salt â€˜wy-pe2â€² grins.items                                                      æŸ¥çœ‹minnonåŸºæœ¬ä¿¡æ¯(ç¡¬ä»¶å‚æ•°)</div></pre></td></tr></table></figure>
<p>###4.pillarå¯¹æ•æ„Ÿä¿¡æ¯çš„ç®¡ç†ï¼Œåªæœ‰åŒ¹é…åˆ°çš„èŠ‚ç‚¹æ‰èƒ½è·å–å’Œä½¿ç”¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">é»˜è®¤pillaræ•°æ®å®šä¹‰æ–‡ä»¶å­˜å‚¨è·¯å¾„:/srv/pillar</div><div class="line"></div><div class="line">çŠ¶æ€ç®¡ç†ï¼š</div><div class="line">1.saltåŸºäºminionè¿›è¡ŒçŠ¶æ€çš„ç®¡ç†(state)</div><div class="line">ç±»ä¼¼äºpupetçš„ppæ–‡ä»¶åŠŸèƒ½ï¼Œsaltçš„stateæ–‡ä»¶æ‰©å±•æ–‡ä»¶åä¸º.sls,é‡‡ç”¨çš„æ˜¯å’Œpuppetä¸€æ ·çš„è®¾è®¡æ€è·¯ã€‚å³ä»¥master</div><div class="line">ç«¯çš„æ–‡ä»¶çŠ¶æ€æ¥ç¡®å®šminionç«¯çš„ä¸€äº›çŠ¶æ€ä¿¡æ¯è®¾ç½®ã€‚(å®‰è£…çš„è½¯ä»¶åŒ…ï¼ŒæœåŠ¡çš„è¿è¡ŒçŠ¶æ€ä»¥åŠéœ€è¦åŒæ­¥çš„æ–‡ä»¶é…ç½®)</div><div class="line">æ³¨æ„ï¼šsalté»˜è®¤çš„æ ¹ç›®å½•åœ¨/srv/saltä¸­ï¼Œå¦‚æœæ²¡æœ‰éœ€è¦è¿›è¡Œå»ºç«‹ã€‚</div><div class="line"></div><div class="line">top.slsï¼šè¿™ä¸ªæ–‡ä»¶ç±»ä¼¼äºpuppetçš„site.ppæ–‡ä»¶ï¼Œä½œä¸ºâ€œæœ€é«˜åŒæ­¥â€æ“ä½œçš„å…¥å£æ–‡ä»¶ï¼Œæ‰§è¡Œâ€œæœ€é«˜åŒæ­¥â€æ“ä½œæ—¶ï¼Œå°†ä»æ­¤slsæ–‡ä»¶ä¸­è·å–çŠ¶æ€å¯¹minionè¿›è¡ŒåŒæ­¥</div><div class="line"></div><div class="line">ç¤ºä¾‹ï¼š(æ³¨æ„ï¼Œsaltæ–‡ä»¶å®Œå…¨é‡‡ç”¨ymalæ ¼å¼ï¼Œå¯¹ä»£ç çš„ç¼©è¿›æœ‰ç€ä¸¥æ ¼çš„è¦æ±‚)</div><div class="line"><span class="comment">#vim /srv/salt/servers_package.sls</span></div><div class="line">httpd:                            é¡¹ç›®å</div><div class="line">pkg:                              ç±»å‹</div><div class="line">â€“ installed                    åŠ¨ä½œ(è¡¨ç¤ºå®‰è£…httpdåŒ…)</div><div class="line">service:</div><div class="line">â€“ running</div><div class="line">â€“ <span class="built_in">enable</span>:True</div><div class="line">vim-enhanced:</div><div class="line">pkg:</div><div class="line">â€“ installed</div><div class="line">tomcatç¯å¢ƒ</div><div class="line">openjdk-7-jdk:</div><div class="line">pkg:</div><div class="line">â€“ installed</div><div class="line">tomcat7:</div><div class="line">pkg:</div><div class="line">â€“ installed</div><div class="line">â€“ require:</div><div class="line">â€“ pkg: openjdk-7-jdk</div><div class="line"></div><div class="line"><span class="comment"># salt â€˜wy-pe2â€² state.sls servers_package              æŒ‰ç…§slsæ–‡ä»¶ä¸­çš„é…ç½®å¯¹wy-pe2è¿›è¡ŒæœåŠ¡é…ç½®</span></div></pre></td></tr></table></figure>
<h4 id="ç®¡ç†é…ç½®æ–‡ä»¶"><a href="#ç®¡ç†é…ç½®æ–‡ä»¶" class="headerlink" title="ç®¡ç†é…ç½®æ–‡ä»¶"></a>ç®¡ç†é…ç½®æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">httpd:</div><div class="line">pkg:</div><div class="line">â€“ installed</div><div class="line">file.managed:                                æ–‡ä»¶ç®¡ç†(æ–‡ä»¶åŒæ­¥æ“ä½œ)</div><div class="line">â€“ name: /etc/httpd/conf/httpd.conf</div><div class="line">â€“ <span class="built_in">source</span>: salt://httpd/httpd.conf</div><div class="line"></div><div class="line"><span class="comment"># salt â€˜wy-pe2â€² state.highstate                                åº”ç”¨ä¿®æ”¹(ç»™minionæ°¸ä¹…æ·»åŠ çŠ¶æ€)</span></div><div class="line"></div><div class="line">3.ä½¿ç”¨salt scheduleå¯¹minionè¿›è¡Œå®æ—¶æ›´æ–°ï¼Œè®©minionè‡ªè§‰çš„ä¿æŒæŸä¸ªçŠ¶æ€</div><div class="line"></div><div class="line">4.å®æ—¶ç®¡ç†</div><div class="line">æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸´æ—¶çš„æŸ¥çœ‹æŸä¸ªæœºå™¨ä¸Šçš„æŸä¸ªæ–‡ä»¶ï¼Œæˆ–è€…æ‰§è¡ŒæŸä¸ªå‘½ä»¤</div><div class="line"></div><div class="line">cmd.runæ–¹å¼ï¼š(salt â€˜<span class="variable">$targeting</span>â€™ cmd.run â€˜<span class="variable">$cmd</span>â€™)ç”¨æ¥è¿œç¨‹æ‰§è¡Œshellå‘½ä»¤</div><div class="line"><span class="comment"># salt â€˜wy-pe2â€² cmd.run â€˜ifconfig eth0â€²           æŸ¥çœ‹æŸå°ä¸»æœºçš„ç½‘ç»œæ¥å£</span></div><div class="line"></div><div class="line">cmd.scriptæ–¹å¼ï¼šå¯ä»¥å‘è¿œç¨‹ä¸»æœºæ‰§è¡Œè„šæœ¬</div><div class="line"><span class="comment">#salt â€˜*â€™ cmd.script salt://useradd.sh               å‘minionä¸»æœºä¸Šæ‰§è¡Œuseradd.shè„šæœ¬(salt://æ˜¯saltçš„é»˜è®¤å‘å¸ƒç›®å½•ï¼Œå³/srv/salt)</span></div><div class="line"></div><div class="line">pkg.installæ–¹å¼ï¼šåˆ¶å®šä¸»æœºå®‰è£…è½¯ä»¶</div><div class="line"><span class="comment">#salt â€˜wy-pe2â€² pkg.install vsftpd                     æŒ‡å®šä¸»æœºå®‰è£…è½¯ä»¶</span></div><div class="line"></div><div class="line"><span class="comment"># salt â€˜*â€™ network.interfaces                            æŸ¥çœ‹è¿œç¨‹ä¸»æœºæ¥å£</span></div><div class="line"></div><div class="line"><span class="comment"># salt-cp â€˜wy-pe2â€² salt-cmd /home/xxb2        å¤åˆ¶æ–‡ä»¶åˆ°æŒ‡å®šçš„ç³»ç»Ÿä¸Š(å½“å‰ç›®å½•çš„salt-cmd)</span></div><div class="line">saltæ˜¯ä¸»å‘½ä»¤ï¼Œä¸€èˆ¬ç”¨æ¥æ‰§è¡Œå‘½ä»¤æ¨¡å—ã€‚</div><div class="line">salt-cpç”¨æ¥å¤åˆ¶æ–‡ä»¶åˆ°åˆ¶å®šçš„ç³»ç»Ÿä¸Šå»</div><div class="line">salt-keyç”¨æ¥å’Œminionä¹‹é—´è¿›è¡Œèº«ä»½éªŒè¯</div><div class="line">salt-masterä¸ºæœåŠ¡ç«¯çš„ä¸»å®ˆæŠ¤è¿›ç¨‹ç”¨äºæ§åˆ¶minion</div><div class="line">salt-runä¸ºå‰ç«¯å‘½ä»¤æ‰§è¡Œ</div><div class="line"></div><div class="line">moduleæ–¹å¼ï¼š(æ¨¡å—æŸ¥çœ‹æ–¹å¼<span class="comment">#salt â€˜*â€™ sys.doc)</span></div><div class="line"></div><div class="line"><span class="comment">#salt â€˜*â€™ disk.usage                                    æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ</span></div><div class="line"><span class="comment"># salt â€˜*â€™ grains.item os/osrelease/oscodename</span></div><div class="line"><span class="comment"># salt â€˜*â€™ user(group).info xxb2</span></div><div class="line"><span class="comment"># salt â€˜*â€™ ip.get_interface eth0</span></div><div class="line"><span class="comment">#salt â€˜*â€™ lvm.vgdisplay</span></div></pre></td></tr></table></figure>
<h4 id="saltç›¸å…³ç®¡ç†å‘½ä»¤ï¼š"><a href="#saltç›¸å…³ç®¡ç†å‘½ä»¤ï¼š" class="headerlink" title="saltç›¸å…³ç®¡ç†å‘½ä»¤ï¼š"></a>saltç›¸å…³ç®¡ç†å‘½ä»¤ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">salt-run manage.up                 æŸ¥çœ‹å­˜æ´»çš„minion</div><div class="line">salt-run manage.down            æŸ¥çœ‹æ­»æ‰çš„minion</div><div class="line">salt-run manage.down removekeys=True    æŸ¥çœ‹downæ‰çš„minionï¼Œå¹¶å°†å…¶åˆ é™¤</div><div class="line">salt-run manage.status            æŸ¥çœ‹minionçš„ç›¸å…³çŠ¶æ€</div><div class="line">salt-run manage.versions        æŸ¥çœ‹slatçš„æ‰€æœ‰masterå’Œminionçš„ç‰ˆæœ¬ä¿¡æ¯</div></pre></td></tr></table></figure>
<h2 id="é™„å½•ï¼š"><a href="#é™„å½•ï¼š" class="headerlink" title="é™„å½•ï¼š"></a>é™„å½•ï¼š</h2><h4 id="saltè¯¦ç»†ä½¿ç”¨å‘½ä»¤"><a href="#saltè¯¦ç»†ä½¿ç”¨å‘½ä»¤" class="headerlink" title="saltè¯¦ç»†ä½¿ç”¨å‘½ä»¤"></a>saltè¯¦ç»†ä½¿ç”¨å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div><div class="line">699</div><div class="line">700</div><div class="line">701</div><div class="line">702</div><div class="line">703</div><div class="line">704</div><div class="line">705</div><div class="line">706</div><div class="line">707</div><div class="line">708</div><div class="line">709</div><div class="line">710</div><div class="line">711</div><div class="line">712</div><div class="line">713</div><div class="line">714</div><div class="line">715</div><div class="line">716</div><div class="line">717</div><div class="line">718</div><div class="line">719</div><div class="line">720</div><div class="line">721</div><div class="line">722</div><div class="line">723</div><div class="line">724</div><div class="line">725</div><div class="line">726</div><div class="line">727</div><div class="line">728</div><div class="line">729</div><div class="line">730</div><div class="line">731</div><div class="line">732</div><div class="line">733</div><div class="line">734</div><div class="line">735</div><div class="line">736</div><div class="line">737</div><div class="line">738</div><div class="line">739</div><div class="line">740</div><div class="line">741</div><div class="line">742</div><div class="line">743</div><div class="line">744</div><div class="line">745</div><div class="line">746</div><div class="line">747</div><div class="line">748</div><div class="line">749</div><div class="line">750</div><div class="line">751</div><div class="line">752</div><div class="line">753</div><div class="line">754</div><div class="line">755</div><div class="line">756</div><div class="line">757</div><div class="line">758</div><div class="line">759</div><div class="line">760</div><div class="line">761</div><div class="line">762</div><div class="line">763</div><div class="line">764</div><div class="line">765</div><div class="line">766</div><div class="line">767</div><div class="line">768</div><div class="line">769</div><div class="line">770</div><div class="line">771</div><div class="line">772</div><div class="line">773</div><div class="line">774</div><div class="line">775</div><div class="line">776</div><div class="line">777</div><div class="line">778</div><div class="line">779</div><div class="line">780</div><div class="line">781</div><div class="line">782</div><div class="line">783</div><div class="line">784</div><div class="line">785</div><div class="line">786</div><div class="line">787</div><div class="line">788</div><div class="line">789</div><div class="line">790</div><div class="line">791</div><div class="line">792</div><div class="line">793</div><div class="line">794</div><div class="line">795</div><div class="line">796</div><div class="line">797</div><div class="line">798</div><div class="line">799</div><div class="line">800</div><div class="line">801</div><div class="line">802</div><div class="line">803</div><div class="line">804</div><div class="line">805</div><div class="line">806</div><div class="line">807</div><div class="line">808</div><div class="line">809</div><div class="line">810</div><div class="line">811</div><div class="line">812</div><div class="line">813</div><div class="line">814</div><div class="line">815</div><div class="line">816</div><div class="line">817</div><div class="line">818</div><div class="line">819</div><div class="line">820</div><div class="line">821</div><div class="line">822</div><div class="line">823</div><div class="line">824</div><div class="line">825</div><div class="line">826</div><div class="line">827</div><div class="line">828</div><div class="line">829</div><div class="line">830</div><div class="line">831</div><div class="line">832</div><div class="line">833</div><div class="line">834</div><div class="line">835</div><div class="line">836</div><div class="line">837</div><div class="line">838</div><div class="line">839</div><div class="line">840</div><div class="line">841</div><div class="line">842</div><div class="line">843</div><div class="line">844</div><div class="line">845</div><div class="line">846</div><div class="line">847</div><div class="line">848</div><div class="line">849</div><div class="line">850</div><div class="line">851</div><div class="line">852</div><div class="line">853</div><div class="line">854</div><div class="line">855</div><div class="line">856</div><div class="line">857</div><div class="line">858</div><div class="line">859</div><div class="line">860</div><div class="line">861</div><div class="line">862</div><div class="line">863</div><div class="line">864</div><div class="line">865</div><div class="line">866</div><div class="line">867</div><div class="line">868</div><div class="line">869</div><div class="line">870</div><div class="line">871</div><div class="line">872</div><div class="line">873</div><div class="line">874</div><div class="line">875</div><div class="line">876</div><div class="line">877</div><div class="line">878</div><div class="line">879</div><div class="line">880</div><div class="line">881</div><div class="line">882</div><div class="line">883</div><div class="line">884</div><div class="line">885</div><div class="line">886</div><div class="line">887</div><div class="line">888</div><div class="line">889</div><div class="line">890</div><div class="line">891</div><div class="line">892</div><div class="line">893</div><div class="line">894</div><div class="line">895</div><div class="line">896</div><div class="line">897</div><div class="line">898</div><div class="line">899</div><div class="line">900</div><div class="line">901</div><div class="line">902</div><div class="line">903</div><div class="line">904</div><div class="line">905</div><div class="line">906</div><div class="line">907</div><div class="line">908</div><div class="line">909</div><div class="line">910</div><div class="line">911</div><div class="line">912</div><div class="line">913</div><div class="line">914</div><div class="line">915</div><div class="line">916</div><div class="line">917</div><div class="line">918</div><div class="line">919</div><div class="line">920</div><div class="line">921</div><div class="line">922</div><div class="line">923</div><div class="line">924</div><div class="line">925</div><div class="line">926</div><div class="line">927</div><div class="line">928</div><div class="line">929</div><div class="line">930</div><div class="line">931</div><div class="line">932</div><div class="line">933</div><div class="line">934</div><div class="line">935</div><div class="line">936</div><div class="line">937</div><div class="line">938</div><div class="line">939</div><div class="line">940</div><div class="line">941</div><div class="line">942</div><div class="line">943</div><div class="line">944</div><div class="line">945</div><div class="line">946</div><div class="line">947</div><div class="line">948</div><div class="line">949</div><div class="line">950</div><div class="line">951</div><div class="line">952</div><div class="line">953</div><div class="line">954</div><div class="line">955</div><div class="line">956</div><div class="line">957</div><div class="line">958</div><div class="line">959</div><div class="line">960</div><div class="line">961</div><div class="line">962</div><div class="line">963</div><div class="line">964</div><div class="line">965</div><div class="line">966</div><div class="line">967</div><div class="line">968</div><div class="line">969</div><div class="line">970</div><div class="line">971</div><div class="line">972</div><div class="line">973</div><div class="line">974</div><div class="line">975</div><div class="line">976</div><div class="line">977</div><div class="line">978</div><div class="line">979</div><div class="line">980</div><div class="line">981</div><div class="line">982</div><div class="line">983</div><div class="line">984</div><div class="line">985</div><div class="line">986</div><div class="line">987</div><div class="line">988</div><div class="line">989</div><div class="line">990</div><div class="line">991</div><div class="line">992</div><div class="line">993</div><div class="line">994</div><div class="line">995</div><div class="line">996</div><div class="line">997</div><div class="line">998</div><div class="line">999</div><div class="line">1000</div><div class="line">1001</div><div class="line">1002</div><div class="line">1003</div><div class="line">1004</div><div class="line">1005</div><div class="line">1006</div><div class="line">1007</div><div class="line">1008</div><div class="line">1009</div><div class="line">1010</div><div class="line">1011</div><div class="line">1012</div><div class="line">1013</div><div class="line">1014</div><div class="line">1015</div><div class="line">1016</div><div class="line">1017</div><div class="line">1018</div><div class="line">1019</div><div class="line">1020</div><div class="line">1021</div><div class="line">1022</div><div class="line">1023</div><div class="line">1024</div><div class="line">1025</div><div class="line">1026</div><div class="line">1027</div><div class="line">1028</div><div class="line">1029</div><div class="line">1030</div><div class="line">1031</div><div class="line">1032</div><div class="line">1033</div><div class="line">1034</div></pre></td><td class="code"><pre><div class="line">salt â€˜*â€™ acl.delfacl user myuser /tmp/house/kitchen</div><div class="line">salt â€˜*â€™ acl.delfacl default:group mygroup /tmp/house/kitchen</div><div class="line">salt â€˜*â€™ acl.delfacl d:u myuser /tmp/house/kitchen</div><div class="line">salt â€˜*â€™ acl.delfacl g myuser /tmp/house/kitchen /tmp/house/livingroom</div><div class="line">salt â€˜*â€™ acl.getfacl /tmp/house/kitchen</div><div class="line">salt â€˜*â€™ acl.getfacl /tmp/house/kitchen /tmp/house/livingroom</div><div class="line">salt â€˜*â€™ acl.addfacl user myuser rwx /tmp/house/kitchen</div><div class="line">salt â€˜*â€™ acl.addfacl default:group mygroup rx /tmp/house/kitchen</div><div class="line">salt â€˜*â€™ acl.addfacl d:u myuser 7 /tmp/house/kitchen</div><div class="line">salt â€˜*â€™ acl.addfacl g mygroup 0 /tmp/house/kitchen /tmp/house/livingroom</div><div class="line">salt â€˜*â€™ acl.version</div><div class="line">salt â€˜*â€™ acl.wipefacls /tmp/house/kitchen</div><div class="line">salt â€˜*â€™ acl.wipefacls /tmp/house/kitchen /tmp/house/livingroom</div><div class="line">salt â€˜*â€™ aliases.get_target <span class="built_in">alias</span></div><div class="line">salt â€˜*â€™ aliases.has_target <span class="built_in">alias</span> target</div><div class="line">salt â€˜*â€™ aliases.list_aliases</div><div class="line">salt â€˜*â€™ aliases.rm_alias <span class="built_in">alias</span></div><div class="line">salt â€˜*â€™ aliases.set_target <span class="built_in">alias</span> target</div><div class="line">salt â€˜*â€™ alternatives.auto name</div><div class="line">salt â€˜*â€™ alternatives.check_installed name path</div><div class="line">salt â€˜*â€™ alternatives.display editor</div><div class="line">salt â€˜*â€™ alternatives.install editor /usr/bin/editor /usr/bin/emacs23 50</div><div class="line">salt â€˜*â€™ alternatives.remove name path</div><div class="line">salt â€˜*â€™ alternatives.set name path</div><div class="line">salt â€˜*â€™ alternatives.show_current editor</div><div class="line">salt â€˜*â€™ apache.config /etc/httpd/conf.d/ports.conf                 config=â€[&#123;â€˜Listen<span class="string">': â€™22â€™&#125;]â€</span></div><div class="line">salt â€˜*â€™ apache.directives</div><div class="line">salt â€˜*â€™ apache.fullversion</div><div class="line">salt â€˜*â€™ apache.modules</div><div class="line">salt â€˜*â€™ apache.server_status</div><div class="line">salt â€˜*â€™ apache.server_status other-profile</div><div class="line">salt â€˜*â€™ apache.servermods</div><div class="line">salt â€˜*â€™ apache.signal restart</div><div class="line">salt â€˜*â€™ apache.useradd /etc/httpd/htpasswd larry badpassword</div><div class="line">salt â€˜*â€™ apache.useradd /etc/httpd/htpasswd larry badpass opts=ns</div><div class="line">salt â€˜*â€™ apache.userdel /etc/httpd/htpasswd larry</div><div class="line">salt â€˜*â€™ apache.version</div><div class="line">salt â€˜*â€™ archive.gunzip template=jinja /tmp/&#123;&#123;grains.id&#125;&#125;.txt.gz</div><div class="line">salt â€˜*â€™ archive.gunzip /tmp/sourcefile.txt.gz</div><div class="line">salt â€˜*â€™ archive.gzip template=jinja /tmp/&#123;&#123;grains.id&#125;&#125;.txt</div><div class="line">salt â€˜*â€™ archive.gzip /tmp/sourcefile.txt</div><div class="line">salt â€˜*â€™ archive.rar template=jinja /tmp/rarfile.rar â€˜/tmp/sourcefile1,/tmp/&#123;&#123;grains.id&#125;&#125;.txtâ€™</div><div class="line">salt â€˜*â€™ archive.rar /tmp/rarfile.rar /tmp/sourcefile1,/tmp/sourcefile2</div><div class="line">salt â€˜*â€™ archive.tar cjvf /tmp/salt.tar.bz2 &#123;&#123;grains.saltpath&#125;&#125; template=jinja</div><div class="line">salt â€˜*â€™ archive.tar cjvf /tmp/tarfile.tar.bz2 /tmp/file_1,/tmp/file_2</div><div class="line">salt â€˜*â€™ archive.tar xf foo.tar dest=/target/directory</div><div class="line">salt â€˜*â€™ archive.unrar template=jinja /tmp/rarfile.rar /tmp/&#123;&#123;grains.id&#125;&#125;/ excludes=file_1,file_2</div><div class="line">salt â€˜*â€™ archive.unrar /tmp/rarfile.rar /home/strongbad/ excludes=file_1,file_2</div><div class="line">salt â€˜*â€™ archive.unzip template=jinja /tmp/zipfile.zip /tmp/&#123;&#123;grains.id&#125;&#125;/ excludes=file_1,file_2</div><div class="line">salt â€˜*â€™ archive.unzip /tmp/zipfile.zip /home/strongbad/ excludes=file_1,file_2</div><div class="line">salt â€˜*â€™ archive.zip template=jinja /tmp/zipfile.zip /tmp/sourcefile1,/tmp/&#123;&#123;grains.id&#125;&#125;.txt</div><div class="line">salt â€˜*â€™ archive.zip /tmp/zipfile.zip /tmp/sourcefile1,/tmp/sourcefile2</div><div class="line">salt â€˜*â€™ extfs.dump /dev/sda1</div><div class="line">salt â€˜*â€™ blockdev.tune /dev/sda1 read-ahead=1024 read-write=True</div><div class="line">salt â€˜*â€™ blockdev.wipe /dev/sda1</div><div class="line">salt â€˜*â€™ bridge.add br0</div><div class="line">salt â€˜*â€™ bridge.addif br0 eth0</div><div class="line">salt â€˜*â€™ bridge.delete br0</div><div class="line">salt â€˜*â€™ bridge.delif br0 eth0</div><div class="line">salt â€˜*â€™ bridge.find_interfaces eth0 [eth1â€¦]</div><div class="line">salt â€˜*â€™ bridge.interfaces br0</div><div class="line">salt â€˜*â€™ bridge.list</div><div class="line">salt â€˜*â€™ bridge.show</div><div class="line">salt â€˜*â€™ bridge.show br0</div><div class="line">salt â€˜*â€™ bridge.stp br0 enable</div><div class="line">salt â€˜*â€™ bridge.stp br0 disable</div><div class="line">salt â€˜*â€™ bridge.stp bridge0 enable fxp0</div><div class="line">salt â€˜*â€™ bridge.stp bridge0 disable fxp0</div><div class="line">salt â€˜*â€™ buildout.bootstrap /srv/mybuildout</div><div class="line">salt â€˜*â€™ buildout.buildout /srv/mybuildout</div><div class="line">salt â€˜*â€™ buildout.run_buildout /srv/mybuildout</div><div class="line">salt â€˜*â€™ buildout.upgrade_bootstrap /srv/mybuildout</div><div class="line">salt â€˜*â€™ cloud.action start instance=myinstance</div><div class="line">salt â€˜*â€™ cloud.action stop instance=myinstance</div><div class="line">salt â€˜*â€™ cloud.action show_image provider=my-ec2-config             image=ami-1624987f</div><div class="line">salt â€˜*â€™ cloud.destroy myinstance</div><div class="line">salt â€˜*â€™ cloud.full_query</div><div class="line">salt â€˜*â€™ cloud.list_images my-gce-config</div><div class="line">salt â€˜*â€™ cloud.list_locations my-gce-config</div><div class="line">salt â€˜*â€™ cloud.list_sizes my-gce-config</div><div class="line">salt â€˜*â€™ cloud.profile my-gce-config myinstance</div><div class="line">salt â€˜*â€™ cloud.query</div><div class="line">salt â€˜*â€™ cloud.query list_nodes_full</div><div class="line">salt â€˜*â€™ cloud.query list_nodes_select</div><div class="line">salt â€˜*â€™ cloud.select_query</div><div class="line">salt â€˜*â€™ cmd.exec_code ruby â€˜puts â€œcheeseâ€â€˜</div><div class="line">salt â€˜*â€™ cmd.has_exec cat</div><div class="line">salt â€˜*â€™ cmd.retcode â€œfile /bin/bashâ€</div><div class="line">salt â€˜*â€™ cmd.retcode template=jinja â€œfile &#123;&#123;grains.pythonpath[0]&#125;&#125;/pythonâ€</div><div class="line">salt â€˜*â€™ cmd.retcode â€œgrep fâ€ stdin=â€™one\ntwo\nthree\nfour\nfive\nâ€™</div><div class="line">salt â€˜*â€™ cmd.run â€œls -l | awk â€˜/foo/&#123;print \$2&#125;'â€</div><div class="line">salt â€˜*â€™ cmd.run template=jinja â€œls <span class="_">-l</span> /tmp/&#123;&#123;grains.id&#125;&#125; | awk â€˜/foo/&#123;<span class="built_in">print</span> \<span class="variable">$2</span>&#125;<span class="string">'â€</span></div><div class="line">salt â€˜*â€™ cmd.run â€œGet-ChildItem C:\ â€ shell=â€™powershellâ€™</div><div class="line">salt â€˜*â€™ cmd.run â€œgrep fâ€ stdin=â€™one\ntwo\nthree\nfour\nfive\nâ€™</div><div class="line">salt â€˜*â€™ cmd.run cmd=â€™sed -e s/=/:/gâ€™</div><div class="line">salt â€˜*â€™ cmd.run_all â€œls -l | awk â€˜/foo/&#123;print \$2&#125;'â€</div><div class="line">salt â€˜*â€™ cmd.run_all template=jinja â€œls <span class="_">-l</span> /tmp/&#123;&#123;grains.id&#125;&#125; | awk â€˜/foo/&#123;<span class="built_in">print</span> \<span class="variable">$2</span>&#125;<span class="string">'â€</span></div><div class="line">salt â€˜*â€™ cmd.run_all â€œgrep fâ€ stdin=â€™one\ntwo\nthree\nfour\nfive\nâ€™</div><div class="line">salt â€˜*â€™ cmd.run_chroot /var/lib/lxc/container_name/rootfs â€˜sh /tmp/bootstrap.shâ€™</div><div class="line">salt â€˜*â€™ cmd.run_stderr â€œls -l | awk â€˜/foo/&#123;print \$2&#125;'â€</div><div class="line">salt â€˜*â€™ cmd.run_stderr template=jinja â€œls <span class="_">-l</span> /tmp/&#123;&#123;grains.id&#125;&#125; | awk â€˜/foo/&#123;<span class="built_in">print</span> \<span class="variable">$2</span>&#125;<span class="string">'â€</span></div><div class="line">salt â€˜*â€™ cmd.run_stderr â€œgrep fâ€ stdin=â€™one\ntwo\nthree\nfour\nfive\nâ€™</div><div class="line">salt â€˜*â€™ cmd.run_stdout â€œls -l | awk â€˜/foo/&#123;print \$2&#125;'â€</div><div class="line">salt â€˜*â€™ cmd.run_stdout template=jinja â€œls <span class="_">-l</span> /tmp/&#123;&#123;grains.id&#125;&#125; | awk â€˜/foo/&#123;<span class="built_in">print</span> \<span class="variable">$2</span>&#125;<span class="string">'â€</span></div><div class="line">salt â€˜*â€™ cmd.run_stdout â€œgrep fâ€ stdin=â€™one\ntwo\nthree\nfour\nfive\nâ€™</div><div class="line">salt â€˜*â€™ cmd.script salt://scripts/runme.sh</div><div class="line">salt â€˜*â€™ cmd.script salt://scripts/runme.sh â€˜arg1 arg2 â€œarg 3â€³â€˜</div><div class="line">salt â€˜*â€™ cmd.script salt://scripts/windows_task.ps1 args=â€™ -Input c:\tmp\infile.txtâ€™ shell=â€™powershellâ€™</div><div class="line">salt â€˜*â€™ cmd.script salt://scripts/runme.sh stdin=â€™one\ntwo\nthree\nfour\nfive\nâ€™</div><div class="line">salt â€˜*â€™ cmd.script_retcode salt://scripts/runme.sh</div><div class="line">salt â€˜*â€™ cmd.script_retcode salt://scripts/runme.sh stdin=â€™one\ntwo\nthree\nfour\nfive\nâ€™</div><div class="line">salt â€˜*â€™ cmd.tty tty0 â€˜This is a testâ€™</div><div class="line">salt â€˜*â€™ cmd.tty pts3 â€˜This is a testâ€™</div><div class="line">salt â€˜*â€™ cmd.which cat</div><div class="line">salt â€˜*â€™ cmd.which_bin â€˜[pip2, pip, pip-python]â€™</div><div class="line">salt â€˜*â€™ composer.install /var/www/application</div><div class="line">salt â€˜*â€™ composer.install /var/www/application             no_dev=True optimize=True</div><div class="line">salt â€˜*â€™ config.backup_mode</div><div class="line">salt â€˜*â€™ config.dot_vals host</div><div class="line">salt â€˜*â€™ config.get pkg:apache</div><div class="line">salt â€˜*â€™ config.manage_mode</div><div class="line">salt â€˜*â€™ config.merge schedule</div><div class="line">salt â€˜*â€™ config.option redis.host</div><div class="line">salt â€˜*â€™ config.valid_fileproto salt://path/to/file</div><div class="line">salt â€˜*â€™ cp.cache_dir salt://path/to/dir</div><div class="line">salt â€˜*â€™ cp.cache_dir salt://path/to/dir include_pat=â€™E@*.py$â€™</div><div class="line">salt â€˜*â€™ cp.cache_file salt://path/to/file</div><div class="line">salt â€˜*â€™ cp.cache_files salt://pathto/file1,salt://pathto/file1</div><div class="line">salt â€˜*â€™ cp.cache_local_file /etc/hosts</div><div class="line">salt â€˜*â€™ cp.cache_master</div><div class="line">salt â€˜*â€™ cp.get_dir salt://path/to/dir/ /minion/dest</div><div class="line">salt â€˜*â€™ cp.get_file salt://path/to/file /minion/dest</div><div class="line">salt â€˜*â€™ cp.get_file â€œsalt://&#123;&#123;grains.os&#125;&#125;/vimrcâ€ /etc/vimrc template=jinja</div><div class="line">salt â€˜*â€™ cp.get_file_str salt://my/file</div><div class="line">salt â€˜*â€™ cp.get_template salt://path/to/template /minion/dest</div><div class="line">salt â€˜*â€™ cp.get_url salt://my/file /tmp/mine</div><div class="line">salt â€˜*â€™ cp.get_url http://www.slashdot.org /tmp/index.html</div><div class="line">salt â€˜*â€™ cp.hash_file salt://path/to/file</div><div class="line">salt â€˜*â€™ cp.is_cached salt://path/to/file</div><div class="line">salt â€˜*â€™ cp.list_master</div><div class="line">salt â€˜*â€™ cp.list_master_dirs</div><div class="line">salt â€˜*â€™ cp.list_master_symlinks</div><div class="line">salt â€˜*â€™ cp.list_minion</div><div class="line">salt â€˜*â€™ cp.list_states</div><div class="line">salt â€˜*â€™ cp.push /etc/fstab</div><div class="line">salt â€˜*â€™ cp.push /usr/lib/mysql</div><div class="line">salt â€˜*â€™ cp.push_dir /etc/modprobe.d/ glob=â€™*.confâ€™</div><div class="line">salt â€˜*â€™ cron.list_tab root</div><div class="line">salt â€˜*â€™ cron.list_tab root</div><div class="line">salt â€˜*â€™ cron.raw_cron root</div><div class="line">salt â€˜*â€™ cron.rm_job root /usr/local/weekly</div><div class="line">salt â€˜*â€™ cron.rm_job root /usr/bin/foo dayweek=1</div><div class="line">salt â€˜*â€™ cron.rm_env root MAILTO</div><div class="line">salt â€˜*â€™ cron.rm_job root /usr/local/weekly</div><div class="line">salt â€˜*â€™ cron.rm_job root /usr/bin/foo dayweek=1</div><div class="line">salt â€˜*â€™ cron.set_env root MAILTO user@example.com</div><div class="line">salt â€˜*â€™ cron.set_job root â€˜*â€™ â€˜*â€™ â€˜*â€™ â€˜*â€™ 1 /usr/local/weekly</div><div class="line">salt â€˜*â€™ cron.set_special root @hourly â€˜echo foobarâ€™</div><div class="line">salt â€˜*â€™ cron.write_cron_file root /tmp/new_cron</div><div class="line">salt â€˜*â€™ cron.write_cron_file_verbose root /tmp/new_cron</div><div class="line">salt â€˜*â€™ daemontools.available foo</div><div class="line">salt â€˜*â€™ daemontools.full_restart &lt;service name&gt;</div><div class="line">salt â€˜*â€™ daemontools.get_all</div><div class="line">salt â€˜*â€™ daemontools.missing foo</div><div class="line">salt â€˜*â€™ daemontools.reload &lt;service name&gt;</div><div class="line">salt â€˜*â€™ daemontools.restart &lt;service name&gt;</div><div class="line">salt â€˜*â€™ daemontools.start &lt;service name&gt;</div><div class="line">salt â€˜*â€™ daemontools.status &lt;service name&gt;</div><div class="line">salt â€˜*â€™ daemontools.stop &lt;service name&gt;</div><div class="line">salt â€˜*â€™ daemontools.term &lt;service name&gt;</div><div class="line">salt â€˜*â€™ data.cas &lt;key&gt; &lt;value&gt; &lt;old_value&gt;</div><div class="line">salt â€˜*â€™ data.clear</div><div class="line">salt â€˜*â€™ data.dump â€˜&#123;â€˜eggs': â€˜spamâ€™&#125;â€™</div><div class="line">salt â€˜*â€™ data.getval &lt;key&gt;</div><div class="line">salt â€˜*â€™ data.getvals &lt;key&gt; [&lt;key&gt; â€¦]</div><div class="line">salt â€˜*â€™ data.load</div><div class="line">salt â€˜*â€™ data.update &lt;key&gt; &lt;value&gt;</div><div class="line">salt â€˜*â€™ defaults.get core:users:root</div><div class="line">salt â€˜*â€™ disk.blkid</div><div class="line">salt â€˜*â€™ disk.blkid /dev/sda</div><div class="line">salt â€˜*â€™ disk.inodeusage</div><div class="line">salt â€˜*â€™ disk.percent /var</div><div class="line">salt â€˜*â€™ disk.usage</div><div class="line">salt â€˜*â€™ django.collectstatic &lt;settings_module&gt;</div><div class="line">salt â€˜*â€™ django.command &lt;settings_module&gt; &lt;<span class="built_in">command</span>&gt;</div><div class="line">salt â€˜*â€™ django.createsuperuser &lt;settings_module&gt; user user@example.com</div><div class="line">salt â€˜*â€™ django.loaddata &lt;settings_module&gt; &lt;comma delimited list of fixtures&gt;</div><div class="line">salt â€˜*â€™ django.syncdb &lt;settings_module&gt;</div><div class="line">salt â€˜*â€™ dnsmasq.version</div><div class="line">salt â€˜*â€™ dnsmasq.get_config</div><div class="line">salt â€˜*â€™ dnsmasq.get_config file=/etc/dnsmasq.conf</div><div class="line">salt â€˜*â€™ dnsmasq.set_config domain=mydomain.com</div><div class="line">salt â€˜*â€™ dnsmasq.set_config follow=False domain=mydomain.com</div><div class="line">salt â€˜*â€™ dnsmasq.set_config file=/etc/dnsmasq.conf domain=mydomain.com</div><div class="line">salt â€˜*â€™ dnsmasq.version</div><div class="line">salt â€˜*â€™ dnsutil.hosts_append /etc/hosts 127.0.0.1 ad1.yuk.co,ad2.yuk.co</div><div class="line">salt â€˜*â€™ dnsutil.hosts_remove /etc/hosts ad1.yuk.co</div><div class="line">salt â€˜*â€™ dnsutil.hosts_remove /etc/hosts ad2.yuk.co,ad1.yuk.co</div><div class="line">salt â€˜*â€™ dnsutil.parse_hosts</div><div class="line">salt â€˜*â€™ environ.get foo</div><div class="line">salt â€˜*â€™ environ.get baz default=False</div><div class="line">salt â€˜*â€™ environ.has_value foo</div><div class="line">salt â€˜*â€™ environ.item foo</div><div class="line">salt â€˜*â€™ environ.item â€˜[foo, baz]â€™ default=None</div><div class="line">salt â€˜*â€™ environ.items</div><div class="line">salt â€˜*â€™ environ.setenv â€˜&#123;â€œfooâ€: â€œbarâ€, â€œbazâ€: â€œquuxâ€&#125;â€™</div><div class="line">salt â€˜*â€™ environ.setenv â€˜&#123;â€œaâ€: â€œbâ€, â€œcâ€: False&#125;â€™ false_unsets=True</div><div class="line">salt â€˜*â€™ environ.setval foo bar</div><div class="line">salt â€˜*â€™ environ.setval baz val=False false_unsets=True</div><div class="line">salt â€˜*â€™ event.fire â€˜&#123;â€œdataâ€:â€my event dataâ€&#125;â€™ â€˜tagâ€™</div><div class="line">salt â€˜*â€™ event.fire_master â€˜&#123;â€œdataâ€:â€my event dataâ€&#125;â€™ â€˜tagâ€™</div><div class="line">salt â€˜*â€™ extfs.attributes /dev/sda1</div><div class="line">salt â€˜*â€™ extfs.blocks /dev/sda1</div><div class="line">salt â€˜*â€™ extfs.dump /dev/sda1</div><div class="line">salt â€˜*â€™ extfs.mkfs /dev/sda1 fs_type=ext4 opts=â€™acl,noexecâ€™</div><div class="line">salt â€˜*â€™ extfs.tune /dev/sda1 force=True label=wildstallyns opts=â€™acl,noexecâ€™</div><div class="line">salt â€˜*â€™ file.access /path/to/file f</div><div class="line">salt â€˜*â€™ file.access /path/to/file x</div><div class="line">salt â€˜*â€™ file.append /etc/motd \</div><div class="line">salt â€˜*â€™ file.append /etc/motd args=â€™cheese=spamâ€™</div><div class="line">salt â€˜*â€™ file.append /etc/motd args=â€[â€˜cheese=spamâ€™,â€™spam=cheeseâ€™]â€</div><div class="line">salt â€˜*â€™ file.blockreplace /etc/hosts â€˜<span class="comment">#â€“ start managed zone foobar : DO NOT EDIT â€“â€˜ \</span></div><div class="line">salt â€˜*â€™ file.check_file_meta /etc/httpd/conf.d/httpd.conf salt://http/httpd.conf â€˜&#123;hash_type: â€˜md5â€², â€˜hsum<span class="string">': &lt;md5sum&gt;&#125;â€™ root, root, â€˜755â€™ base</span></div><div class="line">salt â€˜*â€™ file.check_hash /etc/fstab md5:&lt;md5sum&gt;</div><div class="line">salt â€˜*â€™ file.check_managed /etc/httpd/conf.d/httpd.conf salt://http/httpd.conf â€˜&#123;hash_type: â€˜md5â€², â€˜hsum': &lt;md5sum&gt;&#125;â€™ root, root, â€˜755â€™ jinja True None None base</div><div class="line">salt â€˜*â€™ file.check_managed_changes /etc/httpd/conf.d/httpd.conf salt://http/httpd.conf â€˜&#123;hash_type: â€˜md5â€², â€˜hsum<span class="string">': &lt;md5sum&gt;&#125;â€™ root, root, â€˜755â€™ jinja True None None base</span></div><div class="line">salt â€˜*â€™ file.check_perms /etc/sudoers â€˜&#123;&#125;â€™ root root 400</div><div class="line">salt â€˜*â€™ file.chgrp /etc/passwd root</div><div class="line">salt â€˜*â€™ file.chown /etc/passwd root root</div><div class="line">salt â€˜*â€™ file.comment /etc/modules pcspkr</div><div class="line">salt â€˜*â€™ file.contains /etc/crontab â€˜mymaintenance.shâ€™</div><div class="line">salt â€˜*â€™ file.contains_glob /etc/foobar â€˜*cheese*â€™</div><div class="line">salt â€˜*â€™ file.contains_regex /etc/crontab</div><div class="line">salt â€˜*â€™ file.contains_regex_multiline /etc/crontab â€˜^maintâ€™</div><div class="line">salt â€˜*â€™ file.copy /path/to/src /path/to/dst</div><div class="line">salt â€˜*â€™ file.copy /path/to/src_dir /path/to/dst_dir recurse=True</div><div class="line">salt â€˜*â€™ file.copy /path/to/src_dir /path/to/dst_dir recurse=True remove_existing=True</div><div class="line">salt â€˜*â€™ file.restore_backup /foo/bar/baz.txt 0</div><div class="line">salt â€˜*â€™ file.directory_exists /etc</div><div class="line">salt â€˜*â€™ file.extract_hash /etc/foo sha512 /path/to/hash/file</div><div class="line">salt â€˜*â€™ file.file_exists /etc/passwd</div><div class="line">salt â€˜*â€™ file.find / type=f name=\*.bak size=+10m</div><div class="line">salt â€˜*â€™ file.find /var mtime=+30d size=+10m print=path,size,mtime</div><div class="line">salt â€˜*â€™ file.find /var/log name=\*.[0-9] mtime=+30d size=+10m delete</div><div class="line">salt â€˜*â€™ file.get_devmm /dev/chr</div><div class="line">salt â€˜*â€™ file.get_diff /home/fred/.vimrc salt://users/fred/.vimrc</div><div class="line">salt â€˜*â€™ file.get_gid /etc/passwd</div><div class="line">salt â€˜*â€™ file.get_group /etc/passwd</div><div class="line">salt â€˜*â€™ file.get_hash /etc/shadow</div><div class="line">salt â€˜*â€™ file.get_managed /etc/httpd/conf.d/httpd.conf jinja salt://http/httpd.conf â€˜&#123;hash_type: â€˜md5â€², â€˜hsum': &lt;md5sum&gt;&#125;â€™ root root â€˜755â€™ base None None</div><div class="line">salt â€˜*â€™ file.get_mode /etc/passwd</div><div class="line">salt â€˜*â€™ file.get_selinux_context /etc/hosts</div><div class="line">salt â€˜*â€™ file.get_sum /etc/passwd sha512</div><div class="line">salt â€˜*â€™ file.get_uid /etc/passwd</div><div class="line">salt â€˜*â€™ file.get_user /etc/passwd</div><div class="line">salt â€˜*â€™ file.gid_to_group 0</div><div class="line">salt â€˜*â€™ file.grep /etc/passwd nobody</div><div class="line">salt â€˜*â€™ file.grep /etc/sysconfig/network-scripts/ifcfg-eth0 ipaddr â€ -iâ€</div><div class="line">salt â€˜*â€™ file.grep /etc/sysconfig/network-scripts/ifcfg-eth0 ipaddr â€ -i -B2â€³</div><div class="line">salt â€˜*â€™ file.grep â€œ/etc/sysconfig/network-scripts/*â€ ipaddr â€ -i <span class="_">-l</span>â€</div><div class="line">salt â€˜*â€™ file.group_to_gid root</div><div class="line">salt â€˜*â€™ file.is_blkdev /dev/blk</div><div class="line">salt â€˜*â€™ file.is_chrdev /dev/chr</div><div class="line">salt â€˜*â€™ file.is_fifo /dev/fifo</div><div class="line">salt â€˜*â€™ file.is_link /path/to/link</div><div class="line">salt â€˜*â€™ file.join â€˜/â€™ â€˜usrâ€™ â€˜<span class="built_in">local</span>â€™ â€˜binâ€™</div><div class="line">salt â€˜*â€™ file.chown /etc/passwd root root</div><div class="line">salt â€˜*â€™ file.link /path/to/file /path/to/link</div><div class="line">salt â€˜*â€™ file.list_backups /foo/bar/baz.txt</div><div class="line">salt â€˜*â€™ file.list_backups /foo/bar/baz.txt</div><div class="line">salt â€˜*â€™ file.lstat /path/to/file</div><div class="line">salt â€˜*â€™ file.makedirs /opt/code/</div><div class="line">salt â€˜*â€™ file.makedirs_perms /opt/code</div><div class="line">salt â€˜*â€™ file.manage_file /etc/httpd/conf.d/httpd.conf â€ â€˜&#123;&#125;â€™ salt://http/httpd.conf â€˜&#123;hash_type: â€˜md5â€², â€˜hsum<span class="string">': &lt;md5sum&gt;&#125;â€™ root root â€˜755â€™ base â€</span></div><div class="line">salt â€˜*â€™ file.mkdir /opt/jetty/context</div><div class="line">salt â€˜*â€™ file.mknod /dev/chr c 180 31</div><div class="line">salt â€˜*â€™ file.mknod /dev/blk b 8 999</div><div class="line">salt â€˜*â€™ file.nknod /dev/fifo p</div><div class="line">salt â€˜*â€™ file.mknod_blkdev /dev/blk 8 999</div><div class="line">salt â€˜*â€™ file.mknod_chrdev /dev/chr 180 31</div><div class="line">salt â€˜*â€™ file.mknod_fifo /dev/fifo</div><div class="line">salt â€˜*â€™ file.open_files</div><div class="line">salt â€˜*â€™ file.open_files by_pid=True</div><div class="line">salt â€˜*â€™ file.pardir</div><div class="line">salt â€˜*â€™ file.patch /opt/file.txt /tmp/file.txt.patch</div><div class="line">salt â€˜*â€™ file.path_exists_glob /etc/pam*/pass*</div><div class="line">salt â€˜*â€™ file.prepend /etc/motd \</div><div class="line">salt â€˜*â€™ file.prepend /etc/motd args=â€™cheese=spamâ€™</div><div class="line">salt â€˜*â€™ file.prepend /etc/motd args=â€[â€˜cheese=spamâ€™,â€™spam=cheeseâ€™]â€</div><div class="line">salt â€˜*â€™ file.sed /etc/httpd/httpd.conf â€˜LogLevel warnâ€™ â€˜LogLevel infoâ€™</div><div class="line">salt â€˜*â€™ file.readdir /path/to/dir/</div><div class="line">salt â€˜*â€™ file.readlink /path/to/link</div><div class="line">salt â€˜*â€™ file.remove /tmp/foo</div><div class="line">salt â€˜*â€™ file.restore_backup /foo/bar/baz.txt 0</div><div class="line">salt â€˜*â€™ file.rename /path/to/src /path/to/dst</div><div class="line">salt â€˜*â€™ file.replace /path/to/file pattern=â€bind-address\s*=â€ repl=â€™bind-address:â€™</div><div class="line">salt â€˜*â€™ file.replace /path/to/file pattern=â€™=â€™ repl=':â€™</div><div class="line">salt â€˜*â€™ file.replace /etc/httpd/httpd.conf pattern=â€™LogLevel warnâ€™ repl=â€™LogLevel infoâ€™</div><div class="line">salt â€˜*â€™ file.replace /some/file pattern=â€™beforeâ€™ repl=â€™afterâ€™ flags=<span class="string">'[MULTILINE, IGNORECASE]â€™</span></div><div class="line">salt â€˜*â€™ file.restore_backup /foo/bar/baz.txt 0</div><div class="line">salt â€˜*â€™ file.restorecon /home/user/.ssh/authorized_keys</div><div class="line">salt â€˜*â€™ file.rmdir /tmp/foo/</div><div class="line">salt â€˜*â€™ file.search /etc/crontab â€˜mymaintenance.shâ€™</div><div class="line">salt â€˜*â€™ file.sed /etc/httpd/httpd.conf â€˜LogLevel warnâ€™ â€˜LogLevel infoâ€™</div><div class="line">salt â€˜*â€™ file.contains /etc/crontab â€˜mymaintenance.shâ€™</div><div class="line">salt â€˜*â€™ file.seek_read /path/to/file 4096 0</div><div class="line">salt â€˜*â€™ file.seek_write /path/to/file â€˜some dataâ€™ 4096</div><div class="line">salt â€˜*â€™ file.set_mode /etc/passwd 0644</div><div class="line">salt â€˜*â€™ file.set_selinux_context path &lt;role&gt; &lt;type&gt; &lt;range&gt;</div><div class="line">salt â€˜*â€™ file.source_list salt://http/httpd.conf â€˜&#123;hash_type: â€˜md5â€², â€˜hsum': &lt;md5sum&gt;&#125;â€™ base</div><div class="line">salt â€˜*â€™ file.stats /etc/passwd</div><div class="line">salt â€˜*â€™ file.statvfs /path/to/file</div><div class="line">salt â€˜*â€™ file.symlink /path/to/file /path/to/link</div><div class="line">salt â€˜*â€™ file.touch /var/<span class="built_in">log</span>/emptyfile</div><div class="line">salt â€˜*â€™ file.truncate /path/to/file 512</div><div class="line">salt â€˜*â€™ file.uid_to_user 0</div><div class="line">salt â€˜*â€™ file.uncomment /etc/hosts.deny â€˜ALL: PARANOIDâ€™</div><div class="line">salt â€˜*â€™ file.user_to_uid root</div><div class="line">salt â€˜*â€™ file.write /etc/motd \</div><div class="line">salt â€˜*â€™ file.write /etc/motd args=â€™cheese=spamâ€™</div><div class="line">salt â€˜*â€™ file.write /etc/motd args=â€[â€˜cheese=spamâ€™,â€™spam=cheeseâ€™]â€</div><div class="line">salt â€˜*â€™ gem.install vagrant</div><div class="line">salt â€˜*â€™ gem.list</div><div class="line">salt â€˜*â€™ gem.sources_add http://rubygems.org/</div><div class="line">salt â€˜*â€™ gem.sources_list</div><div class="line">salt â€˜*â€™ gem.sources_remove http://rubygems.org/</div><div class="line">salt â€˜*â€™ gem.uninstall vagrant</div><div class="line">salt â€˜*â€™ gem.update vagrant</div><div class="line">salt â€˜*â€™ gem.update_system</div><div class="line">salt â€˜*â€™ grains.append key val</div><div class="line">salt â€˜*â€™ grains.delval key</div><div class="line">salt â€˜*â€™ grains.filter_by â€˜&#123;Debian: Debheads rule, RedHat: I love my hat&#125;â€™</div><div class="line">salt â€˜*â€™ grains.filter_by â€˜&#123;A: B, C: &#123;D: &#123;E: F,G: H&#125;&#125;&#125;â€™ â€˜xxxâ€™ â€˜&#123;D: &#123;E: I&#125;,J: K&#125;â€™ â€˜Câ€™</div><div class="line">salt â€˜*â€™ grains.get pkg:apache</div><div class="line">salt â€˜*â€™ grains.get_or_set_hash â€˜django:SECRET_KEYâ€™ 50</div><div class="line">salt â€˜*â€™ grains.has_value pkg:apache</div><div class="line">salt â€˜*â€™ grains.item os</div><div class="line">salt â€˜*â€™ grains.item os osrelease oscodename</div><div class="line">salt â€˜*â€™ grains.item host sanitize=True</div><div class="line">salt â€˜*â€™ grains.items</div><div class="line">salt â€˜*â€™ grains.items sanitize=True</div><div class="line">salt â€˜*â€™ grains.ls</div><div class="line">salt â€˜*â€™ grains.remove key val</div><div class="line">salt â€˜*â€™ grains.setval key val</div><div class="line">salt â€˜*â€™ grains.setval key â€œ&#123;â€˜sub-key<span class="string">': â€˜valâ€™, â€˜sub-key2â€²: â€˜val2â€²&#125;â€</span></div><div class="line">salt â€˜*â€™ grains.setvals â€œ&#123;â€˜key1â€²: â€˜val1â€², â€˜key2â€²: â€˜val2â€²&#125;â€</div><div class="line">salt â€˜*â€™ group.add foo 3456</div><div class="line">salt â€˜*â€™ group.adduser foo bar</div><div class="line">salt â€˜*â€™ group.chgid foo 4376</div><div class="line">salt â€˜*â€™ group.delete foo</div><div class="line">salt â€˜*â€™ group.deluser foo bar</div><div class="line">salt â€˜*â€™ group.getent</div><div class="line">salt â€˜*â€™ group.info foo</div><div class="line">salt â€˜*â€™ group.members foo â€˜user1,user2,user3,â€¦â€™</div><div class="line">salt â€˜*â€™ grub.conf</div><div class="line">salt â€˜*â€™ grub.version</div><div class="line">salt â€˜*â€™ hashutil.base64_decodestring â€˜Z2V0IHNhbHRlZA==</div><div class="line">salt â€˜*â€™ hashutil.base64_encodestring â€˜get saltedâ€™</div><div class="line">salt â€˜*â€™ hashutil.hmac_signature â€˜get saltedâ€™ â€˜shared secretâ€™ â€˜NS2BvKxFRk+rndAlFbCYIFNVkPtI/3KiIYQw4okNKU8=â€™</div><div class="line">salt â€˜*â€™ hashutil.md5_digest â€˜get saltedâ€™</div><div class="line">salt â€˜*â€™ hashutil.sha256_digest â€˜get saltedâ€™</div><div class="line">salt â€˜*â€™ hashutil.sha512_digest â€˜get saltedâ€™</div><div class="line">salt â€˜*â€™ hg.archive /path/to/repo output=/tmp/archive.tgz fmt=tgz</div><div class="line">salt â€˜*â€™ hg.clone /path/to/repo https://bitbucket.org/birkenfeld/sphinx</div><div class="line">salt â€˜*â€™ hg.describe /path/to/repo</div><div class="line">salt â€˜*â€™ hg.pull /path/to/repo opts=-u</div><div class="line">salt â€˜*â€™ hg.revision /path/to/repo mybranch</div><div class="line">salt â€˜*â€™ hosts.add_host &lt;ip&gt; &lt;alias&gt;</div><div class="line">salt â€˜*â€™ hosts.get_alias &lt;ip addr&gt;</div><div class="line">salt â€˜*â€™ hosts.get_ip &lt;hostname&gt;</div><div class="line">salt â€˜*â€™ hosts.has_pair &lt;ip&gt; &lt;alias&gt;</div><div class="line">salt â€˜*â€™ hosts.list_hosts</div><div class="line">salt â€˜*â€™ hosts.rm_host &lt;ip&gt; &lt;alias&gt;</div><div class="line">salt â€˜*â€™ hosts.set_host &lt;ip&gt; &lt;alias&gt;</div><div class="line">salt â€˜*â€™ img.bootstrap /srv/salt-images/host.qcow 4096 qcow2</div><div class="line">salt â€˜*â€™ img.mount_image /tmp/foo</div><div class="line">salt â€˜*â€™ img.mount_image /tmp/foo</div><div class="line">salt â€˜*â€™ img.umount_image /mnt/foo</div><div class="line">salt â€˜*â€™ incron.list_tab root</div><div class="line">salt â€˜*â€™ incron.list_tab root</div><div class="line">salt â€˜*â€™ incron.raw_cron root</div><div class="line">salt â€˜*â€™ incron.raw_system_cron</div><div class="line">salt â€˜*â€™ incron.rm_job root /path</div><div class="line">salt â€˜*â€™ incron.rm_job root /path</div><div class="line">salt â€˜*â€™ incron.set_job root â€˜/rootâ€™ â€˜IN_MODIFYâ€™ â€˜echo â€œ$$ $@ $# $% $&amp;â€â€˜</div><div class="line">salt â€˜*â€™ incron.write_incron_file_verbose root /tmp/new_cron</div><div class="line">salt â€˜*â€™ incron.write_cron_file root /tmp/new_cron</div><div class="line">salt â€˜*â€™ ini.get_option /path/to/ini section_name option_name</div><div class="line">salt â€˜*â€™ ini.get_section /path/to/ini section_name</div><div class="line">salt â€˜*â€™ ini.remove_option /path/to/ini section_name option_name</div><div class="line">salt â€˜*â€™ ini.remove_section /path/to/ini section_name</div><div class="line">salt â€˜*â€™ ini.set_option /path/to/ini â€˜&#123;section_foo: &#123;key: value&#125;&#125;â€™</div><div class="line">salt â€˜*â€™ ip.apply_network_settings</div><div class="line">salt â€˜*â€™ ip.build_bond bond0 mode=balance-alb</div><div class="line">salt â€˜*â€™ ip.build_interface eth0 eth &lt;settings&gt;</div><div class="line">salt â€˜*â€™ ip.build_network_settings &lt;settings&gt;</div><div class="line">salt â€˜*â€™ ip.build_routes eth0 &lt;settings&gt;</div><div class="line">salt â€˜*â€™ ip.down eth0</div><div class="line">salt â€˜*â€™ ip.get_bond bond0</div><div class="line">salt â€˜*â€™ ip.get_interface eth0</div><div class="line">salt â€˜*â€™ ip.get_network_settings</div><div class="line">salt â€˜*â€™ ip.get_routes eth0</div><div class="line">salt â€˜*â€™ ip.up eth0</div><div class="line">salt â€˜*â€™ iptables.append filter INPUT \</div><div class="line">salt â€˜*â€™ iptables.append filter INPUT \</div><div class="line">salt â€˜*â€™ iptables.build_rule match=state \</div><div class="line">salt â€˜*â€™ iptables.build_rule filter INPUT command=I position=3 \</div><div class="line">salt â€˜*â€™ iptables.build_rule filter INPUT command=A \</div><div class="line">salt â€˜*â€™ iptables.build_rule filter INPUT command=A \</div><div class="line">salt â€˜*â€™ iptables.build_rule filter INPUT command=A \</div><div class="line">salt â€˜*â€™ iptables.build_rule match=state \</div><div class="line">salt â€˜*â€™ iptables.build_rule filter INPUT command=I position=3 \</div><div class="line">salt â€˜*â€™ iptables.check filter INPUT \</div><div class="line">salt â€˜*â€™ iptables.check filter INPUT \</div><div class="line">salt â€˜*â€™ iptables.check_chain filter INPUT</div><div class="line">salt â€˜*â€™ iptables.check_chain filter INPUT family=ipv6</div><div class="line">salt â€˜*â€™ iptables.delete filter INPUT position=3</div><div class="line">salt â€˜*â€™ iptables.delete filter INPUT \</div><div class="line">salt â€˜*â€™ iptables.delete filter INPUT position=3 family=ipv6</div><div class="line">salt â€˜*â€™ iptables.delete filter INPUT \</div><div class="line">salt â€˜*â€™ iptables.delete_chain filter CUSTOM_CHAIN</div><div class="line">salt â€˜*â€™ iptables.delete_chain filter CUSTOM_CHAIN family=ipv6</div><div class="line">salt â€˜*â€™ iptables.flush filter INPUT</div><div class="line">salt â€˜*â€™ iptables.flush filter INPUT family=ipv6</div><div class="line">salt â€˜*â€™ iptables.get_policy filter INPUT</div><div class="line">salt â€˜*â€™ iptables.get_policy filter INPUT family=ipv6</div><div class="line">salt â€˜*â€™ iptables.get_rules</div><div class="line">salt â€˜*â€™ iptables.get_rules family=ipv6</div><div class="line">salt â€˜*â€™ iptables.get_saved_policy filter INPUT</div><div class="line">salt â€˜*â€™ iptables.get_saved_policy filter INPUT \</div><div class="line">salt â€˜*â€™ iptables.get_saved_policy filter INPUT family=ipv6</div><div class="line">salt â€˜*â€™ iptables.get_saved_policy filter INPUT \</div><div class="line">salt â€˜*â€™ iptables.get_saved_rules</div><div class="line">salt â€˜*â€™ iptables.get_saved_rules family=ipv6</div><div class="line">salt â€˜*â€™ iptables.insert filter INPUT position=3 \</div><div class="line">salt â€˜*â€™ iptables.insert filter INPUT position=3 \</div><div class="line">salt â€˜*â€™ iptables.new_chain filter CUSTOM_CHAIN</div><div class="line">salt â€˜*â€™ iptables.new_chain filter CUSTOM_CHAIN family=ipv6</div><div class="line">salt â€˜*â€™ iptables.save /etc/sysconfig/iptables</div><div class="line">salt â€˜*â€™ iptables.save /etc/sysconfig/iptables family=ipv6</div><div class="line">salt â€˜*â€™ iptables.set_policy filter INPUT ACCEPT</div><div class="line">salt â€˜*â€™ iptables.set_policy filter INPUT ACCEPT family=ipv6</div><div class="line">salt â€˜*â€™ iptables.version</div><div class="line">salt â€˜*â€™ iptables.version family=ipv6</div><div class="line">salt â€˜*â€™ key.finger</div><div class="line">salt â€˜*â€™ key.finger_master</div><div class="line">salt â€˜*â€™ kmod.available</div><div class="line">salt â€˜*â€™ kmod.check_available kvm</div><div class="line">salt â€˜*â€™ kmod.is_loaded kvm</div><div class="line">salt â€˜*â€™ kmod.load kvm</div><div class="line">salt â€˜*â€™ kmod.lsmod</div><div class="line">salt â€˜*â€™ kmod.mod_list</div><div class="line">salt â€˜*â€™ kmod.remove kvm</div><div class="line">salt â€˜*â€™ locale.avail â€˜en_US.UTF-8â€²</div><div class="line">salt â€˜*â€™ locale.gen_locale â€˜en_US.UTF-8â€²</div><div class="line">salt â€˜*â€™ locale.get_locale</div><div class="line">salt â€˜*â€™ locale.list_avail</div><div class="line">salt â€˜*â€™ locale.set_locale â€˜en_US.UTF-8â€²</div><div class="line">salt â€˜*â€™ locate.locate</div><div class="line">salt â€˜*â€™ locate.stats</div><div class="line">salt â€˜*â€™ locate.updatedb</div><div class="line">salt â€˜*â€™ locate.version</div><div class="line">salt â€˜*â€™ logrotate.set rotate 2</div><div class="line">salt â€˜*â€™ logrotate.set /var/log/wtmp rotate 2</div><div class="line">salt â€˜*â€™ logrotate.show_conf</div><div class="line">salt â€˜*â€™ lowpkg.file_dict httpd</div><div class="line">salt â€˜*â€™ lowpkg.file_dict httpd postfix</div><div class="line">salt â€˜*â€™ lowpkg.file_dict</div><div class="line">salt â€˜*â€™ lowpkg.file_list httpd</div><div class="line">salt â€˜*â€™ lowpkg.file_list httpd postfix</div><div class="line">salt â€˜*â€™ lowpkg.file_list</div><div class="line">salt â€˜*â€™ lowpkg.list_pkgs</div><div class="line">salt â€˜*â€™ lowpkg.verify</div><div class="line">salt â€˜*â€™ lowpkg.verify httpd</div><div class="line">salt â€˜*â€™ lowpkg.verify â€˜httpd postfixâ€™</div><div class="line">salt â€˜*â€™ lowpkg.verify â€˜httpd postfixâ€™ ignore_types=[â€˜configâ€™,â€™docâ€™]</div><div class="line">salt â€˜*â€™ lvm.fullversion</div><div class="line">salt â€˜*â€™ lvm.lvcreate new_volume_name vg_name size=10G</div><div class="line">salt â€˜*â€™ lvm.lvcreate new_volume_name vg_name extents=100 /dev/sdb</div><div class="line">salt â€˜*â€™ lvm.lvcreate new_snapshot    vg_name snapshot=volume_name size=3G</div><div class="line">salt â€˜*â€™ lvm.lvdisplay</div><div class="line">salt â€˜*â€™ lvm.lvdisplay /dev/vg_myserver/root</div><div class="line">salt â€˜*â€™ lvm.lvremove lvname vgname force=True</div><div class="line">salt â€˜*â€™ lvm.pvdisplay</div><div class="line">salt â€˜*â€™ lvm.pvdisplay /dev/md0</div><div class="line">salt â€˜*â€™ lvm.version</div><div class="line">salt â€˜*â€™ lvm.vgdisplay</div><div class="line">salt â€˜*â€™ lvm.vgdisplay nova-volumes</div><div class="line">salt â€˜*â€™ match.compound â€˜L@cheese,foo and *â€™</div><div class="line">salt â€˜*â€™ match.data â€˜spam:eggsâ€™</div><div class="line">salt â€˜*â€™ match.filter_by â€˜&#123;foo*: Foo!, bar*: Bar!&#125;â€™ minion_id=bar03</div><div class="line">salt â€˜*â€™ match.glob â€˜*â€™</div><div class="line">salt â€˜*â€™ match.grain â€˜os:Ubuntuâ€™</div><div class="line">salt â€˜*â€™ match.grain â€˜ipv6|2001:db8::ff00:42:8329â€² delimiter=â€™|â€™</div><div class="line">salt â€˜*â€™ match.grain_pcre â€˜os:Fedo.*â€™</div><div class="line">salt â€˜*â€™ match.grain_pcre â€˜ipv6|2001:.*â€™ delimiter=â€™|â€™</div><div class="line">salt â€˜*â€™ match.ipcidr â€˜192.168.44.0/24â€²</div><div class="line">salt â€˜*â€™ match.list â€˜server1,server2â€²</div><div class="line">salt â€˜*â€™ match.pcre â€˜.*â€™</div><div class="line">salt â€˜*â€™ match.pillar â€˜cheese:fooâ€™</div><div class="line">salt â€˜*â€™ match.pillar â€˜clone_url|https://github.com/saltstack/salt.gitâ€™ delimiter=â€™|â€™</div><div class="line">salt â€˜*â€™ mine.delete â€˜network.interfacesâ€™</div><div class="line">salt â€˜*â€™ mine.flush</div><div class="line">salt â€˜*â€™ mine.get â€˜*â€™ network.interfaces</div><div class="line">salt â€˜*â€™ mine.get â€˜os:Fedoraâ€™ network.interfaces grain</div><div class="line">salt â€˜*â€™ mine.get â€˜os:Fedora and S@192.168.5.0/24â€² network.ipaddrs compound</div><div class="line">salt â€˜*â€™ mine.get_docker</div><div class="line">salt â€˜*â€™ mine.get_docker interfaces=â€™eth0â€²</div><div class="line">salt â€˜*â€™ mine.get_docker interfaces='[â€œeth0â€³, â€œeth1â€³]â€™</div><div class="line">salt â€˜*â€™ mine.get_docker cidrs=â€™107.170.147.0/24â€²</div><div class="line">salt â€˜*â€™ mine.get_docker cidrs=<span class="string">'[â€œ107.170.147.0/24â€³, â€œ172.17.42.0/24â€³]â€™</span></div><div class="line">salt â€˜*â€™ mine.get_docker interfaces='[â€œeth0â€³, â€œeth1â€³]â€™ cidrs=<span class="string">'[â€œ107.170.147.0/24â€³, â€œ172.17.42.0/24â€³]â€™</span></div><div class="line">salt â€˜*â€™ mine.send network.interfaces eth0</div><div class="line">salt â€˜*â€™ mine.update</div><div class="line">salt â€˜*â€™ modjk.bulk_activate node1,node2,node3 loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.bulk_activate node1,node2,node3 loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.bulk_activate [â€œnode1â€³,â€node2â€³,â€node3â€³] loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.bulk_activate [â€œnode1â€³,â€node2â€³,â€node3â€³] loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.bulk_disable node1,node2,node3 loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.bulk_disable node1,node2,node3 loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.bulk_disable [â€œnode1â€³,â€node2â€³,â€node3â€³] loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.bulk_disable [â€œnode1â€³,â€node2â€³,â€node3â€³] loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.bulk_recover node1,node2,node3 loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.bulk_recover node1,node2,node3 loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.bulk_recover [â€œnode1â€³,â€node2â€³,â€node3â€³] loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.bulk_recover [â€œnode1â€³,â€node2â€³,â€node3â€³] loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.bulk_stop node1,node2,node3 loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.bulk_stop node1,node2,node3 loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.bulk_stop [â€œnode1â€³,â€node2â€³,â€node3â€³] loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.bulk_stop [â€œnode1â€³,â€node2â€³,â€node3â€³] loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.dump_config</div><div class="line">salt â€˜*â€™ modjk.dump_config other-profile</div><div class="line">salt â€˜*â€™ modjk.get_running</div><div class="line">salt â€˜*â€™ modjk.get_running other-profile</div><div class="line">salt â€˜*â€™ modjk.lb_edit loadbalancer1 â€œ&#123;â€˜vlr': 1, â€˜vlt<span class="string">': 60&#125;â€</span></div><div class="line">salt â€˜*â€™ modjk.lb_edit loadbalancer1 â€œ&#123;â€˜vlr': 1, â€˜vlt<span class="string">': 60&#125;â€ other-profile</span></div><div class="line">salt â€˜*â€™ modjk.list_configured_members loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.list_configured_members loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.recover_all loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.recover_all loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.reset_stats loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.reset_stats loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.version</div><div class="line">salt â€˜*â€™ modjk.version other-profile</div><div class="line">salt â€˜*â€™ modjk.worker_activate node1 loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.worker_activate node1 loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.worker_disable node1 loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.worker_disable node1 loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.worker_edit node1 loadbalancer1 â€œ&#123;â€˜vwf': 500, â€˜vwd<span class="string">': 60&#125;â€</span></div><div class="line">salt â€˜*â€™ modjk.worker_edit node1 loadbalancer1 â€œ&#123;â€˜vwf': 500, â€˜vwd<span class="string">': 60&#125;â€ other-profile</span></div><div class="line">salt â€˜*â€™ modjk.worker_recover node1 loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.worker_recover node1 loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.worker_status node1</div><div class="line">salt â€˜*â€™ modjk.worker_status node1 other-profile</div><div class="line">salt â€˜*â€™ modjk.worker_activate node1 loadbalancer1</div><div class="line">salt â€˜*â€™ modjk.worker_activate node1 loadbalancer1 other-profile</div><div class="line">salt â€˜*â€™ modjk.workers</div><div class="line">salt â€˜*â€™ modjk.workers other-profile</div><div class="line">salt â€˜*â€™ mount.active</div><div class="line">salt â€˜*â€™ mount.fstab</div><div class="line">salt â€˜*â€™ mount.is_fuse_exec sshfs</div><div class="line">salt â€˜*â€™ mount.is_mounted /mnt/share</div><div class="line">salt â€˜*â€™ mount.mount /mnt/foo /dev/sdz1 True</div><div class="line">salt â€˜*â€™ mount.remount /mnt/foo /dev/sdz1 True</div><div class="line">salt â€˜*â€™ mount.rm_fstab /mnt/foo</div><div class="line">salt â€˜*â€™ mount.set_fstab /mnt/foo /dev/sdz1 ext4</div><div class="line">salt â€˜*â€™ mount.swapoff /root/swapfile</div><div class="line">salt â€˜*â€™ mount.swapon /root/swapfile</div><div class="line">salt â€˜*â€™ mount.swaps</div><div class="line">salt â€˜*â€™ mount.umount /mnt/foo</div><div class="line">salt â€˜*â€™ network.active_tcp</div><div class="line">salt â€˜*â€™ network.arp</div><div class="line">salt â€˜*â€™ network.connect archlinux.org 80</div><div class="line">salt â€˜*â€™ network.connect archlinux.org 80 timeout=3</div><div class="line">salt â€˜*â€™ network.connect archlinux.org 80 timeout=3 family=ipv4</div><div class="line">salt â€˜*â€™ network.connect google-public-dns-a.google.com port=53 proto=udp timeout=3</div><div class="line">salt â€˜*â€™ network.dig archlinux.org</div><div class="line">salt â€˜*â€™ network.get_hostname</div><div class="line">salt â€˜*â€™ network.hw_addr eth0</div><div class="line">salt â€˜*â€™ network.hw_addr eth0</div><div class="line">salt â€˜*â€™ network.in_subnet 10.0.0.0/16</div><div class="line">salt â€˜*â€™ network.interface eth0</div><div class="line">salt â€˜*â€™ network.interface_ip eth0</div><div class="line">salt â€˜*â€™ network.interfaces</div><div class="line">salt â€˜*â€™ network.ip_addrs</div><div class="line">salt â€˜*â€™ network.ip_addrs6</div><div class="line">salt â€˜*â€™ network.ip_addrs</div><div class="line">salt â€˜*â€™ network.ip_addrs6</div><div class="line">salt â€˜*â€™ network.is_loopback 127.0.0.1</div><div class="line">salt â€˜*â€™ network.is_private 10.0.0.3</div><div class="line">salt â€˜*â€™ network.mod_hostname   master.saltstack.com</div><div class="line">salt â€˜*â€™ network.netstat</div><div class="line">salt â€˜*â€™ network.ping archlinux.org</div><div class="line">salt â€˜*â€™ network.subnets</div><div class="line">salt â€˜*â€™ network.traceroute archlinux.org</div><div class="line">salt â€˜*â€™ pillar.items</div><div class="line">salt â€˜*â€™ pillar.ext â€˜&#123;libvirt: _&#125;â€™</div><div class="line">salt â€˜*â€™ pillar.get pkg:apache</div><div class="line">salt â€˜*â€™ pillar.item foo</div><div class="line">salt â€˜*â€™ pillar.item foo bar baz</div><div class="line">salt â€˜*â€™ pillar.items</div><div class="line">salt â€˜*â€™ pillar.raw</div><div class="line">salt â€˜*â€™ pillar.raw key=â€™rolesâ€™</div><div class="line">salt â€˜*â€™ pip.freeze /home/code/path/to/virtualenv/</div><div class="line">salt â€˜*â€™ pip.install &lt;package name&gt;,&lt;package2 name&gt;</div><div class="line">salt â€˜*â€™ pip.install requirements=/path/to/requirements.txt</div><div class="line">salt â€˜*â€™ pip.install &lt;package name&gt; bin_env=/path/to/virtualenv</div><div class="line">salt â€˜*â€™ pip.install &lt;package name&gt; bin_env=/path/to/pip_bin</div><div class="line">salt â€˜*â€™ pip.install markdown,django                 editable=git+https://github.com/worldcompany/djangoembed.git#egg=djangoembed upgrade=True no_deps=True</div><div class="line">salt â€˜*â€™ pip.list salt</div><div class="line">salt â€˜*â€™ pip.uninstall &lt;package name&gt;,&lt;package2 name&gt;</div><div class="line">salt â€˜*â€™ pip.uninstall requirements=/path/to/requirements.txt</div><div class="line">salt â€˜*â€™ pip.uninstall &lt;package name&gt; bin_env=/path/to/virtualenv</div><div class="line">salt â€˜*â€™ pip.uninstall &lt;package name&gt; bin_env=/path/to/pip_bin</div><div class="line">salt â€˜*â€™ pip.version</div><div class="line">salt â€˜*â€™ pkg.latest_version &lt;package name&gt;</div><div class="line">salt â€˜*â€™ pkg.latest_version &lt;package name&gt; fromrepo=epel-testing</div><div class="line">salt â€˜*â€™ pkg.latest_version &lt;package name&gt; disableexcludes=main</div><div class="line">salt â€˜*â€™ pkg.latest_version &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; â€¦</div><div class="line">salt â€˜*â€™ pkg.check_db &lt;package1&gt; &lt;package2&gt; &lt;package3&gt;</div><div class="line">salt â€˜*â€™ pkg.check_db &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; fromrepo=epel-testing</div><div class="line">salt â€˜*â€™ pkg.check_db &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; disableexcludes=main</div><div class="line">salt â€˜*â€™ pkg.clean_metadata</div><div class="line">salt â€˜*â€™ pkg.del_repo myrepo</div><div class="line">salt â€˜*â€™ pkg.del_repo myrepo basedir=/path/to/dir</div><div class="line">salt â€˜*â€™ pkg.file_list httpd</div><div class="line">salt â€˜*â€™ pkg.file_list httpd postfix</div><div class="line">salt â€˜*â€™ pkg.file_list</div><div class="line">salt â€˜*â€™ pkg.file_list httpd</div><div class="line">salt â€˜*â€™ pkg.file_list httpd postfix</div><div class="line">salt â€˜*â€™ pkg.file_list</div><div class="line">salt â€˜*â€™ pkg.get_locked_packages</div><div class="line">salt â€˜*â€™ pkg.get_repo myrepo</div><div class="line">salt â€˜*â€™ pkg.get_repo myrepo basedir=/path/to/dir</div><div class="line">salt â€˜*â€™ pkg.group_diff â€˜Perl Supportâ€™</div><div class="line">salt â€˜*â€™ pkg.group_info â€˜Perl Supportâ€™</div><div class="line">salt â€˜*â€™ pkg.group_install â€˜Group 1â€²</div><div class="line">salt â€˜*â€™ pkg.group_install â€˜Group 1,Group 2â€²</div><div class="line">salt â€˜*â€™ pkg.group_install â€˜[â€œGroup 1â€³, â€œGroup 2â€³]â€™</div><div class="line">salt â€˜*â€™ pkg.group_install â€˜My Groupâ€™ skip=â€™foo,barâ€™</div><div class="line">salt â€˜*â€™ pkg.group_install â€˜My Groupâ€™ skip='[â€œfooâ€, â€œbarâ€]â€™</div><div class="line">salt â€˜*â€™ pkg.group_install â€˜My Groupâ€™ include=â€™foo,barâ€™</div><div class="line">salt â€˜*â€™ pkg.group_install â€˜My Groupâ€™ include=<span class="string">'[â€œfooâ€, â€œbarâ€]â€™</span></div><div class="line">salt â€˜*â€™ pkg.group_list</div><div class="line">salt â€˜*â€™ pkg.hold &lt;package name&gt;</div><div class="line">salt â€˜*â€™ pkg.hold pkgs='[â€œfooâ€, â€œbarâ€]â€™</div><div class="line">salt â€˜*â€™ pkg.install &lt;package name&gt;</div><div class="line">salt â€˜*â€™ pkg.install pkgs=<span class="string">'[â€œfooâ€, â€œbarâ€]â€™</span></div><div class="line">salt â€˜*â€™ pkg.install pkgs='[â€œfooâ€, &#123;â€œbarâ€: â€œ1.2.3-4.el5â€³&#125;]â€™</div><div class="line">salt â€˜*â€™ pkg.install sources=<span class="string">'[&#123;â€œfooâ€: â€œsalt://foo.rpmâ€&#125;, &#123;â€œbarâ€: â€œsalt://bar.rpmâ€&#125;]â€™</span></div><div class="line">salt â€˜*â€™ pkg.latest_version &lt;package name&gt;</div><div class="line">salt â€˜*â€™ pkg.latest_version &lt;package name&gt; fromrepo=epel-testing</div><div class="line">salt â€˜*â€™ pkg.latest_version &lt;package name&gt; disableexcludes=main</div><div class="line">salt â€˜*â€™ pkg.latest_version &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; â€¦</div><div class="line">salt â€˜*â€™ pkg.list_pkgs</div><div class="line">salt â€˜*â€™ pkg.list_repo_pkgs</div><div class="line">salt â€˜*â€™ pkg.list_repo_pkgs foo bar baz</div><div class="line">salt â€˜*â€™ pkg.list_repo_pkgs â€˜samba4*â€™ fromrepo=base,updates</div><div class="line">salt â€˜*â€™ pkg.list_repos</div><div class="line">salt â€˜*â€™ pkg.list_upgrades</div><div class="line">salt â€˜*â€™ pkg.mod_repo reponame enabled=1 gpgcheck=1</div><div class="line">salt â€˜*â€™ pkg.mod_repo reponame basedir=/path/to/dir enabled=1</div><div class="line">salt â€˜*â€™ pkg.mod_repo reponame baseurl= mirrorlist=http://host.com/</div><div class="line">salt â€˜*â€™ pkg.normalize_name zsh.x86_64</div><div class="line">salt â€˜*â€™ pkg.owner /usr/bin/apachectl</div><div class="line">salt â€˜*â€™ pkg.owner /usr/bin/apachectl /etc/httpd/conf/httpd.conf</div><div class="line">salt â€˜*â€™ pkg.purge &lt;package name&gt;</div><div class="line">salt â€˜*â€™ pkg.purge &lt;package1&gt;,&lt;package2&gt;,&lt;package3&gt;</div><div class="line">salt â€˜*â€™ pkg.purge pkgs='[â€œfooâ€, â€œbarâ€]â€™</div><div class="line">salt â€˜*â€™ pkg.refresh_db</div><div class="line">salt â€˜*â€™ pkg.remove &lt;package name&gt;</div><div class="line">salt â€˜*â€™ pkg.remove &lt;package1&gt;,&lt;package2&gt;,&lt;package3&gt;</div><div class="line">salt â€˜*â€™ pkg.remove pkgs=<span class="string">'[â€œfooâ€, â€œbarâ€]â€™</span></div><div class="line">salt â€˜*â€™ pkg.unhold &lt;package name&gt;</div><div class="line">salt â€˜*â€™ pkg.unhold pkgs='[â€œfooâ€, â€œbarâ€]â€™</div><div class="line">salt â€˜*â€™ pkg.upgrade</div><div class="line">salt â€˜*â€™ pkg.upgrade_available &lt;package name&gt;</div><div class="line">salt â€˜*â€™ pkg.verify</div><div class="line">salt â€˜*â€™ pkg.verify httpd</div><div class="line">salt â€˜*â€™ pkg.verify â€˜httpd postfixâ€™</div><div class="line">salt â€˜*â€™ pkg.verify â€˜httpd postfixâ€™ ignore_types=[â€˜configâ€™,â€™docâ€™]</div><div class="line">salt â€˜*â€™ pkg.version &lt;package name&gt;</div><div class="line">salt â€˜*â€™ pkg.version &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; â€¦</div><div class="line">salt â€˜*â€™ pkg_resource.add_pkg â€˜&#123;&#125;â€™ <span class="built_in">bind</span> 9</div><div class="line">salt â€˜*â€™ pkg_resource.check_extra_requirements &lt;pkgname&gt; &lt;extra_requirements&gt;</div><div class="line">salt â€˜*â€™ pkg_resource.pack_sources â€˜[&#123;â€œfooâ€: â€œsalt://foo.rpmâ€&#125;, &#123;â€œbarâ€: â€œsalt://bar.rpmâ€&#125;]â€™</div><div class="line">salt â€˜*â€™ pkg_resource.parse_targets</div><div class="line">salt â€˜*â€™ pkg_resource.sort_pkglist â€˜[â€œ3.45â€³, â€œ2.13â€]â€™</div><div class="line">salt â€˜*â€™ pkg_resource.stringify â€˜vim: 7.127â€²</div><div class="line">salt â€˜*â€™ pkg_resource.version vim</div><div class="line">salt â€˜*â€™ pkg_resource.version foo bar baz</div><div class="line">salt â€˜*â€™ pkg_resource.version â€˜python*â€™</div><div class="line">salt â€˜*â€™ pkg_resource.version_clean &lt;version_string&gt;</div><div class="line">salt â€˜*â€™ publish.full_data test.kwarg arg=â€™cheese=spamâ€™</div><div class="line">salt â€˜*â€™ publish.publish test.kwarg arg=â€™cheese=spamâ€™</div><div class="line">salt â€˜*â€™ pyenv.default</div><div class="line">salt â€˜*â€™ pyenv.default 2.0.0-p0</div><div class="line">salt â€˜*â€™ pyenv.do â€˜gem list bundlerâ€™</div><div class="line">salt â€˜*â€™ pyenv.do â€˜gem list bundlerâ€™ deploy</div><div class="line">salt â€˜*â€™ pyenv.do_with_python 2.0.0-p0 â€˜gem list bundlerâ€™</div><div class="line">salt â€˜*â€™ pyenv.do_with_python 2.0.0-p0 â€˜gem list bundlerâ€™ deploy</div><div class="line">salt â€˜*â€™ pyenv.install</div><div class="line">salt â€˜*â€™ pyenv.install_python 2.0.0-p0</div><div class="line">salt â€˜*â€™ pyenv.is_installed</div><div class="line">salt â€˜*â€™ pyenv.list</div><div class="line">salt â€˜*â€™ pyenv.rehash</div><div class="line">salt â€˜*â€™ pyenv.uninstall_python 2.0.0-p0</div><div class="line">salt â€˜*â€™ pyenv.update</div><div class="line">salt â€˜*â€™ pyenv.versions</div><div class="line">salt â€˜*â€™ raid.assemble /dev/md0 [â€˜/dev/xvddâ€™, â€˜/dev/xvdeâ€™]</div><div class="line">salt â€˜*â€™ raid.create /dev/md0 level=1 chunk=256 devices=â€[â€˜/dev/xvddâ€™, â€˜/dev/xvdeâ€™]â€ test_mode=True</div><div class="line">salt â€˜*â€™ raid.detail /dev/md0</div><div class="line">salt â€˜*â€™ raid.destroy /dev/md0</div><div class="line">salt â€˜*â€™ raid.detail â€˜/dev/md0â€²</div><div class="line">salt â€˜*â€™ raid.list</div><div class="line">salt â€˜*â€™ raid.save_config</div><div class="line">salt â€˜*â€™ random.get_str 128</div><div class="line">salt â€˜*â€™ random.hash â€˜I am a stringâ€™ md5</div><div class="line">salt â€˜*â€™ random.shadow_hash â€˜My5alTâ€™ â€˜MyP@asswdâ€™ md5</div><div class="line">salt â€˜*â€™ random.str_encode â€˜I am a new stringâ€™ base64</div><div class="line">salt â€˜*â€™ rbenv.default</div><div class="line">salt â€˜*â€™ rbenv.default 2.0.0-p0</div><div class="line">salt â€˜*â€™ rbenv.do â€˜gem list bundlerâ€™</div><div class="line">salt â€˜*â€™ rbenv.do â€˜gem list bundlerâ€™ deploy</div><div class="line">salt â€˜*â€™ rbenv.do_with_ruby 2.0.0-p0 â€˜gem list bundlerâ€™</div><div class="line">salt â€˜*â€™ rbenv.do_with_ruby 2.0.0-p0 â€˜gem list bundlerâ€™ deploy</div><div class="line">salt â€˜*â€™ rbenv.install</div><div class="line">salt â€˜*â€™ rbenv.install_ruby 2.0.0-p0</div><div class="line">salt â€˜*â€™ rbenv.is_installed</div><div class="line">salt â€˜*â€™ rbenv.list</div><div class="line">salt â€˜*â€™ rbenv.rehash</div><div class="line">salt â€˜*â€™ rbenv.uninstall_ruby 2.0.0-p0</div><div class="line">salt â€˜*â€™ rbenv.update</div><div class="line">salt â€˜*â€™ rbenv.versions</div><div class="line">salt â€˜*â€™ ret.get_fun mysql network.interfaces</div><div class="line">salt â€˜*â€™ ret.get_jid redis 20421104181954700505</div><div class="line">salt â€˜*â€™ ret.get_jids mysql</div><div class="line">salt â€˜*â€™ ret.get_minions mysql</div><div class="line">salt â€˜*â€™ rsync.config</div><div class="line">salt â€˜*â€™ rsync.rsync &#123;src&#125; &#123;dst&#125; &#123;delete=True&#125; &#123;update=True&#125; &#123;passwordfile=/etc/pass.crt&#125; &#123;exclude=xx&#125;</div><div class="line">salt â€˜*â€™ rsync.rsync &#123;src&#125; &#123;dst&#125; &#123;delete=True&#125; &#123;excludefrom=/xx.ini&#125;</div><div class="line">salt â€˜*â€™ rsync.version</div><div class="line">salt â€˜*â€™ rvm.do 2.0.0 &lt;<span class="built_in">command</span>&gt;</div><div class="line">salt â€˜*â€™ rvm.gemset_copy foobar bazquo</div><div class="line">salt â€˜*â€™ rvm.gemset_create 2.0.0 foobar</div><div class="line">salt â€˜*â€™ rvm.gemset_delete 2.0.0 foobar</div><div class="line">salt â€˜*â€™ rvm.gemset_empty 2.0.0 foobar</div><div class="line">salt â€˜*â€™ rvm.gemset_list</div><div class="line">salt â€˜*â€™ rvm.gemset_list_all</div><div class="line">salt â€˜*â€™ rvm.get</div><div class="line">salt â€˜*â€™ rvm.install</div><div class="line">salt â€˜*â€™ rvm.install_ruby 1.9.3-p385</div><div class="line">salt â€˜*â€™ rvm.is_installed</div><div class="line">salt â€˜*â€™ rvm.list</div><div class="line">salt â€˜*â€™ rvm.reinstall_ruby 1.9.3-p385</div><div class="line">salt â€˜*â€™ rvm.rubygems 2.0.0 1.8.24</div><div class="line">salt â€˜*â€™ rvm.set_default 2.0.0</div><div class="line">salt â€˜*â€™ rvm.wrapper &lt;ruby_string&gt; &lt;wrapper_prefix&gt;</div><div class="line">salt â€˜*â€™ saltutil.clear_cache</div><div class="line">salt â€˜*â€™ saltutil.cmd</div><div class="line">salt â€˜*â€™ saltutil.cmd</div><div class="line">salt â€˜*â€™ saltutil.find_cached_job &lt;job id&gt;</div><div class="line">salt â€˜*â€™ saltutil.find_job &lt;job id&gt;</div><div class="line">salt â€˜*â€™ saltutil.is_running state.highstate</div><div class="line">salt â€˜*â€™ saltutil.kill_job &lt;job id&gt;</div><div class="line">salt â€˜*â€™ saltutil.mmodule base test.ping</div><div class="line">salt â€˜*â€™ saltutil.refresh_modules</div><div class="line">salt â€˜*â€™ saltutil.refresh_pillar</div><div class="line">salt â€˜*â€™ saltutil.regen_keys</div><div class="line">salt â€˜*â€™ saltutil.revoke_auth</div><div class="line">salt â€˜*â€™ saltutil.runner jobs.list_jobs</div><div class="line">salt â€˜*â€™ saltutil.running</div><div class="line">salt â€˜*â€™ saltutil.signal_job &lt;job id&gt; 15</div><div class="line">salt â€˜*â€™ saltutil.sync_all</div><div class="line">salt â€˜*â€™ saltutil.sync_grains</div><div class="line">salt â€˜*â€™ saltutil.sync_modules</div><div class="line">salt â€˜*â€™ saltutil.sync_outputters</div><div class="line">salt â€˜*â€™ saltutil.sync_renderers</div><div class="line">salt â€˜*â€™ saltutil.sync_returners</div><div class="line">salt â€˜*â€™ saltutil.sync_states</div><div class="line">salt â€˜*â€™ saltutil.sync_utils</div><div class="line">salt â€˜*â€™ saltutil.term_job &lt;job id&gt;</div><div class="line">salt â€˜*â€™ saltutil.update</div><div class="line">salt â€˜*â€™ saltutil.update 0.10.3</div><div class="line">salt â€˜*â€™ saltutil.wheel key.accept match=jerry</div><div class="line">salt â€˜*â€™ schedule.add job1 <span class="keyword">function</span>=â€™test.pingâ€™ seconds=3600</div><div class="line">salt â€˜*â€™ schedule.build_schedule_item job1 <span class="keyword">function</span>=â€™test.pingâ€™ seconds=3600</div><div class="line">salt â€˜*â€™ schedule.delete job1</div><div class="line">salt â€˜*â€™ schedule.disable</div><div class="line">salt â€˜*â€™ schedule.disable_job job1</div><div class="line">salt â€˜*â€™ schedule.enable</div><div class="line">salt â€˜*â€™ schedule.enable_job job1</div><div class="line">salt â€˜*â€™ schedule.list</div><div class="line">salt â€˜*â€™ schedule.list show_all=True</div><div class="line">salt â€˜*â€™ schedule.modify job1 <span class="keyword">function</span>=â€™test.pingâ€™ seconds=3600</div><div class="line">salt â€˜*â€™ schedule.purge</div><div class="line">salt â€˜*â€™ schedule.reload</div><div class="line">salt â€˜*â€™ schedule.run_job job1</div><div class="line">salt â€˜*â€™ schedule.run_job job1 force=True</div><div class="line">salt â€˜*â€™ schedule.save</div><div class="line">salt â€˜minionâ€™ seed.apply path id [config=config_data] \</div><div class="line">salt â€˜minionâ€™ seed.mkconfig [config=config_data] [tmp=tmp_dir] \</div><div class="line">salt â€˜*â€™ serverdensity_device.create lama</div><div class="line">salt â€˜*â€™ serverdensity_device.create rich_lama group=lama_band installedRAM=32768</div><div class="line">salt â€˜*â€™ serverdensity_device.delete 51f7eafcdba4bb235e000ae4</div><div class="line">salt â€˜*â€™ serverdensity_device.get_sd_auth &lt;val&gt;</div><div class="line">salt â€˜*â€™ serverdensity_device.install_agent c2bbdd6689ff46282bdaa07555641498</div><div class="line">salt â€˜*â€™ serverdensity_device.ls</div><div class="line">salt â€˜*â€™ serverdensity_device.ls name=lama</div><div class="line">salt â€˜*â€™ serverdensity_device.ls name=lama group=lama_band installedRAM=32768</div><div class="line">salt â€˜*â€™ serverdensity_device.update 51f7eafcdba4bb235e000ae4 name=lama group=lama_band</div><div class="line">salt â€˜*â€™ serverdensity_device.update 51f7eafcdba4bb235e000ae4 name=better_lama group=rock_lamas swapSpace=512</div><div class="line">salt â€˜*â€™ service.available sshd</div><div class="line">salt â€˜*â€™ service.available sshd <span class="built_in">limit</span>=upstart</div><div class="line">salt â€˜*â€™ service.available sshd <span class="built_in">limit</span>=sysvinit</div><div class="line">salt â€˜*â€™ service.disable &lt;service name&gt;</div><div class="line">salt â€˜*â€™ service.disabled &lt;service name&gt;</div><div class="line">salt â€˜*â€™ service.enable &lt;service name&gt;</div><div class="line">salt â€˜*â€™ service.enabled &lt;service name&gt;</div><div class="line">salt â€˜*â€™ service.get_all</div><div class="line">salt â€˜*â€™ service.get_all <span class="built_in">limit</span>=upstart</div><div class="line">salt â€˜*â€™ service.get_all <span class="built_in">limit</span>=sysvinit</div><div class="line">salt â€˜*â€™ service.get_disabled</div><div class="line">salt â€˜*â€™ service.get_disabled <span class="built_in">limit</span>=upstart</div><div class="line">salt â€˜*â€™ service.get_disabled <span class="built_in">limit</span>=sysvinit</div><div class="line">salt â€˜*â€™ service.get_enabled</div><div class="line">salt â€˜*â€™ service.get_enabled <span class="built_in">limit</span>=upstart</div><div class="line">salt â€˜*â€™ service.get_enabled <span class="built_in">limit</span>=sysvinit</div><div class="line">salt â€˜*â€™ service.missing sshd</div><div class="line">salt â€˜*â€™ service.missing sshd <span class="built_in">limit</span>=upstart</div><div class="line">salt â€˜*â€™ service.missing sshd <span class="built_in">limit</span>=sysvinit</div><div class="line">salt â€˜*â€™ service.reload &lt;service name&gt;</div><div class="line">salt â€˜*â€™ service.restart &lt;service name&gt;</div><div class="line">salt â€˜*â€™ service.start &lt;service name&gt;</div><div class="line">salt â€˜*â€™ service.status &lt;service name&gt;</div><div class="line">salt â€˜*â€™ service.stop &lt;service name&gt;</div><div class="line">salt â€˜*â€™ shadow.default_hash</div><div class="line">salt â€˜*â€™ shadow.del_password username</div><div class="line">salt â€˜*â€™ shadow.gen_password â€˜I_am_passwordâ€™</div><div class="line">salt â€˜*â€™ shadow.gen_password â€˜I_am_passwordâ€™ crypt_saltâ€™I_am_saltâ€™ algorithm=sha256</div><div class="line">salt â€˜*â€™ shadow.info root</div><div class="line">salt â€˜*â€™ shadow.set_date username 0</div><div class="line">salt â€˜*â€™ shadow.set_expire username -1</div><div class="line">salt â€˜*â€™ shadow.set_inactdays username 7</div><div class="line">salt â€˜*â€™ shadow.set_maxdays username 90</div><div class="line">salt â€˜*â€™ shadow.set_mindays username 7</div><div class="line">salt â€˜*â€™ shadow.set_password root â€˜<span class="variable">$1</span><span class="variable">$UYCIxa628</span>.9qXjpQCjM4a..â€™</div><div class="line">salt â€˜*â€™ shadow.set_warndays username 7</div><div class="line">salt â€˜*â€™ sqlite3.fetch /root/test.db â€˜SELECT * FROM <span class="built_in">test</span>;â€™</div><div class="line">salt â€˜*â€™ sqlite3.indexes /root/test.db</div><div class="line">salt â€˜*â€™ sqlite3.indices /root/test.db</div><div class="line">salt â€˜*â€™ sqlite3.modify /root/test.db â€˜CREATE TABLE <span class="built_in">test</span>(id INT, testdata TEXT);â€™</div><div class="line">salt â€˜*â€™ sqlite3.sqlite_version</div><div class="line">salt â€˜*â€™ sqlite3.tables /root/test.db</div><div class="line">salt â€˜*â€™ sqlite3.version</div><div class="line">salt â€˜*â€™ ssh.auth_keys root</div><div class="line">salt â€˜*â€™ ssh.check_key &lt;user&gt; &lt;key&gt; &lt;enc&gt; &lt;comment&gt; &lt;options&gt;</div><div class="line">salt â€˜*â€™ root salt://ssh/keyfile</div><div class="line">salt â€˜*â€™ ssh.check_known_host &lt;user&gt; &lt;hostname&gt; key=â€™AAAAâ€¦FAaQ==â€™</div><div class="line">salt â€˜*â€™ ssh.get_known_host &lt;user&gt; &lt;hostname&gt;</div><div class="line">salt â€˜*â€™ ssh.hash_known_hosts</div><div class="line">salt â€˜*â€™ ssh.host_keys</div><div class="line">salt â€˜*â€™ ssh.recv_known_host &lt;hostname&gt; enc=&lt;enc&gt; port=&lt;port&gt;</div><div class="line">salt â€˜*â€™ ssh.rm_auth_key &lt;user&gt; &lt;key&gt;</div><div class="line">salt â€˜*â€™ ssh.rm_known_host &lt;user&gt; &lt;hostname&gt;</div><div class="line">salt â€˜*â€™ ssh.set_auth_key &lt;user&gt; â€˜&lt;key&gt;â€™ enc=â€™dsaâ€™</div><div class="line">salt â€˜*â€™ ssh.set_auth_key_from_file &lt;user&gt; salt://ssh_keys/&lt;user&gt;.id_rsa.pub</div><div class="line">salt â€˜*â€™ ssh.set_known_host &lt;user&gt; fingerprint=â€™xx:xx:..:xxâ€™ enc=â€™ssh-rsaâ€™ config=â€™.ssh/known_hostsâ€™</div><div class="line">salt â€˜*â€™ ssh.user_keys</div><div class="line">salt â€˜*â€™ ssh.user_keys user=user1</div><div class="line">salt â€˜*â€™ ssh.user_keys user=user1 pubfile=/home/user1/.ssh/id_rsa.pub prvfile=/home/user1/.ssh/id_rsa</div><div class="line">salt â€˜*â€™ ssh.user_keys user=â€[â€˜user1â€²,â€™user2â€²] pubfile=id_rsa.pub prvfile=id_rsa</div><div class="line">salt â€˜*â€™ state.clear_cache</div><div class="line">salt â€˜*â€™ state.high â€˜&#123;â€œvimâ€: &#123;â€œpkgâ€: [â€œinstalledâ€]&#125;&#125;â€™</div><div class="line">salt â€˜*â€™ state.highstate</div><div class="line">salt â€˜*â€™ state.highstate whitelist=sls1_to_run,sls2_to_run</div><div class="line">salt â€˜*â€™ state.highstate exclude=sls_to_exclude</div><div class="line">salt â€˜*â€™ state.highstate exclude=â€[&#123;â€˜id<span class="string">': â€˜id_to_excludeâ€™&#125;, &#123;â€˜sls'</span>: â€˜sls_to_excludeâ€™&#125;]â€</div><div class="line">salt â€˜*â€™ state.highstate pillar=â€&#123;foo: â€˜Foo!â€™, bar: â€˜Bar!â€™&#125;â€</div><div class="line">salt â€˜*â€™ state.low â€˜&#123;â€œstateâ€: â€œpkgâ€, â€œfunâ€: â€œinstalledâ€, â€œnameâ€: â€œviâ€&#125;â€™</div><div class="line">salt â€˜*â€™ state.pkg /tmp/state_pkg.tgz</div><div class="line">salt â€˜*â€™ state.running</div><div class="line">salt â€˜*â€™ state.show_highstate</div><div class="line">salt â€˜*â€™ state.show_low_sls foo</div><div class="line">salt â€˜*â€™ state.show_lowstate</div><div class="line">salt â€˜*â€™ state.show_sls core,edit.vim dev</div><div class="line">salt â€˜*â€™ state.show_top</div><div class="line">salt â€˜*â€™ state.single pkg.installed name=vim</div><div class="line">salt â€˜*â€™ state.sls core,edit.vim dev</div><div class="line">salt â€˜*â€™ state.sls core exclude=â€[&#123;â€˜id<span class="string">': â€˜id_to_excludeâ€™&#125;, &#123;â€˜sls'</span>: â€˜sls_to_excludeâ€™&#125;]â€</div><div class="line">salt â€˜*â€™ state.sls myslsfile pillar=â€&#123;foo: â€˜Foo!â€™, bar: â€˜Bar!â€™&#125;â€</div><div class="line">salt â€˜*â€™ state.sls_id apache http</div><div class="line">salt â€˜*â€™ state.template â€˜&lt;Path to template on the minion&gt;â€™</div><div class="line">salt â€˜*â€™ state.template_str â€˜&lt;Template String&gt;â€™</div><div class="line">salt â€˜*â€™ state.top reverse_top.sls</div><div class="line">salt â€˜*â€™ state.top reverse_top.sls exclude=sls_to_exclude</div><div class="line">salt â€˜*â€™ state.top reverse_top.sls exclude=â€[&#123;â€˜id<span class="string">': â€˜id_to_excludeâ€™&#125;, &#123;â€˜sls'</span>: â€˜sls_to_excludeâ€™&#125;]â€</div><div class="line">salt â€˜*â€™ status.all_status</div><div class="line">salt â€˜*â€™ status.cpuinfo</div><div class="line">salt â€˜*â€™ status.cpustats</div><div class="line">salt â€˜*â€™ status.custom</div><div class="line">salt â€˜*â€™ status.diskstats</div><div class="line">salt â€˜*â€™ status.diskusage [paths and/or filesystem types]</div><div class="line">salt â€˜*â€™ status.diskusage         <span class="comment"># usage for all filesystems</span></div><div class="line">salt â€˜*â€™ status.diskusage / /tmp  <span class="comment"># usage for / and /tmp</span></div><div class="line">salt â€˜*â€™ status.diskusage ext?    <span class="comment"># usage for ext[234] filesystems</span></div><div class="line">salt â€˜*â€™ status.diskusage / ext?  <span class="comment"># usage for / and all ext filesystems</span></div><div class="line">salt â€˜*â€™ status.loadavg</div><div class="line">salt â€˜*â€™ status.master</div><div class="line">salt â€˜*â€™ status.meminfo</div><div class="line">salt â€˜*â€™ status.netdev</div><div class="line">salt â€˜*â€™ status.netstats</div><div class="line">salt â€˜*â€™ status.nproc</div><div class="line">salt â€˜*â€™ status.pid &lt;sig&gt;</div><div class="line">salt â€˜*â€™ status.procs</div><div class="line">salt â€˜*â€™ status.uptime</div><div class="line">salt â€˜*â€™ status.version</div><div class="line">salt â€˜*â€™ status.vmstats</div><div class="line">salt â€˜*â€™ status.w</div><div class="line">salt â€˜*â€™ supervisord.add &lt;name&gt;</div><div class="line">salt â€˜*â€™ supervisord.custom â€œmstop â€˜*gunicorn*<span class="string">'â€</span></div><div class="line">salt â€˜*â€™ supervisord.options foo</div><div class="line">salt â€˜*â€™ supervisord.remove &lt;name&gt;</div><div class="line">salt â€˜*â€™ supervisord.reread</div><div class="line">salt â€˜*â€™ supervisord.restart &lt;service&gt;</div><div class="line">salt â€˜*â€™ supervisord.restart &lt;group&gt;:</div><div class="line">salt â€˜*â€™ supervisord.start &lt;service&gt;</div><div class="line">salt â€˜*â€™ supervisord.start &lt;group&gt;:</div><div class="line">salt â€˜*â€™ supervisord.status</div><div class="line">salt â€˜*â€™ supervisord.status_raw</div><div class="line">salt â€˜*â€™ supervisord.stop &lt;service&gt;</div><div class="line">salt â€˜*â€™ supervisord.stop &lt;group&gt;:</div><div class="line">salt â€˜*â€™ supervisord.update</div><div class="line">salt â€˜*â€™ sys.argspec pkg.install</div><div class="line">salt â€˜*â€™ sys.argspec sys</div><div class="line">salt â€˜*â€™ sys.argspec</div><div class="line">salt â€˜*â€™ sys.doc</div><div class="line">salt â€˜*â€™ sys.doc sys</div><div class="line">salt â€˜*â€™ sys.doc sys.doc</div><div class="line">salt â€˜*â€™ sys.doc network.traceroute user.info</div><div class="line">salt â€˜*â€™ sys.list_functions</div><div class="line">salt â€˜*â€™ sys.list_functions sys</div><div class="line">salt â€˜*â€™ sys.list_functions sys user</div><div class="line">salt â€˜*â€™ sys.list_modules</div><div class="line">salt â€˜*â€™ sys.list_returner_functions</div><div class="line">salt â€˜*â€™ sys.list_returner_functions mysql</div><div class="line">salt â€˜*â€™ sys.list_returner_functions mysql etcd</div><div class="line">salt â€˜*â€™ sys.list_returners</div><div class="line">salt â€˜*â€™ sys.list_runner_functions</div><div class="line">salt â€˜*â€™ sys.list_runner_functions state</div><div class="line">salt â€˜*â€™ sys.list_runner_functions state virt</div><div class="line">salt â€˜*â€™ sys.list_runners</div><div class="line">salt â€˜*â€™ sys.list_state_functions</div><div class="line">salt â€˜*â€™ sys.list_state_functions file</div><div class="line">salt â€˜*â€™ sys.list_state_functions pkg user</div><div class="line">salt â€˜*â€™ sys.list_state_modules</div><div class="line">salt â€˜*â€™ sys.reload_modules</div><div class="line">salt â€˜*â€™ sys.returner_doc</div><div class="line">salt â€˜*â€™ sys.returner_doc sqlite3</div><div class="line">salt â€˜*â€™ sys.returner_doc sqlite3.get_fun</div><div class="line">salt â€˜*â€™ sys.returner_doc sqlite3.get_fun etcd.get_fun</div><div class="line">salt â€˜*â€™ sys.runner_doc</div><div class="line">salt â€˜*â€™ sys.runner_doc cache</div><div class="line">salt â€˜*â€™ sys.runner_doc cache.grains</div><div class="line">salt â€˜*â€™ sys.runner_doc cache.grains mine.get</div><div class="line">salt â€˜*â€™ sys.state_doc</div><div class="line">salt â€˜*â€™ sys.state_doc service</div><div class="line">salt â€˜*â€™ sys.state_doc service.running</div><div class="line">salt â€˜*â€™ sys.state_doc service.running ipables.append</div><div class="line">salt â€˜*â€™ sysctl.assign net.ipv4.ip_forward 1</div><div class="line">salt â€˜*â€™ sysctl.get net.ipv4.ip_forward</div><div class="line">salt â€˜*â€™ sysctl.persist net.ipv4.ip_forward 1</div><div class="line">salt â€˜*â€™ sysctl.show</div><div class="line">salt â€˜*â€™ system.halt</div><div class="line">salt â€˜*â€™ system.init 3</div><div class="line">salt â€˜*â€™ system.poweroff</div><div class="line">salt â€˜*â€™ system.reboot</div><div class="line">salt â€˜*â€™ system.shutdown</div><div class="line">salt â€˜*â€™ test.arg 1 â€œtwoâ€ 3.1 txt=â€helloâ€ wow='&#123;a: 1, b: â€œhelloâ€&#125;â€™</div><div class="line">salt â€˜*â€™ test.arg_repr 1 â€œtwoâ€ 3.1 txt=â€helloâ€ wow=<span class="string">'&#123;a: 1, b: â€œhelloâ€&#125;â€™</span></div><div class="line">salt â€˜*â€™ test.arg_type 1 â€˜intâ€™</div><div class="line">salt â€˜*â€™ test.collatz 3</div><div class="line">salt â€˜*â€™ test.conf_test</div><div class="line">salt â€˜*â€™ test.cross_test file.gid_to_group 0</div><div class="line">salt â€˜*â€™ test.echo â€˜foo bar baz quo quxâ€™</div><div class="line">salt â€˜*â€™ test.exception â€˜Oh noes!â€™</div><div class="line">salt â€˜*â€™ test.fib 3</div><div class="line">salt â€˜*â€™ test.get_opts</div><div class="line">salt â€˜*â€™ test.kwarg num=1 txt=â€twoâ€ env='&#123;a: 1, b: â€œhelloâ€&#125;â€™</div><div class="line">salt â€˜*â€™ test.not_loaded</div><div class="line">salt â€˜*â€™ test.opts_pkg</div><div class="line">salt â€˜*â€™ test.outputter foobar</div><div class="line">salt â€˜*â€™ test.ping</div><div class="line">salt â€˜*â€™ test.provider service</div><div class="line">salt â€˜*â€™ test.providers</div><div class="line">salt â€˜*â€™ test.rand_sleep 60</div><div class="line">salt â€˜*â€™ test.rand_str</div><div class="line">salt â€˜*â€™ test.retcode 42</div><div class="line">salt â€˜*â€™ test.sleep 20</div><div class="line">salt â€˜*â€™ test.stack</div><div class="line">salt â€˜*â€™ test.tty tty0 â€˜This is a <span class="built_in">test</span>â€™</div><div class="line">salt â€˜*â€™ test.tty pts3 â€˜This is a <span class="built_in">test</span>â€™</div><div class="line">salt â€˜*â€™ test.version</div><div class="line">salt â€˜*â€™ test.versions_information</div><div class="line">salt â€˜*â€™ test.versions_report</div><div class="line">salt â€˜*â€™ timezone.get_hwclock</div><div class="line">salt â€˜*â€™ timezone.get_offset</div><div class="line">salt â€˜*â€™ timezone.get_zone</div><div class="line">salt â€˜*â€™ timezone.get_zonecode</div><div class="line">salt â€˜*â€™ timezone.set_hwclock UTC</div><div class="line">salt â€˜*â€™ timezone.set_zone â€˜America/Denverâ€™</div><div class="line">salt â€˜*â€™ timezone.zone_compare â€˜America/Denverâ€™</div><div class="line">salt â€˜*â€™ user.add name &lt;uid&gt; &lt;gid&gt; &lt;groups&gt; &lt;home&gt; &lt;shell&gt;</div><div class="line">salt â€˜*â€™ user.chfullname foo â€œFoo Barâ€</div><div class="line">salt â€˜*â€™ user.chgid foo 4376</div><div class="line">salt â€˜*â€™ user.chgroups foo wheel,root True</div><div class="line">salt â€˜*â€™ user.chhome foo /home/users/foo True</div><div class="line">salt â€˜*â€™ user.chhomephone foo â€œ7735551234â€</div><div class="line">salt â€˜*â€™ user.chroomnumber foo 123</div><div class="line">salt â€˜*â€™ user.chshell foo /bin/zsh</div><div class="line">salt â€˜*â€™ user.chuid foo 4376</div><div class="line">salt â€˜*â€™ user.chworkphone foo â€œ7735550123â€</div><div class="line">salt â€˜*â€™ user.delete name remove=True force=True</div><div class="line">salt â€˜*â€™ user.getent</div><div class="line">salt â€˜*â€™ user.info root</div><div class="line">salt â€˜*â€™ user.list_groups foo</div><div class="line">salt â€˜*â€™ user.list_users</div><div class="line">salt â€˜*â€™ virtualenv.create /path/to/new/virtualenv</div><div class="line">salt â€˜*â€™ virtualenv.get_site_packages /path/to/my/venv</div><div class="line">salt â€˜*â€™ webutil.useradd /etc/httpd/htpasswd larry badpassword</div><div class="line">salt â€˜*â€™ webutil.useradd /etc/httpd/htpasswd larry badpass opts=ns</div><div class="line">salt â€˜*â€™ webutil.useradd /etc/httpd/htpasswd larry badpassword</div><div class="line">salt â€˜*â€™ webutil.useradd /etc/httpd/htpasswd larry badpass opts=ns</div><div class="line">salt â€˜*â€™ webutil.userdel /etc/httpd/htpasswd larry</div></pre></td></tr></table></figure>

	

	

</article>




	<article>
	
		<h1><a href="/2015/11/20/è‡ªåŠ¨åŒ–+Jenkins/saltstack/è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·--saltstackè¿œç¨‹å¯åŠ¨tomcatæ—¥å¿—ä¹±ç  /">è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·--saltstackè¿œç¨‹å¯åŠ¨tomcatæ—¥å¿—ä¹±ç </a></h1>
	
	<div class="article__infos">
		<span class="article__date">2015-11-20</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Automation/">Automation</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Saltstack/">Saltstack</a>
			</span>
		
	</div>

	

	
		<h1 id="è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·â€“saltstackè¿œç¨‹å¯åŠ¨tomcatæ—¥å¿—ä¹±ç "><a href="#è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·â€“saltstackè¿œç¨‹å¯åŠ¨tomcatæ—¥å¿—ä¹±ç " class="headerlink" title="è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·â€“saltstackè¿œç¨‹å¯åŠ¨tomcatæ—¥å¿—ä¹±ç "></a>è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·â€“saltstackè¿œç¨‹å¯åŠ¨tomcatæ—¥å¿—ä¹±ç </h1><p>æœ€è¿‘åœ¨çº¿ä¸Šå‘å¸ƒtomcatï¼Œæƒ³åšåˆ°è‡ªåŠ¨éƒ¨ç½²ï¼Œå¯æ˜¯å‡ºç°äº†é—®é¢˜ï¼Œå°±æ˜¯æ—¥å¿—è¾“å‡ºä¼šæœ‰ä¹±ç ï¼Œç”¨æˆ·åçš„getMyUserInfo æ˜¯ä¸€å †ä¹±ç ï¼ŒsaltåŸç†ç³»ç»Ÿå­—ç¬¦é›†æ²¡å¤ªæ·±å…¥çš„ç ”ç©¶ï¼Œåæ¥åœ¨å¢™å¤–çœ‹åˆ°ä¸€ç¯‡æ–‡ç« å¾ˆå®ç”¨ï¼Œå°±åšäº†ä¸‹è‡ªå·±çš„æ€»ç»“ã€‚</p>
<p>å¼€å§‹æˆ‘æ˜¯saltæ‰§è¡Œè¿œç¨‹è„šæœ¬ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">salt <span class="string">'tomcat_A1'</span> cmd.run <span class="string">'/etc/init.d/tomcat-account start'</span></div></pre></td></tr></table></figure>
<p>ç›´æ¥è¿™æ ·å»æ‰§è¡Œï¼Œå‘ç°ä¼šå‡ºç°ä¹±ç ã€‚</p>
<p>è¿™æ˜¯æ—¥å¿—è¾“å‡ºç»“æœï¼Œæˆ‘ç”¨curlå»è°ƒæˆ‘çš„userinfoidï¼š è°ƒç”¨ä¹‹å‰æˆ‘è¿™è¾¹å…ˆåˆ é™¤äº†æŒ‡å®šçš„ç”¨æˆ·ä¿¡æ¯redisçš„ç¼“å­˜ï¼Œç„¶ååœ¨ç”¨curlåœ¨å¦å¤–ä¸€å°æœºå™¨ä¸Šé¢è°ƒç”¨çœ‹çœ‹ã€‚</p>
<p>tomcat_A1 æœºå™¨æ—¥å¿—ï¼šä¹±ç ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">1</div><div class="line">nickname1:?????????</div><div class="line">11111</div><div class="line">nickname1:?????????</div><div class="line">333333</div><div class="line">3</div><div class="line">4</div><div class="line">?????????</div></pre></td></tr></table></figure>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/tomcat_error2.jpg" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/tomcat_error3.png" alt=""></figure></p>
<p>åœ¨minionè®¾ç½®å­—ç¬¦é›†å¢åŠ LCALL=<code>â€zhUS.UTF-8â€³ï¼š</code></p>
<p>cat /etc/sysconfig/i18n</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">LANG=<span class="string">"en_US.UTF-8"</span></div><div class="line">LC_ALL=<span class="string">"zh_US.UTF-8"</span></div><div class="line">SYSFONT=<span class="string">"latarcyrheb-sun16"</span></div></pre></td></tr></table></figure>
<p>cmd.run è°ƒç”¨æ—¶éœ€è¦åŠ å…¥env=â€™{â€œLCALLâ€:â€œzhCN.UTF-8â€}â€™ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">salt <span class="string">'tomcat_A1'</span> cmd.run <span class="string">'/etc/init.d/tomcat-account sop'</span> env=<span class="string">'&#123;"LC_ALL": "zh_CN.UTF-8"&#125;'</span></div><div class="line"><span class="comment">###å…ˆå…³é—­tomcat</span></div><div class="line">salt <span class="string">'tomcat_A1'</span> cmd.run <span class="string">'/etc/init.d/tomcat-account start'</span> env=<span class="string">'&#123;"LC_ALL": "zh_CN.UTF-8"&#125;'</span></div><div class="line"><span class="comment">###åœ¨å¯åŠ¨tomcat</span></div></pre></td></tr></table></figure>
<p>åœ¨è°ƒç”¨æŸ¥çœ‹ æ—¥å¿—å°±æ¢å¤æ­£å¸¸äº†ã€‚æ•°æ®åº“çš„ç”¨æˆ·åidä¹Ÿæ­£å¸¸äº†ï¼Œå¦‚æœä½ å†™å‘å¸ƒè„šæœ¬æŠŠtomcatå¯åŠ¨å†™åœ¨æ‰§è¡Œè„šæœ¬é‡Œé¢çš„è¯ï¼Œå¦‚æœæ·»åŠ äº†ä¸è¡Œï¼Œå°±æ‹†åˆ†å¼€ï¼Œå°±å¯ä»¥äº†ã€‚</p>
<p>è¿™æ˜¯ä¸€æ¬¡è¡€çš„æ•™è®­å•Šï¼Œå¯¹å­—ç¬¦é›†ä¸æ˜¯å¾ˆå¤šï¼Œå®Œå…¨æ‘¸ä¸ç€å¤´è„‘ï¼Œè¿˜å¥½å¤šæ™®åŠäº†ä¸‹ï¼Œç»ˆäºå¼„å¥½äº†ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2015/11/01/è‡ªåŠ¨åŒ–+Jenkins/saltstack/è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·--Saltstackå†™slsè¯­æ³•æ‰¹é‡éƒ¨ç½²zabbix_agent/">è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·--Saltstackå†™slsè¯­æ³•æ‰¹é‡éƒ¨ç½²zabbix_agent</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2015-11-01</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Automation/">Automation</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Saltstack/">Saltstack</a>
			</span>
		
	</div>

	

	
		<h1 id="Saltstackæ‰¹é‡éƒ¨ç½²zabbix-agentæœåŠ¡"><a href="#Saltstackæ‰¹é‡éƒ¨ç½²zabbix-agentæœåŠ¡" class="headerlink" title="Saltstackæ‰¹é‡éƒ¨ç½²zabbix_agentæœåŠ¡"></a>Saltstackæ‰¹é‡éƒ¨ç½²zabbix_agentæœåŠ¡</h1><figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">epel_install:</div><div class="line">  file.managed:</div><div class="line">    -<span class="ruby"> <span class="symbol">name:</span> /root/zabbix-release-<span class="number">2.4</span>-<span class="number">1</span>.el6.noarch.rpm             <span class="comment">## æŒ‡å®šèŠ‚ç‚¹çš„epelå®‰è£…åŒ…çš„å­˜æ”¾è·¯å¾„</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">source:</span> <span class="symbol">salt:</span>/<span class="regexp">/epel/zabbix</span>-release-<span class="number">2.4</span>-<span class="number">1</span>.el6.noarch.rpm     <span class="comment">## æŒ‡å®šä»masterçš„å“ªä¸ªä½ç½®æ‹·è´epelçš„rpmåŒ…</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">user:</span> root                                                  <span class="comment">## æ–‡ä»¶çš„æ‹¥æœ‰è€…</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">group:</span> root                                                 <span class="comment">## æ–‡ä»¶çš„æ‰€å±ç»„</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">mode:</span> <span class="number">777</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">backup:</span> minion</span></div><div class="line"></div><div class="line">  cmd.run:</div><div class="line">    -<span class="ruby"> <span class="symbol">name:</span> rpm -ivh /root/zabbix-release-<span class="number">2.4</span>-<span class="number">1</span>.el6.noarch.rpm    <span class="comment">## æ‰§è¡ŒrpmåŒ…çš„å®‰è£…</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">unless:</span> test -f /etc/yum.repos.d/epel.repo                  <span class="comment">## å¦‚æœå­˜åœ¨è¿™ä¸ªæ–‡ä»¶å°±ä¸å†æ‰§è¡Œå®‰è£…ç¨‹åº</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">require:</span></span></div><div class="line">      -<span class="ruby"> <span class="symbol">file:</span> epel_install</span></div><div class="line"></div><div class="line">SELINUX:</div><div class="line">  cmd.run:</div><div class="line">    -<span class="ruby"> <span class="symbol">name:</span> service iptables stop &amp;&amp; chkconfig iptables off &amp;&amp; setenforce <span class="number">0</span>      </span></div><div class="line"></div><div class="line">   #sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config</div><div class="line">   </div><div class="line">    -<span class="ruby"> <span class="symbol">require:</span></span></div><div class="line">      -<span class="ruby"> <span class="symbol">file:</span> epel_install</span></div><div class="line"></div><div class="line">cache_yum:</div><div class="line">  cmd.run:</div><div class="line">    -<span class="ruby"> <span class="symbol">name:</span> yum makecache                                 <span class="comment">## ç”Ÿæˆyumçš„ç¼“å­˜</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">require:</span> </span></div><div class="line">      -<span class="ruby"> <span class="symbol">file:</span> epel_install                              <span class="comment">## ç”Ÿæˆç¼“å­˜è¦åœ¨epelå®‰è£…ä¹‹å</span></span></div><div class="line"></div><div class="line">zabbix-agentd:</div><div class="line">  pkg.installed: []</div><div class="line">  service.running:</div><div class="line">#    - name: zabbix-agent</div><div class="line">#    - running</div><div class="line">    -<span class="ruby"> <span class="symbol">enable:</span> True</span></div><div class="line">    -<span class="ruby"> <span class="symbol">reload:</span> True</span></div><div class="line">    -<span class="ruby"> <span class="symbol">watch:</span></span></div><div class="line">      -<span class="ruby"> <span class="symbol">file:</span> /etc/zabbix/zabbix_agentd.conf</span></div><div class="line">    -<span class="ruby"> <span class="symbol">require:</span></span></div><div class="line">      -<span class="ruby"> <span class="symbol">file:</span> epel_install</span></div><div class="line"><span class="comment"></span></div><div class="line"></div><div class="line">/etc/zabbix/zabbix_agentd.conf:</div><div class="line">   file.managed:</div><div class="line">    -<span class="ruby"> <span class="symbol">source:</span> <span class="symbol">salt:</span>/<span class="regexp">/zabbix/zabbix</span>_agentd.conf</span></div><div class="line">    -<span class="ruby"> <span class="symbol">user:</span> zabbix                                          <span class="comment">## æ–‡ä»¶çš„æ‹¥æœ‰è€…</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">group:</span> zabbix                                         <span class="comment">## æ–‡ä»¶çš„æ‰€å±ç»„</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">mode:</span> <span class="number">644</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">backup:</span> minion</span></div><div class="line">    -<span class="ruby"> <span class="symbol">template:</span> jinja</span></div><div class="line">    -<span class="ruby"> <span class="symbol">require:</span></span></div><div class="line">      -<span class="ruby"> <span class="symbol">file:</span> epel_install</span></div><div class="line"></div><div class="line">ntp:</div><div class="line">  pkg.installed: []                                        ## å®‰è£…ntp </div><div class="line">#     name: ntp</div><div class="line">  service.running:</div><div class="line">#     name: ntpd</div><div class="line">#     running</div><div class="line">     enable: True</div><div class="line">    reload: True</div><div class="line">    watch:</div><div class="line">    file: /etc/ntp.conf</div><div class="line">    require:                                            ## å®‰è£…ntpè¦åœ¨epelå®‰è£…ä¹‹å</div><div class="line">    file: epel_install</div><div class="line"><span class="comment"></span></div><div class="line">/etc/ntp.conf:</div><div class="line">  file.managed:</div><div class="line">    -<span class="ruby"> <span class="symbol">source:</span> <span class="symbol">salt:</span>/<span class="regexp">/ntp/ntp</span>.conf</span></div><div class="line">    -<span class="ruby"> <span class="symbol">user:</span> root                                          <span class="comment">## æ–‡ä»¶çš„æ‹¥æœ‰è€…</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">group:</span> root                                         <span class="comment">## æ–‡ä»¶çš„æ‰€å±ç»„</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">mode:</span> <span class="number">644</span></span></div><div class="line">    -<span class="ruby"> <span class="symbol">backup:</span> minion</span></div><div class="line">    -<span class="ruby"> <span class="symbol">require:</span></span></div><div class="line">      -<span class="ruby"> <span class="symbol">file:</span> epel_install</span></div></pre></td></tr></table></figure>

	

	

</article>




	<article>
	
		<h1><a href="/2015/11/01/è‡ªåŠ¨åŒ–+Jenkins/saltstack/è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·--SaltStack-åˆ†ç»„ï¼ˆä½¿ç”¨è®°å½•,groupsï¼‰ /">è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·--SaltStack-åˆ†ç»„ï¼ˆä½¿ç”¨è®°å½•,groupsï¼‰</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2015-11-01</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Automation/">Automation</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Saltstack/">Saltstack</a>
			</span>
		
	</div>

	

	
		<h1 id="è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·â€“SaltStack-åˆ†ç»„ï¼ˆä½¿ç”¨è®°å½•-groupsï¼‰"><a href="#è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·â€“SaltStack-åˆ†ç»„ï¼ˆä½¿ç”¨è®°å½•-groupsï¼‰" class="headerlink" title="è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·â€“SaltStack-åˆ†ç»„ï¼ˆä½¿ç”¨è®°å½•,groupsï¼‰"></a>è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·â€“SaltStack-åˆ†ç»„ï¼ˆä½¿ç”¨è®°å½•,groupsï¼‰</h1><p>åœ¨ä½¿ç”¨ SaltStack å¯¹ä¸»æœºè¿›è¡Œæ‰¹é‡ç®¡ç†çš„æ—¶å€™ï¼Œå› ä¸ºä¸åŒçš„æœåŠ¡å™¨ç»„æ‰€åšçš„ä¸šåŠ¡åŠŸèƒ½ä¸åŒï¼Œå› æ­¤ä¸ºäº†æ›´åŠ æ–¹ä¾¿çš„ç®¡ç†ï¼Œä¸ºäº†ä¾¿äºç®¡ç†åŠŸèƒ½ä¸šåŠ¡ç›¸ä¼¼çš„minion,Saltstackæä¾›äº†åˆ†ç»„çš„æ¨¡å¼ï¼Œå› ä¸ºçº¿ä¸Šæœºå™¨å¤šï¼Œä¸å¯èƒ½æ¯æ¬¡éƒ½æ˜¯â€œ*â€æˆ–è€…â€œipä¸»æœºåâ€ è¿™æ ·ä¸ç°å®çš„ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬ç°åœ¨éƒ½æ˜¯æä¾›åˆ†ç»„ï¼Œå“ªé‡Œçš„æœºå™¨åˆ†å“ªä¸ªç»„è¿™æ ·ä½ æ“ä½œèµ·æ¥å°±æ–¹ä¾¿è€Œä¸”å®¹æ˜“æ’æŸ¥ï¼Œå› æ­¤å°±è‡ªå·±åœ¨åˆ†ç»„ä½¿ç”¨çš„è¿‡ç¨‹ä¸­æœ‰ä»¥ä¸‹ä¸€ç‚¹è®°å½•ä¸‹ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://docs.saltstack.com/topics/targeting/nodegroups.html" target="_blank" rel="external">http://docs.saltstack.com/topics/targeting/nodegroups.html</a></p>
<p>å‚è€ƒ SaltStack çš„å®˜æ–¹æ–‡æ¡£ 4.4 Compound matchers å’Œ 4.3. Node groups çŸ¥é“ï¼Œå¯¹ç›®æ ‡æœåŠ¡å™¨åˆ†ç»„æœ‰ä»¥ä¸‹ä¸ƒç§æ–¹å¼ï¼Œè¿™ä¸ƒç§æ–¹å¼çš„æ ‡ç¤ºç¬¦åˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li>G â€“ é’ˆå¯¹ Grains åšå•ä¸ªåŒ¹é…ï¼Œä¾‹å¦‚ï¼šG@os:Ubuntu</li>
<li>E â€“ é’ˆå¯¹ minion é’ˆå¯¹æ­£åˆ™è¡¨è¾¾å¼åšåŒ¹é…ï¼Œä¾‹å¦‚ï¼šE@web\d+.(dev|qa|prod).loc</li>
<li>P â€“ é’ˆå¯¹ Grains åšæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œä¾‹å¦‚ï¼šP@os:(RedHat|Fedora|CentOS)</li>
<li>L â€“ é’ˆå¯¹ minion åšåˆ—è¡¨åŒ¹é…ï¼Œä¾‹å¦‚ï¼šL@minion1.example.com,minion3.domain.com or bl*.domain.com</li>
<li>I â€“ é’ˆå¯¹ Pillar åšå•ä¸ªåŒ¹é…ï¼Œä¾‹å¦‚ï¼šI@pdata:foobar</li>
<li>S â€“ é’ˆå¯¹å­ç½‘æˆ–æ˜¯ IP åšåŒ¹é…ï¼Œä¾‹å¦‚ï¼šS@192.168.1.0/24 or S@192.168.1.100</li>
<li>R â€“ é’ˆå¯¹å®¢æˆ·ç«¯èŒƒå›´åšåŒ¹é…ï¼Œä¾‹å¦‚ï¼š R@%foo.bar</li>
</ul>
<p>ç„¶åæˆ‘è‡ªå·±åœ¨åšåˆ†ç»„çš„æ—¶å€™ï¼Œå°è¯•äº†ä¸‹ L æ˜¯å¦å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</p>
<p>é…ç½®ï¼š</p>
<p>ç¼–è¾‘é…ç½®æ–‡ä»¶ vi /etc/salt/master è¿™é‡Œå¤§çº¦706-714è¡Œï¼š<br>åŸæ–‡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">#####         Node Groups           #####</span></div><div class="line"><span class="comment">##########################################</span></div><div class="line"><span class="comment"># Node groups allow for logical groupings of minion nodes. A group consists of a group</span></div><div class="line"><span class="comment"># name and a compound target.</span></div><div class="line"><span class="comment">#nodegroups:</span></div><div class="line"><span class="comment">#  group1: 'L@foo.domain.com,bar.domain.com,baz.domain.com and bl*.domain.com'</span></div><div class="line"><span class="comment">#  group2: 'G@os:Debian and foo.domain.com'</span></div></pre></td></tr></table></figure>
<p> ç»¿è‰²çš„æ˜¯æŒ‡å®šç»„åï¼šå¯ä»¥å®šä¹‰è‡ªå·±å¥½è®°çš„ç»„åï¼Œåº”ç”¨æœåŠ¡å™¨æ˜¯éœ€è¦åŒæ ·é…ç½®çš„ï¼Œå¯ä»¥æ”¾åœ¨åŒä¸€ä¸ªåˆ†ç»„ã€‚<br>ä¿®æ”¹é…ç½®ï¼š<br>æ³¨æ„ï¼šè¿™é‡Œç»„åå‰é¢ï¼šéœ€è¦ç©ºæ ¼ï¼Œæ¯ä¸ªç”¨æˆ·keyåç§°ï¼Œéƒ½é€—å·éš”å¼€ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#nodegroups:</span></div><div class="line"><span class="comment">#  group1: 'L@foo.domain.com,bar.domain.com,baz.domain.com and bl*.domain.com'</span></div><div class="line"><span class="comment">#  group2: 'G@os:Debian and foo.domain.com'</span></div><div class="line">ihaozhuo1: <span class="string">''</span>L@d_104_article_1,d_108_account_1,d_109_comm_1,d_110_consumer_1â€˜</div><div class="line">ihaozhuo2: <span class="string">'L@api'</span></div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥æµ‹è¯•ä¸‹ï¼š</p>
<p>-N æ˜¯æŒ‡å®šåˆ†ç»„åç§°ï¼š</p>
<p>æ‰§è¡Œå‘½ä»¤ sudo salt -N â€œihaozhuo1â€ test.pingç»“æœä¸ºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@jumper</span> <span class="string">~]#</span> <span class="string">salt</span>  <span class="bullet">-N</span> <span class="string">'ihaozhuo1'</span> <span class="string">test.ping</span></div><div class="line"><span class="attr">d_104_article_1:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">d_108_account_1:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">d_109_comm_1:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">d_110_consumer_1:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="string">[root@jumper</span> <span class="string">~]#</span> <span class="string">salt</span>  <span class="bullet">-N</span> <span class="string">'ihaozhuo2'</span> <span class="string">test.ping</span></div><div class="line"><span class="attr">api:</span></div><div class="line">    <span class="literal">True</span></div></pre></td></tr></table></figure>
<p>åˆ†ç»„åˆ†å¥½å‡ å°ä¸€èµ·ï¼Œæ˜¯å¯ä»¥è·å–çš„ã€‚åŒ¹é…æŒ‡å®šçš„key</p>
<p>ä¿®æ”¹é…ç½®å°è¯•ä¸€ï¼š</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="section">#nodegroups:</span></div><div class="line"><span class="section">#  group1: 'L@foo.domain.com,bar.domain.com,baz.domain.com and bl*.domain.com'</span></div><div class="line"><span class="section">#  group2: 'G@os:Debian and foo.domain.com'</span></div><div class="line">ihaozhuo1: â€˜ L@JF1-TEST1-001,JF1-TEST1-002 or JF-TEST1-0[<span class="string">0-9</span>][<span class="symbol">0-9</span>]'</div></pre></td></tr></table></figure>
<p>æ‰§è¡Œå‘½ä»¤ sudo salt -N TEST1 test.pingç»“æœä¸ºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="attr">JF1-TEST1-002:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">JF1-TEST1-001:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">JF1-TEST1-003:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">JF1-TEST1-004:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">JF1-TEST1-006:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">JF1-TEST1-005:</span></div><div class="line">    <span class="literal">True</span></div></pre></td></tr></table></figure>
<p>åŒ¹é…äº†æ‰€æœ‰æŒ‡å®šçš„key.</p>
<p>ä½¿ç”¨ L åˆ—è¡¨çš„æ–¹å¼ï¼Œå¿…é¡»æŠŠ minion åˆ—å‡ºæ¥ï¼Œæˆ–è€…æ˜¯åˆ—å‡ºå‡ å°åï¼Œåœ¨åé¢æ¥ or æˆ–è€… and è¡¨è¾¾å¼ï¼Œ or æˆ–è€… and åé¢æ¥çš„è¡¨è¾¾å¼åé¢å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<p>æ³¨ï¼šæƒ³ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨<code>E</code></p>

	

	

</article>




	<article>
	
		<h1><a href="/2015/10/10/è‡ªåŠ¨åŒ–+Jenkins/saltstack/è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·--Saltstackå®‰è£…éƒ¨ç½²é…ç½®ä½¿ç”¨/">è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·--Saltstackå®‰è£…éƒ¨ç½²é…ç½®ä½¿ç”¨</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2015-10-10</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Automation/">Automation</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Saltstack/">Saltstack</a>
			</span>
		
	</div>

	

	
		<h1 id="è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·â€“Saltstackå®‰è£…éƒ¨ç½²é…ç½®ä½¿ç”¨"><a href="#è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·â€“Saltstackå®‰è£…éƒ¨ç½²é…ç½®ä½¿ç”¨" class="headerlink" title="è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·â€“Saltstackå®‰è£…éƒ¨ç½²é…ç½®ä½¿ç”¨"></a>è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·â€“Saltstackå®‰è£…éƒ¨ç½²é…ç½®ä½¿ç”¨</h1><p>å‰è¨€ï¼š</p>
<p>å¼€å§‹å­¦saltstackçš„æ—¶å€™æ˜¯åœ¨ç°åœ¨ä¸€å®¶åšCDNäº‘åŠ é€Ÿçš„é‚£æ˜¯åœ¨2014å¹´ï¼Œsaltåˆšåˆšå‡ºæ¥æ‰€ä»¥æˆ‘è§‰å¾—æˆ‘æ¥è§¦åº”è¯¥ä¹Ÿç®—æ—©çš„ã€‚ ä½¿ç”¨æœ€å¤šçš„åŒæ­¥ä¸‹å‘çš„ç”¨åˆ°è¿™ä¸ªå·¥å…·ï¼Œä¸‹é¢æˆ‘ç®€å•ä»‹ç»å’Œæ“ä½œç»™å¤§å®¶çœ‹ä¸‹ã€‚<br>Salt å’Œ Puppet Chef ä¸€æ ·å¯ä»¥è®©ä½ åŒæ—¶åœ¨å¤šå°æœåŠ¡å™¨ä¸Šæ‰§è¡Œå‘½ä»¤ä¹ŸåŒ…æ‹¬å®‰è£…å’Œé…ç½®è½¯ä»¶ã€‚</p>
<p>Salt æœ‰ä¸¤ä¸ªä¸»è¦çš„åŠŸèƒ½ï¼š<code>é…ç½®ç®¡ç†å’Œè¿œç¨‹æ‰§è¡Œ</code>ã€‚ Saltstackæ˜¯ä¸€ä¸ªå¤§å‹åˆ†å¸ƒå¼çš„é…ç½®ç®¡ç†ç³»ç»Ÿï¼ˆå®‰è£…å‡çº§å¸è½½è½¯ä»¶ï¼Œæ£€æµ‹ç¯å¢ƒï¼‰ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè¿œç¨‹å‘½ä»¤æ‰§è¡Œç³»ç»Ÿã€‚é€šè¿‡c/sçš„æ¨¡å‹å®ç°ã€‚æœåŠ¡å™¨ç«¯å¯¹è¿œç¨‹å®¢æˆ·æœºçš„æ“ä½œï¼š</p>
<p>###ï¼ˆä¸€ï¼‰éƒ¨ç½²è™šæ‹ŸåŒ–ç¯å¢ƒ</p>
<p>ï¼ˆ1ï¼‰ä¸¤ç»„æœåŠ¡å™¨è¿›è¡Œï¼Œæ“ä½œç³»ç»Ÿç‰ˆæœ¬ä¸ºCentos release 6.4 RHEL ä¹Ÿå¯ä»¥ã€‚ ï¼ˆ2ï¼‰å®‰è£…è¿™ä¸ªå…ˆå®‰è£…ä¸‹epel ç”±äºç°åœ¨ç½‘ç»œRHELå®˜ç½‘yumæºè¿˜æ²¡æœ‰ saltstackçš„å®‰è£…åŒ…æ”¯æŒã€‚å› æ­¤å…ˆå®‰è£…epelä½œä¸ºéƒ¨ç½²saltstackçš„é»˜è®¤yumæºã€‚</p>
<ul>
<li>CenOs 5 ç‰ˆæœ¬: rpm -Uvh ä¸‹è½½åœ°å€ï¼š<a href="http://ftp.linux.ncsu.edu/pud/epel/6/i386/epel-release-5-4.noarch.rpm" target="_blank" rel="external">http://ftp.linux.ncsu.edu/pud/epel/6/i386/epel-release-5-4.noarch.rpm</a></li>
<li>CenOs 6 ç‰ˆæœ¬: rpm -Uvh ä¸‹è½½åœ°å€ï¼š<a href="http://ftp.linux.ncsu.edu/pud/epel/6/i386/epel-release-6-8.noarch.rpm" target="_blank" rel="external">http://ftp.linux.ncsu.edu/pud/epel/6/i386/epel-release-6-8.noarch.rpm</a></li>
<li>ç™¾åº¦äº‘ä¹Ÿå¯ä»¥å»ä¸‹è½½ï¼Œæˆ‘çš„æ˜¯centos 64ä½çš„ <a href="http://pan.baidu.com/s/1eQGWboI" target="_blank" rel="external">http://pan.baidu.com/s/1eQGWboI</a></li>
</ul>
<p><code>(1) ä¸»æœåŠ¡å™¨ ï¼ˆä¸»æ§ç«¯ï¼‰ IPï¼š192.168.23.21</code></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-id">#rpm</span> -ivh http:<span class="comment">//mirrors.sohu.com/fedora-epel/6/x86_64/epel-release-6-8.noarch.rpm</span></div><div class="line"><span class="selector-id">#yum</span> install salt-master -y    ï¼ˆå®‰è£…salt-masterï¼‰</div><div class="line"><span class="selector-id">#chkconfig</span> salt-master on</div><div class="line"><span class="selector-id">#service</span> salt-master start</div></pre></td></tr></table></figure>
<p><code>(2)ä»æœåŠ¡å™¨å®‰è£… ï¼ˆè¢«æ§ç«¯ï¼‰IPï¼š192.168.23.24</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash">yum install salt-minion -y ï¼ˆå®‰è£…salt-minionï¼‰</span></div><div class="line"><span class="meta">#</span><span class="bash">chkconfig salt-master on</span></div><div class="line"><span class="meta">#</span><span class="bash">service salt-master start</span></div></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œå·²ç»å®‰è£…å®Œæˆã€‚</p>
<p><code>Saltstack é˜²ç«å¢™é…ç½®</code></p>
<p>åœ¨ä¸»æ§ç«¯æ·»åŠ TCP 4505,TCP 4506 çš„è§„åˆ™ï¼Œè€Œåœ¨è¢«æ§ç«¯æ— é¡»é…ç½®é˜²ç«å¢™ï¼ŒåŸç†æ˜¯è¢«æ§ç«¯ç›´æ¥ä¸ä¸»æ§ç«¯çš„zerompå»ºç«‹é“¾æ¥ã€‚ æ¥æ”¶ å¹¿æ’­é“ä»»åŠ¡ä¿¡æ¯å¹¶æ‰§è¡Œï¼Œå…·ä½“æ“ä½œæ˜¯æ·»åŠ ä¸¤æ¡iptablesè§„åˆ™ï¼š</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">-A INPUT -m <span class="keyword">state</span> --state new -m tcp -p tcp --dport <span class="number">4505</span> -j ACCEPT</div><div class="line">-A INPUT -m <span class="keyword">state</span> --state new -m tcp -p tcp --dport <span class="number">4506</span> -j ACCEPT</div></pre></td></tr></table></figure>
<p>é»˜è®¤é…ç½®æ–‡ä»¶ä½äº/etc/salt/master ï¼Œé»˜è®¤ä¸éœ€è¦æ›´æ”¹è¯¥é…ç½®æ–‡ä»¶ã€‚masterç«¯æœ‰ä¸¤ä¸ªç«¯å£éœ€è¦åœ¨iptablesä¸Šæ”¾è¡Œ.</p>
<p><strong>éƒ¨ç½²è¦æ±‚ï¼šä¸¤å°æœºå™¨ç½‘ç»œäº’é€šï¼Œæœ€å¥½å…³é—­é˜²ç«å¢™ã€‚å…³é—­selinux. åœ¨å¯åŠ¨ä¸‹æœåŠ¡ã€‚</strong></p>
<p>æ›´æ–°Saltstack é…ç½®åŠå®‰è£…æ•ˆéªŒã€‚</p>
<p>Saltsatack åˆ†ä¸¤ç§ï¼Œä¸€ç§ä¸ºmaster (ä¸»æ§åˆ¶)ï¼Œå¦ä¸€ç«¯ä¸ºminion (è¢«æ§ç«¯)ï¼Œå®‰è£…å®Œæ¯•åéœ€è¦å¯¹ä¸¤ç§è§’è‰²çš„é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚ å…·ä½“è¯´æ˜å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰ master ä¸»æ§ç«¯é…ç½®</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">  vim /etc/salt/master</div><div class="line">  # ç»‘å®šMaster é€šä¿¡<span class="built_in">IP</span>ï¼›</div><div class="line">  interface :<span class="number">192.168</span><span class="meta">.23</span><span class="meta">.21</span></div><div class="line">  #è‡ªåŠ¨è®¤è¯ï¼Œé¿å…æ‰‹åŠ¨è¿è¡Œsalt-key æ¥ç¡®è®¤è¯ä¹¦ä¿¡ä»»ï¼›</div><div class="line">  auto-accept:True</div><div class="line"></div><div class="line">  ä¿®æ”¹/etc/hosts</div><div class="line">ä¸»æœºè¦æ·»åŠ è¢«æ§æœºå™¨çš„<span class="built_in">IP</span> å’Œä¸»æœºå</div><div class="line"><span class="number">192.168</span><span class="meta">.23</span><span class="meta">.24</span>  xx.rix.com</div></pre></td></tr></table></figure>
<p><strong>æœåŠ¡ç«¯é…ç½®</strong></p>
<p>ä¸»æ§ç«¯åŸºæœ¬è®¾ç½® ç¼–è¾‘é…ç½®æ–‡ä»¶ /etc/salt/master,ä¿®æ”¹å¦‚ä¸‹æ‰€ç¤ºé…ç½®é¡¹ï¼Œå»æ‰å‰é¢çš„æ³¨é‡Šç¬¦</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">interface:</span> <span class="number">192.168</span><span class="number">.23</span><span class="number">.21</span></div><div class="line"><span class="symbol">log_file:</span> <span class="meta-keyword">/var/</span>log<span class="meta-keyword">/salt/</span>master      <span class="meta"># è®°å½•ä¸»æ§ç«¯è¿è¡Œæ—¥å¿—</span></div><div class="line"><span class="symbol">key_logfile:</span> <span class="meta-keyword">/var/</span>log<span class="meta-keyword">/salt/</span>key      <span class="meta"># è®°å½•è®¤è¯è¯ä¹¦æ—¥å¿—</span></div></pre></td></tr></table></figure>
<p> <strong>å®¢æˆ·ç«¯é…ç½®</strong> </p>
<p>ä¿®æ”¹/etc/hosts</p>
<p>ä¸»æœºè¦æ·»åŠ æœåŠ¡ç«¯æœºå™¨çš„IP å’Œä¸»æœºå</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">192<span class="selector-class">.168</span><span class="selector-class">.23</span><span class="selector-class">.21</span>  <span class="selector-tag">salt</span></div></pre></td></tr></table></figure>
<p> å—æ§ç«¯åŸºæœ¬è®¾ç½® ç¼–è¾‘é…ç½®æ–‡ä»¶ /etc/salt/minion,ä¿®æ”¹å¦‚ä¸‹æ‰€ç¤ºé…ç½®é¡¹ï¼Œå»æ‰å‰é¢çš„æ³¨é‡Šç¬¦#</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="literal">master</span>: <span class="number">192.168</span>.<span class="number">23.21</span>        <span class="comment"># è®¾ç½®ä¸»æ§ç«¯</span></div><div class="line">è¿™é‡Œ<span class="literal">master</span>è®¾ç½®ä¸»æ§ç«¯å¯ä»¥hostsåç§°ï¼š</div><div class="line"><span class="comment">#master: salt</span></div><div class="line">å‰ææ˜¯è¦è®¾ç½®hosts.</div></pre></td></tr></table></figure>
<p>æˆ‘è¿™é‡Œç›´æ¥é…ç½®çš„æ˜¯ä¸»æœºåï¼Œä¹Ÿå¯ä»¥é…ç½®æˆIPåœ°å€ï¼Œå¦‚æœé…ç½®æˆä¸»æœºåçš„è¯ï¼Œå°±éœ€è¦åœ¨/etc/hostsæ–‡ä»¶ä¸­masterä¸»æœºå¯¹åº”çš„IP ï¼Œå¦‚æœä½¿ç”¨å†…éƒ¨DNSçš„ä¾‹å¤–ï¼Œå¯ä»¥åœ¨å†…éƒ¨DNSä¸Šçš„ç»Ÿä¸€é…ç½®ã€‚</p>
<p>åœ¨å…¶ä¸‹å¢åŠ ä¸€è¡Œå†…å®¹ä¸ºï¼š</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- <span class="attribute">id:</span><span class="string"> tomcatA1</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œæ˜¯æŒ‡å®šå½“å‰ä¸»æœºçš„idå·ï¼Œè¿™åœ¨åé¢masterè®¤è¯å’Œmasterè°ƒç”¨å‘½ä»¤æ‰§è¡Œæ—¶æ˜¾ç¤ºçš„åç§°ï¼Œå¯ä»¥æ ¹æ®å®é™…è¯†åˆ«éœ€è¦å¡«å†™ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>ä»¥ä¸Šä¸¤å¤„é…ç½®å†’å·åé¢éƒ½éœ€è¦æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œä¸ç„¶ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š</code></p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">log_file:</span> <span class="meta-keyword">/var/</span>log<span class="meta-keyword">/salt/</span>minion  <span class="meta"># è®°å½•å—æ§ç«¯è¿è¡Œæ—¥å¿—</span></div><div class="line"><span class="symbol">key_logfile:</span> <span class="meta-keyword">/var/</span>log<span class="meta-keyword">/salt/</span>key  <span class="meta"># è®°å½•è®¤è¯è¯ä¹¦æ—¥å¿—</span></div></pre></td></tr></table></figure>
<p><strong>ä¸»æ§ç«¯å’Œå—æ§ç«¯</strong></p>
<p> å¯åŠ¨å„è‡ªçš„æœåŠ¡ï¼Œç¡®ä¿æœåŠ¡å¯åŠ¨åæ²¡æœ‰ä»»ä½•æŠ¥é”™ä¿¡æ¯,å¦‚æœå¼‚å¸¸è¯·æ£€æŸ¥ç›¸åº”æ—¥å¿—æ–‡ä»¶å¤„ç†</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ä¸»æ§ç«¯: service salt-<span class="keyword">master</span> <span class="title">restart</span></div><div class="line">å—æ§ç«¯: service salt-minion restart</div></pre></td></tr></table></figure>
<p>saltstack ä¸»æ§ç«¯æ˜¯ä¾é opensslè¯ä¹¦æ¥ä¸å—æ§ç«¯ä¸»æœºè®¤è¯é€šè®¯çš„ï¼Œå—æ§ç«¯å¯åŠ¨åä¼šå‘é€ç»™ä¸»æ§ç«¯ä¸€ä¸ªå…¬é’¥è¯ä¹¦æ–‡ä»¶ï¼Œåœ¨ä¸»æ§ç«¯ç”¨ salt-key å‘½ä»¤æ¥ç®¡ç†è¯ä¹¦ã€‚</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">salt-<span class="built_in">key</span> -L                  <span class="meta"># ç”¨æ¥æŸ¥çœ‹è¯ä¹¦æƒ…å†µ</span></div><div class="line">salt-<span class="built_in">key</span> -a æœåŠ¡ç«¯åç§°æˆ–IP    <span class="meta"># ç”¨æ¥ç®¡ç†æ¥å—è¯ä¹¦</span></div><div class="line">salt-<span class="built_in">key</span> -A                <span class="meta"># ç”¨æ¥ç®¡ç†æ¥å—æ‰€æœ‰è®¤è¯ä¸»æœºçš„è®¤è¯</span></div></pre></td></tr></table></figure>
<p>ä¸»æ§ç«¯å’Œè¢«æ§ç«¯çš„è¯ä¹¦é»˜è®¤éƒ½å­˜æ”¾åœ¨<code>/etc/salt/pki/</code> ä¸­ï¼Œå¦‚æœé‡åˆ°è¯ä¹¦ä¸ç”Ÿæ•ˆçš„æƒ…å†µä¸‹ï¼Œå¯åœ¨ä¸»æ§ç«¯è¯ä¹¦å­˜æ”¾ç›®å½•åˆ é™¤å—æ§ç«¯è¯ä¹¦ï¼Œé‡æ–°è®¤è¯ä¸€ä¸‹ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[root@ny-cloud-pagespeed00 ~]</span># <span class="selector-tag">salt-key</span> <span class="selector-tag">-a</span>  192<span class="selector-class">.168</span><span class="selector-class">.23</span><span class="selector-class">.24</span></div><div class="line"><span class="selector-tag">The</span> <span class="selector-tag">following</span> <span class="selector-tag">keys</span> <span class="selector-tag">are</span> <span class="selector-tag">going</span> <span class="selector-tag">to</span> <span class="selector-tag">be</span> <span class="selector-tag">accepted</span>:</div><div class="line"><span class="selector-tag">Unaccepted</span> <span class="selector-tag">Keys</span>:</div><div class="line">192<span class="selector-class">.168</span><span class="selector-class">.23</span><span class="selector-class">.24</span></div><div class="line"><span class="selector-tag">Proceed</span>? <span class="selector-attr">[n/Y]</span> <span class="selector-tag">y</span>   #è¿™é‡Œè¾“å…¥<span class="selector-tag">y</span> ä»£è¡¨åŒæ„åŠ å…¥è¯ä¹¦ã€‚</div><div class="line"></div><div class="line"><span class="selector-attr">[root@ny-cloud-pagespeed00 minions]</span># <span class="selector-tag">salt</span> <span class="selector-tag">-v</span> "<span class="selector-tag">xx</span><span class="selector-class">.rix</span><span class="selector-class">.com</span>" <span class="selector-tag">test</span><span class="selector-class">.ping</span>  #è¿™é‡Œçš„<span class="selector-class">.com</span>æ˜¯å—æ§æœºçš„<span class="selector-tag">hostname</span> è®¤è¯åç§°ã€‚</div><div class="line"></div><div class="line"><span class="selector-tag">Executing</span> <span class="selector-tag">job</span> <span class="selector-tag">with</span> <span class="selector-tag">jid</span> 20151004162442004183</div><div class="line"> <span class="selector-tag">-------------------------------------------</span></div><div class="line"></div><div class="line"><span class="selector-tag">xx</span><span class="selector-class">.rix</span><span class="selector-class">.com</span>:</div><div class="line"><span class="selector-tag">True</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œå¯ä»¥è·å–åˆ°è®¤è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠè®¤è¯åŠ è¿›å»ã€‚</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">[root@salt ~]<span class="comment"># salt-key -L</span></div><div class="line">Accepted Keys:</div><div class="line">Gateway1</div><div class="line">Gateway2</div><div class="line">ihaozhuo1</div><div class="line">ihaozhuo2</div><div class="line"><span class="keyword">node</span></div><div class="line"><span class="title">openapi</span></div><div class="line">report1</div><div class="line">report2</div><div class="line">tomcat_A1</div><div class="line">tomcat_A2</div><div class="line">tomcat_B1</div><div class="line">tomcat_B2</div><div class="line">tomcat_bmw</div><div class="line">tomcat_C1</div><div class="line">tomcat_C2</div><div class="line">weixin</div><div class="line">Denied Keys:</div><div class="line">Unaccepted Keys:</div><div class="line">Rejected Keys:</div></pre></td></tr></table></figure>
<p>æˆ‘ä¸Šé¢ç”¨çš„-Aå‚æ•°ï¼Œè¯¥å‚æ•°æ„æ€æ˜¯æ¥å—æ‰€æœ‰è®¤è¯ä¸»æœºçš„è®¤è¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -a idå åªè®¤è¯å•ç‹¬çš„ä¸»æœºã€‚é»˜è®¤è®¤è¯å®Œæˆåä¼šåœ¨/etc/salt/pki/master/minionsç›®å½•æ‰¾åˆ°ä»¥IDåå‘½ä»¤çš„æ–‡ä»¶ï¼Œé‡Œé¢å­˜æ”¾çš„æ˜¯å¯†é’¥æ–‡ä»¶ã€‚</p>
<p>å¦‚æœå¯¹å®¢æˆ·ç«¯ä¿¡ä»»ï¼Œå¯ä»¥è®©masterè‡ªåŠ¨æ¥å—è¯·æ±‚ï¼Œåœ¨masterç«¯/etc/salt/masteré…ç½®ã€‚</p>
<h3 id="ï¼ˆäºŒï¼‰å‘½ä»¤æ‰§è¡Œ"><a href="#ï¼ˆäºŒï¼‰å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="ï¼ˆäºŒï¼‰å‘½ä»¤æ‰§è¡Œ"></a>ï¼ˆäºŒï¼‰å‘½ä»¤æ‰§è¡Œ</h3><p><code>True</code>ä»£è¡¨æ­£å¸¸ï¼Œ<code>*</code>ä»£è¡¨æ‰€æœ‰ä¸»æœºï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å•å°æˆ–è€…æŒ‰ç»„åŠæ­£åˆ™è¿›è¡ŒåŒ¹é…ç­‰ï¼Œè¿™ä¸ªå¯ä»¥å‚çœ‹ä¸‹å®˜æ–¹ç›¸å…³æ–‡æ¡£ ã€‚å…¶é»˜è®¤æ‰§è¡Œçš„æ­£åˆ™æ˜¯shellæ­£åˆ™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ­£åˆ™æˆ–ç»„ç­‰ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@salt</span> <span class="string">~]#</span> <span class="string">salt</span> <span class="string">'*'</span> <span class="string">test.ping</span></div><div class="line"><span class="string">[root@salt</span> <span class="string">~]#</span> <span class="string">salt</span> <span class="string">'*'</span> <span class="string">test.ping</span></div><div class="line"><span class="attr">tomcat_C2:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">tomcat_B2:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">ihaozhuo1:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">ihaozhuo2:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">openapi:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">tomcat_B1:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">tomcat_C1:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">weixin:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">tomcat_A1:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">tomcat_A2:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">node:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">Gateway2:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">report1:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">report2:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">tomcat_bmw:</span></div><div class="line">    <span class="literal">True</span></div><div class="line"><span class="attr">Gateway1:</span></div><div class="line">    <span class="string">Minion</span> <span class="string">did</span> <span class="string">not</span> <span class="string">return.</span> <span class="string">[Not</span> <span class="string">connected]</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€å°pingä¸é€šï¼Œå°±åº”è¯¥ä¸Šå»æŸ¥çœ‹ä¸‹ã€‚</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@Gateway1 ~]<span class="comment"># ps -ef | grep minion</span></div><div class="line">root    <span class="number"> 15343 </span>15168 <span class="number"> 0 </span>11:22 pts/0    00:00:00 grep --color=auto minion</div><div class="line">[root@Gateway1 ~]<span class="comment"># service salt-minion start</span></div><div class="line">Redirecting to /bin/systemctl start  salt-minion.service</div><div class="line">[root@Gateway1 ~]<span class="comment"># ps -ef | grep minion</span></div><div class="line">root    <span class="number"> 15422 </span>   <span class="number"> 1 </span><span class="number"> 7 </span>11:22 ?        00:00:00 /usr/bin/python /usr/bin/salt-minion</div><div class="line">root    <span class="number"> 15431 </span>15422<span class="number"> 46 </span>11:22 ?        00:00:00 /usr/bin/python /usr/bin/salt-minion</div><div class="line">root    <span class="number"> 15494 </span>15168 <span class="number"> 0 </span>11:22 pts/0    00:00:00 grep --color=auto minion</div></pre></td></tr></table></figure>
<p>åŸæ¥æ˜¯è¿›ç¨‹æŒ‚äº†ï¼Œæ‰€æœ‰è¿™ä¹Ÿæ˜¯saltä»€ä¹ˆéƒ½å¥½å”¯ä¸€ä¸€ç‚¹ç¼ºç‚¹å°±æ˜¯éœ€è¦é…ç½®å®¢æˆ·ç«¯å¯åŠ¨æœåŠ¡ï¼Œè¿™æ ·å¯¹ç½‘ç»œä¼ è¾“ç­‰ç­‰éƒ½æœ‰è¦æ±‚æ¯”è¾ƒé«˜ã€‚ä¸€æ—¦è¿›ç¨‹æ­»äº†ï¼Œå‡ ç™¾å°ä»¥ä¸Šå¯èƒ½å°±æ¯”è¾ƒè´¹åŠ›ã€‚</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">-<span class="ruby"> salt <span class="string">'shellæ­£åˆ™'</span> å‘½ä»¤</span></div><div class="line">-<span class="ruby"> salt -E <span class="string">'prel æ­£åˆ™'</span></span></div><div class="line">-<span class="ruby"> salt -N $group å‘½ä»¤</span></div><div class="line">-<span class="ruby"> salt -L <span class="string">'server_id1,server_id2,server_id3'</span> å‘½ä»¤</span></div></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">å¸¸ç”¨çš„æ“ä½œç±»ä¼¼å¦‚ä¸‹</div><div class="line">- salt <span class="string">'*'</span> cmd<span class="selector-class">.run</span> <span class="string">"ab -n 10 -c 2 http://www.google.com/"</span></div><div class="line">- salt <span class="string">'*'</span> grains<span class="selector-class">.ls</span> æŸ¥çœ‹grainsåˆ†ç±»</div><div class="line">- salt <span class="string">'*'</span> grains<span class="selector-class">.items</span> æŸ¥çœ‹grainsæ‰€æœ‰ä¿¡æ¯</div><div class="line">- salt <span class="string">'*'</span> grains<span class="selector-class">.item</span> osrelease æŸ¥çœ‹grainsæŸä¸ªä¿¡æ¯</div><div class="line">- salt <span class="string">'*'</span> cmd<span class="selector-class">.run</span> <span class="string">"/App/nginx/sbin/nginx -v"</span></div></pre></td></tr></table></figure>

	

	

</article>




	<article>
	
		<h1><a href="/2015/09/10/è‡ªåŠ¨åŒ–+Jenkins/saltstack/è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·-Saltstackçš„è¯¦ç»†ä»‹ç»å®‰è£…ä¸ä½¿ç”¨ä»¥åŠè¯­æ³•å¼€å‘æ“ä½œ/">è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·-Saltstackçš„è¯¦ç»†ä»‹ç»å®‰è£…ä¸ä½¿ç”¨ä»¥åŠè¯­æ³•å¼€å‘æ“ä½œ</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2015-09-10</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Automation/">Automation</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Saltstack/">Saltstack</a>
			</span>
		
	</div>

	

	
		<h2 id="å¼•è¨€-è‡ªåŠ¨åŒ–è¿ç»´"><a href="#å¼•è¨€-è‡ªåŠ¨åŒ–è¿ç»´" class="headerlink" title="å¼•è¨€:è‡ªåŠ¨åŒ–è¿ç»´"></a>å¼•è¨€:è‡ªåŠ¨åŒ–è¿ç»´</h2><h3 id="1-saltstack-çš„åŸºæœ¬ä»‹ç»"><a href="#1-saltstack-çš„åŸºæœ¬ä»‹ç»" class="headerlink" title="1:saltstack çš„åŸºæœ¬ä»‹ç»"></a>1:saltstack çš„åŸºæœ¬ä»‹ç»</h3><h4 id="2-salt-çš„å®‰è£…"><a href="#2-salt-çš„å®‰è£…" class="headerlink" title="2:salt çš„å®‰è£…"></a>2:salt çš„å®‰è£…</h4><ul>
<li>æœåŠ¡ç«¯ <ul>
<li>å®‰è£…</li>
<li>é…ç½®æ–‡ä»¶ </li>
<li>è¿è¡Œ </li>
<li>æ³¨æ„äº‹é¡¹</li>
</ul>
</li>
<li>å®¢æˆ·ç«¯ <ul>
<li>å®‰è£…</li>
<li>é…ç½®æ–‡ä»¶</li>
<li>è¿è¡Œ</li>
<li>æ³¨æ„äº‹é¡¹</li>
</ul>
</li>
</ul>
<h4 id="3-salt-çš„ä½¿ç”¨"><a href="#3-salt-çš„ä½¿ç”¨" class="headerlink" title="3:salt çš„ä½¿ç”¨:"></a>3:salt çš„ä½¿ç”¨:</h4><ul>
<li>åŸºç¡€çŸ¥è¯†<ul>
<li>targeting </li>
<li>nodegroup </li>
<li>grains </li>
<li>pillar</li>
</ul>
</li>
<li>çŠ¶æ€ç®¡ç† <ul>
<li>state</li>
<li>state è¯­æ³•</li>
<li>state çš„é€»è¾‘å…³ç³» </li>
<li>highstate</li>
<li>salt schedule </li>
</ul>
</li>
<li>å®æ—¶ç®¡ç† <ul>
<li>cmd.run</li>
<li>module </li>
</ul>
</li>
<li>æ—  master<h4 id="4-salt-å¼€å‘"><a href="#4-salt-å¼€å‘" class="headerlink" title="4:salt å¼€å‘"></a>4:salt å¼€å‘</h4></li>
<li>saltclient ç®¡ç† salt<ul>
<li>salt api</li>
</ul>
</li>
</ul>
<h3 id="å¼•è¨€-è‡ªåŠ¨åŒ–è¿ç»´-è¿ç»´çš„å·¥ä½œä¸»è¦åœ¨2æ–¹é¢"><a href="#å¼•è¨€-è‡ªåŠ¨åŒ–è¿ç»´-è¿ç»´çš„å·¥ä½œä¸»è¦åœ¨2æ–¹é¢" class="headerlink" title="å¼•è¨€:è‡ªåŠ¨åŒ–è¿ç»´ è¿ç»´çš„å·¥ä½œä¸»è¦åœ¨2æ–¹é¢:"></a>å¼•è¨€:è‡ªåŠ¨åŒ–è¿ç»´ è¿ç»´çš„å·¥ä½œä¸»è¦åœ¨2æ–¹é¢:</h3><ol>
<li>çŠ¶æ€çš„ç®¡ç†</li>
<li>ç³»ç»Ÿæ€§èƒ½è°ƒä¼˜ è¿™é‡Œä¸»è¦ç®€ä»‹ä¸‹è¿ç»´çŠ¶æ€çš„ç®¡ç†:<br>å¯¹äºè¿ç»´æ¥è¯´,åŸºäºçŠ¶æ€çš„é…ç½®ç®¡ç†å·²ç»å‘è‡ªåŠ¨åŒ–è¿ˆè¿›äº†ä¸€å¤§æ­¥,ä»¥çŠ¶æ€ä¸ºæ ¸å¿ƒçš„è¿ç»´,<br>è®©çŠ¶æ€æœ¬èº«æœ‰äº†å¯ç®¡ç†æ€§;åœ¨è¿ç»´è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¼šå‘ç°,åŒæ ·çš„ä¸€ä¸ªé…ç½®,æˆ‘ä»¬ä¼šåœ¨ä¸åŒçš„æ—¶é—´, ä¸åŒçš„åœ°ç‚¹ä¸€æ¬¡åœ¨ä¸€æ¬¡çš„é…ç½®,è¿™ä¸ªæ—¶å€™,é…ç½®ç®¡ç†å°±æœ‰äº†é‡å¤æ€§;æœ‰çš„ç”šè‡³æ˜¯åŸå°ä¸åŠ¨çš„é‡ å¤,è€Œå¦å¤–ä¸€äº›åˆ™æ˜¯æŒ‰ç…§ä¸€å®šçš„è§„å¾‹åœ¨å‘å±•,è¿™äº›æŒ‰ç…§ä¸€å®šè§„å¾‹å‘å±•çš„é…ç½®,å°±æ˜¯å¯é¢„æµ‹çš„.ç»¼ ä¸Šæˆ‘è®¤è¯†çš„,æˆ‘ä»¬è¿ç»´å·¥ä½œçš„æœ¬èº«æ˜¯å¯ç®¡ç†,å¯é‡å¤,å¯é¢„æµ‹çš„.åŸºäºè¿™æ ·çš„ç†å¿µ,æˆ‘ä»¬å°±å¯ä»¥æ›´ é«˜ä¸€æ­¥çš„æ¨è¿›æˆ‘ä»¬çš„è¿ç»´è‡ªåŠ¨åŒ–,ç”šè‡³åˆ°æ™ºèƒ½åŒ–.</li>
</ol>
<p>çœ‹åˆ°è¿™é‡Œ,æˆ‘ç†æƒ³ä¸­çš„è¿ç»´è‡ªåŠ¨åŒ–çš„é…ç½®ç®¡ç†å¹³å°åº”è¯¥æœ‰å¦‚ä¸‹åŠŸèƒ½: </p>
<ol>
<li>å¯¹çŠ¶æ€çš„é…ç½®åŠç®¡ç†(æœ€åŸºæœ¬çš„) </li>
<li>å¯ä»¥åŠæ—¶çš„å¯¹ç³»ç»ŸçŠ¶æ€è¿›è¡Œè°ƒæ•´å¹¶èƒ½çœ‹åˆ°ç»“æœ(å¯ä»¥æ–¹ä¾¿çš„å®æ—¶å‡çº§ç³»ç»ŸçŠ¶æ€)</li>
<li>å¯ä»¥å¯¹å…¶æœ¬èº«åšæ–¹ä¾¿çš„ç¬¬ä¸‰æ–¹ç®¡ç†(å€ŸåŠ©å…¶ API,ç›´æ¥ç»™çŠ¶æ€åˆ¶å®šå¥½å…¶å‘å±•æ–¹å‘)</li>
</ol>
<h5 id="åŠ åˆ†é¡¹"><a href="#åŠ åˆ†é¡¹" class="headerlink" title="åŠ åˆ†é¡¹:"></a>åŠ åˆ†é¡¹:</h5><ol>
<li>å¼€å‘è¯­è¨€å•ä¸€</li>
<li>æ¶æ„ç®€å•,çµæ´» </li>
<li>æœ‰ä¸å·®çš„å®‰å…¨æ€§ </li>
<li>æ²¡æœ‰å•†ä¸šç‰ˆ<br>ä¸‹é¢æ˜¯ç°æœ‰æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„è‡ªåŠ¨åŒ–é…ç½®ç®¡ç†å·¥å…·: é™„:ä»¥ä¸‹ä»…åŸºäºå¼€æºç‰ˆæœ¬è¿›è¡Œä»‹ç»</li>
</ol>
<h4 id="ç†å¿µ-ä¼˜ç¼ºç‚¹"><a href="#ç†å¿µ-ä¼˜ç¼ºç‚¹" class="headerlink" title="ç†å¿µ ä¼˜ç¼ºç‚¹"></a>ç†å¿µ ä¼˜ç¼ºç‚¹</h4><p>puppet ä»è¿ç»´çš„è§’åº¦å»åšé…ç½®ç®¡ç†(è¿ç»´äººå‘˜åšç»™è¿ç»´ç”¨çš„) æ¶æ„ç®€å•,ç³»ç»Ÿæ¯”è¾ƒæˆ<br>ç†Ÿ/ä¸ä¾¿äºç¬¬ä¸‰æ–¹ç®¡ç†</p>
<p>chef ä»ç ”å‘çš„è§’åº¦å»åšé…ç½®ç®¡ç†(ç ”å‘äººå‘˜åšç»™è¿ç»´ç”¨çš„) è¾ƒä¾¿äºç¬¬ä¸‰æ–¹ç®¡ç†,å¯¹<br>è‡ªèº«(èŠ‚ç‚¹,å˜é‡,cookbook)çš„ç®¡ç†è¾ƒæ–¹ä¾¿,æœ‰è‡ªå·±çš„ dashboard,cookbook æ”¯æŒç‰ˆæœ¬ç®¡ç†,è‡ªä» cookbook çš„ç‰ˆæœ¬ç®¡ç†/æ¶æ„å¤æ‚,å¼€å‘è¯­è¨€è¾ƒå¤š,(å®‰å…¨é—®é¢˜)</p>
<ul>
<li>ä»¥ä¸Š 2 è€…éƒ½æ¯”è¾ƒä¾§é‡äºçŠ¶æ€çš„ç®¡ç†,å¯¹å•ä¸ªæˆ–è€…å¤šä¸ªçŠ¶æ€çš„ä¸´æ—¶è°ƒæ•´æˆ–è€…ç®¡ç†è¾ƒå·® 2 ä¸ªéƒ½æœ‰å•†ä¸šç‰ˆ,è®©æˆ‘è¿™ä¸ªç”¨å¼€æºç‰ˆçš„å¾ˆè‡ªå‘</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°,2 ä¸ªé…ç½®åŠŸèƒ½éƒ½æ²¡èƒ½è¾¾åˆ°æˆ‘ç†æƒ³ä¸­çš„çŠ¶æ€,é‚£å°±æš‚ç”¨ chef å§,ç›´åˆ°æœ‰ ä¸€å¤©,äº†è§£åˆ°äº† saltstack çœ‹åˆ°äº†è¿™å¥è¯:â€œ ç³»ç»Ÿé…ç½®çš„è‡ªåŠ¨åŒ–ä¸ä»…å¯é¢„æµ‹,å¯é‡å¤, è¿˜å…·æœ‰å¯ ç®¡ç†æ€§â€(<a href="http://wiki.saltstack.cn/reproduction/dive-into-saltstack),è¿™å°¼ç›æ‰æ˜¯è¿ç»´è‡ªåŠ¨åŒ–çš„æœª" target="_blank" rel="external">http://wiki.saltstack.cn/reproduction/dive-into-saltstack),è¿™å°¼ç›æ‰æ˜¯è¿ç»´è‡ªåŠ¨åŒ–çš„æœª</a> æ¥å•Š,äºæ˜¯æ¯«æ— èŠ‚æ“çš„å¼€å§‹å­¦ä¹  salt,è€Œä¸”å‘ç°è¶Šå­¦è¶Šå–œæ¬¢;åœ¨æˆ‘ä½¿ç”¨ puppet åŠ chef çš„æ—¶ å€™éƒ½æ²¡æœ‰ä½¿ç”¨ salt çš„æ„Ÿè§‰,å¤ªçˆ½äº†ã€‚æ‰€ä»¥æˆ‘è¿™é‡Œä»…ä»…ä»‹ç»å‡ æœ¬çš„è¯­æ³•ä¸æ¶‰åŠå®é™…ç”¨ä¾‹,salt çš„å®‰è£…éå¸¸æ–¹ä¾¿,æ‰€ä»¥ä½ åœ¨çœ‹æœ¬æ–‡æ¡£çš„æ—¶å€™å¸Œæœ›ä½ èƒ½çœŸæ­£çš„åŠ¨æ‰‹å»åšä¸€ä¸‹,ç„¶åä½ å°±ä¼šçˆ±ä¸Š salt äº†</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">é™„:å¦‚æœä½ ä¼š python,salt åŸºæœ¬æ˜¯ä¸éœ€è¦æ€ä¹ˆå­¦çš„,è€Œæˆ‘æ­£å¥½äº†è§£ä¸€ç‚¹ py,ä¸è¿‡è¿™æœ€å¤šå æˆ‘é€‰æ‹© salt çš„ 20%ã€‚</div></pre></td></tr></table></figure>
<h3 id="1-saltstack-çš„åŸºæœ¬ä»‹ç»-1"><a href="#1-saltstack-çš„åŸºæœ¬ä»‹ç»-1" class="headerlink" title="1:saltstack çš„åŸºæœ¬ä»‹ç»"></a>1:saltstack çš„åŸºæœ¬ä»‹ç»</h3><p>salt æ˜¯ä¸€ä¸ªæ–°çš„åŸºç¡€å¹³å°ç®¡ç†å·¥å…·ã€‚å¾ˆçŸ­çš„æ—¶é—´å³å¯è¿è¡Œå¹¶ä½¿ç”¨èµ·æ¥, æ‰©å±•æ€§è¶³ä»¥æ”¯æ’‘<br>ç®¡ç†ä¸Šä¸‡å°æœåŠ¡å™¨,æ•°ç§’é’Ÿå³å¯å®Œæˆæ•°æ®ä¼ é€’. ç»å¸¸è¢«æè¿°ä¸º Func åŠ å¼ºç‰ˆ+Puppet ç²¾ç®€ç‰ˆã€‚</p>
<p>salt çš„æ•´ä¸ªæ¶æ„éƒ½æ˜¯åŸºäºæ¶ˆæ¯æ¥å®ç°.æ‰€ä»¥èƒ½å¤Ÿæä¾›æ¨ªå¼ºçš„æ‹“å±•æ€§,çµæ´»æ€§,å®æ—¶æ€§;ä¸å¤¸ äº†,çœ‹å®é™…çš„ slat æ˜¯ä»€ä¹ˆæ ·çš„ä¸è¿‡ salt è¿˜æ˜¯ä¸€ä¸ªå¾ˆå¹´è½»çš„ä¸œè¥¿,è¿˜æœ‰å¾ˆå¤šåœ°æ–¹ä¸å¤Ÿå®Œå–„,åšçš„ä¸å¤Ÿå¥½,ä¸è¿‡æˆ‘ç›¸ä¿¡è¿™ äº›éƒ½åªæ˜¯æ—¶é—´é—®é¢˜ã€‚</p>
<ul>
<li>æ³¨:ä»¥ä¸‹æ–‡æ¡£ä»…ä»…ä¸ºåŸºæœ¬å†…å®¹,ç›¸å…³çŸ¥è¯†ç‚¹çš„æ·±å…¥å­¦ä¹ ,è¯·çœ‹ç›¸åº”æ–‡æ¡£è¿æ¥ ##2:salt çš„å®‰è£…</li>
</ul>
<p>å®‰è£…æœ‰å¾ˆå¤šé€”å¾„,ä½œä¸ºä¸€ä¸ª centos çš„ç”¨æˆ·,æˆ‘é€‰æ‹© rpm é¦–å…ˆæ·»åŠ  RPM æº:<br>rpm -ivh <a href="http://mirrors.sohu.com/fedora-epel/6/x86_64/epel-release-6-8.noarch.rpm" target="_blank" rel="external">http://mirrors.sohu.com/fedora-epel/6/x86_64/epel-release-6-8.noarch.rpm</a></p>
<h5 id="é™„-å®é™…ç”Ÿäº§ä¸­æˆ‘æ˜¯è‡ªå»ºæº"><a href="#é™„-å®é™…ç”Ÿäº§ä¸­æˆ‘æ˜¯è‡ªå»ºæº" class="headerlink" title="é™„:å®é™…ç”Ÿäº§ä¸­æˆ‘æ˜¯è‡ªå»ºæº"></a>é™„:å®é™…ç”Ÿäº§ä¸­æˆ‘æ˜¯è‡ªå»ºæº</h5><p>epel ä¸­å…³äº salt çš„åŒ…:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">salt-api.noarch : A web api <span class="keyword">for</span> to access salt the parallel remote execution system salt-master.noarch : Management component <span class="keyword">for</span> salt, a parallel remote execution</div><div class="line">system</div><div class="line">salt-minion.noarch : Client component <span class="keyword">for</span> salt, a parallel remote execution system salt.noarch : A parallel remote execution system</div><div class="line">salt-cloud.noarch : Generic cloud provisioning tool</div></pre></td></tr></table></figure>
<h4 id="1-æœåŠ¡ç«¯-1-å®‰è£…"><a href="#1-æœåŠ¡ç«¯-1-å®‰è£…" class="headerlink" title="1:æœåŠ¡ç«¯ 1:å®‰è£…"></a>1:æœåŠ¡ç«¯ 1:å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">yum install salt-master 2:é…ç½®æ–‡ä»¶</div><div class="line">/etc/salt/master</div><div class="line">é…ç½®æ–‡ä»¶é€‰é¡¹ä»‹ç»: http://docs.saltstack.com/ref/configuration/master.html</div><div class="line">æœ€åŸºæœ¬å­—æ®µ:</div><div class="line">interface: æœåŠ¡ç«¯ç›‘å¬ IP</div><div class="line">3:è¿è¡Œ è°ƒè¯•æ¨¡å¼:</div><div class="line">salt-master <span class="_">-l</span> debug åå°è¿è¡Œ:</div><div class="line">salt-master <span class="_">-d</span></div><div class="line">ä½œä¸º centos ç®¡ç†å‘˜,æˆ‘é€‰æ‹©:</div><div class="line">/etc/init.d/salt-master start </div><div class="line"></div><div class="line">4:æ³¨æ„äº‹é¡¹:</div><div class="line">1:ç›‘å¬ç«¯å£</div><div class="line">4505(publish_port):salt çš„æ¶ˆæ¯å‘å¸ƒç³»ç»Ÿ 4506(ret_port):salt å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡çš„ç«¯å£</div><div class="line">æ‰€ä»¥ç¡®ä¿å®¢æˆ·ç«¯èƒ½è·ŸæœåŠ¡ç«¯çš„è¿™2ä¸ªç«¯å£é€šä¿¡</div></pre></td></tr></table></figure>
<h4 id="å®‰è£…å®¢æˆ·ç«¯"><a href="#å®‰è£…å®¢æˆ·ç«¯" class="headerlink" title="å®‰è£…å®¢æˆ·ç«¯"></a>å®‰è£…å®¢æˆ·ç«¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">yum install salt-minion 2:é…ç½®æ–‡ä»¶</div><div class="line">/etc/salt/minion</div><div class="line">é…ç½®æ–‡ä»¶é€‰é¡¹ä»‹ç»: http://docs.saltstack.com/ref/configuration/minion.html æœ€åŸºæœ¬å­—æ®µ:</div><div class="line">master: æœåŠ¡ç«¯ä¸»æœºå</div><div class="line">id: å®¢æˆ·ç«¯ä¸»æœºå(åœ¨æœåŠ¡ç«¯çœ‹åˆ°çš„å®¢æˆ·ç«¯çš„åå­—)</div><div class="line">3:è¿è¡Œ è°ƒè¯•æ¨¡å¼:</div><div class="line">salt-minion <span class="_">-l</span> debug åå°è¿è¡Œ:</div><div class="line">salt-minion <span class="_">-d</span></div><div class="line">ä½œä¸º centos ç®¡ç†å‘˜,æˆ‘é€‰æ‹©:</div><div class="line">/etc/init.d/salt-minion start </div><div class="line"></div><div class="line">4:æ³¨æ„äº‹é¡¹:</div><div class="line">1:minion é»˜è®¤å’Œä¸»æœºå salt çš„ä¸»æœºé€šä¿¡ </div><div class="line"></div><div class="line">2:å…³äºé…ç½®æ–‡ä»¶</div><div class="line">salt çš„é…ç½®æ–‡ä»¶å‡ä¸º yaml é£æ ¼</div><div class="line"><span class="variable">$key</span>: <span class="variable">$value</span> <span class="comment">#æ³¨æ„å†’å·åæœ‰ä¸€ä¸ªç©ºæ ¼ 3:åŸºç¡€çŸ¥è¯†</span></div><div class="line">1:salt minion å’Œ master çš„è®¤è¯è¿‡ç¨‹:</div><div class="line">(1) minion åœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶,ä¼šåœ¨/etc/salt/pki/minion/ä¸‹è‡ªåŠ¨ç”Ÿæˆ</div><div class="line">minion.pem(private key), minion.pub(public key),ç„¶åå°† minion.pub å‘é€ç»™ master</div><div class="line">(2) master åœ¨æ¥æ”¶åˆ° minion çš„ public key å,é€šè¿‡ salt-key å‘½ä»¤ accept minion public key,è¿™æ ·åœ¨ master çš„/etc/salt/pki/master/minions ä¸‹çš„å°†ä¼šå­˜æ”¾ä»¥ minion id å‘½åçš„</div><div class="line">public key, ç„¶å master å°±èƒ½å¯¹ minion å‘é€æŒ‡ä»¤äº†</div><div class="line">å¦‚ä¸‹: </div><div class="line">å¯åŠ¨æœåŠ¡ç«¯:</div><div class="line">/etc/init.d/salt-minion restart</div><div class="line">å¯åŠ¨å®¢æˆ·ç«¯:</div><div class="line">/etc/init.d/salt-minion restart </div><div class="line"></div><div class="line">æœåŠ¡ç«¯æŸ¥çœ‹key:</div><div class="line">salt-key</div><div class="line">Accepted Keys:</div><div class="line">Unaccepted Keys: minion1</div><div class="line">Rejected Keys:</div><div class="line">æœåŠ¡ç«¯æ¥å— key salt-key <span class="_">-a</span> minion1</div><div class="line"></div><div class="line">æµ‹è¯•:</div><div class="line">salt <span class="string">'minion1'</span> test.ping minion1:</div><div class="line">True</div><div class="line">é™„:salt æ›´å¤šå‘½ä»¤åŠæ‰‹å†Œ salt <span class="string">'*'</span> sys.doc</div></pre></td></tr></table></figure>
<h3 id="3-salt-çš„ä½¿ç”¨-1-åŸºç¡€çŸ¥è¯†"><a href="#3-salt-çš„ä½¿ç”¨-1-åŸºç¡€çŸ¥è¯†" class="headerlink" title="3:salt çš„ä½¿ç”¨: 1:åŸºç¡€çŸ¥è¯†"></a>3:salt çš„ä½¿ç”¨: 1:åŸºç¡€çŸ¥è¯†</h3><p>1:targeting</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">salt <span class="string">'*'</span> test.ping</div><div class="line">å¼•å·ä¸­ä»¥å®ç°å¾ˆå¼ºå¤§çš„ minion çš„è¿‡æ»¤ä¸åŒ¹é…æŠ€æœ¯ æ–‡æ¡£:http://docs.saltstack.com/topics/targeting /compound.html</div><div class="line">å¸¸ç”¨å‘½ä»¤:</div><div class="line">salt <span class="string">'shell æ­£åˆ™'</span> å‘½ä»¤</div><div class="line">salt -E <span class="string">'prel æ­£åˆ™'</span></div><div class="line">salt -N <span class="variable">$group</span> å‘½ä»¤</div><div class="line">salt -L <span class="string">'server_id1,server_id2,server_id3'</span> å‘½ä»¤</div><div class="line">ç¤ºä¾‹:</div><div class="line">salt -C <span class="string">'webserv* and G@os:Debian or E@web-dc1-srv.*'</span> test.ping</div></pre></td></tr></table></figure>
<p>2:nodegroup<br>å¯¹ minion è¿›è¡Œåˆ†ç»„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">æ–‡æ¡£: http://docs.saltstack.com/topics/targeting/nodegroups.html åœ¨ master çš„é…ç½®æ–‡ä»¶ä¸­æŒ‰å¦‚ä¸‹æ ¼å¼å®šä¹‰:</div><div class="line">nodegroups:</div><div class="line">group1: <span class="string">'L@foo.domain.com,bar.domain.com,baz.domain.com or</span></div><div class="line">bl*.domain.com'</div><div class="line">group2: <span class="string">'G@os:Debian and foo.domain.com'</span> åœ¨ state æˆ–è€… pillar ä¸­å¼•ç”¨çš„æ—¶å€™å¦‚ä¸‹:</div><div class="line">base: group1:</div><div class="line">- match: nodegroup - webserver</div></pre></td></tr></table></figure>
<p>3:grains<br>minion åŸºæœ¬ä¿¡æ¯çš„ç®¡ç† æ–‡æ¡£:<a href="http://docs.saltstack.com/topics/targeting" target="_blank" rel="external">http://docs.saltstack.com/topics/targeting</a> /grains.html åŸºæœ¬ä½¿ç”¨:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">salt <span class="string">'*'</span> grains.ls æŸ¥çœ‹ grains åˆ†ç±»</div><div class="line">salt <span class="string">'*'</span> grains.items æŸ¥çœ‹ grains æ‰€æœ‰ä¿¡æ¯</div><div class="line">salt <span class="string">'*'</span> grains.item osrelease æŸ¥çœ‹ grains æŸä¸ªä¿¡æ¯</div><div class="line">ç¤ºä¾‹:</div><div class="line">salt <span class="string">'*'</span> grains.item osrelease minoin1:</div><div class="line">osrelease: 6.2</div></pre></td></tr></table></figure>
<h3 id="minion-çš„å˜é‡"><a href="#minion-çš„å˜é‡" class="headerlink" title="minion çš„å˜é‡"></a>minion çš„å˜é‡</h3><p>åœ¨ç”¨ salt è¿›è¡Œç®¡ç†å®¢æˆ·ç«¯çš„æ—¶å€™æˆ–è€…å†™ state çš„æ—¶å€™éƒ½å¯ä»¥å¼•ç”¨ grains çš„å˜é‡ 4:pillar</p>
<p>salt æ•æ„Ÿä¿¡æ¯çš„ç®¡ç†,åªæœ‰åŒ¹é…åˆ°çš„èŠ‚ç‚¹æ‰èƒ½çœ‹åˆ°å’Œä½¿ç”¨ æ–‡æ¡£:<a href="http://docs.saltstack.com/topics/tutorials/pillar.html" target="_blank" rel="external">http://docs.saltstack.com/topics/tutorials/pillar.html</a> é»˜è®¤:pillar æ•°æ®å®šä¹‰æ–‡ä»¶å­˜å‚¨è·¯å¾„:/srv/pillar å…¥å£æ–‡ä»¶:/srv/pillar/top.sls</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">æ ¼å¼: base:</div><div class="line"><span class="string">"targeting"</span>:</div><div class="line">- <span class="variable">$pillar</span></div><div class="line"><span class="variable">$pillar</span>.sls åŸºæœ¬:</div><div class="line"><span class="variable">$key</span>: <span class="variable">$value</span> state å¼•ç”¨æ–¹å¼:</div><div class="line">&#123;&#123; pillar[<span class="string">'$key'</span>] &#125;&#125;</div><div class="line">å¤æ‚:</div><div class="line">users:</div><div class="line">thatch: 1000 shouse: 1001 utahdave: 1002 redbeard: 1003</div><div class="line">state å¼•ç”¨æ–¹å¼:</div><div class="line">&#123;% <span class="keyword">for</span> user, uid <span class="keyword">in</span> pillar.get(<span class="string">'users'</span>, &#123;&#125;).items() %&#125;</div><div class="line">&#123;&#123;user&#125;&#125;: user.present:</div><div class="line">- uid: &#123;&#123;uid&#125;&#125; &#123;% endfor %&#125;</div><div class="line">æŸ¥çœ‹èŠ‚ç‚¹çš„ pillar æ•°æ®: salt <span class="string">'client2'</span> pillar.data</div><div class="line">åŒæ­¥ pillar:</div><div class="line">salt <span class="string">'*'</span> saltutil.refresh_pillar</div><div class="line">é™„:è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°,pallar ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ jinja(åé¢ä¼šæåˆ°)åšä¸€äº›å¤„ç† 5:minion</div><div class="line">å³ä¸º salt çš„å®¢æˆ·ç«¯</div><div class="line">2:çŠ¶æ€ç®¡ç† 1:state</div><div class="line">salt åŸºäº minion è¿›è¡ŒçŠ¶æ€çš„ç®¡ç† 1:state è¯­æ³•</div><div class="line">æ–‡æ¡£:http://docs.saltstack.com/ref/states/all/index.html</div><div class="line"><span class="comment">#åå­—ä¸ºpillar.slsçš„æ–‡ä»¶æ¥å­˜æ”¾å¯¹åŒ¹é…åˆ°çš„</span></div><div class="line">&#123;% <span class="keyword">if</span> grains[<span class="string">'os_family'</span>] == <span class="string">'RedHat'</span> %&#125; - name: vim-enhanced</div><div class="line">&#123;% <span class="keyword">elif</span> grains[<span class="string">'os'</span>] == <span class="string">'Debian'</span> %&#125;</div><div class="line">- name: vim-nox</div><div class="line">&#123;% <span class="keyword">elif</span> grains[<span class="string">'os'</span>] == <span class="string">'Ubuntu'</span> %&#125; - name: vim-nox</div><div class="line">&#123;% endif %&#125;</div><div class="line">- installed</div><div class="line">å¦‚æœæ˜¯ redhard ç³»åˆ—çš„å°±å®‰è£… vim-enhanced,å¦‚æœç³»ç»Ÿæ˜¯ Debian æˆ– è€… Ubuntu å°±å®‰è£… vim-nox</div><div class="line">ä»¥æœ‰å¤šä¸ª</div><div class="line">é™„:state é»˜è®¤ä½¿ç”¨ jinja(http://jinja.pocoo.org/)çš„æ¨¡æ¿è¯­æ³•, æ–‡æ¡£åœ°å€: http://jinja.pocoo.org /docs/templates/</div></pre></td></tr></table></figure>
<p>2:state çš„é€»è¾‘å…³ç³»: æ–‡æ¡£:<a href="http://docs.saltstack.com/ref/states/ordering.html" target="_blank" rel="external">http://docs.saltstack.com/ref/states/ordering.html</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">require:ä¾èµ–æŸä¸ª state,åœ¨è¿è¡Œæ­¤ state å‰,å…ˆè¿è¡Œä¾èµ–çš„ state,ä¾èµ–å¯</div><div class="line">httpd: pkg:</div><div class="line">- installed file.managed:</div><div class="line">- name: /etc/httpd/conf/httpd.conf </div><div class="line">- <span class="built_in">source</span>: salt://httpd/httpd.conf</div><div class="line">- require:</div><div class="line">- pkg: httpd</div></pre></td></tr></table></figure>
<p>watch:åœ¨æŸä¸ª state å˜åŒ–æ—¶è¿è¡Œæ­¤æ¨¡å— redis:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">pkg:</div><div class="line">- latest</div><div class="line">file.managed:</div><div class="line">- <span class="built_in">source</span>: salt://redis/redis.conf</div><div class="line">- name: /etc/redis.conf</div><div class="line">- require:</div><div class="line">- pkg: redis service.running: </div><div class="line">- <span class="built_in">enable</span>: True</div><div class="line"><span class="comment">#state çš„åå­—</span></div></pre></td></tr></table></figure>
<p>$state: #è¦ç®¡ç†çš„æ¨¡å—ç±»å‹ - $State states #è¯¥æ¨¡å—çš„çŠ¶æ€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- watch:</div><div class="line">- file: /etc/redis.conf </div><div class="line">- pkg: redis</div></pre></td></tr></table></figure>
<p>é™„:watch é™¤å…·å¤‡ require åŠŸèƒ½å¤–,è¿˜å¢äº†å…³æ³¨çŠ¶æ€çš„åŠŸèƒ½</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">order:</div><div class="line">ä¼˜å…ˆçº§æ¯” require å’Œ watch ä½</div><div class="line">æœ‰ order æŒ‡å®šçš„ state æ¯”æ²¡æœ‰ order æŒ‡å®šçš„ä¼˜å…ˆçº§é«˜ vim:</div><div class="line">pkg.installed: - order: 1</div><div class="line">æƒ³è®©æŸä¸ª state æœ€åä¸€ä¸ªè¿è¡Œ,å¯ä»¥ç”¨ last 3:state ä¸ minion</div><div class="line"></div><div class="line">å°†ä¸´æ—¶ç»™ minoin åŠ ä¸ª state</div><div class="line">salt <span class="string">'minion1'</span> state.sls <span class="string">'vim'</span> <span class="comment">#ç»™ minion1 åŠ ä¸€ä¸ª vim çš„ state æ‰§è¡Œè¯¥å‘½ä»¤åå¯ä»¥ç«‹å³çœ‹åˆ°è¾“å‡ºç»“æœ</span></div><div class="line"></div><div class="line">2:highstate</div><div class="line">ç»™ minion æ°¸ä¹…ä¸‹æ·»åŠ çŠ¶æ€</div><div class="line">æ–‡æ¡£: http://docs.saltstack.com/ref/states/highstate.html é»˜è®¤é…ç½®æ–‡ä»¶:/srv/salt/top.sls</div><div class="line">è¯­æ³•:</div><div class="line"><span class="string">'*'</span>:</div><div class="line">- core</div><div class="line">- wsproxy </div><div class="line">- /srv/salt/ç›®å½•ç»“æ„:</div><div class="line">.</div><div class="line">â”œâ”€â”€ core.sls â”œâ”€â”€ top.sls â””â”€â”€ wsproxy</div><div class="line">â”œâ”€â”€ init.sls â”œâ”€â”€ websocket.py â””â”€â”€ websockify</div><div class="line">åº”ç”¨:</div><div class="line">salt <span class="string">"minion1"</span> state.highstate</div><div class="line"></div><div class="line">æµ‹è¯•æ¨¡å¼:</div><div class="line">salt <span class="string">"minion1"</span> state.highstate -v <span class="built_in">test</span>=True 3:salt schedule</div><div class="line">é»˜è®¤çš„ state åªæœ‰åœ¨æœåŠ¡ç«¯è°ƒç”¨çš„æ—¶å€™æ‰æ‰§è¡Œ,å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¸Œæœ› minon è‡ªè§‰ çš„å»ä¿æŒåœ¨æŸä¸ªçŠ¶æ€</div><div class="line"></div><div class="line">æ–‡æ¡£:http://docs.saltstack.com/topics/<span class="built_in">jobs</span>/schedule.html</div><div class="line">cat /srv/pillar/top.sls base:</div><div class="line"><span class="string">"*"</span>:</div><div class="line">- schedule</div><div class="line">cat /srv/pillar/schedule.sls schedule:</div><div class="line">highstate:</div><div class="line"><span class="keyword">function</span>: state.highstate minutes: 30</div><div class="line"></div><div class="line">å¦‚ä¸Šé…ç½®:</div><div class="line">minion ä¼šæ²¡ 30 åˆ†é’Ÿä» master æ‹‰å»ä¸€æ¬¡é…ç½®,è¿›è¡Œè‡ªæˆ‘é…ç½®</div><div class="line"></div><div class="line">3:å®æ—¶ç®¡ç† æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸´æ—¶çš„æŸ¥çœ‹ä¸€å°æˆ–å¤šå°æœºå™¨ä¸Šçš„æŸä¸ªæ–‡ä»¶,æˆ–è€…æ‰§è¡ŒæŸä¸ªå‘½ä»¤</div><div class="line">1:cmd.run</div><div class="line">ç”¨æ³• salt <span class="string">'$targeting'</span> cmd.run <span class="string">'$cmd'</span></div><div class="line">ç¤ºä¾‹:salt <span class="string">'*'</span> cmd.run <span class="string">'hostname'</span> æ‰§è¡Œä¸‹è¿™æ ·çš„å‘½ä»¤,é©¬ä¸Šå°±æ„Ÿå—åˆ°æ•ˆæœäº†,é€Ÿåº¦è¿˜è´¼å¿«</div><div class="line">2:module</div><div class="line">åŒæ—¶,salt ä¹Ÿå°†ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤åšäº†é›†æˆ æ–‡æ¡£:http://docs.saltstack.com/ref/modules/all/index.html è¿™é‡Œå‡ ä¹æ¶µç›–äº†æˆ‘ä»¬æ‰€æœ‰çš„å¸¸ç”¨å‘½ä»¤</div><div class="line">æ¯”å¦‚:</div><div class="line">æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹ç£ç›˜ä½¿ç”¨æƒ…å†µ</div><div class="line">salt <span class="string">'*'</span> disk.usage æ–‡æ¡£:http://docs.saltstack.com/topics/tutorials/quickstart.html</div><div class="line">4:æ—  master</div><div class="line">ä¸»è¦åº”è¯¥åœ¨æµ‹è¯•å’Œ salt å•æœºç®¡ç†çš„æ—¶å€™</div></pre></td></tr></table></figure>
<h3 id="4-salt-å¼€å‘-1"><a href="#4-salt-å¼€å‘-1" class="headerlink" title="4:salt å¼€å‘"></a>4:salt å¼€å‘</h3><p>1:saltclient ç®¡ç† salt<br>åªæœ‰æ‰ master æ‰å¯ä»¥salt å…¨éƒ¨ç”¨ python,è¿™é‡Œä¹Ÿç”¨ python<br>æ–‡æ¡£:<a href="http://docs.saltstack.com/ref/python-api.html" target="_blank" rel="external">http://docs.saltstack.com/ref/python-api.html</a> </p>
<p>ç¤ºä¾‹:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">import salt.client</div><div class="line">client = salt.client.LocalClient()</div><div class="line">ret = client.cmd(<span class="string">'*'</span>, <span class="string">'cmd.run'</span>, [<span class="string">'ls -l'</span>])</div><div class="line"><span class="built_in">print</span> ret</div></pre></td></tr></table></figure>
<p>2:salt api<br>salt api æˆ‘ç°åœ¨è¿˜æ²¡ç”¨,ä¸è¿‡æˆ‘ä¹Ÿæ²¡æå®š,å¦‚æœä½ æå®šäº†,æˆ‘ä¼šéå¸¸æ„Ÿè°¢ä½ èƒ½åˆ†äº«<br>ä¸‹çš„ã€‚</p>
<p>####å‚è€ƒæ–‡æ¡£:</p>
<p>1:salt ä¸­æ–‡ wiki:<a href="http://wiki.saltstack.cn/" target="_blank" rel="external">http://wiki.saltstack.cn/</a> å¾ˆä¸é”™çš„æ–‡ç« :<a href="http://wiki.saltstack.cn/reproduction/dive-into-saltstack" target="_blank" rel="external">http://wiki.saltstack.cn/reproduction/dive-into-saltstack</a><br>2:salt å®˜ç½‘ <a href="http://saltstack.com/" target="_blank" rel="external">http://saltstack.com/</a> å®˜ç½‘æ–‡æ¡£:<a href="http://docs.saltstack.com/" target="_blank" rel="external">http://docs.saltstack.com/</a></p>

	

	

</article>




	<article>
	
		<h1><a href="/2015/07/23/è¿ç»´ç¬”è®°/CDNåŠ é€ŸåŠ©åŠ›é«˜å¹¶å‘ç½‘ç«™æ¶æ„/">CDNåŠ é€ŸåŠ©åŠ›é«˜å¹¶å‘ç½‘ç«™æ¶æ„</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2015-07-23</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Framework/">Framework</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/CDN/">CDN</a>
			</span>
		
	</div>

	

	
		<h2 id="CDNåŠ é€ŸåŠ©åŠ›é«˜å¹¶å‘ç½‘ç«™æ¶æ„"><a href="#CDNåŠ é€ŸåŠ©åŠ›é«˜å¹¶å‘ç½‘ç«™æ¶æ„" class="headerlink" title="CDNåŠ é€ŸåŠ©åŠ›é«˜å¹¶å‘ç½‘ç«™æ¶æ„"></a>CDNåŠ é€ŸåŠ©åŠ›é«˜å¹¶å‘ç½‘ç«™æ¶æ„</h2><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/CDN1.png" alt=""></figure></p>
<h2 id="æ¶æ„è¯´æ˜ï¼š"><a href="#æ¶æ„è¯´æ˜ï¼š" class="headerlink" title="æ¶æ„è¯´æ˜ï¼š"></a>æ¶æ„è¯´æ˜ï¼š</h2><p>ç”¨æˆ·é€šè¿‡äº’è”ç½‘è®¿é—®ç½‘ç«™éœ€è¦ç»è¿‡çš„èŠ‚ç‚¹å¦‚ä¸‹ï¼š</p>
<h4 id="ä¸€ã€è¦é€šè¿‡åŸŸåè§£æ"><a href="#ä¸€ã€è¦é€šè¿‡åŸŸåè§£æ" class="headerlink" title="ä¸€ã€è¦é€šè¿‡åŸŸåè§£æ"></a>ä¸€ã€è¦é€šè¿‡åŸŸåè§£æ</h4><p>åœ¨åŸŸåè§£æå¤„æœ‰ä¸¤ç§æ–¹å¼<br>1ã€è‡ªå»ºï¼Œè‡ªå»ºéœ€è¦åœ¨åŸŸåè§£æå‰æ¶è®¾é˜²ç«å¢™ã€‚</p>
<p>2ã€ä½¿ç”¨ç°æœ‰çš„åŸŸåè§£ææä¾›å•†ï¼Œéœ€è¦è®¾ç½®æˆCNAME,å…¶å®å°±æ˜¯å¦ä¸€ä¸ªåŸŸåè§£æï¼Œè¿›è¡Œè·³è½¬ã€‚åœ¨åˆšå¼€å§‹çš„æ—¶å€™å»ºè®®å…ˆç”¨CNAMEæ–¹å¼ï¼Œéƒ¨ç½²ä¸å½±å“ç”¨æˆ·ç°æœ‰æ–¹å¼ï¼Œå®¹æ˜“è¢«ç”¨æˆ·æ¥å—ï¼Œè€Œä¸”ä¸ç”¨æš‚æ—¶ä¸ç”¨æ‹…å¿ƒç¬¬ä¸€çº§dnsçš„é—®é¢˜ã€‚</p>
<p>æ€»ä¹‹ï¼Œå¦‚æœè¦å»ºè®¾idcåŠ é€Ÿï¼Œé˜²æ­¢ddosæ”»å‡»ä¹‹ç±»çš„æœåŠ¡ï¼ŒåŸŸåè§£ææœåŠ¡ä¸€å®šè¦æä¾›ï¼Œä¸ç®¡æ˜¯ç›´æ¥æä¾›dnsæœåŠ¡è¿˜æ˜¯é—´æ¥é€šè¿‡cnameè½¬å‘ã€‚<br>é‡Œé¢çš„ä¸»è¦æŠ€æœ¯ï¼Œæ˜¯é€šè¿‡ç”¨æˆ·è¯·æ±‚çš„ipæ¥å¾—åˆ°ç¦»ç”¨æˆ·æœ€è¿‘çš„æœåŠ¡å™¨çš„åœ°å€ï¼Œå¹¶é€šè¿‡å®ƒæ¥æä¾›æœåŠ¡ã€‚å¦‚æœè¦è¿›è¡Œå®‰å…¨é˜²æŠ¤ï¼Œæ¯”å¦‚sqlæ³¨å…¥æ£€æŸ¥ï¼Œjsè·¨ç«™è„šæœ¬ç­‰å¯ä»¥åœ¨è¿™ä¸€å±‚è¿›è¡Œå¤„ç†ã€‚</p>
<h4 id="äºŒã€æä¾›è™šæ‹Ÿæœº"><a href="#äºŒã€æä¾›è™šæ‹Ÿæœº" class="headerlink" title="äºŒã€æä¾›è™šæ‹Ÿæœº"></a>äºŒã€æä¾›è™šæ‹Ÿæœº</h4><p>è™šæ‹Ÿæœºç°åœ¨ä¸»æµæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€æ˜¯è™šæ‹Ÿä¸»æœºï¼Œä¸»è¦çš„è½¯ä»¶æœ‰å¼€æºçš„openvzï¼Œå•†ç”¨çš„Virtuozzoç­‰,å¦ä¸€ç±»æ˜¯è™šæ‹Ÿæœºå¦‚vmwareã€xenã€kvmç­‰ï¼Œè¿™ç±»æä¾›è™šæ‹Ÿæ“ä½œç³»ç»Ÿï¼Œå¯ä»¥æ˜¯å¼‚æ„çš„ã€‚ä»–ä»¬ä¸¤ä¸ªçš„å¯¹æ¯”ä¸»è¦æ˜¯è™šæ‹Ÿä¸»æœºçš„åˆ©ç”¨ç‡æ¯”è¾ƒé«˜ï¼Œå¯ä»¥ä¸€å°ä¸»æµpcserverå¯ä»¥è™šæ‹Ÿå‡ åä¸ªåˆ°ä¸Šç™¾ä¸ªè™šæ‹Ÿä¸»æœºï¼Œä½†åªèƒ½æ˜¯åŒä¸€ç±»æ“ä½œç³»ç»Ÿã€‚è™šæ‹Ÿæœºçš„è¿è¡Œæ•ˆç‡ç›¸å¯¹ä½å¾ˆå¤šï¼Œä¸€èˆ¬ä¸»æµpcserverä¹Ÿå°±åå‡ ä¸ªå·¦å³ã€‚ä»–çš„æœ‰ç‚¹æ˜¯å¼‚æ„æ“ä½œç³»ç»Ÿï¼Œå¤‡ä»½ç®¡ç†æ¯”è¾ƒæ–¹ä¾¿ã€‚å½“ç„¶åœ¨å»ºè®¾çš„æ—¶å€™å¯ä»¥å…ˆç”¨è™šæ‹Ÿæœºï¼Œç„¶ååœ¨è™šæ‹Ÿæœºä¸Šå»ºè®¾è™šæ‹Ÿä¸»æœºã€‚</p>
<p>å¦‚æœè¦æä¾›å¯¹å¤–æœåŠ¡ï¼Œipåœ°å€æ˜¯æ¯”ä¸å¯å°‘çš„ï¼Œå¯¹äºä¸€ä¸ªç”¨æˆ·æ¥è¯´ï¼Œä¸€ä¸ªåŸŸåéœ€è¦å‡ ä¸ªç‚¹ï¼Œå°±éœ€è¦å‡ ä¸ªipã€‚</p>
<h4 id="ä¸‰ã€LVSé›†ç¾¤"><a href="#ä¸‰ã€LVSé›†ç¾¤" class="headerlink" title="ä¸‰ã€LVSé›†ç¾¤"></a>ä¸‰ã€LVSé›†ç¾¤</h4><p>ç”±äºè¦æä¾›åŠ é€Ÿç­‰æœåŠ¡ï¼Œç”¨æˆ·ç›´æ¥ä½¿ç”¨çš„openvzè™šæ‹Ÿä¸»æœºçš„æ€§èƒ½å’Œæ•ˆç‡ä¸€èˆ¬ä¸å¤§ï¼Œåˆè¦æä¾›é«˜å¯ç”¨æ€§ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡è™šæ‹Ÿä¸»æœºè®¿é—®lvsé›†ç¾¤çš„æ•°æ®ï¼Œé€šè¿‡lvsé›†ç¾¤æ¥æä¾›æœåŠ¡ã€‚</p>
<h4 id="å››ã€Squid"><a href="#å››ã€Squid" class="headerlink" title="å››ã€Squid"></a>å››ã€Squid</h4><p>Squidæ˜¯ç¼“å­˜ï¼Œå°¤å…¶æ˜¯å¯¹é™æ€é¡µé¢å’Œæ–‡ä»¶æœ‰å¾ˆå¥½åŠ é€Ÿæ•ˆæœã€‚sinaã€sohuç­‰éƒ½ç”¨å®ƒæ¥åšç¼“å­˜åŠ é€Ÿã€‚</p>
<h4 id="äº”ã€Nginxâ€‹"><a href="#äº”ã€Nginxâ€‹" class="headerlink" title="äº”ã€Nginxâ€‹"></a>äº”ã€Nginxâ€‹</h4><p>Nginxä¸»è¦æä¾›åå‘ä»£ç†åŠŸèƒ½ï¼Œå½“é€šè¿‡ä¿®æ”¹æˆ–è€…æ›´æ–°äº†é¡µé¢ï¼Œç”±nginxæ¥è´Ÿè´£æ›´æ–°ç¼“å­˜ã€‚è¿˜æœ‰å°±æ˜¯åŠ¨æ€ç½‘ç«™ï¼Œä¹Ÿæ˜¯ç”±nginxæ¥æä¾›æœåŠ¡ã€‚</p>
<p>Nginxå’Œsqidéƒ½å¯ä»¥æä¾›é™æ€ç¼“å­˜åŠŸèƒ½ï¼Œä¸¤è€…è¿˜è¦ç»“åˆèµ·æ¥å‘æŒ¥æœ€å¤§æ•ˆæœã€‚å¦‚æœè¦è¿›è¡Œå®‰å…¨é˜²æŠ¤ï¼Œæ¯”å¦‚sqlæ³¨å…¥æ£€æŸ¥ï¼Œjsè·¨ç«™è„šæœ¬ç­‰å¯ä»¥åœ¨è¿™ä¸€å±‚è¿›è¡Œå¤„ç†ã€‚<br>é˜²DDOS</p>
<h4 id="å…­ã€è‡ªåŠ¨åŒ–å·¥å…·-Dockerè¿è¡Œ"><a href="#å…­ã€è‡ªåŠ¨åŒ–å·¥å…·-Dockerè¿è¡Œ" class="headerlink" title="å…­ã€è‡ªåŠ¨åŒ–å·¥å…·+Dockerè¿è¡Œ"></a>å…­ã€è‡ªåŠ¨åŒ–å·¥å…·+Dockerè¿è¡Œ</h4><p>Saltstask è‡ªåŠ¨åŒ–å·¥å…·æ‰¹é‡åˆå§‹åŒ–è„šæœ¬æ›´æ–°ç›‘æ§è„šæœ¬ï¼Œå¢åˆ æ”¹æŸ¥æ·»åŠ ç¼“å­˜æœºåˆ¶ã€‚ä¸Šç™¾å°æœåŠ¡å™¨èŠ‚çœæˆ‘ä»¬æ“ä½œæ—¶é—´ï¼Œç‰©ç†æœºè¿è¡ŒDockerç¨‹åºã€‚</p>
<h2 id="é˜²ddosçš„ä¸»è¦å†…å®¹ç”±ä¸¤ä¸ªæ–¹é¢ï¼š"><a href="#é˜²ddosçš„ä¸»è¦å†…å®¹ç”±ä¸¤ä¸ªæ–¹é¢ï¼š" class="headerlink" title="é˜²ddosçš„ä¸»è¦å†…å®¹ç”±ä¸¤ä¸ªæ–¹é¢ï¼š"></a>é˜²ddosçš„ä¸»è¦å†…å®¹ç”±ä¸¤ä¸ªæ–¹é¢ï¼š</h2><h4 id="ä¸€ã€å¸¦å®½"><a href="#ä¸€ã€å¸¦å®½" class="headerlink" title="ä¸€ã€å¸¦å®½"></a>ä¸€ã€å¸¦å®½</h4><p>è¿™ä¸ªæ˜¯å¾ˆé‡è¦çš„åœ°æ–¹ï¼Œæ®æˆ‘ç°åœ¨ä»ç½‘ä¸Šå¾—åˆ°çš„èµ„æ–™ï¼Œç°åœ¨ä¸»æµçš„idcæœºæˆ¿ä¸€èˆ¬æœ€å¤§æä¾›ç‹¬ç«‹ç™¾å…†ç«¯å£ï¼Œè€Œä¸”ä»·æ ¼ä¸è²ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹å¯ä»¥æœºæŸœç§Ÿç”¨ã€‚è¿™ä¸ªè¿˜éœ€è¦è°ƒç ”æ˜¯å¦å¯ä»¥æä¾›æ›´å¤§çš„å¸¦å®½ã€‚</p>
<h4 id="äºŒã€é˜²ç«å¢™è®¾å¤‡"><a href="#äºŒã€é˜²ç«å¢™è®¾å¤‡" class="headerlink" title="äºŒã€é˜²ç«å¢™è®¾å¤‡"></a>äºŒã€é˜²ç«å¢™è®¾å¤‡</h4><p>éœ€è¦åœ¨æ¥å…¥å£éƒ¨ç½²é˜²ç«å¢™ï¼Œéœ€è¦æ ¹æ®idcæ¥å£ç«¯å£æ¥ç¡®å®šå®¹é‡ï¼Œæœ‰çš„idcæœºæˆ¿ä¹Ÿæä¾›æ­¤æœåŠ¡ã€‚</p>
<h4 id="ä¸‰ã€æµé‡ç‰µå¼•è®¾å¤‡"><a href="#ä¸‰ã€æµé‡ç‰µå¼•è®¾å¤‡" class="headerlink" title="ä¸‰ã€æµé‡ç‰µå¼•è®¾å¤‡"></a>ä¸‰ã€æµé‡ç‰µå¼•è®¾å¤‡</h4><p>è¿™ä¸ªä¸€èˆ¬idcæœºæˆ¿ä¼šæä¾›æ­¤æœåŠ¡ï¼Œè¿™ä¸ªæ ¹æ®éœ€è¦æ˜¯å¦éœ€è¦è´­ä¹°ã€‚</p>
<h4 id="äº¤æµå­¦ä¹ ï¼š"><a href="#äº¤æµå­¦ä¹ ï¼š" class="headerlink" title="äº¤æµå­¦ä¹ ï¼š"></a>äº¤æµå­¦ä¹ ï¼š</h4><p>ğŸ§  Linux shell_é«˜çº§è¿ç»´æ´¾: <code>459096184</code>    åœˆå­ (ç³»ç»Ÿè¿ç»´-åº”ç”¨è¿ç»´-è‡ªåŠ¨åŒ–è¿ç»´-è™šæ‹ŸåŒ–æŠ€æœ¯ç ”ç©¶æ¬¢è¿åŠ å…¥)<br>ğŸ§  BigData-Exchange School : <code>521621407</code>  åœˆå­ï¼ˆå¤§æ•°æ®è¿ç»´)ï¼ˆHadoopå¼€å‘äººå‘˜)ï¼ˆå¤§æ•°æ®ç ”ç©¶çˆ±å¥½è€…) æ¬¢è¿åŠ å…¥</p>
<p>ç›¸åº”Bidataæœ‰å†…éƒ¨å¾®ä¿¡äº¤æµç¾¤äº’ç›¸å­¦ä¹ ï¼ŒåŠ å…¥QQç¾¤æœ‰é“¾æ¥ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2015/04/01/è¿ç»´å®‰å…¨/ä½¿ç”¨AIDEåšLinuxé«˜çº§å…¥ä¾µæ£€æµ‹æ–‡ä»¶ç›‘æ§/">ä½¿ç”¨AIDEåšLinuxé«˜çº§å…¥ä¾µæ£€æµ‹æ–‡ä»¶ç›‘æ§</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2015-04-01</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/è¿ç»´å®‰å…¨/">è¿ç»´å®‰å…¨</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Operation-safety/">Operation safety</a>
			</span>
		
	</div>

	

	
		<h2 id="1ã€aideä»‹ç»"><a href="#1ã€aideä»‹ç»" class="headerlink" title="1ã€aideä»‹ç»"></a>1ã€aideä»‹ç»</h2><blockquote>
<p>AIDE(Adevanced Intrusion Detection Environment,é«˜çº§å…¥ä¾µæ£€æµ‹ç¯å¢ƒ)æ˜¯ä¸ªå…¥ä¾µæ£€æµ‹å·¥å…·ï¼Œä¸»è¦ç”¨é€”æ˜¯æ£€æŸ¥æ–‡æœ¬çš„å®Œæ•´æ€§ã€‚</p>
<p>AIDEèƒ½å¤Ÿæ„é€ ä¸€ä¸ªæŒ‡å®šæ–‡æ¡£çš„æ•°æ®åº“ï¼Œä»–ä½¿ç”¨aide.confä½œä¸ºå…¶é…ç½®æ–‡æ¡£ã€‚AIDEæ•°æ®åº“èƒ½å¤Ÿä¿å­˜æ–‡æ¡£çš„å„ç§å±æ€§ï¼ŒåŒ…æ‹¬ï¼šæƒé™(permission)ã€ç´¢å¼•èŠ‚ç‚¹åºå·(inode number)ã€æ‰€å±ç”¨æˆ·(user)ã€æ‰€å±ç”¨æˆ·ç»„(group)ã€æ–‡æ¡£å¤§å°ã€æœ€åä¿®æ”¹æ—¶é—´(mtime)ã€åˆ›å»ºæ—¶é—´(ctime)ã€æœ€åè®¿é—®æ—¶é—´(atime)ã€å¢åŠ çš„å¤§å°è¿åŒè¿æ¥æ•°ã€‚AIDEè¿˜èƒ½å¤Ÿä½¿ç”¨ä¸‹åˆ—ç®—æ³•ï¼šsha1ã€md5ã€rmd160ã€tigerï¼Œä»¥å¯†æ–‡å½¢å¼å»ºç«‹æ¯ä¸ªæ–‡æ¡£çš„æ ¡éªŒç æˆ–æ•£åˆ—å·ã€‚</p>
<p>å¸¸è§çš„å…¥ä¾µæ£€æµ‹è½¯ä»¶ï¼š tripwireâ€“æ“ä½œæ¯”è¾ƒå¤æ‚,aideâ€“ç”¨ä»¥ä»£æ›¿tripwire,æ¯”è¾ƒç®€å•.</p>
</blockquote>
<h3 id="ç³»ç»Ÿç¯å¢ƒï¼š"><a href="#ç³»ç»Ÿç¯å¢ƒï¼š" class="headerlink" title="ç³»ç»Ÿç¯å¢ƒï¼š"></a>ç³»ç»Ÿç¯å¢ƒï¼š</h3><p>ã€€ã€€RHEL 6.2 [2.6.32-220.el6.i686]</p>
<p>ã€€ã€€è½¯ä»¶ç¯å¢ƒï¼š</p>
<h3 id="2ã€aideå®‰è£…-é…ç½®ä½¿ç”¨"><a href="#2ã€aideå®‰è£…-é…ç½®ä½¿ç”¨" class="headerlink" title="2ã€aideå®‰è£… é…ç½®ä½¿ç”¨"></a>2ã€aideå®‰è£… é…ç½®ä½¿ç”¨</h3><p>yum rpmäºŒè¿›åˆ¶å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y install aide</div></pre></td></tr></table></figure>
<blockquote>
<p>æˆ‘çš„é…ç½®æ–‡ä»¶</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div></pre></td><td class="code"><pre><div class="line">mv /etc/aide.conf /etc/aide.conf.bak</div><div class="line">vim /etc/aide.conf</div><div class="line"> </div><div class="line"></div><div class="line"><span class="comment"># Example configuration file for AIDE.</span></div><div class="line">@@define DBDIR /var/lib/aide <span class="comment">#åŸºå‡†æ•°æ®åº“ç›®å½•</span></div><div class="line">@@define LOGDIR /var/<span class="built_in">log</span>/aide <span class="comment">#æ—¥å¿—ç›®å½•</span></div><div class="line"> </div><div class="line"></div><div class="line"><span class="comment"># The location of the database to be read.</span></div><div class="line">database=file:@@&#123;DBDIR&#125;/aide.db.gz <span class="comment">#åŸºç¡€æ•°æ®åº“æ–‡ä»¶</span></div><div class="line"> </div><div class="line"><span class="comment"># The location of the database to be written.    #database_out=sql:host:port:database:login_name:passwd:table</span></div><div class="line"><span class="comment">#database_out=file:aide.db.new</span></div><div class="line">database_out=file:@@&#123;DBDIR&#125;/aide.db.new.gz <span class="comment">#æ›´æ–°æ•°æ®åº“æ–‡ä»¶</span></div><div class="line"> </div><div class="line"><span class="comment"># Whether to gzip the output to database</span></div><div class="line">gzip_dbout=yes</div><div class="line"> </div><div class="line"><span class="comment"># Default.</span></div><div class="line">verbose=5</div><div class="line"> </div><div class="line">report_url=file:@@&#123;LOGDIR&#125;/aide.log</div><div class="line">report_url=stdout</div><div class="line"><span class="comment">#report_url=stderr</span></div><div class="line"><span class="comment">#NOT IMPLEMENTED report_url=mailto:root@foo.com</span></div><div class="line"><span class="comment">#NOT IMPLEMENTED report_url=syslog:LOG_AUTH</span></div><div class="line"> </div><div class="line"><span class="comment"># These are the default rules.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#p:      permissions</span></div><div class="line"><span class="comment">#i:      inode:</span></div><div class="line"><span class="comment">#n:      number of links</span></div><div class="line"><span class="comment">#u:      user</span></div><div class="line"><span class="comment">#g:      group</span></div><div class="line"><span class="comment">#s:      size</span></div><div class="line"><span class="comment">#b:      block count</span></div><div class="line"><span class="comment">#m:      mtime</span></div><div class="line"><span class="comment">#a:      atime</span></div><div class="line"><span class="comment">#c:      ctime</span></div><div class="line"><span class="comment">#S:      check for growing size</span></div><div class="line"><span class="comment">#acl:           Access Control Lists</span></div><div class="line"><span class="comment">#selinux        SELinux security context</span></div><div class="line"><span class="comment">#xattrs:        Extended file attributes</span></div><div class="line"><span class="comment">#md5:    md5 checksum</span></div><div class="line"><span class="comment">#sha1:   sha1 checksum</span></div><div class="line"><span class="comment">#sha256:        sha256 checksum</span></div><div class="line"><span class="comment">#sha512:        sha512 checksum</span></div><div class="line"><span class="comment">#rmd160: rmd160 checksum</span></div><div class="line"><span class="comment">#tiger:  tiger checksum</span></div><div class="line"> </div><div class="line"><span class="comment">#haval:  haval checksum (MHASH only)</span></div><div class="line"><span class="comment">#gost:   gost checksum (MHASH only)</span></div><div class="line"><span class="comment">#crc32:  crc32 checksum (MHASH only)</span></div><div class="line"><span class="comment">#whirlpool:     whirlpool checksum (MHASH only)</span></div><div class="line"> </div><div class="line"> <span class="comment">#R:              p+i+n+u+g+s+m+c+acl+selinux+xattrs+md5</span></div><div class="line"><span class="comment">#L:             p+i+n+u+g+acl+selinux+xattrs</span></div><div class="line"><span class="comment">#E:             Empty group</span></div><div class="line"><span class="comment">#&gt;:             Growing logfile       p+u+g+i+n+S+acl+selinux+xattrs</span></div><div class="line">R = p+i+n+u+g+s+m+c+acl+selinux+xattrs+md5</div><div class="line">L = p+i+n+u+g+acl+selinux+xattrs</div><div class="line">&gt; = p+u+g+i+n+S+acl+selinux+xattrs</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment"># You can create custom rules like this.</span></div><div class="line"><span class="comment"># With MHASH...</span></div><div class="line"><span class="comment"># ALLXTRAHASHES =      sha1+rmd160+sha256+sha512+whirlpool+tiger+haval+gost+crc32</span></div><div class="line">ALLXTRAHASHES = sha1+rmd160+sha256+sha512+tiger</div><div class="line"><span class="comment"># Everything but access time (Ie. all changes)</span></div><div class="line">EVERYTHING = R+ALLXTRAHASHES</div><div class="line"> </div><div class="line"><span class="comment"># Sane, with multiple hashes</span></div><div class="line"><span class="comment"># NORMAL = R+rmd160+sha256+whirlpool</span></div><div class="line">NORMAL = R+rmd160+sha256</div><div class="line"> </div><div class="line"><span class="comment"># For directories, don't bother doing hashes</span></div><div class="line">DIR = p+i+n+u+g+acl+selinux+xattrs</div><div class="line"> </div><div class="line"> <span class="comment"># Access control only</span></div><div class="line"> PERMS = p+i+u+g+acl+selinux</div><div class="line"> </div><div class="line"> <span class="comment"># Logfile are special, in that they often change</span></div><div class="line"> LOG = &gt;</div><div class="line"> </div><div class="line"> <span class="comment"># Just do md5 and sha256 hashes</span></div><div class="line"> LSPP = R+sha256</div><div class="line"> </div><div class="line"> <span class="comment"># Some files get updated automatically, so the     inode/ctime/mtime change</span></div><div class="line"> <span class="comment"># but we want to know when the data inside them   changes</span></div><div class="line"> DATAONLY =     p+n+u+g+s+acl+selinux+xattrs+md5+sha256+rmd160+tiger</div><div class="line"> </div><div class="line"> <span class="comment"># Next decide what directories/files you want in the database.</span></div><div class="line"> </div><div class="line">/boot   NORMAL</div><div class="line">/bin    NORMAL</div><div class="line">/sbin   NORMAL</div><div class="line">/lib    NORMAL</div><div class="line">/lib64  NORMAL</div><div class="line">/opt    NORMAL</div><div class="line">/usr    NORMAL</div><div class="line">/root   NORMAL</div><div class="line"><span class="comment"># These are too volatile</span></div><div class="line">!/usr/src</div><div class="line">!/usr/tmp</div><div class="line">!/usr/share <span class="comment">#é€šè¿‡æ–‡ä»¶è·¯å¾„å‰é¢åŠ æ„Ÿå¹å· ! æ’é™¤è¿™ä¸ªè·¯å¾„çš„ç›‘æ§,è¯·è‡ªå®šä¹‰</span></div><div class="line"> <span class="comment"># Check only permissions, inode, user and group for /etc, but</span></div><div class="line"><span class="comment"># cover some important files closely.</span></div><div class="line">/etc    PERMS</div><div class="line">!/etc/mtab</div><div class="line"> <span class="comment"># Ignore backup files</span></div><div class="line">!/etc/.*~</div><div class="line">/etc/exports  NORMAL</div><div class="line">/etc/fstab    NORMAL</div><div class="line">/etc/passwd   NORMAL</div><div class="line">/etc/group    NORMAL</div><div class="line">/etc/gshadow  NORMAL</div><div class="line">/etc/shadow   NORMAL</div><div class="line">/etc/security/opasswd   NORMAL</div><div class="line"> </div><div class="line">/etc/hosts.allow   NORMAL</div><div class="line">/etc/hosts.deny    NORMAL</div><div class="line"> </div><div class="line">/etc/sudoers NORMAL</div><div class="line">/etc/skel NORMAL</div><div class="line"> </div><div class="line">/etc/logrotate.d NORMAL</div><div class="line"> </div><div class="line">/etc/resolv.conf DATAONLY</div><div class="line"> </div><div class="line">/etc/nscd.conf NORMAL</div><div class="line">/etc/securetty NORMAL</div><div class="line"> </div><div class="line"><span class="comment"># Shell/X starting files</span></div><div class="line">/etc/profile NORMAL</div><div class="line">/etc/bashrc NORMAL</div><div class="line">/etc/bash_completion.d/ NORMAL</div><div class="line">/etc/login.defs NORMAL</div><div class="line">/etc/zprofile NORMAL</div><div class="line">/etc/zshrc NORMAL</div><div class="line">/etc/zlogin NORMAL</div><div class="line">/etc/zlogout NORMAL</div><div class="line">/etc/profile.d/ NORMAL</div><div class="line">/etc/X11/ NORMAL</div><div class="line">  </div><div class="line"><span class="comment"># Pkg manager</span></div><div class="line">/etc/yum.conf NORMAL</div><div class="line">/etc/yumex.conf NORMAL</div><div class="line">/etc/yumex.profiles.conf NORMAL</div><div class="line">/etc/yum/ NORMAL</div><div class="line"> /etc/yum.repos.d/ NORMAL</div><div class="line"> </div><div class="line"> /var/<span class="built_in">log</span>   LOG</div><div class="line"> /var/run/utmp LOG</div><div class="line"> </div><div class="line"> <span class="comment"># This gets new/removes-old filenames daily</span></div><div class="line">!/var/<span class="built_in">log</span>/sa</div><div class="line"> <span class="comment"># As we are checking it, we've truncated     yesterdays size to zero.</span></div><div class="line"> !/var/<span class="built_in">log</span>/aide.log</div><div class="line"> </div><div class="line"><span class="comment"># LSPP rules...</span></div><div class="line"><span class="comment"># AIDE produces an audit record, so this becomes       # /var/log/audit/ LSPP</span></div><div class="line">/etc/audit/ LSPP</div><div class="line">/etc/libaudit.conf LSPP</div><div class="line">/usr/sbin/stunnel LSPP</div><div class="line">/var/spool/at LSPP</div><div class="line">/etc/at.allow LSPP</div><div class="line">/etc/at.deny LSPP</div><div class="line">/etc/cron.allow LSPP</div><div class="line">/etc/cron.deny LSPP</div><div class="line">/etc/cron.d/ LSPP</div><div class="line">/etc/cron.daily/ LSPP</div><div class="line">/etc/cron.hourly/ LSPP</div><div class="line">/etc/cron.monthly/ LSPP</div><div class="line">/etc/cron.weekly/ LSPP</div><div class="line">/etc/crontab LSPP</div><div class="line">/var/spool/cron/root LSPP</div><div class="line"> </div><div class="line">/etc/login.defs LSPP</div><div class="line">/etc/securetty LSPP</div><div class="line">/var/<span class="built_in">log</span>/faillog LSPP</div><div class="line">/var/<span class="built_in">log</span>/lastlog LSPP</div><div class="line"> </div><div class="line">/etc/hosts LSPP</div><div class="line">/etc/sysconfig LSPP</div><div class="line"> </div><div class="line">/etc/inittab LSPP</div><div class="line">/etc/grub/ LSPP</div><div class="line">/etc/rc.d LSPP</div><div class="line"> </div><div class="line">/etc/ld.so.conf LSPP</div><div class="line"> </div><div class="line"> /etc/localtime LSPP</div><div class="line"> </div><div class="line">/etc/sysctl.conf LSPP</div><div class="line"> </div><div class="line">/etc/modprobe.conf LSPP</div><div class="line"> </div><div class="line">/etc/pam.d LSPP</div><div class="line">/etc/security LSPP</div><div class="line">/etc/aliases LSPP</div><div class="line">/etc/postfix LSPP</div><div class="line"> </div><div class="line">/etc/ssh/sshd_config LSPP</div><div class="line"> /etc/ssh/ssh_config LSPP</div><div class="line"> </div><div class="line">/etc/stunnel LSPP</div><div class="line"> </div><div class="line">/etc/vsftpd.ftpusers LSPP</div><div class="line"> /etc/vsftpd LSPP</div><div class="line"> </div><div class="line">/etc/issue LSPP</div><div class="line">/etc/issue.net LSPP</div><div class="line">  </div><div class="line">/etc/cups LSPP</div><div class="line"> </div><div class="line"><span class="comment"># With AIDE's default verbosity level of 5, these would give lots of</span></div><div class="line"><span class="comment"># warnings upon tree traversal. It might change with  future version.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#=/lost\+found    DIR</span></div><div class="line"><span class="comment">#=/home           DIR</span></div><div class="line"> </div><div class="line"><span class="comment"># Ditto /var/log/sa reason...</span></div><div class="line">!/var/<span class="built_in">log</span>/and-httpd</div><div class="line"> </div><div class="line"><span class="comment"># Admins dot files constantly change, just check perms</span></div><div class="line">/root/\..* PERMS</div></pre></td></tr></table></figure>
<h4 id="ä¸‹ä¸€æ­¥ï¼š"><a href="#ä¸‹ä¸€æ­¥ï¼š" class="headerlink" title="ä¸‹ä¸€æ­¥ï¼š"></a>ä¸‹ä¸€æ­¥ï¼š</h4><p> åˆå§‹åŒ–ç›‘æ§æ•°æ®åº“(è¿™éœ€è¦ä¸€äº›æ—¶é—´)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">  /usr/sbin/aide -c /etc/aide.conf --init</div><div class="line">``` </div><div class="line">æŠŠå½“å‰åˆå§‹åŒ–çš„æ•°æ®åº“ä½œä¸ºå¼€å§‹çš„åŸºç¡€æ•°æ®åº“</div><div class="line"></div><div class="line">``` bash</div><div class="line">     cp /var/lib/aide/aide.db.new.gz       /var/lib/aide/aide.db.gz</div></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯æ­£å¸¸çš„æ”¹åŠ¨ æ›´æ–°æ”¹åŠ¨åˆ°åŸºç¡€æ•°æ®åº“</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">aide --update</div><div class="line"><span class="built_in">cd</span> /var/lib/aide/</div></pre></td></tr></table></figure>
<p>è¦†ç›–æ›¿æ¢æ—§çš„æ•°æ®åº“</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv aide.db.new.gz aide.db.gz</div></pre></td></tr></table></figure>
<p>åœ¨ç»ˆç«¯ä¸­æŸ¥çœ‹æ£€æµ‹ç»“æœ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">aide --check</div></pre></td></tr></table></figure>
<p>æ£€æŸ¥æ–‡ä»¶æ”¹åŠ¨ ä¿å­˜åˆ°æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">    aide --check --report=file:/tmp/aide-report-`date +%Y%m%d`.txt</div><div class="line">``` </div><div class="line">å®šæ—¶ä»»åŠ¡æ‰§è¡Œaideæ£€æµ‹æŠ¥å‘Šå’Œè‡ªåŠ¨é‚®ä»¶å‘é€aideæ£€æµ‹æŠ¥å‘Š(å¦‚æœæ²¡æœ‰mail, yum install mail,è¿˜éœ€è¦æœ‰æœ¬åœ°é‚®ä»¶æœåŠ¡æ”¯æŒ, yum install sendmail;/etc/init.d/sendmail start)</div><div class="line">  </div><div class="line">``` bash</div><div class="line">    crontab <span class="_">-e</span></div><div class="line">    00 02 * * * /usr/sbin/aide -C -V4 | /bin/mail <span class="_">-s</span> <span class="string">"AIDE REPORT <span class="variable">$(date +%Y%m%d)</span>"</span>  root@localhost</div></pre></td></tr></table></figure>
<h3 id="5ã€å‚è€ƒ"><a href="#5ã€å‚è€ƒ" class="headerlink" title="5ã€å‚è€ƒ"></a>5ã€å‚è€ƒ</h3><ul>
<li><p>å®˜ç½‘ :<a href="http://aide.sourceforge.net/" target="_blank" rel="external">http://aide.sourceforge.net/</a></p>
</li>
<li><p>AIDE â€“Linuxé«˜çº§å…¥ä¾µæ£€æµ‹ <a href="http://gupt12.blog.51cto.com/7651206/1263183" target="_blank" rel="external">http://gupt12.blog.51cto.com/7651206/1263183</a></p>
</li>
<li><p>å‚è€ƒï¼š<a href="http://www.iamle.com/archives/1664.html" target="_blank" rel="external">http://www.iamle.com/archives/1664.html</a></p>
</li>
</ul>

	

	

</article>





	<span class="different-posts">ğŸ“– <a href="/page/11">more posts</a> ğŸ“–</span>



	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2017 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
