<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		
	<span class="different-posts different-posts_earlier">📖 <a href="/page/8">earlier posts</a> 📖</span>




	<article>
	
		<h1><a href="/2016/06/21/性能监控/Zabbix/zabbix3-0部署jmx监控tomcat/">zabbix3.0部署jmx监控tomcat</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-06-21</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/monitoring/">monitoring</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Zabbix-monitoring/">Zabbix monitoring</a>
			</span>
		
	</div>

	

	
		<p>zabbix提供了一个java gateway的应用去监控jmx（Java Management Extensions，即Java管理扩展）是一个为应用程序、设备、系统等植入管理功能的框架。JMX可以跨越一系列异构操作系统平台、系统体系结构和网络传输协议，灵活的开发无缝集成的系统、网络和服务管理应用。</p>
<h2 id="一-Zabbix-的JMX监控架构"><a href="#一-Zabbix-的JMX监控架构" class="headerlink" title="一. Zabbix 的JMX监控架构"></a>一. Zabbix 的JMX监控架构</h2><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat1.png" alt=""></figure></p>
<h3 id="一：部署环境"><a href="#一：部署环境" class="headerlink" title="一：部署环境"></a>一：部署环境</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Centos   6.7</div><div class="line">Zabbix     3.0.3</div><div class="line">Tomcat     7.0.55</div></pre></td></tr></table></figure>
<h3 id="服务端配置"><a href="#服务端配置" class="headerlink" title="服务端配置"></a>服务端配置</h3><h3 id="1、安装jdk（版本1-7-0-79）"><a href="#1、安装jdk（版本1-7-0-79）" class="headerlink" title="1、安装jdk（版本1.7.0_79）"></a>1、安装jdk（版本1.7.0_79）</h3><p>JDK 各自的版本7.0 还是8.0 版本官网下载：<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="external">JDK</a></p>
<p>我这里也上传了7.0.67 版本的和8.0版本的jdk源码包：</p>
<p><a href="http://oak0aohum.bkt.clouddn.com/jdk1.7.0_67.tar.gz" target="_blank" rel="external">7.0JDK源码包</a></p>
<p><a href="http://oak0aohum.bkt.clouddn.com/jdk1.8.0_66.tar.gz" target="_blank" rel="external">8.0JDK源码包</a></p>
<p>并上传到zabbix server</p>
<p>直接解压下载下来的包到自定义的目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf jdk1.7.0_67.tar.gz -C /srv/</div></pre></td></tr></table></figure>
<p>安装成功之后添加系统环境变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">cd</span> /etc/profile.d</div><div class="line">vim java.sh</div><div class="line"><span class="built_in">export</span> JAVA_HOME=/srv/jdk1.7.0_67</div><div class="line"><span class="built_in">export</span> CLASS_PATH=<span class="string">"<span class="variable">$JAVA_HOME</span>/lib:<span class="variable">$JAVA_HOME</span>/jre/lib"</span></div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</div></pre></td></tr></table></figure>
<p>使配置生效</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">source</span> <span class="regexp">/etc/</span>profile</div></pre></td></tr></table></figure>
<p>安装与配置比较简单。执行java -version命令，出现类似界面表示成功。</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">java </span>-version</div><div class="line"><span class="keyword">java </span>version <span class="string">"1.7.0_67"</span></div><div class="line"><span class="keyword">Java(TM) </span>SE Runtime Environment (<span class="keyword">build </span><span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span>_67-<span class="keyword">b01)</span></div><div class="line"><span class="keyword">Java </span>HotSpot(TM) <span class="number">64</span>-<span class="keyword">Bit </span>Server VM (<span class="keyword">build </span><span class="number">24</span>.<span class="number">65</span>-<span class="keyword">b04, </span>mixed mode)</div></pre></td></tr></table></figure>
<p>如果出现问题，查看下环境变量是否设置。</p>
<h3 id="2、安装Zabbix-Java-gateway"><a href="#2、安装Zabbix-Java-gateway" class="headerlink" title="2、安装Zabbix-Java-gateway"></a>2、安装<code>Zabbix-Java-gateway</code></h3><p>Zabbix2.0起添加了支持用于监控JMX应用程序的服务进程，称为“Zabbix-Java-gateway”，它是用java写的一个程序。</p>
<p>可使用rpm进行安装，我使用源码安装，大家可在安装zabbix时启用–enable-java参数即可安装zabbix java gateway，如果第一次没有加载，可重新加载编译安装</p>
<p>有两种方法可以安装Zabbix-Java-gateway，第1种是编译安装zabbix时添加–enable java参数。第2种是单独安装，步骤如下：</p>
<ul>
<li><code>第一种方法</code>：</li>
</ul>
<p>安装gateway，需要java，java-devel依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yum　install　－ｙ　</div><div class="line">http://repo.zabbix.com/zabbix/2.4/rhel/6/x86_64/zabbix-release-2.4-1.el6.noarch.rpm　　　　　　　　　　　　　　　    安装yum源</div><div class="line">yum install -y  java  java-devel  zabbix-java-gateway　　安装gateway</div></pre></td></tr></table></figure>
<p>测试是否成功：</p>
<p>第一：测试java是否成功</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">java </span>-version</div><div class="line"><span class="keyword">java </span>version <span class="string">"1.7.0_67"</span></div><div class="line"><span class="keyword">Java(TM) </span>SE Runtime Environment (<span class="keyword">build </span><span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span>_67-<span class="keyword">b01)</span></div><div class="line"><span class="keyword">Java </span>HotSpot(TM) <span class="number">64</span>-<span class="keyword">Bit </span>Server VM (<span class="keyword">build </span><span class="number">24</span>.<span class="number">65</span>-<span class="keyword">b04, </span>mixed mode)</div></pre></td></tr></table></figure>
<p>第二：测试gateway是否安装成功</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">service zabbix-java-gateway <span class="built_in">status</span></div><div class="line">zabbix-java-gateway <span class="built_in">is</span> stopped</div></pre></td></tr></table></figure>
<ul>
<li><code>第二种方法</code>：</li>
</ul>
<p>我这里升级3.0.3版本的时候已经安装好了。所以如果没有安装上的可以单独安装没关系的：</p>
<p>不受影响步骤如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># tar zxvf zabbix-3.0.3.tar.gz</span></div><div class="line"><span class="comment"># cd zabbix-3.0.3</span></div><div class="line"><span class="comment"># ./configure  --enable-java  --prefix=/data/zabbix/zabbix_java  #/data/zabbix是我的zabbix安装目录</span></div><div class="line"><span class="comment"># make &amp;&amp; make install</span></div></pre></td></tr></table></figure>
<p>我的目录是默认在/usr/local/zabbix/sbin/zabbix_java/</p>
<h3 id="3、修改Java-gateway的配置文件并启动它"><a href="#3、修改Java-gateway的配置文件并启动它" class="headerlink" title="3、修改Java-gateway的配置文件并启动它"></a>3、修改<code>Java-gateway</code>的配置文件并启动它</h3><p>配置文件单独安装的路径为/data/zabbix/zabbix_java/sbin/zabbix_java/settings.sh<br>我这里是这个目录。具体根据实际安装情况） /usr/local/zabbix/sbin/zabbix_java/settings.sh<br>启用以下参数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">LISTEN_IP=<span class="string">"127.0.0.1"</span>       <span class="comment">#监听地址</span></div><div class="line">LISTEN_PORT=10052      <span class="comment">#监听端口</span></div><div class="line">START_POLLERS=50        <span class="comment"># 开启的工作线程数（必须大于等于后面zabbix_server.conf文件的StartJavaPollers参数） #必须配置，启动的进出数</span></div></pre></td></tr></table></figure>
<p><code>注意事项：</code></p>
<ol>
<li>配置文件PID_FILE的路径必须是正确的，可以自己去cd找，yum安装默认情况下不用改动。</li>
<li>START_POLLERS项是配置启动的进出数，该值必须大于等于Zabbix-Server里面的startJavaPollers项。</li>
</ol>
<p>进入/usr/local/zabbix/sbin/zabbix_java/目录，执行./startup.sh</p>
<p>检查端口是否监听：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">netstat -anp|grep 10052</div><div class="line">tcp        0      0 0.0.0.0:10052               0.0.0.0:*                   LISTEN      21949/java</div></pre></td></tr></table></figure>
<p>查看是否已经监听10052端口，如果已监听，表示启动成功，如果没有，可通过zabbix_server日志查看解决</p>
<h3 id="4、修改zabbix-server的配置文件并重启"><a href="#4、修改zabbix-server的配置文件并重启" class="headerlink" title="4、修改zabbix_server的配置文件并重启"></a>4、修改<code>zabbix_server</code>的配置文件并重启</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">vim /usr/<span class="built_in">local</span>/zabbix/etc/zabbix_server.conf</div><div class="line"></div><div class="line">JavaGateway=127.0.0.1      <span class="comment"># JavaGateway 服务器地址，zabbix_server与zabbix_java_gateway在同一台主机</span></div><div class="line">JavaGatewayPort=10052       <span class="comment">#端口</span></div><div class="line">StartJavaPollers=5          <span class="comment"># #设定连接java gateway 的进程数，当设置为0时表示不具有抓取java信息的能力</span></div></pre></td></tr></table></figure>
<h3 id="5、-添加catalina-jmx-remote-jar"><a href="#5、-添加catalina-jmx-remote-jar" class="headerlink" title="5、 添加catalina-jmx-remote.jar"></a>5、 添加catalina-jmx-remote.jar</h3><p>添加catalina-jmx-remote.jar到zabbix java gateway的lib目录下，catalina-jmx-remote.jar包可在<a href="http://archive.apache.org/dist/tomcat/下，在各版本目录的bin/extras/子目录下" target="_blank" rel="external">http://archive.apache.org/dist/tomcat/下，在各版本目录的bin/extras/子目录下</a></p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /usr/local/zabbix/sbin/zabbix_java/<span class="class"><span class="keyword">lib</span>/</span></div><div class="line">wget <span class="symbol">http:</span>/<span class="regexp">/archive.apache.org/dist</span><span class="regexp">/tomcat/tomcat</span>-<span class="number">7</span>/v7.<span class="number">0.55</span>/bin/extras/catalina-jmx-remote.jar</div></pre></td></tr></table></figure>
<p>重启服务zabbix和java gateway 并加入启动项并验证：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/zabbix_server restart</div><div class="line">/usr/<span class="built_in">local</span>/zabbix/sbin/zabbix_java/shutdown.sh</div><div class="line">/usr/<span class="built_in">local</span>/zabbix/sbin/zabbix_java/startup.sh</div></pre></td></tr></table></figure>
<h3 id="6-下载测试工具cmdline-jmxclient-0-10-3-jar"><a href="#6-下载测试工具cmdline-jmxclient-0-10-3-jar" class="headerlink" title="6.下载测试工具cmdline-jmxclient-0.10.3.jar"></a>6.下载测试工具<code>cmdline-jmxclient-0.10.3.jar</code></h3><p>cmdline-jmxclient-0.10.3.jar为一个测试工具，可用来测试jmx是否配置正确，下载cmdline-jmxclient-0.10.3.jar(下载到任意目录)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget http://crawler.archive.org/cmdline-jmxclient/cmdline-jmxclient-0.10.3.jar</div></pre></td></tr></table></figure>
<h2 id="二、被监控tomcat-配置［被监控tomcat操作］"><a href="#二、被监控tomcat-配置［被监控tomcat操作］" class="headerlink" title="二、被监控tomcat 配置［被监控tomcat操作］"></a>二、被监控tomcat 配置［被监控tomcat操作］</h2><h3 id="下载catalina-jmx-remote-jar"><a href="#下载catalina-jmx-remote-jar" class="headerlink" title="下载catalina-jmx-remote.jar"></a>下载catalina-jmx-remote.jar</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /srv/tomcat/tomcat-account/lib/</div><div class="line">wget http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.55/bin/extras/catalina-jmx-remote.jar <span class="comment">#我的tomcat版本是7.0.55</span></div><div class="line">chown -R tomcat:tomcat catalina-jmx-remote.jar</div><div class="line">chmod +x catalina-jmx-remote.jar</div></pre></td></tr></table></figure>
<p>我的tomcat版本是<code>7.0.55</code>  将下载后后的jar包放到被监控的tomcat实例的lib目录下。 </p>
<h3 id="查看tomcat的版本"><a href="#查看tomcat的版本" class="headerlink" title="查看tomcat的版本"></a>查看tomcat的版本</h3><ul>
<li>这里之前也自己也忘记了tomcat的版本是多少了，所以我先查看下然后在下载：</li>
</ul>
<figure class="highlight ldif"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">cd /srv/tomcat/tomcat_account/bin</span></div><div class="line">[root@tomcat_A1 bin]# ./version.sh --</div><div class="line">Using CATALINA_BASE:   /srv/tomcat/tomcat_account</div><div class="line"><span class="attribute">Using CATALINA_HOME</span>:   /srv/tomcat/tomcat_account</div><div class="line"><span class="attribute">Using CATALINA_TMPDIR</span>: /srv/tomcat/tomcat_account/temp</div><div class="line"><span class="attribute">Using JRE_HOME</span>:        /srv/jdk1.7.0_67</div><div class="line"><span class="attribute">Using CLASSPATH</span>:       /srv/tomcat/tomcat_account/bin/bootstrap.jar:/srv/tomcat/tomcat_account/bin/tomcat-juli.jar</div><div class="line"><span class="attribute">Server version</span>: Apache Tomcat/7.0.55</div><div class="line"><span class="attribute">Server built</span>:   Jul 18 2014 05:34:04</div><div class="line"><span class="attribute">Server number</span>:  7.0.55.0</div><div class="line"><span class="attribute">OS Name</span>:        Linux</div><div class="line"><span class="attribute">OS Version</span>:     2.6.32-573.8.1.el6.x86_64</div><div class="line"><span class="attribute">Architecture</span>:   amd64</div><div class="line"><span class="attribute">JVM Version</span>:    1.7.0_67-b01</div><div class="line"><span class="attribute">JVM Vendor</span>:     Oracle Corporation</div></pre></td></tr></table></figure>
<p>在tomcat端配置JMX。（tomcat/bin/catalina.sh）自己安装的tomcat路径，找到catalina.sh文件。</p>
<p>网上很多人修改tomcat/bin/下的catalina.sh，添加如下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CATALINA_OPTS=<span class="string">"-Dcom.sun.management.jmxremote</span></div><div class="line">-Dcom.sun.management.jmxremote.authenticate=false</div><div class="line">-Dcom.sun.management.jmxremote.ssl=false</div><div class="line">-Dcom.sun.management.jmxremote.port=12345  #定义jmx监听端口</div><div class="line">-Djava.rmi.server.hostname=192.168.7.186"</div></pre></td></tr></table></figure>
<ul>
<li>我这里是直接在bin目录下面创建自定义的脚本。</li>
</ul>
<h3 id="修改setenv-sh"><a href="#修改setenv-sh" class="headerlink" title="修改setenv.sh"></a>修改setenv.sh</h3><p>vi /srv/tomcat/tomcat-account/bin/setenv.sh</p>
<p>添加如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CATALINA_OPTS=<span class="string">"<span class="variable">$&#123;CATALINA_OPTS&#125;</span> -Djava.rmi.server.hostname=192.168.7.186"</span></div><div class="line">CATALINA_OPTS=<span class="string">"<span class="variable">$&#123;CATALINA_OPTS&#125;</span> -Djavax.management.builder.initial="</span></div><div class="line">CATALINA_OPTS=<span class="string">"<span class="variable">$&#123;CATALINA_OPTS&#125;</span> -Dcom.sun.management.jmxremote=true"</span></div><div class="line">CATALINA_OPTS=<span class="string">"<span class="variable">$&#123;CATALINA_OPTS&#125;</span> -Dcom.sun.management.jmxremote.ssl=false"</span></div><div class="line">CATALINA_OPTS=<span class="string">"<span class="variable">$&#123;CATALINA_OPTS&#125;</span> -Dcom.sun.management.jmxremote.authenticate=false"</span></div></pre></td></tr></table></figure>
<p>注意：hostname位机器ip地址，即被监控机器对外服务地址</p>
<h3 id="3-修改server-xml"><a href="#3-修改server-xml" class="headerlink" title="3.修改server.xml"></a>3.修改server.xml</h3><p>vi /opt/apache-tomcat/conf/server.xml<br>添加如下，注意添加位置在</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Listener className=<span class="string">"org.apache.catalina.core.ThreadLocalLeakPreventionListener"</span> /&gt;</div></pre></td></tr></table></figure>
<p>之后添加如下代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Listener className=<span class="string">"org.apache.catalina.mbeans.JmxRemoteLifecycleListener"</span> rmiRegistryPortPlatform=<span class="string">"12345"</span> rmiServerPortPlatform=<span class="string">"12345"</span> /&gt;</div></pre></td></tr></table></figure>
<p>3、重启<code>tomcat</code><br>这里我之前是用写好的启动脚本去启动的，发现一个问题。<br>因为我都是用/etc/init.d/tomcat stop start 来启动。<br>可是发现服务启动了，可是之前的tomcat服务端口不见了。我之前的tomcat服务端口<code>10001</code></p>
<p>然后查看日志出现报错：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">	at java<span class="selector-class">.lang</span><span class="selector-class">.reflect</span><span class="selector-class">.Method</span><span class="selector-class">.invoke</span>(Method<span class="selector-class">.java</span>:<span class="number">606</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.commons</span><span class="selector-class">.daemon</span><span class="selector-class">.support</span><span class="selector-class">.DaemonLoader</span><span class="selector-class">.start</span>(DaemonLoader<span class="selector-class">.java</span>:<span class="number">243</span>)</div><div class="line">Caused by: java<span class="selector-class">.lang</span><span class="selector-class">.IllegalArgumentException</span>: jmxremote<span class="selector-class">.access</span> (没有那个文件或目录)</div><div class="line">	at javax<span class="selector-class">.management</span><span class="selector-class">.remote</span><span class="selector-class">.rmi</span><span class="selector-class">.RMIConnectorServer</span><span class="selector-class">.start</span>(RMIConnectorServer<span class="selector-class">.java</span>:<span class="number">373</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.mbeans</span><span class="selector-class">.JmxRemoteLifecycleListener</span><span class="selector-class">.createServer</span>(JmxRemoteLifecycleListener<span class="selector-class">.java</span>:<span class="number">313</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.mbeans</span><span class="selector-class">.JmxRemoteLifecycleListener</span><span class="selector-class">.lifecycleEvent</span>(JmxRemoteLifecycleListener<span class="selector-class">.java</span>:<span class="number">259</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.util</span><span class="selector-class">.LifecycleSupport</span><span class="selector-class">.fireLifecycleEvent</span>(LifecycleSupport<span class="selector-class">.java</span>:<span class="number">117</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.util</span><span class="selector-class">.LifecycleBase</span><span class="selector-class">.fireLifecycleEvent</span>(LifecycleBase<span class="selector-class">.java</span>:<span class="number">90</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.util</span><span class="selector-class">.LifecycleBase</span><span class="selector-class">.setStateInternal</span>(LifecycleBase<span class="selector-class">.java</span>:<span class="number">402</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.util</span><span class="selector-class">.LifecycleBase</span><span class="selector-class">.setState</span>(LifecycleBase<span class="selector-class">.java</span>:<span class="number">347</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.core</span><span class="selector-class">.StandardServer</span><span class="selector-class">.startInternal</span>(StandardServer<span class="selector-class">.java</span>:<span class="number">732</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.util</span><span class="selector-class">.LifecycleBase</span><span class="selector-class">.start</span>(LifecycleBase<span class="selector-class">.java</span>:<span class="number">150</span>)</div><div class="line">	... <span class="number">11</span> more</div><div class="line">Caused by: java<span class="selector-class">.io</span><span class="selector-class">.FileNotFoundException</span>: jmxremote<span class="selector-class">.access</span> (没有那个文件或目录)</div><div class="line">	at java<span class="selector-class">.io</span><span class="selector-class">.FileInputStream</span><span class="selector-class">.open</span>(Native Method)</div><div class="line">	at java<span class="selector-class">.io</span><span class="selector-class">.FileInputStream</span>.&lt;init&gt;(FileInputStream<span class="selector-class">.java</span>:<span class="number">146</span>)</div><div class="line">	at java<span class="selector-class">.io</span><span class="selector-class">.FileInputStream</span>.&lt;init&gt;(FileInputStream<span class="selector-class">.java</span>:<span class="number">101</span>)</div><div class="line">	at com<span class="selector-class">.sun</span><span class="selector-class">.jmx</span><span class="selector-class">.remote</span><span class="selector-class">.security</span><span class="selector-class">.MBeanServerFileAccessController</span><span class="selector-class">.propertiesFromFile</span>(MBeanServerFileAccessController<span class="selector-class">.java</span>:<span class="number">294</span>)</div><div class="line">	at com<span class="selector-class">.sun</span><span class="selector-class">.jmx</span><span class="selector-class">.remote</span><span class="selector-class">.security</span><span class="selector-class">.MBeanServerFileAccessController</span>.&lt;init&gt;(MBeanServerFileAccessController<span class="selector-class">.java</span>:<span class="number">133</span>)</div><div class="line">	at javax<span class="selector-class">.management</span><span class="selector-class">.remote</span><span class="selector-class">.rmi</span><span class="selector-class">.RMIConnectorServer</span><span class="selector-class">.start</span>(RMIConnectorServer<span class="selector-class">.java</span>:<span class="number">371</span>)</div><div class="line">	... <span class="number">19</span> more</div></pre></td></tr></table></figure>
<p>这里先kill -9 tomcat进程<br>只需要在/bin/目录下面启动服务。<code>./startup.sh</code><br>然后查看有下面的12345 12346 进程 和tomcat进程10001 说明就对了。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@tomcat_A1 bin]# netstat -ntulp</div><div class="line">Active Internet connections (only servers)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">10.46</span><span class="meta">.72</span><span class="meta">.172</span>:<span class="number">10050</span>          <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">8483</span>/zabbix_agentd</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span><span class="meta">.0</span><span class="meta">.1</span>:<span class="number">8006</span>              <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">8942</span>/java</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">4041</span>                <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">8942</span>/java</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">10001</span>               <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">8942</span>/java</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">22</span>                  <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">1363</span>/sshd</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">36440</span>               <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">8942</span>/java</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">12345</span>               <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">8942</span>/java</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">12346</span>               <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   <span class="number">1374</span>/ntpd</div><div class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">10.46</span><span class="meta">.72</span><span class="meta">.172</span>:<span class="number">123</span>            <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                               <span class="number">1374</span>/ntpd</div><div class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span><span class="meta">.0</span><span class="meta">.1</span>:<span class="number">123</span>               <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                               <span class="number">1374</span>/ntpd</div><div class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">123</span>                 <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                               <span class="number">1374</span>/ntpd</div></pre></td></tr></table></figure>
<p>重启zabbix agent</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">service zabbix-agent restart</span></div></pre></td></tr></table></figure>
<p>注：防火墙需要开放12345，12346端口</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">-A INPUT -i  eth0 -p tcp -m <span class="keyword">state</span> --state NEW -m tcp --dport <span class="number">12345</span> -j ACCEPT</div><div class="line">-A INPUT -i  eth0 -p tcp -m <span class="keyword">state</span> --state NEW -m tcp --dport <span class="number">12346</span> -j ACCEPT</div></pre></td></tr></table></figure>
<p>###4、服务端测试是否可以获取数据</p>
<p>命令行下测试需要cmdline-jmxclient-0.10.3.jar这个包，测试结果如下：</p>
<p>这个包下载地址:<a href="http://oak0aohum.bkt.clouddn.com/cmdline-jmxclient-0.10.3.jar" target="_blank" rel="external">cmdline-jmxclient-0.10.3.jar</a></p>
<p>在zabbix server上执行</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java -jar /tmp/cmdline-jmxclient-<span class="number">0.10</span>.<span class="number">3</span><span class="selector-class">.jar</span> - <span class="number">192.168</span>.<span class="number">7.186</span>:<span class="number">12345</span> java<span class="selector-class">.lang</span>:type=Memory NonHeapMemoryUsage</div></pre></td></tr></table></figure>
<p>如果有如下回显表示jmx配置正确，如不正确，请检查配置,看下端口启动是否正常，server.xml 配置。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">07</span><span class="regexp">/22/</span><span class="number">2016</span> <span class="number">14</span>:<span class="number">45</span>:<span class="number">28</span> +<span class="number">0800</span> org.archive.jmx.Client <span class="string">NonHeapMemoryUsage:</span></div><div class="line"><span class="string">committed:</span> <span class="number">80347136</span></div><div class="line"><span class="string">init:</span> <span class="number">24576000</span></div><div class="line"><span class="string">max:</span> <span class="number">136314880</span></div><div class="line"><span class="string">used:</span> <span class="number">46634984</span></div></pre></td></tr></table></figure>
<p>写个脚本自动判断：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">vim context.sh</div><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">java -jar /opt/tomcat/cmdline-jmxclient-0.10.3.jar - 10.46.72.172:12345 Catalina:<span class="built_in">type</span>=Manager,*| awk -F <span class="string">","</span> <span class="string">'&#123; print $1 &#125;'</span>|awk -F: <span class="string">'&#123; print $2 &#125;'</span>&gt;/tmp/tomcat/context.csv</div></pre></td></tr></table></figure>
<h2 id="三、导入模板到zabbix，并关联到主机，添加监控"><a href="#三、导入模板到zabbix，并关联到主机，添加监控" class="headerlink" title="三、导入模板到zabbix，并关联到主机，添加监控"></a>三、导入模板到zabbix，并关联到主机，添加监控</h2><p>这样也可以选择系统自带的，我这里zabbix版本是3.0的，系统自带的可以选择：<br>选择配置：主机-模板-选择-模板-：<br>Template JMX Tomcat<br>Template JMX Generic</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat4.png" alt=""></figure></p>
<p>从网上下载了一个不错的模板，导入后如下：</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat2.png" alt=""></figure><br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat3.png" alt=""></figure></p>
<p>导入模板以后主机添加端口：</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat6.png" alt=""></figure></p>
<p>然后查看图形：<br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat5.png" alt=""></figure></p>
<p>就有了。</p>
<h3 id="四、如何监控单主机多个tomcat"><a href="#四、如何监控单主机多个tomcat" class="headerlink" title="四、如何监控单主机多个tomcat"></a>四、如何监控单主机多个tomcat</h3><p>监控多个tomcat实例，网上的详细的配置文档很少，几乎没有。比较好的办法是使用自动发现，但刚使用zabbix，来不及研究，所以采用笨法，修改模板、监控项、图形来达到最终目的。<br>关键配置：<br>1、添加主机时添加多个jmx端口</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat7.png" alt=""></figure></p>
<p>2、修改监控项、键值<br>在同一主机上，zabbix不允键值重复，但是监控的项目是一样的，不可能键值写的不重复，经过几番搜索，找到方法如下：<br>只要在箭头处添加1个空格就可以，也可以是多个。（注意位置不要错，在逗到后面）</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat8.png" alt=""></figure></p>
<p>剩下的就是体力活了，克隆监控项、修改监控项、克隆图形、修改图形。。。<br>以下是两个tomcat实例的监控项：</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat10.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat9.png" alt=""></figure></p>
<p>多个tomcat在一台主机上面最后的监控效果如下：</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat11.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat12.png" alt=""></figure></p>
<p>一开始zabbix监控tomcat 一路顺畅，可是到测试正不正常时候，返回拒绝连接，第一时间想到就是配置有问题：</p>
<p>我是参考这个解决了。</p>
<p>具体参数内容请参考 <a href="https://tomcat.apache.org/tomcat-7.0-doc/config/listeners.html#Additional_Implementations" target="_blank" rel="external">apache tomcat 文档</a></p>
<p>也非常感谢：张爱德大神 一路zabbix上面的帮我一起排坑：</p>
<p>zabbix大神 他的博客blog：<a href="https://blog.cactifans.com" target="_blank" rel="external">https://blog.cactifans.com</a></p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/06/21/性能监控/Zabbix/zabbix监控tcp连接数/">zabbix监控tcp连接数</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-06-21</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/monitoring/">monitoring</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Zabbix-monitoring/">Zabbix monitoring</a>
			</span>
		
	</div>

	

	
		<p>系统环境:</p>
<p>CentOS release 6.7 (Final)</p>
<p>zabbix.3.0.3</p>
<h3 id="zabbix-server端："><a href="#zabbix-server端：" class="headerlink" title="zabbix-server端："></a>zabbix-server端：</h3><p>首先创建脚本 Shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir /usr/<span class="built_in">local</span>/zabbix/scripts</div><div class="line">[root@zabbix scripts]<span class="comment"># vim /usr/local/zabbix/scripts/tcp_connections.sh</span></div></pre></td></tr></table></figure>
<p>script：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"> </div><div class="line"><span class="function"><span class="title">stat</span></span>() &#123;</div><div class="line">        netstat -an | awk <span class="string">'/^tcp/ &#123;++S[$NF]&#125; END &#123;for(a in S) print a, S[a]&#125;'</span></div><div class="line">        &#125;</div><div class="line"> </div><div class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></div><div class="line">        TIME_WAIT)</div><div class="line">        <span class="built_in">stat</span> |grep <span class="string">'TIME_WAIT'</span> |awk <span class="string">'&#123;print $2&#125;'</span></div><div class="line">        ;;</div><div class="line">        CLOSE_WAIT)</div><div class="line">        <span class="built_in">stat</span> | grep <span class="string">'CLOSE_WAIT'</span> |awk <span class="string">'&#123;print $2&#125;'</span></div><div class="line">        ;;</div><div class="line">        FIN_WAIT1)</div><div class="line">        <span class="built_in">stat</span> | grep <span class="string">'FIN_WAIT1'</span> |awk <span class="string">'&#123;print $2&#125;'</span></div><div class="line">        ;;</div><div class="line">        ESTABLISHED)</div><div class="line">        <span class="built_in">stat</span> | grep <span class="string">'ESTABLISHED'</span> |awk <span class="string">'&#123;print $2&#125;'</span></div><div class="line">        ;;</div><div class="line">        SYN_RECV)</div><div class="line">        <span class="built_in">stat</span> |grep <span class="string">'SYN_RECV'</span> |awk <span class="string">'&#123;print $2&#125;'</span></div><div class="line">        ;;</div><div class="line">        LAST_ACK)</div><div class="line">        <span class="built_in">stat</span> |grep <span class="string">'LAST_ACK'</span> |awk <span class="string">'&#123;print $2&#125;'</span></div><div class="line">        ;;</div><div class="line">        LISTEN)</div><div class="line">        <span class="built_in">stat</span> |grep <span class="string">'LISTEN'</span> |awk <span class="string">'&#123;print $2&#125;'</span></div><div class="line">        ;;</div><div class="line">        *)</div><div class="line">        <span class="built_in">echo</span> <span class="string">"Usage: TIME_WAIT CLOSE_WAIT FIN_WAIT1 ESTABLISHED SYN_RECV LAST_ACK LISTEN"</span></div><div class="line">        ;;</div><div class="line"><span class="keyword">esac</span></div></pre></td></tr></table></figure>
<p>测试脚本是否可用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@zabbix scripts]<span class="comment">#  chmod +x tcp_connections.sh</span></div><div class="line">[root@zabbix scripts]<span class="comment">#  ./tcp_connections.sh ESTABLISHED</span></div><div class="line">59</div></pre></td></tr></table></figure>
<h3 id="zabbix-agent端："><a href="#zabbix-agent端：" class="headerlink" title="zabbix-agent端："></a>zabbix-agent端：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@zabbix scripts]<span class="comment">#  vim /usr/local/zabbix/etc/zabbix_agentd.conf.d/monitor_tcp_connections.conf</span></div></pre></td></tr></table></figure>
<p>编辑server端zabbix_agentd配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">UserParameter=tcp.time_wait,/usr/<span class="built_in">local</span>/zabbix/scripts/tcp_connections.sh TIME_WAIT</div><div class="line">UserParameter=tcp.close_wait,/usr/<span class="built_in">local</span>/zabbix/scripts/tcp_connections.sh CLOSE_WAIT</div><div class="line">UserParameter=tcp.fin_wait1,/usr/<span class="built_in">local</span>/zabbix/scripts/tcp_connections.sh FIN_WAIT1</div><div class="line">UserParameter=tcp.established,/usr/<span class="built_in">local</span>/zabbix/scripts/tcp_connections.sh ESTABLISHED</div><div class="line">UserParameter=tcp.syn_recv,/usr/<span class="built_in">local</span>/zabbix/scripts/tcp_connections.sh SYN_RECV</div><div class="line">UserParameter=tcp.last_ack,/usr/<span class="built_in">local</span>/zabbix/scripts/tcp_connections.sh LAST_ACK</div><div class="line">UserParameter=tcp.listen,/usr/<span class="built_in">local</span>/zabbix/scripts/tcp_connections.sh LISTEN</div></pre></td></tr></table></figure>
<h3 id="重启服务"><a href="#重启服务" class="headerlink" title="重启服务"></a>重启服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@zabbix scripts]<span class="comment"># /etc/init.d/zabbix_agentd restart</span></div><div class="line">Shutting down zabbix_agentd:                               [确定]</div><div class="line">Starting zabbix_agentd:                                    [确定]</div></pre></td></tr></table></figure>
<h3 id="测试监控是否有数据"><a href="#测试监控是否有数据" class="headerlink" title="测试监控是否有数据"></a>测试监控是否有数据</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/zabbix/</span>bin/zabbix_get -s localhost -k tcp.established</div><div class="line"><span class="symbol">ZBX_NOTSUPPORTED:</span> Unsupported item key.</div></pre></td></tr></table></figure>
<p>出现这个错误，提示我key值有问题。<br>所以我检查了下配置。</p>
<p>添加了一条目录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">vim /usr/<span class="built_in">local</span>/zabbix/etc/zabbix_agentd.conf</div><div class="line">Include=/usr/<span class="built_in">local</span>/zabbix/etc/zabbix_agentd.conf.d/*.conf</div></pre></td></tr></table></figure>
<p>然后测试：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@zabbix scripts]<span class="comment"># /usr/local/zabbix/bin/zabbix_get -s localhost -k tcp.established</span></div><div class="line">64</div></pre></td></tr></table></figure>
<p>然后在web里创建模版，方便以后多台添加</p>
<p>选择配置-模板-右上角.创建模板</p>
<p>填写模版名称</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tcp1.png" alt=""></figure></p>
<p>创建监控项</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tcp2.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tcp3.png" alt=""></figure><br> 可以克隆创建监控项。</p>
<p>创建图形</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tcp4.png" alt=""></figure></p>
<p>模版创建完成后，要关联到监控主机</p>
<p>点击主机，选择模版</p>
<p>等一会儿数据图形就会出现</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tcp6.png" alt=""></figure></p>
<p>其他机器也是一样直接添加模板即可。在agentd下面添加key键值重启服务就行。</p>
<p>可参考：</p>
<p><a href="http://www.cenhq.com/2015/09/06/zabbix-monitor-tcp-connection-number/" target="_blank" rel="external">zabbix监控tcp连接数</a></p>
<p>zabbix-server2.4服务端编译安装 <a href="http://blog.yangcvo.me/2015/01/18/zabbix-server服务端编译安装/" target="_blank" rel="external">zabbix-server服务端编译安装</a></p>
<p>zabbix2.4监控80端口状态 : <a href="http://blog.yangcvo.me/2016/07/20/zabbix监控80端口状态/" target="_blank" rel="external">zabbix监控80端口状态</a></p>
<p>zabbix+Grafana安装使用监控结合 ：<a href="http://blog.yangcvo.me/2016/07/13/zabbix-Grafana安装使用结合/" target="_blank" rel="external">zabbix+Grafana安装使用监控结合</a></p>
<p>zabbix监控MySQL-添加自定义监控项 : <a href="http://blog.yangcvo.me/2015/09/29/zabbix监控MySQL-添加自定义监控项/" target="_blank" rel="external">zabbix监控MySQL-添加自定义监控项</a></p>
<p>zabbix的ICMP_Ping模版实现对客户端网络状态的监控 : <a href="http://blog.yangcvo.me/2015/11/18/zabbix的ICMP-Ping模版&gt;实现对客户端网络状态的监控/" target="_blank" rel="external">zabbix的ICMP_Ping模版实现对客户端网络状态的监控</a></p>
<p>zabbix性能监控故障总结 <a href="http://blog.yangcvo.me/2016/02/07/zabbix-故障总结/" target="_blank" rel="external">zabbix性能监控故障总结</a></p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/06/19/性能监控/Zabbix/zabbix-server3-0-3版本环境安装部署/">zabbix-server3.0.3版本环境安装部署</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-06-19</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/monitoring/">monitoring</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Zabbix-monitoring/">Zabbix monitoring</a>
			</span>
		
	</div>

	

	
		<h2 id="系统环境："><a href="#系统环境：" class="headerlink" title="系统环境："></a>系统环境：</h2><ul>
<li>192.168.1.170 MySQL主 </li>
<li>192.168.1.183 zabbix-server</li>
</ul>
<p>CentOS Linux release 7.2.1511 (Core)</p>
<ul>
<li>zabbix源码下载 : <a href="http://www.zabbix.com/download.php" target="_blank" rel="external">http://www.zabbix.com/download.php</a></li>
<li>依赖下载： <a href="https://github.com/zabbixcn/curl-rpm/tree/master/RPMS" target="_blank" rel="external">https://github.com/zabbixcn/curl-rpm/tree/master/RPMS</a></li>
<li>zabbix Down下载安装包：<a href="http://repo.zabbix.com/zabbix/3.2/rhel/6/x86_64/" target="_blank" rel="external">http://repo.zabbix.com/zabbix/3.2/rhel/6/x86_64/</a></li>
<li>zabbix3.2 <a href="http://jaist.dl.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/3.2.4/zabbix-3.2.4.tar.gz" target="_blank" rel="external">http://jaist.dl.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/3.2.4/zabbix-3.2.4.tar.gz</a></li>
</ul>
<h3 id="第一步zabbix："><a href="#第一步zabbix：" class="headerlink" title="第一步zabbix："></a>第一步zabbix：</h3><p>关闭本机上的selinux与iptables服务</p>
<p>1、关闭SELinux</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#下面的命令实现永久关闭SELinux</span></div><div class="line"> sed -i <span class="string">'s/^SELINUX=.*/#&amp;/;s/^SELINUXTYPE=.*/#&amp;/;/SELINUX=.*/a SELINUX=disabled'</span> /etc/sysconfig/selinux</div><div class="line"><span class="comment">#下面的命令实现临时关闭SELinux</span></div><div class="line"></div><div class="line">/usr/sbin/setenforce 0</div><div class="line">/usr/sbin/setenforce: SELinux is disabled</div></pre></td></tr></table></figure>
<p>也可以设置开放端口出去。</p>
<p>CentOS 7.0默认使用的是firewall作为防火墙，这里改为iptables防火墙。</p>
<p>firewall：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">systemctl start firewalld.service<span class="comment">#启动firewall</span></div><div class="line">systemctl stop firewalld.service<span class="comment">#停止firewall</span></div><div class="line">systemctl <span class="built_in">disable</span> firewalld.service<span class="comment">#禁止firewall开机启动</span></div></pre></td></tr></table></figure>
<p>CentOS7默认的防火墙不是iptables,而是firewalle.<br>centos 7 的默认没有安装iptables 需要安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yum install iptables-services</div><div class="line"><span class="comment">#保存上述规则 </span></div><div class="line">service iptables save</div></pre></td></tr></table></figure>
<p>等会再添加端口：10050 ，10051 </p>
<p>搭建LAMP环境，或LNMP环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install mysql-server httpd php –y</div></pre></td></tr></table></figure>
<p>安装其它依赖包</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install mysql-devel gcc net-snmp-devel curl-devel perl-DBI php-gd php-mysql php-bcmath  php-mbstring php-<span class="keyword">xml</span> <span class="title">–y</span>  gcc OpenIPMI-devel net-snmp-devel.x86_64 libxml2-devel mysql-devel</div></pre></td></tr></table></figure>
<p> 这里MySQL我已经在MySQL服务器上面安装好了。只需要创建个新的zabbix数据库即可。</p>
<p> 增加zabbix用户和组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">groupadd zabbix</div><div class="line">useradd –g zabbix –m zabbix</div></pre></td></tr></table></figure>
<p>下载zabbix3.0版本，解压安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">wget http://oak0aohum.bkt.clouddn.com/zabbix-3.0.3.tar.gz  -c /tmp/</div><div class="line"><span class="built_in">cd</span> /tmp/</div><div class="line">tar zxf zabbix-3.0.3.tar.gz</div><div class="line">./configure --prefix=/usr/<span class="built_in">local</span>/zabbix --enable-server --with-mysql --with-net-snmp --with-libxml2 --with-libcurl --with-openipmi --enable-proxy --enable-agent --enable-java --with-ldap</div><div class="line"></div><div class="line">编译成功这里会出现：</div><div class="line">***********************************************************</div><div class="line">*            Now run <span class="string">'make install'</span>                       *</div><div class="line">*                                                         *</div><div class="line">*            Thank you <span class="keyword">for</span> using Zabbix!                  *</div><div class="line">*              &lt;http://www.zabbix.com&gt;                    *</div><div class="line">***********************************************************</div><div class="line"><span class="comment">#直接make install 安装即可：</span></div><div class="line"> </div><div class="line">make install</div></pre></td></tr></table></figure>
<p>这里编译安装 我加上了：–enable-java 这样防止后期监控tomcat需要重新编译。</p>
<h3 id="3-配置数据库"><a href="#3-配置数据库" class="headerlink" title="3.配置数据库"></a>3.配置数据库</h3><p> 登陆到192.168.1.170服务器上面：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># mysql -e "create database zabbix character set utf8 collate  utf8_bin;"   #修改时区</span></div><div class="line"><span class="comment"># mysql -e "grant all privileges on zabbix.* to zabbix@localhost identified by 'zabbix';"  #创建数据库名</span></div></pre></td></tr></table></figure>
<p> 这里我设置了只能192.168.1.0网段可以访问数据库。<br> 所以这里创建数据库直接这么操作了。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">[root@mysql ~]<span class="comment"># mysql -uroot -pIhaozhuo_b313 -h 192.168.1.170</span></div><div class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</div><div class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</div><div class="line">Your MySQL connection id is 10</div><div class="line">Server version: 5.6.20-log MySQL Community Server (GPL)</div><div class="line"></div><div class="line">Copyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.</div><div class="line"></div><div class="line">Oracle is a registered trademark of Oracle Corporation and/or its</div><div class="line">affiliates. Other names may be trademarks of their respective</div><div class="line">owners.</div><div class="line"></div><div class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> help. Type <span class="string">'\c'</span> to clear the current input statement.</div><div class="line"></div><div class="line">mysql&gt; create database zabbix character <span class="built_in">set</span> utf8 collate  utf8_bin;</div><div class="line">Query OK, 1 row affected (0.06 sec)</div><div class="line">mysql&gt; GRANT ALL ON zabbix.* TO <span class="string">'zabbix'</span>@<span class="string">'192.168.1.%'</span> IDENTIFIED BY <span class="string">'zabbix123.com'</span>;</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div><div class="line">mysql&gt; flush privileges;</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div></pre></td></tr></table></figure>
<h3 id="四-导入数据库文件："><a href="#四-导入数据库文件：" class="headerlink" title="四.导入数据库文件："></a>四.导入数据库文件：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /usr/share/doc/zabbix-server-mysql-2.4.8/create</div></pre></td></tr></table></figure>
<p>操作三条命令把数据导入到在指定的MySQL：zabbix</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql -uzabbix -pzabbix123.com -h 192.168.1.170  zabbix &lt; schema.sql</div><div class="line">mysql -uzabbix -pzabbix123.com -h 192.168.1.170  zabbix &lt; images.sql</div><div class="line">mysql -uzabbix -pzabbix123.com -h 192.168.1.170  zabbix &lt; data.sql</div></pre></td></tr></table></figure>
<h3 id="五、配置文件及web前端文件修改"><a href="#五、配置文件及web前端文件修改" class="headerlink" title="五、配置文件及web前端文件修改"></a>五、配置文件及web前端文件修改</h3><p>添加服务端口</p>
<p>vi /etc/services #编辑，在最后添加以下代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Zabbix</span></div><div class="line">zabbix-agent 10050/tcp   <span class="comment"># Zabbix Agent</span></div><div class="line">zabbix-agent 10050/udp   <span class="comment"># Zabbix Agent</span></div><div class="line">zabbix-trapper 10051/tcp <span class="comment"># Zabbix Trapper</span></div><div class="line">zabbix-trapper 10051/udp <span class="comment"># Zabbix Trapper</span></div><div class="line">:wq! <span class="comment">#保存退出</span></div></pre></td></tr></table></figure>
<p>添加后如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># grep zabbix /etc/services</span></div><div class="line">zabbix-agent     10050/tcp  <span class="comment">#ZabbixAgent</span></div><div class="line">zabbix-agent     10050/udp  <span class="comment">#ZabbixAgent</span></div><div class="line">zabbix-trapper   10051/tcp  <span class="comment">#ZabbixTrapperz</span></div><div class="line">abbix-trapper    10051/udp  <span class="comment">#ZabbixTrapper</span></div></pre></td></tr></table></figure>
<p>修改zabbix配置文件</p>
<p>vim /usr/local/zabbix/etc/zabbix_server.conf</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">DBName=zabbix <span class="comment">#数据库名称</span></div><div class="line">DBUser=zabbix <span class="comment">#数据库用户名</span></div><div class="line">DBPassword=zabbix123.com <span class="comment">#数据库密码</span></div><div class="line">ListenIP=192.168.1.170 <span class="comment">#数据库ip地址</span></div><div class="line">AlertScriptsPath=/usr/<span class="built_in">local</span>/zabbix/share/zabbix/alertscripts   <span class="comment">#zabbix运行脚本存放目录</span></div></pre></td></tr></table></figure>
<p>:wq! #保存退出</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">vi /usr/<span class="built_in">local</span>/zabbix/etc/zabbix_agentd.conf</div><div class="line">Include=/usr/<span class="built_in">local</span>/zabbix/etc/zabbix_agentd.conf.d/</div><div class="line">UnsafeUserParameters=1 <span class="comment">#启用自定义key</span></div><div class="line">:wq! <span class="comment">#保存退出</span></div></pre></td></tr></table></figure>
<p>1.2 COPY相关脚本到新编译的目录下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"> cp /tmp/zabbix-3.0.3/misc/init.d/fedora/core/zabbix_server  /etc/rc.d/init.d/zabbix_server</div><div class="line">[root@salt etc]<span class="comment"># cp /tmp/zabbix-3.0.3/misc/init.d/fedora/core/zabbix_agentd /etc/rc.d/init.d/zabbix_agentd</span></div><div class="line"></div><div class="line"></div><div class="line">修改脚本路径：</div><div class="line"></div><div class="line">vim /etc/init.d/zabbix_server </div><div class="line">  </div><div class="line"> BASEDIR=/usr/<span class="built_in">local</span>/zabbix/</div><div class="line"></div><div class="line">vim /etc/init.d/zabbix_agentd</div><div class="line"></div><div class="line">BASEDIR=/usr/<span class="built_in">local</span>/zabbix  </div><div class="line"></div><div class="line">chmod +x /etc/rc.d/init.d/zabbix_server <span class="comment">#添加脚本执行权限</span></div><div class="line">chmod +x /etc/rc.d/init.d/zabbix_agentd <span class="comment">#添加脚本执行权限</span></div><div class="line">chkconfig zabbix_server on <span class="comment">#添加开机启动</span></div><div class="line">chkconfig zabbix_agentd on <span class="comment">#添加开机启动</span></div></pre></td></tr></table></figure>
<p>八、配置web站点</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> zabbix-2.4.8</div><div class="line">cp -r /zabbix-2.4.8/frontends/php /var/www/html/zabbix</div><div class="line"><span class="built_in">cd</span> /var/www/html/</div><div class="line">chown -R zabbix:zabbix zabbix</div></pre></td></tr></table></figure>
<p>service zabbix_server start #启动zabbix服务端</p>
<p>service zabbix_agentd start #启动zabbix客户端</p>
<p>然后重启服务。</p>
<p>发现出现<code>500</code> 网页无法显示，我去网上Google了下，说我的PHP文件版本过低。</p>
<p>我查看了下我的版本：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">php -version</div><div class="line">PHP <span class="number">5.3</span><span class="number">.3</span> (cli) (<span class="string">built:</span> Feb  <span class="number">9</span> <span class="number">2016</span> <span class="number">10</span>:<span class="number">36</span>:<span class="number">17</span>)</div><div class="line">Copyright (c) <span class="number">1997</span><span class="number">-2010</span> The PHP Group</div><div class="line">Zend Engine v2<span class="number">.3</span><span class="number">.0</span>, Copyright (c) <span class="number">1998</span><span class="number">-2010</span> Zend Technologies</div><div class="line"></div><div class="line">whereis php</div><div class="line"><span class="string">php:</span> <span class="regexp">/usr/</span>bin<span class="regexp">/php /</span>etc<span class="regexp">/php.d /</span>etc<span class="regexp">/php.ini /</span>usr<span class="regexp">/lib64/</span>php <span class="regexp">/usr/</span>share<span class="regexp">/php /</span>usr<span class="regexp">/share/</span>man<span class="regexp">/man1/</span>php<span class="number">.1</span>.gz</div></pre></td></tr></table></figure>
<p>查询了下这是默认安装的，yum安装的。</p>
<p>mv /usr/share/php/ /usr/share/php.5.3.3<br>备份之前的方便回滚，然后升级PHP：</p>
<h3 id="快速将PHP-5-3升级至PHP-5-5"><a href="#快速将PHP-5-3升级至PHP-5-5" class="headerlink" title="快速将PHP 5.3升级至PHP 5.5"></a>快速将PHP 5.3升级至PHP 5.5</h3><p>CentOS 6.7<br>以下为 CentOS 下安装 PHP 方法：</p>
<p>添加 epel 源</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># rpm -Uvh http:<span class="comment">//download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</span></span></div></pre></td></tr></table></figure>
<p>添加 remi 源</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># rpm -Uvh http:<span class="comment">//rpms.famillecollet.com/enterprise/remi-release-6.rpm</span></span></div></pre></td></tr></table></figure>
<p>安装 PHP</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> yum --enablerepo=remi,remi-php55 install php-fpm php-common php-devel php-mysqlnd php-mbstring php-mcrypt</span></div></pre></td></tr></table></figure>
<p>查看 PHP 版本</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">php</span> <span class="selector-tag">-v</span></div><div class="line"><span class="selector-tag">PHP</span> 5<span class="selector-class">.5</span><span class="selector-class">.9</span> (<span class="selector-tag">cli</span>) (<span class="selector-tag">built</span>: <span class="selector-tag">Feb</span> 11 2014 08<span class="selector-pseudo">:25</span><span class="selector-pseudo">:33)</span></div><div class="line"><span class="selector-tag">Copyright</span> (<span class="selector-tag">c</span>) 1997<span class="selector-tag">-2014</span> <span class="selector-tag">The</span> <span class="selector-tag">PHP</span> <span class="selector-tag">Group</span></div><div class="line"><span class="selector-tag">Zend</span> <span class="selector-tag">Engine</span> <span class="selector-tag">v2</span><span class="selector-class">.5</span><span class="selector-class">.0</span>, <span class="selector-tag">Copyright</span> (<span class="selector-tag">c</span>) 1998<span class="selector-tag">-2014</span> <span class="selector-tag">Zend</span> <span class="selector-tag">Technologies</span></div></pre></td></tr></table></figure>
<p>启动 php-fpm</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># service php-fpm start</span></div><div class="line"><span class="attribute">Starting</span> php-fpm:　<span class="meta">　[  OK  ]</span></div></pre></td></tr></table></figure>
<p>这里重启完以后，记得要让php生效，不然的话不行。</p>
<p>我一开始刷新还是出现了500错误，后来用php指针测试了下版本是多少？</p>
<p>www站点添加。info.php </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"></div><div class="line"> phpinfo();</div><div class="line"></div><div class="line"><span class="meta">?&gt;</span>;</div></pre></td></tr></table></figure>
<p>访问地址/info.php  出现版本是5.3 环境问题，重启http就可以了。</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-server3.0.png" alt=""></figure></p>
<p>这里已经搞定咯。</p>
<p> 如果出现图形乱码：可以参考下面的文档。</p>
<p>其实把之前的字体拷贝过去，然后先修改下配置文件即可。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp <span class="regexp">/var/</span>www<span class="regexp">/html/</span>zabbix.<span class="number">2.4</span>.<span class="number">7</span><span class="regexp">/fonts/</span>simkai.ttf <span class="regexp">/var/</span>www<span class="regexp">/html/</span>zabbix<span class="regexp">/fonts/</span>.</div></pre></td></tr></table></figure>
<p>zabbix-server2.4服务端编译安装 <a href="http://blog.yangcvo.me/2015/01/18/zabbix-server服务端编译安装/" target="_blank" rel="external">zabbix-server服务端编译安装</a></p>
<p>zabbix2.4监控80端口状态 : <a href="http://blog.yangcvo.me/2016/07/20/zabbix监控80端口状态/" target="_blank" rel="external">zabbix监控80端口状态</a></p>
<p>zabbix+Grafana安装使用监控结合 ：<a href="http://blog.yangcvo.me/2016/07/13/zabbix-Grafana安装使用结合/" target="_blank" rel="external">zabbix+Grafana安装使用监控结合</a></p>
<p>zabbix监控MySQL-添加自定义监控项 : <a href="http://blog.yangcvo.me/2015/09/29/zabbix监控MySQL-添加自定义监控项/" target="_blank" rel="external">zabbix监控MySQL-添加自定义监控项</a></p>
<p>zabbix的ICMP_Ping模版实现对客户端网络状态的监控 : <a href="http://blog.yangcvo.me/2015/11/18/zabbix的ICMP-Ping模版实现对客户端网络状态的监控/" target="_blank" rel="external">zabbix的ICMP_Ping模版实现对客户端网络状态的监控</a></p>
<p>zabbix性能监控故障总结 <a href="http://blog.yangcvo.me/2016/02/07/zabbix-故障总结/" target="_blank" rel="external">zabbix性能监控故障总结</a></p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/06/18/性能监控/Zabbix/zabbix-server2-4全新升级3-0版本/">zabbix-server2.4全新升级3.0版本</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-06-18</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/monitoring/">monitoring</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Zabbix-monitoring/">Zabbix monitoring</a>
			</span>
		
	</div>

	

	
		<p>zabbix3.0出来了一段时间了，最近忍不住把公司原来的2.4.7版本升级到了3.0。zabbix升级其实很简单，基本步骤为：备份-&gt;重新安装新版本。接下来简单写下这次升级的操作和问题</p>
<h4 id="1、-关闭zabbix-server"><a href="#1、-关闭zabbix-server" class="headerlink" title="1、 关闭zabbix server"></a>1、 关闭zabbix server</h4><p>防止有新的数据提交到数据库中、直接关闭数据库效果也是一样的。这里我先关闭掉我的服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/zabbix_server stop  关闭了server服务端</div><div class="line">/etc/init.d/zabbix_agentd stop   关闭了agent客户端</div></pre></td></tr></table></figure>
<h3 id="2、-备份"><a href="#2、-备份" class="headerlink" title="2、 备份"></a>2、 备份</h3><h4 id="2-1-备份数据库"><a href="#2-1-备份数据库" class="headerlink" title="2.1 备份数据库"></a>2.1 备份数据库</h4><p>最简单的备份：关闭数据，整个数据库目录copy一份。虽说升级一般不会出现什么问题，但是安全起见还是有必要备份一下，就算升级成功，但是不能保证新版本让你喜欢，这个时候回退也有后路。</p>
<p>这里我用的是命令导出的：<br>也可以用NAvicat，导出结构和数据。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">mysqldump -u root -p*****  -h MySQLIP地址 --opt --skip-lock-tables --flush-logs --database zabbix &gt;  /tmp/zabbix.sql</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">mysqldump -uroot -p -P7306 --opt --skip-lock-tables --flush-logs --database zabbix3 --ignore-table=zabbix.history --ignore-table=zabbix.history_log --ignore-table=zabbix.history_str --ignore-table=zabbix.history_text --ignore-table=zabbix.history_uint --ignore-table=zabbix.trends --ignore-table=zabbix.trends_uint  &gt;/root/zabbix20183026.sql</div><div class="line"></div><div class="line"></div><div class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</div><div class="line">Warning: Using unique option prefix database instead of databases is deprecated and will be removed <span class="keyword">in</span> a future release. Please use the full name instead.</div><div class="line">mysqldump: Got error: 1227: Access denied; you need (at least one of) the RELOAD privilege(s) <span class="keyword">for</span> this operation when doing refresh</div><div class="line"></div><div class="line">提示：</div><div class="line"></div><div class="line">Login to mysql as root and enter your <span class="built_in">command</span>:</div><div class="line"></div><div class="line">FLUSH PRIVILEGES;</div></pre></td></tr></table></figure>
<p>注意：zabbix数据库备份可以备份整个/var/lib/zabbix目录下所有数据，但是文件比较大，很占空间。不建议这么做。所以我们这里只备份zabbix的表文件，历史数据和趋势数据的表不备份。</p>
<h4 id="2-2-备份文件"><a href="#2-2-备份文件" class="headerlink" title="2.2 备份文件"></a>2.2 备份文件</h4><p>备份配置文件（通常是/etc/zabbix）、php网站源码、zabbix二进制文件（整个程序目录备份就OK）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">备份配置文件： mv /usr/<span class="built_in">local</span>/zabbix/ /usr/<span class="built_in">local</span>/zabbix.2.4.7</div><div class="line"></div><div class="line">备份启动脚本：</div><div class="line"> mv /etc/init.d/zabbix_server /etc/init.d/zabbix_server.2.4.7</div><div class="line"> mv /etc/init.d/zabbix_agentd /etc/init.d/zabbix_agentd.2.4.7</div><div class="line"></div><div class="line">备份zabbix.php文件：</div><div class="line"></div><div class="line"> mv /var/www/html/zabbix/ /var/www/html/zabbix.2.4.7</div></pre></td></tr></table></figure>
<h2 id="3、安装配置"><a href="#3、安装配置" class="headerlink" title="3、安装配置"></a>3、安装配置</h2><h4 id="3-1-安装Zabbix-server-重新安装新版本"><a href="#3-1-安装Zabbix-server-重新安装新版本" class="headerlink" title="3.1 安装Zabbix server 重新安装新版本"></a>3.1 安装Zabbix server 重新安装新版本</h4><p>重头安装一次zabbix，也就是configure –… make make install.<br>备注：一般高版本zabbix server兼容低版本zabbix客户端。如果发现有异常，那么你的zabbix客户端也相应升级一下。客户端升级比较简单：更新二进制文件，配置文件对照下是否有修改即可。</p>
<p>下载zabbix3.0版本，解压安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">wget http://oak0aohum.bkt.clouddn.com/zabbix-3.0.3.tar.gz  -c /tmp/</div><div class="line"><span class="built_in">cd</span> /tmp/</div><div class="line">tar zxf zabbix-3.0.3.tar.gz</div><div class="line">./configure --prefix=/usr/<span class="built_in">local</span>/zabbix --enable-server --with-mysql --with-net-snmp --with-libxml2 --with-libcurl --with-openipmi --enable-proxy --enable-agent --enable-java --with-ldap</div><div class="line"></div><div class="line">如果编译失败没有libxml2 ldap 需要yum安装下：</div><div class="line">yum install openldap openldap-devel libxml2* -y </div><div class="line"> </div><div class="line">编译成功这里会出现：</div><div class="line">***********************************************************</div><div class="line">*            Now run <span class="string">'make install'</span>                       *</div><div class="line">*                                                         *</div><div class="line">*            Thank you <span class="keyword">for</span> using Zabbix!                  *</div><div class="line">*              &lt;http://www.zabbix.com&gt;                    *</div><div class="line">***********************************************************</div><div class="line"><span class="comment">#直接make install 安装即可：</span></div><div class="line"> </div><div class="line">make install</div></pre></td></tr></table></figure>
<p>这里编译安装 我加上了：–enable-java 这样防止后期监控tomcat需要重新编译。<br>安装好以后：</p>
<p>3.2 检查配置文件<br>zabbix_server.conf配置参数可能会有变化，修改变更后的参数，或者直接修改新的配置文件。</p>
<p>1.1 对照老版本的zabbix_server.conf进行修改，不能直接替换。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">vim /usr/<span class="built_in">local</span>/zabbix/etc/</div><div class="line"></div><div class="line">LogFile=/tmp/zabbix_server.log</div><div class="line">DBHost=rdsm5t6w65741u8q1y53.mysql.rds.aliyuncs.com</div><div class="line">DBName=zabbix</div><div class="line">DBUser=zabbix</div><div class="line">DBPassword=zabbix2015</div><div class="line">StartPollers=12</div><div class="line">JavaGateway=127.0.0.1</div><div class="line">JavaGatewayPort=10052</div><div class="line">StartJavaPollers=5</div><div class="line">Timeout=4</div><div class="line">FpingLocation=/usr/<span class="built_in">local</span>/fping/sbin/fping</div><div class="line">LogSlowQueries=3000</div><div class="line">AlertScriptsPath=/usr/<span class="built_in">local</span>/zabbix/share/zabbix/alertscripts</div></pre></td></tr></table></figure>
<p>1.2 COPY相关脚本到新编译的目录下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> cp /tmp/zabbix-3.0.3/misc/init.d/fedora/core/zabbix_server  /etc/rc.d/init.d/zabbix_server</div><div class="line">[root@salt etc]<span class="comment"># cp /tmp/zabbix-3.0.3/misc/init.d/fedora/core/zabbix_agentd /etc/rc.d/init.d/zabbix_agentd</span></div><div class="line"></div><div class="line">vim /etc/init.d/zabbix_server </div><div class="line"> BASEDIR=/usr/<span class="built_in">local</span>/zabbix/</div><div class="line"> </div><div class="line">vim /etc/init.d/zabbix_agentd</div><div class="line">BASEDIR=/usr/<span class="built_in">local</span>/zabbix</div></pre></td></tr></table></figure>
<p>1.3 alertscripts和externalscripts 里面的相关脚本复制到新的安装目录下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cp /usr/<span class="built_in">local</span>/zabbix.2.4.7/share/zabbix/alertscripts/* /usr/<span class="built_in">local</span>/zabbix/share/zabbix/alertscripts/.</div><div class="line">chown -R zabbix:zabbix /usr/<span class="built_in">local</span>/zabbix/share/zabbix/alertscripts/*</div></pre></td></tr></table></figure>
<p>4、 部署zabbix PHP源码<br>4.1 将新的前端PHP代码也COPY到对应的目录下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /tmp/</div><div class="line">cp -r /zabbix-3.0.3/frontends/php /var/www/html/zabbix</div><div class="line"><span class="built_in">cd</span> /var/www/html/</div><div class="line">chown -R zabbix:zabbix zabbix</div><div class="line"></div><div class="line">cp zabbix.2.4.7/conf/zabbix.conf.php zabbix/conf/zabbix.conf.php</div></pre></td></tr></table></figure>
<p> 拷贝下php文件这样数据就能访问同步过来了。 </p>
<p>然后重启服务。</p>
<p>发现出现<code>500</code> 网页无法显示，我去网上Google了下，说我的PHP文件版本过低。</p>
<p>我查看了下我的版本：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">php -version</div><div class="line">PHP <span class="number">5.3</span><span class="number">.3</span> (cli) (<span class="string">built:</span> Feb  <span class="number">9</span> <span class="number">2016</span> <span class="number">10</span>:<span class="number">36</span>:<span class="number">17</span>)</div><div class="line">Copyright (c) <span class="number">1997</span><span class="number">-2010</span> The PHP Group</div><div class="line">Zend Engine v2<span class="number">.3</span><span class="number">.0</span>, Copyright (c) <span class="number">1998</span><span class="number">-2010</span> Zend Technologies</div><div class="line"></div><div class="line">whereis php</div><div class="line"><span class="string">php:</span> <span class="regexp">/usr/</span>bin<span class="regexp">/php /</span>etc<span class="regexp">/php.d /</span>etc<span class="regexp">/php.ini /</span>usr<span class="regexp">/lib64/</span>php <span class="regexp">/usr/</span>share<span class="regexp">/php /</span>usr<span class="regexp">/share/</span>man<span class="regexp">/man1/</span>php<span class="number">.1</span>.gz</div></pre></td></tr></table></figure>
<p>查询了下这是默认安装的，yum安装的。</p>
<p>mv /usr/share/php/ /usr/share/php.5.3.3<br>备份之前的方便回滚，然后升级PHP：</p>
<h3 id="快速将PHP-5-3升级至PHP-5-5"><a href="#快速将PHP-5-3升级至PHP-5-5" class="headerlink" title="快速将PHP 5.3升级至PHP 5.5"></a>快速将PHP 5.3升级至PHP 5.5</h3><p>CentOS 6.7<br>以下为 CentOS 下安装 PHP 方法：</p>
<p>添加 epel 源</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># rpm -Uvh http:<span class="comment">//download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</span></span></div></pre></td></tr></table></figure>
<p>添加 remi 源</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># rpm -Uvh http:<span class="comment">//rpms.famillecollet.com/enterprise/remi-release-6.rpm</span></span></div></pre></td></tr></table></figure>
<p>安装 PHP</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> yum --enablerepo=remi,remi-php55 install php-fpm php-common php-devel php-mysqlnd php-mbstring php-mcrypt</span></div></pre></td></tr></table></figure>
<p>查看 PHP 版本</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">php</span> <span class="selector-tag">-v</span></div><div class="line"><span class="selector-tag">PHP</span> 5<span class="selector-class">.5</span><span class="selector-class">.9</span> (<span class="selector-tag">cli</span>) (<span class="selector-tag">built</span>: <span class="selector-tag">Feb</span> 11 2014 08<span class="selector-pseudo">:25</span><span class="selector-pseudo">:33)</span></div><div class="line"><span class="selector-tag">Copyright</span> (<span class="selector-tag">c</span>) 1997<span class="selector-tag">-2014</span> <span class="selector-tag">The</span> <span class="selector-tag">PHP</span> <span class="selector-tag">Group</span></div><div class="line"><span class="selector-tag">Zend</span> <span class="selector-tag">Engine</span> <span class="selector-tag">v2</span><span class="selector-class">.5</span><span class="selector-class">.0</span>, <span class="selector-tag">Copyright</span> (<span class="selector-tag">c</span>) 1998<span class="selector-tag">-2014</span> <span class="selector-tag">Zend</span> <span class="selector-tag">Technologies</span></div></pre></td></tr></table></figure>
<p>启动 php-fpm</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># service php-fpm start</span></div><div class="line"><span class="attribute">Starting</span> php-fpm:　<span class="meta">　[  OK  ]</span></div></pre></td></tr></table></figure>
<p>这里重启完以后，记得要让php生效，不然的话不行。</p>
<p>我一开始刷新还是出现了500错误，后来用php指针测试了下版本是多少？</p>
<p>www站点添加。info.php </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"></div><div class="line"> phpinfo();</div><div class="line"></div><div class="line"><span class="meta">?&gt;</span>;</div></pre></td></tr></table></figure>
<p>访问地址/info.php  出现版本是5.3 环境问题，重启http就可以了。</p>
<p>这里已经搞定咯。</p>
<p> 如果出现图形乱码：可以参考下面的文档。</p>
<p>其实把之前的字体拷贝过去，然后先修改下配置文件即可。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp <span class="regexp">/var/</span>www<span class="regexp">/html/</span>zabbix.<span class="number">2.4</span>.<span class="number">7</span><span class="regexp">/fonts/</span>simkai.ttf <span class="regexp">/var/</span>www<span class="regexp">/html/</span>zabbix<span class="regexp">/fonts/</span>.</div></pre></td></tr></table></figure>
<p>3.0版本升级以后其实就是个数据库不变，其他的重新安装一遍即可。 10多分钟就可以搞定的。</p>
<h4 id="升级遇到的问题"><a href="#升级遇到的问题" class="headerlink" title="升级遇到的问题"></a>升级遇到的问题</h4><ol>
<li><code>The frontend does not match Zabbix database. Current database version (mandatory/optional): 2050119/2050119. Required mandatory version: 3000000. Contact your system administrator.</code><br>登录到数据库执行下面的sql,就可以修复这个问题</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt;update dbversion <span class="built_in">set</span> mandatory=3000000;</div></pre></td></tr></table></figure>
<ol>
<li>2 zabbix 内存溢出<br>跑了新版本1天，老是启动不起来zabbix_server ，看日志出现下列问题</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">16701:20140925:191733.530 Starting Zabbix Server. Zabbix 3.0.3 (revision 48953).</div><div class="line">16701:20140925:191733.530 ****** Enabled features ******</div><div class="line">16701:20140925:191733.530 SNMP monitoring: YES</div><div class="line">16701:20140925:191733.530 IPMI monitoring: YES</div><div class="line">16701:20140925:191733.530 WEB monitoring: YES</div><div class="line">16701:20140925:191733.530 VMware monitoring: NO</div><div class="line">16701:20140925:191733.530 Jabber notifications: NO</div><div class="line">16701:20140925:191733.530 Ez Texting notifications: YES</div><div class="line">16701:20140925:191733.530 ODBC: NO</div><div class="line">16701:20140925:191733.530 SSH2 support: NO</div><div class="line">16701:20140925:191733.531 IPv6 support: NO</div><div class="line">16701:20140925:191733.531 ******************************</div><div class="line">16701:20140925:191733.531 using configuration file: /opt/zabbix/etc/zabbix_server.conf</div><div class="line">15996:20140925:191145.759 completed 97% of database upgrade</div><div class="line">15996:20140925:191147.139 completed 98% of database upgrade</div><div class="line">15996:20140925:191147.422 completed 99% of database upgrade</div><div class="line">15996:20140925:191147.428 completed 100% of database upgrade</div><div class="line">15996:20140925:191147.428 database upgrade fully completed</div><div class="line">15996:20140925:191148.800 __mem_malloc: skipped 0 asked 48 skip_min 0 skip_max 4294967295</div><div class="line">15996:20140925:191148.800 [file:dbconfig.c,line:445] zbx_mem_malloc(): out of memory (requested 44 bytes)</div><div class="line">15996:20140925:191148.800 [file:dbconfig.c,line:445] zbx_mem_malloc(): please increase CacheSize configuration parameter</div><div class="line">15996:20140925:191148.800 [file:dbconfig.c,line:445] zbx_mem_malloc(): out of memory (requested 44 bytes)</div><div class="line">15996:20140925:191148.800 [file:dbconfig.c,line:445] zbx_mem_malloc(): please increase CacheSize configuration parameter</div></pre></td></tr></table></figure>
<p>解决<br>打开<code>zabbix_server.conf</code>找到 <code>Option: CacheSize</code><br>把原来的<code># CacheSize=8M</code> 前面的#注释去掉，将8M修改为1024，这个1024根据服务器性能修改。</p>
<h3 id="交流学习："><a href="#交流学习：" class="headerlink" title="交流学习："></a>交流学习：</h3><p>🐧  Linux shell_高级运维派: <code>459096184</code>    圈子 (系统运维-应用运维-自动化运维-虚拟化技术研究欢迎加入)<br>🐧  BigData-Exchange School : <code>521621407</code>  圈子（大数据运维)（Hadoop开发人员)（大数据研究爱好者) 欢迎加入</p>
<p>相应Bidata有内部微信交流群互相学习，加入QQ群有链接。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/06/17/性能监控/Zabbix/zabbix-Grafana安装使用结合/">zabbix+Grafana安装使用监控结合</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-06-17</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/monitoring/">monitoring</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Zabbix-monitoring/">Zabbix monitoring</a>
			</span>
		
	</div>

	

	
		<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>做运维的很重要的基础工作就是监控去准确定位问题，之前用的是Nagios做过监控，也用过cacti，这个之前在IDC做CDN网络方面用的比较多，监控流量好帮手。</p>
<p>为什么选择zabbix其实现在是算开源监控比较火的。更重要是几款监控做了对比。</p>
<p>cacti、zabbix同nagios一样，都是非常优势的开源监控软件。 </p>
<blockquote>
<p>Nagios: 轻量级/方便/快捷是nagios最大的优势，特别是它的插件机制，你可以用自己熟悉的语言实现几乎任何自己想要实现的监控。但nagios的图标图形显示的很丑，这方面的确不敢恭维。<br>Cacti: cacti的优势表现在系统方面的监控，特别针对流量的监控功能， 以及cacti图形显示美观等，cacti在这两方面表现的都不错。<br>Zabbix: zabbix是一个基于WEB界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案。功能全面，很多公司都是基于zabbix自建的监控平台。但维护相对困难，相比没有nagios轻量及灵活。</p>
</blockquote>
<p>现在sass监控，也成为企业监控的选择之一了，加上<code>zabbix、Ganglia</code>等，再加上APM的兴起，监控体系也越来越完善了。从基础网络监控、硬件、服务器、应用、性能，然后端到端等方面，都可以插入，但是没有一个比较完整的监控体系是可以完全胜任的，所以还需要根据自身的应用和目标去综合做选择。</p>
<p>前几天接触到了<code>ELK(logstash, elasticsearch, kibana)</code>这套日志收集展示工具集,的确很方便，这样对以后开发指定权限查看日志，可以很好管理。</p>
<p>这里简单说了下为什么使用zabbix, Ganglia的功能是哪些？下面有讲到。</p>
<h3 id="Grafana是什么？"><a href="#Grafana是什么？" class="headerlink" title="Grafana是什么？"></a>Grafana是什么？</h3><p>个人认为： Grafana是一款对后端数据进行实时展示，跟elk那种差不多，非常清晰而且灵活丰富的图形化选项，可以混合多种风格，支持白天和夜间的模式，多个数据源，而跟zabbix比起来没有那么专业监控，没有那么丰富的监控功能，就是一个图像展示。</p>
<p>功能亮点</p>
<ul>
<li>丰富的图形与Grafana</li>
<li>模板变量可以创建可重用的仪表板</li>
</ul>
<p>官方是怎么解释Grafana的：</p>
<p>grafana是用于可视化大型测量数据的开源程序，他提供了强大和优雅的方式去创建、共享、浏览数据。dashboard中显示了你不同metric数据源中的数据。<br>grafana最常用于因特网基础设施和应用分析，但在其他领域也有机会用到，比如：工业传感器、家庭自动化、过程控制等等。<br>grafana有热插拔控制面板和可扩展的数据源，目前已经支持Graphite、InfluxDB、OpenTSDB、Elasticsearch。</p>
<h3 id="Grafana功能亮点"><a href="#Grafana功能亮点" class="headerlink" title="Grafana功能亮点"></a>Grafana功能亮点</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">丰富的图形</div><div class="line">完全交互的，可编辑的图表。多个Y轴，对数刻度和选项。</div><div class="line"></div><div class="line">混合造型</div><div class="line">画出你的图形，你想怎么。混线，点和酒吧。混合堆叠瓦特/隔离系列。</div><div class="line"></div><div class="line">主题</div><div class="line">附带两个主题。如果你不喜欢默认的黑暗的主题，切换到光的主题。</div><div class="line"></div><div class="line">模板变量</div><div class="line">创建变量会自动填入值从您的数据库。</div><div class="line"></div><div class="line">一般可重复使用</div><div class="line">您可以在度量查询和面板标题中使用变量。</div><div class="line"></div><div class="line">重复面板</div><div class="line">自动重复每个选定的变量值的行或面板。</div><div class="line"></div><div class="line">数据源</div><div class="line">支持Graphite，Elasticsearch，Prometheus，InfluxDB，OpenTSDB和KairosDB开箱。或使用插件功能来添加自己的。</div><div class="line"></div><div class="line">认证</div><div class="line">管理用户，角色和组织。通过LDAP，基本验证与认证代理</div><div class="line"></div><div class="line">注释</div><div class="line">注释与datasouces包括Elasticsearch，石墨和InfluxDB丰富的活动图</div><div class="line"></div><div class="line">快照共享</div><div class="line">创建和共享在<span class="number">1</span>点击一个完全交互式图表和只有你的团队或全世界分享。</div></pre></td></tr></table></figure>
<h3 id="Grafana官网"><a href="#Grafana官网" class="headerlink" title="Grafana官网"></a>Grafana官网</h3><p>Granfana官网：<a href="http://grafana.org" target="_blank" rel="external">http://grafana.org</a></p>
<h3 id="Granfana官网安装参考文档"><a href="#Granfana官网安装参考文档" class="headerlink" title="Granfana官网安装参考文档"></a>Granfana官网安装参考文档</h3><p>安装文档：<a href="http://docs.grafana.org/installation/" target="_blank" rel="external">http://docs.grafana.org/installation/</a></p>
<h3 id="grafana和LDAP集成："><a href="#grafana和LDAP集成：" class="headerlink" title="grafana和LDAP集成："></a>grafana和LDAP集成：</h3><p>LDAP集成：<a href="http://docs.grafana.org/installation/ldap/" target="_blank" rel="external">http://docs.grafana.org/installation/ldap/</a></p>
<h3 id="grafana演示站点"><a href="#grafana演示站点" class="headerlink" title="grafana演示站点"></a>grafana演示站点</h3><p>grafana演示站点: <a href="http://play.grafana.org/" target="_blank" rel="external">http://play.grafana.org/</a></p>
<h3 id="3-0版本关于Grafana-zabbix插件官方文档："><a href="#3-0版本关于Grafana-zabbix插件官方文档：" class="headerlink" title="3.0版本关于Grafana-zabbix插件官方文档："></a>3.0版本关于Grafana-zabbix插件官方文档：</h3><p><a href="http://docs.grafana-zabbix.org/" target="_blank" rel="external">Grafana-zabbix插件安装官方使用文档</a></p>
<h3 id="官网下载地址"><a href="#官网下载地址" class="headerlink" title="官网下载地址"></a>官网下载地址</h3><p>Download Grafana:<a href="https://grafana.com/grafana/download" target="_blank" rel="external">Download Grafana</a></p>
<h3 id="安装Grafana"><a href="#安装Grafana" class="headerlink" title="安装Grafana"></a>安装Grafana</h3><ul>
<li>温馨提示：</li>
</ul>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">grafana的版本和grafana-zabbix的版本必须匹配，否则会出现异常。</div><div class="line">本文以grafana2<span class="number">.5</span>版本为例讲解，如果后面grafana和grafana-zabbix更新，需要将<span class="number">2</span>个版本匹配即可。</div></pre></td></tr></table></figure>
<p>现在最新版本是3.0版本，我们可以试试安装在基于RPM的Linux版本（CentOS，Fedora的，OpenSuse当中，红帽）</p>
<p>安装最新稳定版：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo yum install https://grafanarel.s3.amazonaws.com/builds/grafana-3.1.0-1468321182.x86_64.rpm</div></pre></td></tr></table></figure>
<p>如果被墙，可以到我github上面下载：<a href="https://github.com/yangcvo/Grafana" target="_blank" rel="external">Grafana</a></p>
<p>这里需要安装下依赖包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo yum install initscripts fontconfig</div><div class="line">$ sudo rpm -Uvh grafana-3.1.0-1468321182.x86_64.rpm</div></pre></td></tr></table></figure>
<p>或者选择YUM方式安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">vim etc/yum.repos.d/grafana.repo</div><div class="line"></div><div class="line">[grafana]</div><div class="line">name=grafana</div><div class="line">baseurl=https://packagecloud.io/grafana/stable/el/6/<span class="variable">$basearch</span></div><div class="line">repo_gpgcheck=1</div><div class="line">enabled=1</div><div class="line">gpgcheck=1</div><div class="line">gpgkey=https://packagecloud.io/gpg.key https://grafanarel.s3.amazonaws.com/RPM-GPG-KEY-grafana</div><div class="line">sslverify=1</div><div class="line">sslcacert=/etc/pki/tls/certs/ca-bundle.crt</div></pre></td></tr></table></figure>
<p>还有，如果你想测试版或发布候选测试存储库。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">baseurl=https://packagecloud.io/grafana/testing/el/6/<span class="variable">$basearch</span></div></pre></td></tr></table></figure>
<p>然后通过安装Grafana <code>yum</code>的命令。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> sudo yum install grafana</span></div></pre></td></tr></table></figure>
<p>RPM GPG密钥<br>RPM包进行签名，可以验证这个签名公共GPG密钥。</p>
<h3 id="包装细节"><a href="#包装细节" class="headerlink" title="包装细节"></a>包装细节</h3><ul>
<li>安装二进制文件到 <code>/usr/sbin/grafana-server</code></li>
<li>副本的init.d脚本<code>/etc/init.d/grafana-server</code></li>
<li>默认的安装文件环境，以在<code>/etc/sysconfig/grafana-server</code></li>
<li>拷贝配置文件<code>/etc/grafana/grafana.ini</code></li>
<li>安装systemd服务（如果systemd可用）名称<code>grafana-server.service</code></li>
<li>默认配置使用的日志文件在<code>/var/log/grafana/grafana.log</code></li>
<li>默认配置指定以sqlite3的数据库<code>/var/lib/grafana/grafana.db</code></li>
</ul>
<p>启动服务（的init.d服务）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> sudo service grafana-server start</span></div></pre></td></tr></table></figure>
<p>这将启动grafana服务进程作为grafana用户，这是包安装过程中创建。默认HTTP端口是 3000，和默认的用户和组管理。</p>
<p>要配置服务器Grafana在启动时启动：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo /sbin/chkconfig --<span class="keyword">add</span><span class="bash"> grafana-server</span></div></pre></td></tr></table></figure>
<p>centos 7 系统启动服务：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> systemctl daemon-reload</span></div><div class="line"><span class="meta">$</span><span class="bash"> systemctl start grafana-server</span></div><div class="line"><span class="meta">$</span><span class="bash"> systemctl status grafana-server</span></div></pre></td></tr></table></figure>
<p>centos 7 设置开机启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo systemctl <span class="built_in">enable</span> grafana-server.service</div></pre></td></tr></table></figure>
<h3 id="环境文件"><a href="#环境文件" class="headerlink" title="环境文件"></a>环境文件</h3><p>该systemd服务文件和脚本的init.d都使用位于文件 在<code>/etc/sysconfig/grafana</code>服务启动后端时所使用的环境变量。<br>在这里，您可以覆盖日志目录，数据目录和其他变量。</p>
<h3 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h3><p>默认情况下Grafana将记录到的<code>/var/log/grafana</code></p>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>默认配置指定位于一个sqlite3的数据库 <code>/var/lib/grafana/grafana.db</code>。请备份升级之前，这个数据库。你也可以使用MySQL或者Postgres作为Grafana数据库上详述配置页面。</p>
<h3 id="组态"><a href="#组态" class="headerlink" title="组态"></a>组态</h3><p>该配置文件位于<code>/etc/grafana/grafana.ini</code>.去配置页面上的所有这些选项的详细信息。</p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p><a href="http://docs.grafana.org/installation/configuration/#database" target="_blank" rel="external">http://docs.grafana.org/installation/configuration/#database</a></p>
<p>配置文件里分段给出了非常详细的说明，非常人性化</p>
<p>默认使用的是sqlite3的，这里我调整为自己MySQL的。</p>
<h3 id="1-创建数据库和用户"><a href="#1-创建数据库和用户" class="headerlink" title="1.创建数据库和用户"></a>1.创建数据库和用户</h3><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">mysql&gt; CREATE DATABASE grafana DEFAULT CHARACTER <span class="built_in">SET</span> utf8;</div><div class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.02</span> sec)</div><div class="line"></div><div class="line">mysql&gt; GRANT <span class="literal">ALL</span> <span class="keyword">ON</span> grafana.* <span class="keyword">TO</span> grafana@<span class="string">'192.168.1.%'</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">'haozhuo.com'</span> <span class="keyword">WITH</span> GRANT OPTION;</div><div class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.26</span> sec)</div><div class="line"></div><div class="line">mysql&gt; FLUSH PRIVILEGES;</div><div class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.02</span> sec)</div></pre></td></tr></table></figure>
<h3 id="2-指定数据库及认证信息"><a href="#2-指定数据库及认证信息" class="headerlink" title="2.指定数据库及认证信息"></a>2.指定数据库及认证信息</h3><p>cp /etc/grafana/grafana.ini{,.default}<br>vim /etc/grafana/grafana.ini</p>
<p>配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[database]</div><div class="line"><span class="comment"># Either "mysql", "postgres" or "sqlite3", it's your choice</span></div><div class="line"><span class="built_in">type</span> = mysql</div><div class="line">host = 192.168.1.201:3306</div><div class="line">name = grafana</div><div class="line">user = grafana</div><div class="line">password = haozhuo.com</div><div class="line"></div><div class="line">[session]</div><div class="line"><span class="comment"># Either "memory", "file", "redis", "mysql", "postgres", default is "file"</span></div><div class="line">provider = redis</div><div class="line">provider_config = addr=127.0.0.1:6379,pool_size=100,db=grafana</div><div class="line"> </div><div class="line">cookie_name = grafana_sess</div><div class="line">cookie_secure = <span class="literal">false</span></div><div class="line"> </div><div class="line">session_life_time = 86400</div></pre></td></tr></table></figure>
<h3 id="grafana-ini-配置文件详解"><a href="#grafana-ini-配置文件详解" class="headerlink" title="grafana.ini 配置文件详解"></a>grafana.ini 配置文件详解</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div></pre></td><td class="code"><pre><div class="line">app_mode：应用名称，默认是production</div><div class="line"></div><div class="line">[path]</div><div class="line">data：一个grafana用来存储sqlite3、临时文件、回话的地址路径</div><div class="line">logs：grafana存储logs的路径</div><div class="line"></div><div class="line">[server]</div><div class="line">http_addr：监听的ip地址，，默认是0.0.0.0</div><div class="line">http_port：监听的端口，默认是3000</div><div class="line">protocol：http或者https，，默认是http</div><div class="line">domain：这个设置是root_url的一部分，当你通过浏览器访问grafana时的公开的domian名称，默认是localhost</div><div class="line">enforce_domain：如果主机的header不匹配domian，则跳转到一个正确的domain上，默认是false</div><div class="line"><span class="section">root_url：这是一个web上访问grafana的全路径url，默认是%(protocol)s://%(domain)s:%(http_port)s/</span></div><div class="line">router_logging：是否记录web请求日志，默认是false</div><div class="line">cert_file：如果使用https则需要设置</div><div class="line">cert_key：如果使用https则需要设置</div><div class="line"></div><div class="line">[database]</div><div class="line">grafana默认需要使用数据库存储用户和dashboard信息，默认使用sqlite3来存储，你也可以换成其他数据库</div><div class="line">type：可以是mysql、postgres、sqlite3，默认是sqlite3</div><div class="line">path：只是sqlite3需要，定义sqlite3的存储路径</div><div class="line"><span class="section">host：只是mysql、postgres需要，默认是127.0.0.1:3306</span></div><div class="line">name：grafana的数据库名称，默认是grafana</div><div class="line">user：连接数据库的用户</div><div class="line">password：数据库用户的密码</div><div class="line">ssl_mode：只是postgres使用</div><div class="line"></div><div class="line"></div><div class="line">[security]</div><div class="line">admin_user：grafana默认的admin用户，默认是admin</div><div class="line">admin_password：grafana admin的默认密码，默认是admin</div><div class="line">login_remember_days：多少天内保持登录状态</div><div class="line">secret_key：保持登录状态的签名</div><div class="line">disable_gravatar：</div><div class="line"></div><div class="line"></div><div class="line">[users]</div><div class="line">allow_sign_up：是否允许普通用户登录，如果设置为false，则禁止用户登录，默认是true，则admin可以创建用户，并登录grafana</div><div class="line">allow_org_create：如果设置为false，则禁止用户创建新组织，默认是true</div><div class="line">auto_assign_org：当设置为true的时候，会自动的把新增用户增加到id为1的组织中，当设置为false的时候，新建用户的时候会新增一个组织</div><div class="line">auto_assign_org_role：新建用户附加的规则，默认是Viewer，还可以是Admin、Editor</div><div class="line"></div><div class="line"></div><div class="line">[auth.anonymous]</div><div class="line">enabled：设置为true，则开启允许匿名访问，默认是false</div><div class="line">org_name：为匿名用户设置组织名称</div><div class="line">org_role：为匿名用户设置的访问规则，默认是Viewer</div><div class="line"></div><div class="line"></div><div class="line">[auth.github]</div><div class="line">针对github项目的，很明显，呵呵</div><div class="line">enabled = false</div><div class="line">allow_sign_up = false</div><div class="line">client_id = some_id</div><div class="line">client_secret = some_secret</div><div class="line">scopes = user:email</div><div class="line">auth_url = https://github.com/login/oauth/authorize</div><div class="line">token_url = https://github.com/login/oauth/access_token</div><div class="line">api_url = https://api.github.com/user</div><div class="line">team_ids =</div><div class="line">allowed_domains =</div><div class="line">allowed_organizations =</div><div class="line"></div><div class="line"></div><div class="line">[auth.google]</div><div class="line">针对google app的，呵呵</div><div class="line">enabled = false</div><div class="line">allow_sign_up = false</div><div class="line">client_id = some_client_id</div><div class="line">client_secret = some_client_secret</div><div class="line">scopes = https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email</div><div class="line">auth_url = https://accounts.google.com/o/oauth2/auth</div><div class="line">token_url = https://accounts.google.com/o/oauth2/token</div><div class="line">api_url = https://www.googleapis.com/oauth2/v1/userinfo</div><div class="line">allowed_domains =</div><div class="line"></div><div class="line"></div><div class="line">[auth.basic]</div><div class="line">enabled：当设置为true，则http api开启基本认证</div><div class="line"></div><div class="line"></div><div class="line">[auth.ldap]</div><div class="line">enabled：设置为true则开启LDAP认证，默认是false</div><div class="line">config_file：如果开启LDAP，指定LDAP的配置文件/etc/grafana/ldap.toml</div><div class="line"></div><div class="line"></div><div class="line">[auth.proxy]</div><div class="line">允许你在一个HTTP反向代理上进行认证设置</div><div class="line">enabled：默认是false</div><div class="line">header_name：默认是X-WEBAUTH-USER</div><div class="line">header_property：默认是个名称username</div><div class="line">auto_sign_up：默认是true。开启自动注册，如果用户在grafana DB中不存在</div><div class="line"></div><div class="line">[analytics]</div><div class="line">reporting_enabled：如果设置为true，则会发送匿名使用分析到stats.grafana.org，主要用于跟踪允许实例、版本、dashboard、错误统计。默认是true</div><div class="line">google_analytics_ua_id：使用GA进行分析，填写你的GA ID即可</div><div class="line"></div><div class="line"></div><div class="line">[dashboards.json]</div><div class="line">如果你有一个系统自动产生json格式的dashboard，则可以开启这个特性试试</div><div class="line">enabled：默认是false</div><div class="line">path：一个全路径用来包含你的json dashboard，默认是/var/lib/grafana/dashboards</div><div class="line"></div><div class="line"></div><div class="line">[session]</div><div class="line">provider：默认是file，值还可以是memory、mysql、postgres</div><div class="line"><span class="section">provider_config：这个值的配置由provider的设置来确定，如果provider是file，则是data/xxxx路径类型，如果provider是mysql，则是user:password@tcp(127.0.0.1:3306)/database_name，如果provider是postgres，则是user=a password=b host=localhost port=5432 dbname=c sslmode=disable</span></div><div class="line">cookie_name：grafana的cookie名称</div><div class="line">cookie_secure：如果设置为true，则grafana依赖https，默认是false</div><div class="line">session_life_time：session过期时间，默认是86400秒，24小时</div><div class="line"></div><div class="line"></div><div class="line">以下是官方文档没有，配置文件中有的</div><div class="line">[smtp]</div><div class="line">enabled = false</div><div class="line">host = localhost:25</div><div class="line">user =</div><div class="line">password =</div><div class="line">cert_file =</div><div class="line">key_file =</div><div class="line">skip_verify = false</div><div class="line">from_address = admin@grafana.localhost</div><div class="line"></div><div class="line">[emails]</div><div class="line">welcome_email_on_sign_up = false</div><div class="line">templates_pattern = emails/*.html</div><div class="line"></div><div class="line"></div><div class="line">[log]</div><div class="line">mode：可以是console、file，默认是console、file，也可以设置多个，用逗号隔开</div><div class="line">buffer_len：channel的buffer长度，默认是10000</div><div class="line">level：可以是<span class="string">"Trace"</span>, <span class="string">"Debug"</span>, <span class="string">"Info"</span>, <span class="string">"Warn"</span>, <span class="string">"Error"</span>, <span class="string">"Critical"</span>，默认是info</div><div class="line"></div><div class="line">[log.console]</div><div class="line">level：设置级别</div><div class="line"></div><div class="line">[log.file]</div><div class="line">level：设置级别</div><div class="line">log_rotate：是否开启自动轮转</div><div class="line">max_lines：单个日志文件的最大行数，默认是1000000</div><div class="line">max_lines_shift：单个日志文件的最大大小，默认是28，表示256MB</div><div class="line">daily_rotate：每天是否进行日志轮转，默认是true</div><div class="line">max_days：日志过期时间，默认是7,7天后删除</div></pre></td></tr></table></figure>
<h3 id="3-重启grafana"><a href="#3-重启grafana" class="headerlink" title="3.重启grafana"></a>3.重启grafana</h3><p>service grafana-server restart<br>tail -f /var/log/grafana/grafana.log</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">[root@LAN_zabbix ~]<span class="comment"># tail -f /var/log/grafana/grafana.log</span></div><div class="line">t=2016-07-14T00:49:01+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"Rename table dashboard to dashboard_v1 - v1"</span></div><div class="line">t=2016-07-14T00:49:01+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create dashboard v2"</span></div><div class="line">t=2016-07-14T00:49:02+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create index IDX_dashboard_org_id - v2"</span></div><div class="line">t=2016-07-14T00:49:02+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create index UQE_dashboard_org_id_slug - v2"</span></div><div class="line">t=2016-07-14T00:49:02+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"copy dashboard v1 to v2"</span></div><div class="line">t=2016-07-14T00:49:02+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"drop table dashboard_v1"</span></div><div class="line">t=2016-07-14T00:49:02+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"alter dashboard.data to mediumtext v1"</span></div><div class="line">t=2016-07-14T00:49:02+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"Add column updated_by in dashboard - v2"</span></div><div class="line">t=2016-07-14T00:49:02+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"Add column created_by in dashboard - v2"</span></div><div class="line">t=2016-07-14T00:49:02+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"Add column gnetId in dashboard"</span></div><div class="line">t=2016-07-14T00:49:02+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"Add index for gnetId in dashboard"</span></div><div class="line">t=2016-07-14T00:49:02+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create data_source table"</span></div><div class="line">t=2016-07-14T00:49:02+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"add index data_source.account_id"</span></div><div class="line">t=2016-07-14T00:49:02+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"add unique index data_source.account_id_name"</span></div><div class="line">t=2016-07-14T00:49:03+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"drop index IDX_data_source_account_id - v1"</span></div><div class="line">t=2016-07-14T00:49:03+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"drop index UQE_data_source_account_id_name - v1"</span></div><div class="line">t=2016-07-14T00:49:03+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"Rename table data_source to data_source_v1 - v1"</span></div><div class="line">t=2016-07-14T00:49:03+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create data_source table v2"</span></div><div class="line">t=2016-07-14T00:49:03+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create index IDX_data_source_org_id - v2"</span></div><div class="line">t=2016-07-14T00:49:03+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create index UQE_data_source_org_id_name - v2"</span></div><div class="line">t=2016-07-14T00:49:03+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"copy data_source v1 to v2"</span></div><div class="line">t=2016-07-14T00:49:03+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"Drop old table data_source_v1 #2"</span></div><div class="line">t=2016-07-14T00:49:03+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"Add column with_credentials"</span></div><div class="line">t=2016-07-14T00:49:03+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create api_key table"</span></div><div class="line">t=2016-07-14T00:49:03+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"add index api_key.account_id"</span></div><div class="line">t=2016-07-14T00:49:04+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"add index api_key.key"</span></div><div class="line">t=2016-07-14T00:49:04+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"add index api_key.account_id_name"</span></div><div class="line">t=2016-07-14T00:49:04+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"drop index IDX_api_key_account_id - v1"</span></div><div class="line">t=2016-07-14T00:49:04+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"drop index UQE_api_key_key - v1"</span></div><div class="line">t=2016-07-14T00:49:04+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"drop index UQE_api_key_account_id_name - v1"</span></div><div class="line">t=2016-07-14T00:49:04+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"Rename table api_key to api_key_v1 - v1"</span></div><div class="line">t=2016-07-14T00:49:04+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create api_key table v2"</span></div><div class="line">t=2016-07-14T00:49:04+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create index IDX_api_key_org_id - v2"</span></div><div class="line">t=2016-07-14T00:49:05+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create index UQE_api_key_key - v2"</span></div><div class="line">t=2016-07-14T00:49:05+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create index UQE_api_key_org_id_name - v2"</span></div><div class="line">t=2016-07-14T00:49:05+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"copy api_key v1 to v2"</span></div><div class="line">t=2016-07-14T00:49:05+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"Drop old table api_key_v1"</span></div><div class="line">t=2016-07-14T00:49:06+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create dashboard_snapshot table v4"</span></div><div class="line">t=2016-07-14T00:49:18+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"drop table dashboard_snapshot_v4 #1"</span></div><div class="line">t=2016-07-14T00:49:18+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create dashboard_snapshot table v5 #2"</span></div><div class="line">t=2016-07-14T00:49:18+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create index UQE_dashboard_snapshot_key - v5"</span></div><div class="line">t=2016-07-14T00:49:18+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create index UQE_dashboard_snapshot_delete_key - v5"</span></div><div class="line">t=2016-07-14T00:49:19+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create index IDX_dashboard_snapshot_user_id - v5"</span></div><div class="line">t=2016-07-14T00:49:19+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"alter dashboard_snapshot to mediumtext v2"</span></div><div class="line">t=2016-07-14T00:49:19+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create quota table v1"</span></div><div class="line">t=2016-07-14T00:49:19+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create index UQE_quota_org_id_user_id_target - v1"</span></div><div class="line">t=2016-07-14T00:49:19+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create plugin_setting table"</span></div><div class="line">t=2016-07-14T00:49:19+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create index UQE_plugin_setting_org_id_plugin_id - v1"</span></div><div class="line">t=2016-07-14T00:49:19+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create session table"</span></div><div class="line">t=2016-07-14T00:49:20+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"Drop old table playlist table"</span></div><div class="line">t=2016-07-14T00:49:20+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"Drop old table playlist_item table"</span></div><div class="line">t=2016-07-14T00:49:20+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create playlist table v2"</span></div><div class="line">t=2016-07-14T00:49:20+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create playlist item table v2"</span></div><div class="line">t=2016-07-14T00:49:20+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"drop preferences table v2"</span></div><div class="line">t=2016-07-14T00:49:20+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"drop preferences table v3"</span></div><div class="line">t=2016-07-14T00:49:20+0800 lvl=info msg=<span class="string">"Executing migration"</span> logger=migrator id=<span class="string">"create preferences table v3"</span></div><div class="line">t=2016-07-14T00:49:20+0800 lvl=info msg=<span class="string">"Created default admin user: [admin]"</span></div><div class="line">t=2016-07-14T00:49:20+0800 lvl=info msg=<span class="string">"Starting plugin search"</span> logger=plugins</div><div class="line">t=2016-07-14T00:49:20+0800 lvl=eror msg=<span class="string">"Plugins: Failed to load plugin json file: [/usr/share/grafana/public/app/plugins/datasource/zabbix/plugin.json invalid character '\"' after object key:value pair],  err: %!v(MISSING)"</span></div><div class="line">t=2016-07-14T00:49:20+0800 lvl=info msg=<span class="string">"Server Listening"</span> logger=server address=0.0.0.0:3000 protocol=http subUrl=</div></pre></td></tr></table></figure>
<p>logger=server <code>address=0.0.0.0:3000</code> protocol=http</p>
<h3 id="Dashboard"><a href="#Dashboard" class="headerlink" title="Dashboard"></a>Dashboard</h3><p>web:</p>
<p><a href="http://192.168.1.220:3000" target="_blank" rel="external">http://192.168.1.220:3000</a></p>
<p>默认用户名:admin</p>
<p>默认用户名密码:admin</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-grafana1.png" alt=""></figure></p>
<p>登录后一片空白，所以需要安装相应插件。</p>
<h3 id="grafana-zabbix插件"><a href="#grafana-zabbix插件" class="headerlink" title="grafana-zabbix插件"></a>grafana-zabbix插件</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">https:</span><span class="comment">//github.com/alexanderzobnin/grafana-zabbix</span></div><div class="line"><span class="symbol">http:</span><span class="comment">//play.grafana-zabbix.org/</span></div><div class="line"><span class="symbol">http:</span><span class="comment">//docs.grafana-zabbix.org/installation/</span></div><div class="line"><span class="symbol">http:</span><span class="comment">//docs.grafana-zabbix.org/installation/configuration/</span></div><div class="line"><span class="symbol">https:</span><span class="comment">//grafana.net/plugins/alexanderzobnin-zabbix-app/installation</span></div></pre></td></tr></table></figure>
<p>1.安装插件</p>
<p>官网讲的非常详细参考链接：<a href="http://docs.grafana-zabbix.org/installation/" target="_blank" rel="external">http://docs.grafana-zabbix.org/installation/</a></p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@LAN_zabbix ~]<span class="comment"># grafana-cli plugins install alexanderzobnin-zabbix-app</span></div><div class="line">installing alexanderzobnin-zabbix-app @ <span class="number">3.0</span>.<span class="number">0</span></div><div class="line">from <span class="symbol">url:</span> <span class="symbol">https:</span>/<span class="regexp">/grafana.net/api</span><span class="regexp">/plugins/alexanderzobnin</span>-zabbix-app/versions/<span class="number">3.0</span>.<span class="number">0</span>/download</div><div class="line"><span class="symbol">into:</span> /var/<span class="class"><span class="keyword">lib</span>/<span class="title">grafana</span>/<span class="title">plugins</span></span></div><div class="line"></div><div class="line">✔ Installed alexanderzobnin-zabbix-app successfully</div><div class="line"></div><div class="line">Restart grafana after installing plugins . &lt;service grafana-server restart&gt;</div></pre></td></tr></table></figure>
<p>然后在登陆查看，这里已经安装上zabbix插件了。</p>
<h3 id="三、grafana使用"><a href="#三、grafana使用" class="headerlink" title="三、grafana使用"></a>三、grafana使用</h3><p>grafana的仪表和zabbix的监控差不多，基本是先创建监控模板、监控项，然后再添加仪表。这里先建立数据源，再创建仪表对象，并添加模板，最后添加仪表。</p>
<ul>
<li>可参考：<a href="https://github.com/alexanderzobnin/grafana-zabbix/wiki/Usage" target="_blank" rel="external">https://github.com/alexanderzobnin/grafana-zabbix/wiki/Usage</a></li>
</ul>
<h3 id="组态-1"><a href="#组态-1" class="headerlink" title="组态"></a>组态</h3><p>启用插件</p>
<p>转到Grafana侧面板插件，选择应用程序选项卡，然后选择的zabbix，打开配置 选项卡并启用插件。</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-grafana2.png" alt=""></figure></p>
<p>1.配置zabbix数据源</p>
<p>启用插件后可以添加的zabbix数据源。</p>
<p>要添加新的zabbix数据源公开数据源在侧面板中，单击添加数据源，并选择的zabbix从下拉列表中。</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-grafana3.png" alt=""></figure></p>
<p><a href="http://192.168.1.220/zabbix/api_jsonrpc.php" target="_blank" rel="external">http://192.168.1.220/zabbix/api_jsonrpc.php</a></p>
<p>注意: api_jsonrpc.php是zabbix的API调用接口</p>
<p>HTTP设置</p>
<ul>
<li>网址：设置的zabbix API URL（完整路径api_jsonrpc.php）。</li>
<li>访问：<ul>
<li>代理：通过Grafana后端访问</li>
<li>直接：从浏览器访问。</li>
</ul>
</li>
<li>HTTP认证：配置如果使用代理验证。<ul>
<li>基本认证：</li>
<li>凭据：<br>代理访问意味着Grafana后端将代理从浏览器的所有请求，并送他们到数据源。这是有用的，因为它可以消除CORS（跨产地站点资源）的问题，以及消除需要​​宣传认证细节数据源到浏览器。</li>
</ul>
</li>
</ul>
<p>直接访问仍然支持，因为在某些情况下，可能是有用的直接访问数据源取决于Grafana，用户，和数据源的使用情况和拓扑。</p>
<h3 id="ZABBIX-API细节"><a href="#ZABBIX-API细节" class="headerlink" title="ZABBIX API细节"></a>ZABBIX API细节</h3><ul>
<li>用户和密码：设置登录访问的zabbix API。同时检查用户的权限的zabbix如果你不能得到任何组和主机的Grafana。</li>
<li><p>趋势：启用如果您使用的zabbix 3.x或补丁中的zabbix 2.x的趋势支撑（ZBXNEXT-1193）。此选项严格推荐用于显示时间长周期（超过几天，在不同的zabbix您的项目的更新间隔的），因为项目历史几天包含吨的点。使用趋势将增加Grafana性能。</p>
<ul>
<li>从使用趋势之后的趋势将被使用的时间。默认值是7天（7天）。您可以在Grafana格式的时间。有效时间specificators是：</li>
</ul>
</li>
<li><p>^ h -小时</p>
</li>
<li>ð -天</li>
<li><p>中号 -个月</p>
</li>
<li><p>缓存更新间隔：插件缓存提高性能的一些API请求。将该值设置为所需的缓存生存期（此选项影响类的物品列表数据）。<br>然后单击添加 -数据源将被添加，您可以使用检查连接 测试连接按钮。此功能可以帮助找到一些错误，类似于无效的用户名或密码，错误的API网址。</p>
</li>
</ul>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-grafana4.png" alt=""></figure></p>
<h3 id="导入示例仪表板"><a href="#导入示例仪表板" class="headerlink" title="导入示例仪表板"></a>导入示例仪表板</h3><p>您可以从仪表盘导入示例仪表板选项卡中的插件配置。 </p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-grafana5.png" alt=""></figure></p>
<h3 id="请注意有关的zabbix-2-2或更低"><a href="#请注意有关的zabbix-2-2或更低" class="headerlink" title="请注意有关的zabbix 2.2或更低"></a>请注意有关的zabbix 2.2或更低</h3><p>ZABBIX 2.4之前的zabbix API（api_jsonrpc.php）不允许跨域请求（CORS）。你可以得到HTTP错误412（预处理失败）。要修复它添加此代码的版权后，立即api_jsonrpc.php：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">  标题（“访问控制允许来源：*<span class="string">'）;</span></div><div class="line">  </div><div class="line">标题（“访问控制允许信头：Content-Type的'）;</div><div class="line"></div><div class="line">标题（“访问控制允许的方法：POST<span class="string">'）;</span></div><div class="line"></div><div class="line">标题（“访问控制，最大年龄：1000'）;</div><div class="line"></div><div class="line">如果（<span class="variable">$ </span><span class="number">_</span> SERVER [ <span class="string">'REQUEST_METHOD'</span> ] === <span class="string">'选项'</span>）&#123;</div><div class="line"></div><div class="line">   返回 ;</div><div class="line">   </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>之前</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">require_once dirname( __FILE__ ). <span class="string">'/include/func.inc.php'</span> ;</div><div class="line">require_once dirname( __FILE__ ). <span class="string">'/include/classes/core/CHttpRequest.php'</span> ;</div></pre></td></tr></table></figure>
<p>完全修复上市。欲了解更多详情，请参见ZABBIX发出ZBXNEXT-1377 和ZBX-8459。<br>请注意有关浏览器缓存</p>
<p>更新插件，清除浏览器缓存和重新加载应用程序页面后。详情请参见铬， 火狐。您需要清除缓存而已，没有Cookie，历史记录和其他数据。</p>
<h3 id="升级"><a href="#升级" class="headerlink" title="升级"></a>升级</h3><h4 id="从2-X升级"><a href="#从2-X升级" class="headerlink" title="从2.X升级"></a>从2.X升级</h4><p>后启用的zabbix应用到数据源，打开你的配置的zabbix数据源端选择的zabbix从类型列表中再次。这是必要的，因为插件ID在Grafana 3.0改变。</p>
<p>参考官网配置数据源：<a href="http://docs.grafana-zabbix.org/installation/configuration/" target="_blank" rel="external">http://docs.grafana-zabbix.org/installation/configuration/</a></p>
<p>###入门Grafana-zabbix</p>
<p>你经过安装和配置<code>Grafana-zabbix</code>数据源，让我们创建一个简单的仪表板。</p>
<p>下面是自带的模板，自己新建的模板在我github上面有详细的创建步骤。</p>
<p>入门gafana创建仪表板：<a href="https://github.com/yangcvo/Grafana" target="_blank" rel="external">Grafana-github</a></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-grafana7.png" alt=""></figure></p>
<ul>
<li>可参考：<a href="https://github.com/alexanderzobnin/grafana-zabbix/wiki/Usage" target="_blank" rel="external">https://github.com/alexanderzobnin/grafana-zabbix/wiki/Usage</a></li>
</ul>
<p><figure class="figure"><img src="https://cloud.githubusercontent.com/assets/4932851/8288883/9ec5b240-1921-11e5-9e0f-04d075b885e9.gif" alt=""></figure></p>
<p>zabbix-server2.4服务端编译安装 <a href="http://blog.yangcvo.me/2015/01/18/zabbix-server服务端编译安装/" target="_blank" rel="external">zabbix-server服务端编译安装</a></p>
<p>zabbix2.4监控80端口状态 : <a href="http://blog.yangcvo.me/2016/07/20/zabbix监控80端口状态/" target="_blank" rel="external">zabbix监控80端口状态</a></p>
<p>zabbix+Grafana安装使用监控结合 ：<a href="http://blog.yangcvo.me/2016/07/13/zabbix-Grafana安装使用结合/" target="_blank" rel="external">zabbix+Grafana安装使用监控结合</a></p>
<p>zabbix监控MySQL-添加自定义监控项 : <a href="http://blog.yangcvo.me/2015/09/29/zabbix监控MySQL-添加自定义监控项/" target="_blank" rel="external">zabbix监控MySQL-添加自定义监控项</a></p>
<p>zabbix的ICMP_Ping模版实现对客户端网络状态的监控 : <a href="http://blog.yangcvo.me/2015/11/18/zabbix的ICMP-Ping模版实现对客户端网络状态的监控/" target="_blank" rel="external">zabbix的ICMP_Ping模版实现对客户端网络状态的监控</a></p>
<p>zabbix性能监控故障总结 <a href="http://blog.yangcvo.me/2016/02/07/zabbix-故障总结/" target="_blank" rel="external">zabbix性能监控故障总结</a></p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/06/10/自动化+Jenkins/Ansible/Ansible 安装出现 ImportError: No module named _text/">Ansible安装出现 ImportError/ No module named _text</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-06-10</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Automation/">Automation</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Ansible/">Ansible</a>
			</span>
		
	</div>

	

	
		<h3 id="centos6-7-ansible-yum安装出现问题："><a href="#centos6-7-ansible-yum安装出现问题：" class="headerlink" title="centos6.7 ansible yum安装出现问题："></a>centos6.7 ansible yum安装出现问题：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ansible --version</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"/usr/bin/ansible"</span>, line 46, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    from ansible.module_utils._text import to_text</div><div class="line">ImportError: No module named _text</div></pre></td></tr></table></figure>
<p>提示这个错误，后面查看官网epel包需要更新，这里我已更新发现还是有问题。</p>
<h5 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h5><h5 id="使用pip-install安装过ansible就正常使用"><a href="#使用pip-install安装过ansible就正常使用" class="headerlink" title="使用pip install安装过ansible就正常使用"></a>使用pip install安装过ansible就正常使用</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">[root@ansible_01 ~]<span class="comment"># pip install ansible</span></div><div class="line">Collecting ansible</div><div class="line">  Downloading ansible-1.9.4.tar.gz (937kB)</div><div class="line">    100% |████████████████████████████████| 937kB 100kB/s </div><div class="line">Collecting paramiko (from ansible)</div><div class="line">  Downloading paramiko-1.15.3-py2.py3-none-any.whl (166kB)</div><div class="line">    100% |████████████████████████████████| 167kB 136kB/s </div><div class="line">Collecting jinja2 (from ansible)</div><div class="line">  Downloading Jinja2-2.8-py2.py3-none-any.whl (263kB)</div><div class="line">    100% |████████████████████████████████| 266kB 1.4MB/s </div><div class="line">Collecting PyYAML (from ansible)</div><div class="line">  Downloading PyYAML-3.11.tar.gz (248kB)</div><div class="line">    100% |████████████████████████████████| 249kB 72kB/s </div><div class="line">Requirement already satisfied (use --upgrade to upgrade): setuptools <span class="keyword">in</span> /usr/<span class="built_in">local</span>/python27/lib/python2.7/site-packages/setuptools-18.4-py2.7.egg (from ansible)</div><div class="line">Collecting pycrypto&gt;=2.6 (from ansible)</div><div class="line">  Downloading pycrypto-2.6.1.tar.gz (446kB)</div><div class="line">    100% |████████████████████████████████| 446kB 117kB/s </div><div class="line">Collecting ecdsa&gt;=0.11 (from paramiko-&gt;ansible)</div><div class="line">  Downloading ecdsa-0.13-py2.py3-none-any.whl (86kB)</div><div class="line">    100% |████████████████████████████████| 90kB 141kB/s </div><div class="line">Collecting MarkupSafe (from jinja2-&gt;ansible)</div><div class="line">  Downloading MarkupSafe-0.23.tar.gz</div><div class="line">Installing collected packages: ecdsa, pycrypto, paramiko, MarkupSafe, jinja2, PyYAML, ansible</div><div class="line">  Running setup.py install <span class="keyword">for</span> pycrypto</div><div class="line">  Running setup.py install <span class="keyword">for</span> MarkupSafe</div><div class="line">  Running setup.py install <span class="keyword">for</span> PyYAML</div><div class="line">  Running setup.py install <span class="keyword">for</span> ansible</div><div class="line">Successfully installed MarkupSafe-0.23 PyYAML-3.11 ansible-1.9.4 ecdsa-0.13 jinja2-2.8 paramiko-1.15.3 pycrypto-2.6.1</div></pre></td></tr></table></figure>
<p>如果提示没有<code>No package &#39;libffi&#39; found</code> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install libffi-devel</div></pre></td></tr></table></figure>
<p>如果可以正常显示不需要设置 如果还是有问题设置下依赖：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">[root@ansible_01 ~]<span class="comment"># find / -name ansible</span></div><div class="line">/etc/ansible</div><div class="line">/usr/<span class="built_in">local</span>/bin/ansible</div><div class="line">/usr/<span class="built_in">local</span>/src/ansible</div><div class="line">/usr/<span class="built_in">local</span>/src/ansible/docsite/js/ansible</div><div class="line">/usr/<span class="built_in">local</span>/src/ansible/bin/ansible</div><div class="line">/usr/<span class="built_in">local</span>/src/ansible/packaging/port/sysutils/ansible</div><div class="line">/usr/<span class="built_in">local</span>/src/ansible/packaging/macports/sysutils/ansible</div><div class="line">/usr/<span class="built_in">local</span>/src/ansible/build/scripts-2.6/ansible</div><div class="line">/usr/<span class="built_in">local</span>/src/ansible/build/lib/ansible</div><div class="line">/usr/<span class="built_in">local</span>/src/ansible/lib/ansible</div><div class="line">/usr/<span class="built_in">local</span>/src/ansible/.git/modules/lib/ansible</div><div class="line">/usr/<span class="built_in">local</span>/lib/python2.7/site-packages/ansible</div><div class="line">/usr/lib/python2.6/site-packages/ansible-2.1.0-py2.6.egg/ansible</div><div class="line">/usr/lib/python2.6/site-packages/ansible-2.1.0-py2.6.egg/EGG-INFO/scripts/ansible</div><div class="line">/home/ansible</div></pre></td></tr></table></figure>
<p>然后安装完成正常显示版本信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> ln <span class="_">-s</span> /usr/<span class="built_in">local</span>/bin/ansible /usr/bin/ansible </div><div class="line"> </div><div class="line"> [root@LAN_zabbix pip-9.0.1]<span class="comment"># ansible --version</span></div><div class="line">ansible 2.2.1.0</div><div class="line">  config file =</div><div class="line">  configured module search path = Default w/o overrides</div></pre></td></tr></table></figure>

	

	

</article>




	<article>
	
		<h1><a href="/2016/03/21/shell编程入门到简单/shell入门到简单 学习总结1-12章/">shell入门到简单 学习总结1-12章</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-03-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Shell-programming/">Shell programming</a>
			</span>
		
	</div>

	

	
		<h2 id="TOC"><a href="#TOC" class="headerlink" title="TOC"></a>TOC</h2><p>[TOC]</p>
<h2 id="第一章Shell前言："><a href="#第一章Shell前言：" class="headerlink" title="第一章Shell前言："></a>第一章Shell前言：</h2><p>Shell本身是一种用C语言编写的程序，从用户的角度来看，Shell是用户与Linux操作系统沟通的桥梁。用户既可以输入命令执行，又可以利用 Shell脚本编程，完成更加复杂的操作。在Linux GUI日益完善的今天在运维领域Shell编程仍然起着不可忽视的作用。深入地了解和熟练地掌握Shell编程，是每一个Linux用户的必修。</p>
		<p><a class="article__read-more-link" href="/2016/03/21/shell编程入门到简单/shell入门到简单 学习总结1-12章/">...read more</a></p>
	

	

</article>




	<article>
	
		<h1><a href="/2016/03/15/运维笔记/个人记录💥-走上全栈运维工程师学习笔记/">个人记录💥-走上全栈运维工程师学习笔记</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-03-15</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/运维笔记/">运维笔记</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Operation-and-maintenance-Road/">Operation and maintenance Road</a>
			</span>
		
	</div>

	

	
		<h2 id="个人运维💥学习笔记："><a href="#个人运维💥学习笔记：" class="headerlink" title="个人运维💥学习笔记："></a>个人运维💥学习笔记：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">从2014年初就开始慢慢记录自己所接触和学习到的东西，慢慢的积累，整理出很多学习的好文章，在这里我并且记录下来。</div><div class="line">这是我现在维护的个人笔记库和博客不同，它们大多都不是直接来源于我的原创，而是我一边阅读一边整理加工而成的笔记列表.</div><div class="line">我的目的是将零散的知识点放在一个集中的地方. </div><div class="line"> 第一：方便我自己查看和学习，可以更好的找到我想要的文档。</div><div class="line"> 第二：可以给自己学习结果每年做一个总结。</div><div class="line"> </div><div class="line"> 每3个月都会更新记录。</div></pre></td></tr></table></figure>
<h3 id="交流学习："><a href="#交流学习：" class="headerlink" title="交流学习："></a>交流学习：</h3><p>🐧  Linux shell_高级运维派: <code>459096184</code>    圈子 (系统运维-应用运维-自动化运维-虚拟化技术研究欢迎加入)<br>🐧  BigData-Exchange School : <code>521621407</code>  圈子（大数据运维)（Hadoop开发人员)（大数据研究爱好者) 欢迎加入</p>
<p>相应Bidata有内部微信交流群互相学习，加入QQ群有链接。</p>
<h3 id="Linux-系统"><a href="#Linux-系统" class="headerlink" title="Linux 系统"></a>Linux 系统</h3><p><code>Centos源</code></p>
<ul>
<li><a href="http://distrowatch.com/table.php?distribution=centos" target="_blank" rel="external">centos源码包更新下载地址</a></li>
<li><a href="https://wiki.centos.org/Download" target="_blank" rel="external">centos 镜像下载地址</a></li>
</ul>
<p><code>硬盘分区</code></p>
<ul>
<li><a href="http://www.unix-ninja.com/p/Formatting_Ext4_volumes_beyond_the_16TB_limit" target="_blank" rel="external">格式化的ext4量超过16TB的限制(1)</a></li>
<li><a href="http://blog.ronnyegner-consulting.de/2011/08/18/ext4-and-the-16-tb-limit-now-solved/" target="_blank" rel="external">格式化的ext4量超过16TB的限制(2)</a></li>
</ul>
<p><code>FileZilla</code></p>
<ul>
<li><a href="https://filezilla-project.org/download.php?type=client" target="_blank" rel="external">filezilla下载地址</a></li>
</ul>
<p><code>PXE</code></p>
<ul>
<li><a href="http://jiarh.blog.51cto.com/3467177/1734985" target="_blank" rel="external">pxe 无人值守安装操作系统</a></li>
<li><a href="http://www.zyops.com/autoinstall-kickstart" target="_blank" rel="external">PXE 安装</a></li>
</ul>
<p><code>YUM库</code></p>
<ul>
<li><a href="http://www.zyops.com/autodeploy-yum" target="_blank" rel="external">自动化部署-搭建YUM仓库</a></li>
</ul>
<p><code>rpm</code></p>
<ul>
<li><a href="http://www.zyops.com/autodeploy-rpm" target="_blank" rel="external">定制化RPM包</a></li>
</ul>
<p><code>DNS</code></p>
<ul>
<li><a href="http://www.zyops.com/aliyun-dns-analysis" target="_blank" rel="external">DNS域名解析原理</a></li>
</ul>
<p><code>开源epel</code></p>
<ul>
<li><a href="http://mirrors.ustc.edu.cn/" target="_blank" rel="external">开源epel下载包</a></li>
<li><a href="http://mirrors.sohu.com/" target="_blank" rel="external">开源站点</a></li>
<li><a href="http://ftp.linux.ncsu.edu/pub/epel/6/x86_64/" target="_blank" rel="external">linux_epel</a> </li>
<li><a href="http://rpm.pbone.net/index.php3/stat/3/srodzaj/1/search/epel-release" target="_blank" rel="external">rpm-epel包</a></li>
<li><a href="https://dl.fedoraproject.org/pub/epel/" target="_blank" rel="external">epel rpm软件包</a></li>
</ul>
<p><code>samba</code></p>
<ul>
<li><a href="http://blog.csdn.net/liuaigui/article/details/5077935" target="_blank" rel="external">samba配置方法</a></li>
</ul>
<p><code>iperf</code></p>
<ul>
<li><a href="http://heylinux.com/archives/3825.html" target="_blank" rel="external">使用iperf检测主机间网络带宽</a></li>
</ul>
<h3 id="虚拟化"><a href="#虚拟化" class="headerlink" title="虚拟化"></a>虚拟化</h3><p><code>Docker</code></p>
<ul>
<li><a href="http://www.infoq.com/cn/articles/docker-command-line-quest/" target="_blank" rel="external">Docker 命令学习</a></li>
<li><a href="http://www.tuicool.com/articles/7V7vYn" target="_blank" rel="external">Docker操作使用</a></li>
<li><a href="http://openskill.cn/article/22" target="_blank" rel="external">Docker 入门学习</a></li>
<li><a href="http://yuedu.baidu.com/ebook/d817967416fc700abb68fca1?pn=1&amp;pa=1" target="_blank" rel="external">Docker 入门之战电子书</a></li>
<li><a href="http://blog.csdn.net/birdben/article/details/49873725" target="_blank" rel="external">Docker实战（1)-(15)</a></li>
<li><a href="http://www.cnblogs.com/hslzju/p/5839913.html" target="_blank" rel="external">SSH远程登陆docker容器</a></li>
<li><a href="http://www.cnblogs.com/hslzju/p/5839983.html" target="_blank" rel="external">部署Jenkins+docker集成环境</a></li>
</ul>
<p><code>Esxi</code></p>
<ul>
<li><a href="http://www.josephturley.com/vsphere-5-5-client-download/" target="_blank" rel="external">vsphere客户端下载</a></li>
<li><a href="http://www.josephturley.com/vsphere-web-client-download/" target="_blank" rel="external">vsphere web客户端</a></li>
<li><a href="http://www.josephturley.com/vsphere-5-5-client-download/" target="_blank" rel="external">vsphere web客户端下载</a></li>
<li><a href="http://www.prolved.com/vsphere-client-downloads/" target="_blank" rel="external">vSphere Client下载</a></li>
</ul>
<p><code>KVM</code></p>
<h3 id="容器平台"><a href="#容器平台" class="headerlink" title="容器平台"></a>容器平台</h3><p><code>Docker</code></p>
<blockquote>
<p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。</p>
</blockquote>
<p><code>Rocket</code></p>
<blockquote>
<p>Rocket （也叫 rkt）是 CoreOS 推出的一款容器引擎，和 Docker 类似，帮助开发者打包应用和依赖包到可移植容器中，简化搭环境等部署工作。</p>
</blockquote>
<p><code>Ubuntu（LXC）</code></p>
<blockquote>
<p>LXD 是 ubuntu 基于 LXC 技术的重构，容器天然支持非特权和分布式。LXD 与 Docker 的思路不同，Docker 是 PAAS，LXD 是 IAAS。LXC 项目由一个 Linux 内核补丁和一些 userspace 工具组成。这些 userspace 工具使用由补丁增加的内核新特性，提供一套简化的工具来维护容器。</p>
</blockquote>
<h3 id="微服务平台"><a href="#微服务平台" class="headerlink" title="微服务平台"></a>微服务平台</h3><p><code>OpenShift</code></p>
<blockquote>
<p>OpenShift 是由红帽推出的一款面向开源开发人员开放的平台即服务(PaaS)。 OpenShift通过为开发人员提供在语言、框架和云上的更多的选择，使开发人员可以构建、测试、运行和管理他们的应用。</p>
</blockquote>
<p><code>Cloud Foundry</code></p>
<blockquote>
<p>Cloud Foundry 是VMware于2011年4月12日推出的业界第一个开源PaaS云平台，它支持多种框架、语言、运行时环境、云平台及应用服务，使开发 人员能够在几秒钟内进行应用程序的部署和扩展，无需担心任何基础架构的问题。</p>
</blockquote>
<p><code>Kubernetes</code></p>
<blockquote>
<p>Kubernetes 是来自 Google 云平台的开源容器集群管理系统。基于 Docker 构建一个容器的调度服务。该系统可以自动在一个容器集群中选择一个工作容器供使用。其核心概念是 Container Pod。</p>
</blockquote>
<p><code>Mesosphere</code></p>
<blockquote>
<p>Apache Mesos 是一个集群管理器，提供了有效的、跨分布式应用或框架的资源隔离和共享，可以运行Hadoop、MPI、Hypertable、Spark。</p>
</blockquote>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p><code>MySQL</code></p>
<ul>
<li><a href="http://www.phperz.com/article/15/0801/144981.html" target="_blank" rel="external">mysql 教程</a></li>
<li><a href="http://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="external">MySQL官方软件包下载地址</a></li>
<li><a href="http://www.aiplaypc.com/371.html" target="_blank" rel="external">MySQL主从配置文档</a></li>
<li><a href="http://heylinux.com/archives/1004.html" target="_blank" rel="external">MySQL主从复制(Master-Slave)与读写分离（MySQL-Proxy）实践</a></li>
<li><a href="http://openskill.cn/article/244" target="_blank" rel="external">Mysql架构的演化</a></li>
</ul>
<p><code>mongodb</code></p>
<ul>
<li><a href="http://www.yiibai.com/mongodb/mongodb_quick_guide.html" target="_blank" rel="external">MongoDB快速入门</a></li>
<li><a href="http://www.runoob.com/mongodb/mongodb-tutorial.html" target="_blank" rel="external">MongoDB 教程</a></li>
<li><a href="http://heylinux.com/archives/1950.html" target="_blank" rel="external">安装配置MongoDB</a></li>
<li><a href="https://www.mongodb.com/download-center?jmp=nav#community" target="_blank" rel="external">MongoDB安装包官网地址</a></li>
<li><a href="http://limingnihao.iteye.com/blog/1938262" target="_blank" rel="external">第1章 MongoDB的安装</a></li>
<li><a href="http://limingnihao.iteye.com/blog/1938383" target="_blank" rel="external">第2章 MongoDB的增删改查</a></li>
<li><a href="http://limingnihao.iteye.com/blog/1940438" target="_blank" rel="external">第3章 MongoDB的Java驱动</a></li>
</ul>
<p><code>Robomongo</code></p>
<ul>
<li><a href="https://robomongo.org/" target="_blank" rel="external">官网</a>   MongoDB的一个客户端GUI工具</li>
<li><a href="http://app.robomongo.org/download.html" target="_blank" rel="external">下载地址</a></li>
</ul>
<h3 id="云☁️服务"><a href="#云☁️服务" class="headerlink" title="云☁️服务"></a>云☁️服务</h3><p><code>CDN</code></p>
<ul>
<li><a href="http://www.cedexis.com/reports/#?report=cdn_response_time&amp;country=CN&amp;date=2015-09-29" target="_blank" rel="external">CDN测试排行</a></li>
<li><a href="http://www.infoq.com/cn/articles/find-the-same-in-the-variable-from-CDN-to-cloud-computing/" target="_blank" rel="external">CDN变化</a></li>
<li><p><a href="http://www.17ce.com/" target="_blank" rel="external">网站测速</a></p>
<p><code>OpenStack</code></p>
</li>
</ul>
<ul>
<li><a href="https://www.ibm.com/developerworks/community/blogs/132cfa78-44b0-4376-85d0-d3096cd30d3f/entry/%E5%86%99%E5%9C%A8%E6%9C%80%E5%89%8D%E9%9D%A2_%E6%AF%8F%E5%A4%A95%E5%88%86%E9%92%9F%E7%8E%A9%E8%BD%AC_OpenStack_1?lang=en" target="_blank" rel="external">每天5分钟玩转 OpenStack</a></li>
<li><a href="https://docs.openstack.org/ocata/install-guide-rdo/" target="_blank" rel="external">Red Hat Enterprise Linux和CentOS的OpenStack安装指南</a>  </li>
<li><a href="http://xmodulo.com/manage-vms-openstack-command-line-tools.html" target="_blank" rel="external">如何使用OpenStack命令行工具管理虚拟机</a></li>
</ul>
<h3 id="大数据运维"><a href="#大数据运维" class="headerlink" title="大数据运维"></a>大数据运维</h3><p><code>HBase 集群安装部署</code> <a href="http://wuchong.me/blog/2015/04/05/hbase-cluster-deploy/" target="_blank" rel="external">HBase 集群安装部署</a></p>
<h3 id="编程script"><a href="#编程script" class="headerlink" title="编程script"></a>编程script</h3><p><code>shell</code></p>
<ul>
<li><a href="http://c.biancheng.net/cpp/shell/" target="_blank" rel="external">shell学习网站</a></li>
<li><a href="http://man.linuxde.net/" target="_blank" rel="external">Linux命令大全</a></li>
</ul>
<p><code>Python</code></p>
<ul>
<li><a href="http://edu.51cto.com/lesson/id-48608.html?edu_recommend_adid=174?edu_recommend_adid=174" target="_blank" rel="external">python 学习视频</a></li>
<li><a href="http://www.pythondoc.com/pythontutorial3/index.html" target="_blank" rel="external">Python 入门指南</a></li>
<li><a href="http://www.jobui.com/mianshiti/it/python/" target="_blank" rel="external">Python面试题</a></li>
<li><a href="http://www.pythondoc.com/" target="_blank" rel="external">python中文大本营</a></li>
<li><p><a href="https://bitbucket.org/rootart/bandersnatch/src/069c46166d9ed8cc236daa7eac39c2bb2f224644/src/bandersnatch/?at=default" target="_blank" rel="external">bandersnatch</a></p>
<p><code>pip</code></p>
</li>
<li><p><a href="http://rfyiamcool.blog.51cto.com/1030776/1290456?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">构建快速部署的python pip环境及pypi本地源环境</a></p>
</li>
<li><a href="http://blog.csdn.net/tantexian/article/details/37724633" target="_blank" rel="external">CentOS 6.5 PYPI本地源制作</a></li>
</ul>
<h3 id="Web服务"><a href="#Web服务" class="headerlink" title="Web服务"></a>Web服务</h3><p><code>NGINX</code></p>
<ul>
<li><a href="http://www.phperz.com/article/15/0903/153754.html" target="_blank" rel="external">nginx 教程</a></li>
<li><a href="http://www.bysocket.com/?p=282" target="_blank" rel="external">图解http协议</a></li>
<li><a href="http://www.nginx.cn/591.html" target="_blank" rel="external">nginx 配置入门</a></li>
<li><a href="https://segmentfault.com/a/1190000002990165" target="_blank" rel="external">nginx 入门2</a></li>
<li><a href="http://blog.jobbole.com/89287/" target="_blank" rel="external">nginx 优化</a></li>
<li><a href="https://blog.martinfjordvald.com/2011/04/optimizing-nginx-for-high-traffic-loads/" target="_blank" rel="external">nginx  优化2</a></li>
<li><a href="https://www.nginx.com/resources/wiki/start/topics/examples/redhatnginxinit/" target="_blank" rel="external">nginx yum安装 脚本下载地址</a></li>
</ul>
<p><code>tomcat</code></p>
<ul>
<li><a href="http://www.zyops.com/java-tomcat" target="_blank" rel="external">JAVA企业级应用TOMCAT实战</a></li>
<li><a href="http://www.zyops.com/java-tomcat" target="_blank" rel="external">tomcat 集群</a></li>
<li><a href="http://www.zyops.com/java-tomcat" target="_blank" rel="external">tomcat 监控</a></li>
<li><a href="http://www.zyops.com/java-tomcat" target="_blank" rel="external">jvm 调优</a></li>
</ul>
<p><code>负载均衡</code></p>
<p><a href="https://www.shiyanlou.com/courses/652" target="_blank" rel="external">LVS 集群负载均衡实战</a></p>
<h3 id="开源的分布式版本控制系统"><a href="#开源的分布式版本控制系统" class="headerlink" title="开源的分布式版本控制系统"></a>开源的分布式版本控制系统</h3><p><code>Git</code></p>
<ul>
<li><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="external">git教程</a></li>
</ul>
<p><code>Gitlab</code></p>
<ul>
<li><a href="https://www.gitlab.cc/downloads/#centos6" target="_blank" rel="external">gitlab官网</a></li>
</ul>
<h3 id="mail"><a href="#mail" class="headerlink" title="mail"></a>mail</h3><p><code>zimbra</code></p>
<ul>
<li><a href="http://aba.qzu.cn/archives/251.html" target="_blank" rel="external">Centos6.2下安装zimbra 7.2</a></li>
<li><a href="http://www.csdn.net/tag/zimbra" target="_blank" rel="external">zimbra</a></li>
</ul>
<h3 id="自动化运维"><a href="#自动化运维" class="headerlink" title="自动化运维"></a>自动化运维</h3><p><code>ansible</code></p>
<blockquote>
<p>Ansible 提供一种最简单的方式用于发布、管理和编排计算机系统的工具，你可在数分钟内搞定。Ansible 是一个模型驱动的配置管理器，支持多节点发布、远程任务执行。默认使用 SSH 进行远程连接。无需在被管理节点上安装附加软件，可使用各种编程语言进行扩展。</p>
<ul>
<li><a href="http://www.aikaiyuan.com/6299.html" target="_blank" rel="external">ansible指南</a></li>
</ul>
</blockquote>
<p><code>saltstack</code></p>
<blockquote>
<p>Saltstack 可以看做是func的增强版+Puppet的弱化版。使用Python编写。非常好用,快速可以基于EPEL部署。Salt 是一个开源的工具用来管理你的基础架构，可轻松管理成千上万台服务器。</p>
</blockquote>
<ul>
<li><a href="https://blog.cunss.com/?p=255" target="_blank" rel="external">saltstack指南</a></li>
<li><a href="https://docs.saltstack.com/en/getstarted/fundamentals/remotex.html" target="_blank" rel="external">salt官网入门基础</a></li>
<li><a href="http://setjs.com/?p=226" target="_blank" rel="external">salt使用总结</a></li>
<li><a href="http://www.saltstack.cn/kb/managing-firewall-with-salt/#managing-firewall-with-salt" target="_blank" rel="external">基于Salt管理iptables防火墙规则</a></li>
</ul>
<p><code>Django</code></p>
<ul>
<li><a href="http://www.ziqiangxuetang.com/django/django-intro.html" target="_blank" rel="external">基础教程</a></li>
</ul>
<h3 id="APP持续集成部署平台"><a href="#APP持续集成部署平台" class="headerlink" title="APP持续集成部署平台"></a>APP持续集成部署平台</h3><p><code>Jenkins</code></p>
<ul>
<li><a href="https://my.oschina.net/u/1242185/blog/323241?fromerr=YKc8u9du" target="_blank" rel="external">enkins安装配置</a></li>
<li><a href="https://hengyunabc.github.io/deploy-system-build-with-jenkins-ansible-supervisor/?spm=5176.blog6068.yqblogcon1.3.A6PSop" target="_blank" rel="external">jenkins 发布系统</a></li>
<li><a href="http://pkg.jenkins-ci.org/redhat/" target="_blank" rel="external">jenkins rpm 软件包</a></li>
<li><a href="https://www.jqlinux.com/archives/662" target="_blank" rel="external">jenkins简单使用</a></li>
<li><a href="http://www.cnblogs.com/mouseIT/p/5024718.html" target="_blank" rel="external">Jenkins将项目发送到tomcat</a></li>
<li><a href="https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+on+Red+Hat+distributions" target="_blank" rel="external">centos7安装文档</a></li>
<li><a href="https://segmentfault.com/a/1190000004639325" target="_blank" rel="external">CentOS 安装 Jenkins</a></li>
</ul>
<h3 id="日志分析平台"><a href="#日志分析平台" class="headerlink" title="日志分析平台"></a>日志分析平台</h3><p><code>ELK</code> </p>
<p> <code>Logstash</code></p>
<blockquote>
<p>Logstash 是一个应用程序日志、事件的传输、处理、管理和搜索的平台。你可以用它来统一对应用程序日志进行收集管理，提供 Web 接口用于查询和统计。</p>
</blockquote>
<ul>
<li><a href="https://wsgzao.github.io/post/elk/" target="_blank" rel="external">ELK 搭建日志分析平台</a></li>
<li><a href="http://kibana.logstash.es/content/logstash/get_start/index.html" target="_blank" rel="external">ELK 中文执指南</a></li>
<li><a href="http://www.ttlsa.com/elk/elk-kibana-install-and-plugin-management/" target="_blank" rel="external">elk 插件管理</a></li>
<li><a href="http://www.sojson.com/blog/85" target="_blank" rel="external">elk 插件使用</a></li>
<li><a href="https://github.com/yangcvo/ELK_config" target="_blank" rel="external">elk 脚本</a></li>
</ul>
<p><code>Graylog</code></p>
<ul>
<li><a href="http://blog.topspeedsnail.com/archives/4066" target="_blank" rel="external">CentOS 7安装配置Graylog</a></li>
<li><a href="https://my.oschina.net/fitnessefan/blog/464351?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">Graylog——日志聚合工具中的后起之秀</a></li>
<li><a href="http://docs.graylog.org/en/1.3/pages/extractors.html" target="_blank" rel="external">Graylog 入门到精通文档</a></li>
</ul>
<h3 id="开源监控，警告-amp-分析"><a href="#开源监控，警告-amp-分析" class="headerlink" title="开源监控，警告&amp;分析"></a>开源监控，警告&amp;分析</h3><p><code>zabbix</code></p>
<ul>
<li><a href="http://www.zabbix.net.cn/viewforum.php?f=13&amp;sid=2c1c952dbc2384612a1e22de916601b9" target="_blank" rel="external">zabbix学习论坛</a></li>
<li><a href="http://www.ttlsa.com/zabbix/follow-ttlsa-to-study-zabbix/" target="_blank" rel="external">zabbix入门</a></li>
<li><a href="http://dl528888.blog.51cto.com/2382721/1428561" target="_blank" rel="external">zabbix优化web事件打开速度</a></li>
<li><a href="http://canghai.coding.io/2015/07/29/monitoring-mysql-with-zabbix/" target="_blank" rel="external">zabbix监控MySQL</a></li>
<li><a href="https://share.zabbix.com/official-templates" target="_blank" rel="external">zabbix官方模块</a></li>
<li><a href="http://docs.grafana.org/v2.0/installation/" target="_blank" rel="external">grafana 二次开源安装</a></li>
<li><a href="https://github.com/alexanderzobnin/grafana-zabbix" target="_blank" rel="external">grafana-zabbix插件-官方网站</a></li>
<li><a href="http://play.grafana.org/" target="_blank" rel="external">grafana演示站点</a></li>
<li><a href="http://www.iyunv.com/thread-25966-1-1.html" target="_blank" rel="external">zabbix监控软件的使用排错</a></li>
<li><a href="http://www.zabbix.com/download.php" target="_blank" rel="external">zabbix软件包下载地址</a></li>
<li><a href="https://www.zabbix.com/documentation/3.0/manual/introduction/whatsnew300" target="_blank" rel="external">什么3.0.0的zabbix的新功能</a></li>
<li><a href="https://github.com/bushvin/zabbix-kvm-res" target="_blank" rel="external">通过ZABBIX KVM监控</a></li>
<li>个人github上面有整理比较详细的监控文档</li>
<li><a href="https://blog.cactifans.com/2015/07/24/monitoring-tomcat-with-zabbix/" target="_blank" rel="external">1. zabbix通过jmx监控tomcat</a></li>
<li><a href="http://www.cnblogs.com/Eivll0m/p/5446311.html" target="_blank" rel="external">2. zabbix通过jmx监控tomcat</a></li>
<li><a href="https://share.zabbix.com" target="_blank" rel="external">zabbix官网模板</a></li>
</ul>
<p><code>zabbix开源监控区别</code></p>
<ul>
<li><a href="http://www.sysopen.cn/20150524/" target="_blank" rel="external">Nagios、cacti、zabbix的对比？</a></li>
</ul>
<p><code>Nagios</code></p>
<blockquote>
<p>Nagios 是一个监视系统运行状态和网络信息的监视系统。Nagios能监视所指定的本地或远程主机以及服务，同时提供异常通知功能等。</p>
</blockquote>
<p><code>Ganglia</code></p>
<blockquote>
<p>Ganglia 是一个跨平台可扩展的，高 性能计算系统下的分布式监控系统，如集群和网格。它是基于分层设计，它使用广泛的技术，如XML数据代表，便携数据传输，RRDtool用于数据存储和可视化。</p>
</blockquote>
<p><code>Graphite</code></p>
<blockquote>
<p>Graphite 是一个用于采集网站实时信息并进行统计的开源项目，可用于采集多种网站服务运行状态信息。Graphite服务平均每分钟有4800次更新操作。</p>
</blockquote>
<p><code>Kibana</code></p>
<blockquote>
<p>Kibana 是一个为 Logstash 和 ElasticSearch 提供的日志分析的 Web 接口。可使用它对日志进行高效的搜索、可视化、分析等各种操作。</p>
</blockquote>
<h3 id="团队技术平台和项目管理平台-amp-测试平台"><a href="#团队技术平台和项目管理平台-amp-测试平台" class="headerlink" title="团队技术平台和项目管理平台&amp;测试平台"></a>团队技术平台和项目管理平台&amp;测试平台</h3><p><code>confluence团队项目协作平台</code></p>
<ul>
<li><a href="https://www.teambition.com" target="_blank" rel="external">teambition</a></li>
<li><a href="https://www.atlassian.com/software/confluence/" target="_blank" rel="external">confluence</a></li>
</ul>
<p><code>teambition 公司技术团队工作记录跟踪迭代平台</code></p>
<ul>
<li><a href="https://www.teambition.com" target="_blank" rel="external">teambition</a></li>
</ul>
<p><code>jira-敏捷项目管理工具</code></p>
<ul>
<li><a href="https://my.atlassian.com/products/index" target="_blank" rel="external">jira-敏捷项目管理工具</a></li>
</ul>
<p><code>创业公司禅道项目管理系统</code></p>
<ul>
<li><a href="http://www.zentao.net/download/79930.html" target="_blank" rel="external">禅道项目管理软件</a></li>
</ul>
<p><code>APP推广统计数据分析</code></p>
<ul>
<li><a href="www.talkingdata.com">talkingdata</a></li>
</ul>
<p><code>RAP是一个可视化接口管理工具 通过分析接口结构</code></p>
<ul>
<li><a href="http://rap.taobao.org/org/index.do" target="_blank" rel="external">RAP 接口管理工具</a></li>
</ul>
<h3 id="统一的账号管理认证平台"><a href="#统一的账号管理认证平台" class="headerlink" title="统一的账号管理认证平台"></a>统一的账号管理认证平台</h3><p><code>openLDAP</code></p>
<ul>
<li><a href="http://blog.csdn.net/hitabc141592/article/details/22931179" target="_blank" rel="external">openldap 部署1</a></li>
<li><a href="http://jianshi-dlw.iteye.com/blog/1557846" target="_blank" rel="external">openldap 部署2</a></li>
<li><a href="https://www.howtoforge.com/setting-up-an-openvpn-server-with-authentication-against-openldap-on-ubuntu-10.04-lts#-install-openvpn" target="_blank" rel="external">LDAP 认证</a></li>
<li><a href="http://wiki.yepn.net/lam" target="_blank" rel="external">Samba+LDAP+LAM管理工具应用</a></li>
<li><p><a href="http://blog.blackroom.cn/blog/2013/04/05/samba-web-modify-password/" target="_blank" rel="external">让Samba用户通过WEB页面修改密码</a></p>
<p><code>OpenLDAP + ProFTPD</code></p>
</li>
<li><p><a href="http://www.pudgecon.com/blog/2013/08/23/install-openldap-and-proftpd-on-ubuntu-12-dot-04/" target="_blank" rel="external">Install OpenLDAP and ProFTPD on Ubuntu 12.04</a></p>
</li>
</ul>
<h3 id="公司VPN"><a href="#公司VPN" class="headerlink" title="公司VPN"></a>公司VPN</h3><p><code>OpenVPN Server</code></p>
<ul>
<li><a href="http://heylinux.com/archives/3499.html" target="_blank" rel="external">CentOS 6上部署OpenVPN Server</a></li>
<li><a href="https://docs.ucloud.cn/software/vpn/OpenVPN4CentOS.html" target="_blank" rel="external">OpenVPN for CentOS</a></li>
<li><a href="https://www.unixmen.com/setup-openvpn-server-client-centos-6-5/" target="_blank" rel="external">centos 安装部署openvpn </a></li>
<li><p><a href="https://www.digitalocean.com/community/tutorials/how-to-setup-and-configure-an-openvpn-server-on-centos-6" target="_blank" rel="external">部署参考</a></p>
<ul>
<li>openVPN <a href="https://www.tunnelblick.net/" target="_blank" rel="external">Tunnelblick工具下载</a></li>
</ul>
</li>
</ul>
<h3 id="翻墙"><a href="#翻墙" class="headerlink" title="翻墙"></a>翻墙</h3><p><code>ssh隧道翻墙</code></p>
<ul>
<li><a href="http://www.cenhq.com/2015/12/18/ssh-tunnel-over-the-wall/" target="_blank" rel="external">ssh隧道翻墙</a></li>
</ul>
<h3 id="node-js-后台"><a href="#node-js-后台" class="headerlink" title="node.js 后台"></a>node.js 后台</h3><ul>
<li><a href="http://blog.csdn.net/nsrainbow/article/details/33740915" target="_blank" rel="external">如何卸载node.js</a> </li>
</ul>
<h3 id="海外代理服务器平台"><a href="#海外代理服务器平台" class="headerlink" title="海外代理服务器平台"></a>海外代理服务器平台</h3><p><code>服务器供应商</code></p>
<ul>
<li><a href="http://www.capitalonline.net/zh-cn/" target="_blank" rel="external">服务器</a></li>
</ul>
<h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p><code>windows 防火墙</code></p>
<ul>
<li><a href="http://heylinux.com/archives/category/windows" target="_blank" rel="external">Windows Server 2008上的防火墙配置脚本</a></li>
</ul>
<p><code>Windows系统中文换英文</code></p>
<ul>
<li><a href="http://heylinux.com/archives/1667.html" target="_blank" rel="external">Windows 7中文旗舰版与英文版自由切换</a></li>
</ul>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><ul>
<li><a href="http://openstf.io/" target="_blank" rel="external">openstf</a></li>
<li><a href="http://www.open-open.com/lib/view/open1437967814581.html" target="_blank" rel="external">stf环境搭建</a></li>
<li><a href="https://www.sdk.cn/news/2794" target="_blank" rel="external">macaca 自动化测试</a></li>
<li><a href="https://xudafeng.github.io/slide/archives/macaca/#/" target="_blank" rel="external">移动时代的自动化</a></li>
</ul>
<h3 id="war包仓库"><a href="#war包仓库" class="headerlink" title="war包仓库"></a>war包仓库</h3><p><code>Maven私服nexus</code></p>
<ul>
<li><a href="http://www.cnblogs.com/dingyingsi/p/3776557.html" target="_blank" rel="external">Centos 基础开发环境搭建之Maven私服nexus</a></li>
</ul>
<h3 id="wkhtmltox-HTML效果转PDF格式"><a href="#wkhtmltox-HTML效果转PDF格式" class="headerlink" title="wkhtmltox-HTML效果转PDF格式"></a>wkhtmltox-HTML效果转PDF格式</h3><ul>
<li>参考我博客的wkhtmltox</li>
</ul>
<h3 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h3><p><code>Ghost</code></p>
<ul>
<li><a href="http://support.ghost.org/how-to-upgrade/" target="_blank" rel="external">官方-Ghost升级方法</a></li>
<li><a href="https://wiki.bitnami.com/Applications/BitNami_Ghost" target="_blank" rel="external">一键安装Ghost博客</a></li>
<li><a href="https://bitnami.com/stack/ghost/installer#linux" target="_blank" rel="external">bitnami 下载一键安装Ghost脚本包</a></li>
<li><a href="https://segmentfault.com/a/1190000002397419" target="_blank" rel="external">vps 安装 Ghost 博客系统记录</a></li>
<li><a href="http://www.open-open.com/news/view/144e24e" target="_blank" rel="external">15个免费的Ghost博客主题</a></li>
<li><a href="https://github.com/yangcvo/Ghost" target="_blank" rel="external">我自己整理的Ghost 20种博客主题</a></li>
<li><a href="http://www.ghostchina.com/" target="_blank" rel="external">Ghost中文官方版</a></li>
<li><a href="https://github.com/yangcvo/Ghost" target="_blank" rel="external">Ghost英文文档安装</a></li>
<li><a href="https://github.com/yangcvo/Ghost" target="_blank" rel="external">Ghost博客安装，使用，更新一条龙教程 - 中文版</a><br>在我github上面都有的，我安装的是7.0的。</li>
<li><a href="https://github.com/yangcvo/Ghost" target="_blank" rel="external">Ghost修改端口方法文档</a></li>
<li>Ghost20种主题主题包下载：<a href="https://github.com/yangcvo/Ghost/tree/master/Ghost-theme" target="_blank" rel="external">Ghost20种主题包</a></li>
<li><a href="https://www.bokeyy.com/post/ghost-install-in-vps-solution-in-china.html" target="_blank" rel="external">Ghost 博客安装中文全攻略</a></li>
<li><a href="http://docs.ghost.org/zh/themes/" target="_blank" rel="external">Ghost主题变更</a></li>
</ul>
<p><code>Wordpress</code></p>
<ul>
<li><a href="https://wordpress.org/showcase/" target="_blank" rel="external">官网</a></li>
<li><a href="https://cn.wordpress.org/" target="_blank" rel="external">中文官网WordPress</a> 访问有点慢。</li>
<li><a href="http://www.wpdaxue.com/tutorials/page/2" target="_blank" rel="external">非常有益的我是参考了建站网站有很详细说Wordpass</a></li>
<li><a href="http://www.wpdaxue.com/tutorials/page/2" target="_blank" rel="external">wordpass大学</a></li>
<li><a href="https://zh-cn.forums.wordpress.org/forum/plugins" target="_blank" rel="external">Wordpress下载插件-中文网站</a><br>非常好的一位博主很详细讲了WordPress的安装过程和主题更换，插件使用等等WordPress先生</li>
<li><a href="http://www.wpsir.cn/archives/tag/wordpress%E5%AE%89%E8%A3%85" target="_blank" rel="external">WordPress</a></li>
<li><a href="http://www.wpsir.cn/archives/768" target="_blank" rel="external">如何搭建WordPress博客?</a></li>
<li><a href="https://bbs.aliyun.com/read/259101.html?spm=5176.7189909.5.41.yW4V0H" target="_blank" rel="external">阿里云视频-如何在ECS上快递搭建一个WordPress站点</a></li>
<li><a href="http://www.wpdaxue.com/install-wordpress-theme-and-plugin.html" target="_blank" rel="external">WordPress入门 之 安装主题和插件</a></li>
</ul>
<p><code>hexo</code></p>
<p>这个是我现在的博客用的效果。</p>
<h3 id="网上书店-非常不错"><a href="#网上书店-非常不错" class="headerlink" title="网上书店-非常不错"></a>网上书店-非常不错</h3><ul>
<li><a href="https://www.packtpub.com/all" target="_blank" rel="external">packt</a></li>
</ul>
<h3 id="已学习视频"><a href="#已学习视频" class="headerlink" title="已学习视频"></a>已学习视频</h3><p><code>Linux</code></p>
<ul>
<li><a href="http://edu.51cto.com/course/course_id-549.html" target="_blank" rel="external">从0开始一步步实战深入学习Linux运维视频课程(三)</a>  2014-03-28 看完 –现在这需要付费，我当初看的时候免费的，给你们个链接 越过去：<a href="http://edu.51cto.com/lesson/id-11907.html" target="_blank" rel="external">http://edu.51cto.com/lesson/id-11907.html</a></li>
</ul>
<p><code>MySQL</code></p>
<ul>
<li><p><a href="https://ke.qq.com/course/134105" target="_blank" rel="external">企业Mysql实战系列入门篇</a> 2014年3月5日看完</p>
</li>
<li><p><a href="http://down.51cto.com/zt/535#0-sqq-1-75870-9737f6f9e09dfaf5d3fd14d775bfee85" target="_blank" rel="external">Mysql从入门到精通视频教程（共29集）</a>  2015年11月3日看完</p>
</li>
</ul>
<p>还有些网上分享的视频，存放在百度云。有数据库优化12篇视频。还有数据库架构</p>
<p><code>Docker</code></p>
<p><a href="https://ke.qq.com/user/tasks/index.html?cid=132963#tid=100148647&amp;fr=2" target="_blank" rel="external">实战企业Docker虚拟化系列</a>  2016年3月23日看完</p>
<p><code>Python</code></p>
<p><a href="https://ke.qq.com/course/139441" target="_blank" rel="external">学会Python编程基础篇</a>  2016-02-13 学完</p>
<p><code>监控</code></p>
<p><a href="http://edu.51cto.com/course/course_id-460.html" target="_blank" rel="external">企业级高级监控系统cacti+nagios【马哥linux视频课程】</a><br><a href="http://edu.51cto.com/course/course_id-6907.html" target="_blank" rel="external">Zabbix监控平台应用实战视频课程</a> 收费 需要可@我 2016-09-10 学完</p>
<h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><p><a href="http://www.lupaworld.com/article-221573.html" target="_blank" rel="external">Ubuntu上可使用的15个桌面环境</a> 很早就玩过了。</p>
<p><a href="http://mirrors.163.com/ubuntu-releases/14.04/" target="_blank" rel="external">Ubuntu iso镜像下载地址</a></p>
<h3 id="平面设计"><a href="#平面设计" class="headerlink" title="平面设计"></a>平面设计</h3><p><code>PS</code></p>
<ul>
<li><a href="http://wenku.baidu.com/course/view/994e6037ee06eff9aef8078d?cid=5" target="_blank" rel="external">Photoshop学习教程</a></li>
</ul>
<h6 id="陆续更新-（Update-time-：2016：12：11）"><a href="#陆续更新-（Update-time-：2016：12：11）" class="headerlink" title="@@ 陆续更新 ~~  （Update time ：2016：12：11）"></a>@@ 陆续更新 ~~  （Update time ：2016：12：11）</h6>
	

	

</article>





	<span class="different-posts">📖 <a href="/page/10">more posts</a> 📖</span>



	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as Radiant🐑🐑. This blog is about Bi-data and my live.<br> I like 🌳🌳🌳</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>© 2018 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
