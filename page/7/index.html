<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		
	<span class="different-posts different-posts_earlier">ğŸ“– <a href="/page/6">earlier posts</a> ğŸ“–</span>




	<article>
	
		<h1><a href="/2016/11/14/æ—¥å¿—åˆ†æå¹³å°/Graylog/graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ/">graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-11-14</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Log-Analysis-Platform/">Log Analysis Platform</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Graylog/">Graylog</a>
			</span>
		
	</div>

	

	
		<h1 id="graylog-å‡çº§2-1-é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ"><a href="#graylog-å‡çº§2-1-é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ" class="headerlink" title="graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ"></a>graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ</h1><p>å‚è€ƒå®˜ç½‘ï¼š<a href="http://docs.graylog.org/en/2.1/pages/upgrade/graylog-2.1.html" target="_blank" rel="external">å‡çº§åˆ°Graylogçš„2.1.x</a></p>
<h3 id="ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ"><a href="#ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ" class="headerlink" title="ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ"></a>ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ</h3><p>åœ¨å…¬å¸æœåŠ¡æœºå­éƒ¨ç½²è¶Šæ¥è¶Šå¤šçš„æƒ…å†µä¸‹ï¼Œè®©æˆ‘ä»¬æ¥æƒ³æƒ³ä¼šé‡åˆ°çš„é—®é¢˜ï¼š</p>
<ul>
<li>å¼€å‘äººå‘˜ä¸èƒ½ç™»å½•çº¿ä¸ŠæœåŠ¡å™¨æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼Œç»è¿‡è¿ç»´å‘¨è½¬è´¹æ—¶è´¹åŠ›</li>
<li>æ—¥å¿—æ•°æ®åˆ†æ•£åœ¨å¤šä¸ªç³»ç»Ÿï¼Œéš¾ä»¥æŸ¥æ‰¾</li>
<li>æ—¥å¿—æ•°æ®é‡å¤§ï¼ŒæŸ¥è¯¢é€Ÿåº¦æ…¢</li>
<li>ä¸€ä¸ªè°ƒç”¨ä¼šæ¶‰åŠå¤šä¸ªç³»ç»Ÿï¼Œéš¾ä»¥åœ¨è¿™äº›ç³»ç»Ÿçš„æ—¥å¿—ä¸­å¿«é€Ÿå®šä½æ•°æ®</li>
<li>æ•°æ®ä¸å¤Ÿå®æ—¶</li>
<li>å¾ˆéš¾å¯¹æ•°æ®è¿›è¡ŒæŒ–æ˜ï¼Œåˆ†æï¼Œä¸šåŠ¡å‘Šè­¦ï¼Œå®¡è®¡</li>
<li>è¿™äº›é—®é¢˜çš„å­˜åœ¨è®©å¼€å‘ä»¥åŠè¿ç»´äººå‘˜å¾ˆæ˜¯å¤´ç—›ï¼Œä¸¥é‡å½±å“æ•ˆç‡ï¼</li>
</ul>
<h3 id="äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ"><a href="#äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ" class="headerlink" title="äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ"></a>äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ</h3><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ—¥å¿—çš„é›†ä¸­ç®¡ç†æ–¹æ¡ˆï¼ŒgraylogæŠ€æœ¯æ ˆï¼š</p>
<ul>
<li>java ï¼ˆjdk1.8.0_66/ï¼‰ç¯å¢ƒ</li>
<li>Collector-sidecarï¼ˆæ”¶é›†æ—¥å¿—ï¼‰æˆ–è€…syslog</li>
<li>Mongodbï¼ˆå­˜å‚¨æ—¥å¿—æºæ–‡ä»¶ï¼‰</li>
<li>Elasticsearchï¼ˆæä¾›æœç´¢æ—¥å¿—ï¼‰</li>
<li>Graylog2.1.1ï¼ˆæœç´¢å’Œè§†å›¾å±•ç¤ºæ—¥å¿—ï¼Œå‘Šè­¦å’Œæƒé™ï¼‰</li>
</ul>
<p>æœ‰äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±èƒ½æŠŠæ—¥å¿—å…ˆæ”¶é›†èµ·æ¥ï¼Œè¿›è¡Œæˆ‘ä»¬æƒ³è¦çš„åˆ†æä¹‹åï¼Œwebçš„å½¢å¼å±•ç¤ºå‡ºæ¥ï¼Œæä¾›æŸ¥è¯¢ï¼</p>
<h3 id="ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²"><a href="#ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²" class="headerlink" title="ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²"></a>ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²</h3><p>å®‰è£…ç¯å¢ƒï¼šlinux centOSç³»ç»Ÿå®‰è£…ï¼Œå·²å®‰è£…JDK1.8ç‰ˆæœ¬ï¼Œå®‰è£…å¯åŠ¨é¡ºåº</p>
<p>1.å®‰è£…éƒ¨ç½²mongodb<br>2.å®‰è£…éƒ¨ç½²elasticsearch<br>3.å®‰è£…éƒ¨ç½²graylog<br>4.å®‰è£…éƒ¨ç½²Graylog Collector Sidecar</p>
<hr>
<p> <strong>1ï¼šå®‰è£…éƒ¨ç½²mongodb</strong> <strong>Javaä¹Ÿå®‰è£…</strong>  å‚è€ƒæˆ‘åšæ–‡æœ‰ä»‹ç»ã€‚ </p>
<p> <strong>2ï¼šå®‰è£…éƒ¨ç½²elasticsearch</strong></p>
<p><strong>(1)ä¸‹è½½jaråŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">wget https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz</div><div class="line"></div><div class="line">å¦‚æœæŠ¥é”™</div><div class="line">æ‰§è¡Œ</div><div class="line"></div><div class="line">wget --no-check-certificate</div><div class="line"></div><div class="line">https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz</div></pre></td></tr></table></figure>
<p><strong>(2)è§£å‹jaråŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf elasticsearch-2.3.5.tar.gz -C /opt/</div></pre></td></tr></table></figure>
<p><strong>(3)ä¿®æ”¹elasticsearch.ymlé…ç½®æ–‡ä»¶</strong></p>
<p> è¿™é‡Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼šé…ç½®å‰å…ˆåˆ›å»ºå‡ ä¸ªç›®å½•æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir /home/data/es-data -p</div><div class="line">mkdir /home/data/es-work -p</div></pre></td></tr></table></figure>
<p>elasticsearch-2.3.5å®‰è£…ç›®å½•confä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">vim elasticsearch-2.3.5/config/elasticsearch.yml</div><div class="line"> </div><div class="line">cluster.name: graylog              <span class="comment">#é›†ç¾¤åç§°å»ºè®®å‘½ågraylogï¼Œä¾¿äºè¯†åˆ«åŒºåˆ†</span></div><div class="line">node.name: elasticsearch-node-1     <span class="comment"># elasticsearché›†ç¾¤èŠ‚ç‚¹åç§°</span></div><div class="line">network.host: 192.168.1.234    <span class="comment"># ç»‘å®šèŠ‚ç‚¹IP</span></div><div class="line">http.port: 9200         <span class="comment"># å¤–éƒ¨è®¿é—®ç«¯å£ï¼Œé»˜è®¤ï¼Œä¹Ÿå¯ä»¥å®‰å…¨è€ƒè™‘ä¿®æ”¹</span></div><div class="line">path.logs: /home/data/logs</div><div class="line">path.data: /home/data/es-data</div><div class="line">discovery.zen.ping.multicast.enabled: <span class="literal">false</span>   <span class="comment">#å¤šæ’­å‘ç°æ–¹å¼å…³é—­ï¼Œå› ä¸ºgraylogé‡‡ç”¨å•æ’­æ–¹å¼å‘ç°elasticsearché›†ç¾¤æ–¹å¼</span></div><div class="line">discovery.zen.ping.unicast.hosts                   <span class="comment">#å¤šä¸ªèŠ‚ç‚¹ç”¨é€—å·éš”å¼€</span></div><div class="line">discovery.zen.minimum_master_nodes: 3    <span class="comment"># elasticsearché›†ç¾¤èŠ‚ç‚¹ï¼Œæœ€å°‘é€‰ä¸¾æ•°ï¼Œè¿™ä¸ªæ•°ä¸€å®šè¦è®¾ç½®ä¸ºæ•´ä¸ªé›†ç¾¤èŠ‚ç‚¹ä¸ªæ•°çš„ä¸€åŠåŠ 1ï¼Œå³N/2+1ï¼Œå¿…é¡»ä¸ºå¥‡æ•°</span></div></pre></td></tr></table></figure>
<p><strong>(4)å¯åŠ¨elasticsearchæœåŠ¡</strong></p>
<p>æ–°å»ºä¸€ä¸ªelasticsearchç”¨æˆ·ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒelasticsearchæœåŠ¡ä¸èƒ½ä½¿ç”¨rootç”¨æˆ·å¯åŠ¨</p>
<p>åˆ›å»ºelasticsearchç”¨æˆ·ç»„åŠelasticsearchç”¨æˆ·ï¼Œæ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">groupadd elasticsearch</div><div class="line">useradd elasticsearch -g elasticsearch -p elasticsearch</div></pre></td></tr></table></figure>
<p>å…¶ä¸­-gä½¿ç”¨æˆ·å±äºæŸä¸ªç»„ï¼Œ-pä¸ºæ–°ç”¨æˆ·ä½¿ç”¨åŠ å¯†å¯†ç ï¼‰<br>æ›´æ”¹elasticsearch-2.3.5æ–‡ä»¶å¤¹åŠå†…éƒ¨æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·åŠç»„ä¸ºelasticsearch:elasticsearch</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chown -R elasticsearch:elasticsearch  /home/data/</div><div class="line">chown -R elasticsearch:elasticsearch  elasticsearch-2.3.5</div></pre></td></tr></table></figure>
<p>åˆ‡æ¢ç”¨æˆ·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">su elasticsearch</div></pre></td></tr></table></figure>
<p>åœ¨elasticsearch-2.3.5/binç›®å½•ä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[elasticsearch@graylog bin]$ ps -ef | grep elasticsearch</div><div class="line">root     18265 16004  0 14:27 pts/1    00:00:00 su elasticsearch</div><div class="line">502      18405     1 62 14:27 pts/1    00:00:13 /srv/jdk1.8.0_66/bin/java -Xms256m -Xmx1g -Djava.awt.headless=<span class="literal">true</span> -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+HeapDumpOnOutOfMemoryError -XX:+DisableExplicitGC -Dfile.encoding=UTF-8 -Djna.nosys=<span class="literal">true</span> -Des.path.home=/opt/elasticsearch-2.3.5 -cp /opt/elasticsearch-2.3.5/lib/elasticsearch-2.3.5.jar:/opt/elasticsearch-2.3.5/lib/* org.elasticsearch.bootstrap.Elasticsearch start <span class="_">-d</span></div><div class="line">502      18530 18266  0 14:27 pts/1    00:00:00 grep --color=auto ela</div></pre></td></tr></table></figure>
<p><strong>(5)æ£€æŸ¥elasticsearchæœåŠ¡çŠ¶æ€</strong></p>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æµ‹è¯•Elasticsearchæ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</p>
<p>$ curl -XGET â€˜<a href="http://localhost:9200/_cluster/health?pretty=true" target="_blank" rel="external">http://localhost:9200/_cluster/health?pretty=true</a>â€˜</p>
<p>è¾“å‡ºçš„ä¿¡æ¯å¦‚ä¸‹è¡¨ç¤ºElasticsearchå®‰è£…æˆåŠŸï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[elasticsearch@graylog bin]$ curl -XGET <span class="string">'http://192.168.1.234:9200/_cluster/health?pretty=true'</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"cluster_name"</span> : <span class="string">"graylog"</span>,</div><div class="line">  <span class="string">"status"</span> : <span class="string">"yellow"</span>,</div><div class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</div><div class="line">  <span class="string">"number_of_nodes"</span> : 1,</div><div class="line">  <span class="string">"number_of_data_nodes"</span> : 1,</div><div class="line">  <span class="string">"active_primary_shards"</span> : 30,</div><div class="line">  <span class="string">"active_shards"</span> : 30,</div><div class="line">  <span class="string">"relocating_shards"</span> : 0,</div><div class="line">  <span class="string">"initializing_shards"</span> : 0,</div><div class="line">  <span class="string">"unassigned_shards"</span> : 30,</div><div class="line">  <span class="string">"delayed_unassigned_shards"</span> : 0,</div><div class="line">  <span class="string">"number_of_pending_tasks"</span> : 0,</div><div class="line">  <span class="string">"number_of_in_flight_fetch"</span> : 0,</div><div class="line">  <span class="string">"task_max_waiting_in_queue_millis"</span> : 0,</div><div class="line">  <span class="string">"active_shards_percent_as_number"</span> : 50.0</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3ï¼šå®‰è£…éƒ¨ç½²graylog-2-1ç‰ˆæœ¬"><a href="#3ï¼šå®‰è£…éƒ¨ç½²graylog-2-1ç‰ˆæœ¬" class="headerlink" title="3ï¼šå®‰è£…éƒ¨ç½²graylog-2.1ç‰ˆæœ¬"></a>3ï¼šå®‰è£…éƒ¨ç½²graylog-2.1ç‰ˆæœ¬</h3><p><strong>(1)ä¸‹è½½å®‰è£…åŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://packages.graylog2.org/releases/graylog/graylog-2.1.1.tgz</div></pre></td></tr></table></figure>
<p><strong>(2)è§£å‹å®‰è£…åŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf graylog-2.1.1.tgz -C /opt/.</div></pre></td></tr></table></figure>
<p><strong>(3)ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p>
<p>ä¿®æ”¹å®‰è£…ç›®å½•ä¸‹ graylog.conf.example æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim graylog.conf.example</div></pre></td></tr></table></figure>
<p>web_listen_uri å€¼æ˜¯graylogå¯åŠ¨æˆåŠŸåï¼ŒwebæœåŠ¡è®¿é—®åœ°å€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">web_listen_uri = http://192.168.1.234:9000/</div></pre></td></tr></table></figure>
<p>rest_listen_uri çš„å€¼ï¼Œæ˜¯graylogå¯åŠ¨æˆåŠŸåï¼Œapiè®¿é—®åœ°å€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rest_listen_uri = http://192.168.1.234:9000/api/</div></pre></td></tr></table></figure>
<p>root_timezone = UTC  #è®¾ç½®æ—¶åŒºï¼Œå¦åˆ™é»˜è®¤ä½¿ç”¨çš„æ˜¯UTCæ—¶é—´ä¹Ÿå°±æ˜¯ä¸–ç•Œæ—¶é—´ è¿™é‡Œæ˜¯å¿…é¡»æ”¹ä¸‹çš„ï¼Œå› ä¸ºåæœŸæ”¶é›†æ—¥å¿—æ˜¾ç¤ºæ—¶é—´æ˜¯æœ‰å˜åŒ–çš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">root_timezone = Asia/Shanghai</div></pre></td></tr></table></figure>
<p>å…¶ä¸­ password_secret çš„å€¼ç”¨å‘½ä»¤ç”Ÿæˆ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">yum install -y pwgen</div><div class="line">pwgen -N 1 <span class="_">-s</span> 96       H1R5v17kWtyDxj2PzxLMxu41D6HDt9JzhfZcj6QlCURVddgkLAdnUmpkdIscmmu4ELKsTrHwKvPmxFKSYyTn0YlqebbpQqyr</div><div class="line"></div><div class="line">    password_secret = H1R5v17kWtyDxj2PzxLMxu41D6HDt9JzhfZcj6QlCURVddgkLAdnUmpkdIscmmu4ELKsTrHwKvPmxFKSYyTn0YlqebbpQqyr</div></pre></td></tr></table></figure>
<p>å…¶ä¸­root_password_sha2 çš„å€¼ä½¿ç”¨å‘½ä»¤ç”Ÿæˆ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">echo</span> -n Ihaozhuo_b313 | sha256sum  (è¿™é‡Œå¯¹å¯†ç 123456å“ˆå¸ŒåŠ å¯†)</div><div class="line"></div><div class="line"><span class="built_in">fc</span>88c28d48b0cb97f3fb5286cc35c520409ef037acd30ec687f0c0bd3d5a5115 </div><div class="line">   </div><div class="line">root_password_sha2 = <span class="built_in">fc</span>88c28d48b0cb97f3fb5286cc35c520409ef037acd30ec687f0c0bd3d5a5115</div></pre></td></tr></table></figure>
<p>elasticsearch_cluster_name å€¼å¿…é¡»æ˜¯elasticsearché…ç½®æ–‡ä»¶ä¸­çš„cluster_name</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">elasticsearch_cluster_name = graylog</div></pre></td></tr></table></figure>
<p>elasticsearch_discovery_zen_ping_unicast_hosts å¡«å†™elasticsearchåœ°å€ï¼Œå¦‚æœæ˜¯å¤šä¸ªï¼Œç”¨é€—å·éš”å¼€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">elasticsearch_discovery_zen_ping_unicast_hosts = 192.168.1.234:9300</div></pre></td></tr></table></figure>
<p>elasticsearch_discovery_zen_ping_multicast_enabled = false å¤šæ’­æ¨¡å¼å…³é—­</p>
<p>ç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªElasticsearch shardï¼Œéœ€è¦æŠŠelasticsearch_shardså‚æ•°è®¾ç½®ä¸º1ï¼š<br>elasticsearché›†ç¾¤åˆ†ç‰‡æ•°é‡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">elasticsearch_shards = 1</div></pre></td></tr></table></figure>
<p>elasticsearchç»‘å®šçš„èŠ‚ç‚¹IP</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">299 elasticsearch_network_host = 192.168.1.234</div><div class="line">300 elasticsearch_network_bind_host = 192.168.1.234</div><div class="line">301 elasticsearch_network_publish_host = 192.168.1.234</div></pre></td></tr></table></figure>
<p>mongodbå®‰è£…æœåŠ¡çš„ipåœ°å€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongodb_uri = mongodb://192.168.1.234/graylog</div></pre></td></tr></table></figure>
<p>è¿™é‡Œmongodbæ˜¯å®‰è£…åœ¨æˆ‘åŒä¸€å°æœåŠ¡å™¨ä¸Šé¢çš„ã€‚å¦‚æœè¦æŠŠmongodbå•ç‹¬æœåŠ¡å™¨è·‘è¿æ¥æ–¹å¼é…ç½®æ–‡ä»¶é‡Œé¢ä¹Ÿæœ‰ä¾‹å­è¯´æ˜ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongodb_uri =mongodb://graylog:123456@160.17.2.251:27017/graylog2             <span class="comment">#è¿æ¥åˆ°mongodbçš„æœåŠ¡å™¨åœ°å€ä¸º160.17.2.251:27017ï¼Œè´¦å·ä¸ºgraylogï¼Œå¯†ç ä¸º123456 æ•°æ®åº“ä¸ºgraylog2</span></div></pre></td></tr></table></figure>
<p> è®¾ç½®å‘Šè­¦é‚®ä»¶å‘é€è€…ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> <span class="comment"># Email transport</span></div><div class="line">transport_email_enabled = <span class="literal">false</span></div><div class="line">transport_email_hostname = smtp.exmail.qq.com</div><div class="line">transport_email_port = 465</div><div class="line">transport_email_use_auth = <span class="literal">true</span></div><div class="line">transport_email_use_tls = <span class="literal">true</span></div><div class="line">transport_email_use_ssl = <span class="literal">true</span></div><div class="line">transport_email_auth_username = chengyangyang@qq.cn</div><div class="line">transport_email_auth_password = beneTqq</div><div class="line">transport_email_subject_prefix = [graylog]</div><div class="line">transport_email_from_email = chengyangyang@qq.cn</div></pre></td></tr></table></figure>
<p><strong>(4)å¤åˆ¶é…ç½®æ–‡ä»¶</strong></p>
<p> å› ä¸ºgraylogå®‰è£…binç›®å½•ä¸‹ï¼Œé»˜è®¤å¯åŠ¨é…ç½®æ–‡ä»¶</p>
<p>é…ç½®æ–‡ä»¶è·¯å¾„ï¼š<code>/etc/graylog/server/server.conf</code></p>
<p>æ‰€ä»¥éœ€è¦å°†<code>graylog.conf.example</code> å¤åˆ¶åˆ°<code>/etc/graylog/server/</code>ç›®å½•ä¸‹ï¼Œå¹¶ä¸”æ”¹å <code>server.conf</code></p>
<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir -p /etc/graylog/server/ </div><div class="line">cp graylog.conf.example /etc/graylog/server/server.conf</div></pre></td></tr></table></figure>
<p><strong>(5)å¯åŠ¨graylog</strong></p>
<p>åœ¨graylogå®‰è£…binç›®å½•ä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./graylogctl start</div></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ—¥å¿—ï¼Œåœ¨graylogå®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tail -200f /<span class="built_in">log</span>/graylog-server.log</div></pre></td></tr></table></figure>
<p>å¦‚æœæŠ¥é”™ï¼š</p>
<p>åŸå› ï¼š</p>
<p>åœ¨mongodbç‰ˆæœ¬2.6ä¹‹åï¼Œæ˜¯éœ€è¦æ—¥å¿—journalingè®¾ç½®çš„ï¼Œè€Œé»˜è®¤æƒ…å†µä¸‹æ˜¯å…³é—­çš„</p>
<p>è§£å†³åŠæ³•ï¼š</p>
<p>åœ¨mongodbå¯åŠ¨å‘½ä»¤åŠ ä¸Š â€“journal</p>
<p>æœ€åå¯åŠ¨å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./mongod --dbpath=/usr/<span class="built_in">local</span>/mongodb/data/ --fork --logpath=/usr/<span class="built_in">local</span>/mongodb/logs --storageEngine=mmapv1 --journal</div></pre></td></tr></table></figure>
<p>é‡å¯mongodbåï¼Œé‡å¯graylogæœåŠ¡å³å¯ï¼</p>
<p><strong>(6)å¯åŠ¨graylog(æŠ¥é”™äºŒ)</strong></p>
<p>æŸ¥çœ‹æ—¥å¿—ï¼Œåœ¨graylogå®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">tail -200f /<span class="built_in">log</span>/graylog-server.log</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;com.mongodb.MongoSocketOpenException: Exception opening socket&#125;, caused by &#123;java.net.ConnectException: æ‹’ç»è¿æ¥&#125;&#125;]&#125;. Waiting <span class="keyword">for</span> 30000 ms before timing out</div><div class="line">2016-11-22 15:10:29,355 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Elastic Beats Input 1.1.1 [org.graylog.plugins.beats.BeatsInputPlugin]</div><div class="line">2016-11-22 15:10:29,357 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Collector 1.1.1 [org.graylog.plugins.collector.CollectorPlugin]</div><div class="line">2016-11-22 15:10:29,357 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Enterprise Integration Plugin 1.1.1 [org.graylog.plugins.enterprise_integration.EnterpriseIntegrationPlugin]</div><div class="line">2016-11-22 15:10:29,358 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: MapWidgetPlugin 1.1.1 [org.graylog.plugins.map.MapWidgetPlugin]</div><div class="line">2016-11-22 15:10:29,359 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Pipeline Processor Plugin 1.1.1 [org.graylog.plugins.pipelineprocessor.ProcessorPlugin]</div><div class="line">2016-11-22 15:10:29,359 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Anonymous Usage Statistics 2.1.1 [org.graylog.plugins.usagestatistics.UsageStatsPlugin]</div><div class="line">2016-11-22 15:10:29,487 INFO : org.graylog2.bootstrap.CmdLineTool - Running with JVM arguments: -Djava.library.path=./../lib/sigar -Xms1g -Xmx1g -XX:NewRatio=1 -XX:+ResizeTLAB -XX:+UseConcMarkSweepGC -XX:+CMSConcurrentMTEnabled -XX:+CMSClassUnloadingEnabled -XX:+UseParNewGC -XX:-OmitStackTraceInFastThrow</div></pre></td></tr></table></figure>
<p>æç¤ºmongodb æ‹’ç»è¿æ¥ã€‚ è¿™ä¸ªæ—¶å€™éœ€è¦çœ‹ä¸‹ç«¯å£åœ°å€æ˜¯å¦æ˜¯IPåœ°å€è¿˜æ˜¯127.0.0.1 å¦‚æœä¸æ˜¯éœ€è¦ä¿®æ”¹ä¸‹åœ¨é‡å¯æœåŠ¡å°±å¯ä»¥äº†ã€‚</p>
<p><strong>æŸ¥çœ‹å¯åŠ¨æœåŠ¡ç«¯å£ï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[root@graylog graylog-2.1.1]<span class="comment"># netstat -ntulp</span></div><div class="line">Active Internet connections (only servers)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name</div><div class="line">tcp        0      0 127.0.0.1:27017             0.0.0.0:*                   LISTEN      22308/mongod</div><div class="line">tcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN      1974/sshd</div><div class="line">tcp        0      0 127.0.0.1:25                0.0.0.0:*                   LISTEN      1287/master</div><div class="line">tcp        0      0 ::ffff:192.168.1.234:9350   :::*                        LISTEN      23642/java</div><div class="line">tcp        0      0 ::ffff:192.168.1.234:9000   :::*                        LISTEN      23642/java</div><div class="line">tcp        0      0 ::ffff:192.168.1.234:9200   :::*                        LISTEN      18405/java</div><div class="line">tcp        0      0 ::ffff:192.168.1.234:9300   :::*                        LISTEN      18405/java</div><div class="line">tcp        0      0 :::22                       :::*                        LISTEN      1974/sshd</div><div class="line">tcp        0      0 ::1:25                      :::*                        LISTEN      1287/master</div></pre></td></tr></table></figure>
<p><strong>(6)è®¿é—®graylog</strong></p>
<p>graylogå¯åŠ¨æˆåŠŸåï¼Œæµè§ˆå™¨è®¿é—®ï¼š<strong>graylogå®‰è£…IP:9000</strong></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog10.png" alt=""></figure></p>
<h3 id="å››ï¼šæ€»ç»“"><a href="#å››ï¼šæ€»ç»“" class="headerlink" title="å››ï¼šæ€»ç»“"></a>å››ï¼šæ€»ç»“</h3><p>åˆ°æ­¤ï¼ŒåŸºç¡€çš„é›†ä¸­æ—¥å¿—ç®¡ç†graylogå®‰è£…å®Œæ¯•ï¼ï¼Œåç»­å°†ç»§ç»­ä»‹ç»ï¼š</p>
<p>å®‰è£…éƒ¨ç½²Graylog Collector Sidecar æ”¶é›†åº”ç”¨æ—¥å¿—</p>
<p>é‡‡ç”¨syslogæ”¶é›†æ—¥å¿—æ–¹å¼</p>
<p>graylogä¸€äº›ä½¿ç”¨ï¼ŒåŒ…æ‹¬æ—¥å¿—æˆªå–ï¼Œå‘Šè­¦ç­‰ã€‚</p>
<p>ä¹‹å‰ä¹Ÿå®è·µè¿‡ELKæŠ€æœ¯æ ˆï¼Œåæ¥é€‰å‹graylogï¼Œæ˜¯åŸºäºgraylogå¸¦æœ‰çš„æƒé™ç®¡ç†ï¼Œå’Œå‘Šè­¦åŠŸèƒ½æ¯”è¾ƒå®Œå–„ï¼</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/11/13/æ—¥å¿—åˆ†æå¹³å°/Graylog/Graylogâ€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch/">Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-11-13</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Log-Analysis-Platform/">Log Analysis Platform</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Graylog/">Graylog</a>
			</span>
		
	</div>

	

	
		<p>æ‘˜è¦: æèµ·æ—¥å¿—èšåˆå·¥å…·ï¼Œæœ‰å¼€æºç•Œçš„ELKï¼Œå•†ä¸šç•Œçš„Splunkï¼Œä½†æˆ‘è¦ä»‹ç»å¼€æºçš„åèµ·ä¹‹ç§€Graylogï¼Œå¯ä»¥è¯´æ˜¯é¾™å¤´è€å¤§Splunkçš„å¼€æºç‰ˆã€‚</p>
<h1 id="Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch"><a href="#Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch" class="headerlink" title="Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch"></a>Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch</h1><p>å…ˆçœ‹çœ‹ æ¨èï¼<a href="https://my.oschina.net/HeAlvin/blog/378262" target="_blank" rel="external">å›½å¤–ç¨‹åºå‘˜æ•´ç†çš„ç³»ç»Ÿç®¡ç†å‘˜èµ„æºå¤§å…¨</a> ä¸­ï¼Œå›½å¤–ç¨‹åºå‘˜æ•´ç†çš„æ—¥å¿—èšåˆå·¥å…·çš„åˆ—è¡¨ï¼š</p>
<p><strong>æ—¥å¿—ç®¡ç†å·¥å…·ï¼šæ”¶é›†ï¼Œè§£æï¼Œå¯è§†åŒ–</strong></p>
<ul>
<li>Elasticsearch - ä¸€ä¸ªåŸºäºLuceneçš„æ–‡æ¡£å­˜å‚¨ï¼Œä¸»è¦ç”¨äºæ—¥å¿—ç´¢å¼•ã€å­˜å‚¨å’Œåˆ†æã€‚</li>
<li>Fluentd - æ—¥å¿—æ”¶é›†å’Œå‘å‡º</li>
<li>Flume -åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†å’Œèšåˆç³»ç»Ÿ</li>
<li>Graylog2 -å…·æœ‰æŠ¥è­¦é€‰é¡¹çš„å¯æ’å…¥æ—¥å¿—å’Œäº‹ä»¶åˆ†ææœåŠ¡å™¨</li>
<li>Heka -æµå¤„ç†ç³»ç»Ÿï¼Œå¯ç”¨äºæ—¥å¿—èšåˆ</li>
<li>Kibana - å¯è§†åŒ–æ—¥å¿—å’Œæ—¶é—´æˆ³æ•°æ®</li>
<li>Logstash -ç®¡ç†äº‹ä»¶å’Œæ—¥å¿—çš„å·¥å…·</li>
<li>Octopussy -æ—¥å¿—ç®¡ç†è§£å†³æ–¹æ¡ˆï¼ˆå¯è§†åŒ–/æŠ¥è­¦/æŠ¥å‘Šï¼‰</li>
</ul>
<p>Graylogä¸ELKæ–¹æ¡ˆçš„å¯¹æ¯”</p>
<ul>
<li>ELKï¼š Logstash -&gt; Elasticsearch -&gt; Kibana ï¼ˆä½¿ç”¨äº†ä¸€äº›æ’ä»¶head ï¼Œmarvelï¼‰</li>
<li>Graylogï¼š Graylog Collector -&gt; Graylog Server(å°è£…Elasticsearch) -&gt; Graylog Web</li>
</ul>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/Graylog.png" alt=""></figure></p>
<p>åšä¸ºè¿ç»´ï¼Œå…¬å¸å†…éƒ¨ä½¿ç”¨elkå¤„ç†æ—¥å¿—å‘ç°å¾ˆå¤šé—®é¢˜ã€‚</p>
<p>é¡ºä¾¿æˆªå›¾äº†å‡ å¼ ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog-elk.png" alt=""></figure><br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog-elk1.png" alt=""></figure></p>
<p>ä¹‹å‰è¯•è¿‡Logstash + Elasticsearch + Kibanaçš„æ–¹æ¡ˆï¼Œå‘ç°æœ‰å‡ ä¸ªç¼ºç‚¹ï¼š</p>
<ol>
<li>ä¸èƒ½å¤„ç†å¤šè¡Œæ—¥å¿—ï¼Œæ¯”å¦‚Mysqlæ…¢æŸ¥è¯¢ï¼ŒTomcat/Jettyåº”ç”¨çš„Javaå¼‚å¸¸æ‰“å°</li>
<li>ä¸èƒ½ä¿ç•™åŸå§‹æ—¥å¿—ï¼Œåªèƒ½æŠŠåŸå§‹æ—¥å¿—åˆ†å­—æ®µä¿å­˜ï¼Œè¿™æ ·æœç´¢æ—¥å¿—ç»“æœæ˜¯ä¸€å †Jsonæ ¼å¼æ–‡æœ¬ï¼Œæ— æ³•é˜…è¯»ã€‚</li>
<li>ä¸å¤åˆæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ—¥å¿—è¡Œï¼Œè¢«å…¨éƒ¨ä¸¢å¼ƒã€‚</li>
<li>kibanaç»“åˆä½¿ç”¨ç»å¸¸ä¼šå‡ºç°å¡æ­»ã€‚èµ„æºæ¶ˆè€—éå¸¸å¤§ã€‚</li>
</ol>
<p>æœ¬ç€è§£å†³ä»¥ä¸Š3ä¸ªç¼ºç‚¹çš„åŸåˆ™ï¼Œå†æ¬¡å¯»æ‰¾æ›¿ä»£æ–¹æ¡ˆã€‚ é¦–å…ˆæ‰¾åˆ°äº†å•†ä¸šæ—¥å¿—å·¥å…·Splunkï¼Œå·ç§°æ—¥å¿—ç•Œçš„Googleï¼Œæ„æ€æ˜¯å…¨æ–‡æœç´¢æ—¥å¿—çš„èƒ½åŠ›ï¼Œä¸å…‰èƒ½è§£å†³ä»¥ä¸Š3ä¸ªç¼ºç‚¹ï¼Œè¿˜æä¾›æœç´¢å•è¯é«˜äº®æ˜¾ç¤ºï¼Œä¸åŒé”™è¯¯çº§åˆ«æ—¥å¿—æ ‡è‰²ç­‰å¸å¼•äººçš„ç‰¹æ€§ï¼Œä½†æ˜¯å…è´¹ç‰ˆæœ‰500Mé™åˆ¶ï¼Œä»˜è´¹ç‰ˆæ®è¯´è¦3ä¸‡ç¾åˆ€ï¼Œåªèƒ½æ”¾å¼ƒï¼Œç»§ç»­å¯»æ‰¾ã€‚ æœ€åæ‰¾åˆ°äº†Graylogï¼Œç¬¬ä¸€çœ¼çœ‹åˆ°Graylogï¼Œåªæ˜¯ç³»ç»Ÿæ—¥å¿—syslogçš„é‡‡é›†å·¥å…·ï¼Œä¸€ç‚¹ä¹Ÿæ²¡å¸å¼•åˆ°æˆ‘ã€‚ä½†åæ¥æ·±å…¥äº†è§£åï¼Œæ‰å‘ç°Graylogç®€ç›´å°±æ˜¯å¼€æºç‰ˆçš„Splunkã€‚ æˆ‘è‡ªå·±æ€»ç»“çš„Graylogå¸å¼•äººçš„åœ°æ–¹ï¼š</p>
<ol>
<li>ä¸€ä½“åŒ–æ–¹æ¡ˆï¼Œå®‰è£…æ–¹ä¾¿ï¼Œä¸åƒELKæœ‰3ä¸ªç‹¬ç«‹ç³»ç»Ÿé—´çš„é›†æˆé—®é¢˜ã€‚</li>
<li>é‡‡é›†åŸå§‹æ—¥å¿—ï¼Œå¹¶å¯ä»¥äº‹åå†æ·»åŠ å­—æ®µï¼Œæ¯”å¦‚http_status_codeï¼Œresponse_timeç­‰ç­‰ã€‚</li>
<li>è‡ªå·±å¼€å‘é‡‡é›†æ—¥å¿—çš„è„šæœ¬ï¼Œå¹¶ç”¨curl/ncå‘é€åˆ°Graylog Serverï¼Œå‘é€æ ¼å¼æ˜¯è‡ªå®šä¹‰çš„GELFï¼ŒFluntedå’ŒLogstashéƒ½æœ‰ç›¸åº”çš„è¾“å‡ºGELFæ¶ˆæ¯çš„æ’ä»¶ã€‚è‡ªå·±å¼€å‘å¸¦æ¥å¾ˆå¤§çš„è‡ªç”±åº¦ã€‚å®é™…ä¸Šåªéœ€è¦ç”¨inotifywaitç›‘æ§æ—¥å¿—çš„modifyäº‹ä»¶ï¼Œå¹¶æŠŠæ—¥å¿—çš„æ–°å¢è¡Œç”¨curl/netcatå‘é€åˆ°Graylog Serverå°±å¯ã€‚</li>
<li>æœç´¢ç»“æœé«˜äº®æ˜¾ç¤ºï¼Œå°±åƒgoogleä¸€æ ·ã€‚</li>
<li>æœç´¢è¯­æ³•ç®€å•ï¼Œæ¯”å¦‚ï¼š source:mongo AND reponse_time_ms:&gt;5000ï¼Œé¿å…ç›´æ¥è¾“å…¥elasticsearchæœç´¢jsonè¯­æ³•</li>
<li>æœç´¢æ¡ä»¶å¯ä»¥å¯¼å‡ºä¸ºelasticsearchçš„æœç´¢jsonæ–‡æœ¬ï¼Œæ–¹ä¾¿ç›´æ¥å¼€å‘è°ƒç”¨elasticsearch rest apiçš„æœç´¢è„šæœ¬ã€‚</li>
</ol>
<p>Graylogå›¾è§£</p>
<p>Graylogå¼€æºç‰ˆå®˜ç½‘ï¼š <a href="https://www.graylog.org/" target="_blank" rel="external">https://www.graylog.org/</a></p>
<p>æ¥å‡ å¼ å®˜ç½‘çš„æˆªå›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog2.png" alt=""></figure></p>
<p><figure class="figure"><img src="https://www.graylog.org/assets/itops_full-87fe2811ab676116142c145affa95b902635b1d6da99718057e8ae9d45c15007.png" alt=""></figure></p>
<p><figure class="figure"><img src="https://www.graylog.org/assets/overview_dashboard-3817012f923d4a00e9bde1c0547796319cf0396149464f434cfc2ae83a9da826.png" alt=""></figure></p>
<p>Graylogæ˜¯å¼ºå¤§çš„æ—¥å¿—ç®¡ç†ã€åˆ†æå·¥å…·ã€‚å®ƒåŸºäº Elasticsearch, Javaå’ŒMongoDBã€‚</p>
<p>Graylogå¯ä»¥æ”¶é›†ç›‘æ§å¤šç§ä¸åŒåº”ç”¨çš„æ—¥å¿—ã€‚ä½†æ˜¯ä¸ºäº†ç¤ºèŒƒè¯´æ˜ï¼Œæˆ‘åªæ”¶é›†syslogã€‚å¹¶ä¸”ï¼Œæˆ‘å°†ä¼šæŠŠç”¨åˆ°çš„ç»„ä»¶å…¨éƒ¨å®‰è£…åˆ°ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡å™¨ä¸Šã€‚å¯¹äºå¤§å‹ã€ç”Ÿäº§ç³»ç»Ÿä½ å¯ä»¥æŠŠç»„ä»¶åˆ†å¼€å®‰è£…åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ã€‚</p>
<h3 id="Graylogçš„ç»„ä»¶"><a href="#Graylogçš„ç»„ä»¶" class="headerlink" title="Graylogçš„ç»„ä»¶"></a>Graylogçš„ç»„ä»¶</h3><p>Graylogæœ‰4ä¸ªåŸºæœ¬ç»„ä»¶ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Graylog <span class="built_in">Server</span>ï¼šè¿™ä¸ªæœåŠ¡è´Ÿè´£æ¥æ”¶å’Œå¤„ç†æ—¥å¿—/æ¶ˆæ¯ï¼Œå¹¶ä¸”å’Œå…¶ä»–ç»„ä»¶æ²Ÿé€šã€‚</div><div class="line">Elasticsearchï¼šå­˜å‚¨æ‰€æœ‰çš„æ—¥å¿—ï¼Œå®ƒçš„æ€§èƒ½ä¾èµ–å†…å­˜å’Œç¡¬ç›˜IOã€‚</div><div class="line">MongoDBï¼šå­˜å‚¨å…ƒæ•°æ®ï¼Œè´Ÿè½½ä¸é«˜ã€‚</div><div class="line">graylog-Webæ¥å£ï¼šç”¨æˆ·æ¥å£ã€‚</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯Graylogç»„ä»¶ä¹‹é—´çš„å…³ç³»å›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog3.png" alt=""></figure></p>
<p>ä¸‹é¢æ¥è‡ªæˆ‘å…¬å¸å†…éƒ¨åˆ†äº«çš„PPTæ‹å›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/Graylog4-ppt.png" alt=""></figure></p>
<p>ç”Ÿäº§ç¯å¢ƒ æˆ‘å‚è€ƒç½‘ä¸Šä¸€äº›åšå®¢ç”»çš„å›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog5.png" alt=""></figure></p>
<h3 id="ç³»ç»Ÿè¦æ±‚ï¼š"><a href="#ç³»ç»Ÿè¦æ±‚ï¼š" class="headerlink" title="ç³»ç»Ÿè¦æ±‚ï¼š"></a>ç³»ç»Ÿè¦æ±‚ï¼š</h3><ul>
<li>CentOS 6.7</li>
<li>å†…å­˜è‡³å°‘2GB</li>
<li>æœ‰rootæƒé™</li>
<li>æœåŠ¡å™¨ipæ˜¯192.168.1.234ï¼Œå·²å®‰è£… 1.8.0_77-b03</li>
</ul>
<p>è¿™é‡Œæˆ‘åªæ˜¯ä¸¾ä¾‹å•ä¸€æ¨¡å¼è·‘æœåŠ¡ã€‚</p>
<h3 id="å®‰è£…MongoDB"><a href="#å®‰è£…MongoDB" class="headerlink" title="å®‰è£…MongoDB"></a>å®‰è£…MongoDB</h3><p>MongoDBçš„å®‰è£…éå¸¸ç®€å•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯¼å…¥MongoDB GPGå¯†é’¥åˆ°rpmï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">vim</span> <span class="string">/etc/yum.repos.d/mongodb-org-3.0.repo</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">[mongodb-org-3.0]</span></div><div class="line"><span class="string">name=MongoDB</span> <span class="string">Repository</span></div><div class="line"><span class="string">baseurl=http://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.0/x86_64/</span></div><div class="line"><span class="string">gpgcheck=0</span></div><div class="line"><span class="string">enabled=1</span></div><div class="line"><span class="meta">---</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">yum</span> <span class="string">install</span> <span class="bullet">-y</span> <span class="string">mongodb-org</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">vi</span> <span class="string">/etc/yum.conf</span></div><div class="line"><span class="string">æœ€åä¸€è¡Œæ·»åŠ ï¼š</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">exclude=mongodb-org,mongodb-org-server,mongodb-org-shell,mongodb-org-mongos,mongodb-org-tools</span></div><div class="line"><span class="meta">---</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">service</span> <span class="string">mongod</span> <span class="string">start</span></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">chkconfig</span> <span class="string">mongod</span> <span class="string">on</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">vi</span> <span class="string">/etc/security/limits.conf</span></div><div class="line"><span class="string">æœ€åä¸€è¡Œæ·»åŠ ï¼š</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">*</span>                <span class="string">soft</span>    <span class="string">nproc</span>           <span class="number">65536</span></div><div class="line"><span class="string">*</span>                <span class="string">hard</span>    <span class="string">nproc</span>           <span class="number">65536</span></div><div class="line"><span class="string">mongod</span>           <span class="string">soft</span>    <span class="string">nproc</span>           <span class="number">65536</span></div><div class="line"></div><div class="line"><span class="string">*</span>                <span class="string">soft</span>    <span class="string">nofile</span>          <span class="number">131072</span></div><div class="line"><span class="string">*</span>                <span class="string">hard</span>    <span class="string">nofile</span>          <span class="number">131072</span></div><div class="line"><span class="meta">---</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">vi</span> <span class="string">/etc/init.d/mongod</span></div><div class="line"><span class="string">ulimit</span> <span class="bullet">-f</span> <span class="string">unlimited</span> <span class="string">è¡Œå‰æ’å…¥ï¼š</span></div><div class="line"><span class="meta">---</span></div><div class="line">  <span class="string">if</span> <span class="string">test</span> <span class="bullet">-f</span> <span class="string">/sys/kernel/mm/transparent_hugepage/enabled;</span> <span class="string">then</span></div><div class="line">    <span class="string">echo</span> <span class="string">never</span> <span class="string">&gt; /sys/kernel/mm/transparent_hugepage/enabled</span></div><div class="line">  fi</div><div class="line">  if test -f /sys/kernel/mm/transparent_hugepage/defrag; then</div><div class="line">    echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</div><div class="line">  fi</div><div class="line">---</div><div class="line">[root@graylog ~]# /etc/init.d/mongod restart</div></pre></td></tr></table></figure>
<h3 id="å®‰è£…Elasticsearch"><a href="#å®‰è£…Elasticsearch" class="headerlink" title="å®‰è£…Elasticsearch"></a>å®‰è£…Elasticsearch</h3><p>Graylogç›®å‰ä¸ºæ­¢åªèƒ½ä½¿ç”¨Elasticsearch 2.0ä»¥å‰çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥ï¼Œåœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘å°†å®‰è£…Elasticsearch 1.7.xã€‚</p>
<p>æ·»åŠ Elasticsearch GPGå¯†é’¥ï¼š</p>
<pre><code>$ sudo rpm --import http://packages.elastic.co/GPG-KEY-elasticsearch
</code></pre><p>åˆ›å»ºElasticsearchæºï¼š</p>
<pre><code>$ sudo vim /etc/yum.repos.d/elasticsearch.repo
</code></pre><p>å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="section">[elasticsearch-1.7]</span></div><div class="line"><span class="attr">name</span>=Elasticsearch repository for <span class="number">1.7</span>.x packages</div><div class="line"><span class="attr">baseurl</span>=http://packages.elastic.co/elasticsearch/<span class="number">1.7</span>/centos</div><div class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></div><div class="line"><span class="attr">gpgkey</span>=http://packages.elastic.co/GPG-KEY-elasticsearch</div><div class="line"><span class="attr">enabled</span>=<span class="number">1</span></div></pre></td></tr></table></figure>
<p>å®‰è£…Elasticsearchï¼š</p>
<pre><code>$ sudo yum -y install elasticsearch
</code></pre><p>é…ç½®å‰å…ˆåˆ›å»ºå‡ ä¸ªç›®å½•æ–‡ä»¶</p>
<pre><code>mkdir /data/es-data -p
mkdir /data/es-work -p
</code></pre><p>Elasticsearchå®‰è£…å®Œæˆä¹‹åï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code>sudo vim /etc/elasticsearch/elasticsearch.yml

 node.data: true  # æ•°æ®å­˜æ”¾true
</code></pre><p>æ‰¾åˆ°cluster.nameä¸€è¡Œï¼Œå–æ¶ˆè¿™ä¸€è¡Œçš„æ³¨é‡Šï¼Œå¹¶æŠŠå€¼æ”¹ä¸ºgraylog-developmentï¼š</p>
<pre><code>cluster.name: graylog-development


 path.data: /data/es-data     esæ•°æ®å­˜æ”¾ç›®å½•  è¿™é‡Œéœ€è¦è‡ªå·±æ–°å»ºç›®å½•

 path.work: /data/es-work   
</code></pre><p>ä½ ä¹Ÿè®¸æƒ³è¦é™åˆ¶å¤–éƒ¨è®¿é—®Elasticsearchï¼ˆç«¯å£9200ï¼‰ï¼Œè¿™æ ·å¯ä»¥æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚æ‰¾åˆ°network.hostä¸€è¡Œï¼Œå–æ¶ˆæ³¨é‡Šï¼Œå¹¶æŠŠå€¼æ”¹ä¸ºlocalhostï¼š</p>
<pre><code>network.host: 192.168.1.234
</code></pre><p>ä¿å­˜é€€å‡ºæ–‡ä»¶ã€‚</p>
<p>é‡å¯Elasticsearchï¼š</p>
<pre><code>$ service elasticsearch start
</code></pre><p>è®¾ç½®å¼€æœºå¯åŠ¨ï¼š</p>
<pre><code>$ chkconfig --add elasticsearch
</code></pre><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æµ‹è¯•Elasticsearchæ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</p>
<pre><code>$ curl -XGET &apos;http://localhost:9200/_cluster/health?pretty=true&apos;
</code></pre><p>è¾“å‡ºçš„ä¿¡æ¯å¦‚ä¸‹è¡¨ç¤ºElasticsearchå®‰è£…æˆåŠŸï¼š</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">drwxr-xr-x. <span class="number">2</span> root   root  <span class="number">4096</span> <span class="number">9</span>æœˆ  <span class="number">23</span> <span class="number">2011</span> src</div><div class="line">[root<span class="symbol">@ELK</span> <span class="keyword">local</span>]<span class="meta">#  curl -XGET <span class="string">'http://192.168.1.234:9200/_cluster/health?pretty=true'</span></span></div><div class="line">&#123;</div><div class="line">  <span class="string">"cluster_name"</span> : <span class="string">"graylog-development"</span>,</div><div class="line">  <span class="string">"status"</span> : <span class="string">"yellow"</span>,</div><div class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</div><div class="line">  <span class="string">"number_of_nodes"</span> : <span class="number">1</span>,</div><div class="line">  <span class="string">"number_of_data_nodes"</span> : <span class="number">1</span>,</div><div class="line">  <span class="string">"active_primary_shards"</span> : <span class="number">37</span>,</div><div class="line">  <span class="string">"active_shards"</span> : <span class="number">37</span>,</div><div class="line">  <span class="string">"relocating_shards"</span> : <span class="number">0</span>,</div><div class="line">  <span class="string">"initializing_shards"</span> : <span class="number">0</span>,</div><div class="line">  <span class="string">"unassigned_shards"</span> : <span class="number">37</span>,</div><div class="line">  <span class="string">"delayed_unassigned_shards"</span> : <span class="number">0</span>,</div><div class="line">  <span class="string">"number_of_pending_tasks"</span> : <span class="number">0</span>,</div><div class="line">  <span class="string">"number_of_in_flight_fetch"</span> : <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®‰è£…Graylag</p>
<p>Graylogçš„æœ€æ–°ç‰ˆæ˜¯1.1.4ï¼Œä¸‹è½½é“¾æ¥å¦‚ä¸‹ï¼š<br><a href="https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-server-1.1.4-1.noarch.rpm" target="_blank" rel="external">https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-server-1.1.4-1.noarch.rpm</a><br><a href="https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-web-1.1.4-1.noarch.rpm" target="_blank" rel="external">https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-web-1.1.4-1.noarch.rpm</a></p>
<p>ç°åœ¨Graylogçš„æ‰€æœ‰ä¾èµ–è½¯ä»¶å®‰è£…å®Œæˆï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬æ¥å®‰è£…graylog-serverã€‚</p>
<p>é¦–å…ˆï¼Œä¸‹è½½Graylog RPMè½¯ä»¶åŒ…ï¼š</p>
<pre><code>$ cd 
$ sudo rpm -Uvh https://packages.graylog2.org/repo/packages/graylog-1.3-repository-el7_latest.rpm
</code></pre><p>å®‰è£…graylog-serverï¼š</p>
<pre><code>yum -y install graylog-server
</code></pre><p>å®‰è£…pwgenï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒç”Ÿæˆéšæœºå¯†ç ï¼š</p>
<pre><code>yum -y install epel-release
yum -y install pwgen
</code></pre><p>ç°åœ¨æˆ‘ä»¬æ¥è®¾ç½®Graylogç®¡ç†å‘˜çš„å¯†é’¥ã€‚é…ç½®æ–‡ä»¶ä½äº/etc/graylog/server/server.confç›®å½•ï¼Œéœ€è¦ä¿®æ”¹password_secretå‚æ•°ï¼š</p>
<pre><code>$ SECRET=$(pwgen -s 96 1)
$ sudo -E sed -i -e &apos;s/password_secret =.*/password_secret = &apos;$SECRET&apos;/&apos; /etc/graylog/server/server.conf
</code></pre><p>æ‰§è¡Œå®Œä¸Šé¢å‘½ä»¤ä¹‹åï¼Œpassword_secretå‚æ•°çš„æ ·å­ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog6.png" alt=""></figure></p>
<p>è¿™ä¸€æ­¥ï¼Œè®¾ç½®ç®¡ç†å‘˜å¯†ç ã€‚ç”±äºå¯†ç ä½¿ç”¨shaå“ˆå¸Œç®—æ³•ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ˜æ–‡å¯†ç è½¬æ¢ä¸ºhashï¼Œç„¶åèµ‹å€¼ç»™root_password_sha2å‚æ•°ã€‚ä¾‹å¦‚ï¼Œæˆ‘è¦è®¾ç½®çš„ç®¡ç†å‘˜å¯†ç æ˜¯ Ihaozhuo_b313ï¼Œå®ƒå¯¹åº”çš„hashä¸ºï¼š</p>
<pre><code>$ echo -n Ihaozhuo_b313 | sha256sum | awk &apos;{print $1}&apos;
</code></pre><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog7.png" alt=""></figure></p>
<p>ç¼–è¾‘/etc/graylog/server/server.confï¼Œè®¾ç½®root_password_sha2å‚æ•°ï¼š</p>
<pre><code>$ sudo vim /etc/graylog/server/server.conf
</code></pre><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog8.png" alt=""></figure></p>
<p>ç°åœ¨Graylogç®¡ç†å‘˜å¯†ç ä¸ºIhaozhuo_b313ã€‚</p>
<p>é…ç½®rest_transport_uriå‚æ•°ï¼Œè®¾ç½®Graylog webæ¥å£å’ŒæœåŠ¡å™¨çš„æ²Ÿé€šæ–¹å¼ã€‚ç”±äºæˆ‘ä»¬æŠŠæ‰€æœ‰ç»„ä»¶éƒ½å®‰è£…åˆ°äº†å•ç‹¬çš„ä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œéœ€è¦æŠŠå€¼è®¾ç½®ä¸º<strong>127.0.0.1</strong> æˆ– <strong>localhost</strong>ã€‚æ‰¾åˆ°rest_transport_uriä¸€è¡Œï¼Œå–æ¶ˆæ³¨é‡Šï¼Œå¹¶æŠŠå€¼è®¾ç½®ä¸ºï¼š</p>
<pre><code>rest_transport_uri = http://192.168.1.234:12900/
</code></pre><p>ç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªElasticsearch shardï¼Œéœ€è¦æŠŠelasticsearch_shardså‚æ•°è®¾ç½®ä¸º1ï¼š</p>
<pre><code>elasticsearch_shards = 1
</code></pre><p>æ›´æ”¹elasticsearch_cluster_nameå‚æ•°ï¼Œåº”è¯¥å’Œå‰é¢Elasticsearchçš„<strong>cluster.name</strong>å‚æ•°ç›¸å¯¹åº”ï¼š</p>
<pre><code>elasticsearch_cluster_name = graylog-development
</code></pre><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog9.png" alt=""></figure></p>
<p>å–æ¶ˆä¸‹é¢ä¸¤è¡Œçš„æ³¨é‡Šï¼Œæ£€æµ‹Elasticsearchï¼š</p>
<pre><code>172 elasticsearch_discovery_zen_ping_multicast_enabled = false
173 elasticsearch_discovery_zen_ping_unicast_hosts = 192.168.1.234:9300
</code></pre><p>å¯åŠ¨graylog-serverï¼š</p>
<pre><code>/etc/init.d/graylog-web restart
</code></pre><h3 id="å®‰è£…Graylog-Web"><a href="#å®‰è£…Graylog-Web" class="headerlink" title="å®‰è£…Graylog Web"></a>å®‰è£…Graylog Web</h3><p>å®‰è£…Graylog Webï¼š</p>
<pre><code>$ sudo yum -y install graylog-web
</code></pre><p>å®‰è£…å®Œæˆä¹‹åé…ç½®Graylog Webçš„å¯†é’¥ï¼Œé…ç½®æ–‡ä»¶ä½äº/etc/graylog/web/web.confï¼Œæ›´æ”¹application.secretå‚æ•°ï¼š</p>
<pre><code>$ SECRET=$(pwgen -s 96 1)
$ sudo -E sed -i -e &apos;s/application\.secret=&quot;&quot;/application\.secret=&quot;&apos;$SECRET&apos;&quot;/&apos; /etc/graylog/web/web.conf
</code></pre><p>é…ç½®graylog2-server.uriså‚æ•°ï¼Œå®ƒçš„å€¼åº”è¯¥å’ŒGraylogçš„rest_listen_uriå‚æ•°ç›¸å¯¹åº”ï¼š</p>
<pre><code>$ sudo vim /etc/graylog/web/web.conf

graylog2-server.uris=&quot;http://127.0.0.1:12900/&quot;
</code></pre><p>é‡å¯graylog-webï¼š</p>
<pre><code>/etc/init.d/graylog-web restart
</code></pre><h3 id="é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—"><a href="#é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—" class="headerlink" title="é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—"></a>é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—</h3><h4 id="ç™»å½•Graylog-Web"><a href="#ç™»å½•Graylog-Web" class="headerlink" title="ç™»å½•Graylog Web"></a>ç™»å½•Graylog Web</h4><p>ä½¿ç”¨æµè§ˆå™¨è®¿é—®GraylogæœåŠ¡å™¨çš„åŸŸåæˆ–IPï¼š<strong><a href="http://graylog_public_IP_domain:9000/" target="_blank" rel="external">http://graylog_public_IP_domain:9000/</a></strong>ã€‚</p>
<p>ä½ åº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ªç™»å½•ç•Œé¢ï¼Œä½¿ç”¨adminåšä¸ºç”¨æˆ·åå’Œå‰é¢è®¾ç½®çš„å¯†ç ç™»å½•ã€‚</p>
<p>ç™»å½•ä¹‹åï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog10.png" alt=""></figure></p>
<p>ä¸Šé¢çš„çº¢æ•°å­—1æ˜¯é€šçŸ¥ï¼ˆyou have a node without any running inputsï¼‰ï¼Œä¸‹é¢è®¾ç½®é€šè¿‡UDPæ¥æ”¶syslogã€‚</p>
<p>åˆ›å»ºsyslog UDPè¾“å…¥</p>
<p>æ·»åŠ è¦æ¥æ”¶çš„å…¶ä»–æœåŠ¡å™¨syslogæ—¥å¿—ï¼šSystem-&gt;Inputs-&gt;Syslog UDP-&gt;Launch new inputã€‚</p>
<p>åœ¨å¼¹å‡ºçš„çª—å£ä¸Šè¾“å…¥å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>Title: syslog</li>
<li>Port: 8514</li>
<li>Bind address: è¿™é‡Œå†™Graylog-serveræœåŠ¡å™¨ä¸»æœºIP</li>
</ul>
<p>ç‚¹å‡»Launch</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog11.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog12.png" alt=""></figure></p>
<p>å¦‚æœä½ éœ€è¦æ”¶é›†å¤šä¸ªæœåŠ¡å™¨çš„æ—¥å¿—ï¼Œé‡å¤ä¸Šé¢æ­¥éª¤ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„GraylogæœåŠ¡å™¨å·²ç»åšå¥½äº†æ¥æ”¶å…¶ä»–æœåŠ¡å™¨å‘æ¥æ—¥å¿—çš„å‡†å¤‡ã€‚ä¸‹é¢æˆ‘ä»¬è¿˜éœ€è¦é…ç½®å…¶ä»–æœåŠ¡å™¨ï¼Œè®©è¿™äº›æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€æ—¥å¿—ã€‚</p>
<h4 id="é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog"><a href="#é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog" class="headerlink" title="é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog"></a>é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog</h4><p>å‚è€ƒå®˜ç½‘ï¼š<a href="https://marketplace.graylog.org/addons/a47beb3b-0bd9-4792-a56a-33b27b567856" target="_blank" rel="external">ä»Linuxç³»ç»Ÿæ—¥å¿—å‘é€åˆ°Graylog</a></p>
<p>SSHç™»å½•â€œå…¶ä»–æœåŠ¡å™¨â€ï¼Œåˆ›å»ºrsyslogé…ç½®æ–‡ä»¶90-graylog.confï¼š</p>
<pre><code>sudo vim /etc/rsyslog.d/90-graylog.conf
</code></pre><p>æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ŒæŠŠ graylog_server_IP æ›¿æ¢ä¸ºGraylogæœåŠ¡å™¨ipåœ°å€ï¼š</p>
<pre><code>$template GRAYLOGRFC5424,&quot;&lt;%pri%&gt;%protocol-version% %timestamp:::date-rfc3339%    %HOSTNAME% %app-name% %procid% %msg%\n&quot;
*.* @graylog_server_IP:8514;GRAYLOGRFC5424
</code></pre><p>é‡å¯rsyslogæœåŠ¡ä½¿ç”Ÿæ•ˆï¼š</p>
<pre><code>/etc/init.d/rsyslog restart
</code></pre><p>é…ç½®å®Œæˆä¹‹åï¼Œå›åˆ°Graylog Webï¼Œç‚¹å‡»Sourcesï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰æ–°æ·»åŠ rsyslogã€‚</p>
<h4 id="Graylogä½¿ç”¨httpåè®®å‘é€ï¼š"><a href="#Graylogä½¿ç”¨httpåè®®å‘é€ï¼š" class="headerlink" title="Graylogä½¿ç”¨httpåè®®å‘é€ï¼š"></a>Graylogä½¿ç”¨httpåè®®å‘é€ï¼š</h4><p>æ·»åŠ è¦æ¥æ”¶çš„å…¶ä»–æœåŠ¡å™¨syslogæ—¥å¿—ï¼šSystem-&gt;Inputs-&gt;GELF HTTP-&gt;Launch new inputã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog14.png" alt=""></figure></p>
<p>ç„¶ååœ¨æœåŠ¡å™¨ä¸Šé¢å‘é€ä¸‹é¢å‘½ä»¤ã€‚</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog-development ~]</span># curl -XPOST http://<span class="number">192.168.1.234:12201</span>/gelf -p0 -d '&#123;<span class="string">"short_message"</span>:<span class="string">"Hello there"</span>, <span class="string">"host"</span>:<span class="string">"example.org"</span>, <span class="string">"facility"</span>:<span class="string">"test"</span>, <span class="string">"_foo"</span>:<span class="string">"bar"</span>&#125;'</div><div class="line"><span class="string">[root@graylog-development ~]</span># curl -XPOST http://<span class="number">192.168.1.234:12201</span>/gelf -p0 -d '&#123;<span class="string">"short_message"</span>:<span class="string">"æµ‹è¯•"</span>, <span class="string">"host"</span>:<span class="string">"example.org"</span>, <span class="string">"facility"</span>:<span class="string">"test"</span>, <span class="string">"_foo"</span>:<span class="string">"bar"</span>&#125;'</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå®šä¹‰192.168.1.234 æ˜¯graylog-serveræœåŠ¡å™¨åœ°å€ 12201 ç«¯å£æ˜¯ä¹‹å‰åˆ›å»ºå¥½çš„ã€‚</p>
<h3 id="æœç´ Graylog"><a href="#æœç´ Graylog" class="headerlink" title="æœç´ Graylog"></a>æœç´ Graylog</h3><p>å‡å¦‚ä½ è¦æœç´¢helloï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog13.png" alt=""></figure></p>
<p>ä¸Šé¢å®‰è£…é…ç½®äº†åŸºæœ¬çš„GraylogæœåŠ¡å™¨ã€‚</p>
<h3 id="æ—¶åŒºå’Œé«˜äº®è®¾ç½®"><a href="#æ—¶åŒºå’Œé«˜äº®è®¾ç½®" class="headerlink" title="æ—¶åŒºå’Œé«˜äº®è®¾ç½®"></a>æ—¶åŒºå’Œé«˜äº®è®¾ç½®</h3><p>adminå¸å·çš„æ—¶åŒºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">vi</span> <span class="string">/etc/graylog/server/server.conf</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="number">30</span> <span class="string">root_timezone</span> <span class="string">=</span> <span class="string">Asia/Shanghai</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">/etc/init.d/graylog-server</span> <span class="string">restart</span></div></pre></td></tr></table></figure>
<p>å…¶ä»–å¸å·çš„é»˜è®¤æ—¶åŒºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">vi</span> <span class="string">/etc/graylog/web/web.conf</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="number">18</span> <span class="string">timezone="Asia/Shanghai"</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">/etc/init.d/graylog-web</span> <span class="string">restart</span></div></pre></td></tr></table></figure>
<p>å…è®¸æŸ¥è¯¢ç»“æœé«˜äº®ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">vi</span> <span class="string">/etc/graylog/server/server.conf</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="number">147</span> <span class="string">allow_highlighting</span> <span class="string">=</span> <span class="literal">true</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">/etc/init.d/graylog-server</span> <span class="string">restart</span></div></pre></td></tr></table></figure>
<h3 id="ç§»åŠ¨æ•°æ®ç›®å½•"><a href="#ç§»åŠ¨æ•°æ®ç›®å½•" class="headerlink" title="ç§»åŠ¨æ•°æ®ç›®å½•"></a>ç§»åŠ¨æ•°æ®ç›®å½•</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ç§»åŠ¨elasticsearchçš„æ•°æ®ç›®å½•</div><div class="line">[root@graylog ~]<span class="comment"># sudo /etc/init.d/elasticsearch stop</span></div><div class="line">[root@graylog ~]<span class="comment"># sudo cp -rp /var/lib/elasticsearch/ /data/</span></div><div class="line">[root@graylog ~]<span class="comment"># sudo vi /etc/sysconfig/elasticsearch</span></div><div class="line">+<span class="number">16</span> DATA_DIR=/data/elasticsearch</div><div class="line">[root@graylog ~]<span class="comment"># sudo /etc/init.d/elasticsearch start</span></div><div class="line"></div><div class="line">ç§»åŠ¨mongoçš„æ•°æ®ç›®å½•</div><div class="line">[root@graylog ~]<span class="comment"># sudo /etc/init.d/mongod stop</span></div><div class="line">[root@graylog ~]<span class="comment"># sudo cp -rp /var/lib/mongo /data/</span></div><div class="line">[root@graylog ~]<span class="comment"># sudo vi /etc/mongod.conf</span></div><div class="line">---</div><div class="line"><span class="number">13</span> dbpath=/<span class="keyword">var</span>/lib/mongo<span class="function"></span></div><div class="line">-&gt;</div><div class="line"><span class="number">13</span> dbpath=/data/mongo</div><div class="line">---</div><div class="line">[mtagent@access2 ~]$ sudo /etc/init.d/mongod start</div></pre></td></tr></table></figure>
<h4 id="å…¶ä½™å‚è€ƒæ–‡æ¡£"><a href="#å…¶ä½™å‚è€ƒæ–‡æ¡£" class="headerlink" title="å…¶ä½™å‚è€ƒæ–‡æ¡£"></a>å…¶ä½™å‚è€ƒæ–‡æ¡£</h4><p><a href="http://docs.graylog.org/en/1.3/" target="_blank" rel="external">å‚è€ƒå®˜ç½‘</a></p>
<p><a href="http://blog.topspeedsnail.com/archives/4066" target="_blank" rel="external">Centos7 æ­å»ºgraylog</a></p>
<p><a href="https://my.oschina.net/fitnessefan/blog/464351?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">Graylogâ€”â€”æ—¥å¿—èšåˆå·¥å…·ä¸­çš„åèµ·ä¹‹ç§€</a></p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/11/10/è¿ç»´ç¬”è®°/å¦‚ä½•è§£å†³æŠ½å¥–çš„æ€§èƒ½é—®é¢˜å’Œç§’æ€çš„è®¨è®º  /">å¦‚ä½•è§£å†³ç§’æ€çš„æ€§èƒ½é—®é¢˜å’Œå¾®ä¿¡æ¨å¹¿æ´»åŠ¨çš„è®¨è®º</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-11-10</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/è¿ç»´ç¬”è®°/">è¿ç»´ç¬”è®°</a>
			</span><br />
		
		
	</div>

	

	
		<p>æœ€è¿‘ä¸šåŠ¡è¯•æ°´å¾®ä¿¡æŠ½å¥–æ´»åŠ¨ï¼Œå…¬å¸ç°åœ¨æ‰“ç®—æ¨å¹¿ä¸‹äº§å“ã€‚å¢åŠ äº›ç²‰ä¸é‡ ä¹‹å‰ç»å¸¸çœ‹åˆ°æ·˜å®çš„åŒè¡Œä»¬è®¨è®ºç§’æ€ï¼Œè®¨è®ºç”µå•†ï¼Œè¿™æ¬¡ç»ˆäºè½®åˆ°æˆ‘ä»¬è‡ªå·±ç†è®ºç»“åˆå®é™…ä¸€æ¬¡äº†ã€‚</p>
<p>psï¼šè¿›å…¥æ­£æ–‡å‰å…ˆè¯´ä¸€ç‚¹ä¸ªäººæ„Ÿå—ï¼Œä¹‹å‰çœ‹æ·˜å®çš„pptæ„Ÿè§‰éƒ½æ‡‚äº†ï¼Œç­‰åˆ°è‡ªå·±å‡ºè§£å†³æ–¹æ¡ˆçš„æ—¶å€™å‘ç°è¿˜æ˜¯æœ‰å¾ˆå¤šæƒ³ä¸åˆ°çš„åœ°æ–¹å…¶å®éƒ½æ²¡æ‡‚ï¼Œå†æ¬¡éªŒè¯äº†â€œç»†èŠ‚æ˜¯é­”é¬¼â€çš„ç†è®ºã€‚å¹¶ä¸”ä¸€ä¸ªäººçš„èƒ½åŠ›æœ‰é™ï¼Œåªæœ‰å¤§å®¶ä¸€èµ·è®¨è®ºæ‰èƒ½æƒ³çš„æ›´å‘¨å…¨ï¼Œæ›´ç»†è‡´ã€‚å¥½äº†ï¼Œé—²è¯å°‘è¯´ï¼Œä¸‹é¢è¿›å…¥æ­£æ–‡ã€‚</p>
<h4 id="ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ</h4><p>å¾®ä¿¡ç§¯åˆ†å…‘æ¢ç°é‡‘æˆ–æŠ¢è´­æŠ½å¥–æ´»åŠ¨ä¸€èˆ¬ä¼šç»è¿‡ã€å…³æ³¨å…¬ä¼—å·ã€‘ã€åˆ†äº«æ´»åŠ¨è·å¾—ç§¯åˆ†ã€‘ã€ç§¯åˆ†å…‘æ¢ã€‘ã€æŠ½å¥–å®‰å…¨ç¯èŠ‚ã€‘è¿™3ä¸ªå¤§ç¯èŠ‚ï¼Œè€Œå…¶ä¸­ã€æŠ¢è®¢å•ã€‘è¿™ä¸ªç¯èŠ‚æ˜¯æœ€è€ƒéªŒä¸šåŠ¡æä¾›æ–¹çš„æŠ—å‹èƒ½åŠ›çš„ã€‚</p>
<p>ç§¯åˆ†å…‘æ¢ç¯èŠ‚ä¸€èˆ¬ä¼šå¸¦æ¥2ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>1ã€é«˜å¹¶å‘</li>
</ul>
<p>ã€€ã€€æ¯”è¾ƒç«çƒ­çš„æŠ½å¥–åœ¨çº¿äººæ•°éƒ½æ˜¯20wèµ·çš„ï¼Œå¦‚æ­¤ä¹‹é«˜çš„åœ¨çº¿äººæ•°å¯¹äºç½‘ç«™æ¶æ„ä»å‰åˆ°åéƒ½æ˜¯ä¸€ç§è€ƒéªŒã€‚</p>
<ul>
<li>2ã€æŠ½å¥–äººå‘˜è¿‡å¤š</li>
<li>3ã€ æŠ¢è®¢å•</li>
</ul>
<p>ã€€ã€€ä»»ä½•å•†å“éƒ½ä¼šæœ‰æ•°é‡ä¸Šé™ï¼Œå¦‚ä½•é¿å…æˆåŠŸä¸‹è®¢å•ä¹°åˆ°å•†å“çš„äººæ•°ä¸è¶…è¿‡å•†å“æ•°é‡çš„ä¸Šé™ï¼Œè¿™æ˜¯æ¯ä¸ªæŠ¢è´­æ´»åŠ¨éƒ½è¦é¢ä¸´çš„éš¾é¢˜ã€‚</p>
<h4 id="äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ"><a href="#äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ"></a>äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ</h4><p>é¦–å…ˆï¼Œäº§å“è§£å†³æ–¹æ¡ˆæˆ‘ä»¬å°±ä¸äºˆè®¨è®ºäº†ã€‚æˆ‘ä»¬åªè®¨è®ºæŠ€æœ¯è§£å†³æ–¹æ¡ˆ</p>
<p><strong>1ã€å‰ç«¯æ¶æ„</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">é¢å¯¹é«˜å¹¶å‘çš„æŠ¢è´­æ´»åŠ¨ï¼Œå‰ç«¯å¸¸ç”¨çš„ä¸‰æ¿æ–§æ˜¯ã€æ‰©å®¹ã€‘ã€é™æ€åŒ–ã€‘ã€é™æµã€‘</div><div class="line"></div><div class="line">ã€€ã€€Aï¼šæ‰©å®¹</div><div class="line">ã€€ã€€</div><div class="line">ã€€åŠ æœºå™¨ï¼Œè¿™æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œé€šè¿‡å¢åŠ å‰ç«¯æ± çš„æ•´ä½“æ‰¿è½½é‡æ¥æŠ—å³°å€¼ã€‚ </div><div class="line">ã€€è¿™é‡Œæˆ‘ä»¬éƒ½æ˜¯å¤šå°ä¸»ä»é›†ç¾¤å»è·‘ã€‚</div><div class="line"></div><div class="line">ã€€ã€€Bï¼šé™æ€åŒ–</div><div class="line"></div><div class="line">ã€€ã€€å°†æ´»åŠ¨é¡µé¢ä¸Šçš„æ‰€æœ‰å¯ä»¥é™æ€çš„å…ƒç´ å…¨éƒ¨é™æ€åŒ–ï¼Œå¹¶å°½é‡å‡å°‘åŠ¨æ€å…ƒç´ ã€‚é€šè¿‡CDNæ¥æŠ—å³°å€¼ã€‚</div><div class="line">ã€€ã€€è¿™é‡Œæˆ‘ä»¬éƒ½æ˜¯æŠŠå›¾ç‰‡é™æ€æ”¾åœ¨åˆæ‹äº‘å’Œé˜¿é‡Œäº‘ä¸Šé¢ã€‚</div><div class="line">ã€€</div><div class="line">ã€€ã€€Cï¼šé™æµ</div><div class="line"></div><div class="line">ã€€ã€€ä¸€èˆ¬éƒ½ä¼šé‡‡ç”¨IPçº§åˆ«çš„é™æµï¼Œå³é’ˆå¯¹æŸä¸€ä¸ªIPï¼Œé™åˆ¶å•ä½æ—¶é—´å†…å‘èµ·è¯·æ±‚æ•°é‡ã€‚</div><div class="line">ã€€ã€€æˆ–è€…æ´»åŠ¨å…¥å£çš„æ—¶å€™å¢åŠ æ¸¸æˆæˆ–è€…é—®é¢˜ç¯èŠ‚è¿›è¡Œæ¶ˆå³°æ“ä½œã€‚</div><div class="line">ã€€ã€€æˆ‘ä»¬é‡‡ç”¨Nginxå‰é¢åšäº†åå‘ä»£ç†åé¢ä¼˜åŒ–nginxã€‚</div><div class="line">ã€€ã€€</div><div class="line">ã€€ã€€Dï¼šæœ‰æŸæœåŠ¡</div><div class="line"></div><div class="line">ã€€ã€€æœ€åä¸€æ‹›ï¼Œåœ¨æ¥è¿‘å‰ç«¯æ± æ‰¿è½½èƒ½åŠ›çš„æ°´ä½ä¸Šé™çš„æ—¶å€™ï¼Œéšæœºæ‹’ç»éƒ¨åˆ†è¯·æ±‚æ¥ä¿æŠ¤æ´»åŠ¨æ•´ä½“çš„å¯ç”¨æ€§ã€‚</div></pre></td></tr></table></figure>
<p><strong>2ã€åç«¯æ¶æ„</strong></p>
<p>é‚£ä¹ˆåç«¯çš„æ•°æ®åº“åœ¨é«˜å¹¶å‘å’Œè¶…å–ä¸‹ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿä¸»è¦ä¼šæœ‰å¦‚ä¸‹3ä¸ªé—®é¢˜ï¼šï¼ˆä¸»è¦è®¨è®ºå†™çš„é—®é¢˜ï¼Œè¯»çš„é—®é¢˜é€šè¿‡å¢åŠ cacheå¯ä»¥å¾ˆå®¹æ˜“çš„è§£å†³ï¼‰</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ã€€ã€€Iï¼šã€€é¦–å…ˆMySQLè‡ªèº«å¯¹äºé«˜å¹¶å‘çš„å¤„ç†æ€§èƒ½å°±ä¼šå‡ºç°é—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒMySQLçš„å¤„ç†æ€§èƒ½ä¼šéšç€å¹¶å‘threadä¸Šå‡è€Œä¸Šå‡ï¼Œä½†æ˜¯åˆ°äº†ä¸€å®šçš„å¹¶å‘åº¦ä¹‹åä¼šå‡ºç°æ˜æ˜¾çš„æ‹ç‚¹ï¼Œä¹‹åä¸€è·¯ä¸‹é™ï¼Œæœ€ç»ˆç”šè‡³ä¼šæ¯”å•threadçš„æ€§èƒ½è¿˜è¦å·®ã€‚</div><div class="line"></div><div class="line">ã€€ã€€IIï¼š å…¶æ¬¡ï¼Œè¶…å–çš„æ ¹ç»“åœ¨äºå‡åº“å­˜æ“ä½œæ˜¯ä¸€ä¸ªäº‹åŠ¡æ“ä½œï¼Œéœ€è¦å…ˆ<span class="keyword">select</span>ï¼Œç„¶å<span class="keyword">insert</span>ï¼Œæœ€å<span class="keyword">update</span> <span class="number">-1</span>ã€‚æœ€åè¿™ä¸ª<span class="number">-1</span>æ“ä½œæ˜¯ä¸èƒ½å‡ºç°è´Ÿæ•°çš„ï¼Œä½†æ˜¯å½“å¤šç”¨æˆ·åœ¨æœ‰åº“å­˜çš„æƒ…å†µä¸‹å¹¶å‘æ“ä½œï¼Œå‡ºç°è´Ÿæ•°è¿™æ˜¯æ— æ³•é¿å…çš„ã€‚</div><div class="line"></div><div class="line">ã€€ã€€IIIï¼šæœ€åï¼Œå½“å‡åº“å­˜å’Œé«˜å¹¶å‘ç¢°åˆ°ä¸€èµ·çš„æ—¶å€™ï¼Œç”±äºæ“ä½œçš„åº“å­˜æ•°ç›®åœ¨åŒä¸€è¡Œï¼Œå°±ä¼šå‡ºç°äº‰æŠ¢<span class="keyword">InnoDB</span>è¡Œé”çš„é—®é¢˜ï¼Œå¯¼è‡´å‡ºç°äº’ç›¸ç­‰å¾…ç”šè‡³æ­»é”ï¼Œä»è€Œå¤§å¤§é™ä½MySQLçš„å¤„ç†æ€§èƒ½ï¼Œæœ€ç»ˆå¯¼è‡´å‰ç«¯é¡µé¢å‡ºç°è¶…æ—¶å¼‚å¸¸ã€‚</div><div class="line">ã€€ã€€</div><div class="line">ã€€ã€€è¿™ä¸ªæœ‰é‡åˆ°è¿‡çš„ï¼Œå°±æ˜¯é”è¡¨å¯¼è‡´è®¿é—®å‡ºç°ç½‘ç»œå¼‚å¸¸ã€‚</div></pre></td></tr></table></figure>
<p>é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ æˆ‘ä»¬å…ˆçœ‹çœ¼æ·˜å®çš„é«˜å¤§ä¸Šè§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Iï¼šå…³é—­æ­»é”æ£€æµ‹ï¼Œæé«˜å¹¶å‘å¤„ç†æ€§èƒ½ã€‚</div><div class="line">IIï¼šä¿®æ”¹æºä»£ç ï¼Œå°†æ’é˜Ÿæåˆ°è¿›å…¥å¼•æ“å±‚å‰ï¼Œé™ä½å¼•æ“å±‚é¢çš„å¹¶å‘åº¦ã€‚</div><div class="line">IIIï¼šç»„æäº¤ï¼Œé™ä½<span class="keyword">server</span>å’Œå¼•æ“çš„äº¤äº’æ¬¡æ•°ï¼Œé™ä½IOæ¶ˆè€—ã€‚</div></pre></td></tr></table></figure>
<h3 id="è§£å†³æ–¹æ¡ˆ1ï¼š"><a href="#è§£å†³æ–¹æ¡ˆ1ï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆ1ï¼š"></a>è§£å†³æ–¹æ¡ˆ1ï¼š</h3><p>å°†å­˜åº“ä»MySQLå‰ç§»åˆ°Redisä¸­ï¼Œæ‰€æœ‰çš„å†™æ“ä½œæ”¾åˆ°å†…å­˜ä¸­ï¼Œç”±äºRedisä¸­ä¸å­˜åœ¨é”æ•…ä¸ä¼šå‡ºç°äº’ç›¸ç­‰å¾…ï¼Œå¹¶ä¸”ç”±äºRedisçš„å†™æ€§èƒ½å’Œè¯»æ€§èƒ½éƒ½è¿œé«˜äºMySQLï¼Œè¿™å°±è§£å†³äº†é«˜å¹¶å‘ä¸‹çš„æ€§èƒ½é—®é¢˜ã€‚ç„¶åé€šè¿‡é˜Ÿåˆ—ç­‰å¼‚æ­¥æ‰‹æ®µï¼Œå°†å˜åŒ–çš„æ•°æ®å¼‚æ­¥å†™å…¥åˆ°DBä¸­ã€‚</p>
<p>ä¼˜ç‚¹ï¼šè§£å†³æ€§èƒ½é—®é¢˜<br>ç¼ºç‚¹ï¼šæ²¡æœ‰è§£å†³è¶…å–é—®é¢˜ï¼ŒåŒæ—¶ç”±äºå¼‚æ­¥å†™å…¥DBï¼Œå­˜åœ¨æŸä¸€æ—¶åˆ»DBå’ŒRedisä¸­æ•°æ®ä¸ä¸€è‡´çš„é£é™©ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ2ï¼š"><a href="#è§£å†³æ–¹æ¡ˆ2ï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆ2ï¼š"></a>è§£å†³æ–¹æ¡ˆ2ï¼š</h3><p>å¼•å…¥é˜Ÿåˆ—ï¼Œç„¶åå°†æ‰€æœ‰å†™DBæ“ä½œåœ¨å•é˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Œå®Œå…¨ä¸²è¡Œå¤„ç†ã€‚å½“è¾¾åˆ°åº“å­˜é˜€å€¼çš„æ—¶å€™å°±ä¸åœ¨æ¶ˆè´¹é˜Ÿåˆ—ï¼Œå¹¶å…³é—­è´­ä¹°åŠŸèƒ½ã€‚è¿™å°±è§£å†³äº†è¶…å–é—®é¢˜ã€‚</p>
<p>ä¼˜ç‚¹ï¼šè§£å†³è¶…å–é—®é¢˜ï¼Œç•¥å¾®æå‡æ€§èƒ½ã€‚<br>ç¼ºç‚¹ï¼šæ€§èƒ½å—é™äºé˜Ÿåˆ—å¤„ç†æœºå¤„ç†æ€§èƒ½å’ŒDBçš„å†™å…¥æ€§èƒ½ä¸­æœ€çŸ­çš„é‚£ä¸ªï¼Œå¦å¤–å¤šå•†å“åŒæ—¶æŠ¢è´­çš„æ—¶å€™éœ€è¦å‡†å¤‡å¤šæ¡é˜Ÿåˆ—ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ3ï¼š"><a href="#è§£å†³æ–¹æ¡ˆ3ï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆ3ï¼š"></a>è§£å†³æ–¹æ¡ˆ3ï¼š</h3><p>å°†å†™æ“ä½œå‰ç§»åˆ°MCä¸­ï¼ŒåŒæ—¶åˆ©ç”¨MCçš„è½»é‡çº§çš„é”æœºåˆ¶CASæ¥å®ç°å‡åº“å­˜æ“ä½œã€‚<br>ä¼˜ç‚¹ï¼šè¯»å†™åœ¨å†…å­˜ä¸­ï¼Œæ“ä½œæ€§èƒ½å¿«ï¼Œå¼•å…¥è½»é‡çº§é”ä¹‹åå¯ä»¥ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªå†™å…¥æˆåŠŸï¼Œè§£å†³å‡åº“å­˜é—®é¢˜ã€‚<br>ç¼ºç‚¹ï¼šæ²¡æœ‰å®æµ‹ï¼ŒåŸºäºCASçš„ç‰¹æ€§ä¸çŸ¥é“é«˜å¹¶å‘ä¸‹æ˜¯å¦ä¼šå‡ºç°å¤§é‡æ›´æ–°å¤±è´¥ï¼Ÿä¸è¿‡åŠ é”ä¹‹åè‚¯å®šå¯¹å¹¶å‘æ€§èƒ½ä¼šæœ‰å½±å“ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ4ï¼š"><a href="#è§£å†³æ–¹æ¡ˆ4ï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆ4ï¼š"></a>è§£å†³æ–¹æ¡ˆ4ï¼š</h3><p>å°†æäº¤æ“ä½œå˜æˆä¸¤æ®µå¼ï¼Œå…ˆç”³è¯·åç¡®è®¤ã€‚ç„¶ååˆ©ç”¨Redisçš„åŸå­è‡ªå¢æ“ä½œï¼ˆç›¸æ¯”è¾ƒMySQLçš„è‡ªå¢æ¥è¯´æ²¡æœ‰ç©ºæ´ï¼‰ï¼ŒåŒæ—¶åˆ©ç”¨Redisçš„äº‹åŠ¡ç‰¹æ€§æ¥å‘å·ï¼Œä¿è¯æ‹¿åˆ°å°äºç­‰äºåº“å­˜é˜€å€¼çš„å·çš„äººéƒ½å¯ä»¥æˆåŠŸæäº¤è®¢å•ã€‚ç„¶åæ•°æ®å¼‚æ­¥æ›´æ–°åˆ°DBä¸­ã€‚</p>
<p>ä¼˜ç‚¹ï¼šè§£å†³è¶…å–é—®é¢˜ï¼Œåº“å­˜è¯»å†™éƒ½åœ¨å†…å­˜ä¸­ï¼Œæ•…åŒæ—¶è§£å†³æ€§èƒ½é—®é¢˜ã€‚<br>ç¼ºç‚¹ï¼šç”±äºå¼‚æ­¥å†™å…¥DBï¼Œå¯èƒ½å­˜åœ¨æ•°æ®ä¸ä¸€è‡´ã€‚å¦å¯èƒ½å­˜åœ¨å°‘ä¹°ï¼Œä¹Ÿå°±æ˜¯å¦‚æœæ‹¿åˆ°å·çš„äººä¸çœŸæ­£ä¸‹è®¢å•ï¼Œå¯èƒ½åº“å­˜å‡ä¸º0ï¼Œä½†æ˜¯è®¢å•æ•°å¹¶æ²¡æœ‰è¾¾åˆ°åº“å­˜é˜€å€¼ã€‚</p>
<p> ä¸‰ã€æ€»ç»“</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>ã€å‰ç«¯ä¸‰æ¿æ–§ã€æ‰©å®¹ã€‘ã€é™æµã€‘ã€é™æ€åŒ–ã€‘</div><div class="line"><span class="number">2</span>ã€åç«¯ä¸¤æ¡è·¯ã€å†…å­˜ã€‘+ã€æ’é˜Ÿã€‘</div></pre></td></tr></table></figure>
<h4 id="æµ‹è¯•æ€»ç»“ç»éªŒ"><a href="#æµ‹è¯•æ€»ç»“ç»éªŒ" class="headerlink" title="æµ‹è¯•æ€»ç»“ç»éªŒ"></a>æµ‹è¯•æ€»ç»“ç»éªŒ</h4><p>ç¬¬ä¸€æ¬¡åšæŠ½å¥–æ´»åŠ¨ï¼Œæµ‹è¯•é‚£è¾¹æµ‹è¯•å‡ºå¾ˆå¤šé—®é¢˜ã€‚ ä¸‹é¢æ˜¯é‡åˆ°çš„é—®é¢˜ã€‚</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">æµ‹è¯•ç¬¬ä¸€æ¬¡: è®¿é—®å‹æµ‹å‡ºç°äº†è®¿é—®ç™½å±ã€‚å®šä½ï¼šä»£ç å†™çš„æœ‰é—®é¢˜ã€‚ tomcatéœ€è¦åšä¼˜åŒ–ã€‚ æˆ‘ä»¬ä¸€èˆ¬ç”¨æˆ·é‡ç²‰ä¸åœ¨100W</div><div class="line"></div><div class="line">æµ‹è¯•ç¬¬äºŒæ¬¡ï¼š å‡ºç°æ•°æ®åº“<span class="meta">CPU</span>ç“¶é¢ˆè¿‡é«˜ã€‚ä¸»ä»åŒæ­¥ï¼Œç„¶ååšäº†æ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼Œ redisé›†ç¾¤ç¼“å­˜ã€‚ æœ€ä¸»è¦æ˜¯æ•°æ®åº“SQLè¯­å¥åšäº†ä¼˜åŒ–ã€‚ä¼˜åŒ–äº†æå‡äº†å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚</div><div class="line"></div><div class="line">æµ‹è¯•ç¬¬ä¸‰æ¬¡ï¼šè¿˜æœ‰å‡ºç°äº†<span class="number">503</span>è®¿é—®å—é™äº†ã€‚ åé¢åšäº†nginxä»£ç† é˜²æ­¢åŒä¸€ä¸ª<span class="built_in">IP</span>åŒä¸€ä¸ªæ—¶é—´è¶…è¿‡å¤šå°‘æ¬¡å»è¯·æ±‚ï¼Œä¼šè¢«å—é™ã€‚ ä¸è¿‡è¿™ä¸ªåšDDOSæ”»å‡» æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†å½±å“ç”¨æˆ·åä½“éªŒåº¦ã€‚</div></pre></td></tr></table></figure>
<h4 id="å››ã€éæŠ€æœ¯æ„Ÿæƒ³"><a href="#å››ã€éæŠ€æœ¯æ„Ÿæƒ³" class="headerlink" title="å››ã€éæŠ€æœ¯æ„Ÿæƒ³"></a>å››ã€éæŠ€æœ¯æ„Ÿæƒ³</h4><p>1ã€å›¢é˜Ÿçš„åŠ›é‡æ˜¯æ— ç©·çš„ï¼Œå„ç§å„æ ·çš„è§£å†³æ–¹æ¡ˆï¼ˆå…ˆä¸è°ˆå¯è¡Œæ€§ï¼‰éƒ½æ˜¯åœ¨å°ä¼™ä¼´ä»¬ä¸ƒå˜´å…«èˆŒä¸­è®¨è®ºå‡ºæ¥çš„ã€‚æˆ‘ä»¬éœ€è¦è®©æ‰€æœ‰äººéƒ½å‘å‡ºè‡ªå·±çš„å£°éŸ³ï¼Œä¸è¦ç€æ€¥å»å¦å®šã€‚<br>2ã€ä¼˜åŒ–éœ€è¦ä»æ•´ä½“å±‚é¢å»æ€è€ƒï¼Œä¸è¦åªçº ç»“äºè‡ªå·±è´Ÿè´£çš„éƒ¨åˆ†ï¼Œå¦‚æœåªç›¯ç€ä¸€ä¸ªç‚¹æ€è€ƒï¼Œæœ€åå¾ˆå¯èƒ½å°±èµ°è¿›æ­»èƒ¡åŒä¸­äº†ã€‚<br>3ã€æœ‰å¾ˆå¤šä¸œè¥¿ä»¥ä¸ºè¯»è¿‡äº†å°±æ‡‚äº†ï¼Œå…¶å®ä¸ç„¶ã€‚ä¾ç„¶è¿˜æ˜¯éœ€è¦å®è·µï¼Œå¦åˆ™åˆ«äººçš„çŸ¥è¯†æ°¸è¿œä¸å¯èƒ½å˜æˆè‡ªå·±çš„ã€‚<br>4ã€å¤šæ€è€ƒä¸ºä»€ä¹ˆï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Œä¸è¦æƒ³å½“ç„¶ã€‚åªæœ‰è¿™æ ·æ‰èƒ½æ·±å…¥è¿›å»ï¼Œè€Œä¸æ˜¯ç•™åœ¨è¡¨é¢ã€‚</p>
<h3 id="äº¤æµå­¦ä¹ ï¼š"><a href="#äº¤æµå­¦ä¹ ï¼š" class="headerlink" title="äº¤æµå­¦ä¹ ï¼š"></a>äº¤æµå­¦ä¹ ï¼š</h3><p>ğŸ§  Linux shell_é«˜çº§è¿ç»´æ´¾: <code>459096184</code>    åœˆå­ (ç³»ç»Ÿè¿ç»´-åº”ç”¨è¿ç»´-è‡ªåŠ¨åŒ–è¿ç»´-è™šæ‹ŸåŒ–æŠ€æœ¯ç ”ç©¶æ¬¢è¿åŠ å…¥)<br>ğŸ§  BigData-Exchange School : <code>521621407</code>  åœˆå­ï¼ˆå¤§æ•°æ®è¿ç»´)ï¼ˆHadoopå¼€å‘äººå‘˜)ï¼ˆå¤§æ•°æ®ç ”ç©¶çˆ±å¥½è€…) æ¬¢è¿åŠ å…¥</p>
<p>ç›¸åº”Bidataæœ‰å†…éƒ¨å¾®ä¿¡äº¤æµç¾¤äº’ç›¸å­¦ä¹ ï¼ŒåŠ å…¥QQç¾¤æœ‰é“¾æ¥ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/10/29/è‡ªåŠ¨åŒ–+Jenkins/Jenkins/è®²å¦‚ä½•ç»“åˆjenkins+ ansibleæ„å»ºå‘å¸ƒç³»ç»Ÿ/">è®²å¦‚ä½•ç»“åˆjenkins+ ansibleæ„å»ºå‘å¸ƒç³»ç»Ÿ</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-10-29</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/automation/">automation</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Jenkins/">Jenkins</a>
			</span>
		
	</div>

	

	
		<h1 id="jenkins-ansibleï¼Œæ‰“é€ ä¸€ä¸ªwebæ„å»ºå‘å¸ƒç³»ç»Ÿ"><a href="#jenkins-ansibleï¼Œæ‰“é€ ä¸€ä¸ªwebæ„å»ºå‘å¸ƒç³»ç»Ÿ" class="headerlink" title="jenkins+ansibleï¼Œæ‰“é€ ä¸€ä¸ªwebæ„å»ºå‘å¸ƒç³»ç»Ÿ"></a>jenkins+ansibleï¼Œæ‰“é€ ä¸€ä¸ªwebæ„å»ºå‘å¸ƒç³»ç»Ÿ</h1><p>è‡ªåŠ¨åŒ–è¿™å—æˆ‘ä»¬æµ‹è¯•ç”Ÿäº§ç¯å¢ƒå·²ç»ç”¨èµ·æ¥äº†ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¸»è¦è®²æˆ‘ä»¬å¦‚ä½•å®ç°æ•´ä¸ªwebå‘å¸ƒç³»ç»Ÿï¼Œå¦‚ä½•å®‰è£…é…ç½®çœ‹æˆ‘blogä¸Šé¢æœ‰ã€‚</p>
<p>éœ€è¦äº†è§£å‡ æ¬¾è‡ªåŠ¨åŒ–å·¥å…·ï¼š SaltStack,Ansible,Puppet,jenkins</p>
<p>æ‰€ä»¥æˆ‘ä»¬ç¬¬1æ­¥åšçš„å°±æ˜¯ï¼šç”¨Ansible + Jenkinsæå®šè‡ªåŠ¨å‘å¸ƒã€‚Ansibleæ˜¯ç›¸å¯¹ç®€å•çš„æ‰¹é‡ç®¡ç†å·¥å…·ï¼Œæ”¯æŒæ¨¡æ¿ç®¡ç†ç­‰é«˜çº§åŠŸèƒ½ã€‚æå®šäº†è‡ªåŠ¨å‘å¸ƒï¼Œå¼€å‘çš„æœåŠ¡å™¨éœ€æ±‚å·²ç»æ˜æ˜¾ä¸‹é™ï¼Œåªè¦æŠŠä»£ç æäº¤åˆ° Gitä¸»å¹²ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘å‘å¸ƒã€‚</p>
<p>Gitä½¿ç”¨çš„æ˜¯ GitLabï¼ŒåæœŸåŒæ—¶ä¸ºäº†å®‰å…¨æˆ‘ä»¬åšäº†ä¸€å±‚LDAPä»£ç†ï¼Œæ•ˆæœç›¸å½“äºâ€œå°†å†›ä»¤â€ï¼Œæ“ä½œæœºã€Gitå’ŒJenkinsç”¨ OpenLDAP åšç»Ÿä¸€è®¤è¯ï¼Œåç»­ç”¨åˆ°çš„Redmineã€Grafanaã€Zabbixç­‰éƒ½æ¥å…¥äº†OpenLDAPè®¤è¯ï¼Œæ¯ä¸ªäººéƒ½æœ‰ä¸ªåŠ¨æ€å£ä»¤ï¼Œæ¯æ¬¡éªŒè¯éƒ½éœ€è¦ç”¨åˆ°ã€‚</p>
<h3 id="æµç¨‹ç»“æ„"><a href="#æµç¨‹ç»“æ„" class="headerlink" title="æµç¨‹ç»“æ„"></a>æµç¨‹ç»“æ„</h3><p> ç®€å•ç»˜åˆ¶äº†ä¸‹Jenkinsçš„ä¸€ä¸ªæµç¨‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins4.png" alt=""></figure></p>
<p> æ‹“æ‰‘å›¾</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins5.png" alt=""></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">    &gt; è¯¥å¹³å°ä»¥jenkins ä¸ºä¸­å¿ƒï¼Œç„¶åå›´ç»•ä»–è¿›è¡Œæ‰©å±•ã€‚</div><div class="line"></div><div class="line">    &gt; ä»£ç å…¨å±€é…ç½®é€šè¿‡â€æ–‡ä»¶ç®¡ç†å¹³å°â€ è¿›è¡Œç®¡ç†ã€‚æ¯æ¬¡ä»£ç è¿›è¡Œbuildæ—¶ï¼Œpullä¸€ä¸‹é…ç½®ã€‚ä½¿é…ç½®ä¸ºæœ€æ–°çš„ã€‚</div><div class="line"></div><div class="line">    &gt; å¼€å‘äººå‘˜å°†ä»£ç pushåˆ°gitlabï¼Œå¼€å‘è€…ä¹‹é—´ç›¸äº’reviewä»£ç ã€‚ç„¶åmurgeåˆ°masteråˆ†æ”¯ã€‚jenkinsä¸Šçš„pullä»£ç åˆ°workspaceç©ºé—´ã€‚</div><div class="line"></div><div class="line">     &gt; å®‰è£…ä¸€äº›ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚ </div><div class="line"></div><div class="line">     &gt; ä»£ç å’Œé…ç½®æ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼Œé€šè¿‡rediså­˜å‚¨çš„ç‰ˆæœ¬ä¿¡æ¯åˆ›å»ºç‰ˆæœ¬ã€‚</div><div class="line"></div><div class="line">     &gt; æŠŠå°†è¦å‘å¸ƒçš„ç‰ˆæœ¬æ¨é€åˆ°è¿œç«¯æœºå™¨ï¼ŒreloadæœåŠ¡å®ç°ä¸Šçº¿ã€‚</div><div class="line"></div><div class="line">     &gt; å½“å‘å¸ƒçš„ä»£ç å‡ºç°é—®é¢˜ï¼Œå›æ»šæŒ‡å®šç‰ˆæœ¬(é»˜è®¤å›æ»šä¸Šä¸€ç‰ˆæœ¬)ï¼Œæœ€å¤šå¯å›æ»šä¹‹å‰5ä¸ªç‰ˆæœ¬ã€‚</div><div class="line">``` </div><div class="line"></div><div class="line">ansibleæ˜¯æ–°å‡ºç°çš„è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·ï¼ŒåŸºäºPythonå¼€å‘ï¼Œé›†åˆäº†ä¼—å¤šè¿ç»´å·¥å…·ï¼ˆpuppetã€cfengineã€chefã€funcã€fabricï¼‰çš„ä¼˜ç‚¹ï¼Œå®ç°äº†æ‰¹é‡ç³»ç»Ÿé…ç½®ã€æ‰¹é‡ç¨‹åºéƒ¨ç½²ã€æ‰¹é‡è¿è¡Œå‘½ä»¤ç­‰åŠŸèƒ½ã€‚ansibleæ˜¯åŸºäºæ¨¡å—å·¥ä½œçš„ï¼Œæœ¬èº«æ²¡æœ‰æ‰¹é‡éƒ¨ç½²çš„èƒ½åŠ›ã€‚çœŸæ­£å…·æœ‰æ‰¹é‡éƒ¨ç½²çš„æ˜¯ansibleæ‰€è¿è¡Œçš„æ¨¡å—ï¼Œansibleåªæ˜¯æä¾›ä¸€ç§æ¡†æ¶ã€‚ä¸»è¦åŒ…æ‹¬ï¼š</div><div class="line"></div><div class="line">```bash</div><div class="line">(1)ã€è¿æ¥æ’ä»¶connection pluginsï¼šè´Ÿè´£å’Œè¢«ç›‘æ§ç«¯å®ç°é€šä¿¡ï¼›</div><div class="line">(2)ã€host inventoryï¼šæŒ‡å®šæ“ä½œçš„ä¸»æœºï¼Œæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œé¢å®šä¹‰ç›‘æ§çš„ä¸»æœºï¼›</div><div class="line">(3)ã€å„ç§æ¨¡å—æ ¸å¿ƒæ¨¡å—ã€<span class="built_in">command</span>æ¨¡å—ã€è‡ªå®šä¹‰æ¨¡å—ï¼›</div><div class="line">(4)ã€å€ŸåŠ©äºæ’ä»¶å®Œæˆè®°å½•æ—¥å¿—é‚®ä»¶ç­‰åŠŸèƒ½ï¼›</div><div class="line">(5)ã€playbookï¼šå‰§æœ¬æ‰§è¡Œå¤šä¸ªä»»åŠ¡æ—¶ï¼Œéå¿…éœ€å¯ä»¥è®©èŠ‚ç‚¹ä¸€æ¬¡æ€§è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚</div></pre></td></tr></table></figure>
<p>è¿™é‡Œä¹‹å‰ç”¨Jenkinsä½¿ç”¨èµ·æ¥ã€‚é‡åˆ°ä¸ªéš¾é¢˜è¿™é‡Œåˆ†æå“ªå‡ ç‚¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">githubä½œä¸ºæºä»£ç ä»“åº“ </div><div class="line">jenkinsåšä¸ºæ‰“åŒ…æœåŠ¡å™¨ï¼ŒWebæ§åˆ¶æœåŠ¡å™¨</div><div class="line">åœ¨jenkinsçš„ç³»ç»Ÿé…ç½®é‡Œï¼Œå¯ä»¥æ‰¾åˆ°mavenï¼Œgitï¼ŒJavaç›¸å…³çš„é…ç½®ï¼Œåªè¦å‹¾é€‰äº†ï¼Œåœ¨å¼€æ—¶æ‰§è¡Œjobæ—¶ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½ã€‚</div><div class="line">ansibleæŠŠwaråŒ…ï¼Œå‘å¸ƒåˆ°è¿œç¨‹æœºå™¨</div><div class="line">tomcatæ¯å°æœåŠ¡å™¨ç¯å¢ƒéƒ½éœ€è¦åœ¨ansible /etc/ansible/hostsé…ç½®å¥½ï¼Œè¿™æ ·å¯ä»¥è®©å®ƒè‡ªåŠ¨åŒ–ä¸‹å‘åˆ°å¯¹åº”æœºå™¨ã€‚</div><div class="line">æŠŠjenkinsç”Ÿæˆçš„waråŒ…å‘å¸ƒåˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šã€‚</div><div class="line">è¿›å…¥è¯¥é¡¹ç›®çš„workspaceç›®å½•ä¸‹ä¿å­˜è¯¥playbookçš„ä»“åº“å­ç›®å½•ä¸‹, æ£€æŸ¥ansibleç‰ˆæœ¬, å¹¶æ‰§è¡Œæœ€ç»ˆçš„éƒ¨ç½²å‘½ä»¤.ä¼šä¸ä¼šå‘å¸ƒå‡ºç°ä¹±ç ã€‚</div></pre></td></tr></table></figure>
<p><strong>ç›‘æ§ï¼š</strong></p>
<p>ç”±äºåŸå§‹çš„ç›‘æ§ä¸æ»¡è¶³å¿«é€Ÿå¢é•¿çš„ä¸šåŠ¡ï¼Œæˆ‘è¿™è¾¹éƒ¨ç½²äº†å¼€æºç›‘æ§ç³»ç»Ÿ Zabbixï¼Œè™½ç„¶è¿ç»´èƒ½å¤Ÿå¾ˆå¥½çš„ä½¿ç”¨Zabbixï¼Œä½†å…¶ä»–éƒ¨é—¨åŒäº‹æ€»è§‰å¾—æ˜“ç”¨æ€§ä¸é«˜ã€è€Œä¸”å¾ˆå¤šå®šåˆ¶åŒ–ç›‘æ§å®ç°èµ·æ¥å¾ˆéº»çƒ¦ã€‚è¿˜æ˜¯éœ€è¦æœ‰è¿ç»´å¼€å‘åŒäº‹å¸®å¿™è¾…åŠ©ä¼šæ›´å¥½ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/10/10/è¿ç»´ç¬”è®°/ä¸ªäººæ€»ç»“ï¼šä¸ºä»€è¦å­¦ä¹ dockerï¼Œå¦‚ä½•å­¦ä¹ Docker/">ä¸ªäººæ€»ç»“ï¼šä¸ºä»€è¦å­¦ä¹ dockerï¼Œå¦‚ä½•å­¦ä¹ Docker</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-10-10</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/è¿ç»´ç¬”è®°/">è¿ç»´ç¬”è®°</a>
			</span><br />
		
		
	</div>

	

	
		<p>å­¦ä¹ ä»»ä½•ä¸€ä¸ªå¼€æºæ–°æŠ€æœ¯ï¼Œé¦–å…ˆé—®è‡ªå·±å‡ ä¸ªé—®é¢˜ï¼š</p>
<h6 id="1-ä¸ºä»€è¦å­¦ä¹ å®ƒï¼Ÿ"><a href="#1-ä¸ºä»€è¦å­¦ä¹ å®ƒï¼Ÿ" class="headerlink" title="1. ä¸ºä»€è¦å­¦ä¹ å®ƒï¼Ÿ"></a>1. ä¸ºä»€è¦å­¦ä¹ å®ƒï¼Ÿ</h6><h6 id="2-å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ"><a href="#2-å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ" class="headerlink" title="2. å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ"></a>2. å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ</h6><h6 id="3-å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ"><a href="#3-å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ" class="headerlink" title="3. å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ"></a>3. å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ</h6><h6 id="4-è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#4-è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="4. è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"></a>4. è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</h6><p>æ‹¿æˆ‘ä¸ªäººçš„å­¦ä¹ ç»éªŒæ¥ä¸¾ä¾‹ï¼ˆæœ¬äººä¹‹å‰æ¯”è¾ƒäº†è§£KVMï¼ŒESxi,OpenStackï¼‰</p>
<h3 id="ä¸ºä»€è¦å­¦ä¹ dockerï¼Ÿ"><a href="#ä¸ºä»€è¦å­¦ä¹ dockerï¼Ÿ" class="headerlink" title="ä¸ºä»€è¦å­¦ä¹ dockerï¼Ÿ"></a>ä¸ºä»€è¦å­¦ä¹ dockerï¼Ÿ</h3><p>ä¸ªäººå›ç­”ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">dockeræ˜¯è½»é‡çº§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œdockerä½¿linuxå®¹å™¨æŠ€æœ¯çš„åº”ç”¨æ›´åŠ ç®€å•å’Œæ ‡å‡†åŒ–</div><div class="line">dockerçš„é€Ÿåº¦å¾ˆå¿«,å®¹å™¨å¯åŠ¨æ—¶æ¯«ç§’çº§çš„</div><div class="line">dockerå°†å¼€å‘å’Œè¿ç»´èŒè´£åˆ†æ¸…</div><div class="line">dockerè§£å†³äº†ä¾èµ–åœ°ç‹±é—®é¢˜</div><div class="line">dockeræ”¯æŒå‡ ä¹æ‰€æœ‰æ“ä½œç³»ç»Ÿ</div><div class="line">dockeræœ‰ç€é£é€Ÿå‘å±•çš„ç”Ÿæ€åœˆ</div><div class="line">å¾ˆå¤šITå·¨å¤´é€æ¸åŠ å…¥å’Œæ”¯æŒ</div></pre></td></tr></table></figure>
<p>å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ</p>
<p>å›ç­”ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">äº‘è®¡ç®—æ¦‚å¿µç›¸å…³ï¼ˆrestapi, å¾®æœåŠ¡ï¼ŒOpenStackï¼‰</div><div class="line">Linux ç³»ç»Ÿç®¡ç†ï¼ˆè½¯ä»¶åŒ…ç®¡ç†ï¼Œç”¨æˆ·ç®¡ç†ï¼Œè¿›ç¨‹ç®¡ç†ç­‰ï¼‰</div><div class="line">Linux å†…æ ¸ç›¸å…³ï¼ˆCgroup, namespace ç­‰ï¼‰</div><div class="line">Linux æ–‡ä»¶ç³»ç»Ÿå’Œå­˜å‚¨ç›¸å…³ï¼ˆAUFSï¼ŒBRFS,devicemapper ç­‰ï¼‰</div><div class="line">Linux ç½‘ç»œï¼ˆç½‘æ¡¥ï¼Œveth,iptablesç­‰ï¼‰</div><div class="line">Linuxå®‰å…¨ç›¸å…³ï¼ˆAppmor,Selinux ç­‰ï¼‰</div><div class="line">Linuxè¿›ç¨‹ç®¡ç†ï¼ˆSupervisord,Systemd etc)</div><div class="line">Linuxå®¹å™¨æŠ€æœ¯ï¼ˆLXCç­‰ï¼‰</div><div class="line">å¼€å‘è¯­è¨€ï¼ˆPython, GO,Shell ç­‰ï¼‰</div></pre></td></tr></table></figure>
<p>3.å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">å›ç­”ï¼šä¸ªäººä½“ä¼šæœ€å¥½æœ‰ä¸€ä¸ªå®é™…çš„éœ€æ±‚æˆ–é¡¹ç›®æ¥è¾¹å®è·µè¾¹å­¦ä¹ ï¼Œå…¥é—¨å¯ä»¥å‚è€ƒ</div><div class="line">ï¼ˆç¬¬ä¸€æœ¬dockerä¹¦ï¼‰å†™çš„ä¸é”™ï¼Œéå¸¸é€‚åˆå…¥é—¨ã€‚</div><div class="line"></div><div class="line">é™¤æ­¤ä¹‹å¤–ï¼Œé˜…è¯»ç‰›äººçš„blogæ¯”å¦‚å®˜æ–¹blog http://blog.docker.com/</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œå‚ä¸ç¤¾åŒºäº’åŠ¨ä¹Ÿæ˜¯å¾ˆå¥½çš„å­¦ä¹ æ–¹å¼ã€‚</p>
<p>è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ<br>å›ç­”ï¼šdockeréå¸¸é€‚ç”¨äºdev/test CI/CD åœºæ™¯ï¼Œç”¨å®Œå°±æ‰”ã€‚è¿˜æœ‰å°±æ˜¯PasSäº†ã€‚</p>
<h3 id="ä¸ºä»€è¦å­¦ä¹ Docker"><a href="#ä¸ºä»€è¦å­¦ä¹ Docker" class="headerlink" title="ä¸ºä»€è¦å­¦ä¹ Docker"></a>ä¸ºä»€è¦å­¦ä¹ Docker</h3><ul>
<li><p>1.å­¦ä¹ Dockerï¼Œå¦‚æœæ²¡æœ‰äº‘è®¡ç®—çš„åŸºæœ¬çŸ¥è¯†ï¼Œä»¥åŠå†…æ ¸çš„åŸºæœ¬çŸ¥è¯†ï¼Œé‚£ä¹ˆå­¦ä¹ å¹¶ç†è§£èµ·æ¥ä¼šç¨åƒåŠ›ã€‚ä½œä¸ºå®¹å™¨ï¼ŒDockerå®¹å™¨çš„ä¼˜åŠ¿åœ¨å“ªï¼Œä¸è¶³åœ¨å“ªï¼Œæœ€å¥½äº†è§£å®¹å™¨çš„å®ç°æ˜¯æ€æ ·çš„ï¼ˆç®€å•äº†è§£ï¼‰ï¼›æ‹¥æœ‰é•œåƒç®¡ç†ï¼ŒDockeråˆè¯¥å¦‚ä½•ä½“ç°è½¯ä»¶å¼€å‘ï¼Œé›†æˆï¼Œéƒ¨ç½²ï¼Œå‘å¸ƒï¼Œå†è¿­ä»£çš„è½¯ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†ä¼˜åŠ¿ã€‚ä»¥ä¸Šä¸¤ç‚¹æˆ‘è®¤ä¸ºæœ€ä¸ºå…³é”®ï¼Œæœ‰è¿™ä¸¤æ–¹é¢çš„è®¤è¯†åŠ¿å¿…ä¼šå¯¹ä¹‹åçš„å·¥ä½œå¸®åŠ©å·¨å¤§ã€‚</p>
</li>
<li><p>2.å…³äºå­¦ä¹ èµ„æºï¼Œèµ·ç çš„ç¡¬ä»¶è®¾æ–½æ€»æ˜¯è¦æœ‰çš„ã€‚DockeråŠå…¶ç”Ÿæ€çš„å‘å±•å¾ˆå¿«ï¼Œä¸ä½¿ç”¨çº¯ç†è®ºè‚¯å®šæ”¶æ•ˆç”šå¾®ã€‚å¦å¤–ï¼Œèµ„æºè¿˜åŒ…æ‹¬Dockerå®˜æ–¹ï¼Œå„å¤§ç”µå­åª’ä½“å¹³å°ï¼ŒæŠ€æœ¯è®ºå›ï¼Œå¼€æºç¤¾åŒºç­‰ï¼Œå¾€å¾€å¤§æ‹¿çš„è§‚ç‚¹èƒ½ç‚¹ç ´è‡ªå·±çš„å›°æƒ‘ï¼Œæˆ–è€…è®©è‡ªå·±çŸ¥é“å“ªæ–¹é¢çš„è®¤è¯†è¿˜å¾ˆæ¬ ç¼ºï¼Œä»¥åŠè®©è‡ªå·±å°‘èµ°å¾ˆå¤šçš„å¼¯è·¯ã€‚</p>
</li>
<li><p>3.ä¸ªäººå…´è¶£çš„è¯ï¼Œå½’ç»“ä¸ºå¼ºæ‰­çš„ç“œä¸ç”œã€‚èµ·ç åº”è¯¥è®¤åŒDockerçš„è®¾è®¡ä»·å€¼ï¼Œä»¥åŠDockerçš„æœªæ¥æ½œåŠ›ï¼Œå½“ç„¶æœ‰ä¾æ®çš„æ‰¹åˆ¤Dockerå¹¶å¸¦åŠ¨å¤§å®¶çš„æ€è€ƒï¼Œä¹Ÿæ˜¯æ·±åˆ‡å…³æ³¨çš„è¡¨ç°ã€‚</p>
</li>
<li><p>4.ä¸ªäººå‘å±•æ–¹å‘ï¼Œæˆ‘è®¤ä¸ºå¦‚æœéœ€è¦æŠŠDockerå½“ä½œè½¯ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†å·¥å…·çš„è¯ï¼Œé‚£ç”¨å¥½Dockeræœ€ä¸ºé‡è¦ï¼ŒAPIåŠå‘½ä»¤çš„ç†è§£ä¸ä½¿ç”¨æ˜¯å¿…éœ€çš„ã€‚å¦‚æœä¸“æ³¨ç³»ç»Ÿè®¾è®¡æ–¹é¢ï¼Œé‚£ä¹ˆé™¤Dockerä»¥ä¸Šçš„çŸ¥è¯†ä¸ç»éªŒä¹‹å¤–ï¼Œè‹¥æœ‰Dockeræºç çš„å­¦ä¹ ä¸ç†è§£ï¼Œé‚£ä¹ˆè¿™äº›è‚¯å®šä¼šè®©ä½ çš„Dockeræ°´å¹³æé«˜ä¸€ä¸ªå±‚æ¬¡ã€‚</p>
</li>
</ul>
<ul>
<li><p>å­¦ä¹ Dockerï¼Œæœ€å¤§çš„å¥½å¤„æ˜¯è·Ÿè¿›æ–°æŠ€æœ¯å‘å±•æ–¹å‘ã€‚æˆ‘è§‰å¾—åœ¨æ ¡ç”Ÿåº”è¯¥æ²¡æœ‰å¤šå°‘ç¡¬æ€§éœ€æ±‚åœ¨Dockerçš„ç ”ç©¶ä¸Šï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå­¦æ ¡æ²¡åšå…·ä½“åº”ç”¨è¦æ±‚çš„åŸå› ã€‚æœ€å®é™…çš„åšæ³•æ˜¯çœ‹ä¸€äº›Dockerä½¿ç”¨æ¡ˆä¾‹ï¼Œè‡ªå·±å®è·µå‡ºä¸€äº›ç»éªŒåº”è¯¥ä¼šå†ä»¥åçš„ç¤¾ä¼šå®è·µä¸­èµ·åˆ°ä½œç”¨ã€‚</p>
</li>
<li><p>ç ”ç©¶dockerçš„æºä»£ç ï¼Œåº”è¯¥åˆ°ä½ ä¸‹å®šå†³å¿ƒä»äº‹äº‘è®¡ç®—æ–¹é¢çš„äº‹ä¸šæˆ–è€…ç ”ç©¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦ä»¥ç ”ç©¶è€…çš„èº«ä»½å»åšä»”ç»†çš„æºç åˆ†æçš„å·¥ä½œã€‚</p>
</li>
</ul>
<h4 id="Dockerç«èµ·æ¥çš„çœŸæ­£åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Dockerç«èµ·æ¥çš„çœŸæ­£åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Dockerç«èµ·æ¥çš„çœŸæ­£åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Dockerç«èµ·æ¥çš„çœŸæ­£åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>æˆ‘è®¤ä¸ºæœ‰è¿™ä¹ˆå‡ ç‚¹ï¼Œ</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">æ™®é€šå¼€å‘è€…æœ‰æœºä¼šæ¥è§¦å®¹å™¨æŠ€æœ¯ï¼Œäº«å—å¼€å‘å‘å¸ƒä¸€ä½“åŒ–çš„ä¾¿åˆ©ã€‚</div><div class="line">å®¹å™¨äº‘æ˜¯åŒºåˆ«äºä¼ ç»ŸIaaSæœåŠ¡çš„å¦ä¸€ç§æ›´å¿«é€Ÿæ›´é«˜æ•ˆçš„è½»é‡çº§é€‰æ‹©ã€‚</div><div class="line">åŸºäºé•œåƒçš„ç¬¬äºŒä¸ªGitHubã€<span class="keyword">CI</span>/<span class="keyword">CD</span>æœåŠ¡ã€ä»£ç å‘å¸ƒã€åœ¨çº¿debugã€‚</div></pre></td></tr></table></figure>
<h3 id="äº¤æµå­¦ä¹ ï¼š"><a href="#äº¤æµå­¦ä¹ ï¼š" class="headerlink" title="äº¤æµå­¦ä¹ ï¼š"></a>äº¤æµå­¦ä¹ ï¼š</h3><p>ğŸ§  Linux shell_é«˜çº§è¿ç»´æ´¾: <code>459096184</code>    åœˆå­ (ç³»ç»Ÿè¿ç»´-åº”ç”¨è¿ç»´-è‡ªåŠ¨åŒ–è¿ç»´-è™šæ‹ŸåŒ–æŠ€æœ¯ç ”ç©¶æ¬¢è¿åŠ å…¥)<br>ğŸ§  BigData-Exchange School : <code>521621407</code>  åœˆå­ï¼ˆå¤§æ•°æ®è¿ç»´)ï¼ˆHadoopå¼€å‘äººå‘˜)ï¼ˆå¤§æ•°æ®ç ”ç©¶çˆ±å¥½è€…) æ¬¢è¿åŠ å…¥</p>
<p>ç›¸åº”Bidataæœ‰å†…éƒ¨å¾®ä¿¡äº¤æµç¾¤äº’ç›¸å­¦ä¹ ï¼ŒåŠ å…¥QQç¾¤æœ‰é“¾æ¥ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/09/24/Node.js-npm/Node.jsä½¿ç”¨pm2è¿›ç¨‹å®ˆæŠ¤+keymetricså®æ—¶ç›‘æ§Node.jsç¨‹åº/">Node.jsä½¿ç”¨pm2è¿›ç¨‹å®ˆæŠ¤+keymetricså®æ—¶ç›‘æ§Node.jsç¨‹åº</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-09-24</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Node-js/">Node.js</a>
			</span>
		
	</div>

	

	
		<p>é€šè¿‡pm2èƒ½å®ˆæŠ¤node.jsç¨‹åºæ°¸è¿œåœ¨çº¿ï¼Œåœ¨å®é™…åº”ç”¨ä¸­æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚å¦å¤–ï¼Œpm2é…åˆkeymetricsèƒ½å®æ—¶ç›‘æ§node.jsç¨‹åºçš„è¿è¡Œï¼Œè¾¾åˆ°ç›‘æ§node.jsç¨‹åºçš„ç›®çš„ã€‚</p>
		<p><a class="article__read-more-link" href="/2016/09/24/Node.js-npm/Node.jsä½¿ç”¨pm2è¿›ç¨‹å®ˆæŠ¤+keymetricså®æ—¶ç›‘æ§Node.jsç¨‹åº/">...read more</a></p>
	

	

</article>




	<article>
	
		<h1><a href="/2016/09/21/è¿ç»´ç¬”è®°/è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£å’Œå‰æ™¯/">è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£å’Œå‰æ™¯</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-09-21</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/è¿ç»´ç¬”è®°/">è¿ç»´ç¬”è®°</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Operation-and-maintenance-Road/">Operation and maintenance Road</a>
			</span>
		
	</div>

	

	
		<h1 id="è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£å’Œå‰æ™¯"><a href="#è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£å’Œå‰æ™¯" class="headerlink" title="è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£å’Œå‰æ™¯"></a>è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£å’Œå‰æ™¯</h1><p>è¿ç»´ä¸­å…³é”®æŠ€æœ¯ç‚¹è§£å‰–ï¼š</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">1 </span>å¤§é‡é«˜å¹¶å‘ç½‘ç«™çš„è®¾è®¡æ–¹æ¡ˆ ï¼›</div><div class="line"><span class="symbol">2 </span>é«˜å¯é ã€é«˜å¯ä¼¸ç¼©æ€§ç½‘ç»œæ¶æ„è®¾è®¡ï¼›</div><div class="line"><span class="symbol">3 </span>ç½‘ç«™å®‰å…¨é—®é¢˜ï¼Œå¦‚ä½•é¿å…è¢«é»‘ï¼Ÿ</div><div class="line"><span class="symbol">4 </span>å—åŒ—äº’è”é—®é¢˜,åŠ¨æ€CDNè§£å†³æ–¹æ¡ˆï¼›</div><div class="line"><span class="symbol">5 </span>æµ·é‡æ•°æ®å­˜å‚¨æ¶æ„</div></pre></td></tr></table></figure>
<h4 id="ä¸€ã€ä»€ä¹ˆæ˜¯å¤§å‹ç½‘ç«™è¿ç»´ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯å¤§å‹ç½‘ç«™è¿ç»´ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯å¤§å‹ç½‘ç«™è¿ç»´ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯å¤§å‹ç½‘ç«™è¿ç»´ï¼Ÿ</h4><p>é¦–å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œå…¨æ–‡æ‰€è®²çš„<code>â€è¿ç»´â€œ</code>æ˜¯æŒ‡ï¼šå¤§å‹ç½‘ç«™è¿ç»´ï¼Œä¸å…¶å®ƒè¿ç»´çš„åŒºåˆ«è¿˜æ˜¯è›®å¤§çš„ï¼›ç„¶åæˆ‘ä»¬å†å¯¹å¤§å‹ç½‘ç«™ä¸å°å‹ç½‘ç«™è¿›è¡ŒèŒƒå›´å®šä¹‰ï¼Œæ­¤å®šä¹‰ä¸»è¦ä»è¿ç»´å¤æ‚æ€§è§’åº¦è€ƒè™‘ï¼Œå¦‚ç½‘ç«™è§„èŒƒã€çŸ¥ååº¦ã€æœåŠ¡å™¨é‡çº§ã€pvé‡ç­‰è€ƒè™‘ï¼Œå…¶å®ƒå› ç´ ä¸æ˜¯é‡ç‚¹ï¼›</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰æœåŠ¡å™¨è§„æ¨¡å¤§äº1000å°ï¼Œpvæ¯å¤©è‡³å°‘ä¸Šäº¿ï¼ˆè‡³å°‘å›½å†…æ’åå‰10ï¼‰ï¼Œå¦‚sinaã€baiduã€QQï¼Œ51.comç­‰ç­‰ï¼›</p>
<p>å…¶å®ƒå°å‹ç½‘ç«™å¯èƒ½æ²¡æœ‰çœŸæ­£æ„ä¹‰ä¸Šçš„è¿ç»´å·¥ç¨‹å¸ˆï¼Œè¿™ä¸ç½‘ç«™è§„èŒƒä¸å¤Ÿå’Œæˆæœ¬å› ç´ æœ‰å…³ï¼Œæ›´å¤šçš„æ˜¯é›†åˆç½‘ç»œã€ç³»ç»Ÿã€å¼€å‘å·¥ä½œäºä¸€èº«çš„<code>â€œå¤åˆæ€§äººæ‰â€</code>ï¼Œå°±å¦‚æœ‰äº›å…¬å¸æŠŠä¸€äº›åˆåŒé‡‡è´­éƒ½çº³å…¥äº†è¿ç»´èŒè´£èŒƒå›´ï¼Œè¿˜æœ‰å¦‚IDCç½‘ç»œè§„åˆ’ä¹Ÿçº³å…¥è¿ç»´èŒè´£ã€‚æ‰€ä»¥ï¼Œéå¸¸é‡è¦ä¸€å®šéœ€è¦æ˜ç™½ï¼š</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿ç»´å¯¹å…¶å®ƒå…³è”å·¥ç§å¿…é¡»éå¸¸äº†è§£ç†Ÿæ‚‰ï¼šç½‘ç»œã€ç³»ç»Ÿã€ç³»ç»Ÿå¼€å‘ã€å­˜å‚¨ï¼Œå®‰å…¨,<span class="built_in">DB</span>ç­‰ï¼›</div></pre></td></tr></table></figure>
<p>æˆ‘åœ¨è¿™é‡Œæ‰€è®²çš„è¿ç»´å·¥ç¨‹å¸ˆå°±æ˜¯æŒ‡ä¸“èŒè¿ç»´å·¥ç¨‹å¸ˆã€‚<br>æˆ‘ä»¬å†æ¥è¯´è¯´ä¸€èˆ¬äº§å“çš„â€œå‡ºç”Ÿâ€æµç¨‹ï¼š</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>ã€é¦–å…ˆå…¬å¸ç®¡ç†å±‚ç»™å‡ºæŒ‡å¯¼æ€æƒ³ï¼ŒPMå®šä½å¸‚åœºéœ€æ±‚ï¼ˆæˆ–copyæˆç†Ÿåº”ç”¨ï¼‰è¿›è¡Œè°ƒç ”ã€åˆ†æã€æœ€ç»ˆç»™å‡ºè¯¦ç»†è®¾è®¡ã€‚</div><div class="line"></div><div class="line"><span class="number">2</span>ã€æ¶æ„å¸ˆæ ¹æ®äº§å“è®¾è®¡çš„éœ€æ±‚ï¼Œå¦‚pvå¤§å°é¢„ä¼°ã€æœåŠ¡å™¨è§„æ¨¡ã€åº”ç”¨æ¶æ„ç­‰å› ç´ å®Œæˆç½‘ç»œè§„åˆ’,æ¶æ„è®¾è®¡ç­‰ï¼ˆåŸºæœ¬ä¸Šå¯¹ç½‘ç»œå˜åŠ¨ä¸å¤§ï¼Œé™¤éå¤§é¡¹ç›®ï¼‰</div><div class="line"></div><div class="line"><span class="number">3</span>ã€å¼€å‘å·¥ç¨‹å¸ˆå°†è®¾è®¡codeå®ç°å‡ºæ¥ã€æµ‹è¯•å·¥ç¨‹å¸ˆå¯¹åº”ç”¨è¿›è¡Œæµ‹è¯•ã€‚</div><div class="line"></div><div class="line"><span class="number">4</span>ã€å¥½ï¼Œåˆ°è¿ç»´å·¥ç¨‹å¸ˆå‡ºé©¬äº†ï¼Œé¦–å…ˆæ˜ç¡®ä¸€ç‚¹ä¸æ˜¯è¯´å‰ä¸‰æ­¥å°±ä¸è¿ç»´å·¥ä½œæ— å…³äº†ï¼Œæ°æ°ç›¸åï¼Œå‰ä¸‰æ­¥ä¸è¿ç»´å…³ç³»å¾ˆå¤§ï¼š</div></pre></td></tr></table></figure>
<p>åº”ç”¨çš„å‰æœŸæ¶æ„è®¾è®¡ã€è½¯/ç¡¬ä»¶èµ„æºè¯„ä¼°ç”³è¯·é‡‡è´­ã€åº”ç”¨è®¾è®¡æ€§èƒ½éšæ‚£åŠè¯„ä¼°ã€IDCã€æœåŠ¡æ€§èƒ½å®‰å…¨è°ƒä¼˜ã€æœåŠ¡å™¨ç³»ç»Ÿçº§ä¼˜åŒ–ï¼ˆä¸ç‰¹å®šåº”ç”¨æœ‰å…³ï¼‰ç­‰éƒ½éœ€è¿ç»´å…¨ç¨‹å‚ä¸ï¼Œå¹¶ä¸»å¯¼æ•´ä¸ªåº”ç”¨ä¸Šçº¿é¡¹ç›®ï¼›è¿ç»´å·¥ç¨‹å¸ˆè´Ÿè´£äº§å“æœåŠ¡å™¨ä¸Šæ¶å‡†å¤‡å·¥ä½œï¼ŒæœåŠ¡å™¨ç³»ç»Ÿå®‰è£…ã€ç½‘ç»œã€IPã€é€šç”¨å·¥å…·é›†å®‰è£…ã€‚è¿ç»´å·¥ç¨‹å¸ˆè¿˜éœ€è¦å¯¹ä¸Šçº¿çš„åº”ç”¨ç³»ç»Ÿæ¶æ„æ˜¯å¦åˆç†ã€æ˜¯å¦å…·å¤‡å¯æ‰©å±•æ€§ã€åŠå®‰å…¨éšæ‚£ç­‰å› ç´ è´Ÿè´£ï¼Œå¹¶è´Ÿè´£æœ€åå°†äº§å“ï¼ˆç¨‹åºï¼‰ã€ç½‘ç»œã€ç³»ç»Ÿä¸‰è€…è¿›è¡Œæ‹¼æ¥å¹¶æœ€ä¼˜åŒ–çš„ç»„åˆåœ¨ä¸€èµ·ï¼Œæœ€ç»ˆå®Œæˆäº§å“ä¸Šçº¿æä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œå¹¶å‘¨è€Œå¤ä½¿ï¼šéœ€æ±‚-&gt;å¼€å‘ï¼ˆå‡çº§ï¼‰-&gt;æµ‹è¯•-&gt;ä¸Šçº¿ï¼ˆæ€§èƒ½ã€å®‰å…¨é—®é¢˜ç­‰ä¹‹å‰é¢„ä¼°å¤–çš„é—®é¢˜éšä¹‹æ…¢æ…¢å°±å…¨å‡ºæ¥äº†ï¼‰åœ¨è¿™é‡Œæä¸€ç‚¹ï¼šç½‘ç«™å¼€å‘æ¨¡å¼ä¸ä¼ ç»Ÿè½¯ä»¶å¼€å‘å®Œå…¨ä¸ä¸€æ ·ï¼Œç½‘ç«™ä¸€å¤©å¼€å‘ä¸Šçº¿1~5ä¸ªå‡çº§ç‰ˆæœ¬æ˜¯å®¶å¸¸ä¾¿é¥­ï¼Œç”¨æˆ·ä½“éªŒä¸ºç‹å˜›ï¼Œå¦‚æœæŸä¸ªçº¿ä¸Šé—®é¢˜åƒM$éœ€è¦1å¹´è§£å†³ï¼Œç”¨æˆ·æ—©è·‘å…‰äº†ï¼›åº”ç”¨ä¸Šçº¿åï¼Œè¿ç»´å·¥ä½œæ‰åˆšå¼€å§‹ï¼Œå…·ä½“å·¥ä½œå¯èƒ½åŒ…æ‹¬ï¼š</p>
<p>å‡çº§ç‰ˆæœ¬ä¸Šçº¿å·¥ä½œã€æœåŠ¡ç›‘æ§ã€åº”ç”¨çŠ¶æ€ç»Ÿè®¡ã€æ—¥å¸¸æœåŠ¡çŠ¶æ€å·¡æ£€ã€çªå‘æ•…éšœå¤„ç†ã€æœåŠ¡æ—¥å¸¸å˜æ›´è°ƒæ•´ã€é›†ç¾¤ç®¡ç†ã€æœåŠ¡æ€§èƒ½è¯„ä¼°ä¼˜åŒ–ã€æ•°æ®åº“ç®¡ç†ä¼˜åŒ–ã€éšç€åº”ç”¨PVå¢å‡è¿›è¡Œåº”ç”¨æ¶æ„çš„ä¼¸ç¼©ã€å®‰å…¨ã€è¿ç»´å¼€å‘å·¥ä½œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a ã€å°½é‡å°†æ—¥å¸¸æœºæ¢°æ€§æ‰‹å·¥å·¥ä½œé€šè¿‡å·¥å…·å®ç°ï¼ˆå¦‚æœåŠ¡ç›‘æ§ã€åº”ç”¨çŠ¶æ€ç»Ÿè®¡ã€æœåŠ¡ä¸Šçº¿ç­‰ç­‰ï¼‰ï¼Œæé«˜æ•ˆç‡ã€‚</div><div class="line">bã€è§£å†³ç°å®ä¸­æœåŠ¡å­˜åœ¨çš„é—®é¢˜ï¼Œå¦‚é«˜å¯é æ€§ã€å¯æ‰©å±•æ€§é—®é¢˜ç­‰ã€‚</div><div class="line">cã€å¤§è§„æ¨¡é›†ç¾¤ç®¡ç†å·¥å…·çš„å¼€å‘ï¼Œå¦‚1ä¸‡å°æœºå™¨å¦‚ä½•åœ¨1åˆ†é’Ÿå†…å®Œæˆå¯†ç ä¿®æ”¹ã€æˆ–è¿è¡ŒæŒ‡å®šä»»åŠ¡ï¼Ÿ2000å°æœåŠ¡å™¨å¦‚ä½•å¿«é€Ÿå®‰è£…æ“ä½œç³»ç»Ÿï¼Ÿå„åˆ†å¸ƒå¼IDCã€å­˜å‚¨é›†ç¾¤ä¸­æ•°PTçº§çš„æ•°æ®å¦‚ä½•å¿«é€Ÿçš„å­˜å‚¨ã€å…±äº«ã€åˆ†æï¼Ÿç­‰ä¸€ç³»åˆ—æŒ‘æˆ˜éƒ½éœ€è¿ç»´å·¥ç¨‹å¸ˆçš„åŠªåŠ›ã€‚</div><div class="line">åœ¨æ­¤è¯´æ˜ä¸€ä¸‹å…¶å®ƒé…åˆå·¥ç§æƒ…å†µï¼Œåœ¨æ•´ä¸ªé¡¹ç›®ä¸­ï¼Œå‰ç«¯åº”ç”¨å¯¹äºç½‘ç»œ/ç³»ç»Ÿå·¥ç¨‹å¸ˆæ¥è¯´æ˜¯é»‘åŒ£å­ï¼ŒåŒæ—¶å¼€å‘å·¥ç¨‹å¸ˆèŒè´£åªæ˜¯è´Ÿè´£å®Œæˆåº”ç”¨çš„åŠŸèƒ½æ€§å¼€å‘ï¼Œå¹¶å¯¹åº”ç”¨æœ¬èº«æ€§èƒ½ã€å®‰å…¨æ€§ç­‰åº”ç”¨æœ¬èº«è´Ÿè´£ï¼Œå®ƒä¸è´Ÿè´£æˆ–å…³å¿ƒç½‘ç»œ/ç³»ç»Ÿæ¶æ„æ–¹é¢äº‹å®œï¼Œå½“ç„¶è½¯/ç¡¬ä»¶é‡‡è´­äººå‘˜ç­‰äº‹ä¸šéƒ¨å…¶å®ƒåŒäº‹ä¹Ÿä¸ä¼šå…³å¿ƒè¿™äº›é—®é¢˜ï¼Œå„å¸å…¶èŒï¼Œä½†é¡¹ç›®çš„æ ¸å¿ƒæ˜¯è¿ç»´å·¥ç¨‹å¸ˆ~ï¼æ‰€æœ‰å…¶å®ƒéƒ¨é—¨çš„æ¡¥æ¢ã€‚</div></pre></td></tr></table></figure>
<h4 id="ä¸¾ä¾‹ï¼š"><a href="#ä¸¾ä¾‹ï¼š" class="headerlink" title="ä¸¾ä¾‹ï¼š"></a>ä¸¾ä¾‹ï¼š</h4><p>ä¸Šé¢è¯´äº†å¾ˆå¤šï¼Œæˆ‘æƒ³å¤§å®¶åº”è¯¥å¯¹è¿ç»´æœ‰ä¸€äº›æ¦‚å¿µäº†ï¼Œåœ¨æ­¤æ‰“ä¸ªæ¯”æ–¹å§ï¼Œå¦‚æœæˆ‘ä»¬æ˜¯ä¸€è¾†é«˜é€Ÿè¡Œé©¶åœ¨é«˜é€Ÿå…¬è·¯ä¸Šçš„æ±½è½¦ï¼Œé‚£è¿ç»´å·¥ç¨‹å¸ˆå°±æ˜¯å¸æœºå…¼ç»´ä¿®å·¥ï¼Œè¿™ä¸ªå¸æœºä¸ç®€å•ï¼Œæœ‰æ—¶éœ€è¦åœ¨é«˜é€Ÿè¡Œé©¶è¿‡ç¨‹ä¸­æ¢è½®èƒã€å¹¶æ ¹æ®é“è·¯æƒ…å†µæ¢æ¡£ä½ã€å½“æ±½è½¦é€Ÿåº¦è¶Šæ¥è¶Šå¿«ï¼Œæ±½è½¦æœ¬èº«ä¸èƒ½æ»¡è¶³é«˜é€Ÿåº¦æ—¶å¯¹æ±½è½¦æ€§èƒ½è°ƒä¼˜æˆ–é›¶ä»¶å‡çº§ã€é«˜é€Ÿè¡Œè¿›ä¸­è§£å†³æ±½è½¦æ•…éšœåŠæ€§èƒ½é—®é¢˜ã€æ—¶åˆ»å…³æ³¨å‰æ–¹å®‰å…¨é—®é¢˜ï¼Œå¹¶å…ˆçŸ¥å…ˆè§‰çš„é‡‡å–è§„é¿æ‰‹æ®µã€‚è¿™å°±æ˜¯è¿ç»´å·¥ä½œ~ï¼</p>
<h4 id="æœ€åè¯´ä¸€ä¸‹è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£ï¼š"><a href="#æœ€åè¯´ä¸€ä¸‹è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£ï¼š" class="headerlink" title="æœ€åè¯´ä¸€ä¸‹è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£ï¼š"></a>æœ€åè¯´ä¸€ä¸‹è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£ï¼š</h4><p>â€ç¡®ä¿çº¿ä¸Šç¨³å®šâ€œï¼Œçœ‹ä¼¼ç®€å•ï¼Œä½†å®å±ä¸å®¹æ˜“ï¼Œè¿ç»´å·¥ç¨‹å¸ˆå¿…é¡»åœ¨è¯¸å¤šä¸åˆ©å› ç´ ä¸­è¿›è¡Œæƒè¡¡ï¼šæ–°äº§å“æ¨¡å¼å¯¹ç°æœ‰æ¶æ„åŠæŠ€æœ¯çš„å†²å‡»ã€äº§å“é«˜é¢‘åº¦çš„å‡çº§å¸¦æ¥çš„çº¿ä¸ŠBUGéšæ‚£ã€è¿ç»´è‡ªåŠ¨åŒ–ç®¡ç†æ‰¿åº¦ä¸é«˜å¯¼è‡´çš„äººä¸ºå¤±è¯¯ã€ITè¡Œä¸šè¿½æ±‚çš„é«˜æ•ˆç‡å¯¼è‡´æµç¨‹æ‰§è¡Œä¸Šçš„ç¼ºå¤±ã€ç”¨æˆ·å¢æ¶¨å¸¦æ¥çš„æ€§èƒ½åŠæ¶æ„ä¸Šçš„å‹åŠ›ã€ITè¡Œä¸šå®½æ¾çš„æŠ€æœ¯ç®¡ç†æ–‡åŒ–ã€åˆ›æ–°é£é™©ã€äº’è”ç½‘å®‰å…¨æ€§é—®é¢˜ç­‰å› ç´ ï¼Œéƒ½ä¼šæ˜¯ç½‘ç«™ç¨³å®šçš„å¤§æ•Œï¼Œè¿ç»´å·¥ç¨‹å¸ˆå¿…é¡»æŠŠæ§å¥½è¿™æœ€åä¸€å…³ï¼Œéœ€å…·ä½“é«˜åº¦çš„è´£ä»»æ„Ÿã€åŸåˆ™æ€§åŠåè°ƒèƒ½åŠ›ï¼Œå¦‚æœèƒ½åšåˆ°å„å› ç´ çš„æœ€ä½³å¹³è¡¡ï¼Œé‚£å°±æ˜¯ä¸€åä¼˜ç§€çš„è¿ç»´å·¥ç¨‹å¸ˆäº†ã€‚</p>
<blockquote>
<p>å¦å¤–åœ¨æ­¤èŠç‚¹é¢˜å¤–è¯ï¼Œæˆ‘åœ¨è¿™é‡Œçœ‹åˆ°æœ‰å¾ˆå¤šäººè¦sinaã€QQã€baidu,51.comç­‰èŠè‡ªå·²çš„è¿ç»´æ–¹é¢çš„ç»éªŒï¼Œå…¶å®è¿™å¯¹äºå®ƒä»¬æœ‰ç‚¹å…ä¸ºå…¶éš¾ï¼š</p>
</blockquote>
<ul>
<li><p>aã€å„å…¬å¸è‡ªå·²ç½‘ç»œæ¶æ„ã€è§„æ¨¡ã€æˆ–å¤šæˆ–å°‘è¿˜ç®—æ˜¯å…¬å¸çš„æ ¸å¿ƒç§˜å¯†ï¼Œè¦ä¿å¯†ï¼Œå¦å¤–ï¼Œå¯¹äºå¤§å®¶æ‰€ç†ŸçŸ¥çš„é€šç”¨è½¯ä»¶ã€æ¶æ„ï¼Œç”±äºå¾ˆå¤šå…¬å¸ä¼šæ ¹æ®è‡ªå·²å®é™…ä¸šåŠ¡éœ€è¦ï¼ŒåŒæ—¶å› ä¸ºåŸç‰ˆæ€§èƒ½ã€å®‰å…¨æ€§ã€å·²çŸ¥bugã€åŠŸèƒ½ç­‰åŸå› ï¼Œè¿›è¡Œè¿‡äºŒæ¬¡å¼€å‘ï¼ˆå¦‚apache,php,mysqlï¼‰ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¹Ÿä¼šæ ¹æ®ä¸åŒä¸šåŠ¡ç±»å‹è¿›è¡Œå®šåˆ¶çš„ï¼Œå¦‚æŸäº›åº”ç”¨å±äºè¿ç®—å‹ã€æŸäº›æ˜¯é«˜IOå‹ã€æˆ–å¤§å­˜å‚¨å¤§å†…å­˜å‹ã€‚æ ¹æ®è¿™äº›ç‰¹ç‚¹è¿›è¡Œå†…æ ¸ä¼˜åŒ–å®šåˆ¶ï¼Œå¦‚sinaå°±åœ¨memcacheä¸Šè¿›è¡Œè¿‡äºŒæ¬¡å¼€å‘ï¼Œæå‡ºäº†ä¸€ä¸ªMemcacheDBï¼Œå…·ä½“åšå¾—å¦‚ä½•æˆ‘ä»¬ä¸è°ˆï¼Œä½†å¼€æºäº†ï¼Œæ˜¯å€¼å¾—ç§°èµçš„ï¼Œå›½å†…å…¬å¸å¯¹äºå¼€æºåŸºæœ¬ä¸Šæ˜¯ç´¢å–ï¼Œæ²¡æœ‰è´¡çŒ®ï¼›å¦å¤–ï¼ŒæœåŠ¡å™¨ä¹Ÿä¸æ˜¯å¤§å®¶æ‰€ç†ŸçŸ¥çš„å‹å·ï¼Œæ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹ï¼Œå¤§éƒ¨ä»½éƒ½æ˜¯æ‰¾DELL/HP/ibmè¿›è¡Œè¿‡å®šåˆ¶ï¼›å¦å¤–ï¼Œåœ¨åˆ†å¸ƒå¼å‚¨å­˜æ–¹é¢éƒ½æœ‰è‡ªå·²è§£å†³æ–¹æ¡ˆï¼Œè¦ä¸å°±æ˜¯ä½¿ç”¨ç°æˆå¼€æºhadoopç­‰è§£å†³æ–¹æ¡ˆï¼Œæˆ–è‡ªå·²å¼€å‘ã€‚ä½†90%éƒ½æ˜¯å€Ÿé‰´google GFSçš„æ€æƒ³:åˆ†å¸ƒå¼å­˜å‚¨ã€è®¡ç®—ã€å¤§è¡¨ã€‚</p>
</li>
<li><p>bã€å„å…¬å¸ä¸šåŠ¡æ–¹å‘ä¸ä¸€æ ·ï¼Œä¼šå¯¼è‡´è¿ç»´æ¨¡å¼æˆ–æ–¹æ³•éƒ½ä¸ä¸€æ ·ï¼Œå¦‚51.comå’Œbaiduè¿ç»´è‚¯å®šåŒºåˆ«å¾ˆå¤§ï¼Œå› ä¸ºä»–ä»¬ä¸šåŠ¡æ¨¡å¼å†³å®šäº†å…¶æ¶æ„ã€æœåŠ¡å™¨é‡çº§ã€IDCåˆ†å¸ƒã€ç½‘ç»œç»“æ„ã€é€šç”¨æŠ€æœ¯éƒ½ä¼šä¸ä¸€æ ·ï¼Œä¸»æ‰“æ–°é—»é—¨æˆ·çš„sinaä¸ä¸»æ‰“snsçš„51.comè¿ç»´æ¨¡å¼å·®å¼‚å°±éå¸¸å¤§,ç”šè‡³èŒè´£éƒ½ä¸å¤§ä¸€æ ·ï¼›ä½†æœ‰ä¸€ç‚¹ï¼Œé€šç”¨æŠ€æœ¯åŠå¤§è‡´æ¶æ„ä¸Šéƒ½å¤§åŒå°å¼‚ï¼Œå¤§å®¶ä¸è¦å¤ªç¥åŒ–ï¼Œæ›´å¤šçš„å…¬å¸åªæ˜¯ç©å’ç§¯æœ¨çš„æ¸¸æˆç½¢äº†ï¼Œæ²¡ä»€ä¹ˆæŠ€æœ¯å«é‡ã€‚</p>
</li>
<li><p>cã€å¦‚ä¸Šé¢æ‰€è®²ï¼Œç›®å‰å¤§å‹ç½‘ç«™è¿ç»´è¿˜å¤„äºå¹¼å¹´æ—¶æœŸç†å¿µå’Œç»éªŒéƒ½æ¯”è¾ƒé›¶æ•£ï¼Œæ²¡æœ‰æˆç†Ÿçš„çŸ¥è¯†ä½“ç³»ï¼Œå¯èƒ½å…·ä½“ä»€ä¹ˆæ˜¯è¿ç»´ï¼Œå¤§å®¶éƒ½è¦å…ˆæ€ç´¢ä¸€ç•ªï¼Œæˆ–å‹æ ¹æ²¡æƒ³è¿‡ï¼ŒçœŸæ­£è®¨è®ºä¹Ÿåªæ˜¯è¿ç»´å·¥ä½œçš„å†°å±±ä¸€è§’ï¼Œå±€é™äºå…·ä½“æŠ€æœ¯ç»†èŠ‚ï¼Œæˆ–æŸæŸè‘—åç½‘ç«™å¤§çš„æ¡†æ¶ï¼ŒçœŸæ­£è¿ç»´ä½“åŒ–ä¸œè¥¿æ²¡æœ‰ï¼Œè¿™ä¹Ÿè®¸æ˜¯ç›®å‰ç½‘ä¸Šè¿ç»´ç›¸å…³èµ„æ–™æ¯”è¾ƒå°‘çš„åŸæ•…å§ã€‚æˆ–è€…ä¹Ÿæ˜¯å›½å†…è¿ç»´äººå‘˜æ¯”è¾ƒéš¾æ‹›ï¼Œæ¯”è¾ƒç‰›çš„è¿ç»´å·¥ç¨‹å¸ˆæ¯”è¾ƒå°‘è§çš„åŸå› ä¹‹ä¸€å§ã€‚</p>
</li>
</ul>
<h4 id="äºŒã€è¿ç»´å·¥ä½œå¸ˆéœ€è¦ä»€ä¹ˆæ ·çš„æŠ€èƒ½åŠç´ è´¨"><a href="#äºŒã€è¿ç»´å·¥ä½œå¸ˆéœ€è¦ä»€ä¹ˆæ ·çš„æŠ€èƒ½åŠç´ è´¨" class="headerlink" title="äºŒã€è¿ç»´å·¥ä½œå¸ˆéœ€è¦ä»€ä¹ˆæ ·çš„æŠ€èƒ½åŠç´ è´¨"></a>äºŒã€è¿ç»´å·¥ä½œå¸ˆéœ€è¦ä»€ä¹ˆæ ·çš„æŠ€èƒ½åŠç´ è´¨</h4><p>åšä¸ºä¸€åè¿ç»´å·¥ç¨‹å¸ˆéœ€è¦ä»€ä¹ˆæ ·çš„æŠ€èƒ½åŠç´ è´¨å‘¢ï¼Œé¦–å…ˆè¯´è¯´æŠ€èƒ½å§ï¼Œå¦‚å¤§å®¶ä¸Šé¢æ‰€çœ‹åˆ°ï¼Œè¿ç»´æ˜¯ä¸€ä¸ªé›†å¤šITå·¥ç§æŠ€èƒ½ä¸ä¸€èº«çš„å²—ä½ï¼Œå¯¹ç³»ç»Ÿ-&gt;ç½‘ç»œ-&gt;å­˜å‚¨-&gt;åè®®-&gt;éœ€æ±‚-&gt;å¼€å‘-&gt;æµ‹è¯•-&gt;å®‰å…¨ç­‰å„ç¯èŠ‚éƒ½éœ€è¦äº†è§£ä¸€äº›ï¼Œä½†å¯¹äºæŸäº›ç¯èŠ‚éœ€ç†Ÿæ‚‰ç”šè‡³ç²¾é€šï¼Œå¦‚ç³»ç»Ÿ(åŸºæœ¬æ“ä½œç³»ç»Ÿçš„ç†Ÿæ‚‰ä½¿ç”¨,*nix,windows..)ã€åè®®ã€ç³»ç»Ÿå¼€å‘(æ—¥å¸¸å¾ˆé‡è¦çš„å·¥ä½œæ˜¯è‡ªåŠ¨è¿ç»´åŒ–ç›¸å…³å¼€å‘ã€å¤§è§„æ¨¡é›†ç¾¤å·¥å…·å¼€å‘ã€ç®¡ç†ï¼‰ã€é€šç”¨åº”ç”¨ï¼ˆå¦‚lvsã€haã€web serverã€dbã€ä¸­é—´ä»¶ã€å­˜å‚¨ç­‰ï¼‰ã€ç½‘ç»œ,IDCæ‹“æœ´æ¶æ„ï¼›</p>
<h4 id="æŠ€èƒ½æ–¹é¢æ€»ç»“ä»¥ä¸‹å‡ ç‚¹ï¼š"><a href="#æŠ€èƒ½æ–¹é¢æ€»ç»“ä»¥ä¸‹å‡ ç‚¹ï¼š" class="headerlink" title="æŠ€èƒ½æ–¹é¢æ€»ç»“ä»¥ä¸‹å‡ ç‚¹ï¼š"></a>æŠ€èƒ½æ–¹é¢æ€»ç»“ä»¥ä¸‹å‡ ç‚¹ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1ã€å¼€å‘èƒ½åŠ›ï¼Œè¿™ç‚¹éå¸¸é‡è¦ï¼Œå› ä¸ºè¿ç»´å·¥å…·éƒ½éœ€è¦è‡ªå·²å¼€å‘ï¼Œå¼€å‘è¯­è¨€ï¼šperlã€pythonã€phpï¼ˆå…¶ä¸­ä¹‹ä¸€ï¼‰ã€shellï¼ˆawk,sed,expectâ€¦.ç­‰ï¼‰ï¼Œéœ€è¦æœ‰è¿‡å®é™…é¡¹ç›®å¼€å‘ç»éªŒï¼Œå¦åˆ™å·¥ä½œä¼šéå¸¸ç—›è‹¦ã€‚</div><div class="line"></div><div class="line">2ã€é€šç”¨åº”ç”¨æ–¹é¢éœ€è¦äº†è§£ï¼šæ“ä½œç³»ç»Ÿï¼ˆç›®å‰å›½å†…ä¸»è¦æ˜¯linuxã€bsdï¼‰ã€webserverç›¸å…³</div><div class="line">(nginx,apahe,php,lighttpd,javaã€‚ã€‚ã€‚)ã€æ•°æ®åº“(mysql,oralce)ã€å…¶å®ƒæ‚ä¸ƒå…«æ‹‰çš„ä¸œä¸œï¼›ç³»ç»Ÿä¼˜åŒ–ï¼Œé«˜å¯é æ€§ï¼›è¿™äº›åªæ˜¯åŠ åˆ†é¡¹ï¼Œä¸éœ€å¿…å¤‡ï¼Œå¯ä»¥è¾¹å·¥ä½œè¾¹æ…¢æ…¢å­¦ï¼Œè¿™äº›ä¸œè¥¿éƒ½ä¸éš¾ã€‚å½“ç„¶åœ¨è¿ç»´ä¸­ï¼Œæœ‰äº›æ˜¯æœ‰åˆ†å·¥åé‡ç‚¹ä¸ä¸€æ ·ã€‚</div><div class="line"></div><div class="line">3ã€ç³»ç»Ÿã€ç½‘ç»œã€å®‰å…¨ï¼Œå­˜å‚¨ï¼ŒCDNï¼ŒDBç­‰éœ€è¦ç›¸å½“äº†è§£ï¼ŒçŸ¥é“å…¶ç›¸å…³åŸç†ã€‚</div></pre></td></tr></table></figure>
<h4 id="ä¸ªäººç´ è´¨æ–¹é¢ï¼š"><a href="#ä¸ªäººç´ è´¨æ–¹é¢ï¼š" class="headerlink" title="ä¸ªäººç´ è´¨æ–¹é¢ï¼š"></a>ä¸ªäººç´ è´¨æ–¹é¢ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line">1ã€æ²Ÿé€šèƒ½åŠ›ã€å›¢é˜Ÿåä½œï¼šè¿ç»´å·¥ä½œè·¨éƒ¨é—¨ã€è·¨å·¥ç§å·¥ä½œå¾ˆå¤šï¼Œéœ€å–„äºæ²Ÿé€šã€å¹¶ä¸”å›¢é˜Ÿåä½œèƒ½åŠ›è¦å¼ºï¼›è¿™åº”è¯¥æ˜¯ç°ä»£ä¼ä¸šçš„åŸºæœ¬ç´ è´¨è¦æ±‚äº†ï¼Œä¸å¤šè¯´ã€‚</div><div class="line">2ã€å·¥ä½œä¸­éœ€èƒ†å¤§å¿ƒç»†ï¼šèƒ†å¤§æ‰èƒ½åˆ›æ–°ã€ä¸èµ°å¯»å¸¸è·¯ï¼Œç‰¹åˆ«å¯¹äºè¿ç»´è¿™ç§æ–°çš„å·¥ç§ï¼Œæ›´éœ€åˆ›æ–°æ‰èƒ½ä¿ƒè¿›å‘å±•ï¼›å¿ƒç»†ï¼Œè¿ç»´å·¥ç¨‹å¸ˆæ˜¯ç½‘ç«™admin,æœ€é«˜çº¿ä¸Šæƒé™è€…ï¼Œä¸€ä¸å°å¿ƒå°±ä¼šé—æ†¾ç»ˆç”Ÿæˆ–æ‰“å…¥åå…«å±‚åœ°ç‹±ã€‚</div><div class="line">3ã€ä¸»åŠ¨æ€§ã€æ‰§è¡ŒåŠ›ã€ç²¾åŠ›æ—ºç››ã€æŠ—å‹èƒ½åŠ›å¼ºï¼šç”±äºITè¡Œä¸šçš„ç‰¹æ€§ï¼Œå˜åŒ–å¿«ï¼›å¾€å¾€è®¡åˆ’èµ¶ä¸ä¸Šå˜åŒ–ï¼Œè¿ç»´å·¥ä½œå°±æ›´çªå‡ºäº†ï¼Œæ¯”å¦‚å›½å†…å„å¤§å…¬å¸æœåŠ¡å™¨å¾€å¾€æ˜¯</div><div class="line">å…¨å›½å„åœ°ï¼Œå“ªé‡Œä¾¿å®œæ€§ä»·æ¯”é«˜ï¼Œå°±é‚£å¾€æ¬ï¼Œè¿›è¡Œå¤§è§„æ¨¡æœåŠ¡è¿ç§»ï¼ˆç‰µæ‰¯çš„æœåŠ¡å™¨æˆç™¾ä¸Šåƒå°ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¤´ç—›çš„é—®é¢˜ï¼›å¾€å¾€æ—¶é—´</div><div class="line">éå¸¸ç´§è¿«ï¼Œå¦‚é™1å‘¨å†…å®Œæˆï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¿ç»´å·¥ç¨‹å¸ˆçš„ä¸»åŠ¨æ€§åŠæ‰§è¡ŒåŠ›å°±æœ‰å¾ˆé«˜çš„è¦æ±‚äº†ï¼šè®¡åˆ’ã€æ–¹æ¡ˆã€æœåŠ¡æ— ç¼è¿ç§»ã€æœºå™¨æ¬è¿ä¸Šæ¶ã€ç¯å¢ƒå‡†å¤‡ã€å®‰å…¨è¯„ä¼°ã€æ€§</div><div class="line">èƒ½è¯„ä¼°ã€åŸºå»ºã€å„å…³è”éƒ¨é—¨æ‰¯çš®,7X24å°ç´§æ€¥äº‹æ•…å“åº”ç­‰ã€‚</div><div class="line">4ã€å…¶å®ƒå°±æ˜¯ä¸€äº›åŸºæœ¬ç´ è´¨äº†ï¼šå¤´è„‘è¦çµå…‰ã€é€»è¾‘æ€ç»´èƒ½åŠ›å¼ºã€ä¸ºäººè°¦è™šç¨³é‡ã€äº²å’ŒåŠ›ã€ä¹äºåŠ©äººã€æœ‰å¤§å±€è§‚ã€‚</div><div class="line">5ã€æœ€åä¸€ç‚¹ï¼Œåšç½‘ç«™è¿ç»´éœ€è¦æœ‰æ¢ç´¢åˆ›æ–°ç²¾ç¥ï¼Œé€šè¿‡åˆ›æ–°å‹æ€ç»´è§£å†³ç°å®ä¸­çš„é—®é¢˜ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¤„äºå¹¼å¹´çš„èŒä¸šï¼ˆå›½å¤–ä¹Ÿä¸€æ ·ï¼Œä½†æ¯”å›½å†…èµ·æ­¥æ—©ç‚¹ï¼‰ï¼Œæ²¡æœ‰æˆç†Ÿä½“ç³»æˆ–æ–¹æ³•è®ºå¯ä»¥å€Ÿé‰´ï¼Œåªèƒ½é å¤§å®¶è‡ªå·²æ‘¸ç´¢åŠªåŠ›ã€‚</div><div class="line">ä¸‰ã€æ€æ ·æ‰ç®—æ˜¯ä¸€ä¸ªåˆæ ¼çš„è¿ç»´å·¥ç¨‹å¸ˆ</div><div class="line">1ã€ä¿è¯æœåŠ¡è¾¾åˆ°è¦æ±‚çš„çº¿ä¸Šæ ‡å‡†ï¼Œå¦‚99.9%ï¼›ä¿è¯çº¿ä¸Šç¨³å®šï¼Œè¿™æ˜¯è¿ç»´å·¥ç¨‹å¸ˆçš„åŸºæœ¬è´£èŒæ‰€åœ¨ã€‚</div><div class="line">2ã€ä¸æ–­çš„æå‡åº”ç”¨çš„å¯é æ€§ä¸å¥å£®æ€§ã€æ€§èƒ½ä¼˜åŒ–ã€å®‰å…¨æå‡ï¼›è¿™æ–¹é¢éå¸¸è€ƒéªŒä¸»åŠ¨æ€§å’Œåˆ›æ–°æ€ç»´ã€‚</div><div class="line">3ã€ç½‘ç«™å„å±‚é¢ç›‘æ§ã€ç»Ÿè®¡çš„è¦†ç›–åº¦ï¼Œè½¯ä»¶ã€ç¡¬ä»¶ã€è¿è¡ŒçŠ¶æ€ï¼Œèƒ½ç›‘æ§çš„éƒ½éœ€è¦ç›‘æ§ç»Ÿè®¡ï¼Œé¿å…ç›‘æ§æ­»è§’ã€å¹¶èƒ½å®æ—¶äº†è§£åº”ç”¨çš„è¿è½¬æƒ…å†µã€‚</div><div class="line">4ã€é€šè¿‡åˆ›æ–°æ€ç»´è§£å†³è¿ç»´æ•ˆç‡é—®é¢˜ï¼›ç›®å‰å„å…¬å¸å¤§éƒ¨ä»½è¿ç»´ä¸»è¦å·¥ä½œè¿˜æ˜¯ä¾èµ–äººå·¥æ“ä½œå¹²é¢„ï¼Œéœ€è¦å°½å¯èƒ½çš„è§£æ”¾åŒæ‰‹ã€‚</div><div class="line">5ã€è¿ç»´çŸ¥è¯†çš„ç§¯ç´¯ä¸æ²‰æ·€ã€æ–‡æ¡£çš„å®Œå¤‡æ€§ï¼Œè¿ç»´æ˜¯ä¸€ä¸ªç»éªŒæ€§éå¸¸å¼ºçš„å²—ä½ï¼Œå¥½çš„ç»éªŒä¸é™·é˜±éƒ½éœ€ç§¯ç´¯ä¸‹æ¥ï¼Œé¿å…é‡å¤æ€§èŒƒé”™ã€‚</div><div class="line">6ã€è®¡åˆ’æ€§å’Œæ‰§è¡ŒåŠ›ï¼›å·¥ä½œæœ‰è®¡åˆ’ï¼Œè®¡åˆ’åæƒ³æ³•è®¾æ³•è¾¾åˆ°ç›®æ ‡ï¼Œä¸æ‰¾å€Ÿå£ã€‚</div><div class="line">7ã€è‡ªåŠ¨åŒ–è¿ç»´ï¼›èƒ½å¯¹æ—¥å¸¸æœºæ¢°åŒ–å·¥ä½œè¿›è¡Œæç‚¼ã€è®¾è®¡å¹¶å¼€å‘æˆå·¥å…·ã€ç³»ç»Ÿï¼Œèƒ½è®©ç³»ç»Ÿè‡ªåŠ¨å®Œæˆçš„å°½é‡ä¾é ç³»ç»Ÿï¼›è®©å¤§å®¶æ›´å¤šçš„æ—¶é—´ç”¨äºæ€è€ƒã€åˆ›æ–°æ€ç»´ã€åšè‡ªå·²å–œæ¬¢çš„äº‹æƒ…ã€‚</div><div class="line">ä»¥ä¸Šåªæ˜¯æŠ€æœ¯ä¸Šçš„ä¸€äº›å±‚é¢ï¼Œå½“ç„¶ä¸ªäººæ„è¯†ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚</div><div class="line">å››ã€è¿ç»´èŒä¸šçš„è¿·æƒ˜ã€ç°çŠ¶ä¸å‘å±•å‰æ™¯</div><div class="line">è¿ç»´å²—ä½ä¸åƒå…¶å®ƒå²—ä½ï¼Œå¦‚ç ”å‘å·¥ç¨‹å¸ˆã€æµ‹è¯•å·¥ç¨‹å¸ˆç­‰ï¼Œæœ‰éå¸¸æ˜ç¡®çš„èŒè´£å®šä½åŠèŒä¸šè§„åˆ’ï¼Œæ¯”è¾ƒæœ‰èŒä¸šè®¤åŒæ„Ÿä¸æˆå°±æ„Ÿï¼›è€Œè¿ç»´å·¥ä½œå¯èƒ½ç»™äººçš„æ„Ÿè§‰æ˜¯å“ªæ–¹é¢éƒ½äº†</div><div class="line">è§£</div><div class="line">ä¸€äº›ï¼Œä½†åˆéƒ½æ¯”ä¸Šä¸“èŒå·¥ç¨‹å¸ˆæ›´ç²¾é€šã€æ„Ÿè§‰å¹³æ—¶è¢«å…³æ³¨åº¦æ¯”è¾ƒä½ï¼ˆé™¤éçº¿ä¸Šå‡ºç°æ•…éšœï¼‰ï¼Œæ…¢æ…¢çš„å¤§å®¶å°±ä¼šè¿·æƒ˜ï¼Œå¯¹èŒä¸šå‘å±•äº§ç”Ÿå›°æƒ‘,ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§ç°è±¡å‘¢ï¼Ÿé™¤äº†</div><div class="line">èŒä¸šæœ¬èº«ç‰¹ç‚¹å¤–ï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºå¯¹è¿ç»´äº†è§£ä¸æ·±å…¥ã€åšå¾—ä¸æ·±å…¥å¯¼è‡´ï¼›å…¶å®è¿™ä¸ªé—®é¢˜å…¶å®ƒå²—ä½ä¹Ÿä¼šå‡ºç°ï¼Œä½†æˆ‘å‘ç°è¿ç»´æ›´å…¸å‹ï¼Œæ›´å®¹æ˜“å‡ºç°è¿™ä¸ªé—®é¢˜ï¼›</div><div class="line">é’ˆå¯¹è¿™ä¸ªé—®é¢˜æˆ‘è°ˆä¸€ä¸‹ç½‘ç«™è¿ç»´çš„ç°çŠ¶åŠå‘å±•å‰æ™¯ï¼ˆä¹Ÿåœ¨æ€è€ƒä¸­ï¼Œå¯èƒ½ä¸å¤ªæ·±å…¥å…¨é¢ï¼Œä¹Ÿè¯·å¤§å®¶æ–§æ­£è¡¥å……ï¼‰</div><div class="line">è¿ç»´ç°çŠ¶ï¼š</div><div class="line">1ã€å¤„äºåˆšèµ·æ­¥çš„åˆçº§é˜¶æ®µï¼Œå„å¤§å…¬å¸æœ‰æ­¤ä¸“èŒï¼Œä½†é‡è§†æˆ–é‡è¦ç¨‹åº¦ä¸é«˜ï¼Œå¯æ›¿ä»£æ€§å¼ºï¼›å°å…¬å¸æ›´å¤šæ˜¯ç”±å…¶å®ƒå²—ä½æ¥å…¼é¡¾åšè¿™ä¸€å—å·¥ä½œï¼Œæ²¡æœ‰ä¸“èŒï¼Œä¹Ÿä¸å¯èƒ½åšå¾—æ·±å…¥ã€‚</div><div class="line">2ã€æŠ€æœ¯å±‚æ¬¡æ¯”è¾ƒä½ï¼›ä¸»è¦å¤„äºæŠ€æœ¯æ¢ç´¢ã€ç§¯ç´¯é˜¶æ®µï¼Œæ²¡æœ‰å‹æˆä½“ç³»åŒ–çš„ç†å¿µã€æŠ€æœ¯ã€‚</div><div class="line">3ã€ä½“åŠ›åŠ³åŠ¨åå¤§ï¼›è¿™ä¸ªé—®é¢˜ä¸»è¦ä¸ç¬¬äºŒç‚¹æœ‰å…³ç³»ï¼Œå¾ˆå¤šäº‹æƒ…è¿˜æ˜¯ä¾é äººåŠ›è¿›è¡Œï¼Œæ²¡æœ‰å®Œæˆå¥½çš„æç»ƒï¼Œå¯¹äºå¤§è§„æ¨¡é›†ç¾¤æ²¡æœ‰æˆç†Ÿçš„è‡ªåŠ¨åŒ–ç®¡ç†æ–¹æ³•ï¼Œåœ¨æ­¤è¯´æ˜ä¸€ä¸‹ï¼Œå¤§è§„æ¨¡é›†ç¾¤ä¸è¿ç»´å·¥ä½œæ˜¯æ¯æ¯ç›¸å…³çš„å¦‚æœåªæ˜¯ç™¾åæ¥å°æœºå™¨ï¼Œé‚£å°±æ²¡æœ‰è¿ç»´å¤ªå¤§çš„ç”Ÿå­˜ç©ºé—´äº†ã€‚</div><div class="line">4ã€ä¼˜ç§€è¿ç»´äººæ‰çš„æåº¦ç¼ºä¹ï¼›ç›®å‰å„å¤§å…¬å¸åŸºæœ¬ä¸Šéƒ½é è‡ªå·²åŸ¹å…»ï¼Œè¿™ä¸ªç°çŠ¶å¯¼è‡´è¡Œä¸šå†…è¿ç»´äººæ‰çš„æµåŠ¨æ€§éå¸¸ä½ï¼Œéå¸¸å¤šå¥½çš„æŠ€æœ¯éƒ½å±€é™åœ¨å„å¤§å…¬å¸å†…éƒ¨ï¼Œ</div><div class="line">å¦‚ google 50ä¸‡å°æœºå™¨ç§‘å­¦çš„ç®¡ç†,æˆ–è€…å›½å†…äº’è”å…¬å¸top 10</div><div class="line">çš„ä¸€äº›è¿ç»´ç»éªŒï¼Œè¿™äº›ç»éªŒæ˜¯éå¸¸æœ‰ä»·å€¼çš„ä¸œè¥¿å¹¶å†³å®šäº†ä¸€ä¸ªå…¬å¸çš„æ ¸å¿ƒç«äº‰åŠ›ï¼›è¿™äº›é—®é¢˜è¿›è€Œå¯¼è‡´ä¸šå†…å…ˆè¿›è¿ç»´æŠ€æœ¯çš„æµé€šã€è´¯é€šã€ä¸å€Ÿç­¾ï¼Œå¹¶æœ€ç»ˆå°†é™åˆ¶äº†è¿ç»´</div><div class="line">å‘å±•ã€‚</div><div class="line">5ã€å¾ˆå¤šä¼˜ç§€çš„è¿ç»´ç»éªŒéƒ½æŒæ¡åœ¨å¤§å…¬å¸æ‰‹ä¸­ï¼›è¿™ä¸åœ¨äºå…¬å¸çš„æŠ€æœ¯å®åŠ›ï¼Œè€Œåœ¨äºå¤§å…¬å¸çš„æŠ€æœ¯è§„æ¨¡ã€æµ·é‡PVã€ç¡¬ä»¶è§„æ¨¡è¶³å¤Ÿå¤§ï¼Œå¦‚baiduå¯æ€•çš„æµ</div><div class="line">é‡ã€ 51.comæµ·é‡æ•°æ®~~~~è¿™äº›å› ç´ å†³å®šäº†ä»–ä»¬é‡åˆ°çš„é—®é¢˜éƒ½æ˜¯å…¶å®ƒä¸­/å°å…¬å¸è¿˜æ²¡æœ‰é‡åˆ°çš„ï¼Œæˆ–å³å°†é‡åˆ°ã€‚ä½†å¤§å…¬å¸å¯èƒ½å·²æœ‰å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆæˆ–ç³»ç»Ÿã€‚</div><div class="line">å‘å±•å‰æ™¯ï¼š</div><div class="line">1ã€ä»è¡Œä¸šè§’åº¦æ¥çœ‹ï¼Œéšç€ä¸­å›½äº’è”ç½‘çš„é«˜é€Ÿå‘å±•ï¼ˆç›®å‰ä¸­å›½ç½‘æ°‘å·²è·ƒå‡ä¸ºå…¨çƒç¬¬ä¸€ï¼‰ã€ç½‘ç«™è§„æ¨¡è¶Šæ¥è¶Šæ¥å¤§ã€æ¶æ„è¶Šæ¥è¶Šå¤æ‚ï¼›å¯¹ä¸“èŒç½‘ç«™è¿ç»´å·¥ç¨‹å¸ˆã€ç½‘ç«™æ¶æ„</div><div class="line">å¸ˆçš„è¦æ±‚ä¼šè¶Šæ¥è¶Šæ€¥è¿«,ç‰¹åˆ«æ˜¯å¯¹æœ‰ç»éªŒçš„ä¼˜ç§€è¿ç»´äººæ‰éœ€æ±‚é‡å¤§ï¼Œè€Œä¸”æ˜¯è¶Šè€è¶Šå€¼é’±ï¼›ç›®å‰å›½å†…åŸºæœ¬ä¸Šéƒ½æ˜¯é€‰æ‹©æ¯•ä¸šç”ŸåŸ¹å…»ï¼ˆé™äºå¤§å…¬å¸ï¼‰ï¼ŒåŸ¹å…»æˆæœ¬é«˜ï¼Œè€Œä¸”æ²¡</div><div class="line">æœ‰ç»éªŒäººæ‰åŠ å…¥ä¼šå¯¼è‡´å…¬å¸æŠ€æœ¯æ›´æ–°ç¼“æ…¢ã€å½±å“å…¬å¸çš„æŠ€æœ¯å‘å±•ï¼›å½“ç„¶ï¼Œæ¯•ä¸šç”Ÿä¹Ÿæœ‰å¥½å¤„ï¼šç™½çº¸ä¸€å¼ ï¼Œå¯å¡‘æ€§å¼ºï¼Œæ¯”è¾ƒè®¤åŒå¹¶å®¹æ˜“èå…¥ä¼ä¸šæ–‡åŒ–ã€‚</div><div class="line">2ã€ä»ä¸ªäººè§’åº¦ï¼Œè¿ç»´å·¥ç¨‹å¸ˆæŠ€æœ¯å«é‡åŠè¦æ±‚ä¼šè¶Šæ¥è¶Šé«˜ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¯¹å…¬å¸åº”ç”¨ã€æ¶æ„æœ€äº†è§£æœ€ç†Ÿæ‚‰çš„äººã€è¶Šæ¥è¶Šå¾—åˆ°é‡è§†ã€‚</div><div class="line">3ã€ç½‘ç«™è¿ç»´å°†æˆä¸ºä¸€ä¸ªèåˆå¤šå­¦ç§‘ï¼ˆç½‘ç»œã€ç³»ç»Ÿã€å¼€å‘ã€å®‰å…¨ã€åº”ç”¨æ¶æ„ã€å­˜å‚¨ç­‰ï¼‰çš„ç»¼åˆæ€§æŠ€æœ¯å²—ä½ï¼Œç»™å¤§å®¶æä¾›ä¸€ä¸ªå¾ˆå¥½çš„ä¸ªäººèƒ½åŠ›ä¸æŠ€æœ¯å¹¿åº¦çš„å‘å±•ç©ºé—´ã€‚</div><div class="line">4ã€è¿ç»´å·¥ä½œçš„ç›¸å…³ç»éªŒå°†ä¼šå˜å¾—éå¸¸é‡è¦ï¼Œè€Œä¸”ä¹Ÿå°†æˆä¸ºä¸ªäººçš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œå…·å¤‡å¾ˆå¥½çš„å„å±‚é¢é—®é¢˜çš„è§£å†³èƒ½åŠ›åŠæ–¹æ¡ˆæä¾›ã€å…¨å±€æ€è€ƒèƒ½åŠ›ç­‰ã€‚</div><div class="line">5ã€ç‰¹é•¿å‘æŒ¥å’Œå…´è¶£çš„åŸ¹å…»ï¼›ç”±äºè¿ç»´å²—ä½æ‰€æ¥è§¦çš„çŸ¥è¯†é¢éå¸¸å¹¿é˜”ï¼Œæ›´å®¹æ˜“åŸ¹å…»æˆ–å‘æŒ¥å‡ºä¸ªäººæŸäº›æ–¹é¢çš„ç‰¹é•¿æˆ–çˆ±å¥½ï¼Œå¦‚å†…æ ¸ã€ç½‘ç»œã€å¼€å‘ã€æ•°æ®åº“ç­‰æ–¹é¢ï¼Œå¯ä»¥åšå¾—éå¸¸æ·±å…¥ç²¾é€šã€æˆä¸ºè¿™æ–¹é¢çš„ä¸“å®¶ã€‚</div><div class="line">6ã€å¦‚æœçœŸè¦ä»¥åä¸æƒ³åšè¿ç»´äº†ï¼Œè½¬åˆ°å…¶å®ƒå²—ä½ä¹Ÿæ¯”è¾ƒå®¹æ˜“ï¼Œä¸ä¼šæœ‰å¤ªå¤§çš„å±€é™æ€§ã€‚å½“ç„¶äº†ï¼Œä½ å¾—çœŸæ­£ç”¨å¿ƒå»åšã€‚</div><div class="line">7ã€æŠ€æœ¯å‘å±•æ–¹å‘ï¼šç½‘ç«™/ç³»ç»Ÿæ¶æ„å¸ˆã€‚</div><div class="line">äº”ã€è¿ç»´å…³é”®æŠ€æœ¯ç‚¹è§£å‰–</div><div class="line">1ã€ å¤§è§„æ¨¡é›†ç¾¤ç®¡ç†é—®é¢˜</div><div class="line">é¦–å…ˆæˆ‘ä»¬å…ˆè¦æ˜ç¡®é›†ç¾¤çš„æ¦‚å¿µï¼Œé›†ç¾¤ä¸æ˜¯æ³›æŒ‡å„åŠŸèƒ½æœåŠ¡å™¨çš„æ€»åˆï¼Œè€Œæ˜¯æŒ‡ä¸ºäº†è¾¾åˆ°æŸä¸€ç›®çš„æˆ–åŠŸèƒ½çš„æœåŠ¡å™¨ã€ç¡¬ç›˜èµ„æºçš„æ•´åˆï¼ˆæœºå™¨æ•°å¤§äºä¸¤å°ï¼‰ï¼Œå¯¹äºåº”ç”¨æ¥è¯´</div><div class="line">å®ƒå°±æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œç›®å‰å¸¸è§„é›†ç¾¤å¯åˆ†ä¸ºï¼šé«˜å¯ç”¨æ€§é›†ç¾¤ï¼ˆHAï¼‰ï¼Œè´Ÿè½½å‡è¡¡é›†ç¾¤ï¼ˆå¦‚lvsï¼‰ï¼Œåˆ†å¸ƒå¼å‚¨ã€è®¡ç®—å­˜å‚¨é›†ç¾¤ï¼ˆDFSï¼Œå¦‚google gfs</div><div class="line">,yahoo</div><div class="line">hadoopï¼‰ï¼Œç‰¹å®šåº”ç”¨é›†ç¾¤ï¼ˆæŸä¸€ç‰¹å®šåŠŸèƒ½æœåŠ¡å™¨ç»„åˆã€å¦‚dbã€cacheå±‚ç­‰ï¼‰ï¼Œç›®å‰äº’è”ç½‘è¡Œä¸šä¸»è¦åŸºäºè¿™å››ç§ç±»å‹ï¼›å¯¹äºå‰ä¸¤ç§ç±»ä¼¼ï¼Œå¦‚æœä¸šåŠ¡ç®€å•ã€</div><div class="line">åº”ç”¨ä¸Špostæ“ä½œæ¯”è¾ƒå°‘ï¼Œå¯ä»¥ç®€å•çš„é‡‡ç”¨å››å±‚äº¤æ¢æœº</div><div class="line">è§£å†³ï¼ˆå¦‚f5ï¼‰ï¼Œè¾¾åˆ°æœåŠ¡é«˜å¯ç”¨/è´Ÿè´£å‡è¡¡çš„ä½œç”¨ï¼Œå¯¹äºèµ„æºç´§å¼ çš„å…¬å¸ä¹Ÿæœ‰ä¸€äº›å¼€æºè§£å†³åŠæ³•å¦‚lvs+ha,éå¸¸çµæ´»ï¼›å¯¹äºåä¸¤ç§ï¼Œé‚£å°±è€ƒéªŒå…¬å¸æŠ€æœ¯å®åŠ›</div><div class="line">åŠåº”ç”¨ç‰¹ç‚¹äº†ï¼Œç¬¬ä¸‰ç§DFSä¸»è¦åº”ç”¨äºæµ·é‡æ•°æ®åº”ç”¨ä¸Šï¼Œå¦‚é‚®ä»¶ã€æœç´¢ç­‰åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯æœç´¢è¦æ±‚å°±æ›´é«˜äº†ï¼Œé™¤äº†ç®€å•æµ·é‡å­˜å‚¨ï¼Œè¿˜åŒ…æ‹¬æ•°æ®æŒ–æ˜ã€ç”¨æˆ·è¡Œä¸ºåˆ†æï¼›</div><div class="line">å¦‚</div><div class="line">googleã€yahooå°±èƒ½ä¿å­˜åˆ†æè¿‘ä¸€å¹´çš„ç”¨æˆ·è®°å½•æ•°æ®ï¼Œè€Œbaiduåº”è¯¥å°‘äº30å¤©ã€soguoå°±æ›´å°‘äº†ã€‚ã€‚ã€‚è¿™äº›å¯¹äºæœç´¢å‡†å¤‡æ€§ã€åŠç”¨æˆ·ä½“éªŒæ˜¯è‡³</div><div class="line">å…³é‡è¦çš„ã€‚</div><div class="line">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†è°ˆè°ˆå¦‚ä½•ç§‘å­¦çš„ç®¡ç†é›†ç¾¤ï¼Œæœ‰ä»¥ä¸‹å…³é”®å‡ ç‚¹ï¼š</div><div class="line">Iã€ç›‘æ§</div><div class="line">ä¸»è¦åŒ…æ‹¬æ•…éšœç›‘æ§å’Œæ€§èƒ½ã€æµé‡ã€è´Ÿè½½ç­‰çŠ¶æ€ç›‘æ§ï¼Œè¿™äº›ç›‘æ§å…³ç³»åˆ°é›†ç¾¤çš„å¥åº·è¿è¡Œï¼ŒåŠæ½œåœ¨é—®é¢˜çš„åŠæ—¶å‘ç°ä¸å¹²é¢„ï¼›</div><div class="line">aã€æœåŠ¡æ•…éšœã€çŠ¶æ€ç›‘æ§ï¼šä¸»è¦æ˜¯å¯¹æœåŠ¡å™¨è‡ªèº«ã€ä¸Šå±‚åº”ç”¨ã€å…³è”æœåŠ¡æ•°æ®äº¤äº’ç›‘æ§ï¼›ä¾‹å¦‚é’ˆå¯¹å‰ç«¯web</div><div class="line">serverï¼Œæˆ‘ä»¬å°±å¯ä»¥æœ‰å¾ˆå¤šç§ç±»å‹çš„ç›‘æ§ï¼ŒåŒ…æ‹¬åº”ç”¨ç«¯å£</div><div class="line">çŠ¶æ€ç›‘æ§ï¼Œä¾¿äºåŠæ—¶å‘ç°æœåŠ¡å™¨æˆ–åº”ç”¨æœ¬èº«æ˜¯å¦crashã€é€šè¿‡icmpåŒ…æ¢æµ‹æœåŠ¡å™¨å¥åº·çŠ¶æ€ï¼Œæ›´ä¸Šå±‚å¯èƒ½è¿˜åŒ…æ‹¬åº”ç”¨å„é¢‘é“ä¸šåŠ¡çš„ç›‘æ§ï¼Œå¸¸ç”¨æ–¹æ³•æ˜¯é‡‡ç”¨é¢ä¸š</div><div class="line">ç‰¹å¾ç è¿›è¡Œåˆ¤æ–­ï¼Œæˆ–å¯¹é‡ç‚¹é¡µé¢è¿›è¡Œç­¾åï¼Œä»¥ç½‘ç«™è¢«é»‘ç¯¡æ”¹ï¼ˆæŠ¥è­¦ã€å¹¶è‡ªåŠ¨æ¢å¤è¢«ç¯¡æ”¹æ•°æ®ï¼‰ç­‰ç­‰ï¼Œè¿™äº›åªæ˜¯ä¸€éƒ¨ä»½ï¼Œè¿˜æœ‰Nå¤šç›‘æ§æ–¹å¼ï¼Œä¾åº”ç”¨ç‰¹ç‚¹è€Œå®šï¼Œè¿˜æœ‰ä¸€</div><div class="line">äº›é—®é¢˜éœ€è§£å†³ï¼Œå¦‚é›†ç¾¤è¿‡å¤§ï¼Œå¦‚ä½•é«˜æ€§èƒ½çš„è¿›è¡Œç›‘æ§ä¹Ÿæ˜¯ä¸€ä¸ªç°å®é—®é¢˜ã€‚</div><div class="line">bã€å…¶å®ƒå°±æ˜¯é›†ç¾¤çŠ¶æ€ç±»çš„ç›‘æ§æˆ–ç»Ÿè®¡ï¼Œä¸ºæˆ‘ä»¬åˆç†ç®¡ç†è°ƒä¼˜é›†ç¾¤æä¾›æ•°æ®å‚è€ƒã€åŒ…æ‹¬æœåŠ¡ç“¶é¢ˆã€æ€§èƒ½é—®é¢˜ã€å¼‚å¸¸æµé‡ã€æ”»å‡»ç­‰é—®é¢˜ã€‚</div><div class="line">IIã€æ•…éšœç®¡ç†</div><div class="line">aã€ç¡¬ä»¶æ•…éšœé—®é¢˜ï¼›å¯¹äºæˆç™¾ä¸Šåƒæˆ–ä¸Šä¸‡æœºå™¨çš„Nå¤š</div><div class="line">é›†ç¾¤ï¼ŒæœåŠ¡å™¨æ­»æœºã€ç¡¬ä»¶æ•…éšœæ¦‚ç‡æ˜¯éå¸¸å¤§çš„ï¼Œå‡ ä¹æ¯æ—¶æ¯åˆ»éƒ½æœ‰æœåŠ¡ç¡¬ä»¶é—®é¢˜ï¼Œæ­»æœºã€ç¡¬ç›˜æŸåã€ç”µæºã€å†…å­˜ã€äº¤æ¢æœºã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åœ¨è®¾è®¡ç½‘ç«™æ¶æ„æ—¶éœ€</div><div class="line">è¦å……åˆ†è€ƒè™‘åˆ°è¿™äº›é—®é¢˜ï¼Œå¹¶å°†å…¶è§†ä¸ºå¸¸æ€ï¼›æ›´å¤šçš„ä¾é åº”ç”¨çš„å†—ä½™æœºåˆ¶æ¥è§„é¿è¿™ç§é£é™©ï¼Œä½†ç»™ç³»ç»Ÿå·¥ç¨‹å¸ˆè¶³å¤Ÿå®½è£•çš„å¤„ç†æ—¶é—´ã€‚ï¼ˆå¦‚googleä¸æ˜¯å·ç§°åŒæ—¶æ­»</div><div class="line">800å°æœºå™¨ï¼ŒæœåŠ¡ä¸ä¼šå—åˆ°ä»»ä½•å½±å“å—ï¼‰ï¼›è¿™å°±æ˜¯è€ƒéªŒè¿ç»´å·¥ç¨‹å¸ˆåŠç½‘ç«™æ¶æ„å¸ˆåŠŸèƒ½çš„åœ°æ–¹äº†ï¼Œå¥½çš„è®¾è®¡èƒ½è¾¾åˆ°googleæ‰€æè¿°è‡ªæ¢å¤èƒ½åŠ›ï¼Œå¦‚gfsï¼Œç³Ÿç³•</div><div class="line">çš„è®¾è®¡é‚£å°±æ˜¯ä¸€å°æœåŠ¡å™¨çš„æ­»æœºå¯èƒ½ä¼šé€ æˆå¤§é¢ç§¯æœåŠ¡çš„è¿é”æ•…éšœåæ˜ ï¼Œç›´æ¥å¯¹ç”¨æˆ·æ‹’ç»å“åº”ã€‚</div><div class="line">bã€åº”ç”¨æ•…éšœé—®é¢˜ï¼›å¯èƒ½æ˜¯æŸä¸€bugè¢«è§¦å‘ã€æˆ–æŸä¸€æ€§èƒ½é˜€å€¼è¢«è¶…è¶Šã€æ”»å‡»ç­‰æƒ…å†µä¸ä¸€è€Œå®šï¼Œä½†é‡è¦çš„ä¸€ç‚¹ï¼Œæ˜¯è¦æœ‰å¯¹è¿™äº›é—®é¢˜çš„é¢„é˜²æ€§æªæ–½ï¼Œä¸èƒ½æƒ³å½“ç„¶ï¼Œå®ƒä¸</div><div class="line">ä¼šå‡ºé—®é¢˜ï¼Œå¦‚çœŸå‡ºé—®é¢˜äº†ï¼Œå¦‚ä½•åº”å¯¹ï¼Ÿè¿™éœ€è¦è¿ç»´å·¥ç¨‹å¸ˆå¹³æ—¶åšè¶³åŠŸå¤«ï¼ŒåŒ…æ‹¬åº”æ€¥å“åº”é€Ÿåº¦ã€æ•…éšœå¤„ç†çš„ç§‘å­¦æ€§ã€å¤‡ç”¨æ–¹æ¡ˆçš„æœ‰æ•ˆç­‰ã€‚</div><div class="line">IIIã€è‡ªåŠ¨åŒ–</div><div class="line">è‡ªåŠ¨åŒ–ï¼šç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å°†æˆ‘ä»¬æ—¥å¸¸æ‰‹åŠ¨è¿›è¡Œçš„ä¸€äº›å·¥ä½œé€šè¿‡å·¥å…·ï¼Œç³»ç»Ÿè‡ªåŠ¨æ¥å®Œæˆï¼Œè§£æ”¾æˆ‘ä»¬çš„åŒæ‰‹åŠæ¯ç‡¥çš„é‡å¤æ€§åŠ³åŠ¨ï¼Œä¾‹å¦‚ï¼šæ²¡æœ‰å·¥å…·å‰ï¼Œæˆ‘ä»¬å®‰è£…ç³»ç»Ÿéœ€è¦</div><div class="line">ä¸€å°ä¸€å°è£¸æœºå®‰è£…ï¼Œå¦‚2000å°ï¼Œå¯èƒ½éœ€è¦10äºº/10å¤©ï¼Œæçƒ‚Nå¼ å…‰ç›˜ï¼ŒäººåŠ›æˆæœ¬æ›´å¤§ã€‚ã€‚ã€‚è€Œç°åœ¨é€šè¿‡è‡ªåŠ¨åŒ–å·¥å…·ï¼Œåªéœ€å‡ ä¸ªç®€å•å‘½ä»¤</div><div class="line">å°±èƒ½æå®šã€è¿˜æœ‰å¦‚æœºå™¨äººç±»ç¨‹åºï¼Œè‡ªåŠ¨å®Œæˆä»¥å¾€æ¯å¤©äººå·¥å¹²é¢„çš„å·¥ä½œï¼Œä½¿å…¶è‡ªåŠ¨å®Œæˆã€æ±‡æŠ¥ç»“æœï¼Œå¹¶å…·å¤‡ä¸€å®šçš„ä¸“å®¶ç³»ç»Ÿèƒ½åŠ›ï¼Œèƒ½åšä¸€äº›ç®€å•çš„æ˜¯/éåˆ¤æ–­ã€ä¼˜åŒ–é€‰</div><div class="line">æ‹©ç­‰ã€‚ã€‚ã€‚è¿™äº›å¥½å¤„éå¸¸æ˜æ˜¾ä¸å†å¤šè¯´ã€‚ã€‚ã€‚åº”è¯¥è¯´ï¼Œè‡ªåŠ¨åŒ–è¿ç»´æ˜¯è¿ç»´å·¥ç¨‹å¸ˆèŒä¸šåŒ–çš„ä¸€ä¸ªè¿½æ±‚ï¼Œåˆ©å·²åˆ©å…¬ï¼Œè™½ç„¶è¿™æ˜¯ä¸€ä¸ªå¼‚å¸¸è‰°å·¨çš„ä»»åŠ¡ï¼šä¸æ–­å˜æ›´çš„ä¸šåŠ¡ã€ä¸</div><div class="line">è§„èŒƒåŒ–çš„åº”ç”¨è®¾è®¡ã€å¼€å‘æ¨¡å¼ã€ç½‘ç»œæ¶æ„å˜æ›´ã€IDCå˜æ›´ã€è§„èŒƒå˜åŠ¨ç­‰å› ç´ ï¼Œéƒ½å¯èƒ½ä¼šå¯¹ç°æœ‰è‡ªåŠ¨åŒ–ç³»ç»Ÿäº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥éœ€è¦æ¨¡å—åŒ–ã€æ¥å£åŒ–ã€å˜å› å‚æ•°åŒ–ç­‰å› </div><div class="line">æ­¤ï¼Œè‡ªåŠ¨åŒ–ç›¸å…³å·¥ä½œï¼Œæ˜¯è¿ç»´å·¥ç¨‹å¸ˆçš„æ ¸å¿ƒé‡ç‚¹å·¥ä½œä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ä»·å€¼çš„ä½“ç°ã€‚</div></pre></td></tr></table></figure>
<h3 id="äº¤æµå­¦ä¹ ï¼š"><a href="#äº¤æµå­¦ä¹ ï¼š" class="headerlink" title="äº¤æµå­¦ä¹ ï¼š"></a>äº¤æµå­¦ä¹ ï¼š</h3><p>ğŸ§  Linux shell_é«˜çº§è¿ç»´æ´¾: <code>459096184</code>    åœˆå­ (ç³»ç»Ÿè¿ç»´-åº”ç”¨è¿ç»´-è‡ªåŠ¨åŒ–è¿ç»´-è™šæ‹ŸåŒ–æŠ€æœ¯ç ”ç©¶æ¬¢è¿åŠ å…¥)<br>ğŸ§  BigData-Exchange School : <code>521621407</code>  åœˆå­ï¼ˆå¤§æ•°æ®è¿ç»´)ï¼ˆHadoopå¼€å‘äººå‘˜)ï¼ˆå¤§æ•°æ®ç ”ç©¶çˆ±å¥½è€…) æ¬¢è¿åŠ å…¥</p>
<p>ç›¸åº”Bidataæœ‰å†…éƒ¨å¾®ä¿¡äº¤æµç¾¤äº’ç›¸å­¦ä¹ ï¼ŒåŠ å…¥QQç¾¤æœ‰é“¾æ¥ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/09/12/è‡ªåŠ¨åŒ–+Jenkins/Jenkins/ç”¨Ansible + Jenkins+mavenï¼‹nginxæå®šè‡ªåŠ¨å‘å¸ƒï¼Œæ„å»ºç¨‹åºçš„æŒç»­é›†æˆå¹³å°/">Ansible + Jenkins+Mavenï¼‹Nginxæå®šè‡ªåŠ¨å‘å¸ƒï¼Œæ„å»ºç¨‹åºçš„æŒç»­é›†æˆå¹³å°</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-09-12</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/automation/">automation</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Jenkins/">Jenkins</a> <a class="article__tag-link" href="/tags/Manven/">Manven</a>
			</span>
		
	</div>

	

	
		<h1 id="Ansible-Jenkinsæå®šè‡ªåŠ¨å‘å¸ƒï¼Œæ„å»ºç¨‹åºçš„æŒç»­é›†æˆå¹³å°"><a href="#Ansible-Jenkinsæå®šè‡ªåŠ¨å‘å¸ƒï¼Œæ„å»ºç¨‹åºçš„æŒç»­é›†æˆå¹³å°" class="headerlink" title="Ansible+Jenkinsæå®šè‡ªåŠ¨å‘å¸ƒï¼Œæ„å»ºç¨‹åºçš„æŒç»­é›†æˆå¹³å°"></a>Ansible+Jenkinsæå®šè‡ªåŠ¨å‘å¸ƒï¼Œæ„å»ºç¨‹åºçš„æŒç»­é›†æˆå¹³å°</h1><p>Ansibleæ˜¯ç›¸å¯¹ç®€å•çš„æ‰¹é‡ç®¡ç†å·¥å…·ï¼Œæ”¯æŒæ¨¡æ¿ç®¡ç†ç­‰é«˜çº§åŠŸèƒ½ã€‚æå®šäº†è‡ªåŠ¨å‘å¸ƒï¼Œå¼€å‘çš„æœåŠ¡å™¨éœ€æ±‚å·²ç»æ˜æ˜¾ä¸‹é™ï¼Œåªè¦æŠŠä»£ç æäº¤åˆ° Gitä¸»å¹²ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘å‘å¸ƒã€‚</p>
<p>ä»Šå¤©æœ‰ç©ºå°±ç®€å•è®°å½•ä¸‹ç”¨Ansible + Jenkinsæå®šè‡ªåŠ¨å‘å¸ƒ ã€‚è¿™ç¯‡æ˜¯ä¸»è¦ç¯å¢ƒå®‰è£…ã€‚</p>
<h3 id="ä¸€ã€ä»€ä¹ˆæ˜¯æŒç»­é›†æˆ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯æŒç»­é›†æˆ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯æŒç»­é›†æˆ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯æŒç»­é›†æˆ</h3><p><strong>1ã€ä»€ä¹ˆæ˜¯é›†æˆ</strong></p>
<p>æŒ‡çš„æ˜¯ä»£ç ç”±ç¼–è¯‘ã€å‘å¸ƒå’Œæµ‹è¯•ã€ç›´åˆ°ä¸Šçº¿çš„ä¸€ä¸ªè¿‡ç¨‹</p>
<p><strong>2ã€ä»€ä¹ˆæŒç»­é›†æˆ</strong></p>
<p>é«˜æ•ˆçš„ã€æŒç»­æ€§è´¨çš„ä¸æ–­è¿­ä»£ä»£ç çš„é›†æˆå·¥ä½œ</p>
<p><strong>3ã€å¦‚ä½•é«˜æ•ˆå‡†ç¡®çš„å®ç°æŒç»­é›†æˆ</strong></p>
<p>å¿…ä¸å¯å°‘çš„éœ€è¦ä¸€å¥—èƒ½è‡ªåŠ¨åŒ–ã€å¹¶ä¸”å¯è§†åŒ–çš„å¹³å°æ¥å¸®åŠ©æˆ‘ä»¬ã€‚</p>
<p>é‚£ä¹ˆæ€»ç»“æ¥çœ‹ï¼ŒJenkinså°±æ˜¯ä¸€ä¸ªå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°æŒç»­é›†æˆçš„å¹³å°ã€‚</p>
<h3 id="äºŒã€ä¸ºä»€ä¹ˆJenkinsèƒ½å¸®åŠ©æˆ‘ä»¬è¿›è¡ŒæŒç»­é›†æˆ"><a href="#äºŒã€ä¸ºä»€ä¹ˆJenkinsèƒ½å¸®åŠ©æˆ‘ä»¬è¿›è¡ŒæŒç»­é›†æˆ" class="headerlink" title="äºŒã€ä¸ºä»€ä¹ˆJenkinsèƒ½å¸®åŠ©æˆ‘ä»¬è¿›è¡ŒæŒç»­é›†æˆ"></a>äºŒã€ä¸ºä»€ä¹ˆJenkinsèƒ½å¸®åŠ©æˆ‘ä»¬è¿›è¡ŒæŒç»­é›†æˆ</h3><p> ç†ç”±æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š</p>
<p><strong>1ã€Jenkinsæ˜¯ä¸€ä¸ªå¼€æºçš„ã€ä¸”åŸºäºJAVAä»£ç å¼€å‘çš„æŒç»­é›†æˆç³»ç»Ÿã€‚</strong></p>
<p>å› ä¸ºå«æœ‰éå¸¸ä¸°å¯Œçš„æ’ä»¶æ”¯æŒæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„æ‰“é€šç‰ˆæœ¬åº“ã€æµ‹è¯•æ„å»ºç¯å¢ƒã€çº¿ä¸Šç¯å¢ƒçš„æ‰€æœ‰ç¯èŠ‚ã€‚å¹¶ä¸”ä¸°å¯Œå‹å¥½çš„é€šçŸ¥ä½¿ç”¨è€…å’Œå¼€å‘ã€ç®¡ç†äººå‘˜ã€‚</p>
<p><strong>2ã€å®‰è£…ç»´æŠ¤ç®€å•</strong></p>
<p>å®‰è£…Jenkinsï¼Œä¸å¤ªå¤æ‚ã€‚ä¸”æ”¯æŒé€šç”¨çš„å¹³å°ã€‚</p>
<p><strong>3ã€Java åº”ç”¨ å¸¸ç”¨</strong></p>
<p>åœ¨ä¼ä¸šçš„è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒJAVAçš„åº”ç”¨å·¥ç¨‹ç¨æ˜¾å¤æ‚ï¼Œç”±äºå¤æ‚æ„å»ºã€å’Œä»£ç ä¸Šçº¿ã€å¹¶ä¸”æœåŠ¡çš„é‡å¯ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸‹æ¥ï¼Œæ¶ˆè€—çš„æ—¶é—´è¾ƒå¤šï¼ŒJenkinså´èƒ½å¾ˆå¥½çš„é›†æˆmavençš„ç¼–è¯‘æ–¹å¼ï¼Œä¸”åˆ©ç”¨è‡ªåŠ¨åŒ–çš„æ’ä»¶ã€å’Œè‡ªå®šä¹‰å¼€å‘è„šæœ¬çš„æ”¯æŒã€‚æ‰€ä»¥ç›®å‰å¹¿æ³›çš„åº”ç”¨äºJAVAå·¥ç¨‹çš„æŒç»­é›†æˆå¹³å°ã€‚</p>
<p>å¥½äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘å°±æ¥ä»‹ç»ï¼Œå¦‚ä½•æ­å»ºä¸€å¥—å¿«é€Ÿæœ‰æ•ˆçš„Jenkinsè‡ªåŠ¨åŒ–å‘å¸ƒæŒç»­é›†æˆå¹³å°ã€‚</p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸ºäº†æé«˜å·¥ä½œæ•ˆç‡ï¼Œé¿å…é‡å¤çš„æ‰‹åŠ¨å‘åŒ…éƒ¨ç½²å·¥ä½œï¼Œç‰¹æ­å»ºJenkins+Ansibleçš„è‡ªåŠ¨éƒ¨ç½²å¹³å°ã€‚<br>ä¸»è¦å®ç°åŸç†æ˜¯ï¼š</p>
<ul>
<li>ç”±Jenkinsæ‹‰å–gitä»£ç   </li>
<li>ä½¿ç”¨Mavenå‘½ä»¤ç¼–è¯‘æ‰“åŒ…  </li>
<li>é€šè¿‡Ansible å‘é€waråŒ…åˆ°å¯¹åº”çš„æœåŠ¡å™¨  </li>
<li>é€šè¿‡Ansibleæ‰§è¡Œè¿œç¨‹æœåŠ¡å™¨çš„é‡å¯å‘½ä»¤ </li>
<li>å‘å¸ƒå®Œæˆã€‚</li>
</ul>
<h3 id="ä¸€-ç¯å¢ƒä»‹ç»"><a href="#ä¸€-ç¯å¢ƒä»‹ç»" class="headerlink" title="ä¸€. ç¯å¢ƒä»‹ç»"></a>ä¸€. ç¯å¢ƒä»‹ç»</h3><p>æœ¬å¹³å°æ­å»ºåœ¨CentOS6ç¯å¢ƒä¸­ï¼Œå…¶ä»–linuxç¯å¢ƒæƒ…å†µç±»ä¼¼ã€‚<br>åœ¨è‡ªåŠ¨éƒ¨ç½²æœåŠ¡å™¨ä¸­éœ€è¦å®‰è£…ä»¥ä¸‹è½¯ä»¶ï¼š</p>
<ol>
<li>JDK</li>
<li>Git</li>
<li>Maven</li>
<li>Tomcat</li>
<li>Jenkins</li>
<li>Ansible</li>
</ol>
<h3 id="äºŒ-æ­¥éª¤ï¼š"><a href="#äºŒ-æ­¥éª¤ï¼š" class="headerlink" title="äºŒ. æ­¥éª¤ï¼š"></a>äºŒ. æ­¥éª¤ï¼š</h3><ol>
<li>ansibleå®‰è£…ä¸é…ç½®ï¼›</li>
<li>Jenkinsçš„å®‰è£…ï¼›</li>
<li>Jenkinsçš„é…ç½®ï¼›</li>
<li>å®‰è£…é…ç½®tomcat</li>
<li>å®‰è£…é…ç½®Javaï¼›</li>
<li>å®‰è£…é…ç½®mavenï¼›</li>
<li>nginxåå‘ä»£ç†é…ç½®è®¿é—®åŸŸåï¼›</li>
<li>ç›¸å…³æ’ä»¶å®‰è£…ï¼›</li>
<li>ç³»ç»Ÿè®¾ç½®æ˜ç»†ï¼›</li>
<li>slaveèŠ‚ç‚¹é…ç½®ï¼›</li>
<li>ä¸€äº›ä¾èµ–é¡¹çš„å®‰è£…ã€‚</li>
</ol>
<h4 id="1-1-Ansibleç®€å•ä»‹ç»"><a href="#1-1-Ansibleç®€å•ä»‹ç»" class="headerlink" title="1.1    Ansibleç®€å•ä»‹ç»"></a>1.1    Ansibleç®€å•ä»‹ç»</h4><p>Ansibleæ˜¯ä¸€ä¸ªéƒ¨ç½²ä¸€ç¾¤è¿œç¨‹ä¸»æœºçš„å·¥å…·ã€‚è¿œç¨‹çš„ä¸»æœºå¯ä»¥æ˜¯æœ¬åœ°æˆ–è€…è¿œç¨‹çš„è™šæ‹Ÿ æœºï¼Œä¹Ÿå¯ä»¥æ˜¯è¿œç¨‹çš„ç‰©ç†æœºã€‚<br>Ansibleé€šè¿‡SSHåè®®è¿›è¡Œç®¡ç†èŠ‚ç‚¹å’Œè¿œç¨‹èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ã€‚ç†è®ºä¸Šè¯´ç®¡ç†å‘˜é€šè¿‡ sshåˆ°ä¸€å°è¿œç¨‹ä¸»æœºä¸Šèƒ½åšçš„æ“ä½œAnsibleéƒ½å¯ä»¥åšã€‚åŒ…æ‹¬ï¼šæ‹·è´æ–‡ä»¶ã€å®‰è£…åŒ…ã€å¯åŠ¨æœåŠ¡â€¦</p>
<p>æ€»ç»“ï¼š<strong>AnsibleæŠŠä¸€äº›shellå‘½ä»¤å°è£…æˆä¸€ä¸ªä¸ªæ¨¡å—ï¼Œå¹¶é€šè¿‡SSHè¿æ¥ï¼Œåœ¨è¿œç¨‹æœºå™¨ä¸Šæ‰§è¡Œè¿™äº›æ¨¡å—åŒ…å«çš„è„šæœ¬ã€‚</strong></p>
<h4 id="1-2-Ansibleå®‰è£…ä¸é…ç½®"><a href="#1-2-Ansibleå®‰è£…ä¸é…ç½®" class="headerlink" title="1.2    Ansibleå®‰è£…ä¸é…ç½®"></a>1.2    Ansibleå®‰è£…ä¸é…ç½®</h4><p>ç³»ç»Ÿç¯å¢ƒï¼šcentos7.1<br>ç›´æ¥ä½¿ç”¨yumå®‰è£…ansible</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># yum install http://mirrors.sohu.com/fedora-epel/6/x86_64/epel-release-6-8.noarch.rpm</span></div><div class="line"><span class="comment"># yum install ansible</span></div></pre></td></tr></table></figure>
<p>å®‰è£…å®Œæˆä¹‹åï¼Œéœ€è¦<code>ansible</code>ä¸­çš„<code>hosts</code>æ–‡ä»¶åˆ†ç»„ï¼Œç¼–è¾‘<code>/etc/ansible/hosts</code>æ–‡ä»¶ï¼Œå°†ç›®æ ‡æœºå™¨åŠ å…¥åˆ†ç»„ï¼Œå¹¶é…ç½®å¥½é¢ç§˜é’¥ç™»å½•ã€‚<br>Ansibleæ›´å¤šè¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„<a href="http://blog.yangcvo.me/2016/03/07/%E8%87%AA%E5%8A%A8%E5%8C%96/Ansible/Ansible%20%E5%B0%8F%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89ansible%E7%9A%84%E5%AE%89%E8%A3%85%20/" target="_blank" rel="external">ansibleså­¦ä¹ ç¯‡</a></p>
<h4 id="äºŒ-å®‰è£…Jenkinsç¯å¢ƒ"><a href="#äºŒ-å®‰è£…Jenkinsç¯å¢ƒ" class="headerlink" title="äºŒ. å®‰è£…Jenkinsç¯å¢ƒ"></a>äºŒ. å®‰è£…Jenkinsç¯å¢ƒ</h4><p>1)    å®‰è£…å¹¶é…ç½®å¥½JAVAã€JDKã€Tomcatï¼Œå¹¶å»å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„waråŒ…ã€‚</p>
<p>å»å®˜ç½‘ä¸‹è½½åŒ…èµ„æºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">apache-tomcat-8.0.28.tar.gz</div><div class="line">jenkins.war</div><div class="line">jdk1.8.0_66.tar.gz</div><div class="line">maven.tar.gz</div></pre></td></tr></table></figure>
<p>æ²¡æœ‰ä¸‹è½½æˆåŠŸçš„æˆ‘è¿™é‡Œå·²ä¸‹è½½å¥½äº†ã€‚æœ€æ–°ç‰ˆæœ¬<br><a href="http://oak0aohum.bkt.clouddn.com/jenkins.war" target="_blank" rel="external">jenkins.war</a><br><a href="http://oak0aohum.bkt.clouddn.com/apache-tomcat-8.0.28.tar.gz" target="_blank" rel="external">tomcat.tar.gz</a><br><a href="http://oak0aohum.bkt.clouddn.com/maven.tar.gz" target="_blank" rel="external">maven.tar.gz</a></p>
<h5 id="2-1-jdkå®‰è£…ï¼š"><a href="#2-1-jdkå®‰è£…ï¼š" class="headerlink" title="2.1 jdkå®‰è£…ï¼š"></a>2.1 jdkå®‰è£…ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">tar -zxvf jdk1.8.0_66.tar.gz -C /srv/.</div><div class="line">         </div><div class="line">è¿™é‡Œåœ¨é…ç½®ç¯å¢ƒå˜é‡ã€‚</div><div class="line"></div><div class="line">vim /etc/profile.d/java.sh</div><div class="line"><span class="built_in">export</span> JAVA_HOME=/srv/jdk1.8.0_66</div><div class="line"><span class="built_in">export</span> CLASS_PATH=<span class="string">"<span class="variable">$JAVA_HOME</span>/lib:<span class="variable">$JAVA_HOME</span>/jre/lib"</span></div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</div><div class="line"></div><div class="line">[root@Jenkins ~]<span class="comment"># java -version</span></div><div class="line">java version <span class="string">"1.8.0_66"</span></div><div class="line">Java(TM) SE Runtime Environment (build 1.8.0_66-b17)</div><div class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.66-b17, mixed mode)</div></pre></td></tr></table></figure>
<h5 id="2-2-Tomcatå®‰è£…é…ç½®ï¼š"><a href="#2-2-Tomcatå®‰è£…é…ç½®ï¼š" class="headerlink" title="2.2 Tomcatå®‰è£…é…ç½®ï¼š"></a>2.2 Tomcatå®‰è£…é…ç½®ï¼š</h5><p>Jenkinså®˜ç½‘ï¼š<a href="https://jenkins.io/index.html" target="_blank" rel="external">https://jenkins.io/index.html</a><br>å¯å‚è€ƒæˆ‘ä¹‹å‰å†™çš„æ–‡æ¡£ï¼š<a href="http://blog.yangcvo.me/2015/11/21/tomcat/%E6%90%AD%E5%BB%BA%E9%85%8D%E7%BD%AEtomcat%E7%8E%AF%E5%A2%83/" target="_blank" rel="external">æ­å»ºé…ç½®tomcatç¯å¢ƒ</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tar -zxvf apache-tomcat-8.0.28.tar.gz -C /srv/.</div><div class="line">mv apache-tomcat-8.0.28 tomcat</div><div class="line">useradd <span class="_">-s</span> /sbin/nologin tomcat </div><div class="line">chown -R tomcat:tomcat tomcat</div></pre></td></tr></table></figure>
<p>2)    æ”¾åœ¨é…ç½®å¥½Tomcatï¼Œå¯åŠ¨Jenkinsï¼Œæ ¹æ®æç¤ºï¼Œè¾“å…¥å®‰è£…ç§˜é’¥ã€‚</p>
<h5 id="2-3-jenkinså®‰è£…é…ç½®ï¼š"><a href="#2-3-jenkinså®‰è£…é…ç½®ï¼š" class="headerlink" title="2.3 jenkinså®‰è£…é…ç½®ï¼š"></a>2.3 jenkinså®‰è£…é…ç½®ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mv jenkins.war /srv/tomcat/webapps/. </div><div class="line"><span class="built_in">cd</span> /tomcat</div><div class="line">./bin/startup.sh</div><div class="line">ç„¶åæ‰“å¼€åœ°å€ï¼šhttp://192.168.1.183:8080/jenkins</div><div class="line">æ–°ç‰ˆæœ¬ä¼šæç¤ºä¸‹è½½å®‰è£…æ’ä»¶ã€‚ä¸‹è½½ä»¥åä¼šè®©ä½ è®¾ç½®è´¦å·å’Œå¯†ç è¿˜æœ‰é‚®ç®±ã€‚</div></pre></td></tr></table></figure>
<p>è¿›å…¥å®‰è£…ç•Œé¢:<br>ç¬¬ä¸€æ¬¡ï¼Œç™»å½•ï¼Œéœ€è¦è¿›è¡Œä¸€ä¸ªè§£é” ï¼Œé¡µé¢ä¹Ÿä¼šæœ‰æç¤º.</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins1.png" alt=""></figure></p>
<p>ç§˜é’¥çš„å…·ä½“ä½ç½®åœ¨ï¼š<code>/root/.jenkins/secrets/initialAdminPassword</code>ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªæ–‡ä»¶ä¸­æŸ¥çœ‹å¯†ç ï¼Œå¹¶è¾“å…¥ã€‚</p>
<p>3)    è®¾ç½®å¥½ç™»å½•è´¦å·å¯†ç ï¼Œæ ¹æ®æ¨èé€‰é¡¹å®‰è£…æ’ä»¶ï¼Œç­‰å¾…ä¸‹è½½å®‰è£…å®Œæˆã€‚åœ¨æ’ä»¶å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½æœ‰äº›å®‰è£…ä¸æˆåŠŸï¼Œæš‚æ—¶å…ˆä¸ç”¨ç®¡ã€‚</p>
<p>å®ƒä¼šç»™æˆ‘ä»¬å®‰è£…ä¸€äº›åŸºç¡€çš„æ’ä»¶<br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins_01.png" alt=""></figure><br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins_02.png" alt=""></figure><br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins_03.png" alt=""></figure><br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins_04.png" alt=""></figure><br>æ—©æœŸjenkinsé»˜è®¤æ˜¯ä¸éœ€è¦ç™»é™†çš„ã€‚</p>
<h4 id="1-3-Maven-å®‰è£…å’Œé…ç½®"><a href="#1-3-Maven-å®‰è£…å’Œé…ç½®" class="headerlink" title="1.3 Maven å®‰è£…å’Œé…ç½®"></a>1.3 Maven å®‰è£…å’Œé…ç½®</h4><p>å®˜ç½‘ï¼š<a href="http://maven.apache.org/" target="_blank" rel="external">http://maven.apache.org/</a><br>å®˜ç½‘ä¸‹è½½ï¼š<a href="http://maven.apache.org/download.cgi" target="_blank" rel="external">http://maven.apache.org/download.cgi</a><br>å†å²ç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://archive.apache.org/dist/maven/binaries/" target="_blank" rel="external">https://archive.apache.org/dist/maven/binaries/</a><br>æ­¤æ—¶ï¼ˆ20160208ï¼‰ Maven æœ€æ–°ç‰ˆæœ¬ä¸ºï¼š<strong>3.3.9</strong></p>
<p>Maven 3.3 çš„ JDK æœ€ä½è¦æ±‚æ˜¯ JDK 1.7 - æˆ‘ä¸ªäººä¹ æƒ¯ <code>/opt</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç›®å½• <code>setups</code> ç”¨æ¥å­˜æ”¾å„ç§è½¯ä»¶å®‰è£…åŒ…ï¼›åœ¨ <code>/srv</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>program</code> ç”¨æ¥å­˜æ”¾å„ç§è§£å‹åçš„è½¯ä»¶åŒ…ï¼Œä¸‹é¢çš„è®²è§£ä¹Ÿéƒ½æ˜¯åŸºäºæ­¤ä¹ æƒ¯.</p>
<p>ä¸‹è½½å‹ç¼©åŒ…ï¼š<code>wget http://mirrors.cnnic.cn/apache/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.tar.gz</code><br>è§£å‹æŒ‡å®šåˆ°æˆ‘ä¸ªäººä¹ æƒ¯çš„å®‰è£…ç›®å½•ä¸‹ï¼š<code>tar zxvf apache-maven-3.3.9-bin.tar.gz -C /srv/program/.</code><br>ç§»åˆ°æˆ‘ä¸ªäººä¹ æƒ¯çš„å®‰è£…ç›®å½•ä¸‹ï¼š<code>mv maven3.3.9/ /srv/program/maven3</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ç¯å¢ƒå˜é‡è®¾ç½®ï¼švim /etc/profile.d/maven.sh</div><div class="line">    <span class="comment"># Maven</span></div><div class="line">    MAVEN_HOME=/srv/program/maven3</div><div class="line">    PATH=<span class="variable">$PATH</span>:<span class="variable">$MAVEN_HOME</span>/bin</div><div class="line">    MAVEN_OPTS=<span class="string">"-Xms256m -Xmx356m"</span></div><div class="line">    <span class="built_in">export</span> MAVEN_HOME</div><div class="line">    <span class="built_in">export</span> PATH</div><div class="line">    <span class="built_in">export</span> MAVEN_OPTS</div></pre></td></tr></table></figure>
<p>åˆ·æ–°é…ç½®æ–‡ä»¶ï¼š<code>source /etc/profile</code><br>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸï¼š<code>mvn -version</code></p>
<h4 id="1-3-1-Maven-é…ç½®"><a href="#1-3-1-Maven-é…ç½®" class="headerlink" title="1.3.1 Maven é…ç½®"></a>1.3.1 Maven é…ç½®</h4><ul>
<li>é…ç½®é¡¹ç›®è¿æ¥ä¸Šç§æœ</li>
<li>å…¨å±€æ–¹å¼é…ç½®ï¼š</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">settings</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/SETTINGS/1.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!--æœ¬åœ°ä»“åº“ä½ç½®--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>/srv/mv2<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">pluginGroups</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">pluginGroups</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">proxies</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">proxies</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!--è®¾ç½® Nexus è®¤è¯ä¿¡æ¯--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servers</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">server</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">password</span>&gt;</span>admin123<span class="tag">&lt;/<span class="name">password</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">server</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">server</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">password</span>&gt;</span>admin123<span class="tag">&lt;/<span class="name">password</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">server</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">servers</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!--è®¾ç½® Nexus é•œåƒï¼Œåé¢åªè¦æœ¬åœ°æ²¡å¯¹åº”çš„ä»¥æ¥ï¼Œåˆ™åˆ° Nexus å»æ‰¾--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8081/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8081/nexus/content/groups/public-snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://nexus-releases<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">releases</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://nexus-snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">releases</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://nexus-releases<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">releases</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://nexus-snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">releases</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">activeProfiles</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">activeProfile</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">activeProfile</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">activeProfiles</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>jenkinså‘å¸ƒä¿®æ”¹è¿‡ä»¥åï¼š</li>
</ul>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">settings</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span></div><div class="line">          <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">          <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0</span></div><div class="line">                               http://maven.apache.org/xsd/settings-1.0.0.xsd"&gt;</div><div class="line">                               </div><div class="line">                               </div><div class="line">         <span class="comment">&lt;!--è¡¨ç¤ºæœ¬åœ°åº“çš„ä¿å­˜ä½ç½®ï¼Œä¹Ÿå°±æ˜¯maven2ä¸»è¦çš„jarä¿å­˜ä½ç½®ï¼Œé»˜è®¤åœ¨$</span><span class="template-variable">&#123;user.dir&#125;</span><span class="xml"><span class="comment">/.m2/repositoryï¼Œå¦‚æœéœ€è¦å¦å¤–è®¾ç½®ï¼Œå°±æ¢æˆå…¶ä»–çš„è·¯å¾„ã€‚ --&gt;</span></span></div><div class="line">         </div><div class="line">  <span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>/srv/m2<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">interactiveMode</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">usePluginRegistry</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">offline</span>&gt;</span>false<span class="tag">&lt;/<span class="name">offline</span>&gt;</span></div><div class="line">  </div><div class="line">  </div><div class="line">  <span class="comment">&lt;!--å½“æ’ä»¶çš„ç»„ç»‡Idï¼ˆgroupIdï¼‰æ²¡æœ‰æ˜¾å¼æä¾›æ—¶ï¼Œä¾›æœå¯»æ’ä»¶ç»„ç»‡Idï¼ˆgroupIdï¼‰çš„åˆ—è¡¨ã€‚è¯¥å…ƒç´ åŒ…å«ä¸€ä¸ªpluginGroupå…ƒç´ åˆ—è¡¨ï¼Œæ¯ä¸ªå­å…ƒç´ åŒ…å«äº†ä¸€ä¸ªç»„ç»‡Idï¼ˆgroupIdï¼‰ã€‚</span></div><div class="line">å½“æˆ‘ä»¬ä½¿ç”¨æŸä¸ªæ’ä»¶ï¼Œå¹¶ä¸”æ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸ºå…¶æä¾›ç»„ç»‡Idï¼ˆgroupIdï¼‰çš„æ—¶å€™ï¼ŒMavenå°±ä¼šä½¿ç”¨è¯¥åˆ—è¡¨ã€‚é»˜è®¤æƒ…å†µä¸‹è¯¥åˆ—è¡¨åŒ…å«äº†org.apache.maven.pluginsã€‚ --&gt;</div><div class="line"></div><div class="line"> <span class="tag">&lt;<span class="name">pluginGroups</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!--pluginçš„ç»„ç»‡Idï¼ˆgroupIdï¼‰ --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">pluginGroup</span>&gt;</span>org.codehaus.mojo<span class="tag">&lt;/<span class="name">pluginGroup</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">pluginGroup</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">pluginGroup</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">pluginGroup</span>&gt;</span>org.mortbay.jetty<span class="tag">&lt;/<span class="name">pluginGroup</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">pluginGroups</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">servers</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">server</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>tomcat<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">username</span>&gt;</span>tomcat<span class="tag">&lt;/<span class="name">username</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">password</span>&gt;</span>keyfree123<span class="tag">&lt;/<span class="name">password</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">server</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">server</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">id</span>&gt;</span>haozhuo<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">username</span>&gt;</span>haozhuo<span class="tag">&lt;/<span class="name">username</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">password</span>&gt;</span>haozhuo123<span class="tag">&lt;/<span class="name">password</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">server</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!--d:server çš„id,ç”¨äºåŒ¹é…distributionManagementåº“idï¼Œæ¯”è¾ƒé‡è¦ã€‚ --&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">server</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!--username, password:ç”¨äºç™»é™†æ­¤æœåŠ¡å™¨çš„ç”¨æˆ·åå’Œå¯†ç  --&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">password</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">password</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">server</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">server</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">password</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">password</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">server</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">servers</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!--è¡¨ç¤ºé•œåƒåº“ï¼ŒæŒ‡å®šåº“çš„é•œåƒï¼Œç”¨äºå¢åŠ å…¶ä»–åº“ --&gt;</span></div><div class="line"></div><div class="line">   </div><div class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>hz<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>hz Central<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://nexus.haozhuo.com:8083/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>CN<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>OSChina Central<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.oschina.net/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">          <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">id</span>&gt;</span>ibiblio.org<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">name</span>&gt;</span>ibiblio Mirror of http://repo1.maven.org/maven2/<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://mirrors.ibiblio.org/pub/mirrors/maven2<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></div><div class="line"></div><div class="line">     <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></div><div class="line">        </div><div class="line">           <span class="comment">&lt;!--</span></div><div class="line">     &lt;mirror&gt;</div><div class="line">         &lt;id&gt;jboss-public-repository-group&lt;/id&gt;</div><div class="line">         &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</div><div class="line">         &lt;name&gt;JBoss Public Repository Group&lt;/name&gt;</div><div class="line">         &lt;url&gt;http://repository.jboss.org/nexus/content/groups/public&lt;/url&gt;</div><div class="line">     &lt;/mirror&gt;</div><div class="line">            --&gt;</div><div class="line">            </div><div class="line"> <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">activeProfiles</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--make the profile active all the time --&gt;</span></div><div class="line">     <span class="comment">&lt;!--&lt;activeProfile&gt;nexus&lt;/activeProfile&gt;   --&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">activeProfiles</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="ä¸‰-é…ç½®nginxåå‘ä»£ç†"><a href="#ä¸‰-é…ç½®nginxåå‘ä»£ç†" class="headerlink" title="ä¸‰. é…ç½®nginxåå‘ä»£ç†."></a>ä¸‰. é…ç½®nginxåå‘ä»£ç†.</h3><p>åœ¨nginxé…ç½®ç›®å½•/usr/local/nginx/conf/nginx.confï¼Œé…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">upstream tomcat-jenkins &#123;</div><div class="line">     server  192.168.1.220:8080 weight=1;</div><div class="line"> &#125;</div><div class="line"></div><div class="line"> server &#123;</div><div class="line">     listen       80;</div><div class="line">     server_name  jenkins.yjk.cn;</div><div class="line">     location / &#123;</div><div class="line">        index        index.html index.php index.jsp index.htm;</div><div class="line">        proxy_pass           http://tomcat-jenkins;</div><div class="line">        proxy_ignore_client_abort on;</div><div class="line">        proxy_redirect               off;</div><div class="line">        proxy_set_header     Host    <span class="variable">$host</span>;</div><div class="line">        proxy_set_header     X-Real-IP       <span class="variable">$remote_addr</span>;</div><div class="line">        proxy_set_header     X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</div><div class="line">     &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹/etc/hostsï¼Œåœ¨æœ«å°¾æ–°å¢ä¸€è¡Œ :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">127.0.0.1     jenkins.yjk.cn</div></pre></td></tr></table></figure>
<p>é‡å¯nginxï¼Œ<code>/usr/sbin/nginx -s reload</code>ï¼Œå³å¯ä»¥åœ°å€ <code>jenkins.yjk.cn</code> è®¿é—®Jenkinsä¸»é¡µ.</p>
<h3 id="å››-å®‰è£…éƒ¨åˆ†Jenkinsæ’ä»¶"><a href="#å››-å®‰è£…éƒ¨åˆ†Jenkinsæ’ä»¶" class="headerlink" title="å››. å®‰è£…éƒ¨åˆ†Jenkinsæ’ä»¶"></a>å››. å®‰è£…éƒ¨åˆ†Jenkinsæ’ä»¶</h3><p>è®¿é—®Jenkinsä¸»é¡µï¼š<a href="http://jenkins.yjk.cn" target="_blank" rel="external">http://jenkins.yjk.cn</a><br>ç³»ç»Ÿç®¡ç† â€“&gt; ç®¡ç†æ’ä»¶ â€“&gt; å¯é€‰æ’ä»¶;<br>å®‰è£…æ‰€éœ€è¦çš„æ’ä»¶(æ ¹æ®éœ€è¦è‡ªè¡Œé€‰æ‹©)ï¼Œå¦‚ <code>GitBucket Pluginã€ FindBugs Plug-in ã€Cobertura Plugin ã€ Violations Plugin ã€Email Extension Plugin</code>ç­‰</p>
<p>âš ï¸æ’ä»¶å®‰è£…ä¸æˆåŠŸå¤„ç†åŠæ³•ï¼š</p>
<p>è¿›å…¥å·¦ä¾§èœå•æ çš„ç³»ç»Ÿç®¡ç†ï¼Œå‘ç°å¾ˆå¤šæ’ä»¶æ— æ³•å®‰è£…æˆåŠŸï¼Œå¦‚ä¸‹å›¾ï¼š<br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.cah.png" alt=""></figure></p>
<p>å¤åˆ¶å®‰è£…å¤±è´¥çš„åç§°ï¼Œç‚¹å‡»å³ä¾§æŒ‰é’®ï¼Œé€‰æ‹©å¯é€‰æ’ä»¶ï¼Œè¾“å…¥åç§°é‡æ–°å®‰è£…ã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansible.1.png" alt=""></figure></p>
<p>å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œè¯·æ³¨æ„æç¤ºä¿¡æ¯ï¼Œå¯ç›´æ¥ä¸‹è½½è¯¥æ’ä»¶æ‰‹åŠ¨ä¸Šä¼ å®‰è£…ï¼Œæ‰‹åŠ¨ä¸‹è½½è¯¥æ’ä»¶ï¼Œåœ¨æ’ä»¶ç®¡ç†çš„é«˜çº§æ ‡ç­¾ä¸­ï¼Œé€‰æ‹©ä¸Šä¼ å®‰è£…ã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansible.2.png" alt=""></figure><br>å¦‚æœä¸Šä¼ å¤±è´¥ï¼Œè¿˜æœ‰ä¸ªæ–¹æ³•ï¼šç›´æ¥æŠŠä¸‹è½½ä¸‹æ¥çš„æ’ä»¶ä¸Šä¼ åˆ°JenkinsæœåŠ¡å™¨ä¸Šé¢ã€‚é»˜è®¤å®‰è£…çš„è¯ç›®å½•åœ¨ï¼š/root/.jenkins/plugins/  é‡å¯æœåŠ¡å³å¯.</p>
<h3 id="äº”-ç³»ç»Ÿè®¾ç½®ä»¥åŠä»‹ç»ï¼ˆå¯è·³è¿‡ï¼‰"><a href="#äº”-ç³»ç»Ÿè®¾ç½®ä»¥åŠä»‹ç»ï¼ˆå¯è·³è¿‡ï¼‰" class="headerlink" title="äº”. ç³»ç»Ÿè®¾ç½®ä»¥åŠä»‹ç»ï¼ˆå¯è·³è¿‡ï¼‰"></a>äº”. ç³»ç»Ÿè®¾ç½®ä»¥åŠä»‹ç»ï¼ˆå¯è·³è¿‡ï¼‰</h3><h4 id="1-1-ç³»ç»Ÿé…ç½®"><a href="#1-1-ç³»ç»Ÿé…ç½®" class="headerlink" title="1.1 ç³»ç»Ÿé…ç½®"></a>1.1 ç³»ç»Ÿé…ç½®</h4><p>è¿›å…¥é¦–é¡µç³»ç»Ÿç®¡ç†â€”&gt;ç³»ç»Ÿè®¾ç½®ã€‚</p>
<ol>
<li>é…ç½®maven</li>
<li>é…ç½®é‚®ä»¶æœåŠ¡<br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansible.3.png" alt=""></figure> </li>
</ol>
<p>ä¸»ç›®å½•é»˜è®¤åœ¨ /root/.jenkins  ä¸‹é¢ï¼Œæ­¤ç›®å½•ä¿å­˜jenkins çš„æ‰€æœ‰é…ç½®å’Œæ’ä»¶ç­‰ï¼Œå…·ä½“å¯ä»¥äºæœåŠ¡å™¨ä¸­æŸ¥çœ‹è¯¥ç›®å½•ã€‚<br>ä¸‹é¢å¯ä»¥ç»§ç»­é…ç½®mavenï¼Œjdkï¼Œgitç­‰ç­‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤çš„é…ç½®ã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansible.4.png" alt=""></figure><br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansible.5.png" alt=""></figure></p>
<h4 id="1-2-é¡¹ç›®é…ç½®"><a href="#1-2-é¡¹ç›®é…ç½®" class="headerlink" title="1.2 é¡¹ç›®é…ç½®"></a>1.2 é¡¹ç›®é…ç½®</h4><p>æ–°å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„é¡¹ç›®ï¼Œè¾“å…¥é¡¹ç›®åç§°ã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansible.6.png" alt=""></figure><br>1.å‚æ•°é…ç½®</p>
<p>ç®€å•çš„ä»Gitä¸­æ‹‰å–ä»£ç æ— æ³•æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæœ€ç†æƒ³çš„çŠ¶æ€æ˜¯å¯ä»¥å¯¹å‘å¸ƒçš„åˆ†æ”¯è¿›è¡ŒåŠ¨æ€é€‰æ‹©ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªé…ç½®åŠ¨æ€å‚æ•°çš„æ’ä»¶ï¼š<a href="https://wiki.jenkins-ci.org/display/JENKINS/Dynamic+Parameter+Plug-in" target="_blank" rel="external">Dynamic Parameter Plug-in</a> </p>
<p>å®‰è£…å¥½æ’ä»¶ä¹‹åï¼Œåœ¨é¡¹ç›®é…ç½®ï¼Œå‚æ•°åŒ–æ„å»ºè¿‡ç¨‹ä¸­æ·»åŠ åŠ¨æ€å‚æ•°ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansible.7.png" alt=""></figure><br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansible.8.png" alt=""></figure></p>
<p>è¾“å…¥å˜é‡åç§°å’Œè„šæœ¬ï¼Œåœ¨æ¥ä¸‹æ¥çš„é…ç½®ä¸­å°±å¯ä»¥ä½¿ç”¨<code>$Name</code>çš„æ–¹å¼ï¼Œä½¿ç”¨å˜é‡äº†ã€‚å¦‚ï¼š<code>$branch</code>ã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansible.9.png" alt=""></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">def gettags = (<span class="string">"git ls-remote -h git@gitlab.ihaozhuo.com:Java_Service/YJK-Java.git"</span>).execute() </div><div class="line">gettags.text.readLines().collect &#123; it.split()[1].replaceAll(<span class="string">'refs/heads/'</span>, <span class="string">''</span>)  &#125;.unique()</div></pre></td></tr></table></figure>
<p> è¿™æ˜¯ä¸€æ®µ<code>Groovy</code>è„šæœ¬ï¼Œç”¨æ¥è·å–Gitåœ°å€çš„åˆ†æ”¯ï¼Œå°†Gitåœ°å€æ”¹æˆè‡ªå·±çš„å°±è¡Œã€‚</p>
<h4 id="1-3æ¥ä¸‹æ¥é€‰æ‹©æ‰©å±•åŠŸèƒ½ã€‚"><a href="#1-3æ¥ä¸‹æ¥é€‰æ‹©æ‰©å±•åŠŸèƒ½ã€‚" class="headerlink" title="1.3æ¥ä¸‹æ¥é€‰æ‹©æ‰©å±•åŠŸèƒ½ã€‚"></a>1.3æ¥ä¸‹æ¥é€‰æ‹©æ‰©å±•åŠŸèƒ½ã€‚</h4><p>ç”±äºæˆ‘ä»¬çš„é¡¹ç›®æ¨¡å—è¾ƒå¤šï¼Œæ‰€æœ‰çš„æœåŠ¡å…¨éƒ¨é‡å¯ä¼šéå¸¸æµªè´¹æ—¶é—´ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¯¹å•ç‹¬çš„æ¨¡å—è¿›è¡Œéƒ¨ç½²ï¼Œè¿™æ—¶å€™éœ€è¦æ·»åŠ ä¸€ä¸ªå¯é€‰æ‹©çš„å‚æ•°<code>Extensible Choice Parameter</code></p>
<p>æ‰©å±•é€‰æ‹©å‚æ•°æ’ä»¶<code>Extensible Choice Parameter</code>çµæ´»ä½¿ç”¨å®ç°éƒ¨ç½²å¤šåº”ç”¨æ¨¡å—æœåŠ¡åŒæ—¶å‘å¸ƒ.å•æ¨¡å—æœåŠ¡å•ç‹¬æ‰“åŒ…å¿«é€Ÿå‘å¸ƒ.</p>
<p>å®ç°æ•ˆæœï¼š</p>
<p>å‘å¸ƒé€‰æ‹©åº”ç”¨æ¨¡å—ï¼Œä¹‹å‰åªèƒ½å•ä¸ªé€‰æ‹©å‘å¸ƒï¼Œæ•ˆç‡å¤ªä½ï¼Œå®‰è£…choiceæ‰©å±•æ€§çš„æ’ä»¶ï¼Œå¯ä»¥é€‰æ‹©å¤šä¸ªæ¨¡å—åº”ç”¨ä¸€èµ·éƒ¨ç½²ã€‚éå¸¸æ–¹ä¾¿<br>ä¸‹è½½æ’ä»¶ï¼š<br><a href="https://plugins.jenkins.io/extended-choice-parameter" target="_blank" rel="external">Extended Choice Parameter Plug-In</a><br><a href="https://plugins.jenkins.io/extensible-choice-parameter" target="_blank" rel="external">Extensible Choice Parameter plugin</a></p>
<p>è¿™é‡Œjenkins ç¬¬ä¸€æ­¥å®‰è£…æ‰©å±•æ’ä»¶ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.peizhi.1.png" alt=""></figure><br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.peizhi.2.png" alt=""></figure><br>å®‰è£…å¥½æ’ä»¶ä»¥å è¿›å…¥åˆ›å»ºé¡¹ç›®é…ç½®å‚æ•°ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.peizhi.3.png" alt=""></figure></p>
<p><code>Value</code> ï¼šè¿™é‡Œé€‰æ‹©æ¨¡å—åå­—æœ€å¥½æ˜¯gitæ‹‰å–ä¸‹æ¥çš„åç§°ä¸€æ ·ã€‚è¿™æ ·ä¸‹é¢æ‰“åŒ…å¯ä»¥é€‰æ‹©å¯¹åº”æ¨¡å—åç§°ä¸€æ ·ã€‚<br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.peizhi.4.png" alt=""></figure></p>
<p>è¿™é‡Œæ„å»ºä½¿ç”¨shell åšä¸€å±‚<code>if</code> åˆ¤æ–­  é€‰æ‹©<code>all</code> å…¨éƒ¨å‘å¸ƒã€‚å’Œå•ç‹¬æ¨¡å—å‘å¸ƒã€‚</p>
<h4 id="1-4Gité…ç½®"><a href="#1-4Gité…ç½®" class="headerlink" title="1.4Gité…ç½®"></a>1.4Gité…ç½®</h4><p>åˆæ¬¡ä½¿ç”¨Jenkinséœ€è¦æ·»åŠ ä¸€ä¸ªæœ‰è®¿é—®Gitæƒé™çš„ç”¨æˆ·ã€‚<br>æˆ‘ç›´æ¥ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ssh-keyï¼Œä¹Ÿå¯ä»¥è‡ªå·±å»ç”Ÿæˆã€‚<br>åœ¨gitlabä¸Šæ·»åŠ ssh-keyå…¬é’¥ è¿™ä¸ªæ˜¯ä½ å‘å¸ƒæœºå™¨çš„å…¬é’¥ã€‚</p>
<p>1.æºç ç®¡ç†é€‰æ‹©Gitï¼Œè¾“å…¥URLï¼Œå¹¶é€‰æ‹©ç”¨æˆ·ã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansible.10.png" alt=""></figure></p>
<p>ä»Jenkinså‘å¸ƒæœåŠ¡å™¨ä¸Šé¢æŸ¥çœ‹å…¬é’¥ä¸Šä¼ åˆ°gitlab.</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansbile.11.png" alt=""></figure></p>
<p>2.åœ¨jenkinsä¸Šç‚¹å‡»æ·»åŠ ç§é’¥<br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansible.12.png" alt=""></figure><br>3.é€‰æ‹©SSHâ€¦keyï¼Œè¾“å…¥ç”¨æˆ·åï¼Œè¾“å…¥ç§é’¥ï¼Œè¾“å…¥å¯†ç ï¼Œæ·»åŠ å®Œæˆã€‚<br>åœ¨Jenkinså‘å¸ƒæœåŠ¡å™¨ä¸Šé¢æŸ¥çœ‹ç§é’¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">[root@ansible_02 yaml]<span class="comment"># cat /root/.ssh/id_rsa</span></div><div class="line">-----BEGIN RSA PRIVATE KEY-----</div><div class="line">MIIEpAIBAAKCAQEAv5BSNmykQcvklQdb+3jV8d1I2tjq4tIiyVbQDhDBs6UFR4hj</div><div class="line">20EHg/3Tjvw+4mHtzWFYv1/rYeTg7xJ/bIf3XRIeRcrc/b2rvqo3wQBupRjHM6wb</div><div class="line">nd+Jgyv2v8Lk2c8yNzMoUIuYzcG5Dpv5mWyg1akbWcIH3tsGyTVXxxmAQ78L+J1N</div><div class="line">zj3a9fImQcx5ocKlV/Y1v9B+Uv4gTBmSBR7akvNg7E+3JKTphbbUv3rFrG6zqvTW</div><div class="line">CtEA/h9X//zPWTiwTjJv87NJkHQLqoo1TPYZcNjDEfki+jfc9gJzJvZ/5D0A3fA/</div><div class="line">mO8ApW9VMsaLiiwQvGP2RoiTVwU2G1iNASBcWwIDAQABAoIBABh64fawhYEfBDQD</div><div class="line">P77wHy8MXz4QUFvyDJ38KRRTEd3aLcWJaXFgawx0CHASThrx9sizMvspz9Ovwwrq</div><div class="line">Kzx8V6EeKp4yoXEPpv3zlLJmUr1oYDR7PwA6y8Dmgl7ZEhO/haRGNlWssTdCFVsH</div><div class="line">lasElb0YIjWjNQxGoyRdW71GxfxiGdZXgWDT7yYGvdavO5tGzDPhh6/vf5lpU2F2</div><div class="line">nJbMyXzWgrrqXqIG3W+jqg2kVA<span class="keyword">fi</span>MdNgeUOn6+SA/7uK8rNhxG/5dr7WKJE31uRS</div><div class="line">FJiVCATcHQBIRScDDd/nI8rGiVQOjHFt2oNV82DOIhNXhbzdWGROUcMiT04OoJgQ</div><div class="line">JeNL7IkCgYEA8wrgamw1w5dBoynzV6tUPgSdHhAMoMhPrzJTaG8qMamnHzZgz1fl</div><div class="line">3jqI7qCNsj1n6Y1UbzhKILHcTIoUj7lj41mY4XVBHqDLXh9Socf9IPrSabZIfe2n</div><div class="line">wMLMhdhoaMPUWtHj9SUn/Y+ESLuFLtF6LjR1Eghu8xKRwULo1GscSyUCgYEAycbY</div><div class="line">j1/KaFAcwSl7teRiYEY+LRHB/AUa7lc+r+p2YMjGQ3CiaN9wKqu1E4jEvL0eZXDK</div><div class="line">aXJ6qcDJiHa2M+Bf8qcVoyXtKFtlTfSVPJDviZjl3EPmhXbuKzW3et2w5zWv8lAU</div><div class="line">2fWU+3ta3fVrFXz2zlY1j47Dv9zUlDeCF+lRMX8CgYEA1hkKwDU612XzSEy4NM6U</div><div class="line">k111GvqAZVKP/4GRwDnNLZqJwhEhDwYbVLyzy6JbsFwvoaoCa0dm5Y5IxpQMsN9b</div><div class="line">Z9GGH7CWLEJ7a4gJmrYQYpECgYAIqe8WiOhp/jad3KghMUNAGwQEb2TC630yirB4</div><div class="line">YTrgAP7yWl2+3wkz69eElTTNXdl2RZeLW40EyPBeWaqNI686/g2hybkbKIF7DWtz</div><div class="line">BE4kvFnyUUAOrwKe/Fl6fxZfdyCs6N9cVH0nJy7JpQYKECmQxobaOSkSjerayl9d</div><div class="line">x1mI3d6fwqmAbbyiolLXbn3JySkxTaVBS8gjnQh6LO6JbpTspKlz3R2/CzUhDhEY</div><div class="line">n3vhU2trAGh6hY/bizI1oKNxwp/b9uAaLVmmHGNV/+V5glnDH+luQA==</div><div class="line">-----END RSA PRIVATE KEY-----</div></pre></td></tr></table></figure>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.ansible.13.png" alt=""></figure></p>
<p>æ­¤å¤„è¦æ³¨æ„ï¼Œå°†é»˜è®¤çš„masteråˆ†æ”¯æ”¹ä¸ºæˆ‘ä»¬ä¹‹å‰å®šä¹‰å¥½çš„åˆ†æ”¯å˜é‡.<br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.peizhi.5.png" alt=""></figure></p>
<h4 id="1-5é¡¹ç›®æ‰“åŒ…"><a href="#1-5é¡¹ç›®æ‰“åŒ…" class="headerlink" title="1.5é¡¹ç›®æ‰“åŒ…"></a>1.5é¡¹ç›®æ‰“åŒ…</h4><p>ç”±äºæˆ‘ä»¬ä½¿ç”¨æ‰‹åŠ¨å‡ºå‘æ„å»ºï¼Œè§¦å‘å™¨æˆ‘ä»¬æ­¤å¤„ä¸éœ€è¦é…ç½®ã€‚<br>æ„å»ºç¯å¢ƒæš‚æ—¶ä¹Ÿä¸éœ€è¦é…ç½®ï¼Œè¿™é‡Œè°ƒç”¨ansibleå»æ‰§è¡Œymlä»£ç å‘å¸ƒã€‚é¡¹ç›®æ‰“åŒ…ä¼˜åŒ–äº†ã€‚</p>
<p>å…³é”®åœ¨äºæ„å»ºçš„æ­¥éª¤ã€‚<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Shellå‘½ä»¤ï¼Œè¿›å…¥é¡¹ç›®ç›®å½•ï¼Œä½¿ç”¨Mavenå‘½ä»¤è¿›è¡Œæ‰“åŒ…ã€‚</p>
<p>è¿™é‡Œä¸»è¦æ˜¯<code>if</code> åˆ¤æ–­æ˜¯ æ‰§è¡Œå¯¹åº”æ¨¡å—æ‰“åŒ…ã€‚è¿™æ ·èŠ‚çœäº†æ‰“åŒ…æ—¶é—´ï¼Œå¦‚æœä¸åšå¯¹åº”å‘å¸ƒæ¨¡å—å‘å¸ƒï¼Œç¬¬ä¸€æ¡å¦‚ä½•<code>model</code>ç­‰äº<code>all</code> æ–‡ä»¶ï¼šå…¨éƒ¨æ‰§è¡Œ : <code>mvn clean install -U -T 1C -Dmaven.test.skip=true</code></p>
<p>å¦‚æœä¸ç­‰äºè¿™é‡ŒæŒ‡å®šå¯¹åº”æ¨¡å—æ‰“åŒ…ï¼š <code>mvn clean install -pl $model -amd -U -T 1C -Dmaven.test.skip=true</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="variable">$model</span></div><div class="line"><span class="keyword">if</span> [[ <span class="variable">$model</span> == all* ]]; <span class="keyword">then</span></div><div class="line"><span class="built_in">cd</span> /srv/ &amp;&amp; rm dev-properties/ -rf &amp;&amp; git <span class="built_in">clone</span> git@gitlab.ihaozhuo.com:dev-properties/dev-properties.git &amp;&amp; <span class="built_in">cd</span> /root/.jenkins/workspace/yjk-dev_master/haozhuo/ &amp;&amp; mvn clean install -U -T 1C -Dmaven.test.skip=<span class="literal">true</span>  -Dmaven.compile.fork=<span class="literal">true</span> -Pdev -Dautoconfig.userProperties=/srv/dev-properties/dev1.properties -Dautoconfig.charset=utf-8</div><div class="line"><span class="keyword">else</span></div><div class="line"><span class="built_in">cd</span> /srv/ &amp;&amp; rm dev-properties/ -rf &amp;&amp; git <span class="built_in">clone</span> git@gitlab.ihaozhuo.com:dev-properties/dev-properties.git &amp;&amp; <span class="built_in">cd</span> /root/.jenkins/workspace/yjk-dev_master/haozhuo/ &amp;&amp; mvn clean install -pl <span class="variable">$model</span> -amd -U -T 1C -Dmaven.test.skip=<span class="literal">true</span>  -Dmaven.compile.fork=<span class="literal">true</span> -Pdev -Dautoconfig.userProperties=/srv/dev-properties/dev1.properties -Dautoconfig.charset=utf-8</div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.peizhi.6.png" alt=""></figure></p>
<p>æ‰€æœ‰çš„è„šæœ¬å’Œå˜é‡çš„å‚æ•°åˆ—è¡¨ç»Ÿä¸€ã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.peizhi8.png" alt=""></figure></p>
<p>è¿™é‡Œè¯´ä¸‹å‘å¸ƒæ¨¡å— ç»“åˆ<code>ansible-Playbook</code>åŸºæœ¬è¯­æ³•å†™æ§åˆ¶å‘å¸ƒæœåŠ¡å™¨ï¼Œç„¶ååœ¨<code>jenkins</code>ä¸Šé¢å†™ansible å‘å¸ƒè„šæœ¬&amp;å‘½ä»¤ã€‚<br>model.sh è„šæœ¬ï¼š </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line">  IFS=<span class="string">','</span></div><div class="line">  arr=<span class="variable">$1</span></div><div class="line">  <span class="keyword">for</span> split <span class="keyword">in</span> <span class="variable">$arr</span></div><div class="line">  <span class="keyword">do</span></div><div class="line">          <span class="built_in">echo</span> <span class="variable">$split</span></div><div class="line">       /usr/bin/ansible-playbook /srv/yaml/<span class="variable">$split</span>.yml</div><div class="line">          <span class="keyword">if</span> [ <span class="variable">$split</span> = <span class="string">'all'</span> ]</div><div class="line">          <span class="keyword">then</span></div><div class="line">                  <span class="built_in">echo</span> <span class="string">"model:all"</span></div><div class="line">                  <span class="built_in">break</span></div><div class="line">          <span class="keyword">fi</span></div><div class="line">  <span class="keyword">done</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸¾ä¸ªä¾‹å­æˆ‘ä¸Šé¢å‘å¸ƒymlæ¨¡å—ä»£ç ã€‚</p>
<p>è¿™ä¸ªè„šæœ¬åšäº†äº”ä»¶äº‹ï¼š<br>1)               é¦–å…ˆæŒ‡å®šç¼–ç ä¸ºUTF-8ï¼ˆå¦åˆ™å¯åŠ¨é¡¹ç›®åä¼šä¹±ç ï¼è¿™æ˜¯ä¸ªå‘!ï¼‰<br>2)               æ‹·è´æ–‡ä»¶åˆ°æŒ‡å®šæœºå™¨çš„ç›®å½•ä¸‹ï¼Œæ‹·è´å‘½ä»¤çš„destä¸èƒ½ä½¿ç”¨å˜é‡ï¼å¦åˆ™æ‹·è´ä¸ä¼šæˆåŠŸï¼ï¼ˆç¬¬äºŒä¸ªå‘ï¼‰<br>3)               é‡å¯è¿œç¨‹æœåŠ¡ï¼Œæˆ‘ä»¬è¯•è¿‡ç›´æ¥é‡å¯tomcatæœåŠ¡ï¼Œè™½ç„¶æœåŠ¡é‡å¯ä¼šæˆåŠŸï¼Œä½†æ˜¯æœ€åä¼šæŠ¥ä¸€ä¸ªé”™è¯¯ï¼Œå¯¼è‡´é¡¹ç›®ç¼–ç æ— æ³•æŒ‡å®šä¸ºUTF-8ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯é€‰æ‹©ä½¿ç”¨Shellè„šæœ¬å»é‡å¯æœåŠ¡ï¼ˆç¬¬ä¸‰ä¸ªå‘ï¼‰ã€‚<br>4ï¼‰          è¿›è¡Œåˆ›å»ºç›®å½•å¤‡ä»½ã€‚<br>5ï¼‰          æŸ¥çœ‹è¿›ç¨‹åå°å¯åŠ¨ã€‚</p>
<p>Ansibleè„šæœ¬ç¼–å†™å®Œä¹‹åï¼Œå¯ä»¥ç°åœ¨è‡ªå·±æœ¬æœºä¸Šæ‰§è¡Œä¸€ä¸‹ã€‚<br>ç›®æ ‡æœºå™¨ä¸Šå¿…é¡»å®‰è£…libselinux-pythonï¼Œä¸ç„¶æ— æ³•æ‰§è¡ŒæˆåŠŸï¼ˆå°å‘ï¼‰ã€‚</p>
<p>åœ¨jenkinsä¸­æˆ‘ä»¬åšå¦‚ä¸‹é…ç½®ï¼š<br>åœ¨æ„å»ºæ‰“åŒ…å‘½ä»¤åé¢æˆ‘ä»¬å¢åŠ ä¸€ä¸ªShellå‘½ä»¤ï¼Œç”¨æ¥æ‰§è¡ŒAnsibleçš„è„šæœ¬ã€‚<br>æˆ‘ä»¬è„šæœ¬åç§°ä½¿ç”¨å˜é‡åç§°ï¼Œè¿™æ ·æˆ‘ä»¬é€‰æ‹©æ¨¡å—å°±èƒ½æ‰§è¡Œå¯¹åº”çš„è„šæœ¬ã€‚</p>
<h4 id="1-6å‘é€é‚®ä»¶"><a href="#1-6å‘é€é‚®ä»¶" class="headerlink" title="1.6å‘é€é‚®ä»¶"></a>1.6å‘é€é‚®ä»¶</h4><p>é…ç½®å¥½æ„å»ºå¤±è´¥åå‘é€é‚®ä»¶åˆ°æŒ‡å®šçš„é‚®ç®±ï¼Œå¤šä¸ªé‚®ç®±ç”¨é€—å·éš”å¼€ã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.peizhi.7.png" alt=""></figure></p>
<p>è‡³æ­¤é¡¹ç›®é…ç½®ç»“æŸã€‚</p>
<h4 id="å…­-è¿è¡Œæ•ˆæœï¼Œæ‰“åŒ…æ•ˆæœã€‚"><a href="#å…­-è¿è¡Œæ•ˆæœï¼Œæ‰“åŒ…æ•ˆæœã€‚" class="headerlink" title="å…­.è¿è¡Œæ•ˆæœï¼Œæ‰“åŒ…æ•ˆæœã€‚"></a>å…­.è¿è¡Œæ•ˆæœï¼Œæ‰“åŒ…æ•ˆæœã€‚</h4><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.peizhi.9.png" alt=""></figure><br>æŒ‡å®šæ¨¡å—å»æ‰“åŒ…ï¼Œç»ˆç«¯ä¸ŠæŸ¥çœ‹å‘å¸ƒæ—¥å¿— è¿™é‡Œå˜é‡ç”Ÿæ•ˆæ•ˆæœï¼š<br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins.peizhi.10.png" alt=""></figure></p>
<h3 id="ä¸ƒ-Jenkinså»¶ä¼¸å­¦ä¹ "><a href="#ä¸ƒ-Jenkinså»¶ä¼¸å­¦ä¹ " class="headerlink" title="ä¸ƒ. Jenkinså»¶ä¼¸å­¦ä¹ "></a>ä¸ƒ. Jenkinså»¶ä¼¸å­¦ä¹ </h3><p>æ•ˆæœå›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins_05.png" alt=""></figure></p>
<p><code>Blue Ocean</code> æ˜¯<code>Jenkins</code> éå¸¸ä¸é”™ä¸€ä¸ªæå‡ã€‚</p>
<p>è¿™é‡Œå¯ä»¥æŸ¥çœ‹ä¸‹æˆ‘åœ¨æˆ‘githubä¸Šé¢æ‰©å±•<a href="https://github.com/yangcvo/Jenkins-automation" target="_blank" rel="external">æ›´æ–°jenkinsæ–°åŠŸèƒ½Blue Oceanå®ç°å…ˆè¿›çš„å¯è§†åŒ–ç²¾ç¡®å®šä½é—®é¢˜</a></p>
<p>ç°åœ¨æˆ‘ä»¬Gitä½¿ç”¨çš„æ˜¯ GitLabï¼ŒåŒæ—¶ä¸ºäº†å®‰å…¨æˆ‘ä»¬åšäº†ä¸€å±‚LDAPä»£ç†ï¼Œæ•ˆæœç›¸å½“äºâ€œå°†å†›ä»¤â€ï¼Œæ“ä½œæœºã€Gitå’ŒJenkinsç”¨ OpenLDAP åšç»Ÿä¸€è®¤è¯ï¼Œåç»­ç”¨åˆ°çš„Redmineã€Grafanaã€Zabbix ç­‰éƒ½æ¥å…¥äº†OpenLDAPè®¤è¯ï¼Œæ¯ä¸ªäººéƒ½æœ‰ä¸ªåŠ¨æ€å£ä»¤ï¼Œæ¯æ¬¡éªŒè¯éƒ½éœ€è¦ç”¨åˆ°ã€‚</p>

	

	

</article>





	<span class="different-posts">ğŸ“– <a href="/page/8">more posts</a> ğŸ“–</span>



	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2018 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
