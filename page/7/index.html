<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		
	<span class="different-posts different-posts_earlier">ğŸ“– <a href="/page/6">earlier posts</a> ğŸ“–</span>




	<article>
	
		<h1><a href="/2016/11/23/WebæœåŠ¡æŠ€æœ¯/ç”³è¯·è¯ä¹¦Https/å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦+é˜¿é‡Œäº‘SLBå¦‚ä½•é…ç½®HTTPS/">å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦+é˜¿é‡Œäº‘SLBå¦‚ä½•é…ç½®HTTPS</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-11-23</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/nginx/">nginx</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Nginx/">Nginx</a> <a class="article__tag-link" href="/tags/Web-Service/">Web Service</a>
			</span>
		
	</div>

	

	
		<h2 id="å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦"><a href="#å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦" class="headerlink" title="å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦"></a>å¦‚ä½•åœ¨Nginxç”³è¯·å®‰è£…é…ç½®å…è´¹HTTPSè¯ä¹¦</h2><p>HTTPSåœ¨å„å¤§äº’è”ç½‘ç«™å·²ç»æˆä¸ºæ ‡é…ï¼Œå°±è¿æŸåº¦ä¹Ÿåœ¨å‰ä¸ä¹…å…¨é¢å¯ç”¨HTTPSï¼Œå¾ˆå¤šå°ç½‘ç«™ä¹Ÿé…ç½®äº†HTTPSï¼Œè¿™æ˜¯æœªæ¥çš„ä¸€ç§è¶‹åŠ¿.HTTPSçš„å¥½å¤„å¤šå¤šï¼Œå¯ä»¥é˜²æ­¢å„ç§æ”»å‡»åŠ«æŒï¼Œè¿è¥å•†å¹¿å‘Šæ¤å…¥ï¼Œå®¢æˆ·ä¼ è¾“ä¿¡æ¯æ³„éœ²ç­‰é—®é¢˜ã€‚ä¸ºäº†è®©HTTPSèƒ½å¤Ÿå…¨é¢æ™®åŠï¼Œè®©æˆ‘ä»¬åŠ å¯†é¡¹ç›®åº”è¿è€Œç”Ÿï¼Œå®ƒç”±äº’è”ç½‘å®‰å…¨ç ”ç©¶å°ç»„ISRGï¼ˆäº’è”ç½‘å®‰å…¨ç ”ç©¶å°ç»„ï¼‰æä¾›æœåŠ¡ï¼Œå¾ˆæ—©ä¹‹å‰æˆ‘å°±åœ¨å…³æ³¨ <a href="https://letsencrypt.org/" target="_blank" rel="external">Letâ€™s Encrypt</a>è¿™ä¸ªå…è´¹ã€è‡ªåŠ¨åŒ–ã€å¼€æ”¾çš„è¯ä¹¦ç­¾å‘æœåŠ¡ã€‚<br>ISRGæ˜¯æ¥è‡ªç¾å›½åŠ åˆ©ç¦å°¼äºšå·çš„ä¸€ä¸ªå…¬ç›Šç»„ç»‡.Letâ€™s Encryptå¾—åˆ°äº†Mozillaï¼ŒCiscoå’ŒChromeç­‰ä¼—å¤šå…¬å¸å’Œæœºæ„çš„æ”¯æŒã€‚</p>
<p>ç”³è¯· <code>Let&#39;s Encrypt</code> è¯ä¹¦ä¸ä½†å…è´¹ï¼Œè¿˜éå¸¸ç®€å•ï¼Œè™½ç„¶æ¯æ¬¡åªæœ‰ 90 å¤©çš„æœ‰æ•ˆæœŸï¼Œä½†å¯ä»¥é€šè¿‡è„šæœ¬å®šæœŸæ›´æ–°ï¼Œé…å¥½ä¹‹åä¸€åŠ³æ°¸é€¸ã€‚æœ¬æ•™ç¨‹äº²æµ‹æœ‰æ•ˆï¼Œå¸Œæœ›å¯¹æ­£åœ¨å¯»æ‰¾å…è´¹HTTPSæ–¹æ¡ˆçš„ä½ æœ‰ä¸€å®šçš„å¸®åŠ©ï¼Œæœ¬æ–‡è®°å½•æœ¬ç«™ç”³è¯·è¿‡ç¨‹å’Œé‡åˆ°çš„é—®é¢˜ã€‚</p>
<p>æŒ‰ç…§æˆ‘ä»¬çš„åŠ å¯†å®˜æ–¹æä¾›çš„å·¥å…·å®‰è£…HTTPSçš„è¯ä¸è¿‡äºå¤æ‚ï¼Œäºæ˜¯æœ‰å¥½å¿ƒäººæä¾›äº†æ›´ä¸ºè½»å·§çš„å·¥å…·å®‰è£…ï¼Œæè‡´çº¤å·§è¯ç”Ÿäº†ï¼Œå®ƒçš„ä»£ç é‡åœ¨200è¡Œå†…ï¼Œåªéœ€ä¾èµ–çš„Pythonå’ŒOpenSSLçš„ã€‚</p>
<h3 id="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºLetâ€™s-EncryptåŠ å¯†è´¦å·"><a href="#ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºLetâ€™s-EncryptåŠ å¯†è´¦å·" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºLetâ€™s EncryptåŠ å¯†è´¦å·"></a>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºLetâ€™s EncryptåŠ å¯†è´¦å·</h3><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œä¾‹å¦‚ <code>ssl</code>ç”¨æ¥å­˜æ”¾å„ç§ä¸´æ—¶æ–‡ä»¶å’Œæœ€åçš„è¯ä¹¦æ–‡ä»¶ã€‚è¿›å…¥è¿™ä¸ªç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ª<code>RSA</code>ç§é’¥ç”¨äº Letâ€™s Encrypt è¯†åˆ«ä½ çš„èº«ä»½ï¼š</p>
<p>è®©æˆ‘ä»¬åŠ å¯†ä½¿ç”¨ä¸€ä¸ªç§é’¥æ¥è¿›è¡Œè´¦å·çš„åˆ›å»ºä¸ç™»é™†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨opensslåˆ›å»ºä¸€ä¸ª<code>account.key</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@ihaozhuo1 srv]<span class="comment"># mkdir ssl &amp;&amp; cd ssl</span></div><div class="line">[root@ihaozhuo1 ssl]<span class="comment"># openssl genrsa 4096 &gt; account.key</span></div><div class="line">Generating RSA private key, 4096 bit long modulus</div><div class="line">...........................++</div><div class="line">...........................++</div><div class="line">e is 65537 (0x10001)</div></pre></td></tr></table></figure>
<h3 id="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸŸåçš„CSRï¼ˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰"><a href="#ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸŸåçš„CSRï¼ˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸŸåçš„CSRï¼ˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰"></a>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸŸåçš„CSRï¼ˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰</h3><p>è®©æˆ‘ä»¬åŠ å¯†ä½¿ç”¨çš„ACMEåè®®éœ€è¦ä¸€ä¸ªCSRæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥é‡æ–°ç”³è¯·HTTPSè¯ä¹¦ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºåŸŸåCSRï¼Œåœ¨åˆ›å»ºCSRä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç»™æˆ‘ä»¬çš„åŸŸååˆ›å»ºä¸€ä¸ªç§é’¥ï¼ˆè¿™ä¸ªå’Œä¸Šé¢çš„è´¦æˆ·ç§é’¥æ— å…³ï¼‰ã€‚<br>æ¥ç€å°±å¯ä»¥ç”Ÿæˆ <code>CSRï¼ˆCertificate Signing Requestï¼Œè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰æ–‡ä»¶äº†ã€‚</code>åœ¨è¿™ä¹‹å‰ï¼Œè¿˜éœ€è¦åˆ›å»ºåŸŸåç§é’¥ï¼ˆä¸€å®šä¸è¦ä½¿ç”¨ä¸Šé¢çš„è´¦æˆ·ç§é’¥ï¼‰ï¼Œæ ¹æ®è¯ä¹¦ä¸åŒç±»å‹ï¼ŒåŸŸåç§é’¥ä¹Ÿå¯ä»¥é€‰æ‹© RSA å’Œ ECC ä¸¤ç§ä¸åŒç±»å‹ã€‚ä»¥ä¸‹ä¸¤ç§æ–¹å¼è¯·æ ¹æ®å®é™…æƒ…å†µäºŒé€‰ä¸€ã€‚</p>
<p><strong>1ï¼‰åˆ›å»º RSA ç§é’¥ï¼ˆå…¼å®¹æ€§å¥½ï¼‰ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl genrsa 4096 &gt; domain.key</div></pre></td></tr></table></figure>
<p><strong>2ï¼‰æ³¨æ„ï¼šä¸€å®šä¸è¦ä½¿ç”¨ä¸Šé¢åˆ›å»ºå¥½çš„account.key æ¥å½“domain.key â—ï¸</strong></p>
<p>æœ‰äº†ç§é’¥æ–‡ä»¶ï¼Œå°±å¯ä»¥åˆ›å»ºç”Ÿæˆ <code>CSRæ–‡ä»¶</code>äº†ã€‚åœ¨ <code>CSR</code>ä¸­æ¨èè‡³å°‘æŠŠåŸŸåå¸¦ <code>www</code> å’Œä¸å¸¦<code>www</code>çš„ä¸¤ç§æƒ…å†µéƒ½åŠ è¿›å»ï¼Œå…¶å®ƒå­åŸŸå¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ ,æ›¿æ¢ä¸‹é¢çš„ihaozhuo.comå³å¯  <code>(ç›®å‰ä¸€å¼ è¯ä¹¦æœ€å¤šå¯ä»¥åŒ…å« 100 ä¸ªåŸŸå)</code></p>
<p><strong>3ï¼‰æ³¨æ„ï¼Œç¨åä¼šè¯´åˆ°ï¼Œæ¯ä¸ªåŸŸåéƒ½ä¼šæ¶‰åŠåˆ°éªŒè¯ï¼‰</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ï¼ƒå•ä¸ªåŸŸå</div><div class="line"></div><div class="line">openssl req -new -sha256 -key domain.key -subjâ€œ/CN=ihaozhuo.ccomâ€&gt; domain.csr</div><div class="line"></div><div class="line">ï¼ƒå¤šä¸ªåŸŸåï¼ˆå¦‚æœä½ æœ‰å¤šä¸ªåŸŸåï¼Œæ¯”å¦‚ï¼šwww.ihaozhuo.com å’Œihaozhuo.comï¼Œä½¿ç”¨è¿™ç§æ–¹å¼ï¼‰</div><div class="line"></div><div class="line">openssl req -new -sha256 -key domain.key -subj <span class="string">"/"</span> -reqexts SAN -config &lt;(cat /etc/ssl/openssl.cnf &lt;(<span class="built_in">printf</span> <span class="string">"[SAN]\nsubjectAltName=DNS:ihaozhuo.com,DNS:www.ihaozhuo.com"</span>)) &gt; domain.csr</div></pre></td></tr></table></figure>
<p><strong>4ï¼‰è¯´æ˜ï¼šihaozhuo.comï¼Œwww.ihaozhuo.com æ›¿æ¢æˆä½ çš„åŸŸåæ‰§è¡Œè¿™ä¸€æ­¥æ—¶ï¼Œéœ€è¦æŒ‡å®šopenssl.cnfæ–‡ä»¶ï¼Œä¸€èˆ¬è¿™ä¸ªæ–‡ä»¶åœ¨ä½ çš„opensslå®‰è£…ç›®å½•åº•ä¸‹ã€‚ å¦‚æœæç¤ºæ‰¾ä¸åˆ° /etc/ssl/openssl.cnfæ–‡ä»¶ï¼Œè¯·çœ‹çœ‹/usr/local/openssl/ssl/openssl.cnf å’Œ/etc/pki/tls/openssl.cnfæ˜¯å¦å­˜åœ¨ã€‚</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@ihaozhuo1 ssl]<span class="comment"># find / -name openssl.cnf    ##æŸ¥æ‰¾openssl.cnfæ–‡ä»¶</span></div><div class="line">/etc/pki/tls/openssl.cnf</div><div class="line">[root@ihaozhuo1 ssl]<span class="comment"># ln -s /etc/pki/tls/openssl.cnf /etc/ssl/openssl.cnf    #åšä¸ªè½¯é“¾æ¥ </span></div><div class="line"></div><div class="line">[root@ihaozhuo1 ssl]<span class="comment"># openssl req -new -sha256 -key domain.key -subj "/" -reqexts SAN -config &lt;(cat /etc/ssl/openssl.cnf &lt;(printf "[SAN]\nsubjectAltName=DNS:ihaozhuo.com,DNS:www.ihaozhuo.com")) &gt; domain.csr</span></div></pre></td></tr></table></figure>
<p>å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨äº¤äº’æ–¹å¼åˆ›å»º<code>CSR</code>ï¼ˆéœ€è¦æ³¨æ„ <code>Common Name</code>å¿…é¡»ä¸ºä½ çš„åŸŸåï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl req -new -sha256 -key domain.key -out domain.csr</div></pre></td></tr></table></figure>
<h3 id="ç¬¬ä¸‰æ­¥ï¼šé…ç½®åŸŸåéªŒè¯"><a href="#ç¬¬ä¸‰æ­¥ï¼šé…ç½®åŸŸåéªŒè¯" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šé…ç½®åŸŸåéªŒè¯"></a>ç¬¬ä¸‰æ­¥ï¼šé…ç½®åŸŸåéªŒè¯</h3><p>CAåœ¨ç­¾å‘DVï¼ˆåŸŸéªŒè¯ï¼‰è¯ä¹¦æ—¶ï¼Œéœ€è¦éªŒè¯åŸŸåæ‰€æœ‰æƒã€‚ä¼ ç»ŸCAçš„éªŒè¯æ–¹å¼ä¸€èˆ¬æ˜¯å¾€<code>admin@ihaozhuo.com</code>å‘éªŒéªŒé‚®ä»¶ï¼Œè€Œè®©æˆ‘ä»¬åŠ å¯†æ˜¯åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šç”Ÿæˆä¸€ä¸ªéšæœºéªŒè¯æ–‡ä»¶ï¼Œå†é€šè¿‡åˆ›å»ºCSRæ—¶æŒ‡å®šçš„åŸŸåè®¿é—®ï¼Œå¦‚æœå¯ä»¥è®¿é—®åˆ™è¡¨æ˜ä½ å¯¹è¿™ä¸ªåŸŸåæœ‰æ§åˆ¶æƒã€‚</p>
<p>é¦–å…ˆåˆ›å»ºç”¨äºå­˜æ”¾éªŒè¯æ–‡ä»¶çš„ç›®å½•ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir -p var/www/challenge</div></pre></td></tr></table></figure>
<p>ç„¶åé…ç½®ä¸€ä¸ª<code>Nginx</code>æœåŠ¡ï¼Œä»¥Nginxä¸ºä¾‹:(æ³¨æ„ï¼šè¿™é‡Œçš„ç«¯å£æ˜¯80ï¼Œä¸æ˜¯443ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    </div><div class="line">       listen       80;</div><div class="line">       server_name www.ihaozhuo.com ihaozhuo.com;</div><div class="line">       location /.well-known/acme-challenge/ &#123;</div><div class="line">       <span class="built_in">alias</span> /var/www/challenges/;</div><div class="line">       index  index.html index.php index.jsp index.htm;</div><div class="line">       try_files <span class="variable">$uri</span> =404;</div><div class="line">&#125;</div><div class="line">        error_page   500 502 503 504  /50x.html;</div><div class="line">        location = /50x.html &#123;</div><div class="line">            root   html;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯æˆ‘åœ¨ä¸Šé¢é…ç½®å®Œæˆä»¥åéœ€è¦é‡å¯Nginxï¼Œå…ˆ<code>Nginx -t</code>æ ¡éªŒä¸‹æ˜¯å¦æœ‰æ²¡æœ‰é—®é¢˜ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[root@ihaozhuo1 conf]<span class="comment"># nginx -t</span></div><div class="line">nginx: the configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf syntax is ok</div><div class="line">nginx: configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf <span class="built_in">test</span> is successful</div><div class="line">``` </div><div class="line"></div><div class="line">å¦‚ä½•éªŒè¯ä¸Šé¢è®¾ç½®æ˜¯å¦æˆåŠŸï¼Ÿ æˆ‘ä»¬åªè¦åœ¨ç›®å½•ï¼š/var/www/challenges/ ä¸‹é¢åˆ›å»ºæ–‡ä»¶ï¼štest.html</div><div class="line">ç„¶åé€šè¿‡http://www.ihaozhuo.com/.well-known/acme-challenge/test.html URLè®¿é—®åœ°å€é‚£ä¸ªæ–‡ä»¶ï¼Œå¦‚æœèƒ½è®¿é—®æˆåŠŸè¯´æ˜ä½ é…ç½®æ²¡é—®é¢˜;å¦åˆ™å°±è¯´æ˜é…ç½®é”™è¯¯âŒï¼Œè¿™ä¸€æ­¥ä¸èƒ½å®ç°ä¸‹é¢å°±ä¸èƒ½æˆåŠŸäº†ã€‚</div><div class="line"></div><div class="line">ä»¥ä¸Šé…ç½®ä¼˜å…ˆæŸ¥æ‰¾ `var/www/challenge`ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±é‡å®šå‘åˆ°` HTTPS` åœ°å€ã€‚è¿™ä¸ªéªŒè¯æœåŠ¡ä»¥åæ›´æ–°è¯ä¹¦è¿˜è¦ç”¨åˆ°ï¼Œå»ºè®®ä¸€ç›´ä¿ç•™ã€‚</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">### ç¬¬å››æ­¥ï¼šè·å–ç½‘ç«™è¯ä¹¦</span></div><div class="line"></div><div class="line">**1ï¼‰ä¸Šé¢é…ç½®å¥½ï¼Œç°åœ¨æˆ‘ä»¬ä½¿ç”¨acme-tiny.pyæ¥è·å–ç½‘ç«™è¯ä¹¦** acme-tinyè„šæœ¬æ–‡ä»¶ä¸ŠGithubä¸‹è½½ï¼š[acme-tiny.py](https://github.com/diafygi/acme-tiny)</div><div class="line"></div><div class="line">**2ï¼‰å…ˆæŠŠ acme-tiny è„šæœ¬ä¿å­˜åˆ°ä¹‹å‰çš„sslç›®å½•**</div><div class="line">```bash</div><div class="line">wget https://raw.githubusercontent.com/diafygi/acme-tiny/master/acme_tiny.py</div></pre></td></tr></table></figure>
<p><strong>3ï¼‰ç„¶åæŒ‡å®šè´¦æˆ·ç§é’¥ã€CSR ä»¥åŠéªŒè¯ç›®å½•ï¼Œæ‰§è¡Œè„šæœ¬æ¥è·å–ç½‘ç«™è¯ä¹¦</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">python acme_tiny.py --account-key ./account.key --csr ./domain.csr --acme-dir /var/www/challenges/ &gt; ./signed.crt</div></pre></td></tr></table></figure>
<p><strong>4ï¼‰å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå½“å‰ç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€ä¸ª<code>signed.crt</code>è¿™å°±æ˜¯ç”³è¯·å¥½çš„è¯ä¹¦æ–‡ä»¶ï¼Œå¦‚æœè·Ÿæˆ‘ä¸€æ ·æŠ¥é”™äº†è¯·çœ‹ä¸‹é¢</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@ihaozhuo1 ssl]<span class="comment"># python acme_tiny.py --account-key ./account.key --csr ./domain.csr --acme-dir /var/www/challenges/ &gt; ./signed.crt</span></div><div class="line">Parsing account key...</div><div class="line">Parsing CSR...</div><div class="line">Registering account...</div><div class="line">Already registered!</div><div class="line">Verifying ihaozhuo.com...</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"acme_tiny.py"</span>, line 198, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    main(sys.argv[1:])</div><div class="line">  File <span class="string">"acme_tiny.py"</span>, line 194, <span class="keyword">in</span> main</div><div class="line">    signed_crt = get_crt(args.account_key, args.csr, args.acme_dir, <span class="built_in">log</span>=LOGGER, CA=args.ca)</div><div class="line">  File <span class="string">"acme_tiny.py"</span>, line 123, <span class="keyword">in</span> get_crt</div><div class="line">    wellknown_path, wellknown_url))</div><div class="line">ValueError: Wrote file to /var/www/challenges/fWyC6BvCCSlVunoaltJrnEV-ewj6FBpOv7Eu8LluBUg, but couldn<span class="string">'t download http://ihaozhuo.com/.well-known/acme-challenge/fWyC6BvCCSlVunoaltJrnEV-ewj6FBpOv7Eu8LluBUg</span></div></pre></td></tr></table></figure>
<p><strong>5ï¼‰è„šæœ¬é—®é¢˜ï¼š</strong></p>
<ol>
<li>è®°å¾—åœ¨ç½‘ç«™è®°å¾—åŸŸåè§£æè¦å¯¹ï¼Œéƒ½æ˜¯ä½ ç°åœ¨ç”³è¯·è¯ä¹¦è¿™å°å¤–ç½‘è§£æåœ°å€ï¼š <code>http://ihaozhuo.com/</code>ä¸é€šé‚£è§£æå°±å‡ºç°é—®é¢˜äº†ã€‚</li>
<li>ç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šäººè¯´åŸŸåDNSæœåŠ¡å™¨è§£æå¯¼è‡´åŸŸåä¸è¡Œï¼Œè¿™ä¸ªéªŒè¯äº†ä»¥åä¸æ˜¯çš„ï¼Œè¿™ä¸ªæ˜¯GitHubè¿™ä¸ªè„šæœ¬<code>acme_tiny.py</code>é—®é¢˜å¯¼è‡´çš„ï¼Œéœ€è¦ç¼–è¾‘è„šæœ¬æ³¨é‡Šæ‰ä¸‹é¢å…¨éƒ¨å†…å®¹å³å¯ 116è¡Œ-123è¡Œï¼š</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#  try:</span></div><div class="line"> <span class="comment">#     resp = urlopen(wellknown_url)</span></div><div class="line"> <span class="comment">#    resp_data = resp.read().decode('utf8').strip()</span></div><div class="line"> <span class="comment">#   assert resp_data == keyauthorization</span></div><div class="line"> <span class="comment"># except (IOError, AssertionError):</span></div><div class="line"> <span class="comment">#    os.remove(wellknown_path)</span></div><div class="line"> <span class="comment">#   raise ValueError("Wrote file to &#123;0&#125;, but couldn't download &#123;1&#125;".format(</span></div><div class="line"> <span class="comment">#      wellknown_path, wellknown_url))</span></div></pre></td></tr></table></figure>
<p>å¦‚æœä¿®æ”¹æ²¡æœ‰ç”¨ï¼Œå¯ä»¥åˆ°æˆ‘è¿™é‡Œä¸‹è½½Githubä¸‹è½½<a href="https://github.com/yangcvo/Let-s-Encrypt" target="_blank" rel="external">acme_tiny.py</a></p>
<p><strong>6ï¼‰ç„¶åä¿å­˜å†æ¬¡è·å–ç½‘ç«™è¯ä¹¦</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root@ihaozhuo1 ssl]<span class="comment"># python acme_tiny.py --account-key ./account.key --csr ./domain.csr --acme-dir /var/www/challenges/ &gt; ./signed.crt</span></div><div class="line">Parsing account key...</div><div class="line">Parsing CSR...</div><div class="line">Registering account...</div><div class="line">Already registered!</div><div class="line">Verifying ihaozhuo.com...</div><div class="line">ihaozhuo.com verified!</div><div class="line">Verifying www.ihaozhuo.com...</div><div class="line">www.ihaozhuo.com verified!</div><div class="line">Signing certificate...</div><div class="line">Certificate signed!</div></pre></td></tr></table></figure>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zhengshu2.png" alt=""></figure></p>
<p>ãŠ—ï¸ å¦‚æœçœ‹åˆ°å¦‚ä¸Šå†…å®¹ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ çš„ç½‘ç«™è¯ä¹¦å·²ç»æˆåŠŸè·å–äº†ã€‚è¿™æ—¶å€™æŸ¥çœ‹ç›®å½•ä¸‹é¢æœ‰å¦‚ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@ihaozhuo1 ssl]<span class="comment"># ll</span></div><div class="line">æ€»ç”¨é‡ 36</div><div class="line">-rw-r--r-- 1 root root 3243 3æœˆ  30 16:42 account.key</div><div class="line">drwxr-xr-x 4 root root 4096 3æœˆ  30 17:31 acme-tiny</div><div class="line">-rw-r--r-- 1 root root 9159 3æœˆ  30 19:23 acme_tiny.py</div><div class="line">-rw-r--r-- 1 root root 1639 3æœˆ  30 17:00 domain.csr</div><div class="line">-rw-r--r-- 1 root root 3243 3æœˆ  30 16:53 domain.key</div><div class="line">-rw-r--r-- 1 root root 2159 3æœˆ  30 22:11 signed.crt</div></pre></td></tr></table></figure>
<p>åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç»æˆåŠŸç”³è¯·åˆ°Letâ€™sENcrpytçš„ç½‘ç«™è¯ä¹¦ï¼Œå¯¹äºNginxç”¨æˆ·æˆ‘ä»¬è¿˜éœ€è¦æŠŠLetâ€™s ENcrpytçš„ä¸­é—´è¯ä¹¦åŠ å…¥åˆ°åˆšåˆšç”Ÿæˆçš„signed.crtæ–‡ä»¶ä¸­ã€‚å…·ä½“æ“ä½œï¼š</p>
<h3 id="ç¬¬äº”æ­¥ï¼šå®‰è£…è¯ä¹¦"><a href="#ç¬¬äº”æ­¥ï¼šå®‰è£…è¯ä¹¦" class="headerlink" title="ç¬¬äº”æ­¥ï¼šå®‰è£…è¯ä¹¦"></a>ç¬¬äº”æ­¥ï¼šå®‰è£…è¯ä¹¦</h3><p>è¯ä¹¦ç”Ÿæˆåï¼Œå°±å¯ä»¥æŠŠå®ƒé…ç½®åœ¨web æœåŠ¡å™¨ä¸Šäº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒNginxéœ€è¦è¿½åŠ ä¸€ä¸ªLetâ€™s Encryptçš„ä¸­é—´è¯ä¹¦ï¼Œåœ¨ Nginx é…ç½®ä¸­ï¼Œéœ€è¦æŠŠä¸­é—´è¯ä¹¦å’Œç½‘ç«™è¯ä¹¦åˆåœ¨ä¸€èµ·ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">wget -O - https://letsencrypt.org/certs/lets-encrypt-x1-cross-signed.pem &gt; intermediate.pem</div><div class="line">cat signed.crt intermediate.pem &gt; chained.pem</div><div class="line"></div><div class="line">[root@ihaozhuo1 ssl]<span class="comment"># ll</span></div><div class="line">æ€»ç”¨é‡ 36</div><div class="line">-rw-r--r-- 1 root root 3243 3æœˆ  30 22:06 account.key</div><div class="line">-rw-r--r-- 1 root root 9159 3æœˆ  30 19:23 acme_tiny.py</div><div class="line">-rw-r--r-- 1 root root 3834 3æœˆ  30 22:51 chained.pem</div><div class="line">-rw-r--r-- 1 root root 1639 3æœˆ  30 22:07 domain.csr</div><div class="line">-rw-r--r-- 1 root root 3243 3æœˆ  30 22:06 domain.key</div><div class="line">-rw-r--r-- 1 root root 1675 3æœˆ  30 22:51 intermediate.pem</div><div class="line">-rw-r--r-- 1 root root 2159 3æœˆ  30 22:51 signed.crt</div></pre></td></tr></table></figure>
<p><strong>1ï¼‰ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨Nginxå¯åŠ¨HTTPSï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ä½ ä¹‹å‰ç½‘ç«™Nginx.confé‡Œé¢é…ç½®</strong></p>
<p>æ³¨æ„âš ï¸ ï¼šä¸ºäº†ä¸å½±å“ç°åœ¨æ­£åœ¨è¿è¡Œçš„ç½‘ç«™ï¼Œåœ¨é…ç½®HTTPSçš„æ—¶å€™æœ€å¥½å°†ä½ ç°åœ¨é…ç½®å¥½çš„æ–‡ä»¶å…¨éƒ¨å¤‡ä»½èµ·æ¥ï¼Œè¿™æ ·ä½ åœ¨å¯åŠ¨HTTPSå‡ºç°é—®é¢˜å¯ä»¥èƒ½å¤Ÿå¿«é€Ÿæ¢å¤å›æ¥ã€‚</p>
<p>Nginxé…ç½®æ–‡ä»¶åŠ å…¥ä»¥ä¸‹é…ç½®ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">server &#123;</div><div class="line">    listen 80;</div><div class="line">    server_name ihaozhuo.com, www.ihaozhuo.com;</div><div class="line"></div><div class="line">    location /.well-known/acme-challenge/ &#123;</div><div class="line">        <span class="built_in">alias</span> /var/www/challenges/;</div><div class="line">        try_files <span class="variable">$uri</span> =404;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ...the rest of your config</div><div class="line">&#125;</div><div class="line"></div><div class="line">server &#123;</div><div class="line">    listen 443;</div><div class="line">    server_name ihaozhuo.com, www.ihaozhuo.com;</div><div class="line"></div><div class="line">    ssl on;</div><div class="line">    ssl_certificate /srv/ssl/chained.pem;</div><div class="line">    ssl_certificate_key /srv/ssl/domain.key;</div><div class="line">    ssl_session_timeout 5m;</div><div class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</div><div class="line">    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA;</div><div class="line">    ssl_session_cache shared:SSL:50m;</div><div class="line">    ssl_prefer_server_ciphers on;</div><div class="line"></div><div class="line">    ...the rest of your config</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨Chromeæµè§ˆå™¨é‡Œé¢ä½ å¯ä»¥è®¿é—®httpså¼€å¤´çš„ï¼Œä½†æ²¡æœ‰çœ‹åˆ°ç»¿è‰²é”æ ‡è®°ï¼Œè¿™æ˜¯å› ä¸ºä½ ç½‘ç«™æœ‰è¯·æ±‚<code>http://xxx</code>èµ„æºï¼Œè¿™ä¸ªé—®é¢˜æˆ‘é‡åˆ°ä»¥åæŸ¥äº†å¾ˆå¤šï¼Œå› ä¸ºæˆ‘ç½‘ç«™å¾ˆæ—©ä¹‹å‰å°±æœ‰äº†ï¼Œé‡Œé¢é…ç½®çš„åœ°å€éƒ½æ˜¯httpè¦ä¿®æ”¹è¿‡æ¥éå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥ç”³è¯·è¯ä¹¦ä¸€å¼€å§‹åŸŸåä¸‹æ¥å°±è¦ç”³è¯·è¿™æ˜¯æœ€å¥½çš„ï¼Œå¦‚æœä½ æƒ…å†µå·²ç»è·Ÿæˆ‘ä¸€æ ·ï¼Œé‚£ä½ éœ€è¦æŠŠæ‰€æœ‰çš„<code>http://xxxx</code> èµ„æºå…¨éƒ¨åˆ‡æ¢æˆï¼š<a href="https://xxx" target="_blank" rel="external">https://xxx</a> çš„èµ„æºï¼Œè¿™æ ·ç»¿è‰²çš„é”æ‰ä¼šå‡ºç°ã€‚<br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zhengshu.png" alt=""></figure></p>
<h3 id="ç¬¬å…­æ­¥ï¼šå®šæœŸæ›´æ–°"><a href="#ç¬¬å…­æ­¥ï¼šå®šæœŸæ›´æ–°" class="headerlink" title="ç¬¬å…­æ­¥ï¼šå®šæœŸæ›´æ–°"></a>ç¬¬å…­æ­¥ï¼šå®šæœŸæ›´æ–°</h3><p>è®¿é—®æŸ¥çœ‹ä¸‹ç½‘ç«™è¯¦ç»†ä¿¡æ¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">[root@ihaozhuo1 conf]<span class="comment">#  curl -v https://www.ihaozhuo.com/home.html</span></div><div class="line">* About to connect() to www.ihaozhuo.com port 443 (<span class="comment">#0)</span></div><div class="line">*   Trying 120.27.185.86...</div><div class="line">* Connected to www.ihaozhuo.com (120.27.185.86) port 443 (<span class="comment">#0)</span></div><div class="line">* Initializing NSS with certpath: sql:/etc/pki/nssdb</div><div class="line">*   CAfile: /etc/pki/tls/certs/ca-bundle.crt</div><div class="line">  CApath: none</div><div class="line">* Server certificate:</div><div class="line">* 	subject: CN=ihaozhuo.com</div><div class="line">* 	start date: 3æœˆ 30 13:51:00 2017 GMT</div><div class="line">* 	expire date: 6æœˆ 28 13:51:00 2017 GMT</div><div class="line">* 	common name: ihaozhuo.com</div><div class="line">* 	issuer: CN=Let<span class="string">'s Encrypt Authority X3,O=Let'</span>s Encrypt,C=US</div><div class="line">* NSS error -8179 (SEC_ERROR_UNKNOWN_ISSUER)</div><div class="line">* Peer<span class="string">'s Certificate issuer is not recognized.</span></div><div class="line">* Closing connection 0</div><div class="line">curl: (60) Peer's Certificate issuer is not recognized.</div><div class="line">More details here: http://curl.haxx.se/docs/sslcerts.html</div><div class="line"></div><div class="line">curl performs SSL certificate verification by default, using a <span class="string">"bundle"</span></div><div class="line"> of Certificate Authority (CA) public keys (CA certs). If the default</div><div class="line"> bundle file isn<span class="string">'t adequate, you can specify an alternate file</span></div><div class="line"> using the --cacert option.</div><div class="line">If this HTTPS server uses a certificate signed by a CA represented in</div><div class="line"> the bundle, the certificate verification probably failed due to a</div><div class="line"> problem with the certificate (it might be expired, or the name might</div><div class="line"> not match the domain name in the URL).</div><div class="line">If you'd like to turn off curl<span class="string">'s verification of the certificate, use</span></div><div class="line"> the -k (or --insecure) option.</div></pre></td></tr></table></figure>
<p>Letâ€™s Encrypt ç­¾å‘çš„è¯ä¹¦åªæœ‰90å¤©æœ‰æ•ˆæœŸï¼Œä½†å¯ä»¥é€šè¿‡è„šæœ¬å®šæœŸæ›´æ–°ã€‚ä½ å¯ä»¥åˆ›å»ºäº†ä¸€ä¸ªè‡ªåŠ¨æ›´æ–°è„šæœ¬<code>renew_cert.sh</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/usr/bin/sh</span></div><div class="line">python /srv/ssl/acme_tiny.py --account-key /srv/ssl/account.key --csr /srv/ssl/domain.csr --acme-dir /var/www/challenges/ &gt; /srv/ssl/signed.crt || <span class="built_in">exit</span></div><div class="line">wget -O - https://letsencrypt.org/certs/lets-encrypt-x1-cross-signed.pem &gt; intermediate.pem</div><div class="line"></div><div class="line">cat /srv/ssl/signed.crt intermediate.pem &gt; /srv/ssl/chained.pem</div><div class="line">service nginx reload</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹crontabé…ç½®ï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#æ¯ä¸ªæœˆæ‰§è¡Œä¸€æ¬¡</span></div><div class="line">0 0 1 * * /srv/ssl/renew_cert.sh 2&gt;&gt; /var/<span class="built_in">log</span>/acme_tiny.log</div></pre></td></tr></table></figure>
<p>å¤§åŠŸå‘Šæˆï¼Œä¸è¿‡å…ˆåˆ«æ€¥ï¼Œè®¿é—®ä¸‹è‡ªå·±çš„HTTPSç½‘ç«™æ˜¯å¦æ­£å¸¸ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œç½‘ç«™æ­£å¼å¯ç”¨HTTPSï¼Œä½†æ˜¯ç½‘ç«™å¦‚æœæœ‰ç”¨CDNçš„è¯ï¼Œé‚£ä¹ˆéœ€è¦CDNä¹Ÿæ”¯æŒHTTPSæ‰è¡Œï¼Œå¦åˆ™æ— æ³•æ­£å¸¸åŠ è½½CDNçš„èµ„æºï¼Œç±»ä¼¼çš„é”™è¯¯å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Mixed Content: The page at <span class="string">'https://ihaozhuo.com/'</span> was loaded over HTTPS, but requested an insecure script <span class="string">'http://app.h5.ihaozhuo.combdimg.com/yjk/css/jquery.min.js'</span>. This request has been blocked; the content must be served over HTTPS.</div></pre></td></tr></table></figure>
<p>ä¸€ç§è§£å†³æ–¹æ³•å°±æ˜¯ä½¿ç”¨Upyunæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¯å‚è€ƒï¼šæˆ‘å†™çš„ä¸€ç¯‡æ–‡ç« å¦‚ä½•è§£å†³httpsè·¨ç«™è®¿é—®è¯ä¹¦ä¸å®‰å…¨è®¿é—®ã€‚</p>
<p>ä¸€ç§è§£å†³æ–¹æ³•å°±æ˜¯ä½¿ç”¨ä¸ƒç‰›çš„äº‘å­˜å‚¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¯å‚è€ƒï¼š<a href="https://blog.blahgeek.com/qiniu-cdn-serve-static/" target="_blank" rel="external">https://blog.blahgeek.com/qiniu-cdn-serve-static/</a></p>
<h2 id="é˜¿é‡Œäº‘SLBå¦‚ä½•é…ç½®HTTPS"><a href="#é˜¿é‡Œäº‘SLBå¦‚ä½•é…ç½®HTTPS" class="headerlink" title="é˜¿é‡Œäº‘SLBå¦‚ä½•é…ç½®HTTPS"></a>é˜¿é‡Œäº‘SLBå¦‚ä½•é…ç½®HTTPS</h2><p>ä½¿ç”¨é˜¿é‡Œäº‘å¾ˆç®€å•ï¼Œä¸éœ€è¦å¤ªå¤šçš„é…ç½®ä¸è¿‡ä¸ªäººè¿˜æ˜¯å–œæ¬¢Nginxå»åšä»£ç†è®¿é—®ã€‚</p>
<p>å…¬å¸åæœŸæ›´æ–°äº†æœ¬åœ°çš„Nginxå»åšè´Ÿè½½å‡è¡¡ç›´æ¥ä½¿ç”¨SLB ï¼Œè¿™é‡Œè®°å½•ä¸‹ç”³è¯·äº†è¯ä¹¦ä»¥ååªéœ€è¦<code>chained.pem</code>å’Œç§é’¥<code>domain.key</code>ã€‚</p>
<p>åœ¨SLBè´Ÿè½½å‡è¡¡å·¦ä¾§æœ‰è¯ä¹¦ç®¡ç†-åˆ›å»ºè¯ä¹¦-é€‰æ‹©æœåŠ¡å™¨è¯ä¹¦ã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/Nginx-ssl2.png" alt=""></figure></p>
<p>ç„¶ååœ¨è´Ÿè½½å‡è¡¡ä¸Šé¢è®¾ç½®ä¸‹ç›‘å¬ç«¯å£é€‰æ‹©ä¸‹å¯¹åº”è¯ä¹¦å°±å¯ä»¥äº†ã€‚ </p>
<h2 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h2><p><a href="https://github.com/diafygi/acme-tiny" target="_blank" rel="external">GitHub å®‰è£…æ•™ç¨‹ </a></p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/11/14/æ—¥å¿—åˆ†æå¹³å°/Graylog/graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ/">graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-11-14</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Log-Analysis-Platform/">Log Analysis Platform</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Graylog/">Graylog</a>
			</span>
		
	</div>

	

	
		<h1 id="graylog-å‡çº§2-1-é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ"><a href="#graylog-å‡çº§2-1-é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ" class="headerlink" title="graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ"></a>graylog å‡çº§2.1 é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆ</h1><p>å‚è€ƒå®˜ç½‘ï¼š<a href="http://docs.graylog.org/en/2.1/pages/upgrade/graylog-2.1.html" target="_blank" rel="external">å‡çº§åˆ°Graylogçš„2.1.x</a></p>
<h3 id="ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ"><a href="#ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ" class="headerlink" title="ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ"></a>ä¸€ï¼šä¸ºä»€ä¹ˆéœ€è¦é›†ä¸­æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Ÿ</h3><p>åœ¨å…¬å¸æœåŠ¡æœºå­éƒ¨ç½²è¶Šæ¥è¶Šå¤šçš„æƒ…å†µä¸‹ï¼Œè®©æˆ‘ä»¬æ¥æƒ³æƒ³ä¼šé‡åˆ°çš„é—®é¢˜ï¼š</p>
<ul>
<li>å¼€å‘äººå‘˜ä¸èƒ½ç™»å½•çº¿ä¸ŠæœåŠ¡å™¨æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼Œç»è¿‡è¿ç»´å‘¨è½¬è´¹æ—¶è´¹åŠ›</li>
<li>æ—¥å¿—æ•°æ®åˆ†æ•£åœ¨å¤šä¸ªç³»ç»Ÿï¼Œéš¾ä»¥æŸ¥æ‰¾</li>
<li>æ—¥å¿—æ•°æ®é‡å¤§ï¼ŒæŸ¥è¯¢é€Ÿåº¦æ…¢</li>
<li>ä¸€ä¸ªè°ƒç”¨ä¼šæ¶‰åŠå¤šä¸ªç³»ç»Ÿï¼Œéš¾ä»¥åœ¨è¿™äº›ç³»ç»Ÿçš„æ—¥å¿—ä¸­å¿«é€Ÿå®šä½æ•°æ®</li>
<li>æ•°æ®ä¸å¤Ÿå®æ—¶</li>
<li>å¾ˆéš¾å¯¹æ•°æ®è¿›è¡ŒæŒ–æ˜ï¼Œåˆ†æï¼Œä¸šåŠ¡å‘Šè­¦ï¼Œå®¡è®¡</li>
<li>è¿™äº›é—®é¢˜çš„å­˜åœ¨è®©å¼€å‘ä»¥åŠè¿ç»´äººå‘˜å¾ˆæ˜¯å¤´ç—›ï¼Œä¸¥é‡å½±å“æ•ˆç‡ï¼</li>
</ul>
<h3 id="äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ"><a href="#äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ" class="headerlink" title="äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ"></a>äºŒï¼šä»€ä¹ˆæ˜¯graylogæŠ€æœ¯æ ˆï¼Ÿ</h3><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ—¥å¿—çš„é›†ä¸­ç®¡ç†æ–¹æ¡ˆï¼ŒgraylogæŠ€æœ¯æ ˆï¼š</p>
<ul>
<li>java ï¼ˆjdk1.8.0_66/ï¼‰ç¯å¢ƒ</li>
<li>Collector-sidecarï¼ˆæ”¶é›†æ—¥å¿—ï¼‰æˆ–è€…syslog</li>
<li>Mongodbï¼ˆå­˜å‚¨æ—¥å¿—æºæ–‡ä»¶ï¼‰</li>
<li>Elasticsearchï¼ˆæä¾›æœç´¢æ—¥å¿—ï¼‰</li>
<li>Graylog2.1.1ï¼ˆæœç´¢å’Œè§†å›¾å±•ç¤ºæ—¥å¿—ï¼Œå‘Šè­¦å’Œæƒé™ï¼‰</li>
</ul>
<p>æœ‰äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±èƒ½æŠŠæ—¥å¿—å…ˆæ”¶é›†èµ·æ¥ï¼Œè¿›è¡Œæˆ‘ä»¬æƒ³è¦çš„åˆ†æä¹‹åï¼Œwebçš„å½¢å¼å±•ç¤ºå‡ºæ¥ï¼Œæä¾›æŸ¥è¯¢ï¼</p>
<h3 id="ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²"><a href="#ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²" class="headerlink" title="ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²"></a>ä¸‰ï¼šgraylogçš„å®‰è£…éƒ¨ç½²</h3><p>å®‰è£…ç¯å¢ƒï¼šlinux centOSç³»ç»Ÿå®‰è£…ï¼Œå·²å®‰è£…JDK1.8ç‰ˆæœ¬ï¼Œå®‰è£…å¯åŠ¨é¡ºåº</p>
<p>1.å®‰è£…éƒ¨ç½²mongodb<br>2.å®‰è£…éƒ¨ç½²elasticsearch<br>3.å®‰è£…éƒ¨ç½²graylog<br>4.å®‰è£…éƒ¨ç½²Graylog Collector Sidecar</p>
<hr>
<p> <strong>1ï¼šå®‰è£…éƒ¨ç½²mongodb</strong> <strong>Javaä¹Ÿå®‰è£…</strong>  å‚è€ƒæˆ‘åšæ–‡æœ‰ä»‹ç»ã€‚ </p>
<p> <strong>2ï¼šå®‰è£…éƒ¨ç½²elasticsearch</strong></p>
<p><strong>(1)ä¸‹è½½jaråŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">wget https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz</div><div class="line"></div><div class="line">å¦‚æœæŠ¥é”™</div><div class="line">æ‰§è¡Œ</div><div class="line"></div><div class="line">wget --no-check-certificate</div><div class="line"></div><div class="line">https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.5/elasticsearch-2.3.5.tar.gz</div></pre></td></tr></table></figure>
<p><strong>(2)è§£å‹jaråŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf elasticsearch-2.3.5.tar.gz -C /opt/</div></pre></td></tr></table></figure>
<p><strong>(3)ä¿®æ”¹elasticsearch.ymlé…ç½®æ–‡ä»¶</strong></p>
<p> è¿™é‡Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼šé…ç½®å‰å…ˆåˆ›å»ºå‡ ä¸ªç›®å½•æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir /home/data/es-data -p</div><div class="line">mkdir /home/data/es-work -p</div></pre></td></tr></table></figure>
<p>elasticsearch-2.3.5å®‰è£…ç›®å½•confä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">vim elasticsearch-2.3.5/config/elasticsearch.yml</div><div class="line"> </div><div class="line">cluster.name: graylog              <span class="comment">#é›†ç¾¤åç§°å»ºè®®å‘½ågraylogï¼Œä¾¿äºè¯†åˆ«åŒºåˆ†</span></div><div class="line">node.name: elasticsearch-node-1     <span class="comment"># elasticsearché›†ç¾¤èŠ‚ç‚¹åç§°</span></div><div class="line">network.host: 192.168.1.234    <span class="comment"># ç»‘å®šèŠ‚ç‚¹IP</span></div><div class="line">http.port: 9200         <span class="comment"># å¤–éƒ¨è®¿é—®ç«¯å£ï¼Œé»˜è®¤ï¼Œä¹Ÿå¯ä»¥å®‰å…¨è€ƒè™‘ä¿®æ”¹</span></div><div class="line">path.logs: /home/data/logs</div><div class="line">path.data: /home/data/es-data</div><div class="line">discovery.zen.ping.multicast.enabled: <span class="literal">false</span>   <span class="comment">#å¤šæ’­å‘ç°æ–¹å¼å…³é—­ï¼Œå› ä¸ºgraylogé‡‡ç”¨å•æ’­æ–¹å¼å‘ç°elasticsearché›†ç¾¤æ–¹å¼</span></div><div class="line">discovery.zen.ping.unicast.hosts                   <span class="comment">#å¤šä¸ªèŠ‚ç‚¹ç”¨é€—å·éš”å¼€</span></div><div class="line">discovery.zen.minimum_master_nodes: 3    <span class="comment"># elasticsearché›†ç¾¤èŠ‚ç‚¹ï¼Œæœ€å°‘é€‰ä¸¾æ•°ï¼Œè¿™ä¸ªæ•°ä¸€å®šè¦è®¾ç½®ä¸ºæ•´ä¸ªé›†ç¾¤èŠ‚ç‚¹ä¸ªæ•°çš„ä¸€åŠåŠ 1ï¼Œå³N/2+1ï¼Œå¿…é¡»ä¸ºå¥‡æ•°</span></div></pre></td></tr></table></figure>
<p><strong>(4)å¯åŠ¨elasticsearchæœåŠ¡</strong></p>
<p>æ–°å»ºä¸€ä¸ªelasticsearchç”¨æˆ·ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒelasticsearchæœåŠ¡ä¸èƒ½ä½¿ç”¨rootç”¨æˆ·å¯åŠ¨</p>
<p>åˆ›å»ºelasticsearchç”¨æˆ·ç»„åŠelasticsearchç”¨æˆ·ï¼Œæ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">groupadd elasticsearch</div><div class="line">useradd elasticsearch -g elasticsearch -p elasticsearch</div></pre></td></tr></table></figure>
<p>å…¶ä¸­-gä½¿ç”¨æˆ·å±äºæŸä¸ªç»„ï¼Œ-pä¸ºæ–°ç”¨æˆ·ä½¿ç”¨åŠ å¯†å¯†ç ï¼‰<br>æ›´æ”¹elasticsearch-2.3.5æ–‡ä»¶å¤¹åŠå†…éƒ¨æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·åŠç»„ä¸ºelasticsearch:elasticsearch</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chown -R elasticsearch:elasticsearch  /home/data/</div><div class="line">chown -R elasticsearch:elasticsearch  elasticsearch-2.3.5</div></pre></td></tr></table></figure>
<p>åˆ‡æ¢ç”¨æˆ·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">su elasticsearch</div></pre></td></tr></table></figure>
<p>åœ¨elasticsearch-2.3.5/binç›®å½•ä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[elasticsearch@graylog bin]$ ps -ef | grep elasticsearch</div><div class="line">root     18265 16004  0 14:27 pts/1    00:00:00 su elasticsearch</div><div class="line">502      18405     1 62 14:27 pts/1    00:00:13 /srv/jdk1.8.0_66/bin/java -Xms256m -Xmx1g -Djava.awt.headless=<span class="literal">true</span> -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+HeapDumpOnOutOfMemoryError -XX:+DisableExplicitGC -Dfile.encoding=UTF-8 -Djna.nosys=<span class="literal">true</span> -Des.path.home=/opt/elasticsearch-2.3.5 -cp /opt/elasticsearch-2.3.5/lib/elasticsearch-2.3.5.jar:/opt/elasticsearch-2.3.5/lib/* org.elasticsearch.bootstrap.Elasticsearch start <span class="_">-d</span></div><div class="line">502      18530 18266  0 14:27 pts/1    00:00:00 grep --color=auto ela</div></pre></td></tr></table></figure>
<p><strong>(5)æ£€æŸ¥elasticsearchæœåŠ¡çŠ¶æ€</strong></p>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æµ‹è¯•Elasticsearchæ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</p>
<p>$ curl -XGET â€˜<a href="http://localhost:9200/_cluster/health?pretty=true" target="_blank" rel="external">http://localhost:9200/_cluster/health?pretty=true</a>â€˜</p>
<p>è¾“å‡ºçš„ä¿¡æ¯å¦‚ä¸‹è¡¨ç¤ºElasticsearchå®‰è£…æˆåŠŸï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[elasticsearch@graylog bin]$ curl -XGET <span class="string">'http://192.168.1.234:9200/_cluster/health?pretty=true'</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"cluster_name"</span> : <span class="string">"graylog"</span>,</div><div class="line">  <span class="string">"status"</span> : <span class="string">"yellow"</span>,</div><div class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</div><div class="line">  <span class="string">"number_of_nodes"</span> : 1,</div><div class="line">  <span class="string">"number_of_data_nodes"</span> : 1,</div><div class="line">  <span class="string">"active_primary_shards"</span> : 30,</div><div class="line">  <span class="string">"active_shards"</span> : 30,</div><div class="line">  <span class="string">"relocating_shards"</span> : 0,</div><div class="line">  <span class="string">"initializing_shards"</span> : 0,</div><div class="line">  <span class="string">"unassigned_shards"</span> : 30,</div><div class="line">  <span class="string">"delayed_unassigned_shards"</span> : 0,</div><div class="line">  <span class="string">"number_of_pending_tasks"</span> : 0,</div><div class="line">  <span class="string">"number_of_in_flight_fetch"</span> : 0,</div><div class="line">  <span class="string">"task_max_waiting_in_queue_millis"</span> : 0,</div><div class="line">  <span class="string">"active_shards_percent_as_number"</span> : 50.0</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3ï¼šå®‰è£…éƒ¨ç½²graylog-2-1ç‰ˆæœ¬"><a href="#3ï¼šå®‰è£…éƒ¨ç½²graylog-2-1ç‰ˆæœ¬" class="headerlink" title="3ï¼šå®‰è£…éƒ¨ç½²graylog-2.1ç‰ˆæœ¬"></a>3ï¼šå®‰è£…éƒ¨ç½²graylog-2.1ç‰ˆæœ¬</h3><p><strong>(1)ä¸‹è½½å®‰è£…åŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://packages.graylog2.org/releases/graylog/graylog-2.1.1.tgz</div></pre></td></tr></table></figure>
<p><strong>(2)è§£å‹å®‰è£…åŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf graylog-2.1.1.tgz -C /opt/.</div></pre></td></tr></table></figure>
<p><strong>(3)ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p>
<p>ä¿®æ”¹å®‰è£…ç›®å½•ä¸‹ graylog.conf.example æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim graylog.conf.example</div></pre></td></tr></table></figure>
<p>web_listen_uri å€¼æ˜¯graylogå¯åŠ¨æˆåŠŸåï¼ŒwebæœåŠ¡è®¿é—®åœ°å€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">web_listen_uri = http://192.168.1.234:9000/</div></pre></td></tr></table></figure>
<p>rest_listen_uri çš„å€¼ï¼Œæ˜¯graylogå¯åŠ¨æˆåŠŸåï¼Œapiè®¿é—®åœ°å€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rest_listen_uri = http://192.168.1.234:9000/api/</div></pre></td></tr></table></figure>
<p>root_timezone = UTC  #è®¾ç½®æ—¶åŒºï¼Œå¦åˆ™é»˜è®¤ä½¿ç”¨çš„æ˜¯UTCæ—¶é—´ä¹Ÿå°±æ˜¯ä¸–ç•Œæ—¶é—´ è¿™é‡Œæ˜¯å¿…é¡»æ”¹ä¸‹çš„ï¼Œå› ä¸ºåæœŸæ”¶é›†æ—¥å¿—æ˜¾ç¤ºæ—¶é—´æ˜¯æœ‰å˜åŒ–çš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">root_timezone = Asia/Shanghai</div></pre></td></tr></table></figure>
<p>å…¶ä¸­ password_secret çš„å€¼ç”¨å‘½ä»¤ç”Ÿæˆ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">yum install -y pwgen</div><div class="line">pwgen -N 1 <span class="_">-s</span> 96       H1R5v17kWtyDxj2PzxLMxu41D6HDt9JzhfZcj6QlCURVddgkLAdnUmpkdIscmmu4ELKsTrHwKvPmxFKSYyTn0YlqebbpQqyr</div><div class="line"></div><div class="line">    password_secret = H1R5v17kWtyDxj2PzxLMxu41D6HDt9JzhfZcj6QlCURVddgkLAdnUmpkdIscmmu4ELKsTrHwKvPmxFKSYyTn0YlqebbpQqyr</div></pre></td></tr></table></figure>
<p>å…¶ä¸­root_password_sha2 çš„å€¼ä½¿ç”¨å‘½ä»¤ç”Ÿæˆ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">echo</span> -n Ihaozhuo_b313 | sha256sum  (è¿™é‡Œå¯¹å¯†ç 123456å“ˆå¸ŒåŠ å¯†)</div><div class="line"></div><div class="line"><span class="built_in">fc</span>88c28d48b0cb97f3fb5286cc35c520409ef037acd30ec687f0c0bd3d5a5115 </div><div class="line">   </div><div class="line">root_password_sha2 = <span class="built_in">fc</span>88c28d48b0cb97f3fb5286cc35c520409ef037acd30ec687f0c0bd3d5a5115</div></pre></td></tr></table></figure>
<p>elasticsearch_cluster_name å€¼å¿…é¡»æ˜¯elasticsearché…ç½®æ–‡ä»¶ä¸­çš„cluster_name</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">elasticsearch_cluster_name = graylog</div></pre></td></tr></table></figure>
<p>elasticsearch_discovery_zen_ping_unicast_hosts å¡«å†™elasticsearchåœ°å€ï¼Œå¦‚æœæ˜¯å¤šä¸ªï¼Œç”¨é€—å·éš”å¼€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">elasticsearch_discovery_zen_ping_unicast_hosts = 192.168.1.234:9300</div></pre></td></tr></table></figure>
<p>elasticsearch_discovery_zen_ping_multicast_enabled = false å¤šæ’­æ¨¡å¼å…³é—­</p>
<p>ç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªElasticsearch shardï¼Œéœ€è¦æŠŠelasticsearch_shardså‚æ•°è®¾ç½®ä¸º1ï¼š<br>elasticsearché›†ç¾¤åˆ†ç‰‡æ•°é‡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">elasticsearch_shards = 1</div></pre></td></tr></table></figure>
<p>elasticsearchç»‘å®šçš„èŠ‚ç‚¹IP</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">299 elasticsearch_network_host = 192.168.1.234</div><div class="line">300 elasticsearch_network_bind_host = 192.168.1.234</div><div class="line">301 elasticsearch_network_publish_host = 192.168.1.234</div></pre></td></tr></table></figure>
<p>mongodbå®‰è£…æœåŠ¡çš„ipåœ°å€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongodb_uri = mongodb://192.168.1.234/graylog</div></pre></td></tr></table></figure>
<p>è¿™é‡Œmongodbæ˜¯å®‰è£…åœ¨æˆ‘åŒä¸€å°æœåŠ¡å™¨ä¸Šé¢çš„ã€‚å¦‚æœè¦æŠŠmongodbå•ç‹¬æœåŠ¡å™¨è·‘è¿æ¥æ–¹å¼é…ç½®æ–‡ä»¶é‡Œé¢ä¹Ÿæœ‰ä¾‹å­è¯´æ˜ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongodb_uri =mongodb://graylog:123456@160.17.2.251:27017/graylog2             <span class="comment">#è¿æ¥åˆ°mongodbçš„æœåŠ¡å™¨åœ°å€ä¸º160.17.2.251:27017ï¼Œè´¦å·ä¸ºgraylogï¼Œå¯†ç ä¸º123456 æ•°æ®åº“ä¸ºgraylog2</span></div></pre></td></tr></table></figure>
<p> è®¾ç½®å‘Šè­¦é‚®ä»¶å‘é€è€…ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> <span class="comment"># Email transport</span></div><div class="line">transport_email_enabled = <span class="literal">false</span></div><div class="line">transport_email_hostname = smtp.exmail.qq.com</div><div class="line">transport_email_port = 465</div><div class="line">transport_email_use_auth = <span class="literal">true</span></div><div class="line">transport_email_use_tls = <span class="literal">true</span></div><div class="line">transport_email_use_ssl = <span class="literal">true</span></div><div class="line">transport_email_auth_username = chengyangyang@qq.cn</div><div class="line">transport_email_auth_password = beneTqq</div><div class="line">transport_email_subject_prefix = [graylog]</div><div class="line">transport_email_from_email = chengyangyang@qq.cn</div></pre></td></tr></table></figure>
<p><strong>(4)å¤åˆ¶é…ç½®æ–‡ä»¶</strong></p>
<p> å› ä¸ºgraylogå®‰è£…binç›®å½•ä¸‹ï¼Œé»˜è®¤å¯åŠ¨é…ç½®æ–‡ä»¶</p>
<p>é…ç½®æ–‡ä»¶è·¯å¾„ï¼š<code>/etc/graylog/server/server.conf</code></p>
<p>æ‰€ä»¥éœ€è¦å°†<code>graylog.conf.example</code> å¤åˆ¶åˆ°<code>/etc/graylog/server/</code>ç›®å½•ä¸‹ï¼Œå¹¶ä¸”æ”¹å <code>server.conf</code></p>
<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir -p /etc/graylog/server/ </div><div class="line">cp graylog.conf.example /etc/graylog/server/server.conf</div></pre></td></tr></table></figure>
<p><strong>(5)å¯åŠ¨graylog</strong></p>
<p>åœ¨graylogå®‰è£…binç›®å½•ä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./graylogctl start</div></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ—¥å¿—ï¼Œåœ¨graylogå®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tail -200f /<span class="built_in">log</span>/graylog-server.log</div></pre></td></tr></table></figure>
<p>å¦‚æœæŠ¥é”™ï¼š</p>
<p>åŸå› ï¼š</p>
<p>åœ¨mongodbç‰ˆæœ¬2.6ä¹‹åï¼Œæ˜¯éœ€è¦æ—¥å¿—journalingè®¾ç½®çš„ï¼Œè€Œé»˜è®¤æƒ…å†µä¸‹æ˜¯å…³é—­çš„</p>
<p>è§£å†³åŠæ³•ï¼š</p>
<p>åœ¨mongodbå¯åŠ¨å‘½ä»¤åŠ ä¸Š â€“journal</p>
<p>æœ€åå¯åŠ¨å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./mongod --dbpath=/usr/<span class="built_in">local</span>/mongodb/data/ --fork --logpath=/usr/<span class="built_in">local</span>/mongodb/logs --storageEngine=mmapv1 --journal</div></pre></td></tr></table></figure>
<p>é‡å¯mongodbåï¼Œé‡å¯graylogæœåŠ¡å³å¯ï¼</p>
<p><strong>(6)å¯åŠ¨graylog(æŠ¥é”™äºŒ)</strong></p>
<p>æŸ¥çœ‹æ—¥å¿—ï¼Œåœ¨graylogå®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">tail -200f /<span class="built_in">log</span>/graylog-server.log</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;com.mongodb.MongoSocketOpenException: Exception opening socket&#125;, caused by &#123;java.net.ConnectException: æ‹’ç»è¿æ¥&#125;&#125;]&#125;. Waiting <span class="keyword">for</span> 30000 ms before timing out</div><div class="line">2016-11-22 15:10:29,355 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Elastic Beats Input 1.1.1 [org.graylog.plugins.beats.BeatsInputPlugin]</div><div class="line">2016-11-22 15:10:29,357 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Collector 1.1.1 [org.graylog.plugins.collector.CollectorPlugin]</div><div class="line">2016-11-22 15:10:29,357 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Enterprise Integration Plugin 1.1.1 [org.graylog.plugins.enterprise_integration.EnterpriseIntegrationPlugin]</div><div class="line">2016-11-22 15:10:29,358 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: MapWidgetPlugin 1.1.1 [org.graylog.plugins.map.MapWidgetPlugin]</div><div class="line">2016-11-22 15:10:29,359 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Pipeline Processor Plugin 1.1.1 [org.graylog.plugins.pipelineprocessor.ProcessorPlugin]</div><div class="line">2016-11-22 15:10:29,359 INFO : org.graylog2.bootstrap.CmdLineTool - Loaded plugin: Anonymous Usage Statistics 2.1.1 [org.graylog.plugins.usagestatistics.UsageStatsPlugin]</div><div class="line">2016-11-22 15:10:29,487 INFO : org.graylog2.bootstrap.CmdLineTool - Running with JVM arguments: -Djava.library.path=./../lib/sigar -Xms1g -Xmx1g -XX:NewRatio=1 -XX:+ResizeTLAB -XX:+UseConcMarkSweepGC -XX:+CMSConcurrentMTEnabled -XX:+CMSClassUnloadingEnabled -XX:+UseParNewGC -XX:-OmitStackTraceInFastThrow</div></pre></td></tr></table></figure>
<p>æç¤ºmongodb æ‹’ç»è¿æ¥ã€‚ è¿™ä¸ªæ—¶å€™éœ€è¦çœ‹ä¸‹ç«¯å£åœ°å€æ˜¯å¦æ˜¯IPåœ°å€è¿˜æ˜¯127.0.0.1 å¦‚æœä¸æ˜¯éœ€è¦ä¿®æ”¹ä¸‹åœ¨é‡å¯æœåŠ¡å°±å¯ä»¥äº†ã€‚</p>
<p><strong>æŸ¥çœ‹å¯åŠ¨æœåŠ¡ç«¯å£ï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[root@graylog graylog-2.1.1]<span class="comment"># netstat -ntulp</span></div><div class="line">Active Internet connections (only servers)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name</div><div class="line">tcp        0      0 127.0.0.1:27017             0.0.0.0:*                   LISTEN      22308/mongod</div><div class="line">tcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN      1974/sshd</div><div class="line">tcp        0      0 127.0.0.1:25                0.0.0.0:*                   LISTEN      1287/master</div><div class="line">tcp        0      0 ::ffff:192.168.1.234:9350   :::*                        LISTEN      23642/java</div><div class="line">tcp        0      0 ::ffff:192.168.1.234:9000   :::*                        LISTEN      23642/java</div><div class="line">tcp        0      0 ::ffff:192.168.1.234:9200   :::*                        LISTEN      18405/java</div><div class="line">tcp        0      0 ::ffff:192.168.1.234:9300   :::*                        LISTEN      18405/java</div><div class="line">tcp        0      0 :::22                       :::*                        LISTEN      1974/sshd</div><div class="line">tcp        0      0 ::1:25                      :::*                        LISTEN      1287/master</div></pre></td></tr></table></figure>
<p><strong>(6)è®¿é—®graylog</strong></p>
<p>graylogå¯åŠ¨æˆåŠŸåï¼Œæµè§ˆå™¨è®¿é—®ï¼š<strong>graylogå®‰è£…IP:9000</strong></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog10.png" alt=""></figure></p>
<h3 id="å››ï¼šæ€»ç»“"><a href="#å››ï¼šæ€»ç»“" class="headerlink" title="å››ï¼šæ€»ç»“"></a>å››ï¼šæ€»ç»“</h3><p>åˆ°æ­¤ï¼ŒåŸºç¡€çš„é›†ä¸­æ—¥å¿—ç®¡ç†graylogå®‰è£…å®Œæ¯•ï¼ï¼Œåç»­å°†ç»§ç»­ä»‹ç»ï¼š</p>
<p>å®‰è£…éƒ¨ç½²Graylog Collector Sidecar æ”¶é›†åº”ç”¨æ—¥å¿—</p>
<p>é‡‡ç”¨syslogæ”¶é›†æ—¥å¿—æ–¹å¼</p>
<p>graylogä¸€äº›ä½¿ç”¨ï¼ŒåŒ…æ‹¬æ—¥å¿—æˆªå–ï¼Œå‘Šè­¦ç­‰ã€‚</p>
<p>ä¹‹å‰ä¹Ÿå®è·µè¿‡ELKæŠ€æœ¯æ ˆï¼Œåæ¥é€‰å‹graylogï¼Œæ˜¯åŸºäºgraylogå¸¦æœ‰çš„æƒé™ç®¡ç†ï¼Œå’Œå‘Šè­¦åŠŸèƒ½æ¯”è¾ƒå®Œå–„ï¼</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/11/13/æ—¥å¿—åˆ†æå¹³å°/Graylog/Graylogâ€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch/">Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-11-13</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Log-Analysis-Platform/">Log Analysis Platform</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Graylog/">Graylog</a>
			</span>
		
	</div>

	

	
		<p>æ‘˜è¦: æèµ·æ—¥å¿—èšåˆå·¥å…·ï¼Œæœ‰å¼€æºç•Œçš„ELKï¼Œå•†ä¸šç•Œçš„Splunkï¼Œä½†æˆ‘è¦ä»‹ç»å¼€æºçš„åèµ·ä¹‹ç§€Graylogï¼Œå¯ä»¥è¯´æ˜¯é¾™å¤´è€å¤§Splunkçš„å¼€æºç‰ˆã€‚</p>
<h1 id="Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch"><a href="#Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch" class="headerlink" title="Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch"></a>Graylogâ€”â€”æ—¥å¿—åˆ†æå¹³å°å®Œç¾ä»£æ›¿Elasticsearch</h1><p>å…ˆçœ‹çœ‹ æ¨èï¼<a href="https://my.oschina.net/HeAlvin/blog/378262" target="_blank" rel="external">å›½å¤–ç¨‹åºå‘˜æ•´ç†çš„ç³»ç»Ÿç®¡ç†å‘˜èµ„æºå¤§å…¨</a> ä¸­ï¼Œå›½å¤–ç¨‹åºå‘˜æ•´ç†çš„æ—¥å¿—èšåˆå·¥å…·çš„åˆ—è¡¨ï¼š</p>
<p><strong>æ—¥å¿—ç®¡ç†å·¥å…·ï¼šæ”¶é›†ï¼Œè§£æï¼Œå¯è§†åŒ–</strong></p>
<ul>
<li>Elasticsearch - ä¸€ä¸ªåŸºäºLuceneçš„æ–‡æ¡£å­˜å‚¨ï¼Œä¸»è¦ç”¨äºæ—¥å¿—ç´¢å¼•ã€å­˜å‚¨å’Œåˆ†æã€‚</li>
<li>Fluentd - æ—¥å¿—æ”¶é›†å’Œå‘å‡º</li>
<li>Flume -åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†å’Œèšåˆç³»ç»Ÿ</li>
<li>Graylog2 -å…·æœ‰æŠ¥è­¦é€‰é¡¹çš„å¯æ’å…¥æ—¥å¿—å’Œäº‹ä»¶åˆ†ææœåŠ¡å™¨</li>
<li>Heka -æµå¤„ç†ç³»ç»Ÿï¼Œå¯ç”¨äºæ—¥å¿—èšåˆ</li>
<li>Kibana - å¯è§†åŒ–æ—¥å¿—å’Œæ—¶é—´æˆ³æ•°æ®</li>
<li>Logstash -ç®¡ç†äº‹ä»¶å’Œæ—¥å¿—çš„å·¥å…·</li>
<li>Octopussy -æ—¥å¿—ç®¡ç†è§£å†³æ–¹æ¡ˆï¼ˆå¯è§†åŒ–/æŠ¥è­¦/æŠ¥å‘Šï¼‰</li>
</ul>
<p>Graylogä¸ELKæ–¹æ¡ˆçš„å¯¹æ¯”</p>
<ul>
<li>ELKï¼š Logstash -&gt; Elasticsearch -&gt; Kibana ï¼ˆä½¿ç”¨äº†ä¸€äº›æ’ä»¶head ï¼Œmarvelï¼‰</li>
<li>Graylogï¼š Graylog Collector -&gt; Graylog Server(å°è£…Elasticsearch) -&gt; Graylog Web</li>
</ul>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/Graylog.png" alt=""></figure></p>
<p>åšä¸ºè¿ç»´ï¼Œå…¬å¸å†…éƒ¨ä½¿ç”¨elkå¤„ç†æ—¥å¿—å‘ç°å¾ˆå¤šé—®é¢˜ã€‚</p>
<p>é¡ºä¾¿æˆªå›¾äº†å‡ å¼ ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog-elk.png" alt=""></figure><br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog-elk1.png" alt=""></figure></p>
<p>ä¹‹å‰è¯•è¿‡Logstash + Elasticsearch + Kibanaçš„æ–¹æ¡ˆï¼Œå‘ç°æœ‰å‡ ä¸ªç¼ºç‚¹ï¼š</p>
<ol>
<li>ä¸èƒ½å¤„ç†å¤šè¡Œæ—¥å¿—ï¼Œæ¯”å¦‚Mysqlæ…¢æŸ¥è¯¢ï¼ŒTomcat/Jettyåº”ç”¨çš„Javaå¼‚å¸¸æ‰“å°</li>
<li>ä¸èƒ½ä¿ç•™åŸå§‹æ—¥å¿—ï¼Œåªèƒ½æŠŠåŸå§‹æ—¥å¿—åˆ†å­—æ®µä¿å­˜ï¼Œè¿™æ ·æœç´¢æ—¥å¿—ç»“æœæ˜¯ä¸€å †Jsonæ ¼å¼æ–‡æœ¬ï¼Œæ— æ³•é˜…è¯»ã€‚</li>
<li>ä¸å¤åˆæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ—¥å¿—è¡Œï¼Œè¢«å…¨éƒ¨ä¸¢å¼ƒã€‚</li>
<li>kibanaç»“åˆä½¿ç”¨ç»å¸¸ä¼šå‡ºç°å¡æ­»ã€‚èµ„æºæ¶ˆè€—éå¸¸å¤§ã€‚</li>
</ol>
<p>æœ¬ç€è§£å†³ä»¥ä¸Š3ä¸ªç¼ºç‚¹çš„åŸåˆ™ï¼Œå†æ¬¡å¯»æ‰¾æ›¿ä»£æ–¹æ¡ˆã€‚ é¦–å…ˆæ‰¾åˆ°äº†å•†ä¸šæ—¥å¿—å·¥å…·Splunkï¼Œå·ç§°æ—¥å¿—ç•Œçš„Googleï¼Œæ„æ€æ˜¯å…¨æ–‡æœç´¢æ—¥å¿—çš„èƒ½åŠ›ï¼Œä¸å…‰èƒ½è§£å†³ä»¥ä¸Š3ä¸ªç¼ºç‚¹ï¼Œè¿˜æä¾›æœç´¢å•è¯é«˜äº®æ˜¾ç¤ºï¼Œä¸åŒé”™è¯¯çº§åˆ«æ—¥å¿—æ ‡è‰²ç­‰å¸å¼•äººçš„ç‰¹æ€§ï¼Œä½†æ˜¯å…è´¹ç‰ˆæœ‰500Mé™åˆ¶ï¼Œä»˜è´¹ç‰ˆæ®è¯´è¦3ä¸‡ç¾åˆ€ï¼Œåªèƒ½æ”¾å¼ƒï¼Œç»§ç»­å¯»æ‰¾ã€‚ æœ€åæ‰¾åˆ°äº†Graylogï¼Œç¬¬ä¸€çœ¼çœ‹åˆ°Graylogï¼Œåªæ˜¯ç³»ç»Ÿæ—¥å¿—syslogçš„é‡‡é›†å·¥å…·ï¼Œä¸€ç‚¹ä¹Ÿæ²¡å¸å¼•åˆ°æˆ‘ã€‚ä½†åæ¥æ·±å…¥äº†è§£åï¼Œæ‰å‘ç°Graylogç®€ç›´å°±æ˜¯å¼€æºç‰ˆçš„Splunkã€‚ æˆ‘è‡ªå·±æ€»ç»“çš„Graylogå¸å¼•äººçš„åœ°æ–¹ï¼š</p>
<ol>
<li>ä¸€ä½“åŒ–æ–¹æ¡ˆï¼Œå®‰è£…æ–¹ä¾¿ï¼Œä¸åƒELKæœ‰3ä¸ªç‹¬ç«‹ç³»ç»Ÿé—´çš„é›†æˆé—®é¢˜ã€‚</li>
<li>é‡‡é›†åŸå§‹æ—¥å¿—ï¼Œå¹¶å¯ä»¥äº‹åå†æ·»åŠ å­—æ®µï¼Œæ¯”å¦‚http_status_codeï¼Œresponse_timeç­‰ç­‰ã€‚</li>
<li>è‡ªå·±å¼€å‘é‡‡é›†æ—¥å¿—çš„è„šæœ¬ï¼Œå¹¶ç”¨curl/ncå‘é€åˆ°Graylog Serverï¼Œå‘é€æ ¼å¼æ˜¯è‡ªå®šä¹‰çš„GELFï¼ŒFluntedå’ŒLogstashéƒ½æœ‰ç›¸åº”çš„è¾“å‡ºGELFæ¶ˆæ¯çš„æ’ä»¶ã€‚è‡ªå·±å¼€å‘å¸¦æ¥å¾ˆå¤§çš„è‡ªç”±åº¦ã€‚å®é™…ä¸Šåªéœ€è¦ç”¨inotifywaitç›‘æ§æ—¥å¿—çš„modifyäº‹ä»¶ï¼Œå¹¶æŠŠæ—¥å¿—çš„æ–°å¢è¡Œç”¨curl/netcatå‘é€åˆ°Graylog Serverå°±å¯ã€‚</li>
<li>æœç´¢ç»“æœé«˜äº®æ˜¾ç¤ºï¼Œå°±åƒgoogleä¸€æ ·ã€‚</li>
<li>æœç´¢è¯­æ³•ç®€å•ï¼Œæ¯”å¦‚ï¼š source:mongo AND reponse_time_ms:&gt;5000ï¼Œé¿å…ç›´æ¥è¾“å…¥elasticsearchæœç´¢jsonè¯­æ³•</li>
<li>æœç´¢æ¡ä»¶å¯ä»¥å¯¼å‡ºä¸ºelasticsearchçš„æœç´¢jsonæ–‡æœ¬ï¼Œæ–¹ä¾¿ç›´æ¥å¼€å‘è°ƒç”¨elasticsearch rest apiçš„æœç´¢è„šæœ¬ã€‚</li>
</ol>
<p>Graylogå›¾è§£</p>
<p>Graylogå¼€æºç‰ˆå®˜ç½‘ï¼š <a href="https://www.graylog.org/" target="_blank" rel="external">https://www.graylog.org/</a></p>
<p>æ¥å‡ å¼ å®˜ç½‘çš„æˆªå›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog2.png" alt=""></figure></p>
<p><figure class="figure"><img src="https://www.graylog.org/assets/itops_full-87fe2811ab676116142c145affa95b902635b1d6da99718057e8ae9d45c15007.png" alt=""></figure></p>
<p><figure class="figure"><img src="https://www.graylog.org/assets/overview_dashboard-3817012f923d4a00e9bde1c0547796319cf0396149464f434cfc2ae83a9da826.png" alt=""></figure></p>
<p>Graylogæ˜¯å¼ºå¤§çš„æ—¥å¿—ç®¡ç†ã€åˆ†æå·¥å…·ã€‚å®ƒåŸºäº Elasticsearch, Javaå’ŒMongoDBã€‚</p>
<p>Graylogå¯ä»¥æ”¶é›†ç›‘æ§å¤šç§ä¸åŒåº”ç”¨çš„æ—¥å¿—ã€‚ä½†æ˜¯ä¸ºäº†ç¤ºèŒƒè¯´æ˜ï¼Œæˆ‘åªæ”¶é›†syslogã€‚å¹¶ä¸”ï¼Œæˆ‘å°†ä¼šæŠŠç”¨åˆ°çš„ç»„ä»¶å…¨éƒ¨å®‰è£…åˆ°ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡å™¨ä¸Šã€‚å¯¹äºå¤§å‹ã€ç”Ÿäº§ç³»ç»Ÿä½ å¯ä»¥æŠŠç»„ä»¶åˆ†å¼€å®‰è£…åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ã€‚</p>
<h3 id="Graylogçš„ç»„ä»¶"><a href="#Graylogçš„ç»„ä»¶" class="headerlink" title="Graylogçš„ç»„ä»¶"></a>Graylogçš„ç»„ä»¶</h3><p>Graylogæœ‰4ä¸ªåŸºæœ¬ç»„ä»¶ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Graylog <span class="built_in">Server</span>ï¼šè¿™ä¸ªæœåŠ¡è´Ÿè´£æ¥æ”¶å’Œå¤„ç†æ—¥å¿—/æ¶ˆæ¯ï¼Œå¹¶ä¸”å’Œå…¶ä»–ç»„ä»¶æ²Ÿé€šã€‚</div><div class="line">Elasticsearchï¼šå­˜å‚¨æ‰€æœ‰çš„æ—¥å¿—ï¼Œå®ƒçš„æ€§èƒ½ä¾èµ–å†…å­˜å’Œç¡¬ç›˜IOã€‚</div><div class="line">MongoDBï¼šå­˜å‚¨å…ƒæ•°æ®ï¼Œè´Ÿè½½ä¸é«˜ã€‚</div><div class="line">graylog-Webæ¥å£ï¼šç”¨æˆ·æ¥å£ã€‚</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯Graylogç»„ä»¶ä¹‹é—´çš„å…³ç³»å›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog3.png" alt=""></figure></p>
<p>ä¸‹é¢æ¥è‡ªæˆ‘å…¬å¸å†…éƒ¨åˆ†äº«çš„PPTæ‹å›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/Graylog4-ppt.png" alt=""></figure></p>
<p>ç”Ÿäº§ç¯å¢ƒ æˆ‘å‚è€ƒç½‘ä¸Šä¸€äº›åšå®¢ç”»çš„å›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog5.png" alt=""></figure></p>
<h3 id="ç³»ç»Ÿè¦æ±‚ï¼š"><a href="#ç³»ç»Ÿè¦æ±‚ï¼š" class="headerlink" title="ç³»ç»Ÿè¦æ±‚ï¼š"></a>ç³»ç»Ÿè¦æ±‚ï¼š</h3><ul>
<li>CentOS 6.7</li>
<li>å†…å­˜è‡³å°‘2GB</li>
<li>æœ‰rootæƒé™</li>
<li>æœåŠ¡å™¨ipæ˜¯192.168.1.234ï¼Œå·²å®‰è£… 1.8.0_77-b03</li>
</ul>
<p>è¿™é‡Œæˆ‘åªæ˜¯ä¸¾ä¾‹å•ä¸€æ¨¡å¼è·‘æœåŠ¡ã€‚</p>
<h3 id="å®‰è£…MongoDB"><a href="#å®‰è£…MongoDB" class="headerlink" title="å®‰è£…MongoDB"></a>å®‰è£…MongoDB</h3><p>MongoDBçš„å®‰è£…éå¸¸ç®€å•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯¼å…¥MongoDB GPGå¯†é’¥åˆ°rpmï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">vim</span> <span class="string">/etc/yum.repos.d/mongodb-org-3.0.repo</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">[mongodb-org-3.0]</span></div><div class="line"><span class="string">name=MongoDB</span> <span class="string">Repository</span></div><div class="line"><span class="string">baseurl=http://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.0/x86_64/</span></div><div class="line"><span class="string">gpgcheck=0</span></div><div class="line"><span class="string">enabled=1</span></div><div class="line"><span class="meta">---</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">yum</span> <span class="string">install</span> <span class="bullet">-y</span> <span class="string">mongodb-org</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">vi</span> <span class="string">/etc/yum.conf</span></div><div class="line"><span class="string">æœ€åä¸€è¡Œæ·»åŠ ï¼š</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">exclude=mongodb-org,mongodb-org-server,mongodb-org-shell,mongodb-org-mongos,mongodb-org-tools</span></div><div class="line"><span class="meta">---</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">service</span> <span class="string">mongod</span> <span class="string">start</span></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">chkconfig</span> <span class="string">mongod</span> <span class="string">on</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">yum.repos.d]#</span> <span class="string">vi</span> <span class="string">/etc/security/limits.conf</span></div><div class="line"><span class="string">æœ€åä¸€è¡Œæ·»åŠ ï¼š</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">*</span>                <span class="string">soft</span>    <span class="string">nproc</span>           <span class="number">65536</span></div><div class="line"><span class="string">*</span>                <span class="string">hard</span>    <span class="string">nproc</span>           <span class="number">65536</span></div><div class="line"><span class="string">mongod</span>           <span class="string">soft</span>    <span class="string">nproc</span>           <span class="number">65536</span></div><div class="line"></div><div class="line"><span class="string">*</span>                <span class="string">soft</span>    <span class="string">nofile</span>          <span class="number">131072</span></div><div class="line"><span class="string">*</span>                <span class="string">hard</span>    <span class="string">nofile</span>          <span class="number">131072</span></div><div class="line"><span class="meta">---</span></div><div class="line"></div><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">vi</span> <span class="string">/etc/init.d/mongod</span></div><div class="line"><span class="string">ulimit</span> <span class="bullet">-f</span> <span class="string">unlimited</span> <span class="string">è¡Œå‰æ’å…¥ï¼š</span></div><div class="line"><span class="meta">---</span></div><div class="line">  <span class="string">if</span> <span class="string">test</span> <span class="bullet">-f</span> <span class="string">/sys/kernel/mm/transparent_hugepage/enabled;</span> <span class="string">then</span></div><div class="line">    <span class="string">echo</span> <span class="string">never</span> <span class="string">&gt; /sys/kernel/mm/transparent_hugepage/enabled</span></div><div class="line">  fi</div><div class="line">  if test -f /sys/kernel/mm/transparent_hugepage/defrag; then</div><div class="line">    echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</div><div class="line">  fi</div><div class="line">---</div><div class="line">[root@graylog ~]# /etc/init.d/mongod restart</div></pre></td></tr></table></figure>
<h3 id="å®‰è£…Elasticsearch"><a href="#å®‰è£…Elasticsearch" class="headerlink" title="å®‰è£…Elasticsearch"></a>å®‰è£…Elasticsearch</h3><p>Graylogç›®å‰ä¸ºæ­¢åªèƒ½ä½¿ç”¨Elasticsearch 2.0ä»¥å‰çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥ï¼Œåœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘å°†å®‰è£…Elasticsearch 1.7.xã€‚</p>
<p>æ·»åŠ Elasticsearch GPGå¯†é’¥ï¼š</p>
<pre><code>$ sudo rpm --import http://packages.elastic.co/GPG-KEY-elasticsearch
</code></pre><p>åˆ›å»ºElasticsearchæºï¼š</p>
<pre><code>$ sudo vim /etc/yum.repos.d/elasticsearch.repo
</code></pre><p>å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="section">[elasticsearch-1.7]</span></div><div class="line"><span class="attr">name</span>=Elasticsearch repository for <span class="number">1.7</span>.x packages</div><div class="line"><span class="attr">baseurl</span>=http://packages.elastic.co/elasticsearch/<span class="number">1.7</span>/centos</div><div class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></div><div class="line"><span class="attr">gpgkey</span>=http://packages.elastic.co/GPG-KEY-elasticsearch</div><div class="line"><span class="attr">enabled</span>=<span class="number">1</span></div></pre></td></tr></table></figure>
<p>å®‰è£…Elasticsearchï¼š</p>
<pre><code>$ sudo yum -y install elasticsearch
</code></pre><p>é…ç½®å‰å…ˆåˆ›å»ºå‡ ä¸ªç›®å½•æ–‡ä»¶</p>
<pre><code>mkdir /data/es-data -p
mkdir /data/es-work -p
</code></pre><p>Elasticsearchå®‰è£…å®Œæˆä¹‹åï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code>sudo vim /etc/elasticsearch/elasticsearch.yml

 node.data: true  # æ•°æ®å­˜æ”¾true
</code></pre><p>æ‰¾åˆ°cluster.nameä¸€è¡Œï¼Œå–æ¶ˆè¿™ä¸€è¡Œçš„æ³¨é‡Šï¼Œå¹¶æŠŠå€¼æ”¹ä¸ºgraylog-developmentï¼š</p>
<pre><code>cluster.name: graylog-development


 path.data: /data/es-data     esæ•°æ®å­˜æ”¾ç›®å½•  è¿™é‡Œéœ€è¦è‡ªå·±æ–°å»ºç›®å½•

 path.work: /data/es-work   
</code></pre><p>ä½ ä¹Ÿè®¸æƒ³è¦é™åˆ¶å¤–éƒ¨è®¿é—®Elasticsearchï¼ˆç«¯å£9200ï¼‰ï¼Œè¿™æ ·å¯ä»¥æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚æ‰¾åˆ°network.hostä¸€è¡Œï¼Œå–æ¶ˆæ³¨é‡Šï¼Œå¹¶æŠŠå€¼æ”¹ä¸ºlocalhostï¼š</p>
<pre><code>network.host: 192.168.1.234
</code></pre><p>ä¿å­˜é€€å‡ºæ–‡ä»¶ã€‚</p>
<p>é‡å¯Elasticsearchï¼š</p>
<pre><code>$ service elasticsearch start
</code></pre><p>è®¾ç½®å¼€æœºå¯åŠ¨ï¼š</p>
<pre><code>$ chkconfig --add elasticsearch
</code></pre><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æµ‹è¯•Elasticsearchæ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</p>
<pre><code>$ curl -XGET &apos;http://localhost:9200/_cluster/health?pretty=true&apos;
</code></pre><p>è¾“å‡ºçš„ä¿¡æ¯å¦‚ä¸‹è¡¨ç¤ºElasticsearchå®‰è£…æˆåŠŸï¼š</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">drwxr-xr-x. <span class="number">2</span> root   root  <span class="number">4096</span> <span class="number">9</span>æœˆ  <span class="number">23</span> <span class="number">2011</span> src</div><div class="line">[root<span class="symbol">@ELK</span> <span class="keyword">local</span>]<span class="meta">#  curl -XGET <span class="string">'http://192.168.1.234:9200/_cluster/health?pretty=true'</span></span></div><div class="line">&#123;</div><div class="line">  <span class="string">"cluster_name"</span> : <span class="string">"graylog-development"</span>,</div><div class="line">  <span class="string">"status"</span> : <span class="string">"yellow"</span>,</div><div class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</div><div class="line">  <span class="string">"number_of_nodes"</span> : <span class="number">1</span>,</div><div class="line">  <span class="string">"number_of_data_nodes"</span> : <span class="number">1</span>,</div><div class="line">  <span class="string">"active_primary_shards"</span> : <span class="number">37</span>,</div><div class="line">  <span class="string">"active_shards"</span> : <span class="number">37</span>,</div><div class="line">  <span class="string">"relocating_shards"</span> : <span class="number">0</span>,</div><div class="line">  <span class="string">"initializing_shards"</span> : <span class="number">0</span>,</div><div class="line">  <span class="string">"unassigned_shards"</span> : <span class="number">37</span>,</div><div class="line">  <span class="string">"delayed_unassigned_shards"</span> : <span class="number">0</span>,</div><div class="line">  <span class="string">"number_of_pending_tasks"</span> : <span class="number">0</span>,</div><div class="line">  <span class="string">"number_of_in_flight_fetch"</span> : <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®‰è£…Graylag</p>
<p>Graylogçš„æœ€æ–°ç‰ˆæ˜¯1.1.4ï¼Œä¸‹è½½é“¾æ¥å¦‚ä¸‹ï¼š<br><a href="https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-server-1.1.4-1.noarch.rpm" target="_blank" rel="external">https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-server-1.1.4-1.noarch.rpm</a><br><a href="https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-web-1.1.4-1.noarch.rpm" target="_blank" rel="external">https://packages.graylog2.org/repo/el/6Server/1.1/x86_64/graylog-web-1.1.4-1.noarch.rpm</a></p>
<p>ç°åœ¨Graylogçš„æ‰€æœ‰ä¾èµ–è½¯ä»¶å®‰è£…å®Œæˆï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬æ¥å®‰è£…graylog-serverã€‚</p>
<p>é¦–å…ˆï¼Œä¸‹è½½Graylog RPMè½¯ä»¶åŒ…ï¼š</p>
<pre><code>$ cd 
$ sudo rpm -Uvh https://packages.graylog2.org/repo/packages/graylog-1.3-repository-el7_latest.rpm
</code></pre><p>å®‰è£…graylog-serverï¼š</p>
<pre><code>yum -y install graylog-server
</code></pre><p>å®‰è£…pwgenï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒç”Ÿæˆéšæœºå¯†ç ï¼š</p>
<pre><code>yum -y install epel-release
yum -y install pwgen
</code></pre><p>ç°åœ¨æˆ‘ä»¬æ¥è®¾ç½®Graylogç®¡ç†å‘˜çš„å¯†é’¥ã€‚é…ç½®æ–‡ä»¶ä½äº/etc/graylog/server/server.confç›®å½•ï¼Œéœ€è¦ä¿®æ”¹password_secretå‚æ•°ï¼š</p>
<pre><code>$ SECRET=$(pwgen -s 96 1)
$ sudo -E sed -i -e &apos;s/password_secret =.*/password_secret = &apos;$SECRET&apos;/&apos; /etc/graylog/server/server.conf
</code></pre><p>æ‰§è¡Œå®Œä¸Šé¢å‘½ä»¤ä¹‹åï¼Œpassword_secretå‚æ•°çš„æ ·å­ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog6.png" alt=""></figure></p>
<p>è¿™ä¸€æ­¥ï¼Œè®¾ç½®ç®¡ç†å‘˜å¯†ç ã€‚ç”±äºå¯†ç ä½¿ç”¨shaå“ˆå¸Œç®—æ³•ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ˜æ–‡å¯†ç è½¬æ¢ä¸ºhashï¼Œç„¶åèµ‹å€¼ç»™root_password_sha2å‚æ•°ã€‚ä¾‹å¦‚ï¼Œæˆ‘è¦è®¾ç½®çš„ç®¡ç†å‘˜å¯†ç æ˜¯ Ihaozhuo_b313ï¼Œå®ƒå¯¹åº”çš„hashä¸ºï¼š</p>
<pre><code>$ echo -n Ihaozhuo_b313 | sha256sum | awk &apos;{print $1}&apos;
</code></pre><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog7.png" alt=""></figure></p>
<p>ç¼–è¾‘/etc/graylog/server/server.confï¼Œè®¾ç½®root_password_sha2å‚æ•°ï¼š</p>
<pre><code>$ sudo vim /etc/graylog/server/server.conf
</code></pre><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog8.png" alt=""></figure></p>
<p>ç°åœ¨Graylogç®¡ç†å‘˜å¯†ç ä¸ºIhaozhuo_b313ã€‚</p>
<p>é…ç½®rest_transport_uriå‚æ•°ï¼Œè®¾ç½®Graylog webæ¥å£å’ŒæœåŠ¡å™¨çš„æ²Ÿé€šæ–¹å¼ã€‚ç”±äºæˆ‘ä»¬æŠŠæ‰€æœ‰ç»„ä»¶éƒ½å®‰è£…åˆ°äº†å•ç‹¬çš„ä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œéœ€è¦æŠŠå€¼è®¾ç½®ä¸º<strong>127.0.0.1</strong> æˆ– <strong>localhost</strong>ã€‚æ‰¾åˆ°rest_transport_uriä¸€è¡Œï¼Œå–æ¶ˆæ³¨é‡Šï¼Œå¹¶æŠŠå€¼è®¾ç½®ä¸ºï¼š</p>
<pre><code>rest_transport_uri = http://192.168.1.234:12900/
</code></pre><p>ç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªElasticsearch shardï¼Œéœ€è¦æŠŠelasticsearch_shardså‚æ•°è®¾ç½®ä¸º1ï¼š</p>
<pre><code>elasticsearch_shards = 1
</code></pre><p>æ›´æ”¹elasticsearch_cluster_nameå‚æ•°ï¼Œåº”è¯¥å’Œå‰é¢Elasticsearchçš„<strong>cluster.name</strong>å‚æ•°ç›¸å¯¹åº”ï¼š</p>
<pre><code>elasticsearch_cluster_name = graylog-development
</code></pre><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog9.png" alt=""></figure></p>
<p>å–æ¶ˆä¸‹é¢ä¸¤è¡Œçš„æ³¨é‡Šï¼Œæ£€æµ‹Elasticsearchï¼š</p>
<pre><code>172 elasticsearch_discovery_zen_ping_multicast_enabled = false
173 elasticsearch_discovery_zen_ping_unicast_hosts = 192.168.1.234:9300
</code></pre><p>å¯åŠ¨graylog-serverï¼š</p>
<pre><code>/etc/init.d/graylog-web restart
</code></pre><h3 id="å®‰è£…Graylog-Web"><a href="#å®‰è£…Graylog-Web" class="headerlink" title="å®‰è£…Graylog Web"></a>å®‰è£…Graylog Web</h3><p>å®‰è£…Graylog Webï¼š</p>
<pre><code>$ sudo yum -y install graylog-web
</code></pre><p>å®‰è£…å®Œæˆä¹‹åé…ç½®Graylog Webçš„å¯†é’¥ï¼Œé…ç½®æ–‡ä»¶ä½äº/etc/graylog/web/web.confï¼Œæ›´æ”¹application.secretå‚æ•°ï¼š</p>
<pre><code>$ SECRET=$(pwgen -s 96 1)
$ sudo -E sed -i -e &apos;s/application\.secret=&quot;&quot;/application\.secret=&quot;&apos;$SECRET&apos;&quot;/&apos; /etc/graylog/web/web.conf
</code></pre><p>é…ç½®graylog2-server.uriså‚æ•°ï¼Œå®ƒçš„å€¼åº”è¯¥å’ŒGraylogçš„rest_listen_uriå‚æ•°ç›¸å¯¹åº”ï¼š</p>
<pre><code>$ sudo vim /etc/graylog/web/web.conf

graylog2-server.uris=&quot;http://127.0.0.1:12900/&quot;
</code></pre><p>é‡å¯graylog-webï¼š</p>
<pre><code>/etc/init.d/graylog-web restart
</code></pre><h3 id="é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—"><a href="#é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—" class="headerlink" title="é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—"></a>é…ç½®GraylogæœåŠ¡å™¨æ¥æ”¶å…¶ä»–æœåŠ¡å™¨çš„syslogæ—¥å¿—</h3><h4 id="ç™»å½•Graylog-Web"><a href="#ç™»å½•Graylog-Web" class="headerlink" title="ç™»å½•Graylog Web"></a>ç™»å½•Graylog Web</h4><p>ä½¿ç”¨æµè§ˆå™¨è®¿é—®GraylogæœåŠ¡å™¨çš„åŸŸåæˆ–IPï¼š<strong><a href="http://graylog_public_IP_domain:9000/" target="_blank" rel="external">http://graylog_public_IP_domain:9000/</a></strong>ã€‚</p>
<p>ä½ åº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ªç™»å½•ç•Œé¢ï¼Œä½¿ç”¨adminåšä¸ºç”¨æˆ·åå’Œå‰é¢è®¾ç½®çš„å¯†ç ç™»å½•ã€‚</p>
<p>ç™»å½•ä¹‹åï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog10.png" alt=""></figure></p>
<p>ä¸Šé¢çš„çº¢æ•°å­—1æ˜¯é€šçŸ¥ï¼ˆyou have a node without any running inputsï¼‰ï¼Œä¸‹é¢è®¾ç½®é€šè¿‡UDPæ¥æ”¶syslogã€‚</p>
<p>åˆ›å»ºsyslog UDPè¾“å…¥</p>
<p>æ·»åŠ è¦æ¥æ”¶çš„å…¶ä»–æœåŠ¡å™¨syslogæ—¥å¿—ï¼šSystem-&gt;Inputs-&gt;Syslog UDP-&gt;Launch new inputã€‚</p>
<p>åœ¨å¼¹å‡ºçš„çª—å£ä¸Šè¾“å…¥å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>Title: syslog</li>
<li>Port: 8514</li>
<li>Bind address: è¿™é‡Œå†™Graylog-serveræœåŠ¡å™¨ä¸»æœºIP</li>
</ul>
<p>ç‚¹å‡»Launch</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog11.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog12.png" alt=""></figure></p>
<p>å¦‚æœä½ éœ€è¦æ”¶é›†å¤šä¸ªæœåŠ¡å™¨çš„æ—¥å¿—ï¼Œé‡å¤ä¸Šé¢æ­¥éª¤ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„GraylogæœåŠ¡å™¨å·²ç»åšå¥½äº†æ¥æ”¶å…¶ä»–æœåŠ¡å™¨å‘æ¥æ—¥å¿—çš„å‡†å¤‡ã€‚ä¸‹é¢æˆ‘ä»¬è¿˜éœ€è¦é…ç½®å…¶ä»–æœåŠ¡å™¨ï¼Œè®©è¿™äº›æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€æ—¥å¿—ã€‚</p>
<h4 id="é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog"><a href="#é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog" class="headerlink" title="é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog"></a>é…ç½®å…¶ä»–æœåŠ¡å™¨ç»™GraylogæœåŠ¡å™¨å‘é€syslog</h4><p>å‚è€ƒå®˜ç½‘ï¼š<a href="https://marketplace.graylog.org/addons/a47beb3b-0bd9-4792-a56a-33b27b567856" target="_blank" rel="external">ä»Linuxç³»ç»Ÿæ—¥å¿—å‘é€åˆ°Graylog</a></p>
<p>SSHç™»å½•â€œå…¶ä»–æœåŠ¡å™¨â€ï¼Œåˆ›å»ºrsyslogé…ç½®æ–‡ä»¶90-graylog.confï¼š</p>
<pre><code>sudo vim /etc/rsyslog.d/90-graylog.conf
</code></pre><p>æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ŒæŠŠ graylog_server_IP æ›¿æ¢ä¸ºGraylogæœåŠ¡å™¨ipåœ°å€ï¼š</p>
<pre><code>$template GRAYLOGRFC5424,&quot;&lt;%pri%&gt;%protocol-version% %timestamp:::date-rfc3339%    %HOSTNAME% %app-name% %procid% %msg%\n&quot;
*.* @graylog_server_IP:8514;GRAYLOGRFC5424
</code></pre><p>é‡å¯rsyslogæœåŠ¡ä½¿ç”Ÿæ•ˆï¼š</p>
<pre><code>/etc/init.d/rsyslog restart
</code></pre><p>é…ç½®å®Œæˆä¹‹åï¼Œå›åˆ°Graylog Webï¼Œç‚¹å‡»Sourcesï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰æ–°æ·»åŠ rsyslogã€‚</p>
<h4 id="Graylogä½¿ç”¨httpåè®®å‘é€ï¼š"><a href="#Graylogä½¿ç”¨httpåè®®å‘é€ï¼š" class="headerlink" title="Graylogä½¿ç”¨httpåè®®å‘é€ï¼š"></a>Graylogä½¿ç”¨httpåè®®å‘é€ï¼š</h4><p>æ·»åŠ è¦æ¥æ”¶çš„å…¶ä»–æœåŠ¡å™¨syslogæ—¥å¿—ï¼šSystem-&gt;Inputs-&gt;GELF HTTP-&gt;Launch new inputã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog14.png" alt=""></figure></p>
<p>ç„¶ååœ¨æœåŠ¡å™¨ä¸Šé¢å‘é€ä¸‹é¢å‘½ä»¤ã€‚</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog-development ~]</span># curl -XPOST http://<span class="number">192.168.1.234:12201</span>/gelf -p0 -d '&#123;<span class="string">"short_message"</span>:<span class="string">"Hello there"</span>, <span class="string">"host"</span>:<span class="string">"example.org"</span>, <span class="string">"facility"</span>:<span class="string">"test"</span>, <span class="string">"_foo"</span>:<span class="string">"bar"</span>&#125;'</div><div class="line"><span class="string">[root@graylog-development ~]</span># curl -XPOST http://<span class="number">192.168.1.234:12201</span>/gelf -p0 -d '&#123;<span class="string">"short_message"</span>:<span class="string">"æµ‹è¯•"</span>, <span class="string">"host"</span>:<span class="string">"example.org"</span>, <span class="string">"facility"</span>:<span class="string">"test"</span>, <span class="string">"_foo"</span>:<span class="string">"bar"</span>&#125;'</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå®šä¹‰192.168.1.234 æ˜¯graylog-serveræœåŠ¡å™¨åœ°å€ 12201 ç«¯å£æ˜¯ä¹‹å‰åˆ›å»ºå¥½çš„ã€‚</p>
<h3 id="æœç´ Graylog"><a href="#æœç´ Graylog" class="headerlink" title="æœç´ Graylog"></a>æœç´ Graylog</h3><p>å‡å¦‚ä½ è¦æœç´¢helloï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/graylog13.png" alt=""></figure></p>
<p>ä¸Šé¢å®‰è£…é…ç½®äº†åŸºæœ¬çš„GraylogæœåŠ¡å™¨ã€‚</p>
<h3 id="æ—¶åŒºå’Œé«˜äº®è®¾ç½®"><a href="#æ—¶åŒºå’Œé«˜äº®è®¾ç½®" class="headerlink" title="æ—¶åŒºå’Œé«˜äº®è®¾ç½®"></a>æ—¶åŒºå’Œé«˜äº®è®¾ç½®</h3><p>adminå¸å·çš„æ—¶åŒºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">vi</span> <span class="string">/etc/graylog/server/server.conf</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="number">30</span> <span class="string">root_timezone</span> <span class="string">=</span> <span class="string">Asia/Shanghai</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">/etc/init.d/graylog-server</span> <span class="string">restart</span></div></pre></td></tr></table></figure>
<p>å…¶ä»–å¸å·çš„é»˜è®¤æ—¶åŒºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">vi</span> <span class="string">/etc/graylog/web/web.conf</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="number">18</span> <span class="string">timezone="Asia/Shanghai"</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">/etc/init.d/graylog-web</span> <span class="string">restart</span></div></pre></td></tr></table></figure>
<p>å…è®¸æŸ¥è¯¢ç»“æœé«˜äº®ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">vi</span> <span class="string">/etc/graylog/server/server.conf</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="number">147</span> <span class="string">allow_highlighting</span> <span class="string">=</span> <span class="literal">true</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="string">[root@graylog</span> <span class="string">~]#</span> <span class="string">/etc/init.d/graylog-server</span> <span class="string">restart</span></div></pre></td></tr></table></figure>
<h3 id="ç§»åŠ¨æ•°æ®ç›®å½•"><a href="#ç§»åŠ¨æ•°æ®ç›®å½•" class="headerlink" title="ç§»åŠ¨æ•°æ®ç›®å½•"></a>ç§»åŠ¨æ•°æ®ç›®å½•</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ç§»åŠ¨elasticsearchçš„æ•°æ®ç›®å½•</div><div class="line">[root@graylog ~]<span class="comment"># sudo /etc/init.d/elasticsearch stop</span></div><div class="line">[root@graylog ~]<span class="comment"># sudo cp -rp /var/lib/elasticsearch/ /data/</span></div><div class="line">[root@graylog ~]<span class="comment"># sudo vi /etc/sysconfig/elasticsearch</span></div><div class="line">+<span class="number">16</span> DATA_DIR=/data/elasticsearch</div><div class="line">[root@graylog ~]<span class="comment"># sudo /etc/init.d/elasticsearch start</span></div><div class="line"></div><div class="line">ç§»åŠ¨mongoçš„æ•°æ®ç›®å½•</div><div class="line">[root@graylog ~]<span class="comment"># sudo /etc/init.d/mongod stop</span></div><div class="line">[root@graylog ~]<span class="comment"># sudo cp -rp /var/lib/mongo /data/</span></div><div class="line">[root@graylog ~]<span class="comment"># sudo vi /etc/mongod.conf</span></div><div class="line">---</div><div class="line"><span class="number">13</span> dbpath=/<span class="keyword">var</span>/lib/mongo<span class="function"></span></div><div class="line">-&gt;</div><div class="line"><span class="number">13</span> dbpath=/data/mongo</div><div class="line">---</div><div class="line">[mtagent@access2 ~]$ sudo /etc/init.d/mongod start</div></pre></td></tr></table></figure>
<h4 id="å…¶ä½™å‚è€ƒæ–‡æ¡£"><a href="#å…¶ä½™å‚è€ƒæ–‡æ¡£" class="headerlink" title="å…¶ä½™å‚è€ƒæ–‡æ¡£"></a>å…¶ä½™å‚è€ƒæ–‡æ¡£</h4><p><a href="http://docs.graylog.org/en/1.3/" target="_blank" rel="external">å‚è€ƒå®˜ç½‘</a></p>
<p><a href="http://blog.topspeedsnail.com/archives/4066" target="_blank" rel="external">Centos7 æ­å»ºgraylog</a></p>
<p><a href="https://my.oschina.net/fitnessefan/blog/464351?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">Graylogâ€”â€”æ—¥å¿—èšåˆå·¥å…·ä¸­çš„åèµ·ä¹‹ç§€</a></p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/11/10/è¿ç»´ç¬”è®°/å¦‚ä½•è§£å†³æŠ½å¥–çš„æ€§èƒ½é—®é¢˜å’Œç§’æ€çš„è®¨è®º  /">å¦‚ä½•è§£å†³ç§’æ€çš„æ€§èƒ½é—®é¢˜å’Œå¾®ä¿¡æ¨å¹¿æ´»åŠ¨çš„è®¨è®º</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-11-10</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/è¿ç»´ç¬”è®°/">è¿ç»´ç¬”è®°</a>
			</span><br />
		
		
	</div>

	

	
		<p>æœ€è¿‘ä¸šåŠ¡è¯•æ°´å¾®ä¿¡æŠ½å¥–æ´»åŠ¨ï¼Œå…¬å¸ç°åœ¨æ‰“ç®—æ¨å¹¿ä¸‹äº§å“ã€‚å¢åŠ äº›ç²‰ä¸é‡ ä¹‹å‰ç»å¸¸çœ‹åˆ°æ·˜å®çš„åŒè¡Œä»¬è®¨è®ºç§’æ€ï¼Œè®¨è®ºç”µå•†ï¼Œè¿™æ¬¡ç»ˆäºè½®åˆ°æˆ‘ä»¬è‡ªå·±ç†è®ºç»“åˆå®é™…ä¸€æ¬¡äº†ã€‚</p>
<p>psï¼šè¿›å…¥æ­£æ–‡å‰å…ˆè¯´ä¸€ç‚¹ä¸ªäººæ„Ÿå—ï¼Œä¹‹å‰çœ‹æ·˜å®çš„pptæ„Ÿè§‰éƒ½æ‡‚äº†ï¼Œç­‰åˆ°è‡ªå·±å‡ºè§£å†³æ–¹æ¡ˆçš„æ—¶å€™å‘ç°è¿˜æ˜¯æœ‰å¾ˆå¤šæƒ³ä¸åˆ°çš„åœ°æ–¹å…¶å®éƒ½æ²¡æ‡‚ï¼Œå†æ¬¡éªŒè¯äº†â€œç»†èŠ‚æ˜¯é­”é¬¼â€çš„ç†è®ºã€‚å¹¶ä¸”ä¸€ä¸ªäººçš„èƒ½åŠ›æœ‰é™ï¼Œåªæœ‰å¤§å®¶ä¸€èµ·è®¨è®ºæ‰èƒ½æƒ³çš„æ›´å‘¨å…¨ï¼Œæ›´ç»†è‡´ã€‚å¥½äº†ï¼Œé—²è¯å°‘è¯´ï¼Œä¸‹é¢è¿›å…¥æ­£æ–‡ã€‚</p>
<h4 id="ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€æŠ½å¥–æ´»åŠ¨å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ</h4><p>å¾®ä¿¡ç§¯åˆ†å…‘æ¢ç°é‡‘æˆ–æŠ¢è´­æŠ½å¥–æ´»åŠ¨ä¸€èˆ¬ä¼šç»è¿‡ã€å…³æ³¨å…¬ä¼—å·ã€‘ã€åˆ†äº«æ´»åŠ¨è·å¾—ç§¯åˆ†ã€‘ã€ç§¯åˆ†å…‘æ¢ã€‘ã€æŠ½å¥–å®‰å…¨ç¯èŠ‚ã€‘è¿™3ä¸ªå¤§ç¯èŠ‚ï¼Œè€Œå…¶ä¸­ã€æŠ¢è®¢å•ã€‘è¿™ä¸ªç¯èŠ‚æ˜¯æœ€è€ƒéªŒä¸šåŠ¡æä¾›æ–¹çš„æŠ—å‹èƒ½åŠ›çš„ã€‚</p>
<p>ç§¯åˆ†å…‘æ¢ç¯èŠ‚ä¸€èˆ¬ä¼šå¸¦æ¥2ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>1ã€é«˜å¹¶å‘</li>
</ul>
<p>ã€€ã€€æ¯”è¾ƒç«çƒ­çš„æŠ½å¥–åœ¨çº¿äººæ•°éƒ½æ˜¯20wèµ·çš„ï¼Œå¦‚æ­¤ä¹‹é«˜çš„åœ¨çº¿äººæ•°å¯¹äºç½‘ç«™æ¶æ„ä»å‰åˆ°åéƒ½æ˜¯ä¸€ç§è€ƒéªŒã€‚</p>
<ul>
<li>2ã€æŠ½å¥–äººå‘˜è¿‡å¤š</li>
<li>3ã€ æŠ¢è®¢å•</li>
</ul>
<p>ã€€ã€€ä»»ä½•å•†å“éƒ½ä¼šæœ‰æ•°é‡ä¸Šé™ï¼Œå¦‚ä½•é¿å…æˆåŠŸä¸‹è®¢å•ä¹°åˆ°å•†å“çš„äººæ•°ä¸è¶…è¿‡å•†å“æ•°é‡çš„ä¸Šé™ï¼Œè¿™æ˜¯æ¯ä¸ªæŠ¢è´­æ´»åŠ¨éƒ½è¦é¢ä¸´çš„éš¾é¢˜ã€‚</p>
<h4 id="äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ"><a href="#äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ"></a>äºŒã€å¦‚ä½•è§£å†³ï¼Ÿ</h4><p>é¦–å…ˆï¼Œäº§å“è§£å†³æ–¹æ¡ˆæˆ‘ä»¬å°±ä¸äºˆè®¨è®ºäº†ã€‚æˆ‘ä»¬åªè®¨è®ºæŠ€æœ¯è§£å†³æ–¹æ¡ˆ</p>
<p><strong>1ã€å‰ç«¯æ¶æ„</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">é¢å¯¹é«˜å¹¶å‘çš„æŠ¢è´­æ´»åŠ¨ï¼Œå‰ç«¯å¸¸ç”¨çš„ä¸‰æ¿æ–§æ˜¯ã€æ‰©å®¹ã€‘ã€é™æ€åŒ–ã€‘ã€é™æµã€‘</div><div class="line"></div><div class="line">ã€€ã€€Aï¼šæ‰©å®¹</div><div class="line">ã€€ã€€</div><div class="line">ã€€åŠ æœºå™¨ï¼Œè¿™æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œé€šè¿‡å¢åŠ å‰ç«¯æ± çš„æ•´ä½“æ‰¿è½½é‡æ¥æŠ—å³°å€¼ã€‚ </div><div class="line">ã€€è¿™é‡Œæˆ‘ä»¬éƒ½æ˜¯å¤šå°ä¸»ä»é›†ç¾¤å»è·‘ã€‚</div><div class="line"></div><div class="line">ã€€ã€€Bï¼šé™æ€åŒ–</div><div class="line"></div><div class="line">ã€€ã€€å°†æ´»åŠ¨é¡µé¢ä¸Šçš„æ‰€æœ‰å¯ä»¥é™æ€çš„å…ƒç´ å…¨éƒ¨é™æ€åŒ–ï¼Œå¹¶å°½é‡å‡å°‘åŠ¨æ€å…ƒç´ ã€‚é€šè¿‡CDNæ¥æŠ—å³°å€¼ã€‚</div><div class="line">ã€€ã€€è¿™é‡Œæˆ‘ä»¬éƒ½æ˜¯æŠŠå›¾ç‰‡é™æ€æ”¾åœ¨åˆæ‹äº‘å’Œé˜¿é‡Œäº‘ä¸Šé¢ã€‚</div><div class="line">ã€€</div><div class="line">ã€€ã€€Cï¼šé™æµ</div><div class="line"></div><div class="line">ã€€ã€€ä¸€èˆ¬éƒ½ä¼šé‡‡ç”¨IPçº§åˆ«çš„é™æµï¼Œå³é’ˆå¯¹æŸä¸€ä¸ªIPï¼Œé™åˆ¶å•ä½æ—¶é—´å†…å‘èµ·è¯·æ±‚æ•°é‡ã€‚</div><div class="line">ã€€ã€€æˆ–è€…æ´»åŠ¨å…¥å£çš„æ—¶å€™å¢åŠ æ¸¸æˆæˆ–è€…é—®é¢˜ç¯èŠ‚è¿›è¡Œæ¶ˆå³°æ“ä½œã€‚</div><div class="line">ã€€ã€€æˆ‘ä»¬é‡‡ç”¨Nginxå‰é¢åšäº†åå‘ä»£ç†åé¢ä¼˜åŒ–nginxã€‚</div><div class="line">ã€€ã€€</div><div class="line">ã€€ã€€Dï¼šæœ‰æŸæœåŠ¡</div><div class="line"></div><div class="line">ã€€ã€€æœ€åä¸€æ‹›ï¼Œåœ¨æ¥è¿‘å‰ç«¯æ± æ‰¿è½½èƒ½åŠ›çš„æ°´ä½ä¸Šé™çš„æ—¶å€™ï¼Œéšæœºæ‹’ç»éƒ¨åˆ†è¯·æ±‚æ¥ä¿æŠ¤æ´»åŠ¨æ•´ä½“çš„å¯ç”¨æ€§ã€‚</div></pre></td></tr></table></figure>
<p><strong>2ã€åç«¯æ¶æ„</strong></p>
<p>é‚£ä¹ˆåç«¯çš„æ•°æ®åº“åœ¨é«˜å¹¶å‘å’Œè¶…å–ä¸‹ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿä¸»è¦ä¼šæœ‰å¦‚ä¸‹3ä¸ªé—®é¢˜ï¼šï¼ˆä¸»è¦è®¨è®ºå†™çš„é—®é¢˜ï¼Œè¯»çš„é—®é¢˜é€šè¿‡å¢åŠ cacheå¯ä»¥å¾ˆå®¹æ˜“çš„è§£å†³ï¼‰</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ã€€ã€€Iï¼šã€€é¦–å…ˆMySQLè‡ªèº«å¯¹äºé«˜å¹¶å‘çš„å¤„ç†æ€§èƒ½å°±ä¼šå‡ºç°é—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒMySQLçš„å¤„ç†æ€§èƒ½ä¼šéšç€å¹¶å‘threadä¸Šå‡è€Œä¸Šå‡ï¼Œä½†æ˜¯åˆ°äº†ä¸€å®šçš„å¹¶å‘åº¦ä¹‹åä¼šå‡ºç°æ˜æ˜¾çš„æ‹ç‚¹ï¼Œä¹‹åä¸€è·¯ä¸‹é™ï¼Œæœ€ç»ˆç”šè‡³ä¼šæ¯”å•threadçš„æ€§èƒ½è¿˜è¦å·®ã€‚</div><div class="line"></div><div class="line">ã€€ã€€IIï¼š å…¶æ¬¡ï¼Œè¶…å–çš„æ ¹ç»“åœ¨äºå‡åº“å­˜æ“ä½œæ˜¯ä¸€ä¸ªäº‹åŠ¡æ“ä½œï¼Œéœ€è¦å…ˆ<span class="keyword">select</span>ï¼Œç„¶å<span class="keyword">insert</span>ï¼Œæœ€å<span class="keyword">update</span> <span class="number">-1</span>ã€‚æœ€åè¿™ä¸ª<span class="number">-1</span>æ“ä½œæ˜¯ä¸èƒ½å‡ºç°è´Ÿæ•°çš„ï¼Œä½†æ˜¯å½“å¤šç”¨æˆ·åœ¨æœ‰åº“å­˜çš„æƒ…å†µä¸‹å¹¶å‘æ“ä½œï¼Œå‡ºç°è´Ÿæ•°è¿™æ˜¯æ— æ³•é¿å…çš„ã€‚</div><div class="line"></div><div class="line">ã€€ã€€IIIï¼šæœ€åï¼Œå½“å‡åº“å­˜å’Œé«˜å¹¶å‘ç¢°åˆ°ä¸€èµ·çš„æ—¶å€™ï¼Œç”±äºæ“ä½œçš„åº“å­˜æ•°ç›®åœ¨åŒä¸€è¡Œï¼Œå°±ä¼šå‡ºç°äº‰æŠ¢<span class="keyword">InnoDB</span>è¡Œé”çš„é—®é¢˜ï¼Œå¯¼è‡´å‡ºç°äº’ç›¸ç­‰å¾…ç”šè‡³æ­»é”ï¼Œä»è€Œå¤§å¤§é™ä½MySQLçš„å¤„ç†æ€§èƒ½ï¼Œæœ€ç»ˆå¯¼è‡´å‰ç«¯é¡µé¢å‡ºç°è¶…æ—¶å¼‚å¸¸ã€‚</div><div class="line">ã€€ã€€</div><div class="line">ã€€ã€€è¿™ä¸ªæœ‰é‡åˆ°è¿‡çš„ï¼Œå°±æ˜¯é”è¡¨å¯¼è‡´è®¿é—®å‡ºç°ç½‘ç»œå¼‚å¸¸ã€‚</div></pre></td></tr></table></figure>
<p>é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ æˆ‘ä»¬å…ˆçœ‹çœ¼æ·˜å®çš„é«˜å¤§ä¸Šè§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Iï¼šå…³é—­æ­»é”æ£€æµ‹ï¼Œæé«˜å¹¶å‘å¤„ç†æ€§èƒ½ã€‚</div><div class="line">IIï¼šä¿®æ”¹æºä»£ç ï¼Œå°†æ’é˜Ÿæåˆ°è¿›å…¥å¼•æ“å±‚å‰ï¼Œé™ä½å¼•æ“å±‚é¢çš„å¹¶å‘åº¦ã€‚</div><div class="line">IIIï¼šç»„æäº¤ï¼Œé™ä½<span class="keyword">server</span>å’Œå¼•æ“çš„äº¤äº’æ¬¡æ•°ï¼Œé™ä½IOæ¶ˆè€—ã€‚</div></pre></td></tr></table></figure>
<h3 id="è§£å†³æ–¹æ¡ˆ1ï¼š"><a href="#è§£å†³æ–¹æ¡ˆ1ï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆ1ï¼š"></a>è§£å†³æ–¹æ¡ˆ1ï¼š</h3><p>å°†å­˜åº“ä»MySQLå‰ç§»åˆ°Redisä¸­ï¼Œæ‰€æœ‰çš„å†™æ“ä½œæ”¾åˆ°å†…å­˜ä¸­ï¼Œç”±äºRedisä¸­ä¸å­˜åœ¨é”æ•…ä¸ä¼šå‡ºç°äº’ç›¸ç­‰å¾…ï¼Œå¹¶ä¸”ç”±äºRedisçš„å†™æ€§èƒ½å’Œè¯»æ€§èƒ½éƒ½è¿œé«˜äºMySQLï¼Œè¿™å°±è§£å†³äº†é«˜å¹¶å‘ä¸‹çš„æ€§èƒ½é—®é¢˜ã€‚ç„¶åé€šè¿‡é˜Ÿåˆ—ç­‰å¼‚æ­¥æ‰‹æ®µï¼Œå°†å˜åŒ–çš„æ•°æ®å¼‚æ­¥å†™å…¥åˆ°DBä¸­ã€‚</p>
<p>ä¼˜ç‚¹ï¼šè§£å†³æ€§èƒ½é—®é¢˜<br>ç¼ºç‚¹ï¼šæ²¡æœ‰è§£å†³è¶…å–é—®é¢˜ï¼ŒåŒæ—¶ç”±äºå¼‚æ­¥å†™å…¥DBï¼Œå­˜åœ¨æŸä¸€æ—¶åˆ»DBå’ŒRedisä¸­æ•°æ®ä¸ä¸€è‡´çš„é£é™©ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ2ï¼š"><a href="#è§£å†³æ–¹æ¡ˆ2ï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆ2ï¼š"></a>è§£å†³æ–¹æ¡ˆ2ï¼š</h3><p>å¼•å…¥é˜Ÿåˆ—ï¼Œç„¶åå°†æ‰€æœ‰å†™DBæ“ä½œåœ¨å•é˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Œå®Œå…¨ä¸²è¡Œå¤„ç†ã€‚å½“è¾¾åˆ°åº“å­˜é˜€å€¼çš„æ—¶å€™å°±ä¸åœ¨æ¶ˆè´¹é˜Ÿåˆ—ï¼Œå¹¶å…³é—­è´­ä¹°åŠŸèƒ½ã€‚è¿™å°±è§£å†³äº†è¶…å–é—®é¢˜ã€‚</p>
<p>ä¼˜ç‚¹ï¼šè§£å†³è¶…å–é—®é¢˜ï¼Œç•¥å¾®æå‡æ€§èƒ½ã€‚<br>ç¼ºç‚¹ï¼šæ€§èƒ½å—é™äºé˜Ÿåˆ—å¤„ç†æœºå¤„ç†æ€§èƒ½å’ŒDBçš„å†™å…¥æ€§èƒ½ä¸­æœ€çŸ­çš„é‚£ä¸ªï¼Œå¦å¤–å¤šå•†å“åŒæ—¶æŠ¢è´­çš„æ—¶å€™éœ€è¦å‡†å¤‡å¤šæ¡é˜Ÿåˆ—ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ3ï¼š"><a href="#è§£å†³æ–¹æ¡ˆ3ï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆ3ï¼š"></a>è§£å†³æ–¹æ¡ˆ3ï¼š</h3><p>å°†å†™æ“ä½œå‰ç§»åˆ°MCä¸­ï¼ŒåŒæ—¶åˆ©ç”¨MCçš„è½»é‡çº§çš„é”æœºåˆ¶CASæ¥å®ç°å‡åº“å­˜æ“ä½œã€‚<br>ä¼˜ç‚¹ï¼šè¯»å†™åœ¨å†…å­˜ä¸­ï¼Œæ“ä½œæ€§èƒ½å¿«ï¼Œå¼•å…¥è½»é‡çº§é”ä¹‹åå¯ä»¥ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªå†™å…¥æˆåŠŸï¼Œè§£å†³å‡åº“å­˜é—®é¢˜ã€‚<br>ç¼ºç‚¹ï¼šæ²¡æœ‰å®æµ‹ï¼ŒåŸºäºCASçš„ç‰¹æ€§ä¸çŸ¥é“é«˜å¹¶å‘ä¸‹æ˜¯å¦ä¼šå‡ºç°å¤§é‡æ›´æ–°å¤±è´¥ï¼Ÿä¸è¿‡åŠ é”ä¹‹åè‚¯å®šå¯¹å¹¶å‘æ€§èƒ½ä¼šæœ‰å½±å“ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ4ï¼š"><a href="#è§£å†³æ–¹æ¡ˆ4ï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆ4ï¼š"></a>è§£å†³æ–¹æ¡ˆ4ï¼š</h3><p>å°†æäº¤æ“ä½œå˜æˆä¸¤æ®µå¼ï¼Œå…ˆç”³è¯·åç¡®è®¤ã€‚ç„¶ååˆ©ç”¨Redisçš„åŸå­è‡ªå¢æ“ä½œï¼ˆç›¸æ¯”è¾ƒMySQLçš„è‡ªå¢æ¥è¯´æ²¡æœ‰ç©ºæ´ï¼‰ï¼ŒåŒæ—¶åˆ©ç”¨Redisçš„äº‹åŠ¡ç‰¹æ€§æ¥å‘å·ï¼Œä¿è¯æ‹¿åˆ°å°äºç­‰äºåº“å­˜é˜€å€¼çš„å·çš„äººéƒ½å¯ä»¥æˆåŠŸæäº¤è®¢å•ã€‚ç„¶åæ•°æ®å¼‚æ­¥æ›´æ–°åˆ°DBä¸­ã€‚</p>
<p>ä¼˜ç‚¹ï¼šè§£å†³è¶…å–é—®é¢˜ï¼Œåº“å­˜è¯»å†™éƒ½åœ¨å†…å­˜ä¸­ï¼Œæ•…åŒæ—¶è§£å†³æ€§èƒ½é—®é¢˜ã€‚<br>ç¼ºç‚¹ï¼šç”±äºå¼‚æ­¥å†™å…¥DBï¼Œå¯èƒ½å­˜åœ¨æ•°æ®ä¸ä¸€è‡´ã€‚å¦å¯èƒ½å­˜åœ¨å°‘ä¹°ï¼Œä¹Ÿå°±æ˜¯å¦‚æœæ‹¿åˆ°å·çš„äººä¸çœŸæ­£ä¸‹è®¢å•ï¼Œå¯èƒ½åº“å­˜å‡ä¸º0ï¼Œä½†æ˜¯è®¢å•æ•°å¹¶æ²¡æœ‰è¾¾åˆ°åº“å­˜é˜€å€¼ã€‚</p>
<p> ä¸‰ã€æ€»ç»“</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>ã€å‰ç«¯ä¸‰æ¿æ–§ã€æ‰©å®¹ã€‘ã€é™æµã€‘ã€é™æ€åŒ–ã€‘</div><div class="line"><span class="number">2</span>ã€åç«¯ä¸¤æ¡è·¯ã€å†…å­˜ã€‘+ã€æ’é˜Ÿã€‘</div></pre></td></tr></table></figure>
<h4 id="æµ‹è¯•æ€»ç»“ç»éªŒ"><a href="#æµ‹è¯•æ€»ç»“ç»éªŒ" class="headerlink" title="æµ‹è¯•æ€»ç»“ç»éªŒ"></a>æµ‹è¯•æ€»ç»“ç»éªŒ</h4><p>ç¬¬ä¸€æ¬¡åšæŠ½å¥–æ´»åŠ¨ï¼Œæµ‹è¯•é‚£è¾¹æµ‹è¯•å‡ºå¾ˆå¤šé—®é¢˜ã€‚ ä¸‹é¢æ˜¯é‡åˆ°çš„é—®é¢˜ã€‚</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">æµ‹è¯•ç¬¬ä¸€æ¬¡: è®¿é—®å‹æµ‹å‡ºç°äº†è®¿é—®ç™½å±ã€‚å®šä½ï¼šä»£ç å†™çš„æœ‰é—®é¢˜ã€‚ tomcatéœ€è¦åšä¼˜åŒ–ã€‚ æˆ‘ä»¬ä¸€èˆ¬ç”¨æˆ·é‡ç²‰ä¸åœ¨100W</div><div class="line"></div><div class="line">æµ‹è¯•ç¬¬äºŒæ¬¡ï¼š å‡ºç°æ•°æ®åº“<span class="meta">CPU</span>ç“¶é¢ˆè¿‡é«˜ã€‚ä¸»ä»åŒæ­¥ï¼Œç„¶ååšäº†æ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼Œ redisé›†ç¾¤ç¼“å­˜ã€‚ æœ€ä¸»è¦æ˜¯æ•°æ®åº“SQLè¯­å¥åšäº†ä¼˜åŒ–ã€‚ä¼˜åŒ–äº†æå‡äº†å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚</div><div class="line"></div><div class="line">æµ‹è¯•ç¬¬ä¸‰æ¬¡ï¼šè¿˜æœ‰å‡ºç°äº†<span class="number">503</span>è®¿é—®å—é™äº†ã€‚ åé¢åšäº†nginxä»£ç† é˜²æ­¢åŒä¸€ä¸ª<span class="built_in">IP</span>åŒä¸€ä¸ªæ—¶é—´è¶…è¿‡å¤šå°‘æ¬¡å»è¯·æ±‚ï¼Œä¼šè¢«å—é™ã€‚ ä¸è¿‡è¿™ä¸ªåšDDOSæ”»å‡» æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†å½±å“ç”¨æˆ·åä½“éªŒåº¦ã€‚</div></pre></td></tr></table></figure>
<h4 id="å››ã€éæŠ€æœ¯æ„Ÿæƒ³"><a href="#å››ã€éæŠ€æœ¯æ„Ÿæƒ³" class="headerlink" title="å››ã€éæŠ€æœ¯æ„Ÿæƒ³"></a>å››ã€éæŠ€æœ¯æ„Ÿæƒ³</h4><p>1ã€å›¢é˜Ÿçš„åŠ›é‡æ˜¯æ— ç©·çš„ï¼Œå„ç§å„æ ·çš„è§£å†³æ–¹æ¡ˆï¼ˆå…ˆä¸è°ˆå¯è¡Œæ€§ï¼‰éƒ½æ˜¯åœ¨å°ä¼™ä¼´ä»¬ä¸ƒå˜´å…«èˆŒä¸­è®¨è®ºå‡ºæ¥çš„ã€‚æˆ‘ä»¬éœ€è¦è®©æ‰€æœ‰äººéƒ½å‘å‡ºè‡ªå·±çš„å£°éŸ³ï¼Œä¸è¦ç€æ€¥å»å¦å®šã€‚<br>2ã€ä¼˜åŒ–éœ€è¦ä»æ•´ä½“å±‚é¢å»æ€è€ƒï¼Œä¸è¦åªçº ç»“äºè‡ªå·±è´Ÿè´£çš„éƒ¨åˆ†ï¼Œå¦‚æœåªç›¯ç€ä¸€ä¸ªç‚¹æ€è€ƒï¼Œæœ€åå¾ˆå¯èƒ½å°±èµ°è¿›æ­»èƒ¡åŒä¸­äº†ã€‚<br>3ã€æœ‰å¾ˆå¤šä¸œè¥¿ä»¥ä¸ºè¯»è¿‡äº†å°±æ‡‚äº†ï¼Œå…¶å®ä¸ç„¶ã€‚ä¾ç„¶è¿˜æ˜¯éœ€è¦å®è·µï¼Œå¦åˆ™åˆ«äººçš„çŸ¥è¯†æ°¸è¿œä¸å¯èƒ½å˜æˆè‡ªå·±çš„ã€‚<br>4ã€å¤šæ€è€ƒä¸ºä»€ä¹ˆï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Œä¸è¦æƒ³å½“ç„¶ã€‚åªæœ‰è¿™æ ·æ‰èƒ½æ·±å…¥è¿›å»ï¼Œè€Œä¸æ˜¯ç•™åœ¨è¡¨é¢ã€‚</p>
<h3 id="äº¤æµå­¦ä¹ ï¼š"><a href="#äº¤æµå­¦ä¹ ï¼š" class="headerlink" title="äº¤æµå­¦ä¹ ï¼š"></a>äº¤æµå­¦ä¹ ï¼š</h3><p>ğŸ§  Linux shell_é«˜çº§è¿ç»´æ´¾: <code>459096184</code>    åœˆå­ (ç³»ç»Ÿè¿ç»´-åº”ç”¨è¿ç»´-è‡ªåŠ¨åŒ–è¿ç»´-è™šæ‹ŸåŒ–æŠ€æœ¯ç ”ç©¶æ¬¢è¿åŠ å…¥)<br>ğŸ§  BigData-Exchange School : <code>521621407</code>  åœˆå­ï¼ˆå¤§æ•°æ®è¿ç»´)ï¼ˆHadoopå¼€å‘äººå‘˜)ï¼ˆå¤§æ•°æ®ç ”ç©¶çˆ±å¥½è€…) æ¬¢è¿åŠ å…¥</p>
<p>ç›¸åº”Bidataæœ‰å†…éƒ¨å¾®ä¿¡äº¤æµç¾¤äº’ç›¸å­¦ä¹ ï¼ŒåŠ å…¥QQç¾¤æœ‰é“¾æ¥ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/10/29/è‡ªåŠ¨åŒ–+Jenkins/Jenkins/è®²å¦‚ä½•ç»“åˆjenkins+ ansibleæ„å»ºå‘å¸ƒç³»ç»Ÿ/">è®²å¦‚ä½•ç»“åˆjenkins+ ansibleæ„å»ºå‘å¸ƒç³»ç»Ÿ</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-10-29</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/automation/">automation</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Jenkins/">Jenkins</a>
			</span>
		
	</div>

	

	
		<h1 id="jenkins-ansibleï¼Œæ‰“é€ ä¸€ä¸ªwebæ„å»ºå‘å¸ƒç³»ç»Ÿ"><a href="#jenkins-ansibleï¼Œæ‰“é€ ä¸€ä¸ªwebæ„å»ºå‘å¸ƒç³»ç»Ÿ" class="headerlink" title="jenkins+ansibleï¼Œæ‰“é€ ä¸€ä¸ªwebæ„å»ºå‘å¸ƒç³»ç»Ÿ"></a>jenkins+ansibleï¼Œæ‰“é€ ä¸€ä¸ªwebæ„å»ºå‘å¸ƒç³»ç»Ÿ</h1><p>è‡ªåŠ¨åŒ–è¿™å—æˆ‘ä»¬æµ‹è¯•ç”Ÿäº§ç¯å¢ƒå·²ç»ç”¨èµ·æ¥äº†ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¸»è¦è®²æˆ‘ä»¬å¦‚ä½•å®ç°æ•´ä¸ªwebå‘å¸ƒç³»ç»Ÿï¼Œå¦‚ä½•å®‰è£…é…ç½®çœ‹æˆ‘blogä¸Šé¢æœ‰ã€‚</p>
<p>éœ€è¦äº†è§£å‡ æ¬¾è‡ªåŠ¨åŒ–å·¥å…·ï¼š SaltStack,Ansible,Puppet,jenkins</p>
<p>æ‰€ä»¥æˆ‘ä»¬ç¬¬1æ­¥åšçš„å°±æ˜¯ï¼šç”¨Ansible + Jenkinsæå®šè‡ªåŠ¨å‘å¸ƒã€‚Ansibleæ˜¯ç›¸å¯¹ç®€å•çš„æ‰¹é‡ç®¡ç†å·¥å…·ï¼Œæ”¯æŒæ¨¡æ¿ç®¡ç†ç­‰é«˜çº§åŠŸèƒ½ã€‚æå®šäº†è‡ªåŠ¨å‘å¸ƒï¼Œå¼€å‘çš„æœåŠ¡å™¨éœ€æ±‚å·²ç»æ˜æ˜¾ä¸‹é™ï¼Œåªè¦æŠŠä»£ç æäº¤åˆ° Gitä¸»å¹²ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘å‘å¸ƒã€‚</p>
<p>Gitä½¿ç”¨çš„æ˜¯ GitLabï¼ŒåæœŸåŒæ—¶ä¸ºäº†å®‰å…¨æˆ‘ä»¬åšäº†ä¸€å±‚LDAPä»£ç†ï¼Œæ•ˆæœç›¸å½“äºâ€œå°†å†›ä»¤â€ï¼Œæ“ä½œæœºã€Gitå’ŒJenkinsç”¨ OpenLDAP åšç»Ÿä¸€è®¤è¯ï¼Œåç»­ç”¨åˆ°çš„Redmineã€Grafanaã€Zabbixç­‰éƒ½æ¥å…¥äº†OpenLDAPè®¤è¯ï¼Œæ¯ä¸ªäººéƒ½æœ‰ä¸ªåŠ¨æ€å£ä»¤ï¼Œæ¯æ¬¡éªŒè¯éƒ½éœ€è¦ç”¨åˆ°ã€‚</p>
<h3 id="æµç¨‹ç»“æ„"><a href="#æµç¨‹ç»“æ„" class="headerlink" title="æµç¨‹ç»“æ„"></a>æµç¨‹ç»“æ„</h3><p> ç®€å•ç»˜åˆ¶äº†ä¸‹Jenkinsçš„ä¸€ä¸ªæµç¨‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins4.png" alt=""></figure></p>
<p> æ‹“æ‰‘å›¾</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/jenkins5.png" alt=""></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">    &gt; è¯¥å¹³å°ä»¥jenkins ä¸ºä¸­å¿ƒï¼Œç„¶åå›´ç»•ä»–è¿›è¡Œæ‰©å±•ã€‚</div><div class="line"></div><div class="line">    &gt; ä»£ç å…¨å±€é…ç½®é€šè¿‡â€æ–‡ä»¶ç®¡ç†å¹³å°â€ è¿›è¡Œç®¡ç†ã€‚æ¯æ¬¡ä»£ç è¿›è¡Œbuildæ—¶ï¼Œpullä¸€ä¸‹é…ç½®ã€‚ä½¿é…ç½®ä¸ºæœ€æ–°çš„ã€‚</div><div class="line"></div><div class="line">    &gt; å¼€å‘äººå‘˜å°†ä»£ç pushåˆ°gitlabï¼Œå¼€å‘è€…ä¹‹é—´ç›¸äº’reviewä»£ç ã€‚ç„¶åmurgeåˆ°masteråˆ†æ”¯ã€‚jenkinsä¸Šçš„pullä»£ç åˆ°workspaceç©ºé—´ã€‚</div><div class="line"></div><div class="line">     &gt; å®‰è£…ä¸€äº›ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚ </div><div class="line"></div><div class="line">     &gt; ä»£ç å’Œé…ç½®æ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼Œé€šè¿‡rediså­˜å‚¨çš„ç‰ˆæœ¬ä¿¡æ¯åˆ›å»ºç‰ˆæœ¬ã€‚</div><div class="line"></div><div class="line">     &gt; æŠŠå°†è¦å‘å¸ƒçš„ç‰ˆæœ¬æ¨é€åˆ°è¿œç«¯æœºå™¨ï¼ŒreloadæœåŠ¡å®ç°ä¸Šçº¿ã€‚</div><div class="line"></div><div class="line">     &gt; å½“å‘å¸ƒçš„ä»£ç å‡ºç°é—®é¢˜ï¼Œå›æ»šæŒ‡å®šç‰ˆæœ¬(é»˜è®¤å›æ»šä¸Šä¸€ç‰ˆæœ¬)ï¼Œæœ€å¤šå¯å›æ»šä¹‹å‰5ä¸ªç‰ˆæœ¬ã€‚</div><div class="line">``` </div><div class="line"></div><div class="line">ansibleæ˜¯æ–°å‡ºç°çš„è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·ï¼ŒåŸºäºPythonå¼€å‘ï¼Œé›†åˆäº†ä¼—å¤šè¿ç»´å·¥å…·ï¼ˆpuppetã€cfengineã€chefã€funcã€fabricï¼‰çš„ä¼˜ç‚¹ï¼Œå®ç°äº†æ‰¹é‡ç³»ç»Ÿé…ç½®ã€æ‰¹é‡ç¨‹åºéƒ¨ç½²ã€æ‰¹é‡è¿è¡Œå‘½ä»¤ç­‰åŠŸèƒ½ã€‚ansibleæ˜¯åŸºäºæ¨¡å—å·¥ä½œçš„ï¼Œæœ¬èº«æ²¡æœ‰æ‰¹é‡éƒ¨ç½²çš„èƒ½åŠ›ã€‚çœŸæ­£å…·æœ‰æ‰¹é‡éƒ¨ç½²çš„æ˜¯ansibleæ‰€è¿è¡Œçš„æ¨¡å—ï¼Œansibleåªæ˜¯æä¾›ä¸€ç§æ¡†æ¶ã€‚ä¸»è¦åŒ…æ‹¬ï¼š</div><div class="line"></div><div class="line">```bash</div><div class="line">(1)ã€è¿æ¥æ’ä»¶connection pluginsï¼šè´Ÿè´£å’Œè¢«ç›‘æ§ç«¯å®ç°é€šä¿¡ï¼›</div><div class="line">(2)ã€host inventoryï¼šæŒ‡å®šæ“ä½œçš„ä¸»æœºï¼Œæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œé¢å®šä¹‰ç›‘æ§çš„ä¸»æœºï¼›</div><div class="line">(3)ã€å„ç§æ¨¡å—æ ¸å¿ƒæ¨¡å—ã€<span class="built_in">command</span>æ¨¡å—ã€è‡ªå®šä¹‰æ¨¡å—ï¼›</div><div class="line">(4)ã€å€ŸåŠ©äºæ’ä»¶å®Œæˆè®°å½•æ—¥å¿—é‚®ä»¶ç­‰åŠŸèƒ½ï¼›</div><div class="line">(5)ã€playbookï¼šå‰§æœ¬æ‰§è¡Œå¤šä¸ªä»»åŠ¡æ—¶ï¼Œéå¿…éœ€å¯ä»¥è®©èŠ‚ç‚¹ä¸€æ¬¡æ€§è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚</div></pre></td></tr></table></figure>
<p>è¿™é‡Œä¹‹å‰ç”¨Jenkinsä½¿ç”¨èµ·æ¥ã€‚é‡åˆ°ä¸ªéš¾é¢˜è¿™é‡Œåˆ†æå“ªå‡ ç‚¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">githubä½œä¸ºæºä»£ç ä»“åº“ </div><div class="line">jenkinsåšä¸ºæ‰“åŒ…æœåŠ¡å™¨ï¼ŒWebæ§åˆ¶æœåŠ¡å™¨</div><div class="line">åœ¨jenkinsçš„ç³»ç»Ÿé…ç½®é‡Œï¼Œå¯ä»¥æ‰¾åˆ°mavenï¼Œgitï¼ŒJavaç›¸å…³çš„é…ç½®ï¼Œåªè¦å‹¾é€‰äº†ï¼Œåœ¨å¼€æ—¶æ‰§è¡Œjobæ—¶ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½ã€‚</div><div class="line">ansibleæŠŠwaråŒ…ï¼Œå‘å¸ƒåˆ°è¿œç¨‹æœºå™¨</div><div class="line">tomcatæ¯å°æœåŠ¡å™¨ç¯å¢ƒéƒ½éœ€è¦åœ¨ansible /etc/ansible/hostsé…ç½®å¥½ï¼Œè¿™æ ·å¯ä»¥è®©å®ƒè‡ªåŠ¨åŒ–ä¸‹å‘åˆ°å¯¹åº”æœºå™¨ã€‚</div><div class="line">æŠŠjenkinsç”Ÿæˆçš„waråŒ…å‘å¸ƒåˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šã€‚</div><div class="line">è¿›å…¥è¯¥é¡¹ç›®çš„workspaceç›®å½•ä¸‹ä¿å­˜è¯¥playbookçš„ä»“åº“å­ç›®å½•ä¸‹, æ£€æŸ¥ansibleç‰ˆæœ¬, å¹¶æ‰§è¡Œæœ€ç»ˆçš„éƒ¨ç½²å‘½ä»¤.ä¼šä¸ä¼šå‘å¸ƒå‡ºç°ä¹±ç ã€‚</div></pre></td></tr></table></figure>
<p><strong>ç›‘æ§ï¼š</strong></p>
<p>ç”±äºåŸå§‹çš„ç›‘æ§ä¸æ»¡è¶³å¿«é€Ÿå¢é•¿çš„ä¸šåŠ¡ï¼Œæˆ‘è¿™è¾¹éƒ¨ç½²äº†å¼€æºç›‘æ§ç³»ç»Ÿ Zabbixï¼Œè™½ç„¶è¿ç»´èƒ½å¤Ÿå¾ˆå¥½çš„ä½¿ç”¨Zabbixï¼Œä½†å…¶ä»–éƒ¨é—¨åŒäº‹æ€»è§‰å¾—æ˜“ç”¨æ€§ä¸é«˜ã€è€Œä¸”å¾ˆå¤šå®šåˆ¶åŒ–ç›‘æ§å®ç°èµ·æ¥å¾ˆéº»çƒ¦ã€‚è¿˜æ˜¯éœ€è¦æœ‰è¿ç»´å¼€å‘åŒäº‹å¸®å¿™è¾…åŠ©ä¼šæ›´å¥½ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/10/10/è¿ç»´ç¬”è®°/ä¸ªäººæ€»ç»“ï¼šä¸ºä»€è¦å­¦ä¹ dockerï¼Œå¦‚ä½•å­¦ä¹ Docker/">ä¸ªäººæ€»ç»“ï¼šä¸ºä»€è¦å­¦ä¹ dockerï¼Œå¦‚ä½•å­¦ä¹ Docker</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-10-10</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/è¿ç»´ç¬”è®°/">è¿ç»´ç¬”è®°</a>
			</span><br />
		
		
	</div>

	

	
		<p>å­¦ä¹ ä»»ä½•ä¸€ä¸ªå¼€æºæ–°æŠ€æœ¯ï¼Œé¦–å…ˆé—®è‡ªå·±å‡ ä¸ªé—®é¢˜ï¼š</p>
<h6 id="1-ä¸ºä»€è¦å­¦ä¹ å®ƒï¼Ÿ"><a href="#1-ä¸ºä»€è¦å­¦ä¹ å®ƒï¼Ÿ" class="headerlink" title="1. ä¸ºä»€è¦å­¦ä¹ å®ƒï¼Ÿ"></a>1. ä¸ºä»€è¦å­¦ä¹ å®ƒï¼Ÿ</h6><h6 id="2-å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ"><a href="#2-å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ" class="headerlink" title="2. å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ"></a>2. å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ</h6><h6 id="3-å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ"><a href="#3-å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ" class="headerlink" title="3. å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ"></a>3. å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ</h6><h6 id="4-è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#4-è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="4. è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"></a>4. è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</h6><p>æ‹¿æˆ‘ä¸ªäººçš„å­¦ä¹ ç»éªŒæ¥ä¸¾ä¾‹ï¼ˆæœ¬äººä¹‹å‰æ¯”è¾ƒäº†è§£KVMï¼ŒESxi,OpenStackï¼‰</p>
<h3 id="ä¸ºä»€è¦å­¦ä¹ dockerï¼Ÿ"><a href="#ä¸ºä»€è¦å­¦ä¹ dockerï¼Ÿ" class="headerlink" title="ä¸ºä»€è¦å­¦ä¹ dockerï¼Ÿ"></a>ä¸ºä»€è¦å­¦ä¹ dockerï¼Ÿ</h3><p>ä¸ªäººå›ç­”ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">dockeræ˜¯è½»é‡çº§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œdockerä½¿linuxå®¹å™¨æŠ€æœ¯çš„åº”ç”¨æ›´åŠ ç®€å•å’Œæ ‡å‡†åŒ–</div><div class="line">dockerçš„é€Ÿåº¦å¾ˆå¿«,å®¹å™¨å¯åŠ¨æ—¶æ¯«ç§’çº§çš„</div><div class="line">dockerå°†å¼€å‘å’Œè¿ç»´èŒè´£åˆ†æ¸…</div><div class="line">dockerè§£å†³äº†ä¾èµ–åœ°ç‹±é—®é¢˜</div><div class="line">dockeræ”¯æŒå‡ ä¹æ‰€æœ‰æ“ä½œç³»ç»Ÿ</div><div class="line">dockeræœ‰ç€é£é€Ÿå‘å±•çš„ç”Ÿæ€åœˆ</div><div class="line">å¾ˆå¤šITå·¨å¤´é€æ¸åŠ å…¥å’Œæ”¯æŒ</div></pre></td></tr></table></figure>
<p>å­¦ä¹ å®ƒéœ€è¦äº†è§£å“ªäº›ç›¸å…³çŸ¥è¯†ç‚¹ï¼Ÿ</p>
<p>å›ç­”ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">äº‘è®¡ç®—æ¦‚å¿µç›¸å…³ï¼ˆrestapi, å¾®æœåŠ¡ï¼ŒOpenStackï¼‰</div><div class="line">Linux ç³»ç»Ÿç®¡ç†ï¼ˆè½¯ä»¶åŒ…ç®¡ç†ï¼Œç”¨æˆ·ç®¡ç†ï¼Œè¿›ç¨‹ç®¡ç†ç­‰ï¼‰</div><div class="line">Linux å†…æ ¸ç›¸å…³ï¼ˆCgroup, namespace ç­‰ï¼‰</div><div class="line">Linux æ–‡ä»¶ç³»ç»Ÿå’Œå­˜å‚¨ç›¸å…³ï¼ˆAUFSï¼ŒBRFS,devicemapper ç­‰ï¼‰</div><div class="line">Linux ç½‘ç»œï¼ˆç½‘æ¡¥ï¼Œveth,iptablesç­‰ï¼‰</div><div class="line">Linuxå®‰å…¨ç›¸å…³ï¼ˆAppmor,Selinux ç­‰ï¼‰</div><div class="line">Linuxè¿›ç¨‹ç®¡ç†ï¼ˆSupervisord,Systemd etc)</div><div class="line">Linuxå®¹å™¨æŠ€æœ¯ï¼ˆLXCç­‰ï¼‰</div><div class="line">å¼€å‘è¯­è¨€ï¼ˆPython, GO,Shell ç­‰ï¼‰</div></pre></td></tr></table></figure>
<p>3.å¦‚ä½•å¿«é€Ÿå­¦ä¹ ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">å›ç­”ï¼šä¸ªäººä½“ä¼šæœ€å¥½æœ‰ä¸€ä¸ªå®é™…çš„éœ€æ±‚æˆ–é¡¹ç›®æ¥è¾¹å®è·µè¾¹å­¦ä¹ ï¼Œå…¥é—¨å¯ä»¥å‚è€ƒ</div><div class="line">ï¼ˆç¬¬ä¸€æœ¬dockerä¹¦ï¼‰å†™çš„ä¸é”™ï¼Œéå¸¸é€‚åˆå…¥é—¨ã€‚</div><div class="line"></div><div class="line">é™¤æ­¤ä¹‹å¤–ï¼Œé˜…è¯»ç‰›äººçš„blogæ¯”å¦‚å®˜æ–¹blog http://blog.docker.com/</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œå‚ä¸ç¤¾åŒºäº’åŠ¨ä¹Ÿæ˜¯å¾ˆå¥½çš„å­¦ä¹ æ–¹å¼ã€‚</p>
<p>è¯¥æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ<br>å›ç­”ï¼šdockeréå¸¸é€‚ç”¨äºdev/test CI/CD åœºæ™¯ï¼Œç”¨å®Œå°±æ‰”ã€‚è¿˜æœ‰å°±æ˜¯PasSäº†ã€‚</p>
<h3 id="ä¸ºä»€è¦å­¦ä¹ Docker"><a href="#ä¸ºä»€è¦å­¦ä¹ Docker" class="headerlink" title="ä¸ºä»€è¦å­¦ä¹ Docker"></a>ä¸ºä»€è¦å­¦ä¹ Docker</h3><ul>
<li><p>1.å­¦ä¹ Dockerï¼Œå¦‚æœæ²¡æœ‰äº‘è®¡ç®—çš„åŸºæœ¬çŸ¥è¯†ï¼Œä»¥åŠå†…æ ¸çš„åŸºæœ¬çŸ¥è¯†ï¼Œé‚£ä¹ˆå­¦ä¹ å¹¶ç†è§£èµ·æ¥ä¼šç¨åƒåŠ›ã€‚ä½œä¸ºå®¹å™¨ï¼ŒDockerå®¹å™¨çš„ä¼˜åŠ¿åœ¨å“ªï¼Œä¸è¶³åœ¨å“ªï¼Œæœ€å¥½äº†è§£å®¹å™¨çš„å®ç°æ˜¯æ€æ ·çš„ï¼ˆç®€å•äº†è§£ï¼‰ï¼›æ‹¥æœ‰é•œåƒç®¡ç†ï¼ŒDockeråˆè¯¥å¦‚ä½•ä½“ç°è½¯ä»¶å¼€å‘ï¼Œé›†æˆï¼Œéƒ¨ç½²ï¼Œå‘å¸ƒï¼Œå†è¿­ä»£çš„è½¯ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†ä¼˜åŠ¿ã€‚ä»¥ä¸Šä¸¤ç‚¹æˆ‘è®¤ä¸ºæœ€ä¸ºå…³é”®ï¼Œæœ‰è¿™ä¸¤æ–¹é¢çš„è®¤è¯†åŠ¿å¿…ä¼šå¯¹ä¹‹åçš„å·¥ä½œå¸®åŠ©å·¨å¤§ã€‚</p>
</li>
<li><p>2.å…³äºå­¦ä¹ èµ„æºï¼Œèµ·ç çš„ç¡¬ä»¶è®¾æ–½æ€»æ˜¯è¦æœ‰çš„ã€‚DockeråŠå…¶ç”Ÿæ€çš„å‘å±•å¾ˆå¿«ï¼Œä¸ä½¿ç”¨çº¯ç†è®ºè‚¯å®šæ”¶æ•ˆç”šå¾®ã€‚å¦å¤–ï¼Œèµ„æºè¿˜åŒ…æ‹¬Dockerå®˜æ–¹ï¼Œå„å¤§ç”µå­åª’ä½“å¹³å°ï¼ŒæŠ€æœ¯è®ºå›ï¼Œå¼€æºç¤¾åŒºç­‰ï¼Œå¾€å¾€å¤§æ‹¿çš„è§‚ç‚¹èƒ½ç‚¹ç ´è‡ªå·±çš„å›°æƒ‘ï¼Œæˆ–è€…è®©è‡ªå·±çŸ¥é“å“ªæ–¹é¢çš„è®¤è¯†è¿˜å¾ˆæ¬ ç¼ºï¼Œä»¥åŠè®©è‡ªå·±å°‘èµ°å¾ˆå¤šçš„å¼¯è·¯ã€‚</p>
</li>
<li><p>3.ä¸ªäººå…´è¶£çš„è¯ï¼Œå½’ç»“ä¸ºå¼ºæ‰­çš„ç“œä¸ç”œã€‚èµ·ç åº”è¯¥è®¤åŒDockerçš„è®¾è®¡ä»·å€¼ï¼Œä»¥åŠDockerçš„æœªæ¥æ½œåŠ›ï¼Œå½“ç„¶æœ‰ä¾æ®çš„æ‰¹åˆ¤Dockerå¹¶å¸¦åŠ¨å¤§å®¶çš„æ€è€ƒï¼Œä¹Ÿæ˜¯æ·±åˆ‡å…³æ³¨çš„è¡¨ç°ã€‚</p>
</li>
<li><p>4.ä¸ªäººå‘å±•æ–¹å‘ï¼Œæˆ‘è®¤ä¸ºå¦‚æœéœ€è¦æŠŠDockerå½“ä½œè½¯ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†å·¥å…·çš„è¯ï¼Œé‚£ç”¨å¥½Dockeræœ€ä¸ºé‡è¦ï¼ŒAPIåŠå‘½ä»¤çš„ç†è§£ä¸ä½¿ç”¨æ˜¯å¿…éœ€çš„ã€‚å¦‚æœä¸“æ³¨ç³»ç»Ÿè®¾è®¡æ–¹é¢ï¼Œé‚£ä¹ˆé™¤Dockerä»¥ä¸Šçš„çŸ¥è¯†ä¸ç»éªŒä¹‹å¤–ï¼Œè‹¥æœ‰Dockeræºç çš„å­¦ä¹ ä¸ç†è§£ï¼Œé‚£ä¹ˆè¿™äº›è‚¯å®šä¼šè®©ä½ çš„Dockeræ°´å¹³æé«˜ä¸€ä¸ªå±‚æ¬¡ã€‚</p>
</li>
</ul>
<ul>
<li><p>å­¦ä¹ Dockerï¼Œæœ€å¤§çš„å¥½å¤„æ˜¯è·Ÿè¿›æ–°æŠ€æœ¯å‘å±•æ–¹å‘ã€‚æˆ‘è§‰å¾—åœ¨æ ¡ç”Ÿåº”è¯¥æ²¡æœ‰å¤šå°‘ç¡¬æ€§éœ€æ±‚åœ¨Dockerçš„ç ”ç©¶ä¸Šï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå­¦æ ¡æ²¡åšå…·ä½“åº”ç”¨è¦æ±‚çš„åŸå› ã€‚æœ€å®é™…çš„åšæ³•æ˜¯çœ‹ä¸€äº›Dockerä½¿ç”¨æ¡ˆä¾‹ï¼Œè‡ªå·±å®è·µå‡ºä¸€äº›ç»éªŒåº”è¯¥ä¼šå†ä»¥åçš„ç¤¾ä¼šå®è·µä¸­èµ·åˆ°ä½œç”¨ã€‚</p>
</li>
<li><p>ç ”ç©¶dockerçš„æºä»£ç ï¼Œåº”è¯¥åˆ°ä½ ä¸‹å®šå†³å¿ƒä»äº‹äº‘è®¡ç®—æ–¹é¢çš„äº‹ä¸šæˆ–è€…ç ”ç©¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦ä»¥ç ”ç©¶è€…çš„èº«ä»½å»åšä»”ç»†çš„æºç åˆ†æçš„å·¥ä½œã€‚</p>
</li>
</ul>
<h4 id="Dockerç«èµ·æ¥çš„çœŸæ­£åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Dockerç«èµ·æ¥çš„çœŸæ­£åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Dockerç«èµ·æ¥çš„çœŸæ­£åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Dockerç«èµ·æ¥çš„çœŸæ­£åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>æˆ‘è®¤ä¸ºæœ‰è¿™ä¹ˆå‡ ç‚¹ï¼Œ</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">æ™®é€šå¼€å‘è€…æœ‰æœºä¼šæ¥è§¦å®¹å™¨æŠ€æœ¯ï¼Œäº«å—å¼€å‘å‘å¸ƒä¸€ä½“åŒ–çš„ä¾¿åˆ©ã€‚</div><div class="line">å®¹å™¨äº‘æ˜¯åŒºåˆ«äºä¼ ç»ŸIaaSæœåŠ¡çš„å¦ä¸€ç§æ›´å¿«é€Ÿæ›´é«˜æ•ˆçš„è½»é‡çº§é€‰æ‹©ã€‚</div><div class="line">åŸºäºé•œåƒçš„ç¬¬äºŒä¸ªGitHubã€<span class="keyword">CI</span>/<span class="keyword">CD</span>æœåŠ¡ã€ä»£ç å‘å¸ƒã€åœ¨çº¿debugã€‚</div></pre></td></tr></table></figure>
<h3 id="äº¤æµå­¦ä¹ ï¼š"><a href="#äº¤æµå­¦ä¹ ï¼š" class="headerlink" title="äº¤æµå­¦ä¹ ï¼š"></a>äº¤æµå­¦ä¹ ï¼š</h3><p>ğŸ§  Linux shell_é«˜çº§è¿ç»´æ´¾: <code>459096184</code>    åœˆå­ (ç³»ç»Ÿè¿ç»´-åº”ç”¨è¿ç»´-è‡ªåŠ¨åŒ–è¿ç»´-è™šæ‹ŸåŒ–æŠ€æœ¯ç ”ç©¶æ¬¢è¿åŠ å…¥)<br>ğŸ§  BigData-Exchange School : <code>521621407</code>  åœˆå­ï¼ˆå¤§æ•°æ®è¿ç»´)ï¼ˆHadoopå¼€å‘äººå‘˜)ï¼ˆå¤§æ•°æ®ç ”ç©¶çˆ±å¥½è€…) æ¬¢è¿åŠ å…¥</p>
<p>ç›¸åº”Bidataæœ‰å†…éƒ¨å¾®ä¿¡äº¤æµç¾¤äº’ç›¸å­¦ä¹ ï¼ŒåŠ å…¥QQç¾¤æœ‰é“¾æ¥ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2016/09/24/Node.js-npm/Node.jsä½¿ç”¨pm2è¿›ç¨‹å®ˆæŠ¤+keymetricså®æ—¶ç›‘æ§Node.jsç¨‹åº/">Node.jsä½¿ç”¨pm2è¿›ç¨‹å®ˆæŠ¤+keymetricså®æ—¶ç›‘æ§Node.jsç¨‹åº</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-09-24</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Node-js/">Node.js</a>
			</span>
		
	</div>

	

	
		<p>é€šè¿‡pm2èƒ½å®ˆæŠ¤node.jsç¨‹åºæ°¸è¿œåœ¨çº¿ï¼Œåœ¨å®é™…åº”ç”¨ä¸­æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚å¦å¤–ï¼Œpm2é…åˆkeymetricsèƒ½å®æ—¶ç›‘æ§node.jsç¨‹åºçš„è¿è¡Œï¼Œè¾¾åˆ°ç›‘æ§node.jsç¨‹åºçš„ç›®çš„ã€‚</p>
		<p><a class="article__read-more-link" href="/2016/09/24/Node.js-npm/Node.jsä½¿ç”¨pm2è¿›ç¨‹å®ˆæŠ¤+keymetricså®æ—¶ç›‘æ§Node.jsç¨‹åº/">...read more</a></p>
	

	

</article>




	<article>
	
		<h1><a href="/2016/09/21/è¿ç»´ç¬”è®°/è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£å’Œå‰æ™¯/">è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£å’Œå‰æ™¯</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2016-09-21</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/è¿ç»´ç¬”è®°/">è¿ç»´ç¬”è®°</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Operation-and-maintenance-Road/">Operation and maintenance Road</a>
			</span>
		
	</div>

	

	
		<h1 id="è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£å’Œå‰æ™¯"><a href="#è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£å’Œå‰æ™¯" class="headerlink" title="è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£å’Œå‰æ™¯"></a>è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£å’Œå‰æ™¯</h1><p>è¿ç»´ä¸­å…³é”®æŠ€æœ¯ç‚¹è§£å‰–ï¼š</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">1 </span>å¤§é‡é«˜å¹¶å‘ç½‘ç«™çš„è®¾è®¡æ–¹æ¡ˆ ï¼›</div><div class="line"><span class="symbol">2 </span>é«˜å¯é ã€é«˜å¯ä¼¸ç¼©æ€§ç½‘ç»œæ¶æ„è®¾è®¡ï¼›</div><div class="line"><span class="symbol">3 </span>ç½‘ç«™å®‰å…¨é—®é¢˜ï¼Œå¦‚ä½•é¿å…è¢«é»‘ï¼Ÿ</div><div class="line"><span class="symbol">4 </span>å—åŒ—äº’è”é—®é¢˜,åŠ¨æ€CDNè§£å†³æ–¹æ¡ˆï¼›</div><div class="line"><span class="symbol">5 </span>æµ·é‡æ•°æ®å­˜å‚¨æ¶æ„</div></pre></td></tr></table></figure>
<h4 id="ä¸€ã€ä»€ä¹ˆæ˜¯å¤§å‹ç½‘ç«™è¿ç»´ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯å¤§å‹ç½‘ç«™è¿ç»´ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯å¤§å‹ç½‘ç«™è¿ç»´ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯å¤§å‹ç½‘ç«™è¿ç»´ï¼Ÿ</h4><p>é¦–å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œå…¨æ–‡æ‰€è®²çš„<code>â€è¿ç»´â€œ</code>æ˜¯æŒ‡ï¼šå¤§å‹ç½‘ç«™è¿ç»´ï¼Œä¸å…¶å®ƒè¿ç»´çš„åŒºåˆ«è¿˜æ˜¯è›®å¤§çš„ï¼›ç„¶åæˆ‘ä»¬å†å¯¹å¤§å‹ç½‘ç«™ä¸å°å‹ç½‘ç«™è¿›è¡ŒèŒƒå›´å®šä¹‰ï¼Œæ­¤å®šä¹‰ä¸»è¦ä»è¿ç»´å¤æ‚æ€§è§’åº¦è€ƒè™‘ï¼Œå¦‚ç½‘ç«™è§„èŒƒã€çŸ¥ååº¦ã€æœåŠ¡å™¨é‡çº§ã€pvé‡ç­‰è€ƒè™‘ï¼Œå…¶å®ƒå› ç´ ä¸æ˜¯é‡ç‚¹ï¼›</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰æœåŠ¡å™¨è§„æ¨¡å¤§äº1000å°ï¼Œpvæ¯å¤©è‡³å°‘ä¸Šäº¿ï¼ˆè‡³å°‘å›½å†…æ’åå‰10ï¼‰ï¼Œå¦‚sinaã€baiduã€QQï¼Œ51.comç­‰ç­‰ï¼›</p>
<p>å…¶å®ƒå°å‹ç½‘ç«™å¯èƒ½æ²¡æœ‰çœŸæ­£æ„ä¹‰ä¸Šçš„è¿ç»´å·¥ç¨‹å¸ˆï¼Œè¿™ä¸ç½‘ç«™è§„èŒƒä¸å¤Ÿå’Œæˆæœ¬å› ç´ æœ‰å…³ï¼Œæ›´å¤šçš„æ˜¯é›†åˆç½‘ç»œã€ç³»ç»Ÿã€å¼€å‘å·¥ä½œäºä¸€èº«çš„<code>â€œå¤åˆæ€§äººæ‰â€</code>ï¼Œå°±å¦‚æœ‰äº›å…¬å¸æŠŠä¸€äº›åˆåŒé‡‡è´­éƒ½çº³å…¥äº†è¿ç»´èŒè´£èŒƒå›´ï¼Œè¿˜æœ‰å¦‚IDCç½‘ç»œè§„åˆ’ä¹Ÿçº³å…¥è¿ç»´èŒè´£ã€‚æ‰€ä»¥ï¼Œéå¸¸é‡è¦ä¸€å®šéœ€è¦æ˜ç™½ï¼š</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è¿ç»´å¯¹å…¶å®ƒå…³è”å·¥ç§å¿…é¡»éå¸¸äº†è§£ç†Ÿæ‚‰ï¼šç½‘ç»œã€ç³»ç»Ÿã€ç³»ç»Ÿå¼€å‘ã€å­˜å‚¨ï¼Œå®‰å…¨,<span class="built_in">DB</span>ç­‰ï¼›</div></pre></td></tr></table></figure>
<p>æˆ‘åœ¨è¿™é‡Œæ‰€è®²çš„è¿ç»´å·¥ç¨‹å¸ˆå°±æ˜¯æŒ‡ä¸“èŒè¿ç»´å·¥ç¨‹å¸ˆã€‚<br>æˆ‘ä»¬å†æ¥è¯´è¯´ä¸€èˆ¬äº§å“çš„â€œå‡ºç”Ÿâ€æµç¨‹ï¼š</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>ã€é¦–å…ˆå…¬å¸ç®¡ç†å±‚ç»™å‡ºæŒ‡å¯¼æ€æƒ³ï¼ŒPMå®šä½å¸‚åœºéœ€æ±‚ï¼ˆæˆ–copyæˆç†Ÿåº”ç”¨ï¼‰è¿›è¡Œè°ƒç ”ã€åˆ†æã€æœ€ç»ˆç»™å‡ºè¯¦ç»†è®¾è®¡ã€‚</div><div class="line"></div><div class="line"><span class="number">2</span>ã€æ¶æ„å¸ˆæ ¹æ®äº§å“è®¾è®¡çš„éœ€æ±‚ï¼Œå¦‚pvå¤§å°é¢„ä¼°ã€æœåŠ¡å™¨è§„æ¨¡ã€åº”ç”¨æ¶æ„ç­‰å› ç´ å®Œæˆç½‘ç»œè§„åˆ’,æ¶æ„è®¾è®¡ç­‰ï¼ˆåŸºæœ¬ä¸Šå¯¹ç½‘ç»œå˜åŠ¨ä¸å¤§ï¼Œé™¤éå¤§é¡¹ç›®ï¼‰</div><div class="line"></div><div class="line"><span class="number">3</span>ã€å¼€å‘å·¥ç¨‹å¸ˆå°†è®¾è®¡codeå®ç°å‡ºæ¥ã€æµ‹è¯•å·¥ç¨‹å¸ˆå¯¹åº”ç”¨è¿›è¡Œæµ‹è¯•ã€‚</div><div class="line"></div><div class="line"><span class="number">4</span>ã€å¥½ï¼Œåˆ°è¿ç»´å·¥ç¨‹å¸ˆå‡ºé©¬äº†ï¼Œé¦–å…ˆæ˜ç¡®ä¸€ç‚¹ä¸æ˜¯è¯´å‰ä¸‰æ­¥å°±ä¸è¿ç»´å·¥ä½œæ— å…³äº†ï¼Œæ°æ°ç›¸åï¼Œå‰ä¸‰æ­¥ä¸è¿ç»´å…³ç³»å¾ˆå¤§ï¼š</div></pre></td></tr></table></figure>
<p>åº”ç”¨çš„å‰æœŸæ¶æ„è®¾è®¡ã€è½¯/ç¡¬ä»¶èµ„æºè¯„ä¼°ç”³è¯·é‡‡è´­ã€åº”ç”¨è®¾è®¡æ€§èƒ½éšæ‚£åŠè¯„ä¼°ã€IDCã€æœåŠ¡æ€§èƒ½å®‰å…¨è°ƒä¼˜ã€æœåŠ¡å™¨ç³»ç»Ÿçº§ä¼˜åŒ–ï¼ˆä¸ç‰¹å®šåº”ç”¨æœ‰å…³ï¼‰ç­‰éƒ½éœ€è¿ç»´å…¨ç¨‹å‚ä¸ï¼Œå¹¶ä¸»å¯¼æ•´ä¸ªåº”ç”¨ä¸Šçº¿é¡¹ç›®ï¼›è¿ç»´å·¥ç¨‹å¸ˆè´Ÿè´£äº§å“æœåŠ¡å™¨ä¸Šæ¶å‡†å¤‡å·¥ä½œï¼ŒæœåŠ¡å™¨ç³»ç»Ÿå®‰è£…ã€ç½‘ç»œã€IPã€é€šç”¨å·¥å…·é›†å®‰è£…ã€‚è¿ç»´å·¥ç¨‹å¸ˆè¿˜éœ€è¦å¯¹ä¸Šçº¿çš„åº”ç”¨ç³»ç»Ÿæ¶æ„æ˜¯å¦åˆç†ã€æ˜¯å¦å…·å¤‡å¯æ‰©å±•æ€§ã€åŠå®‰å…¨éšæ‚£ç­‰å› ç´ è´Ÿè´£ï¼Œå¹¶è´Ÿè´£æœ€åå°†äº§å“ï¼ˆç¨‹åºï¼‰ã€ç½‘ç»œã€ç³»ç»Ÿä¸‰è€…è¿›è¡Œæ‹¼æ¥å¹¶æœ€ä¼˜åŒ–çš„ç»„åˆåœ¨ä¸€èµ·ï¼Œæœ€ç»ˆå®Œæˆäº§å“ä¸Šçº¿æä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œå¹¶å‘¨è€Œå¤ä½¿ï¼šéœ€æ±‚-&gt;å¼€å‘ï¼ˆå‡çº§ï¼‰-&gt;æµ‹è¯•-&gt;ä¸Šçº¿ï¼ˆæ€§èƒ½ã€å®‰å…¨é—®é¢˜ç­‰ä¹‹å‰é¢„ä¼°å¤–çš„é—®é¢˜éšä¹‹æ…¢æ…¢å°±å…¨å‡ºæ¥äº†ï¼‰åœ¨è¿™é‡Œæä¸€ç‚¹ï¼šç½‘ç«™å¼€å‘æ¨¡å¼ä¸ä¼ ç»Ÿè½¯ä»¶å¼€å‘å®Œå…¨ä¸ä¸€æ ·ï¼Œç½‘ç«™ä¸€å¤©å¼€å‘ä¸Šçº¿1~5ä¸ªå‡çº§ç‰ˆæœ¬æ˜¯å®¶å¸¸ä¾¿é¥­ï¼Œç”¨æˆ·ä½“éªŒä¸ºç‹å˜›ï¼Œå¦‚æœæŸä¸ªçº¿ä¸Šé—®é¢˜åƒM$éœ€è¦1å¹´è§£å†³ï¼Œç”¨æˆ·æ—©è·‘å…‰äº†ï¼›åº”ç”¨ä¸Šçº¿åï¼Œè¿ç»´å·¥ä½œæ‰åˆšå¼€å§‹ï¼Œå…·ä½“å·¥ä½œå¯èƒ½åŒ…æ‹¬ï¼š</p>
<p>å‡çº§ç‰ˆæœ¬ä¸Šçº¿å·¥ä½œã€æœåŠ¡ç›‘æ§ã€åº”ç”¨çŠ¶æ€ç»Ÿè®¡ã€æ—¥å¸¸æœåŠ¡çŠ¶æ€å·¡æ£€ã€çªå‘æ•…éšœå¤„ç†ã€æœåŠ¡æ—¥å¸¸å˜æ›´è°ƒæ•´ã€é›†ç¾¤ç®¡ç†ã€æœåŠ¡æ€§èƒ½è¯„ä¼°ä¼˜åŒ–ã€æ•°æ®åº“ç®¡ç†ä¼˜åŒ–ã€éšç€åº”ç”¨PVå¢å‡è¿›è¡Œåº”ç”¨æ¶æ„çš„ä¼¸ç¼©ã€å®‰å…¨ã€è¿ç»´å¼€å‘å·¥ä½œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a ã€å°½é‡å°†æ—¥å¸¸æœºæ¢°æ€§æ‰‹å·¥å·¥ä½œé€šè¿‡å·¥å…·å®ç°ï¼ˆå¦‚æœåŠ¡ç›‘æ§ã€åº”ç”¨çŠ¶æ€ç»Ÿè®¡ã€æœåŠ¡ä¸Šçº¿ç­‰ç­‰ï¼‰ï¼Œæé«˜æ•ˆç‡ã€‚</div><div class="line">bã€è§£å†³ç°å®ä¸­æœåŠ¡å­˜åœ¨çš„é—®é¢˜ï¼Œå¦‚é«˜å¯é æ€§ã€å¯æ‰©å±•æ€§é—®é¢˜ç­‰ã€‚</div><div class="line">cã€å¤§è§„æ¨¡é›†ç¾¤ç®¡ç†å·¥å…·çš„å¼€å‘ï¼Œå¦‚1ä¸‡å°æœºå™¨å¦‚ä½•åœ¨1åˆ†é’Ÿå†…å®Œæˆå¯†ç ä¿®æ”¹ã€æˆ–è¿è¡ŒæŒ‡å®šä»»åŠ¡ï¼Ÿ2000å°æœåŠ¡å™¨å¦‚ä½•å¿«é€Ÿå®‰è£…æ“ä½œç³»ç»Ÿï¼Ÿå„åˆ†å¸ƒå¼IDCã€å­˜å‚¨é›†ç¾¤ä¸­æ•°PTçº§çš„æ•°æ®å¦‚ä½•å¿«é€Ÿçš„å­˜å‚¨ã€å…±äº«ã€åˆ†æï¼Ÿç­‰ä¸€ç³»åˆ—æŒ‘æˆ˜éƒ½éœ€è¿ç»´å·¥ç¨‹å¸ˆçš„åŠªåŠ›ã€‚</div><div class="line">åœ¨æ­¤è¯´æ˜ä¸€ä¸‹å…¶å®ƒé…åˆå·¥ç§æƒ…å†µï¼Œåœ¨æ•´ä¸ªé¡¹ç›®ä¸­ï¼Œå‰ç«¯åº”ç”¨å¯¹äºç½‘ç»œ/ç³»ç»Ÿå·¥ç¨‹å¸ˆæ¥è¯´æ˜¯é»‘åŒ£å­ï¼ŒåŒæ—¶å¼€å‘å·¥ç¨‹å¸ˆèŒè´£åªæ˜¯è´Ÿè´£å®Œæˆåº”ç”¨çš„åŠŸèƒ½æ€§å¼€å‘ï¼Œå¹¶å¯¹åº”ç”¨æœ¬èº«æ€§èƒ½ã€å®‰å…¨æ€§ç­‰åº”ç”¨æœ¬èº«è´Ÿè´£ï¼Œå®ƒä¸è´Ÿè´£æˆ–å…³å¿ƒç½‘ç»œ/ç³»ç»Ÿæ¶æ„æ–¹é¢äº‹å®œï¼Œå½“ç„¶è½¯/ç¡¬ä»¶é‡‡è´­äººå‘˜ç­‰äº‹ä¸šéƒ¨å…¶å®ƒåŒäº‹ä¹Ÿä¸ä¼šå…³å¿ƒè¿™äº›é—®é¢˜ï¼Œå„å¸å…¶èŒï¼Œä½†é¡¹ç›®çš„æ ¸å¿ƒæ˜¯è¿ç»´å·¥ç¨‹å¸ˆ~ï¼æ‰€æœ‰å…¶å®ƒéƒ¨é—¨çš„æ¡¥æ¢ã€‚</div></pre></td></tr></table></figure>
<h4 id="ä¸¾ä¾‹ï¼š"><a href="#ä¸¾ä¾‹ï¼š" class="headerlink" title="ä¸¾ä¾‹ï¼š"></a>ä¸¾ä¾‹ï¼š</h4><p>ä¸Šé¢è¯´äº†å¾ˆå¤šï¼Œæˆ‘æƒ³å¤§å®¶åº”è¯¥å¯¹è¿ç»´æœ‰ä¸€äº›æ¦‚å¿µäº†ï¼Œåœ¨æ­¤æ‰“ä¸ªæ¯”æ–¹å§ï¼Œå¦‚æœæˆ‘ä»¬æ˜¯ä¸€è¾†é«˜é€Ÿè¡Œé©¶åœ¨é«˜é€Ÿå…¬è·¯ä¸Šçš„æ±½è½¦ï¼Œé‚£è¿ç»´å·¥ç¨‹å¸ˆå°±æ˜¯å¸æœºå…¼ç»´ä¿®å·¥ï¼Œè¿™ä¸ªå¸æœºä¸ç®€å•ï¼Œæœ‰æ—¶éœ€è¦åœ¨é«˜é€Ÿè¡Œé©¶è¿‡ç¨‹ä¸­æ¢è½®èƒã€å¹¶æ ¹æ®é“è·¯æƒ…å†µæ¢æ¡£ä½ã€å½“æ±½è½¦é€Ÿåº¦è¶Šæ¥è¶Šå¿«ï¼Œæ±½è½¦æœ¬èº«ä¸èƒ½æ»¡è¶³é«˜é€Ÿåº¦æ—¶å¯¹æ±½è½¦æ€§èƒ½è°ƒä¼˜æˆ–é›¶ä»¶å‡çº§ã€é«˜é€Ÿè¡Œè¿›ä¸­è§£å†³æ±½è½¦æ•…éšœåŠæ€§èƒ½é—®é¢˜ã€æ—¶åˆ»å…³æ³¨å‰æ–¹å®‰å…¨é—®é¢˜ï¼Œå¹¶å…ˆçŸ¥å…ˆè§‰çš„é‡‡å–è§„é¿æ‰‹æ®µã€‚è¿™å°±æ˜¯è¿ç»´å·¥ä½œ~ï¼</p>
<h4 id="æœ€åè¯´ä¸€ä¸‹è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£ï¼š"><a href="#æœ€åè¯´ä¸€ä¸‹è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£ï¼š" class="headerlink" title="æœ€åè¯´ä¸€ä¸‹è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£ï¼š"></a>æœ€åè¯´ä¸€ä¸‹è¿ç»´å·¥ç¨‹å¸ˆçš„èŒè´£ï¼š</h4><p>â€ç¡®ä¿çº¿ä¸Šç¨³å®šâ€œï¼Œçœ‹ä¼¼ç®€å•ï¼Œä½†å®å±ä¸å®¹æ˜“ï¼Œè¿ç»´å·¥ç¨‹å¸ˆå¿…é¡»åœ¨è¯¸å¤šä¸åˆ©å› ç´ ä¸­è¿›è¡Œæƒè¡¡ï¼šæ–°äº§å“æ¨¡å¼å¯¹ç°æœ‰æ¶æ„åŠæŠ€æœ¯çš„å†²å‡»ã€äº§å“é«˜é¢‘åº¦çš„å‡çº§å¸¦æ¥çš„çº¿ä¸ŠBUGéšæ‚£ã€è¿ç»´è‡ªåŠ¨åŒ–ç®¡ç†æ‰¿åº¦ä¸é«˜å¯¼è‡´çš„äººä¸ºå¤±è¯¯ã€ITè¡Œä¸šè¿½æ±‚çš„é«˜æ•ˆç‡å¯¼è‡´æµç¨‹æ‰§è¡Œä¸Šçš„ç¼ºå¤±ã€ç”¨æˆ·å¢æ¶¨å¸¦æ¥çš„æ€§èƒ½åŠæ¶æ„ä¸Šçš„å‹åŠ›ã€ITè¡Œä¸šå®½æ¾çš„æŠ€æœ¯ç®¡ç†æ–‡åŒ–ã€åˆ›æ–°é£é™©ã€äº’è”ç½‘å®‰å…¨æ€§é—®é¢˜ç­‰å› ç´ ï¼Œéƒ½ä¼šæ˜¯ç½‘ç«™ç¨³å®šçš„å¤§æ•Œï¼Œè¿ç»´å·¥ç¨‹å¸ˆå¿…é¡»æŠŠæ§å¥½è¿™æœ€åä¸€å…³ï¼Œéœ€å…·ä½“é«˜åº¦çš„è´£ä»»æ„Ÿã€åŸåˆ™æ€§åŠåè°ƒèƒ½åŠ›ï¼Œå¦‚æœèƒ½åšåˆ°å„å› ç´ çš„æœ€ä½³å¹³è¡¡ï¼Œé‚£å°±æ˜¯ä¸€åä¼˜ç§€çš„è¿ç»´å·¥ç¨‹å¸ˆäº†ã€‚</p>
<blockquote>
<p>å¦å¤–åœ¨æ­¤èŠç‚¹é¢˜å¤–è¯ï¼Œæˆ‘åœ¨è¿™é‡Œçœ‹åˆ°æœ‰å¾ˆå¤šäººè¦sinaã€QQã€baidu,51.comç­‰èŠè‡ªå·²çš„è¿ç»´æ–¹é¢çš„ç»éªŒï¼Œå…¶å®è¿™å¯¹äºå®ƒä»¬æœ‰ç‚¹å…ä¸ºå…¶éš¾ï¼š</p>
</blockquote>
<ul>
<li><p>aã€å„å…¬å¸è‡ªå·²ç½‘ç»œæ¶æ„ã€è§„æ¨¡ã€æˆ–å¤šæˆ–å°‘è¿˜ç®—æ˜¯å…¬å¸çš„æ ¸å¿ƒç§˜å¯†ï¼Œè¦ä¿å¯†ï¼Œå¦å¤–ï¼Œå¯¹äºå¤§å®¶æ‰€ç†ŸçŸ¥çš„é€šç”¨è½¯ä»¶ã€æ¶æ„ï¼Œç”±äºå¾ˆå¤šå…¬å¸ä¼šæ ¹æ®è‡ªå·²å®é™…ä¸šåŠ¡éœ€è¦ï¼ŒåŒæ—¶å› ä¸ºåŸç‰ˆæ€§èƒ½ã€å®‰å…¨æ€§ã€å·²çŸ¥bugã€åŠŸèƒ½ç­‰åŸå› ï¼Œè¿›è¡Œè¿‡äºŒæ¬¡å¼€å‘ï¼ˆå¦‚apache,php,mysqlï¼‰ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¹Ÿä¼šæ ¹æ®ä¸åŒä¸šåŠ¡ç±»å‹è¿›è¡Œå®šåˆ¶çš„ï¼Œå¦‚æŸäº›åº”ç”¨å±äºè¿ç®—å‹ã€æŸäº›æ˜¯é«˜IOå‹ã€æˆ–å¤§å­˜å‚¨å¤§å†…å­˜å‹ã€‚æ ¹æ®è¿™äº›ç‰¹ç‚¹è¿›è¡Œå†…æ ¸ä¼˜åŒ–å®šåˆ¶ï¼Œå¦‚sinaå°±åœ¨memcacheä¸Šè¿›è¡Œè¿‡äºŒæ¬¡å¼€å‘ï¼Œæå‡ºäº†ä¸€ä¸ªMemcacheDBï¼Œå…·ä½“åšå¾—å¦‚ä½•æˆ‘ä»¬ä¸è°ˆï¼Œä½†å¼€æºäº†ï¼Œæ˜¯å€¼å¾—ç§°èµçš„ï¼Œå›½å†…å…¬å¸å¯¹äºå¼€æºåŸºæœ¬ä¸Šæ˜¯ç´¢å–ï¼Œæ²¡æœ‰è´¡çŒ®ï¼›å¦å¤–ï¼ŒæœåŠ¡å™¨ä¹Ÿä¸æ˜¯å¤§å®¶æ‰€ç†ŸçŸ¥çš„å‹å·ï¼Œæ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹ï¼Œå¤§éƒ¨ä»½éƒ½æ˜¯æ‰¾DELL/HP/ibmè¿›è¡Œè¿‡å®šåˆ¶ï¼›å¦å¤–ï¼Œåœ¨åˆ†å¸ƒå¼å‚¨å­˜æ–¹é¢éƒ½æœ‰è‡ªå·²è§£å†³æ–¹æ¡ˆï¼Œè¦ä¸å°±æ˜¯ä½¿ç”¨ç°æˆå¼€æºhadoopç­‰è§£å†³æ–¹æ¡ˆï¼Œæˆ–è‡ªå·²å¼€å‘ã€‚ä½†90%éƒ½æ˜¯å€Ÿé‰´google GFSçš„æ€æƒ³:åˆ†å¸ƒå¼å­˜å‚¨ã€è®¡ç®—ã€å¤§è¡¨ã€‚</p>
</li>
<li><p>bã€å„å…¬å¸ä¸šåŠ¡æ–¹å‘ä¸ä¸€æ ·ï¼Œä¼šå¯¼è‡´è¿ç»´æ¨¡å¼æˆ–æ–¹æ³•éƒ½ä¸ä¸€æ ·ï¼Œå¦‚51.comå’Œbaiduè¿ç»´è‚¯å®šåŒºåˆ«å¾ˆå¤§ï¼Œå› ä¸ºä»–ä»¬ä¸šåŠ¡æ¨¡å¼å†³å®šäº†å…¶æ¶æ„ã€æœåŠ¡å™¨é‡çº§ã€IDCåˆ†å¸ƒã€ç½‘ç»œç»“æ„ã€é€šç”¨æŠ€æœ¯éƒ½ä¼šä¸ä¸€æ ·ï¼Œä¸»æ‰“æ–°é—»é—¨æˆ·çš„sinaä¸ä¸»æ‰“snsçš„51.comè¿ç»´æ¨¡å¼å·®å¼‚å°±éå¸¸å¤§,ç”šè‡³èŒè´£éƒ½ä¸å¤§ä¸€æ ·ï¼›ä½†æœ‰ä¸€ç‚¹ï¼Œé€šç”¨æŠ€æœ¯åŠå¤§è‡´æ¶æ„ä¸Šéƒ½å¤§åŒå°å¼‚ï¼Œå¤§å®¶ä¸è¦å¤ªç¥åŒ–ï¼Œæ›´å¤šçš„å…¬å¸åªæ˜¯ç©å’ç§¯æœ¨çš„æ¸¸æˆç½¢äº†ï¼Œæ²¡ä»€ä¹ˆæŠ€æœ¯å«é‡ã€‚</p>
</li>
<li><p>cã€å¦‚ä¸Šé¢æ‰€è®²ï¼Œç›®å‰å¤§å‹ç½‘ç«™è¿ç»´è¿˜å¤„äºå¹¼å¹´æ—¶æœŸç†å¿µå’Œç»éªŒéƒ½æ¯”è¾ƒé›¶æ•£ï¼Œæ²¡æœ‰æˆç†Ÿçš„çŸ¥è¯†ä½“ç³»ï¼Œå¯èƒ½å…·ä½“ä»€ä¹ˆæ˜¯è¿ç»´ï¼Œå¤§å®¶éƒ½è¦å…ˆæ€ç´¢ä¸€ç•ªï¼Œæˆ–å‹æ ¹æ²¡æƒ³è¿‡ï¼ŒçœŸæ­£è®¨è®ºä¹Ÿåªæ˜¯è¿ç»´å·¥ä½œçš„å†°å±±ä¸€è§’ï¼Œå±€é™äºå…·ä½“æŠ€æœ¯ç»†èŠ‚ï¼Œæˆ–æŸæŸè‘—åç½‘ç«™å¤§çš„æ¡†æ¶ï¼ŒçœŸæ­£è¿ç»´ä½“åŒ–ä¸œè¥¿æ²¡æœ‰ï¼Œè¿™ä¹Ÿè®¸æ˜¯ç›®å‰ç½‘ä¸Šè¿ç»´ç›¸å…³èµ„æ–™æ¯”è¾ƒå°‘çš„åŸæ•…å§ã€‚æˆ–è€…ä¹Ÿæ˜¯å›½å†…è¿ç»´äººå‘˜æ¯”è¾ƒéš¾æ‹›ï¼Œæ¯”è¾ƒç‰›çš„è¿ç»´å·¥ç¨‹å¸ˆæ¯”è¾ƒå°‘è§çš„åŸå› ä¹‹ä¸€å§ã€‚</p>
</li>
</ul>
<h4 id="äºŒã€è¿ç»´å·¥ä½œå¸ˆéœ€è¦ä»€ä¹ˆæ ·çš„æŠ€èƒ½åŠç´ è´¨"><a href="#äºŒã€è¿ç»´å·¥ä½œå¸ˆéœ€è¦ä»€ä¹ˆæ ·çš„æŠ€èƒ½åŠç´ è´¨" class="headerlink" title="äºŒã€è¿ç»´å·¥ä½œå¸ˆéœ€è¦ä»€ä¹ˆæ ·çš„æŠ€èƒ½åŠç´ è´¨"></a>äºŒã€è¿ç»´å·¥ä½œå¸ˆéœ€è¦ä»€ä¹ˆæ ·çš„æŠ€èƒ½åŠç´ è´¨</h4><p>åšä¸ºä¸€åè¿ç»´å·¥ç¨‹å¸ˆéœ€è¦ä»€ä¹ˆæ ·çš„æŠ€èƒ½åŠç´ è´¨å‘¢ï¼Œé¦–å…ˆè¯´è¯´æŠ€èƒ½å§ï¼Œå¦‚å¤§å®¶ä¸Šé¢æ‰€çœ‹åˆ°ï¼Œè¿ç»´æ˜¯ä¸€ä¸ªé›†å¤šITå·¥ç§æŠ€èƒ½ä¸ä¸€èº«çš„å²—ä½ï¼Œå¯¹ç³»ç»Ÿ-&gt;ç½‘ç»œ-&gt;å­˜å‚¨-&gt;åè®®-&gt;éœ€æ±‚-&gt;å¼€å‘-&gt;æµ‹è¯•-&gt;å®‰å…¨ç­‰å„ç¯èŠ‚éƒ½éœ€è¦äº†è§£ä¸€äº›ï¼Œä½†å¯¹äºæŸäº›ç¯èŠ‚éœ€ç†Ÿæ‚‰ç”šè‡³ç²¾é€šï¼Œå¦‚ç³»ç»Ÿ(åŸºæœ¬æ“ä½œç³»ç»Ÿçš„ç†Ÿæ‚‰ä½¿ç”¨,*nix,windows..)ã€åè®®ã€ç³»ç»Ÿå¼€å‘(æ—¥å¸¸å¾ˆé‡è¦çš„å·¥ä½œæ˜¯è‡ªåŠ¨è¿ç»´åŒ–ç›¸å…³å¼€å‘ã€å¤§è§„æ¨¡é›†ç¾¤å·¥å…·å¼€å‘ã€ç®¡ç†ï¼‰ã€é€šç”¨åº”ç”¨ï¼ˆå¦‚lvsã€haã€web serverã€dbã€ä¸­é—´ä»¶ã€å­˜å‚¨ç­‰ï¼‰ã€ç½‘ç»œ,IDCæ‹“æœ´æ¶æ„ï¼›</p>
<h4 id="æŠ€èƒ½æ–¹é¢æ€»ç»“ä»¥ä¸‹å‡ ç‚¹ï¼š"><a href="#æŠ€èƒ½æ–¹é¢æ€»ç»“ä»¥ä¸‹å‡ ç‚¹ï¼š" class="headerlink" title="æŠ€èƒ½æ–¹é¢æ€»ç»“ä»¥ä¸‹å‡ ç‚¹ï¼š"></a>æŠ€èƒ½æ–¹é¢æ€»ç»“ä»¥ä¸‹å‡ ç‚¹ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1ã€å¼€å‘èƒ½åŠ›ï¼Œè¿™ç‚¹éå¸¸é‡è¦ï¼Œå› ä¸ºè¿ç»´å·¥å…·éƒ½éœ€è¦è‡ªå·²å¼€å‘ï¼Œå¼€å‘è¯­è¨€ï¼šperlã€pythonã€phpï¼ˆå…¶ä¸­ä¹‹ä¸€ï¼‰ã€shellï¼ˆawk,sed,expectâ€¦.ç­‰ï¼‰ï¼Œéœ€è¦æœ‰è¿‡å®é™…é¡¹ç›®å¼€å‘ç»éªŒï¼Œå¦åˆ™å·¥ä½œä¼šéå¸¸ç—›è‹¦ã€‚</div><div class="line"></div><div class="line">2ã€é€šç”¨åº”ç”¨æ–¹é¢éœ€è¦äº†è§£ï¼šæ“ä½œç³»ç»Ÿï¼ˆç›®å‰å›½å†…ä¸»è¦æ˜¯linuxã€bsdï¼‰ã€webserverç›¸å…³</div><div class="line">(nginx,apahe,php,lighttpd,javaã€‚ã€‚ã€‚)ã€æ•°æ®åº“(mysql,oralce)ã€å…¶å®ƒæ‚ä¸ƒå…«æ‹‰çš„ä¸œä¸œï¼›ç³»ç»Ÿä¼˜åŒ–ï¼Œé«˜å¯é æ€§ï¼›è¿™äº›åªæ˜¯åŠ åˆ†é¡¹ï¼Œä¸éœ€å¿…å¤‡ï¼Œå¯ä»¥è¾¹å·¥ä½œè¾¹æ…¢æ…¢å­¦ï¼Œè¿™äº›ä¸œè¥¿éƒ½ä¸éš¾ã€‚å½“ç„¶åœ¨è¿ç»´ä¸­ï¼Œæœ‰äº›æ˜¯æœ‰åˆ†å·¥åé‡ç‚¹ä¸ä¸€æ ·ã€‚</div><div class="line"></div><div class="line">3ã€ç³»ç»Ÿã€ç½‘ç»œã€å®‰å…¨ï¼Œå­˜å‚¨ï¼ŒCDNï¼ŒDBç­‰éœ€è¦ç›¸å½“äº†è§£ï¼ŒçŸ¥é“å…¶ç›¸å…³åŸç†ã€‚</div></pre></td></tr></table></figure>
<h4 id="ä¸ªäººç´ è´¨æ–¹é¢ï¼š"><a href="#ä¸ªäººç´ è´¨æ–¹é¢ï¼š" class="headerlink" title="ä¸ªäººç´ è´¨æ–¹é¢ï¼š"></a>ä¸ªäººç´ è´¨æ–¹é¢ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line">1ã€æ²Ÿé€šèƒ½åŠ›ã€å›¢é˜Ÿåä½œï¼šè¿ç»´å·¥ä½œè·¨éƒ¨é—¨ã€è·¨å·¥ç§å·¥ä½œå¾ˆå¤šï¼Œéœ€å–„äºæ²Ÿé€šã€å¹¶ä¸”å›¢é˜Ÿåä½œèƒ½åŠ›è¦å¼ºï¼›è¿™åº”è¯¥æ˜¯ç°ä»£ä¼ä¸šçš„åŸºæœ¬ç´ è´¨è¦æ±‚äº†ï¼Œä¸å¤šè¯´ã€‚</div><div class="line">2ã€å·¥ä½œä¸­éœ€èƒ†å¤§å¿ƒç»†ï¼šèƒ†å¤§æ‰èƒ½åˆ›æ–°ã€ä¸èµ°å¯»å¸¸è·¯ï¼Œç‰¹åˆ«å¯¹äºè¿ç»´è¿™ç§æ–°çš„å·¥ç§ï¼Œæ›´éœ€åˆ›æ–°æ‰èƒ½ä¿ƒè¿›å‘å±•ï¼›å¿ƒç»†ï¼Œè¿ç»´å·¥ç¨‹å¸ˆæ˜¯ç½‘ç«™admin,æœ€é«˜çº¿ä¸Šæƒé™è€…ï¼Œä¸€ä¸å°å¿ƒå°±ä¼šé—æ†¾ç»ˆç”Ÿæˆ–æ‰“å…¥åå…«å±‚åœ°ç‹±ã€‚</div><div class="line">3ã€ä¸»åŠ¨æ€§ã€æ‰§è¡ŒåŠ›ã€ç²¾åŠ›æ—ºç››ã€æŠ—å‹èƒ½åŠ›å¼ºï¼šç”±äºITè¡Œä¸šçš„ç‰¹æ€§ï¼Œå˜åŒ–å¿«ï¼›å¾€å¾€è®¡åˆ’èµ¶ä¸ä¸Šå˜åŒ–ï¼Œè¿ç»´å·¥ä½œå°±æ›´çªå‡ºäº†ï¼Œæ¯”å¦‚å›½å†…å„å¤§å…¬å¸æœåŠ¡å™¨å¾€å¾€æ˜¯</div><div class="line">å…¨å›½å„åœ°ï¼Œå“ªé‡Œä¾¿å®œæ€§ä»·æ¯”é«˜ï¼Œå°±é‚£å¾€æ¬ï¼Œè¿›è¡Œå¤§è§„æ¨¡æœåŠ¡è¿ç§»ï¼ˆç‰µæ‰¯çš„æœåŠ¡å™¨æˆç™¾ä¸Šåƒå°ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¤´ç—›çš„é—®é¢˜ï¼›å¾€å¾€æ—¶é—´</div><div class="line">éå¸¸ç´§è¿«ï¼Œå¦‚é™1å‘¨å†…å®Œæˆï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¿ç»´å·¥ç¨‹å¸ˆçš„ä¸»åŠ¨æ€§åŠæ‰§è¡ŒåŠ›å°±æœ‰å¾ˆé«˜çš„è¦æ±‚äº†ï¼šè®¡åˆ’ã€æ–¹æ¡ˆã€æœåŠ¡æ— ç¼è¿ç§»ã€æœºå™¨æ¬è¿ä¸Šæ¶ã€ç¯å¢ƒå‡†å¤‡ã€å®‰å…¨è¯„ä¼°ã€æ€§</div><div class="line">èƒ½è¯„ä¼°ã€åŸºå»ºã€å„å…³è”éƒ¨é—¨æ‰¯çš®,7X24å°ç´§æ€¥äº‹æ•…å“åº”ç­‰ã€‚</div><div class="line">4ã€å…¶å®ƒå°±æ˜¯ä¸€äº›åŸºæœ¬ç´ è´¨äº†ï¼šå¤´è„‘è¦çµå…‰ã€é€»è¾‘æ€ç»´èƒ½åŠ›å¼ºã€ä¸ºäººè°¦è™šç¨³é‡ã€äº²å’ŒåŠ›ã€ä¹äºåŠ©äººã€æœ‰å¤§å±€è§‚ã€‚</div><div class="line">5ã€æœ€åä¸€ç‚¹ï¼Œåšç½‘ç«™è¿ç»´éœ€è¦æœ‰æ¢ç´¢åˆ›æ–°ç²¾ç¥ï¼Œé€šè¿‡åˆ›æ–°å‹æ€ç»´è§£å†³ç°å®ä¸­çš„é—®é¢˜ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¤„äºå¹¼å¹´çš„èŒä¸šï¼ˆå›½å¤–ä¹Ÿä¸€æ ·ï¼Œä½†æ¯”å›½å†…èµ·æ­¥æ—©ç‚¹ï¼‰ï¼Œæ²¡æœ‰æˆç†Ÿä½“ç³»æˆ–æ–¹æ³•è®ºå¯ä»¥å€Ÿé‰´ï¼Œåªèƒ½é å¤§å®¶è‡ªå·²æ‘¸ç´¢åŠªåŠ›ã€‚</div><div class="line">ä¸‰ã€æ€æ ·æ‰ç®—æ˜¯ä¸€ä¸ªåˆæ ¼çš„è¿ç»´å·¥ç¨‹å¸ˆ</div><div class="line">1ã€ä¿è¯æœåŠ¡è¾¾åˆ°è¦æ±‚çš„çº¿ä¸Šæ ‡å‡†ï¼Œå¦‚99.9%ï¼›ä¿è¯çº¿ä¸Šç¨³å®šï¼Œè¿™æ˜¯è¿ç»´å·¥ç¨‹å¸ˆçš„åŸºæœ¬è´£èŒæ‰€åœ¨ã€‚</div><div class="line">2ã€ä¸æ–­çš„æå‡åº”ç”¨çš„å¯é æ€§ä¸å¥å£®æ€§ã€æ€§èƒ½ä¼˜åŒ–ã€å®‰å…¨æå‡ï¼›è¿™æ–¹é¢éå¸¸è€ƒéªŒä¸»åŠ¨æ€§å’Œåˆ›æ–°æ€ç»´ã€‚</div><div class="line">3ã€ç½‘ç«™å„å±‚é¢ç›‘æ§ã€ç»Ÿè®¡çš„è¦†ç›–åº¦ï¼Œè½¯ä»¶ã€ç¡¬ä»¶ã€è¿è¡ŒçŠ¶æ€ï¼Œèƒ½ç›‘æ§çš„éƒ½éœ€è¦ç›‘æ§ç»Ÿè®¡ï¼Œé¿å…ç›‘æ§æ­»è§’ã€å¹¶èƒ½å®æ—¶äº†è§£åº”ç”¨çš„è¿è½¬æƒ…å†µã€‚</div><div class="line">4ã€é€šè¿‡åˆ›æ–°æ€ç»´è§£å†³è¿ç»´æ•ˆç‡é—®é¢˜ï¼›ç›®å‰å„å…¬å¸å¤§éƒ¨ä»½è¿ç»´ä¸»è¦å·¥ä½œè¿˜æ˜¯ä¾èµ–äººå·¥æ“ä½œå¹²é¢„ï¼Œéœ€è¦å°½å¯èƒ½çš„è§£æ”¾åŒæ‰‹ã€‚</div><div class="line">5ã€è¿ç»´çŸ¥è¯†çš„ç§¯ç´¯ä¸æ²‰æ·€ã€æ–‡æ¡£çš„å®Œå¤‡æ€§ï¼Œè¿ç»´æ˜¯ä¸€ä¸ªç»éªŒæ€§éå¸¸å¼ºçš„å²—ä½ï¼Œå¥½çš„ç»éªŒä¸é™·é˜±éƒ½éœ€ç§¯ç´¯ä¸‹æ¥ï¼Œé¿å…é‡å¤æ€§èŒƒé”™ã€‚</div><div class="line">6ã€è®¡åˆ’æ€§å’Œæ‰§è¡ŒåŠ›ï¼›å·¥ä½œæœ‰è®¡åˆ’ï¼Œè®¡åˆ’åæƒ³æ³•è®¾æ³•è¾¾åˆ°ç›®æ ‡ï¼Œä¸æ‰¾å€Ÿå£ã€‚</div><div class="line">7ã€è‡ªåŠ¨åŒ–è¿ç»´ï¼›èƒ½å¯¹æ—¥å¸¸æœºæ¢°åŒ–å·¥ä½œè¿›è¡Œæç‚¼ã€è®¾è®¡å¹¶å¼€å‘æˆå·¥å…·ã€ç³»ç»Ÿï¼Œèƒ½è®©ç³»ç»Ÿè‡ªåŠ¨å®Œæˆçš„å°½é‡ä¾é ç³»ç»Ÿï¼›è®©å¤§å®¶æ›´å¤šçš„æ—¶é—´ç”¨äºæ€è€ƒã€åˆ›æ–°æ€ç»´ã€åšè‡ªå·²å–œæ¬¢çš„äº‹æƒ…ã€‚</div><div class="line">ä»¥ä¸Šåªæ˜¯æŠ€æœ¯ä¸Šçš„ä¸€äº›å±‚é¢ï¼Œå½“ç„¶ä¸ªäººæ„è¯†ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚</div><div class="line">å››ã€è¿ç»´èŒä¸šçš„è¿·æƒ˜ã€ç°çŠ¶ä¸å‘å±•å‰æ™¯</div><div class="line">è¿ç»´å²—ä½ä¸åƒå…¶å®ƒå²—ä½ï¼Œå¦‚ç ”å‘å·¥ç¨‹å¸ˆã€æµ‹è¯•å·¥ç¨‹å¸ˆç­‰ï¼Œæœ‰éå¸¸æ˜ç¡®çš„èŒè´£å®šä½åŠèŒä¸šè§„åˆ’ï¼Œæ¯”è¾ƒæœ‰èŒä¸šè®¤åŒæ„Ÿä¸æˆå°±æ„Ÿï¼›è€Œè¿ç»´å·¥ä½œå¯èƒ½ç»™äººçš„æ„Ÿè§‰æ˜¯å“ªæ–¹é¢éƒ½äº†</div><div class="line">è§£</div><div class="line">ä¸€äº›ï¼Œä½†åˆéƒ½æ¯”ä¸Šä¸“èŒå·¥ç¨‹å¸ˆæ›´ç²¾é€šã€æ„Ÿè§‰å¹³æ—¶è¢«å…³æ³¨åº¦æ¯”è¾ƒä½ï¼ˆé™¤éçº¿ä¸Šå‡ºç°æ•…éšœï¼‰ï¼Œæ…¢æ…¢çš„å¤§å®¶å°±ä¼šè¿·æƒ˜ï¼Œå¯¹èŒä¸šå‘å±•äº§ç”Ÿå›°æƒ‘,ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§ç°è±¡å‘¢ï¼Ÿé™¤äº†</div><div class="line">èŒä¸šæœ¬èº«ç‰¹ç‚¹å¤–ï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºå¯¹è¿ç»´äº†è§£ä¸æ·±å…¥ã€åšå¾—ä¸æ·±å…¥å¯¼è‡´ï¼›å…¶å®è¿™ä¸ªé—®é¢˜å…¶å®ƒå²—ä½ä¹Ÿä¼šå‡ºç°ï¼Œä½†æˆ‘å‘ç°è¿ç»´æ›´å…¸å‹ï¼Œæ›´å®¹æ˜“å‡ºç°è¿™ä¸ªé—®é¢˜ï¼›</div><div class="line">é’ˆå¯¹è¿™ä¸ªé—®é¢˜æˆ‘è°ˆä¸€ä¸‹ç½‘ç«™è¿ç»´çš„ç°çŠ¶åŠå‘å±•å‰æ™¯ï¼ˆä¹Ÿåœ¨æ€è€ƒä¸­ï¼Œå¯èƒ½ä¸å¤ªæ·±å…¥å…¨é¢ï¼Œä¹Ÿè¯·å¤§å®¶æ–§æ­£è¡¥å……ï¼‰</div><div class="line">è¿ç»´ç°çŠ¶ï¼š</div><div class="line">1ã€å¤„äºåˆšèµ·æ­¥çš„åˆçº§é˜¶æ®µï¼Œå„å¤§å…¬å¸æœ‰æ­¤ä¸“èŒï¼Œä½†é‡è§†æˆ–é‡è¦ç¨‹åº¦ä¸é«˜ï¼Œå¯æ›¿ä»£æ€§å¼ºï¼›å°å…¬å¸æ›´å¤šæ˜¯ç”±å…¶å®ƒå²—ä½æ¥å…¼é¡¾åšè¿™ä¸€å—å·¥ä½œï¼Œæ²¡æœ‰ä¸“èŒï¼Œä¹Ÿä¸å¯èƒ½åšå¾—æ·±å…¥ã€‚</div><div class="line">2ã€æŠ€æœ¯å±‚æ¬¡æ¯”è¾ƒä½ï¼›ä¸»è¦å¤„äºæŠ€æœ¯æ¢ç´¢ã€ç§¯ç´¯é˜¶æ®µï¼Œæ²¡æœ‰å‹æˆä½“ç³»åŒ–çš„ç†å¿µã€æŠ€æœ¯ã€‚</div><div class="line">3ã€ä½“åŠ›åŠ³åŠ¨åå¤§ï¼›è¿™ä¸ªé—®é¢˜ä¸»è¦ä¸ç¬¬äºŒç‚¹æœ‰å…³ç³»ï¼Œå¾ˆå¤šäº‹æƒ…è¿˜æ˜¯ä¾é äººåŠ›è¿›è¡Œï¼Œæ²¡æœ‰å®Œæˆå¥½çš„æç»ƒï¼Œå¯¹äºå¤§è§„æ¨¡é›†ç¾¤æ²¡æœ‰æˆç†Ÿçš„è‡ªåŠ¨åŒ–ç®¡ç†æ–¹æ³•ï¼Œåœ¨æ­¤è¯´æ˜ä¸€ä¸‹ï¼Œå¤§è§„æ¨¡é›†ç¾¤ä¸è¿ç»´å·¥ä½œæ˜¯æ¯æ¯ç›¸å…³çš„å¦‚æœåªæ˜¯ç™¾åæ¥å°æœºå™¨ï¼Œé‚£å°±æ²¡æœ‰è¿ç»´å¤ªå¤§çš„ç”Ÿå­˜ç©ºé—´äº†ã€‚</div><div class="line">4ã€ä¼˜ç§€è¿ç»´äººæ‰çš„æåº¦ç¼ºä¹ï¼›ç›®å‰å„å¤§å…¬å¸åŸºæœ¬ä¸Šéƒ½é è‡ªå·²åŸ¹å…»ï¼Œè¿™ä¸ªç°çŠ¶å¯¼è‡´è¡Œä¸šå†…è¿ç»´äººæ‰çš„æµåŠ¨æ€§éå¸¸ä½ï¼Œéå¸¸å¤šå¥½çš„æŠ€æœ¯éƒ½å±€é™åœ¨å„å¤§å…¬å¸å†…éƒ¨ï¼Œ</div><div class="line">å¦‚ google 50ä¸‡å°æœºå™¨ç§‘å­¦çš„ç®¡ç†,æˆ–è€…å›½å†…äº’è”å…¬å¸top 10</div><div class="line">çš„ä¸€äº›è¿ç»´ç»éªŒï¼Œè¿™äº›ç»éªŒæ˜¯éå¸¸æœ‰ä»·å€¼çš„ä¸œè¥¿å¹¶å†³å®šäº†ä¸€ä¸ªå…¬å¸çš„æ ¸å¿ƒç«äº‰åŠ›ï¼›è¿™äº›é—®é¢˜è¿›è€Œå¯¼è‡´ä¸šå†…å…ˆè¿›è¿ç»´æŠ€æœ¯çš„æµé€šã€è´¯é€šã€ä¸å€Ÿç­¾ï¼Œå¹¶æœ€ç»ˆå°†é™åˆ¶äº†è¿ç»´</div><div class="line">å‘å±•ã€‚</div><div class="line">5ã€å¾ˆå¤šä¼˜ç§€çš„è¿ç»´ç»éªŒéƒ½æŒæ¡åœ¨å¤§å…¬å¸æ‰‹ä¸­ï¼›è¿™ä¸åœ¨äºå…¬å¸çš„æŠ€æœ¯å®åŠ›ï¼Œè€Œåœ¨äºå¤§å…¬å¸çš„æŠ€æœ¯è§„æ¨¡ã€æµ·é‡PVã€ç¡¬ä»¶è§„æ¨¡è¶³å¤Ÿå¤§ï¼Œå¦‚baiduå¯æ€•çš„æµ</div><div class="line">é‡ã€ 51.comæµ·é‡æ•°æ®~~~~è¿™äº›å› ç´ å†³å®šäº†ä»–ä»¬é‡åˆ°çš„é—®é¢˜éƒ½æ˜¯å…¶å®ƒä¸­/å°å…¬å¸è¿˜æ²¡æœ‰é‡åˆ°çš„ï¼Œæˆ–å³å°†é‡åˆ°ã€‚ä½†å¤§å…¬å¸å¯èƒ½å·²æœ‰å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆæˆ–ç³»ç»Ÿã€‚</div><div class="line">å‘å±•å‰æ™¯ï¼š</div><div class="line">1ã€ä»è¡Œä¸šè§’åº¦æ¥çœ‹ï¼Œéšç€ä¸­å›½äº’è”ç½‘çš„é«˜é€Ÿå‘å±•ï¼ˆç›®å‰ä¸­å›½ç½‘æ°‘å·²è·ƒå‡ä¸ºå…¨çƒç¬¬ä¸€ï¼‰ã€ç½‘ç«™è§„æ¨¡è¶Šæ¥è¶Šæ¥å¤§ã€æ¶æ„è¶Šæ¥è¶Šå¤æ‚ï¼›å¯¹ä¸“èŒç½‘ç«™è¿ç»´å·¥ç¨‹å¸ˆã€ç½‘ç«™æ¶æ„</div><div class="line">å¸ˆçš„è¦æ±‚ä¼šè¶Šæ¥è¶Šæ€¥è¿«,ç‰¹åˆ«æ˜¯å¯¹æœ‰ç»éªŒçš„ä¼˜ç§€è¿ç»´äººæ‰éœ€æ±‚é‡å¤§ï¼Œè€Œä¸”æ˜¯è¶Šè€è¶Šå€¼é’±ï¼›ç›®å‰å›½å†…åŸºæœ¬ä¸Šéƒ½æ˜¯é€‰æ‹©æ¯•ä¸šç”ŸåŸ¹å…»ï¼ˆé™äºå¤§å…¬å¸ï¼‰ï¼ŒåŸ¹å…»æˆæœ¬é«˜ï¼Œè€Œä¸”æ²¡</div><div class="line">æœ‰ç»éªŒäººæ‰åŠ å…¥ä¼šå¯¼è‡´å…¬å¸æŠ€æœ¯æ›´æ–°ç¼“æ…¢ã€å½±å“å…¬å¸çš„æŠ€æœ¯å‘å±•ï¼›å½“ç„¶ï¼Œæ¯•ä¸šç”Ÿä¹Ÿæœ‰å¥½å¤„ï¼šç™½çº¸ä¸€å¼ ï¼Œå¯å¡‘æ€§å¼ºï¼Œæ¯”è¾ƒè®¤åŒå¹¶å®¹æ˜“èå…¥ä¼ä¸šæ–‡åŒ–ã€‚</div><div class="line">2ã€ä»ä¸ªäººè§’åº¦ï¼Œè¿ç»´å·¥ç¨‹å¸ˆæŠ€æœ¯å«é‡åŠè¦æ±‚ä¼šè¶Šæ¥è¶Šé«˜ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¯¹å…¬å¸åº”ç”¨ã€æ¶æ„æœ€äº†è§£æœ€ç†Ÿæ‚‰çš„äººã€è¶Šæ¥è¶Šå¾—åˆ°é‡è§†ã€‚</div><div class="line">3ã€ç½‘ç«™è¿ç»´å°†æˆä¸ºä¸€ä¸ªèåˆå¤šå­¦ç§‘ï¼ˆç½‘ç»œã€ç³»ç»Ÿã€å¼€å‘ã€å®‰å…¨ã€åº”ç”¨æ¶æ„ã€å­˜å‚¨ç­‰ï¼‰çš„ç»¼åˆæ€§æŠ€æœ¯å²—ä½ï¼Œç»™å¤§å®¶æä¾›ä¸€ä¸ªå¾ˆå¥½çš„ä¸ªäººèƒ½åŠ›ä¸æŠ€æœ¯å¹¿åº¦çš„å‘å±•ç©ºé—´ã€‚</div><div class="line">4ã€è¿ç»´å·¥ä½œçš„ç›¸å…³ç»éªŒå°†ä¼šå˜å¾—éå¸¸é‡è¦ï¼Œè€Œä¸”ä¹Ÿå°†æˆä¸ºä¸ªäººçš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œå…·å¤‡å¾ˆå¥½çš„å„å±‚é¢é—®é¢˜çš„è§£å†³èƒ½åŠ›åŠæ–¹æ¡ˆæä¾›ã€å…¨å±€æ€è€ƒèƒ½åŠ›ç­‰ã€‚</div><div class="line">5ã€ç‰¹é•¿å‘æŒ¥å’Œå…´è¶£çš„åŸ¹å…»ï¼›ç”±äºè¿ç»´å²—ä½æ‰€æ¥è§¦çš„çŸ¥è¯†é¢éå¸¸å¹¿é˜”ï¼Œæ›´å®¹æ˜“åŸ¹å…»æˆ–å‘æŒ¥å‡ºä¸ªäººæŸäº›æ–¹é¢çš„ç‰¹é•¿æˆ–çˆ±å¥½ï¼Œå¦‚å†…æ ¸ã€ç½‘ç»œã€å¼€å‘ã€æ•°æ®åº“ç­‰æ–¹é¢ï¼Œå¯ä»¥åšå¾—éå¸¸æ·±å…¥ç²¾é€šã€æˆä¸ºè¿™æ–¹é¢çš„ä¸“å®¶ã€‚</div><div class="line">6ã€å¦‚æœçœŸè¦ä»¥åä¸æƒ³åšè¿ç»´äº†ï¼Œè½¬åˆ°å…¶å®ƒå²—ä½ä¹Ÿæ¯”è¾ƒå®¹æ˜“ï¼Œä¸ä¼šæœ‰å¤ªå¤§çš„å±€é™æ€§ã€‚å½“ç„¶äº†ï¼Œä½ å¾—çœŸæ­£ç”¨å¿ƒå»åšã€‚</div><div class="line">7ã€æŠ€æœ¯å‘å±•æ–¹å‘ï¼šç½‘ç«™/ç³»ç»Ÿæ¶æ„å¸ˆã€‚</div><div class="line">äº”ã€è¿ç»´å…³é”®æŠ€æœ¯ç‚¹è§£å‰–</div><div class="line">1ã€ å¤§è§„æ¨¡é›†ç¾¤ç®¡ç†é—®é¢˜</div><div class="line">é¦–å…ˆæˆ‘ä»¬å…ˆè¦æ˜ç¡®é›†ç¾¤çš„æ¦‚å¿µï¼Œé›†ç¾¤ä¸æ˜¯æ³›æŒ‡å„åŠŸèƒ½æœåŠ¡å™¨çš„æ€»åˆï¼Œè€Œæ˜¯æŒ‡ä¸ºäº†è¾¾åˆ°æŸä¸€ç›®çš„æˆ–åŠŸèƒ½çš„æœåŠ¡å™¨ã€ç¡¬ç›˜èµ„æºçš„æ•´åˆï¼ˆæœºå™¨æ•°å¤§äºä¸¤å°ï¼‰ï¼Œå¯¹äºåº”ç”¨æ¥è¯´</div><div class="line">å®ƒå°±æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œç›®å‰å¸¸è§„é›†ç¾¤å¯åˆ†ä¸ºï¼šé«˜å¯ç”¨æ€§é›†ç¾¤ï¼ˆHAï¼‰ï¼Œè´Ÿè½½å‡è¡¡é›†ç¾¤ï¼ˆå¦‚lvsï¼‰ï¼Œåˆ†å¸ƒå¼å‚¨ã€è®¡ç®—å­˜å‚¨é›†ç¾¤ï¼ˆDFSï¼Œå¦‚google gfs</div><div class="line">,yahoo</div><div class="line">hadoopï¼‰ï¼Œç‰¹å®šåº”ç”¨é›†ç¾¤ï¼ˆæŸä¸€ç‰¹å®šåŠŸèƒ½æœåŠ¡å™¨ç»„åˆã€å¦‚dbã€cacheå±‚ç­‰ï¼‰ï¼Œç›®å‰äº’è”ç½‘è¡Œä¸šä¸»è¦åŸºäºè¿™å››ç§ç±»å‹ï¼›å¯¹äºå‰ä¸¤ç§ç±»ä¼¼ï¼Œå¦‚æœä¸šåŠ¡ç®€å•ã€</div><div class="line">åº”ç”¨ä¸Špostæ“ä½œæ¯”è¾ƒå°‘ï¼Œå¯ä»¥ç®€å•çš„é‡‡ç”¨å››å±‚äº¤æ¢æœº</div><div class="line">è§£å†³ï¼ˆå¦‚f5ï¼‰ï¼Œè¾¾åˆ°æœåŠ¡é«˜å¯ç”¨/è´Ÿè´£å‡è¡¡çš„ä½œç”¨ï¼Œå¯¹äºèµ„æºç´§å¼ çš„å…¬å¸ä¹Ÿæœ‰ä¸€äº›å¼€æºè§£å†³åŠæ³•å¦‚lvs+ha,éå¸¸çµæ´»ï¼›å¯¹äºåä¸¤ç§ï¼Œé‚£å°±è€ƒéªŒå…¬å¸æŠ€æœ¯å®åŠ›</div><div class="line">åŠåº”ç”¨ç‰¹ç‚¹äº†ï¼Œç¬¬ä¸‰ç§DFSä¸»è¦åº”ç”¨äºæµ·é‡æ•°æ®åº”ç”¨ä¸Šï¼Œå¦‚é‚®ä»¶ã€æœç´¢ç­‰åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯æœç´¢è¦æ±‚å°±æ›´é«˜äº†ï¼Œé™¤äº†ç®€å•æµ·é‡å­˜å‚¨ï¼Œè¿˜åŒ…æ‹¬æ•°æ®æŒ–æ˜ã€ç”¨æˆ·è¡Œä¸ºåˆ†æï¼›</div><div class="line">å¦‚</div><div class="line">googleã€yahooå°±èƒ½ä¿å­˜åˆ†æè¿‘ä¸€å¹´çš„ç”¨æˆ·è®°å½•æ•°æ®ï¼Œè€Œbaiduåº”è¯¥å°‘äº30å¤©ã€soguoå°±æ›´å°‘äº†ã€‚ã€‚ã€‚è¿™äº›å¯¹äºæœç´¢å‡†å¤‡æ€§ã€åŠç”¨æˆ·ä½“éªŒæ˜¯è‡³</div><div class="line">å…³é‡è¦çš„ã€‚</div><div class="line">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†è°ˆè°ˆå¦‚ä½•ç§‘å­¦çš„ç®¡ç†é›†ç¾¤ï¼Œæœ‰ä»¥ä¸‹å…³é”®å‡ ç‚¹ï¼š</div><div class="line">Iã€ç›‘æ§</div><div class="line">ä¸»è¦åŒ…æ‹¬æ•…éšœç›‘æ§å’Œæ€§èƒ½ã€æµé‡ã€è´Ÿè½½ç­‰çŠ¶æ€ç›‘æ§ï¼Œè¿™äº›ç›‘æ§å…³ç³»åˆ°é›†ç¾¤çš„å¥åº·è¿è¡Œï¼ŒåŠæ½œåœ¨é—®é¢˜çš„åŠæ—¶å‘ç°ä¸å¹²é¢„ï¼›</div><div class="line">aã€æœåŠ¡æ•…éšœã€çŠ¶æ€ç›‘æ§ï¼šä¸»è¦æ˜¯å¯¹æœåŠ¡å™¨è‡ªèº«ã€ä¸Šå±‚åº”ç”¨ã€å…³è”æœåŠ¡æ•°æ®äº¤äº’ç›‘æ§ï¼›ä¾‹å¦‚é’ˆå¯¹å‰ç«¯web</div><div class="line">serverï¼Œæˆ‘ä»¬å°±å¯ä»¥æœ‰å¾ˆå¤šç§ç±»å‹çš„ç›‘æ§ï¼ŒåŒ…æ‹¬åº”ç”¨ç«¯å£</div><div class="line">çŠ¶æ€ç›‘æ§ï¼Œä¾¿äºåŠæ—¶å‘ç°æœåŠ¡å™¨æˆ–åº”ç”¨æœ¬èº«æ˜¯å¦crashã€é€šè¿‡icmpåŒ…æ¢æµ‹æœåŠ¡å™¨å¥åº·çŠ¶æ€ï¼Œæ›´ä¸Šå±‚å¯èƒ½è¿˜åŒ…æ‹¬åº”ç”¨å„é¢‘é“ä¸šåŠ¡çš„ç›‘æ§ï¼Œå¸¸ç”¨æ–¹æ³•æ˜¯é‡‡ç”¨é¢ä¸š</div><div class="line">ç‰¹å¾ç è¿›è¡Œåˆ¤æ–­ï¼Œæˆ–å¯¹é‡ç‚¹é¡µé¢è¿›è¡Œç­¾åï¼Œä»¥ç½‘ç«™è¢«é»‘ç¯¡æ”¹ï¼ˆæŠ¥è­¦ã€å¹¶è‡ªåŠ¨æ¢å¤è¢«ç¯¡æ”¹æ•°æ®ï¼‰ç­‰ç­‰ï¼Œè¿™äº›åªæ˜¯ä¸€éƒ¨ä»½ï¼Œè¿˜æœ‰Nå¤šç›‘æ§æ–¹å¼ï¼Œä¾åº”ç”¨ç‰¹ç‚¹è€Œå®šï¼Œè¿˜æœ‰ä¸€</div><div class="line">äº›é—®é¢˜éœ€è§£å†³ï¼Œå¦‚é›†ç¾¤è¿‡å¤§ï¼Œå¦‚ä½•é«˜æ€§èƒ½çš„è¿›è¡Œç›‘æ§ä¹Ÿæ˜¯ä¸€ä¸ªç°å®é—®é¢˜ã€‚</div><div class="line">bã€å…¶å®ƒå°±æ˜¯é›†ç¾¤çŠ¶æ€ç±»çš„ç›‘æ§æˆ–ç»Ÿè®¡ï¼Œä¸ºæˆ‘ä»¬åˆç†ç®¡ç†è°ƒä¼˜é›†ç¾¤æä¾›æ•°æ®å‚è€ƒã€åŒ…æ‹¬æœåŠ¡ç“¶é¢ˆã€æ€§èƒ½é—®é¢˜ã€å¼‚å¸¸æµé‡ã€æ”»å‡»ç­‰é—®é¢˜ã€‚</div><div class="line">IIã€æ•…éšœç®¡ç†</div><div class="line">aã€ç¡¬ä»¶æ•…éšœé—®é¢˜ï¼›å¯¹äºæˆç™¾ä¸Šåƒæˆ–ä¸Šä¸‡æœºå™¨çš„Nå¤š</div><div class="line">é›†ç¾¤ï¼ŒæœåŠ¡å™¨æ­»æœºã€ç¡¬ä»¶æ•…éšœæ¦‚ç‡æ˜¯éå¸¸å¤§çš„ï¼Œå‡ ä¹æ¯æ—¶æ¯åˆ»éƒ½æœ‰æœåŠ¡ç¡¬ä»¶é—®é¢˜ï¼Œæ­»æœºã€ç¡¬ç›˜æŸåã€ç”µæºã€å†…å­˜ã€äº¤æ¢æœºã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åœ¨è®¾è®¡ç½‘ç«™æ¶æ„æ—¶éœ€</div><div class="line">è¦å……åˆ†è€ƒè™‘åˆ°è¿™äº›é—®é¢˜ï¼Œå¹¶å°†å…¶è§†ä¸ºå¸¸æ€ï¼›æ›´å¤šçš„ä¾é åº”ç”¨çš„å†—ä½™æœºåˆ¶æ¥è§„é¿è¿™ç§é£é™©ï¼Œä½†ç»™ç³»ç»Ÿå·¥ç¨‹å¸ˆè¶³å¤Ÿå®½è£•çš„å¤„ç†æ—¶é—´ã€‚ï¼ˆå¦‚googleä¸æ˜¯å·ç§°åŒæ—¶æ­»</div><div class="line">800å°æœºå™¨ï¼ŒæœåŠ¡ä¸ä¼šå—åˆ°ä»»ä½•å½±å“å—ï¼‰ï¼›è¿™å°±æ˜¯è€ƒéªŒè¿ç»´å·¥ç¨‹å¸ˆåŠç½‘ç«™æ¶æ„å¸ˆåŠŸèƒ½çš„åœ°æ–¹äº†ï¼Œå¥½çš„è®¾è®¡èƒ½è¾¾åˆ°googleæ‰€æè¿°è‡ªæ¢å¤èƒ½åŠ›ï¼Œå¦‚gfsï¼Œç³Ÿç³•</div><div class="line">çš„è®¾è®¡é‚£å°±æ˜¯ä¸€å°æœåŠ¡å™¨çš„æ­»æœºå¯èƒ½ä¼šé€ æˆå¤§é¢ç§¯æœåŠ¡çš„è¿é”æ•…éšœåæ˜ ï¼Œç›´æ¥å¯¹ç”¨æˆ·æ‹’ç»å“åº”ã€‚</div><div class="line">bã€åº”ç”¨æ•…éšœé—®é¢˜ï¼›å¯èƒ½æ˜¯æŸä¸€bugè¢«è§¦å‘ã€æˆ–æŸä¸€æ€§èƒ½é˜€å€¼è¢«è¶…è¶Šã€æ”»å‡»ç­‰æƒ…å†µä¸ä¸€è€Œå®šï¼Œä½†é‡è¦çš„ä¸€ç‚¹ï¼Œæ˜¯è¦æœ‰å¯¹è¿™äº›é—®é¢˜çš„é¢„é˜²æ€§æªæ–½ï¼Œä¸èƒ½æƒ³å½“ç„¶ï¼Œå®ƒä¸</div><div class="line">ä¼šå‡ºé—®é¢˜ï¼Œå¦‚çœŸå‡ºé—®é¢˜äº†ï¼Œå¦‚ä½•åº”å¯¹ï¼Ÿè¿™éœ€è¦è¿ç»´å·¥ç¨‹å¸ˆå¹³æ—¶åšè¶³åŠŸå¤«ï¼ŒåŒ…æ‹¬åº”æ€¥å“åº”é€Ÿåº¦ã€æ•…éšœå¤„ç†çš„ç§‘å­¦æ€§ã€å¤‡ç”¨æ–¹æ¡ˆçš„æœ‰æ•ˆç­‰ã€‚</div><div class="line">IIIã€è‡ªåŠ¨åŒ–</div><div class="line">è‡ªåŠ¨åŒ–ï¼šç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å°†æˆ‘ä»¬æ—¥å¸¸æ‰‹åŠ¨è¿›è¡Œçš„ä¸€äº›å·¥ä½œé€šè¿‡å·¥å…·ï¼Œç³»ç»Ÿè‡ªåŠ¨æ¥å®Œæˆï¼Œè§£æ”¾æˆ‘ä»¬çš„åŒæ‰‹åŠæ¯ç‡¥çš„é‡å¤æ€§åŠ³åŠ¨ï¼Œä¾‹å¦‚ï¼šæ²¡æœ‰å·¥å…·å‰ï¼Œæˆ‘ä»¬å®‰è£…ç³»ç»Ÿéœ€è¦</div><div class="line">ä¸€å°ä¸€å°è£¸æœºå®‰è£…ï¼Œå¦‚2000å°ï¼Œå¯èƒ½éœ€è¦10äºº/10å¤©ï¼Œæçƒ‚Nå¼ å…‰ç›˜ï¼ŒäººåŠ›æˆæœ¬æ›´å¤§ã€‚ã€‚ã€‚è€Œç°åœ¨é€šè¿‡è‡ªåŠ¨åŒ–å·¥å…·ï¼Œåªéœ€å‡ ä¸ªç®€å•å‘½ä»¤</div><div class="line">å°±èƒ½æå®šã€è¿˜æœ‰å¦‚æœºå™¨äººç±»ç¨‹åºï¼Œè‡ªåŠ¨å®Œæˆä»¥å¾€æ¯å¤©äººå·¥å¹²é¢„çš„å·¥ä½œï¼Œä½¿å…¶è‡ªåŠ¨å®Œæˆã€æ±‡æŠ¥ç»“æœï¼Œå¹¶å…·å¤‡ä¸€å®šçš„ä¸“å®¶ç³»ç»Ÿèƒ½åŠ›ï¼Œèƒ½åšä¸€äº›ç®€å•çš„æ˜¯/éåˆ¤æ–­ã€ä¼˜åŒ–é€‰</div><div class="line">æ‹©ç­‰ã€‚ã€‚ã€‚è¿™äº›å¥½å¤„éå¸¸æ˜æ˜¾ä¸å†å¤šè¯´ã€‚ã€‚ã€‚åº”è¯¥è¯´ï¼Œè‡ªåŠ¨åŒ–è¿ç»´æ˜¯è¿ç»´å·¥ç¨‹å¸ˆèŒä¸šåŒ–çš„ä¸€ä¸ªè¿½æ±‚ï¼Œåˆ©å·²åˆ©å…¬ï¼Œè™½ç„¶è¿™æ˜¯ä¸€ä¸ªå¼‚å¸¸è‰°å·¨çš„ä»»åŠ¡ï¼šä¸æ–­å˜æ›´çš„ä¸šåŠ¡ã€ä¸</div><div class="line">è§„èŒƒåŒ–çš„åº”ç”¨è®¾è®¡ã€å¼€å‘æ¨¡å¼ã€ç½‘ç»œæ¶æ„å˜æ›´ã€IDCå˜æ›´ã€è§„èŒƒå˜åŠ¨ç­‰å› ç´ ï¼Œéƒ½å¯èƒ½ä¼šå¯¹ç°æœ‰è‡ªåŠ¨åŒ–ç³»ç»Ÿäº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥éœ€è¦æ¨¡å—åŒ–ã€æ¥å£åŒ–ã€å˜å› å‚æ•°åŒ–ç­‰å› </div><div class="line">æ­¤ï¼Œè‡ªåŠ¨åŒ–ç›¸å…³å·¥ä½œï¼Œæ˜¯è¿ç»´å·¥ç¨‹å¸ˆçš„æ ¸å¿ƒé‡ç‚¹å·¥ä½œä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ä»·å€¼çš„ä½“ç°ã€‚</div></pre></td></tr></table></figure>
<h3 id="äº¤æµå­¦ä¹ ï¼š"><a href="#äº¤æµå­¦ä¹ ï¼š" class="headerlink" title="äº¤æµå­¦ä¹ ï¼š"></a>äº¤æµå­¦ä¹ ï¼š</h3><p>ğŸ§  Linux shell_é«˜çº§è¿ç»´æ´¾: <code>459096184</code>    åœˆå­ (ç³»ç»Ÿè¿ç»´-åº”ç”¨è¿ç»´-è‡ªåŠ¨åŒ–è¿ç»´-è™šæ‹ŸåŒ–æŠ€æœ¯ç ”ç©¶æ¬¢è¿åŠ å…¥)<br>ğŸ§  BigData-Exchange School : <code>521621407</code>  åœˆå­ï¼ˆå¤§æ•°æ®è¿ç»´)ï¼ˆHadoopå¼€å‘äººå‘˜)ï¼ˆå¤§æ•°æ®ç ”ç©¶çˆ±å¥½è€…) æ¬¢è¿åŠ å…¥</p>
<p>ç›¸åº”Bidataæœ‰å†…éƒ¨å¾®ä¿¡äº¤æµç¾¤äº’ç›¸å­¦ä¹ ï¼ŒåŠ å…¥QQç¾¤æœ‰é“¾æ¥ã€‚</p>

	

	

</article>





	<span class="different-posts">ğŸ“– <a href="/page/8">more posts</a> ğŸ“–</span>



	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2018 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
