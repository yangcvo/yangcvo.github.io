<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>äº†è§£Cactiç›‘æ§å®‰è£…ä¸é…ç½®.md | Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		<article>
	
		<h1>äº†è§£Cactiç›‘æ§å®‰è£…ä¸é…ç½®.md</h1>
	
	<div class="article__infos">
		<span class="article__date">2014-10-21</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/monitoring/">monitoring</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Cacti-monitoring/">Cacti monitoring</a>
			</span>
		
	</div>

	

	
		<h3 id="ä»€ä¹ˆæ˜¯Cacti"><a href="#ä»€ä¹ˆæ˜¯Cacti" class="headerlink" title="ä»€ä¹ˆæ˜¯Cacti?"></a>ä»€ä¹ˆæ˜¯Cacti?</h3><p>Cactiï¼Œ åœ¨è‹±æ–‡ä¸­çš„æ„æ€æ˜¯ä»™äººæŒçš„æ„æ€ï¼ŒCactiæ˜¯ä¸€å¥—åŸºäºPHP,MySQL,SNMPåŠRRDToolå¼€å‘çš„ç½‘ç»œæµé‡ç›‘æµ‹å›¾å½¢åˆ†æå·¥å…·ã€‚å®ƒé€šè¿‡snmpgetæ¥è·å–æ•°æ®ï¼Œä½¿ç”¨ RRDtoolç»˜ç”»å›¾å½¢ï¼Œè€Œä¸”ä½ å®Œå…¨å¯ä»¥ä¸éœ€è¦äº†è§£RRDtoolå¤æ‚çš„å‚æ•°ã€‚å®ƒæä¾›äº†éå¸¸å¼ºå¤§çš„æ•°æ®å’Œç”¨æˆ·ç®¡ç†åŠŸèƒ½ï¼Œå¯ä»¥æŒ‡å®šæ¯ä¸€ä¸ªç”¨æˆ·èƒ½æŸ¥çœ‹æ ‘çŠ¶ç»“æ„ã€hostä»¥åŠä»»ä½•ä¸€å¼ å›¾ï¼Œè¿˜å¯ä»¥ä¸LDAPç»“åˆè¿›è¡Œç”¨æˆ·éªŒè¯ï¼ŒåŒæ—¶ä¹Ÿèƒ½è‡ªå·±å¢åŠ æ¨¡æ¿ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§å®Œå–„ã€‚Cacti çš„å‘å±•æ˜¯åŸºäºè®© RRDTool ä½¿ç”¨è€…æ›´æ–¹ä¾¿ä½¿ç”¨è¯¥è½¯ä»¶ï¼Œé™¤äº†åŸºæœ¬çš„ Snmp æµé‡è·Ÿç³»ç»Ÿèµ„è®¯ç›‘æ§å¤–ï¼ŒCacti ä¹Ÿå¯å¤–æŒ‚ Scripts åŠåŠ ä¸Š Templates æ¥ä½œå‡ºå„å¼å„æ ·çš„ç›‘æ§å›¾ã€‚</p>
<p>Cactiæ˜¯ç”¨phpè¯­è¨€å®ç°çš„ä¸€ä¸ªè½¯ä»¶ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯ç”¨snmpæœåŠ¡è·å–æ•°æ®ï¼Œç„¶åç”¨rrdtoolå‚¨å­˜å’Œæ›´æ–°æ•°æ®ï¼Œå½“ç”¨æˆ·éœ€è¦æŸ¥çœ‹æ•°æ®çš„æ—¶å€™ç”¨rrdtoolç”Ÿæˆå›¾è¡¨å‘ˆç°ç»™ç”¨æˆ·ã€‚å› æ­¤ï¼Œsnmpå’Œrrdtoolæ˜¯cactiçš„å…³é”®ã€‚Snmpå…³ç³»ç€æ•°æ®çš„æ”¶é›†ï¼Œrrdtoolå…³ç³»ç€æ•°æ®å­˜å‚¨å’Œå›¾è¡¨çš„ç”Ÿæˆã€‚</p>
<p>Mysqlé…åˆPHPç¨‹åºå­˜å‚¨ä¸€äº›å˜é‡æ•°æ®å¹¶å¯¹å˜é‡æ•°æ®è¿›è¡Œè°ƒç”¨ï¼Œå¦‚ï¼šä¸»æœºåã€ä¸»æœºipã€snmpå›¢ä½“åã€ç«¯å£å·ã€æ¨¡æ¿ä¿¡æ¯ç­‰å˜é‡ã€‚</p>
<p>snmpæŠ“åˆ°æ•°æ®ä¸æ˜¯å­˜å‚¨åœ¨mysqlä¸­ï¼Œè€Œæ˜¯å­˜åœ¨rrdtoolç”Ÿæˆçš„rrdæ–‡ä»¶ä¸­ï¼ˆåœ¨cactiæ ¹ç›®å½•çš„rraæ–‡ä»¶å¤¹ä¸‹ï¼‰ã€‚rrdtoolå¯¹æ•°æ®çš„æ›´æ–°å’Œå­˜å‚¨å°±æ˜¯å¯¹rrdæ–‡ä»¶çš„å¤„ç†ï¼Œrrdæ–‡ä»¶æ˜¯å¤§å°å›ºå®šçš„æ¡£æ¡ˆæ–‡ä»¶ï¼ˆRound Robin Archiveï¼‰ï¼Œå®ƒèƒ½å¤Ÿå­˜å‚¨çš„æ•°æ®ç¬”æ•°åœ¨åˆ›å»ºæ—¶å°±å·²ç»å®šä¹‰ã€‚å…³äºRRDToolçš„çŸ¥è¯†è¯·å‚é˜…RRDToolæ•™å­¦ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯SNMPï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯SNMPï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯SNMPï¼Ÿ"></a>ä»€ä¹ˆæ˜¯SNMPï¼Ÿ</h3><p>snmp(Simple Network Management Protocal, ç®€å•ç½‘ç»œç®¡ç†åè®®)åœ¨æ¶æ„ä½“ç³»çš„ç›‘æ§å­ç³»ç»Ÿä¸­å°†æ‰®æ¼”é‡è¦è§’è‰²ã€‚å¤§ä½“ä¸Šï¼Œå…¶åŸºæœ¬åŸç†æ˜¯ï¼Œåœ¨æ¯ä¸€ä¸ªè¢«ç›‘æ§çš„ä¸»æœºæˆ–èŠ‚ç‚¹ä¸Š (å¦‚äº¤æ¢æœº)éƒ½è¿è¡Œäº†ä¸€ä¸ª agentï¼Œç”¨æ¥æ”¶é›†è¿™ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰ç›¸å…³çš„ä¿¡æ¯ï¼ŒåŒæ—¶ç›‘å¬ snmp çš„ portï¼Œä¹Ÿå°±æ˜¯ UDP 161ï¼Œå¹¶ä»è¿™ä¸ªç«¯å£æ¥æ”¶æ¥è‡ªç›‘æ§ä¸»æœºçš„æŒ‡ä»¤(æŸ¥è¯¢å’Œè®¾ç½®)ã€‚</p>
<p>å¦‚æœå®‰è£… net-snmpï¼Œè¢«ç›‘æ§ä¸»æœºéœ€è¦å®‰è£… <code>net-snmp(åŒ…å«äº† snmpd è¿™ä¸ª agent)</code>ï¼Œè€Œç›‘æ§ç«¯éœ€è¦å®‰è£… net-snmp-utilsï¼Œè‹¥æ¥å—è¢«ç›‘æ§ç«¯é€šè¿‡trap-communicateå‘æ¥çš„ä¿¡æ¯çš„è¯ï¼Œåˆ™éœ€è¦å®‰è£…net-snmpï¼Œå¹¶å¯ç”¨trapæœåŠ¡ã€‚å¦‚æœè‡ªè¡Œç¼–è¯‘ï¼Œéœ€è¦ beecrypt(libbeecrypt)å’Œ elf(libraryelf)çš„åº“ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯RRDtoolsï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯RRDtoolsï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯RRDtoolsï¼Ÿ"></a>ä»€ä¹ˆæ˜¯RRDtoolsï¼Ÿ</h3><p>RRDtoolæ˜¯æŒ‡Round Robin Database å·¥å…·ï¼ˆç¯çŠ¶æ•°æ®åº“ï¼‰ã€‚Round robinæ˜¯ä¸€ç§å¤„ç†å®šé‡æ•°æ®ã€ä»¥åŠå½“å‰å…ƒç´ æŒ‡é’ˆçš„æŠ€æœ¯ã€‚æƒ³è±¡ä¸€ä¸ªå‘¨è¾¹æ ‡æœ‰ç‚¹çš„åœ†ç¯ï¼ï¼è¿™äº›ç‚¹å°±æ˜¯æ—¶é—´å­˜å‚¨çš„ä½ç½®ã€‚ä»åœ†å¿ƒç”»ä¸€æ¡åˆ°åœ†å‘¨çš„æŸä¸ªç‚¹çš„ç®­å¤´ï¼ï¼è¿™å°±æ˜¯æŒ‡é’ˆã€‚å°±åƒæˆ‘ä»¬åœ¨ä¸€ä¸ªåœ†ç¯ä¸Šä¸€æ ·ï¼Œæ²¡æœ‰èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œä½ å¯ä»¥ä¸€ç›´å¾€ä¸‹èµ°ä¸‹å»ã€‚è¿‡æ¥ä¸€æ®µæ—¶é—´ï¼Œæ‰€æœ‰å¯ç”¨çš„ä½ç½®éƒ½ä¼šè¢«ç”¨è¿‡ï¼Œè¯¥å¾ªç¯è¿‡ç¨‹ä¼šè‡ªåŠ¨é‡ç”¨åŸæ¥çš„ä½ç½®ã€‚è¿™æ ·ï¼Œæ•°æ®é›†ä¸ä¼šå¢å¤§ï¼Œå¹¶ä¸”ä¸éœ€è¦ç»´æŠ¤ã€‚RRDtoolå¤„ç†RRDæ•°æ®åº“ã€‚å®ƒç”¨å‘RRDæ•°æ®åº“å­˜å‚¨æ•°æ®ã€ä»RRDæ•°æ®åº“ä¸­æå–æ•°æ®ã€‚</p>
<p>Cactiæ˜¯åŸºäºnginxï¼Œrrdtoolï¼Œmysqlï¼Œphpï¼Œsnmpæ¥è¿è¡Œçš„.</p>
<blockquote>
<p>1.å®‰è£…æ“ä½œç³»ç»Ÿcentos6.0ä»¥ä¸Šç‰ˆæœ¬</p>
<p>2.é…ç½®å¥½ç½‘ç»œIPå’ŒDNS</p>
<p>3.ä¿®æ”¹ç³»ç»Ÿæ—¶åŒºå’Œæ—¶é—´ï¼Œä½¿ç”¨ä¸Šæµ·æ—¶åŒº</p>
</blockquote>
<p>å¤‡ä»½åŸæœ‰çš„æ—¶åŒºæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp /etc/localtime /etc/localtime.bak</div></pre></td></tr></table></figure>
<p>ç”¨ä¸Šæµ·æ—¶åŒºæ–‡ä»¶æ›¿æ¢ç³»ç»Ÿæ—¶åŒºæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹/etc/sysconfig/clockæ–‡ä»¶ï¼Œä¿®æ”¹ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ZONE=<span class="string">"Asia/Shanghai"</span></div><div class="line">UTC=<span class="literal">false</span></div><div class="line">ARC=<span class="literal">false</span></div></pre></td></tr></table></figure>
<p>åŒæ­¥æ—¶é—´</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ntpdate <span class="selector-tag">time</span><span class="selector-class">.nist</span><span class="selector-class">.gov</span></div></pre></td></tr></table></figure>
<p>4.å®‰è£…epelæº</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -Uvh http://mirrors.sohu.com/fedora-epel/6/x86_64/epel-release-6-8.noarch.rpm</div></pre></td></tr></table></figure>
<p>5.å®‰è£…åŸºç¡€æ”¯æŒè½¯ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install -y openssh-clients telnet wget nginx php-cgi php-cli spawn-fcgi mysql-servermysql rrdtoolnet-snmp net-snmp-utils net-snmp-devel php-mysql php-snmp</div></pre></td></tr></table></figure>
<p>6.é…ç½®PHPç®¡ç†å™¨</p>
<p>ï¼ˆ1ï¼‰cd /etc/sysconfig è¿›å…¥sysconfigæ–‡ä»¶å¤¹</p>
<p>ï¼ˆ2ï¼‰vi spawn-fcgi åœ¨æ–‡ä»¶æ”¹ä½ç½®æ·»åŠ å¦‚ä¸‹å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#SOCKET=/var/run/php-fcgi.sock</span></div><div class="line"><span class="comment">#OPTIONS="-u apache -g apache -s $SOCKET -S -M 0600 -C 32 -F 1 -P /var/run/spawn-fcgi.pid -- /usr/bin/php-cgi"</span></div><div class="line"> SOCKET=/var/run/php-fcgi.sock</div><div class="line"> OPTIONS=<span class="string">"-u nginx -g nginx -s <span class="variable">$SOCKET</span> -S -M 0600 -C 32 -F 1 -P /var/run/spawn-fcgi.pid -- /usr/bin/php-cgi"</span></div></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰/etc/init.d/spawn-fcgi restart é‡å¯phpç®¡ç†å™¨</p>
<p>ï¼ˆ4ï¼‰chkconfig spawn-fcgi on è®¾ç½®å¼€æœºå¯åŠ¨æœåŠ¡</p>
<p>7.è¡¥å……åˆ›å»º/var/lib/phpä¸‹ session ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir -p /var/lib/php/session</div><div class="line">chown -R nginx.nginx /var/lib/php/session</div><div class="line">chmod 777 /var/lib/php/session</div></pre></td></tr></table></figure>
<p>8.ä¿®æ”¹PHPæ–‡ä»¶é…ç½®</p>
<p>vi /etc/php.ini</p>
<p>ï¼ˆ1ï¼‰ä¿®æ”¹PHPæ—¶åŒºä¸ºAsia/ShangHaiï¼Œåœ¨æ–‡ä»¶å¦‚ä¸‹ä½ç½®æ·»åŠ è¯¥å¥å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">;;;;;;;;;;;;;;;;;;;</div><div class="line">; Module Settings ;</div><div class="line">;;;;;;;;;;;;;;;;;;;</div><div class="line">[Date]</div><div class="line">; Defines the default timezone used by the date <span class="built_in">functions</span></div><div class="line">; http://www.php.net/manual/en/datetime.configuration.php<span class="comment">#ini.date.timezone</span></div><div class="line">;date.timezone =</div><div class="line">date.timezone = Asia/Shanghai</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰ä¿®æ”¹PHPè°ƒç”¨å†…å­˜é™åˆ¶ï¼Œåœ¨æ–‡ä»¶å¦‚ä¸‹ä½ç½®ä¿®æ”¹å¦‚ä¸‹æ·»åŠ ï¼š</p>
<p><code>date.timezone = Asia/Shanghai   memory_limit = 512M</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">;;;;;;;;;;;;;;;;;;;</div><div class="line">; Resource Limits ;</div><div class="line">;;;;;;;;;;;;;;;;;;;</div><div class="line">; Maximum execution time of each script, <span class="keyword">in</span> seconds</div><div class="line">; http://www.php.net/manual/en/info.configuration.php<span class="comment">#ini.max-execution-time</span></div><div class="line">max_execution_time = 30</div><div class="line">; Maximum amount of time each script may spend parsing request data. It<span class="string">'s a good</span></div><div class="line">; idea to limit this time on productions servers in order to eliminate unexpectedly</div><div class="line">; long running scripts.</div><div class="line">; Default Value: -1 (Unlimited)</div><div class="line">; Development Value: 60 (60 seconds)</div><div class="line">; Production Value: 60 (60 seconds)</div><div class="line">; http://www.php.net/manual/en/info.configuration.php#ini.max-input-time</div><div class="line">max_input_time = 60</div><div class="line">; Maximum input variable nesting level</div><div class="line">; http://www.php.net/manual/en/info.configuration.php#ini.max-input-nesting-level</div><div class="line">;max_input_nesting_level = 64</div><div class="line">; Maximum amount of memory a script may consume (128MB)</div><div class="line">; http://www.php.net/manual/en/ini.core.php#ini.memory-limit</div><div class="line">#memory_limit = 128M</div><div class="line">memory_limit = 512M</div></pre></td></tr></table></figure>
<p>10.ä¿®æ”¹nginxé…ç½®æ–‡ä»¶å¢åŠ å¯¹cactiçš„æ”¯æŒï¼ˆå¯¹åº”è‡ªå·±çš„nginxå®‰è£…ç›®å½•ï¼‰<br>vi /usr/local/nginx/conf.d/nginx.confåœ¨æ–‡ä»¶æœ«å°¾å¤§æ‹¬å·å†…æ·»åŠ å¦‚ä¸‹é…ç½®<br>          server {<br>          listen 8080;<br>          server_name 127.0.0.1;<br>          root html;<br>          index index.html index.php;</p>
<pre><code>   location ~ \.php$ {
   root html;
   fastcgi_buffer_size 128k;
   fastcgi_buffers 8 128k;
   fastcgi_pass unix:/var/run/php-fcgi.sock;
   fastcgi_index index.php;
   fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
  #fastcgi_param SCRIPT_FILENAME /usr/local/nginx/html/$fastcgi_script_name;
  include fastcgi_params;
  }
       }
chkconfig nginx on è®¾ç½®nginxå¼€æœºå¯åŠ¨
service nginx restarté‡å¯nginxæœåŠ¡
</code></pre><p>11.å®‰è£…catic</p>
<p>caticæ˜¯æ— éœ€ç¼–è¯‘å®‰è£…çš„ï¼Œç›´æ¥ä¸‹è½½å…¶æºåŒ…è§£å‹å³å¯ä½¿ç”¨<br>ï¼ˆ1ï¼‰ä¸‹è½½cacti</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /tmp</div><div class="line">wget http://www.cacti.net/downloads/cacti-0.8.8b.tar.gz</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰è§£å‹cacti</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tar zxvf cacti-0.8.8b.tar.gz</div><div class="line">mv cacti-0.8.8b /usr/<span class="built_in">local</span>/nginx/html <span class="comment">#å°†è§£å‹å‡ºçš„cactiæ–‡ä»¶å¤¹ç§»åŠ¨åˆ°nginxçš„</span></div></pre></td></tr></table></figure>
<p>webç›®å½•ä¸‹ï¼ˆå¯¹åº”è‡ªå·±å®‰è£…çš„nginxï¼‰</p>
<p>ï¼ˆ3ï¼‰ä¿®æ”¹cactiçš„ä½¿ç”¨è€…å’Œç»„æƒé™ä¸ºnginxç”¨æˆ·å’Œnginxç»„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/html</div><div class="line">chown -R nginx:nginx cacti/</div></pre></td></tr></table></figure>
<p>12.åˆ›å»ºæ•°æ®åº“ï¼Œå­˜å‚¨cactiæ•°æ®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">å¯åŠ¨mysql</div><div class="line">/etc/init.d/mysqld start</div><div class="line">chkconfig mysqld on</div></pre></td></tr></table></figure>
<p>ï¼ˆ1ï¼‰ä½¿ç”¨rootè´¦æˆ·ç™»å½•mysql</p>
<pre><code>mysql -uroot
</code></pre><p>ï¼ˆ2ï¼‰åˆ›å»ºcactiæ•°æ®åº“è¡¨</p>
<pre><code>create database cacti;
</code></pre><p>ï¼ˆ3ï¼‰å»ºç«‹ç”¨æˆ·cactiï¼Œå¯†ç cacti123(å¯è‡ªè¡Œå®šä¹‰)</p>
<pre><code>mysql&gt; insert into mysql.user(host,user,password) values (&apos;localhost&apos;,&apos;cacti&apos;,password(&apos;cacti123&apos;));
</code></pre><p>ï¼ˆ4ï¼‰é‡è½½mysqlæˆæƒè¡¨</p>
<pre><code>mysql&gt; flush privileges;
</code></pre><p>ï¼ˆ5ï¼‰ æŠŠæ•°æ®åº“cactiæˆæƒäºç”¨æˆ·cacti</p>
<pre><code>mysql&gt; grant all on cacti.* to cacti@&apos;localhost&apos; identified by &apos;cacti123&apos;;
mysql&gt; quit
</code></pre><p>ï¼ˆ6ï¼‰å°†cactiæ•°æ®åº“ä¸mysqlä¸­çš„æ•°æ®å¯¹åº”èµ·æ¥</p>
<pre><code>cd /usr/local/nginx/html/cacti
mysql -ucacti -pcacti123 cacti&lt;cacti.sql
</code></pre><h3 id="13-ä¿®æ”¹CACTIé…ç½®æ–‡ä»¶"><a href="#13-ä¿®æ”¹CACTIé…ç½®æ–‡ä»¶" class="headerlink" title="13.ä¿®æ”¹CACTIé…ç½®æ–‡ä»¶"></a>13.ä¿®æ”¹CACTIé…ç½®æ–‡ä»¶</h3><p> (1) åˆ‡æ¢è‡³cactiä¸‹çš„includeç›®å½•ï¼ˆå¯¹åº”è‡ªå·±å®‰è£…çš„nginxï¼‰</p>
<pre><code>cd /usr/local/nginx/html/cacti/include/
</code></pre><p> (2)ç¼–è¾‘config.phpæ–‡ä»¶ï¼Œä¿®æ”¹å¦‚ä¸‹ä½ç½®çš„é…ç½®</p>
<pre><code>vi config.php
</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/* make sure these values refect your actual database/host/user/password */</div><div class="line"><span class="variable">$database_type</span> = <span class="string">"mysql"</span>;</div><div class="line"><span class="variable">$database_default</span> = <span class="string">"cacti"</span>;<span class="comment">#mysqlæ•°æ®åº“é‡Œæ‰€åˆ›å»ºçš„è¡¨å</span></div><div class="line"><span class="variable">$database_hostname</span> = <span class="string">"127.0.0.1"</span>;</div><div class="line"><span class="variable">$database_username</span> = <span class="string">"cacti"</span>;<span class="comment">#mysqlæ•°æ®åº“é‡Œä¸ºcactiæ•°æ®è¡¨æ‰€åˆ›å»ºçš„ç”¨æˆ·å</span></div><div class="line"><span class="variable">$database_password</span> = <span class="string">"cacti123"</span>;<span class="comment">#mysqlæ•°æ®åº“é‡Œä¸ºcactiæ•°æ®è¡¨æ‰€åˆ›å»ºçš„å¯†ç </span></div><div class="line"><span class="variable">$database_port</span> = <span class="string">"3306"</span>;</div><div class="line"><span class="variable">$database_ssl</span> = <span class="literal">false</span>;</div></pre></td></tr></table></figure>
<p>14.é…ç½®cactiçš„å¾ªç¯ä»»åŠ¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">crontab <span class="_">-e</span></div><div class="line">*/5 * * * * php /usr/<span class="built_in">local</span>/nginx/html/cacti/poller.php &gt; /dev/null 2&gt;&amp;1<span class="comment">#è¯·å¯¹åº”è‡ªå·±çš„nginxå®‰è£…ç›®å½•</span></div></pre></td></tr></table></figure>
<p>:wq ä¿å­˜é€€å‡º</p>
<p>å¯ç›´æ¥å…ˆè¿è¡Œä¸€éphp /usr/local/nginx/html/cacti/poller.php å¥½è®©cactiäº§ç”Ÿå›¾ç‰‡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">php /usr/share/nginx/html/cacti/poller.php</div></pre></td></tr></table></figure>
<p>15.å®‰è£…å®Œæˆ</p>
<pre><code>ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€å¦‚ä¸‹åœ°å€http://æœ¬æœºIP/cacti/install
</code></pre><p>ä¼šæ˜¾ç¤ºå®‰è£…å‘å¯¼ï¼Œç‚¹å‡»NEXTå³å¯ï¼Œåˆ°ä¸‹é¢å¦‚ä¸‹ç•Œé¢æ˜¯ï¼Œæ³¨æ„æŸ¥çœ‹æ‰€æœ‰çš„æ–‡ä»¶è·¯å¾„æ˜¯å¦éƒ½ä¸ºç»¿è‰²ï¼Œä¸æ˜¯ç»¿è‰²è¯·æ‰¾åˆ°è‡ªå·±å®‰è£…çš„ç›®å½•ï¼Œä¸€ä¸€å¯¹åº”ç‚¹å‡»Finshå³å¯åˆ°è¾¾cactiçš„ç™»é™†ç•Œé¢</p>
<p>è¾“å…¥ç”¨æˆ·åå¯†ç ,<code>cacti</code>é»˜è®¤çš„ç”¨æˆ·åå’Œå¯†ç éƒ½ä¸º<code>admin</code>ï¼Œè¾“å…¥ä¸€æ¬¡åä¼šæç¤ºåœ¨ä¸€æ¬¡è¾“å…¥ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯è®©ä½ è®¾ç½®æ–°çš„adminå¯†ç .ç„¶åå°±èƒ½è¿›å…¥cactiçš„å›¾å½¢ç•Œé¢äº†.</p>
<p>ç‚¹å‡»å·¦ä¸Šè§’graphsï¼Œå°±èƒ½æŸ¥çœ‹æœ¬æœºæ‰€ç›‘æ§çš„æ‰€æœ‰è®¾å¤‡é»˜è®¤å­˜åœ¨ä¸€ä¸ªlocalhostï¼Œç›‘æ§æœ¬æœºçš„å†…å­˜ä½¿ç”¨ï¼Œæ´»åŠ¨ç”¨æˆ·ç­‰ä¿¡æ¯.</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/cacti.png" alt=""></figure></p>

	

	
		<span class="different-posts"><a href="/2014/10/21/æ€§èƒ½ç›‘æ§/cacti/äº†è§£Cactiç›‘æ§å®‰è£…ä¸é…ç½®/" onclick="window.history.go(-1); return false;">â¬…ï¸ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2017 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
