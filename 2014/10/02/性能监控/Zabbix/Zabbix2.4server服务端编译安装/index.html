<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Zabbix2.4serveræœåŠ¡ç«¯ç¼–è¯‘å®‰è£… | Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		<article>
	
		<h1>Zabbix2.4serveræœåŠ¡ç«¯ç¼–è¯‘å®‰è£…</h1>
	
	<div class="article__infos">
		<span class="article__date">2014-10-02</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/monitoring/">monitoring</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Zabbix-monitoring/">Zabbix monitoring</a>
			</span>
		
	</div>

	

	
		<h2 id="ç³»ç»Ÿç¯å¢ƒï¼š"><a href="#ç³»ç»Ÿç¯å¢ƒï¼š" class="headerlink" title="ç³»ç»Ÿç¯å¢ƒï¼š"></a>ç³»ç»Ÿç¯å¢ƒï¼š</h2><ul>
<li>192.168.1.170 MySQLä¸» </li>
<li>192.168.1.183 zabbix-server</li>
</ul>
<p>CentOS Linux release 7.2.1511 (Core)</p>
<ul>
<li>zabbixæºç ä¸‹è½½ : <a href="http://www.zabbix.com/download.php" target="_blank" rel="external">http://www.zabbix.com/download.php</a></li>
<li>ä¾èµ–ä¸‹è½½ï¼šhttps : //github.com/zabbixcn/curl-rpm/tree/master/RPMS</li>
</ul>
<h3 id="ç¬¬ä¸€æ­¥zabbixï¼š"><a href="#ç¬¬ä¸€æ­¥zabbixï¼š" class="headerlink" title="ç¬¬ä¸€æ­¥zabbixï¼š"></a>ç¬¬ä¸€æ­¥zabbixï¼š</h3><p>å…³é—­æœ¬æœºä¸Šçš„selinuxä¸iptablesæœåŠ¡</p>
<p>1ã€å…³é—­SELinux</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#ä¸‹é¢çš„å‘½ä»¤å®ç°æ°¸ä¹…å…³é—­SELinux</span></div><div class="line"> sed -i <span class="string">'s/^SELINUX=.*/#&amp;/;s/^SELINUXTYPE=.*/#&amp;/;/SELINUX=.*/a SELINUX=disabled'</span> /etc/sysconfig/selinux</div><div class="line"><span class="comment">#ä¸‹é¢çš„å‘½ä»¤å®ç°ä¸´æ—¶å…³é—­SELinux</span></div><div class="line"></div><div class="line">/usr/sbin/setenforce 0</div><div class="line">/usr/sbin/setenforce: SELinux is disabled</div></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥è®¾ç½®å¼€æ”¾ç«¯å£å‡ºå»ã€‚</p>
<p>CentOS 7.0é»˜è®¤ä½¿ç”¨çš„æ˜¯firewallä½œä¸ºé˜²ç«å¢™ï¼Œè¿™é‡Œæ”¹ä¸ºiptablesé˜²ç«å¢™ã€‚</p>
<p>firewallï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">systemctl start firewalld.service<span class="comment">#å¯åŠ¨firewall</span></div><div class="line">systemctl stop firewalld.service<span class="comment">#åœæ­¢firewall</span></div><div class="line">systemctl <span class="built_in">disable</span> firewalld.service<span class="comment">#ç¦æ­¢firewallå¼€æœºå¯åŠ¨</span></div></pre></td></tr></table></figure>
<p>CentOS7é»˜è®¤çš„é˜²ç«å¢™ä¸æ˜¯iptables,è€Œæ˜¯firewalle.<br>centos 7 çš„é»˜è®¤æ²¡æœ‰å®‰è£…iptables éœ€è¦å®‰è£…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yum install iptables-services</div><div class="line"><span class="comment">#ä¿å­˜ä¸Šè¿°è§„åˆ™ </span></div><div class="line">service iptables save</div></pre></td></tr></table></figure>
<p>ç­‰ä¼šå†æ·»åŠ ç«¯å£ï¼š10050 ï¼Œ10051 </p>
<p>æ­å»ºLAMPç¯å¢ƒï¼Œæˆ–LNMPç¯å¢ƒ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install mysql-server httpd php â€“y</div></pre></td></tr></table></figure>
<p>å®‰è£…å…¶å®ƒä¾èµ–åŒ…</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install mysql-devel gcc net-snmp-devel curl-devel perl-DBI php-gd php-mysql php-bcmath  php-mbstring php-<span class="keyword">xml</span> <span class="title">â€“y</span>  gcc OpenIPMI-devel net-snmp-devel.x86_64 libxml2-devel mysql-devel</div></pre></td></tr></table></figure>
<p>å¢åŠ zabbixç”¨æˆ·å’Œç»„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">groupadd zabbix</div><div class="line">useradd â€“g zabbix â€“m zabbix</div></pre></td></tr></table></figure>
<h3 id="äºŒã€zabbixè½¯ä»¶åŒ…ä¸‹è½½"><a href="#äºŒã€zabbixè½¯ä»¶åŒ…ä¸‹è½½" class="headerlink" title="äºŒã€zabbixè½¯ä»¶åŒ…ä¸‹è½½"></a>äºŒã€zabbixè½¯ä»¶åŒ…ä¸‹è½½</h3><p>ä¸‹è½½ï¼š <a href="http://jaist.dl.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/2.4.8/" target="_blank" rel="external">http://jaist.dl.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/2.4.8/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">curl -O http://jaist.dl.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/2.4.8/zabbix-2.4.8.tar.gz</div><div class="line">è§£å‹å®‰è£…åŒ…</div><div class="line">tar -zxvf zabbix-2.4.8.tar.gz</div><div class="line">./configure --prefix=/usr/<span class="built_in">local</span>/zabbix --with-mysql --with-net-snmp --with-libcurl --enable-server --enable-agent --enable-proxy</div><div class="line"><span class="comment">#make &amp;&amp; make install</span></div></pre></td></tr></table></figure>
<h3 id="3-é…ç½®æ•°æ®åº“"><a href="#3-é…ç½®æ•°æ®åº“" class="headerlink" title="3.é…ç½®æ•°æ®åº“"></a>3.é…ç½®æ•°æ®åº“</h3><p> ç™»é™†åˆ°192.168.1.170æœåŠ¡å™¨ä¸Šé¢ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># mysql -e "create database zabbix character set utf8 collate  utf8_bin;"   #ä¿®æ”¹æ—¶åŒº</span></div><div class="line"><span class="comment"># mysql -e "grant all privileges on zabbix.* to zabbix@localhost identified by 'zabbix';"  #åˆ›å»ºæ•°æ®åº“å</span></div></pre></td></tr></table></figure>
<p> è¿™é‡Œæˆ‘è®¾ç½®äº†åªèƒ½192.168.1.0ç½‘æ®µå¯ä»¥è®¿é—®æ•°æ®åº“ã€‚<br> æ‰€ä»¥è¿™é‡Œåˆ›å»ºæ•°æ®åº“ç›´æ¥è¿™ä¹ˆæ“ä½œäº†ã€‚</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">[root@mysql ~]<span class="comment"># mysql -uroot -pIhaozhuo_b313 -h 192.168.1.170</span></div><div class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</div><div class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</div><div class="line">Your MySQL connection id is 10</div><div class="line">Server version: 5.6.20-log MySQL Community Server (GPL)</div><div class="line"></div><div class="line">Copyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.</div><div class="line"></div><div class="line">Oracle is a registered trademark of Oracle Corporation and/or its</div><div class="line">affiliates. Other names may be trademarks of their respective</div><div class="line">owners.</div><div class="line"></div><div class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> help. Type <span class="string">'\c'</span> to clear the current input statement.</div><div class="line"></div><div class="line">mysql&gt; create database zabbix character <span class="built_in">set</span> utf8 collate  utf8_bin;</div><div class="line">Query OK, 1 row affected (0.06 sec)</div><div class="line">mysql&gt; GRANT ALL ON zabbix.* TO <span class="string">'zabbix'</span>@<span class="string">'192.168.1.%'</span> IDENTIFIED BY <span class="string">'zabbix123.com'</span>;</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div><div class="line">mysql&gt; flush privileges;</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div></pre></td></tr></table></figure>
<h3 id="å››-å¯¼å…¥æ•°æ®åº“æ–‡ä»¶ï¼š"><a href="#å››-å¯¼å…¥æ•°æ®åº“æ–‡ä»¶ï¼š" class="headerlink" title="å››.å¯¼å…¥æ•°æ®åº“æ–‡ä»¶ï¼š"></a>å››.å¯¼å…¥æ•°æ®åº“æ–‡ä»¶ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /usr/share/doc/zabbix-server-mysql-2.4.8/create</div></pre></td></tr></table></figure>
<p>æ“ä½œä¸‰æ¡å‘½ä»¤æŠŠæ•°æ®å¯¼å…¥åˆ°åœ¨æŒ‡å®šçš„MySQLï¼šzabbix</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql -uzabbix -pzabbix123.com -h 192.168.1.170  zabbix &lt; schema.sql</div><div class="line">mysql -uzabbix -pzabbix123.com -h 192.168.1.170  zabbix &lt; images.sql</div><div class="line">mysql -uzabbix -pzabbix123.com -h 192.168.1.170  zabbix &lt; data.sql</div></pre></td></tr></table></figure>
<h3 id="äº”ã€é…ç½®æ–‡ä»¶åŠwebå‰ç«¯æ–‡ä»¶ä¿®æ”¹"><a href="#äº”ã€é…ç½®æ–‡ä»¶åŠwebå‰ç«¯æ–‡ä»¶ä¿®æ”¹" class="headerlink" title="äº”ã€é…ç½®æ–‡ä»¶åŠwebå‰ç«¯æ–‡ä»¶ä¿®æ”¹"></a>äº”ã€é…ç½®æ–‡ä»¶åŠwebå‰ç«¯æ–‡ä»¶ä¿®æ”¹</h3><p>æ·»åŠ æœåŠ¡ç«¯å£</p>
<p>vi /etc/services #ç¼–è¾‘ï¼Œåœ¨æœ€åæ·»åŠ ä»¥ä¸‹ä»£ç </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Zabbix</span></div><div class="line">zabbix-agent 10050/tcp   <span class="comment"># Zabbix Agent</span></div><div class="line">zabbix-agent 10050/udp   <span class="comment"># Zabbix Agent</span></div><div class="line">zabbix-trapper 10051/tcp <span class="comment"># Zabbix Trapper</span></div><div class="line">zabbix-trapper 10051/udp <span class="comment"># Zabbix Trapper</span></div><div class="line">:wq! <span class="comment">#ä¿å­˜é€€å‡º</span></div></pre></td></tr></table></figure>
<p>æ·»åŠ åå¦‚ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># grep zabbix /etc/services</span></div><div class="line">zabbix-agent     10050/tcp  <span class="comment">#ZabbixAgent</span></div><div class="line">zabbix-agent     10050/udp  <span class="comment">#ZabbixAgent</span></div><div class="line">zabbix-trapper   10051/tcp  <span class="comment">#ZabbixTrapperz</span></div><div class="line">abbix-trapper    10051/udp  <span class="comment">#ZabbixTrapper</span></div></pre></td></tr></table></figure>
<p>ä¿®æ”¹zabbixé…ç½®æ–‡ä»¶</p>
<p>vim /usr/local/zabbix/etc/zabbix_server.conf</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">DBName=zabbix <span class="comment">#æ•°æ®åº“åç§°</span></div><div class="line">DBUser=zabbix <span class="comment">#æ•°æ®åº“ç”¨æˆ·å</span></div><div class="line">DBPassword=zabbix123.com <span class="comment">#æ•°æ®åº“å¯†ç </span></div><div class="line">ListenIP=192.168.1.170 <span class="comment">#æ•°æ®åº“ipåœ°å€</span></div><div class="line">AlertScriptsPath=/usr/<span class="built_in">local</span>/zabbix/share/zabbix/alertscripts   <span class="comment">#zabbixè¿è¡Œè„šæœ¬å­˜æ”¾ç›®å½•</span></div></pre></td></tr></table></figure>
<p>:wq! #ä¿å­˜é€€å‡º</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">vi /usr/<span class="built_in">local</span>/zabbix/etc/zabbix_agentd.conf</div><div class="line">Include=/usr/<span class="built_in">local</span>/zabbix/etc/zabbix_agentd.conf.d/</div><div class="line">UnsafeUserParameters=1 <span class="comment">#å¯ç”¨è‡ªå®šä¹‰key</span></div><div class="line">:wq! <span class="comment">#ä¿å­˜é€€å‡º</span></div></pre></td></tr></table></figure>
<h3 id="å…­ã€æ·»åŠ å¼€æœºå¯åŠ¨è„šæœ¬"><a href="#å…­ã€æ·»åŠ å¼€æœºå¯åŠ¨è„šæœ¬" class="headerlink" title="å…­ã€æ·»åŠ å¼€æœºå¯åŠ¨è„šæœ¬"></a>å…­ã€æ·»åŠ å¼€æœºå¯åŠ¨è„šæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">cp /tmp/zabbix-2.4.8/misc/init.d/fedora/core/zabbix_server  /etc/rc.d/init.d/zabbix_server  <span class="comment">#æœåŠ¡ç«¯</span></div><div class="line">cp /tmp/zabbix-2.4.8/misc/init.d/fedora/core/zabbix_agentd /etc/rc.d/init.d/zabbix_agentd  <span class="comment">#å®¢æˆ·ç«¯</span></div><div class="line">chmod +x /etc/rc.d/init.d/zabbix_server <span class="comment">#æ·»åŠ è„šæœ¬æ‰§è¡Œæƒé™</span></div><div class="line">chmod +x /etc/rc.d/init.d/zabbix_agentd <span class="comment">#æ·»åŠ è„šæœ¬æ‰§è¡Œæƒé™</span></div><div class="line">chkconfig zabbix_server on <span class="comment">#æ·»åŠ å¼€æœºå¯åŠ¨</span></div><div class="line">chkconfig zabbix_agentd on <span class="comment">#æ·»åŠ å¼€æœºå¯åŠ¨</span></div></pre></td></tr></table></figure>
<h3 id="ä¸ƒã€ä¿®æ”¹zabbixå¼€æœºå¯åŠ¨è„šæœ¬ä¸­çš„zabbixå®‰è£…ç›®å½•"><a href="#ä¸ƒã€ä¿®æ”¹zabbixå¼€æœºå¯åŠ¨è„šæœ¬ä¸­çš„zabbixå®‰è£…ç›®å½•" class="headerlink" title="ä¸ƒã€ä¿®æ”¹zabbixå¼€æœºå¯åŠ¨è„šæœ¬ä¸­çš„zabbixå®‰è£…ç›®å½•"></a>ä¸ƒã€ä¿®æ”¹zabbixå¼€æœºå¯åŠ¨è„šæœ¬ä¸­çš„zabbixå®‰è£…ç›®å½•</h3><p>vi /etc/rc.d/init.d/zabbix_server #ç¼–è¾‘æœåŠ¡ç«¯é…ç½®æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">BASEDIR=/usr/<span class="built_in">local</span>/zabbix/ <span class="comment">#zabbixå®‰è£…ç›®å½•</span></div><div class="line">:wq! <span class="comment">#ä¿å­˜é€€å‡º</span></div></pre></td></tr></table></figure>
<p>vi /etc/rc.d/init.d/zabbix_agentd #ç¼–è¾‘å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">BASEDIR=/usr/<span class="built_in">local</span>/zabbix/ <span class="comment">#zabbixå®‰è£…ç›®å½•</span></div><div class="line">:wq! <span class="comment">#ä¿å­˜é€€å‡º</span></div></pre></td></tr></table></figure>
<h3 id="å…«ã€é…ç½®webç«™ç‚¹"><a href="#å…«ã€é…ç½®webç«™ç‚¹" class="headerlink" title="å…«ã€é…ç½®webç«™ç‚¹"></a>å…«ã€é…ç½®webç«™ç‚¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> zabbix-2.4.8</div><div class="line">cp -r /zabbix-2.4.8/frontends/php /var/www/html/zabbix</div><div class="line"><span class="built_in">cd</span> /var/www/html/</div><div class="line">chown -R zabbix:zabbix zabbix</div></pre></td></tr></table></figure>
<p>service zabbix_server start #å¯åŠ¨zabbixæœåŠ¡ç«¯</p>
<p>service zabbix_agentd start #å¯åŠ¨zabbixå®¢æˆ·ç«¯</p>
<h3 id="ä¹ã€ä¿®æ”¹phpé…ç½®æ–‡ä»¶å‚æ•°"><a href="#ä¹ã€ä¿®æ”¹phpé…ç½®æ–‡ä»¶å‚æ•°" class="headerlink" title="ä¹ã€ä¿®æ”¹phpé…ç½®æ–‡ä»¶å‚æ•°"></a>ä¹ã€ä¿®æ”¹phpé…ç½®æ–‡ä»¶å‚æ•°</h3><p>1ã€vi /etc/php.ini #ç¼–è¾‘ä¿®æ”¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">max_execution_time=300</div><div class="line">max_input_time=300</div><div class="line">date.timezone=Asia/Shanghai</div></pre></td></tr></table></figure>
<p>:wq! #ä¿å­˜é€€å‡º</p>
<p>ä¸Šé¢æåˆ°äº†é˜²ç«å¢™å¼€æ”¾å¯¹åº”çš„ç«¯å£ï¼š<br>é˜²ç«å¢™ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT</div><div class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 10051 -j ACCEPT</div><div class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 10050 -j ACCEPT</div></pre></td></tr></table></figure>
<p>é‡å¯apache</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#service httpd restart</span></div></pre></td></tr></table></figure>
<h3 id="åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š"><a href="#åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š" class="headerlink" title="åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š"></a>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š</h3><p><a href="http://192.168.1.183/zabbix/" target="_blank" rel="external">http://192.168.1.183/zabbix/</a></p>
<p>è¿›å…¥è®¾ç½®ç•Œé¢     </p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-server0.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-server1.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-server2.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-server3.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-server4.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-server5.png" alt=""></figure><br>è¿›å…¥ï¼š â€œ/var/www/html/zabbix/conf/zabbix.conf.phpâ€</p>
<p>å¤‡ä»½ï¼š</p>
<p>cp zabbix.conf.php.example zabbix.conf.php<br>ä¸‹è½½ä¸‹æ¥çš„æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹é¢ã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-server6.png" alt=""></figure></p>
<p>ç”¨æˆ·å:Admin å¯†ç ï¼šzabbix</p>
<p>è®¾ç½®ä¸­æ–‡ç‰ˆæœ¬ï¼Œ2.4ç‰ˆæœ¬ä»¥åéƒ½æ”¯æ’‘ä¸­æ–‡ç‰ˆæœ¬ï¼Œ2.2.0ç‰ˆæœ¬éƒ½æ˜¯ä¸æ”¯æŒçš„ï¼Œéœ€è¦ä¸‹è½½ä¸­æ–‡ç‰ˆæœ¬åŒ…ï¼Œæ”¾åˆ°zabbixç›®å½•ä¸‹é¢ã€‚</p>
<p>è®¾ç½®èƒŒæ™¯ä¸ºç»å…¸çš„æ˜¯ä¸æ˜¯çœ‹ç€ä¼šèˆ’æœç‚¹ï¼š3.0 å¯¹å¤–è§‚æ”¹çš„æ”¹åŠ¨å¾ˆå¤§ï¼Œæ”¯æ’‘ç¡¬ä»¶ç›‘æ§åŠŸèƒ½åŠ å¼ºã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-server7.png" alt=""></figure></p>
<p>ç®€å•çš„å®‰è£…å°±å·²ç»æå®šäº†ã€‚</p>
<h3 id="å®‰è£…å‡ºç°å‡ ç§é”™è¯¯æƒ…å†µï¼š"><a href="#å®‰è£…å‡ºç°å‡ ç§é”™è¯¯æƒ…å†µï¼š" class="headerlink" title="å®‰è£…å‡ºç°å‡ ç§é”™è¯¯æƒ…å†µï¼š"></a>å®‰è£…å‡ºç°å‡ ç§é”™è¯¯æƒ…å†µï¼š</h3><p>ç™»é™†zabbixæç¤º<code>zabbix server is not running:the information displayedmay not be current</code></p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">å…³é—­selinuxä¸iptables</div><div class="line">vim /var/www/html/zabbix/conf/zabbix.conf.phpå°†zabbix.conf.phpé‡Œçš„serverå†™æˆipåœ°å€ï¼Œå°±è§£å†³äº†</div></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ—¥å¿—ï¼š</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">6576</span>:<span class="number">20160719</span>:<span class="number">045354.989</span> [Z3001] connection to database <span class="string">'zabbix'</span> </div><div class="line"><span class="symbol">failed:</span> [<span class="number">2002</span>] Can<span class="string">'t connect to local MySQL server through socket '</span>/var/<span class="class"><span class="keyword">lib</span>/<span class="title">mysql</span>/<span class="title">mysql</span>.<span class="title">sock</span>' (2)</span></div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæŠ¥é”™çš„è¯ï¼Œå°±è¯´æ˜é…ç½®æ–‡ä»¶æœ‰é—®é¢˜ï¼š</p>
<p>è®¾ç½®æ•°æ®åº“è®¿é—®åœ°å€ï¼šDBHost=192.168.1.170</p>
<p>ç„¶åvi zabbix.conf.phpè®°å¾—ä¿®æ”¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="variable">$ZBX_SERVER</span>      = <span class="string">'ZABBIX_SERVER_IP'</span>;  IPåœ°å€</div><div class="line"><span class="variable">$ZBX_SERVER_PORT</span> = <span class="string">'10051'</span>;</div></pre></td></tr></table></figure>
<p>ç„¶åé‡å¯ä¸‹æœåŠ¡ï¼Œå°±ä¸ä¼šå‡ºç°MySQLæœ¬åœ°æ— æ³•è¿æ¥ã€‚</p>
<p>å¦‚æœæŠ¥é”™ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">6664:20160719:050257.665 cannot send list of active checks to [127.0.0.1]: host [Zabbix server] not monitored</div></pre></td></tr></table></figure>
<p>ç¡®ä¿zabbixå‰å°ä¸Šçš„Host nameä¸ä¸»æœºçš„hostnameä¸€è‡´å³å¯ã€‚</p>
<p>è¿™æ˜¯å¿«é€Ÿç®€å•å®‰è£…2.4.8ç‰ˆæœ¬çš„ï¼Œåé¢è¿˜æœ‰ç¼–è¯‘å®‰è£…çš„ï¼Œç¼–è¯‘å®‰è£…çš„å¥½å¤„ï¼Œå¯ä»¥äº†è§£å®‰è£…çš„è·¯å¾„å’Œé…ç½®æ–‡ä»¶éƒ½æ˜¯è‡ªå·±ç†Ÿæ‚‰çš„ã€‚</p>
<p>zabbix-server2.4æœåŠ¡ç«¯ç¼–è¯‘å®‰è£… <a href="http://blog.yangcvo.me/2015/01/18/zabbix-serveræœåŠ¡ç«¯ç¼–è¯‘å®‰è£…/" target="_blank" rel="external">zabbix-serveræœåŠ¡ç«¯ç¼–è¯‘å®‰è£…</a></p>
<p>zabbix2.4ç›‘æ§80ç«¯å£çŠ¶æ€ : <a href="http://blog.yangcvo.me/2016/07/20/zabbixç›‘æ§80ç«¯å£çŠ¶æ€/" target="_blank" rel="external">zabbixç›‘æ§80ç«¯å£çŠ¶æ€</a></p>
<p>zabbix+Grafanaå®‰è£…ä½¿ç”¨ç›‘æ§ç»“åˆ ï¼š<a href="http://blog.yangcvo.me/2016/07/13/zabbix-Grafanaå®‰è£…ä½¿ç”¨ç»“åˆ/" target="_blank" rel="external">zabbix+Grafanaå®‰è£…ä½¿ç”¨ç›‘æ§ç»“åˆ</a></p>
<p>zabbixç›‘æ§MySQL-æ·»åŠ è‡ªå®šä¹‰ç›‘æ§é¡¹ : <a href="http://blog.yangcvo.me/2015/09/29/zabbixç›‘æ§MySQL-æ·»åŠ è‡ªå®šä¹‰ç›‘æ§é¡¹/" target="_blank" rel="external">zabbixç›‘æ§MySQL-æ·»åŠ è‡ªå®šä¹‰ç›‘æ§é¡¹</a></p>
<p>zabbixçš„ICMP_Pingæ¨¡ç‰ˆå®ç°å¯¹å®¢æˆ·ç«¯ç½‘ç»œçŠ¶æ€çš„ç›‘æ§ : <a href="http://blog.yangcvo.me/2015/11/18/zabbixçš„ICMP-Pingæ¨¡ç‰ˆ&gt;å®ç°å¯¹å®¢æˆ·ç«¯ç½‘ç»œçŠ¶æ€çš„ç›‘æ§/" target="_blank" rel="external">zabbixçš„ICMP_Pingæ¨¡ç‰ˆå®ç°å¯¹å®¢æˆ·ç«¯ç½‘ç»œçŠ¶æ€çš„ç›‘æ§</a></p>
<p>zabbixæ€§èƒ½ç›‘æ§æ•…éšœæ€»ç»“ <a href="http://blog.yangcvo.me/2016/02/07/zabbix-æ•…éšœæ€»ç»“/" target="_blank" rel="external">zabbixæ€§èƒ½ç›‘æ§æ•…éšœæ€»ç»“</a></p>

	

	
		<span class="different-posts"><a href="/2014/10/02/æ€§èƒ½ç›‘æ§/Zabbix/Zabbix2.4serveræœåŠ¡ç«¯ç¼–è¯‘å®‰è£…/" onclick="window.history.go(-1); return false;">â¬…ï¸ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2017 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
