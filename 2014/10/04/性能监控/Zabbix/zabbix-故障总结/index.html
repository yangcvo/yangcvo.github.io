<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>zabbixæ€§èƒ½ç›‘æ§æ•…éšœæ€»ç»“ | Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		<article>
	
		<h1>zabbixæ€§èƒ½ç›‘æ§æ•…éšœæ€»ç»“</h1>
	
	<div class="article__infos">
		<span class="article__date">2014-10-04</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/monitoring/">monitoring</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Zabbix-monitoring/">Zabbix monitoring</a>
			</span>
		
	</div>

	

	
		<h3 id="1-zabbixçº¢è‰²å¼¹å‡ºæŠ¥é”™-zabbix-server-is-not-running-the-information-displayed-may-not-be-current"><a href="#1-zabbixçº¢è‰²å¼¹å‡ºæŠ¥é”™-zabbix-server-is-not-running-the-information-displayed-may-not-be-current" class="headerlink" title="1.zabbixçº¢è‰²å¼¹å‡ºæŠ¥é”™ zabbix server is not running: the information displayed may not be current"></a>1.zabbixçº¢è‰²å¼¹å‡ºæŠ¥é”™ <code>zabbix server is not running: the information displayed may not be current</code></h3><ul>
<li>æ’é”™:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">1. æ£€æŸ¥   /var/www/html/zabbix/conf/zabbix.conf.php </div><div class="line">ç¡®å®š </div><div class="line"><span class="variable">$DB</span>[<span class="string">'DATABASE'</span>]  æ•°æ®åº“</div><div class="line"><span class="variable">$DB</span>[<span class="string">'USER'</span>]    ç”¨æˆ·</div><div class="line"><span class="variable">$DB</span>[<span class="string">'PASSWORD'</span>]   å¯†ç </div><div class="line">è¿™ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯æ­£ç¡®çš„ã€‚ </div><div class="line">æ³¨æ„ï¼šæ¯æ¬¡æ”¹äº†å‚æ•°æ–‡ä»¶ä¸€å®šè¦è®°å¾—é‡å¯zabbix_server</div><div class="line">è¿™é‡Œéƒ½æ²¡é—®é¢˜ã€‚</div><div class="line"></div><div class="line">2. å…³é—­SELinuxçš„æ–¹æ³•:</div><div class="line">ä¿®æ”¹/etc/selinux/configæ–‡ä»¶ä¸­çš„SELINUX=<span class="string">""</span> ä¸º disabled ï¼Œç„¶åé‡å¯ã€‚</div><div class="line">å¦‚æœä¸æƒ³é‡å¯ç³»ç»Ÿï¼Œä½¿ç”¨å‘½ä»¤setenforce 0</div><div class="line">æ³¨:</div><div class="line">setenforce 1 è®¾ç½®SELinux æˆä¸ºenforcingæ¨¡å¼</div><div class="line">setenforce 0 è®¾ç½®SELinux æˆä¸ºpermissiveæ¨¡å¼ </div><div class="line">åœ¨liloæˆ–è€…grubçš„å¯åŠ¨å‚æ•°ä¸­å¢åŠ ï¼šselinux=0,ä¹Ÿå¯ä»¥å…³é—­selinux</div><div class="line">selinuxæ˜¯å¦å…³é—­ã€‚ä¸€å®šè¦å…³é—­è¿™ä¸ªï¼Œå¼€å¯selinuxä¼šå¼•èµ·ä¸€è¿ä¸²é—®é¢˜ï¼Œç”šè‡³zabbixçš„discoveryåŠŸèƒ½ä¹Ÿä¸èƒ½æ­£å¸¸ä½¿ç”¨</div><div class="line"></div><div class="line">3. ä¸Šé¢éƒ½æ²¡æœ‰é—®é¢˜ç„¶ååœ¨æŸ¥çœ‹æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨ã€‚</div><div class="line">æŸ¥çœ‹/tmp/zabbix_server.logå’Œ/tmp/zabbix_agent.logæ— ä»»ä½•å¼‚å¸¸ã€‚</div><div class="line">å¦‚æœæ—¥å¿—æç¤ºæŸ¥æ‰¾ä¸åˆ°ä¸»æœºåï¼Œæˆ‘ä»¬çœ‹ä¸‹æœåŠ¡æ˜¯å¦å¯åŠ¨ã€‚</div><div class="line"></div><div class="line">4. çœ‹zabbix_serverå’Œzabbix_agentè¿›ç¨‹ã€ç«¯å£éƒ½æ­£å¸¸ </div><div class="line">   netstat -ntulp</div><div class="line">å¦‚æœæ²¡æœ‰å¯åŠ¨ éœ€è¦æ‰‹åŠ¨å¯åŠ¨ä¸‹ï¼Œè¿™é‡Œå¯èƒ½æœåŠ¡æ²¡æœ‰å¯åŠ¨ï¼Œå¯åŠ¨æœåŠ¡å³å¯ã€‚</div></pre></td></tr></table></figure>
<h3 id="2-å®‰è£…å¥½zabbix-agentd-ç›‘æ§ç«¯æŠ¥é”™Get-value-from-agent-failed-cannot-connect-to-192-168-1-218-10050-113-No-route-to-host"><a href="#2-å®‰è£…å¥½zabbix-agentd-ç›‘æ§ç«¯æŠ¥é”™Get-value-from-agent-failed-cannot-connect-to-192-168-1-218-10050-113-No-route-to-host" class="headerlink" title="2.å®‰è£…å¥½zabbix-agentd ç›‘æ§ç«¯æŠ¥é”™Get value from agent failed: cannot connect to [[192.168.1.218]:10050]: [113] No route to host"></a>2.å®‰è£…å¥½zabbix-agentd ç›‘æ§ç«¯æŠ¥é”™<code>Get value from agent failed: cannot connect to [[192.168.1.218]:10050]: [113] No route to host</code></h3><ul>
<li>æ’é”™:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">çœ‹æç¤ºâ€œNo route to hostâ€ï¼Œä¸ç½‘ç»œè¿æ¥æœ‰å…³ã€‚æ’é™¤çš„æ–¹æ³•å¦‚ä¸‹:</div><div class="line"></div><div class="line">aï¼‰æŸ¥çœ‹192.168.30.3è¿™å°æœºå™¨æ˜¯å¦å·²å¼€æœº</div><div class="line"></div><div class="line">b)åœ¨zabbix serverç«¯å‘è¿™å°æœºå™¨pingï¼Œçœ‹ç½‘ç»œæ˜¯å¦é€š</div><div class="line"></div><div class="line">cï¼‰ç”¨telnet ç™»å½•10050å’Œ10051ç«¯å£ï¼Œçœ‹è¯¥ä¸»æœºæ˜¯å¦å…è®¸è¿™ä¸¤ä¸ªç«¯å£é€šè®¯</div><div class="line"></div><div class="line">d)æŸ¥çœ‹iptablesé˜²ç«å¢™è§„åˆ™æ˜¯å¦æ‹¦æˆª10050ã€10051ç«¯å£</div></pre></td></tr></table></figure>
<h3 id="3-æ—¶é—´ä¸åŒæ­¥Check-if-client-local-time-is-in-sync-with-Zabbix-server-time"><a href="#3-æ—¶é—´ä¸åŒæ­¥Check-if-client-local-time-is-in-sync-with-Zabbix-server-time" class="headerlink" title="3.æ—¶é—´ä¸åŒæ­¥Check if client local time is in sync with Zabbix server time"></a>3.æ—¶é—´ä¸åŒæ­¥<code>Check if client local time is in sync with Zabbix server time</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">å› ä¸ºæˆ‘åœ¨æˆ‘çš„ç½‘ç»œä¸­çš„ä¸€äº›NTPæœåŠ¡å™¨ï¼Œè¿™å°†æ˜¯å¾ˆå¥½èƒ½å¤Ÿæµ‹é‡ä¸»æœºå’Œè¿™äº›æœåŠ¡å™¨ä¹‹ä¸€ä¹‹é—´çš„æ—¶é—´å·®ã€‚å¯æ‚²çš„æ˜¯ï¼Œè¿™å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚</div><div class="line">ä½†æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ:</div><div class="line"></div><div class="line">`system.localtime.fuzzytime`ï¼Œç…§é¡¾è¿™åªæ˜¯ä¸€ä¸ª!!!è§¦å‘çš„â€œfuzzytimeâ€åŠŸèƒ½å‘å‡ºè­¦æŠ¥ï¼Œå¦‚æœè¢«ç›‘æ§æœåŠ¡å™¨çš„æ—¶é—´æ¼‚ç§»ã€‚å®ƒæ¯”è¾ƒæŠ¥å‘Šä¸»æœºçš„æ—¶é—´çš„zabbixæœåŠ¡å™¨åœ¨è§¦å‘å™¨è¢«å¤„ç†çš„æ—¶é—´ä¸Šçš„æ—¶é—´ã€‚fuzzytimeï¼ˆç§’ï¼‰ï¼Œå¯èƒ½æ˜¯ï¼ˆæµ®ç‚¹ï¼Œæ•´æ•°ï¼‰:</div><div class="line"></div><div class="line">è¿”å›1ï¼Œå¦‚æœæ—¶é—´æˆ³ï¼ˆé¡¹ç›®å€¼ï¼‰ä¸ä»çš„zabbixæœåŠ¡å™¨æ—¶é—´æœ‰æ‰€ä¸åŒè¶…è¿‡Nç§’ï¼Œ0 -å¦åˆ™é€šå¸¸ç”¨äºsystem.localtimeæ£€æŸ¥æœ¬åœ°æ—¶é—´åœ¨æœåŠ¡å™¨çš„zabbixæœ¬åœ°æ—¶é—´åŒæ­¥ã€‚</div><div class="line">æ³¨:æ·»åŠ å…¬å¼æ—¶ï¼Œä½¿ç”¨â€œæ·»åŠ â€æŒ‰é’®ï¼Œåœ¨å³ä¾§ï¼Œè¿™æ˜¯å¾ˆç®€å•çš„è¿™ç§æ–¹å¼ï¼</div><div class="line"></div><div class="line">ç³»ç»Ÿæ—¶é—´è·Ÿæˆ‘ç°åœ¨åŒ—äº¬æ—¶é—´ä¸åŒæ­¥ã€‚</div><div class="line">date -R </div><div class="line">æŸ¥çœ‹ä¸‹</div><div class="line"></div><div class="line">éœ€è¦æ‰‹åŠ¨æ·»åŠ è®¡åˆ’ä»»åŠ¡åŒæ­¥ä¸‹ï¼Œè®¾ç½®å¼€æœºå¯åŠ¨ã€‚è¿™é‡ŒIPæ˜¯zabbix-server IP</div><div class="line"></div><div class="line">00 * * * * /usr/sbin/ntpdate 192.168.47.20 &gt;/dev/null 2&gt;&amp;1</div></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸æ‡‚å¾—å¯ä»¥çœ‹:<a href="http://en.linuxkitchen.com/2014/11/03/zabbix-and-time-difference-from-host-to-zabbix-server/" target="_blank" rel="external">å‚è€ƒ</a></p>
<h3 id="4-MySQLå†…å­˜ä¸å¤Ÿ-Lack-of-available-memory-on-server-MySQL"><a href="#4-MySQLå†…å­˜ä¸å¤Ÿ-Lack-of-available-memory-on-server-MySQL" class="headerlink" title="4.MySQLå†…å­˜ä¸å¤Ÿ Lack of available memory on server MySQL"></a>4.MySQLå†…å­˜ä¸å¤Ÿ <code>Lack of available memory on server MySQL</code></h3><p>æ•…éšœåŸå› :Lack of available memory on server argus047072</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">éœ€è¦æ·»åŠ å†…å­˜</div><div class="line">æ•…éšœåŸå› :Redisé“¾æ¥æ•°è¶…è¿‡æœ€å¤§å®¢æˆ·ç«¯æ•°é‡é™åˆ¶ã€‚</div><div class="line">æ˜¯å¦æœ‰å¤§é‡çš„è¿›ç¨‹åœ¨åå°è¿è¡Œ</div></pre></td></tr></table></figure>
<h3 id="5-Received-empty-response-from-Zabbix-Agenté—®é¢˜è§£å†³"><a href="#5-Received-empty-response-from-Zabbix-Agenté—®é¢˜è§£å†³" class="headerlink" title="5.Received empty response from Zabbix Agenté—®é¢˜è§£å†³"></a>5.<code>Received empty response from Zabbix Agent</code>é—®é¢˜è§£å†³</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">å‡ºç°å¦‚ä¸‹é”™è¯¯:</div><div class="line"></div><div class="line">Received empty response from Zabbix Agent at [192.168.1.2]. Assuming that agent dropped connection because of access permission</div><div class="line">å¤§æ¦‚æ„æ€æ˜¯è¯´æ²¡æœ‰æƒé™è®¿é—®agentç«¯å£10050ï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹:</div><div class="line"></div><div class="line"><span class="comment"># cat zabbix_agentd.conf| grep Server=</span></div><div class="line">Server=192.168.1.2  <span class="comment"># zabbix server ipåœ°å€</span></div><div class="line"></div><div class="line">å¦‚æœä½ çš„serveræœ‰å¤šä¸ªIPåœ°å€ï¼Œä½¿ç”¨é€—å·åˆ†éš”å¤šä¸ªIPåœ°å€ã€‚</div></pre></td></tr></table></figure>
<h3 id="6-zabbix-æŠ¥é”™ç£ç›˜ä¸è¶³Free-disk-space-is-less-than-20-on-volume-home"><a href="#6-zabbix-æŠ¥é”™ç£ç›˜ä¸è¶³Free-disk-space-is-less-than-20-on-volume-home" class="headerlink" title="6.zabbix æŠ¥é”™ç£ç›˜ä¸è¶³Free disk space is less than 20% on volume /home"></a>6.zabbix æŠ¥é”™ç£ç›˜ä¸è¶³<code>Free disk space is less than 20% on volume /home</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">ç£ç›˜æ€»å…±å¤§å°</div><div class="line">du -Th</div><div class="line"></div><div class="line"></div><div class="line">å®šä½æŸ¥çœ‹æ˜¯ä»€ä¹ˆæ¶ˆè€—é‚£ä¹ˆå¤šç£ç›˜ç©ºé—´ï¼ŒæŸ¥çœ‹homeç›®å½•ã€‚</div><div class="line">du <span class="_">-s</span> -h /srv/tomcat/tomcat_account/logs/* | sort</div><div class="line">1G localhost.2015-12-21.log</div><div class="line">2G localhost.2015-12-22.log</div><div class="line">2G localhost.2015-12-23.log</div><div class="line">.....</div><div class="line"></div><div class="line">find /srv/tomcat/tomcat_account/logs/ -mtime +1 -name <span class="string">"*.log"</span> -exec rm -rf &#123;&#125; \;</div><div class="line">è¿™ä¸ªä¿ç•™å‰ä¸€å¤©çš„æ—¥å¿—å…¶ä½™éƒ½åˆ é™¤ã€‚</div><div class="line"></div><div class="line">1. è®¡åˆ’ä»»åŠ¡è„šæœ¬æ¸…é™¤å‰ä¸€å¤©</div><div class="line"></div><div class="line">00 00 * * * find  /home/admin/output/ -mtime +1 -exec rm &#123;&#125; \;</div><div class="line"></div><div class="line">2. æˆ–è€…ä½¿ç”¨è„šæœ¬æ”¾åˆ°è®¡åˆ’ä»»åŠ¡é‡Œé¢è·‘</div><div class="line"></div><div class="line">1 0 * * * /opt/soft/<span class="built_in">log</span>/qingli-log.sh &gt;/dev/null 2&gt;&amp;1</div><div class="line"></div><div class="line">è¿™é‡Œçš„è®¾ç½®æ˜¯æ¯å¤©å‡Œæ™¨0ç‚¹1åˆ†æ‰§è¡Œqingli-log.sh .shæ–‡ä»¶è¿›è¡Œæ•°æ®æ¸…ç†ä»»åŠ¡äº†ã€‚</div><div class="line">åœ¨æŸ¥çœ‹ç£ç›˜æ€»å…±å¤§å°</div></pre></td></tr></table></figure>
<h3 id="7-zabbixç›‘æ§æŠ¥é”™zabbix-server-is-not-running-the-information-displayed-may-not-be-currentçš„è§£å†³"><a href="#7-zabbixç›‘æ§æŠ¥é”™zabbix-server-is-not-running-the-information-displayed-may-not-be-currentçš„è§£å†³" class="headerlink" title="7.zabbixç›‘æ§æŠ¥é”™zabbix server is not running: the information displayed may not be currentçš„è§£å†³"></a>7.zabbixç›‘æ§æŠ¥é”™<code>zabbix server is not running: the information displayed may not be current</code>çš„è§£å†³</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">æ•…éšœåŸå› :Zabbix agent on labs047093 is unreachable <span class="keyword">for</span> 5 minutesZabbixä½¿ç”¨ä¸€æ®µæ—¶é—´åæ€»æ˜¯æŠ¥Zabbix Agentä¸å¯åˆ°è¾¾</div><div class="line"></div><div class="line">è§£å†³ç»“æœ:è¿™ä¸‰å°æœºå™¨ç½‘ç»œä¸é€šï¼Œsshè¿æ¥ä¸ä¸Šï¼Œæ’é”™æ–¹æ³•æŸ¥çœ‹æ—¥å¿—æ˜¯å¦æœ‰æŠ¥é”™ï¼Œæ˜¯å¦æœåŠ¡æ²¡æœ‰èµ·æ¥ã€‚</div><div class="line">å¦‚æœæ•°æ®åº“æœåŠ¡å™¨æ˜¯ä¸€ç›´æ­£å¸¸çš„ï¼ŒSELinuxæ˜¯äº‹å…ˆå…³é—­æ²¡æœ‰ï¼Œä¿®æ”¹å®Œä¸Šè¿°æ‰€æåˆ°çš„åå‘ç°é—®é¢˜ä¾ç„¶ã€‚</div><div class="line"></div><div class="line">Zabbixä¾ç„¶æŠ¥é”™ï¼ˆZabbix Server Messages: PROBLEM: Zabbix agent on Zabbix server is unreachable <span class="keyword">for</span> 5 minutesã€‚</div><div class="line">æŸ¥çœ‹æ—¥å¿—æŠ¥ä»€ä¹ˆé”™ï¼Œå®šä½è§£å†³é—®é¢˜ï¼Œä¸€èˆ¬å‡ºç°è¿™ä¸ªå¤§éƒ¨åˆ†æ•°æ®å»¶è¿Ÿå¯¼è‡´ï¼Œåœ¨å›¾å½¢ä¸Šé¢æ˜æ˜¾çœ‹åˆ°æœ‰4åˆ°5åˆ†é’Ÿæ•°æ®æ˜¯ç©ºç™½çš„ã€‚</div></pre></td></tr></table></figure>
<h3 id="8-zabbixå›¾å½¢å‡ºç°ä¹±ç æˆ–è€…æ²¡æœ‰æ–‡å­—ã€‚"><a href="#8-zabbixå›¾å½¢å‡ºç°ä¹±ç æˆ–è€…æ²¡æœ‰æ–‡å­—ã€‚" class="headerlink" title="8.zabbixå›¾å½¢å‡ºç°ä¹±ç æˆ–è€…æ²¡æœ‰æ–‡å­—ã€‚"></a>8.zabbixå›¾å½¢å‡ºç°ä¹±ç æˆ–è€…æ²¡æœ‰æ–‡å­—ã€‚</h3><p>å‚è€ƒæ–‡æ¡£:<a href="https://github.com/yangcvo/zabbix.2.4" target="_blank" rel="external">zabbix2.4å›¾å½¢ä¹±ç </a></p>
<h3 id="9-Zabbixç›‘æ§ä¹‹é‚®ä»¶å‘Šè­¦å‘é€å¤±è´¥smtp-server-é”™è¯¯ä»£ç 550ä¸535"><a href="#9-Zabbixç›‘æ§ä¹‹é‚®ä»¶å‘Šè­¦å‘é€å¤±è´¥smtp-server-é”™è¯¯ä»£ç 550ä¸535" class="headerlink" title="9.Zabbixç›‘æ§ä¹‹é‚®ä»¶å‘Šè­¦å‘é€å¤±è´¥smtp-server: é”™è¯¯ä»£ç 550ä¸535"></a>9.Zabbixç›‘æ§ä¹‹é‚®ä»¶å‘Šè­¦å‘é€å¤±è´¥smtp-server: é”™è¯¯ä»£ç 550ä¸535</h3><p>å‚è€ƒæ–‡æ¡£:<a href="http://clovemfong.blog.51cto.com/3297559/1702105/" target="_blank" rel="external">zabbix163é‚®ä»¶å‘Šè­¦é”™è¯¯ä»£ç </a></p>
<h3 id="10-zabbixä¸­æç¤ºï¼šLack-of-free-swap-space-on-hostname"><a href="#10-zabbixä¸­æç¤ºï¼šLack-of-free-swap-space-on-hostname" class="headerlink" title="10.zabbixä¸­æç¤ºï¼šLack of free swap space on hostname"></a>10.zabbixä¸­æç¤ºï¼š<code>Lack of free swap space on hostname</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">æç¤ºï¼šç¼ºäº¤æ¢ç©ºé—´å¯ä»¥åˆ›å»ºä¹Ÿå¯ä»¥ä¸ç”¨åˆ›å»ºã€‚</div><div class="line"></div><div class="line">[root@xx ~]<span class="comment"># free -m</span></div><div class="line">             total       used       free     shared    buffers     cached</div><div class="line">Mem:          3832       3488        343          0        267       2389</div><div class="line">-/+ buffers/cache:        831       3000</div><div class="line">swap:            0          0          0</div><div class="line"></div><div class="line">ä¸ªèˆ¬ç‰©ç†æœºä¸å¯èƒ½ä¸è®¾äº¤æ¢åˆ†åŒºï¼Œæ˜¾ç„¶è¿™æ ·çš„è®¾è®¡æ²¡æœ‰è€ƒè™‘åˆ°äº‘ä¸»æœºç”¨æˆ·ã€‚åªéœ€è¦è°ƒèŠ‚ç›‘æ§æ–‡ä»¶ï¼Œå³å¯è§£å†³é—®é¢˜ï¼š</div><div class="line">è§£å†³æ­¤é—®é¢˜çš„æ­¥éª¤å¦‚ä¸‹:é€‰æ‹© Configuration-&gt;Templates(æ¨¡æ¿),åœ¨æ¨¡æ¿ç•Œé¢ä¸­é€‰æ‹©Template OS Linuxå³ä¾§çš„Triggersï¼ˆè§¦å‘å™¨ï¼‰,</div><div class="line">åœ¨è§¦å‘å™¨é¡µé¢ä¸­æ‰“å¼€Lack of free swap space on &#123;HOST.NAME&#125;é¡¹ç›®,åœ¨æ–°æ‰“å¼€çš„è§¦å‘å™¨ç¼–è¾‘é¡µé¢ä¸­ä¿®æ”¹Expressionï¼ˆè¡¨è¾¾å¼ï¼‰çš„å†…å®¹,</div><div class="line">ç”±åŸå…ˆçš„&#123;Template OS Linux:system.swap.size[,pfree].last(0)&#125;&lt;50</div><div class="line"></div><div class="line">ä¿®æ”¹ä¸º&#123;Template OS Linux:system.swap.size[,pfree].last(0)&#125;&lt;50 and &#123;Template OS Linux:system.swap.size[,free].last(0)&#125;&lt;&gt;0</div><div class="line"></div><div class="line"> æ­¤å¤„ä¿®æ”¹å¢åŠ äº†â€œand&#123;Template OS Linux:system.swap.size[,free].last(0)&#125;&lt;&gt;0â€åˆ¤æ–­ç³»ç»Ÿæœ‰äº¤æ¢ç©ºé—´ï¼Œå½“ç³»ç»Ÿæ— äº¤æ¢ç©ºé—´&#123;Template OS</div><div class="line">Linux:system.swap.size[,free].last(0)&#125;çš„å€¼ä¸º0æ—¶å°†ä¸ä¼šä½¿è¡¨è¾¾å¼æˆç«‹ï¼Œ</div><div class="line">ä¹Ÿå°±ä¸ä¼šè§¦å‘é”™è¯¯æç¤ºã€‚ä¿å­˜ååœ¨ä¸‹ä¸€ä¸ªæ›´æ–°å‘¨æœŸå†…zabbixä¹‹å‰æŠ¥å‘Šâ€œLack of free swap spaceâ€é—®é¢˜å°±ä¼šè¢«è‡ªåŠ¨æ ‡è®°ä¸ºResolved.</div><div class="line"></div><div class="line">æˆ–è€…åˆ›å»ºï¼š</div><div class="line"></div><div class="line">1ã€é¦–å…ˆçœ‹ä¸€ä¸‹å†…å­˜</div><div class="line">free -m</div><div class="line">2ã€ç„¶ååˆ›å»ºä¸€ä¸ªåˆ†åŒºæ·»åŠ äº¤æ¢æ–‡ä»¶</div><div class="line">mkdir /etc/swap/</div><div class="line">dd <span class="keyword">if</span>=/dev/zero of=/etc/swap/swap bs=1024 count=1024000  1ä¸ªG</div><div class="line">3ã€åˆ›å»ºäº¤æ¢ç©ºé—´</div><div class="line">mkswap /etc/swap/swap</div><div class="line">4ã€å¯åŠ¨äº¤æ¢ç©ºé—´</div><div class="line">swapon /etc/swap/swap</div><div class="line">5ã€æŸ¥çœ‹æ–°å¢ç©ºé—´</div><div class="line">free -tom</div><div class="line">6ã€ä¿®æ”¹/etc/fstabæ–‡ä»¶ä½¿ç³»ç»Ÿåœ¨é‡æ–°å¯åŠ¨çš„æ—¶å€™ç”Ÿæ•ˆ</div><div class="line">/etc/swap/swap         swap                    swap    defaults        0 0</div></pre></td></tr></table></figure>
<h3 id="11-cannot-send-list-of-active-checks-to-192-168-0-1-host-Zabbix-server-not-found"><a href="#11-cannot-send-list-of-active-checks-to-192-168-0-1-host-Zabbix-server-not-found" class="headerlink" title="11.cannot send list of active checks to [192.168.0.1]: host [Zabbix server] not found"></a>11.<code>cannot send list of active checks to [192.168.0.1]: host [Zabbix server] not found</code></h3><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">æŸ¥çœ‹è¢«ç›‘æ§æœºä¸Šçš„/tmp/zabbix_agentd.<span class="built_in">log</span>ï¼Œæ˜¾ç¤ºæ—¥å¿—ï¼š</div><div class="line">No active checks <span class="keyword">on</span> <span class="built_in">server</span>: host [Zabbix <span class="built_in">server</span>] <span class="keyword">not</span> found</div><div class="line"></div><div class="line">è¿™æ˜¯å› ä¸ºï¼Œé€šè¿‡zabbix dashboardé¡µé¢é…ç½®çš„è¢«ç›‘æ§ä¸»æœºåè·Ÿè¢«ç›‘æ§ä¸»æœºä¸Šzabbix_agentd.confä¸­é…ç½®çš„Hostnameä¸ä¸€è‡´ã€‚</div><div class="line"></div><div class="line">ä¿®æ”¹ä¸ºä¸€è‡´çš„åå­—åï¼Œé‡å¯zabbix_agentdå³å¯ã€‚</div></pre></td></tr></table></figure>
<h3 id="12-è§£å†³CentOS-7å®‰è£…zabbix-3-0-æ— æ³•å¯åŠ¨zabbix-serverçš„é—®é¢˜"><a href="#12-è§£å†³CentOS-7å®‰è£…zabbix-3-0-æ— æ³•å¯åŠ¨zabbix-serverçš„é—®é¢˜" class="headerlink" title="12.è§£å†³CentOS 7å®‰è£…zabbix 3.0 æ— æ³•å¯åŠ¨zabbix-serverçš„é—®é¢˜"></a>12.è§£å†³CentOS 7å®‰è£…zabbix 3.0 æ— æ³•å¯åŠ¨zabbix-serverçš„é—®é¢˜</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@kvm zabbix_agentd.d]<span class="comment"># service zabbix-agent restart</span></div><div class="line">Redirecting to /bin/systemctl restart  zabbix-agent.service</div><div class="line">Job <span class="keyword">for</span> zabbix-agent.service failed because a configured resource <span class="built_in">limit</span> was exceeded. See <span class="string">"systemctl status zabbix-agent.service"</span> and <span class="string">"journalctl -xe"</span> <span class="keyword">for</span> details.</div></pre></td></tr></table></figure>
<p>è§£å†³æ–¹æ¡ˆ ï¼š<br>å…³é—­SELinuxæœåŠ¡ ã€‚ æ‰§è¡Œå‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">setenforce 0 </div><div class="line"></div><div class="line">3. é‡å¯zabbix</div><div class="line">systemctl  restart  zabbix-server.service</div></pre></td></tr></table></figure>
<p>zabbix-server2.4æœåŠ¡ç«¯ç¼–è¯‘å®‰è£… <a href="http://blog.yangcvo.me/2014/10/03/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7/Zabbix/zabbix2.4%E6%9C%8D%E5%8A%A1%E7%AB%AFyum-rpm%E5%BF%AB%E9%80%9F%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" target="_blank" rel="external">zabbix-serveræœåŠ¡ç«¯ç¼–è¯‘å®‰è£…</a></p>
<p>zabbixé‚®ä»¶å‘Šè­¦ : <a href="http://blog.yangcvo.me/2014/10/05/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7/Zabbix/zabbix%E9%82%AE%E4%BB%B6%E5%91%8A%E8%AD%A6/" target="_blank" rel="external">zabbixé‚®ä»¶å‘Šè­¦</a></p>
<p>zabbix3.0éƒ¨ç½²jmxç›‘æ§tomcat: <a href="http://blog.yangcvo.me/2016/06/21/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7/Zabbix/zabbix3-0%E9%83%A8%E7%BD%B2jmx%E7%9B%91%E6%8E%A7tomcat/" target="_blank" rel="external">zabbix3.0éƒ¨ç½²jmxç›‘æ§tomcat</a></p>

	

	
		<span class="different-posts"><a href="/2014/10/04/æ€§èƒ½ç›‘æ§/Zabbix/zabbix-æ•…éšœæ€»ç»“/" onclick="window.history.go(-1); return false;">â¬…ï¸ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2017 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
