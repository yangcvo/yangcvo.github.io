<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="null">
    <meta name="keyword"  content="undefined">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
          zabbixæ€§èƒ½ç›‘æ§æ•…éšœæ€»ç»“ - Yancy
        
    </title>

    <link rel="canonical" href="http://blog.yancy.cc/2014/10/04/æ€§èƒ½ç›‘æ§/Zabbix/zabbix-æ•…éšœæ€»ç»“/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Grocery store</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/ABOUT/About.html">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/ARCHIVES/archives.html">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Image to hack wechat -->
<!-- <img src="http://blog.yancy.cc/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="{{ site.baseurl }}/{% if page.header-img %}{{ page.header-img }}{% else %}{{ site.header-img }}{% endif %}" width="0" height="0"> -->

<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('/img/home-bg.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                          <a class="tag" href="/tags/#Zabbix monitoring" title="Zabbix monitoring">Zabbix monitoring</a>
                        
                    </div>
                    <h1>zabbixæ€§èƒ½ç›‘æ§æ•…éšœæ€»ç»“</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by Yancy on
                        2014-10-04
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h2 id="TOC"><a href="#TOC" class="headerlink" title="TOC"></a>TOC</h2><p>æ•ˆæœå¦‚ä¸‹ï¼š<br>[TOC]</p>
<h3 id="1-Zabbixçº¢è‰²å¼¹å‡ºæŠ¥é”™-zabbix-server-is-not-running-the-information-displayed-may-not-be-current"><a href="#1-Zabbixçº¢è‰²å¼¹å‡ºæŠ¥é”™-zabbix-server-is-not-running-the-information-displayed-may-not-be-current" class="headerlink" title="1.Zabbixçº¢è‰²å¼¹å‡ºæŠ¥é”™ zabbix server is not running: the information displayed may not be current"></a>1.Zabbixçº¢è‰²å¼¹å‡ºæŠ¥é”™ <code>zabbix server is not running: the information displayed may not be current</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">* æ’é”™:</div><div class="line">* </div><div class="line">1. æ£€æŸ¥   /var/www/html/zabbix/conf/zabbix.conf.php </div><div class="line">ç¡®å®š </div><div class="line"><span class="variable">$DB</span>[<span class="string">'DATABASE'</span>]  æ•°æ®åº“</div><div class="line"><span class="variable">$DB</span>[<span class="string">'USER'</span>]    ç”¨æˆ·</div><div class="line"><span class="variable">$DB</span>[<span class="string">'PASSWORD'</span>]   å¯†ç </div><div class="line">è¿™ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯æ­£ç¡®çš„ã€‚ </div><div class="line">æ³¨æ„ï¼šæ¯æ¬¡æ”¹äº†å‚æ•°æ–‡ä»¶ä¸€å®šè¦è®°å¾—é‡å¯zabbix_server</div><div class="line">è¿™é‡Œéƒ½æ²¡é—®é¢˜ã€‚</div><div class="line"></div><div class="line">2. å…³é—­SELinuxçš„æ–¹æ³•:</div><div class="line">ä¿®æ”¹/etc/selinux/configæ–‡ä»¶ä¸­çš„SELINUX=<span class="string">""</span> ä¸º disabled ï¼Œç„¶åé‡å¯ã€‚</div><div class="line">å¦‚æœä¸æƒ³é‡å¯ç³»ç»Ÿï¼Œä½¿ç”¨å‘½ä»¤setenforce 0</div><div class="line">æ³¨:</div><div class="line">setenforce 1 è®¾ç½®SELinux æˆä¸ºenforcingæ¨¡å¼</div><div class="line">setenforce 0 è®¾ç½®SELinux æˆä¸ºpermissiveæ¨¡å¼ </div><div class="line">åœ¨liloæˆ–è€…grubçš„å¯åŠ¨å‚æ•°ä¸­å¢åŠ ï¼šselinux=0,ä¹Ÿå¯ä»¥å…³é—­selinux</div><div class="line">selinuxæ˜¯å¦å…³é—­ã€‚ä¸€å®šè¦å…³é—­è¿™ä¸ªï¼Œå¼€å¯selinuxä¼šå¼•èµ·ä¸€è¿ä¸²é—®é¢˜ï¼Œç”šè‡³zabbixçš„discoveryåŠŸèƒ½ä¹Ÿä¸èƒ½æ­£å¸¸ä½¿ç”¨</div><div class="line"></div><div class="line">3. ä¸Šé¢éƒ½æ²¡æœ‰é—®é¢˜ç„¶ååœ¨æŸ¥çœ‹æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨ã€‚</div><div class="line">æŸ¥çœ‹/tmp/zabbix_server.logå’Œ/tmp/zabbix_agent.logæ— ä»»ä½•å¼‚å¸¸ã€‚</div><div class="line">å¦‚æœæ—¥å¿—æç¤ºæŸ¥æ‰¾ä¸åˆ°ä¸»æœºåï¼Œæˆ‘ä»¬çœ‹ä¸‹æœåŠ¡æ˜¯å¦å¯åŠ¨ã€‚</div><div class="line"></div><div class="line">4. çœ‹zabbix_serverå’Œzabbix_agentè¿›ç¨‹ã€ç«¯å£éƒ½æ­£å¸¸ </div><div class="line">   netstat -ntulp</div><div class="line">å¦‚æœæ²¡æœ‰å¯åŠ¨ éœ€è¦æ‰‹åŠ¨å¯åŠ¨ä¸‹ï¼Œè¿™é‡Œå¯èƒ½æœåŠ¡æ²¡æœ‰å¯åŠ¨ï¼Œå¯åŠ¨æœåŠ¡å³å¯ã€‚</div></pre></td></tr></table></figure>
<h3 id="2-Zabbix-agentdæ—¥å¿—æŠ¥é”™Get-value-from-agent-failed-cannot-connect-to-192-168-1-218-10050-113-No-route-to-host"><a href="#2-Zabbix-agentdæ—¥å¿—æŠ¥é”™Get-value-from-agent-failed-cannot-connect-to-192-168-1-218-10050-113-No-route-to-host" class="headerlink" title="2.Zabbix-agentdæ—¥å¿—æŠ¥é”™Get value from agent failed: cannot connect to [[192.168.1.218]:10050]: [113] No route to host"></a>2.Zabbix-agentdæ—¥å¿—æŠ¥é”™<code>Get value from agent failed: cannot connect to [[192.168.1.218]:10050]: [113] No route to host</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">* æ’é”™:</div><div class="line"></div><div class="line">çœ‹æç¤ºâ€œNo route to hostâ€ï¼Œä¸ç½‘ç»œè¿æ¥æœ‰å…³ã€‚æ’é™¤çš„æ–¹æ³•å¦‚ä¸‹:</div><div class="line"></div><div class="line">aï¼‰æŸ¥çœ‹192.168.30.3è¿™å°æœºå™¨æ˜¯å¦å·²å¼€æœº</div><div class="line">b)åœ¨zabbix serverç«¯å‘è¿™å°æœºå™¨pingï¼Œçœ‹ç½‘ç»œæ˜¯å¦é€š</div><div class="line">cï¼‰ç”¨telnet ç™»å½•10050å’Œ10051ç«¯å£ï¼Œçœ‹è¯¥ä¸»æœºæ˜¯å¦å…è®¸è¿™ä¸¤ä¸ªç«¯å£é€šè®¯</div><div class="line">d)æŸ¥çœ‹iptablesé˜²ç«å¢™è§„åˆ™æ˜¯å¦æ‹¦æˆª10050ã€10051ç«¯å£</div></pre></td></tr></table></figure>
<h3 id="3-æ—¶é—´ä¸åŒæ­¥Check-if-client-local-time-is-in-sync-with-Zabbix-server-time"><a href="#3-æ—¶é—´ä¸åŒæ­¥Check-if-client-local-time-is-in-sync-with-Zabbix-server-time" class="headerlink" title="3.æ—¶é—´ä¸åŒæ­¥Check if client local time is in sync with Zabbix server time"></a>3.æ—¶é—´ä¸åŒæ­¥<code>Check if client local time is in sync with Zabbix server time</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">å› ä¸ºæˆ‘åœ¨æˆ‘çš„ç½‘ç»œä¸­çš„ä¸€äº›NTPæœåŠ¡å™¨ï¼Œè¿™å°†æ˜¯å¾ˆå¥½èƒ½å¤Ÿæµ‹é‡ä¸»æœºå’Œè¿™äº›æœåŠ¡å™¨ä¹‹ä¸€ä¹‹é—´çš„æ—¶é—´å·®ã€‚å¯æ‚²çš„æ˜¯ï¼Œè¿™å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚</div><div class="line">ä½†æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ:</div><div class="line"></div><div class="line">`system.localtime.fuzzytime`ï¼Œç…§é¡¾è¿™åªæ˜¯ä¸€ä¸ª!!!è§¦å‘çš„â€œfuzzytimeâ€åŠŸèƒ½å‘å‡ºè­¦æŠ¥ï¼Œå¦‚æœè¢«ç›‘æ§æœåŠ¡å™¨çš„æ—¶é—´æ¼‚ç§»ã€‚å®ƒæ¯”è¾ƒæŠ¥å‘Šä¸»æœºçš„æ—¶é—´çš„zabbixæœåŠ¡å™¨åœ¨è§¦å‘å™¨è¢«å¤„ç†çš„æ—¶é—´ä¸Šçš„æ—¶é—´ã€‚fuzzytimeï¼ˆç§’ï¼‰ï¼Œå¯èƒ½æ˜¯ï¼ˆæµ®ç‚¹ï¼Œæ•´æ•°ï¼‰:</div><div class="line"></div><div class="line">è¿”å›1ï¼Œå¦‚æœæ—¶é—´æˆ³ï¼ˆé¡¹ç›®å€¼ï¼‰ä¸ä»çš„zabbixæœåŠ¡å™¨æ—¶é—´æœ‰æ‰€ä¸åŒè¶…è¿‡Nç§’ï¼Œ0 -å¦åˆ™é€šå¸¸ç”¨äºsystem.localtimeæ£€æŸ¥æœ¬åœ°æ—¶é—´åœ¨æœåŠ¡å™¨çš„zabbixæœ¬åœ°æ—¶é—´åŒæ­¥ã€‚</div><div class="line">æ³¨:æ·»åŠ å…¬å¼æ—¶ï¼Œä½¿ç”¨â€œæ·»åŠ â€æŒ‰é’®ï¼Œåœ¨å³ä¾§ï¼Œè¿™æ˜¯å¾ˆç®€å•çš„è¿™ç§æ–¹å¼ï¼</div><div class="line"></div><div class="line">ç³»ç»Ÿæ—¶é—´è·Ÿæˆ‘ç°åœ¨åŒ—äº¬æ—¶é—´ä¸åŒæ­¥ã€‚</div><div class="line">date -R </div><div class="line">æŸ¥çœ‹ä¸‹</div><div class="line"></div><div class="line">éœ€è¦æ‰‹åŠ¨æ·»åŠ è®¡åˆ’ä»»åŠ¡åŒæ­¥ä¸‹ï¼Œè®¾ç½®å¼€æœºå¯åŠ¨ã€‚è¿™é‡ŒIPæ˜¯zabbix-server IP</div><div class="line"></div><div class="line">00 * * * * /usr/sbin/ntpdate 192.168.47.20 &gt;/dev/null 2&gt;&amp;1</div></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸æ‡‚å¾—å¯ä»¥çœ‹:<a href="http://en.linuxkitchen.com/2014/11/03/zabbix-and-time-difference-from-host-to-zabbix-server/" target="_blank" rel="external">å‚è€ƒ</a></p>
<h3 id="4-MySQLå†…å­˜ä¸å¤Ÿ-Lack-of-available-memory-on-server-MySQL"><a href="#4-MySQLå†…å­˜ä¸å¤Ÿ-Lack-of-available-memory-on-server-MySQL" class="headerlink" title="4.MySQLå†…å­˜ä¸å¤Ÿ Lack of available memory on server MySQL"></a>4.MySQLå†…å­˜ä¸å¤Ÿ <code>Lack of available memory on server MySQL</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">æ•…éšœåŸå› :Lack of available memory on server argus047072</div><div class="line"></div><div class="line">éœ€è¦æ·»åŠ å†…å­˜</div><div class="line">æ•…éšœåŸå› :Redisé“¾æ¥æ•°è¶…è¿‡æœ€å¤§å®¢æˆ·ç«¯æ•°é‡é™åˆ¶ã€‚</div><div class="line">æ˜¯å¦æœ‰å¤§é‡çš„è¿›ç¨‹åœ¨åå°è¿è¡Œ</div></pre></td></tr></table></figure>
<h3 id="5-Zabbix-agentä¸é€šReceived-empty-response-from-Zabbix-Agent"><a href="#5-Zabbix-agentä¸é€šReceived-empty-response-from-Zabbix-Agent" class="headerlink" title="5.Zabbix-agentä¸é€šReceived empty response from Zabbix Agent"></a>5.Zabbix-agentä¸é€š<code>Received empty response from Zabbix Agent</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">å‡ºç°å¦‚ä¸‹é”™è¯¯:</div><div class="line"></div><div class="line">Received empty response from Zabbix Agent at [192.168.1.2]. Assuming that agent dropped connection because of access permission</div><div class="line">å¤§æ¦‚æ„æ€æ˜¯è¯´æ²¡æœ‰æƒé™è®¿é—®agentç«¯å£10050ï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹:</div><div class="line"></div><div class="line"><span class="comment"># cat zabbix_agentd.conf| grep Server=</span></div><div class="line">Server=192.168.1.2  <span class="comment"># zabbix server ipåœ°å€</span></div><div class="line"></div><div class="line">å¦‚æœä½ çš„serveræœ‰å¤šä¸ªIPåœ°å€ï¼Œä½¿ç”¨é€—å·åˆ†éš”å¤šä¸ªIPåœ°å€ã€‚</div></pre></td></tr></table></figure>
<h3 id="6-ZabbixæŠ¥é”™ç£ç›˜ä¸è¶³Free-disk-space-is-less-than-20-on-volume-home"><a href="#6-ZabbixæŠ¥é”™ç£ç›˜ä¸è¶³Free-disk-space-is-less-than-20-on-volume-home" class="headerlink" title="6.ZabbixæŠ¥é”™ç£ç›˜ä¸è¶³Free disk space is less than 20% on volume /home"></a>6.ZabbixæŠ¥é”™ç£ç›˜ä¸è¶³<code>Free disk space is less than 20% on volume /home</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">ç£ç›˜æ€»å…±å¤§å°</div><div class="line">du -Th</div><div class="line"></div><div class="line">å®šä½æŸ¥çœ‹æ˜¯ä»€ä¹ˆæ¶ˆè€—é‚£ä¹ˆå¤šç£ç›˜ç©ºé—´ï¼ŒæŸ¥çœ‹homeç›®å½•ã€‚</div><div class="line">du <span class="_">-s</span> -h /srv/tomcat/tomcat_account/logs/* | sort</div><div class="line">1G localhost.2015-12-21.log</div><div class="line">2G localhost.2015-12-22.log</div><div class="line">2G localhost.2015-12-23.log</div><div class="line">.....</div><div class="line"></div><div class="line">find /srv/tomcat/tomcat_account/logs/ -mtime +1 -name <span class="string">"*.log"</span> -exec rm -rf &#123;&#125; \;</div><div class="line">è¿™ä¸ªä¿ç•™å‰ä¸€å¤©çš„æ—¥å¿—å…¶ä½™éƒ½åˆ é™¤ã€‚</div><div class="line"></div><div class="line">1. è®¡åˆ’ä»»åŠ¡è„šæœ¬æ¸…é™¤å‰ä¸€å¤©</div><div class="line"></div><div class="line">00 00 * * * find  /home/admin/output/ -mtime +1 -exec rm &#123;&#125; \;</div><div class="line"></div><div class="line">2. æˆ–è€…ä½¿ç”¨è„šæœ¬æ”¾åˆ°è®¡åˆ’ä»»åŠ¡é‡Œé¢è·‘</div><div class="line"></div><div class="line">1 0 * * * /opt/soft/<span class="built_in">log</span>/qingli-log.sh &gt;/dev/null 2&gt;&amp;1</div><div class="line"></div><div class="line">è¿™é‡Œçš„è®¾ç½®æ˜¯æ¯å¤©å‡Œæ™¨0ç‚¹1åˆ†æ‰§è¡Œqingli-log.sh .shæ–‡ä»¶è¿›è¡Œæ•°æ®æ¸…ç†ä»»åŠ¡äº†ã€‚</div><div class="line">åœ¨æŸ¥çœ‹ç£ç›˜æ€»å…±å¤§å°</div></pre></td></tr></table></figure>
<h3 id="7-Zabbixç›‘æ§æŠ¥é”™zabbix-server-is-not-running-the-information-displayed-may-not-be-current"><a href="#7-Zabbixç›‘æ§æŠ¥é”™zabbix-server-is-not-running-the-information-displayed-may-not-be-current" class="headerlink" title="7.Zabbixç›‘æ§æŠ¥é”™zabbix server is not running: the information displayed may not be current"></a>7.Zabbixç›‘æ§æŠ¥é”™<code>zabbix server is not running: the information displayed may not be current</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">æ•…éšœåŸå› :Zabbix agent on labs047093 is unreachable <span class="keyword">for</span> 5 minutesZabbixä½¿ç”¨ä¸€æ®µæ—¶é—´åæ€»æ˜¯æŠ¥Zabbix Agentä¸å¯åˆ°è¾¾</div><div class="line"></div><div class="line">è§£å†³ç»“æœ:è¿™ä¸‰å°æœºå™¨ç½‘ç»œä¸é€šï¼Œsshè¿æ¥ä¸ä¸Šï¼Œæ’é”™æ–¹æ³•æŸ¥çœ‹æ—¥å¿—æ˜¯å¦æœ‰æŠ¥é”™ï¼Œæ˜¯å¦æœåŠ¡æ²¡æœ‰èµ·æ¥ã€‚</div><div class="line">å¦‚æœæ•°æ®åº“æœåŠ¡å™¨æ˜¯ä¸€ç›´æ­£å¸¸çš„ï¼ŒSELinuxæ˜¯äº‹å…ˆå…³é—­æ²¡æœ‰ï¼Œä¿®æ”¹å®Œä¸Šè¿°æ‰€æåˆ°çš„åå‘ç°é—®é¢˜ä¾ç„¶ã€‚</div><div class="line"></div><div class="line">Zabbixä¾ç„¶æŠ¥é”™ï¼ˆZabbix Server Messages: PROBLEM: Zabbix agent on Zabbix server is unreachable <span class="keyword">for</span> 5 minutesã€‚</div><div class="line">æŸ¥çœ‹æ—¥å¿—æŠ¥ä»€ä¹ˆé”™ï¼Œå®šä½è§£å†³é—®é¢˜ï¼Œä¸€èˆ¬å‡ºç°è¿™ä¸ªå¤§éƒ¨åˆ†æ•°æ®å»¶è¿Ÿå¯¼è‡´ï¼Œåœ¨å›¾å½¢ä¸Šé¢æ˜æ˜¾çœ‹åˆ°æœ‰4åˆ°5åˆ†é’Ÿæ•°æ®æ˜¯ç©ºç™½çš„ã€‚</div></pre></td></tr></table></figure>
<h3 id="8-Zabbixå›¾å½¢å‡ºç°ä¹±ç æˆ–è€…æ²¡æœ‰æ–‡å­—"><a href="#8-Zabbixå›¾å½¢å‡ºç°ä¹±ç æˆ–è€…æ²¡æœ‰æ–‡å­—" class="headerlink" title="8.Zabbixå›¾å½¢å‡ºç°ä¹±ç æˆ–è€…æ²¡æœ‰æ–‡å­—"></a>8.Zabbixå›¾å½¢å‡ºç°ä¹±ç æˆ–è€…æ²¡æœ‰æ–‡å­—</h3><p>å‚è€ƒæ–‡æ¡£:<a href="https://github.com/yangcvo/zabbix.2.4" target="_blank" rel="external">zabbix2.4å›¾å½¢ä¹±ç </a></p>
<h3 id="9-Zabbixç›‘æ§ä¹‹é‚®ä»¶å‘Šè­¦å‘é€å¤±è´¥smtp-server-é”™è¯¯ä»£ç 550ä¸535"><a href="#9-Zabbixç›‘æ§ä¹‹é‚®ä»¶å‘Šè­¦å‘é€å¤±è´¥smtp-server-é”™è¯¯ä»£ç 550ä¸535" class="headerlink" title="9.Zabbixç›‘æ§ä¹‹é‚®ä»¶å‘Šè­¦å‘é€å¤±è´¥smtp-server: é”™è¯¯ä»£ç 550ä¸535"></a>9.Zabbixç›‘æ§ä¹‹é‚®ä»¶å‘Šè­¦å‘é€å¤±è´¥smtp-server: é”™è¯¯ä»£ç 550ä¸535</h3><p>å‚è€ƒæ–‡æ¡£:<a href="http://clovemfong.blog.51cto.com/3297559/1702105/" target="_blank" rel="external">zabbix163é‚®ä»¶å‘Šè­¦é”™è¯¯ä»£ç </a></p>
<h3 id="10-Zabbixä¸­æç¤ºï¼šLack-of-free-swap-space-on-hostname"><a href="#10-Zabbixä¸­æç¤ºï¼šLack-of-free-swap-space-on-hostname" class="headerlink" title="10.Zabbixä¸­æç¤ºï¼šLack of free swap space on hostname"></a>10.Zabbixä¸­æç¤ºï¼š<code>Lack of free swap space on hostname</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">æç¤ºï¼šç¼ºäº¤æ¢ç©ºé—´å¯ä»¥åˆ›å»ºä¹Ÿå¯ä»¥ä¸ç”¨åˆ›å»ºã€‚</div><div class="line"></div><div class="line">[root@xx ~]<span class="comment"># free -m</span></div><div class="line">             total       used       free     shared    buffers     cached</div><div class="line">Mem:          3832       3488        343          0        267       2389</div><div class="line">-/+ buffers/cache:        831       3000</div><div class="line">swap:            0          0          0</div><div class="line"></div><div class="line">ä¸ªèˆ¬ç‰©ç†æœºä¸å¯èƒ½ä¸è®¾äº¤æ¢åˆ†åŒºï¼Œæ˜¾ç„¶è¿™æ ·çš„è®¾è®¡æ²¡æœ‰è€ƒè™‘åˆ°äº‘ä¸»æœºç”¨æˆ·ã€‚åªéœ€è¦è°ƒèŠ‚ç›‘æ§æ–‡ä»¶ï¼Œå³å¯è§£å†³é—®é¢˜ï¼š</div><div class="line">è§£å†³æ­¤é—®é¢˜çš„æ­¥éª¤å¦‚ä¸‹:é€‰æ‹© Configuration-&gt;Templates(æ¨¡æ¿),åœ¨æ¨¡æ¿ç•Œé¢ä¸­é€‰æ‹©Template OS Linuxå³ä¾§çš„Triggersï¼ˆè§¦å‘å™¨ï¼‰,</div><div class="line">åœ¨è§¦å‘å™¨é¡µé¢ä¸­æ‰“å¼€Lack of free swap space on &#123;HOST.NAME&#125;é¡¹ç›®,åœ¨æ–°æ‰“å¼€çš„è§¦å‘å™¨ç¼–è¾‘é¡µé¢ä¸­ä¿®æ”¹Expressionï¼ˆè¡¨è¾¾å¼ï¼‰çš„å†…å®¹,</div><div class="line">ç”±åŸå…ˆçš„&#123;Template OS Linux:system.swap.size[,pfree].last(0)&#125;&lt;50</div><div class="line"></div><div class="line">ä¿®æ”¹ä¸º&#123;Template OS Linux:system.swap.size[,pfree].last(0)&#125;&lt;50 and &#123;Template OS Linux:system.swap.size[,free].last(0)&#125;&lt;&gt;0</div><div class="line"></div><div class="line"> æ­¤å¤„ä¿®æ”¹å¢åŠ äº†â€œand&#123;Template OS Linux:system.swap.size[,free].last(0)&#125;&lt;&gt;0â€åˆ¤æ–­ç³»ç»Ÿæœ‰äº¤æ¢ç©ºé—´ï¼Œå½“ç³»ç»Ÿæ— äº¤æ¢ç©ºé—´&#123;Template OS</div><div class="line">Linux:system.swap.size[,free].last(0)&#125;çš„å€¼ä¸º0æ—¶å°†ä¸ä¼šä½¿è¡¨è¾¾å¼æˆç«‹ï¼Œ</div><div class="line">ä¹Ÿå°±ä¸ä¼šè§¦å‘é”™è¯¯æç¤ºã€‚ä¿å­˜ååœ¨ä¸‹ä¸€ä¸ªæ›´æ–°å‘¨æœŸå†…zabbixä¹‹å‰æŠ¥å‘Šâ€œLack of free swap spaceâ€é—®é¢˜å°±ä¼šè¢«è‡ªåŠ¨æ ‡è®°ä¸ºResolved.</div><div class="line"></div><div class="line">æˆ–è€…åˆ›å»ºï¼š</div><div class="line"></div><div class="line">1ã€é¦–å…ˆçœ‹ä¸€ä¸‹å†…å­˜</div><div class="line">free -m</div><div class="line">2ã€ç„¶ååˆ›å»ºä¸€ä¸ªåˆ†åŒºæ·»åŠ äº¤æ¢æ–‡ä»¶</div><div class="line">mkdir /etc/swap/</div><div class="line">dd <span class="keyword">if</span>=/dev/zero of=/etc/swap/swap bs=1024 count=1024000  1ä¸ªG</div><div class="line">3ã€åˆ›å»ºäº¤æ¢ç©ºé—´</div><div class="line">mkswap /etc/swap/swap</div><div class="line">4ã€å¯åŠ¨äº¤æ¢ç©ºé—´</div><div class="line">swapon /etc/swap/swap</div><div class="line">5ã€æŸ¥çœ‹æ–°å¢ç©ºé—´</div><div class="line">free -tom</div><div class="line">6ã€ä¿®æ”¹/etc/fstabæ–‡ä»¶ä½¿ç³»ç»Ÿåœ¨é‡æ–°å¯åŠ¨çš„æ—¶å€™ç”Ÿæ•ˆ</div><div class="line">/etc/swap/swap         swap                    swap    defaults        0 0</div></pre></td></tr></table></figure>
<h3 id="11-Zabbix-agentæ—¥å¿—ç«¯hostnameä¸ä¸€è‡´ï¼šcannot-send-list-of-active-checks-to-192-168-0-1-host-Zabbix-server-not-found"><a href="#11-Zabbix-agentæ—¥å¿—ç«¯hostnameä¸ä¸€è‡´ï¼šcannot-send-list-of-active-checks-to-192-168-0-1-host-Zabbix-server-not-found" class="headerlink" title="11.Zabbix-agentæ—¥å¿—ç«¯hostnameä¸ä¸€è‡´ï¼šcannot send list of active checks to [192.168.0.1]: host [Zabbix server] not found"></a>11.Zabbix-agentæ—¥å¿—ç«¯hostnameä¸ä¸€è‡´ï¼š<code>cannot send list of active checks to [192.168.0.1]: host [Zabbix server] not found</code></h3><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">æŸ¥çœ‹è¢«ç›‘æ§æœºä¸Šçš„/tmp/zabbix_agentd.<span class="built_in">log</span>ï¼Œæ˜¾ç¤ºæ—¥å¿—ï¼š</div><div class="line">No active checks <span class="keyword">on</span> <span class="built_in">server</span>: host [Zabbix <span class="built_in">server</span>] <span class="keyword">not</span> found</div><div class="line"></div><div class="line">è¿™æ˜¯å› ä¸ºï¼Œé€šè¿‡zabbix dashboardé¡µé¢é…ç½®çš„è¢«ç›‘æ§ä¸»æœºåè·Ÿè¢«ç›‘æ§ä¸»æœºä¸Šzabbix_agentd.confä¸­é…ç½®çš„Hostnameä¸ä¸€è‡´ã€‚</div><div class="line"></div><div class="line">ä¿®æ”¹ä¸ºä¸€è‡´çš„åå­—åï¼Œé‡å¯zabbix_agentdå³å¯ã€‚</div></pre></td></tr></table></figure>
<h3 id="12-è§£å†³CentOS-7å®‰è£…zabbix-3-0-æ— æ³•å¯åŠ¨zabbix-serverçš„é—®é¢˜"><a href="#12-è§£å†³CentOS-7å®‰è£…zabbix-3-0-æ— æ³•å¯åŠ¨zabbix-serverçš„é—®é¢˜" class="headerlink" title="12.è§£å†³CentOS 7å®‰è£…zabbix 3.0 æ— æ³•å¯åŠ¨zabbix-serverçš„é—®é¢˜"></a>12.è§£å†³CentOS 7å®‰è£…zabbix 3.0 æ— æ³•å¯åŠ¨zabbix-serverçš„é—®é¢˜</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@kvm zabbix_agentd.d]<span class="comment"># service zabbix-agent restart</span></div><div class="line">Redirecting to /bin/systemctl restart  zabbix-agent.service</div><div class="line">Job <span class="keyword">for</span> zabbix-agent.service failed because a configured resource <span class="built_in">limit</span> was exceeded. See <span class="string">"systemctl status zabbix-agent.service"</span> and <span class="string">"journalctl -xe"</span> <span class="keyword">for</span> details.</div><div class="line"></div><div class="line">è§£å†³æ–¹æ¡ˆ:</div><div class="line">å…³é—­SELinuxæœåŠ¡ ã€‚ æ‰§è¡Œå‘½ä»¤</div><div class="line">setenforce 0 </div><div class="line"></div><div class="line">3. é‡å¯zabbix</div><div class="line">systemctl  restart  zabbix-server.service</div></pre></td></tr></table></figure>
<h3 id="13-zabbix-è¿”å›å€¼ä¸ºç©º-é”®å€¼æ¨¡æ¿æŠ¥é”™ï¼šReceived-value-is-not-suitable-for-value-type-Numeric-unsigned-and-data-type-Decimal"><a href="#13-zabbix-è¿”å›å€¼ä¸ºç©º-é”®å€¼æ¨¡æ¿æŠ¥é”™ï¼šReceived-value-is-not-suitable-for-value-type-Numeric-unsigned-and-data-type-Decimal" class="headerlink" title="13.zabbix è¿”å›å€¼ä¸ºç©º é”®å€¼æ¨¡æ¿æŠ¥é”™ï¼šReceived value [] is not suitable for value type [Numeric (unsigned)] and data type [Decimal]"></a>13.zabbix è¿”å›å€¼ä¸ºç©º é”®å€¼æ¨¡æ¿æŠ¥é”™ï¼š<code>Received value [] is not suitable for value type [Numeric (unsigned)] and data type [Decimal]</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">è§£å†³ï¼š</div><div class="line">æœ¬åœ°è„šæœ¬è·å–å€¼æœ‰è¿”å›ï¼Œè„šæœ¬æ²¡æœ‰zabbixèµ‹æƒ~</div><div class="line">ç›‘æ§ç«¯æ‰§è¡Œè„šæœ¬ï¼š</div><div class="line">[root@jollychic-db-slave4 zabbix]<span class="comment"># sh mysql3307.sh Qcache_queries_in_cache</span></div><div class="line">87</div><div class="line"></div><div class="line">zabbix æœåŠ¡ç«¯ï¼š</div><div class="line">[root@yum-zabbix ~]<span class="comment">#  zabbix_get -s 10.155.74.247 -k mysql.status3307[Threads_running]</span></div><div class="line"></div><div class="line">è¿”å›ç©ºè¿™é‡Œå°±æ˜¯è„šæœ¬æ²¡æœ‰zabbixèµ‹æƒ~</div><div class="line">è¿™é‡Œè„šæœ¬éœ€è¦æ·»åŠ ä¸‹-h127.0.0.1 å³å¯</div></pre></td></tr></table></figure>
<h3 id="14-è§£å†³Zabbixâ€œZBX-NOTSUPPORTED-Timeout-while-executing-a-shell-scriptâ€"><a href="#14-è§£å†³Zabbixâ€œZBX-NOTSUPPORTED-Timeout-while-executing-a-shell-scriptâ€" class="headerlink" title="14.è§£å†³Zabbixâ€œZBX_NOTSUPPORTED: Timeout while executing a shell scriptâ€"></a>14.è§£å†³<code>Zabbixâ€œZBX_NOTSUPPORTED: Timeout while executing a shell scriptâ€</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">è§£å†³æ–¹æ¡ˆ</div><div class="line"></div><div class="line">ï¼ˆ1ï¼‰ä¿®æ”¹zabbix_serverçš„zabbix_server.confï¼š</div><div class="line">[root@nmp01 scripts]<span class="comment"># vim /usr/local/zabbix/etc/zabbix_server.conf</span></div><div class="line">ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š</div><div class="line">Timeout=30</div><div class="line">æ³¨ï¼šè¶…æ—¶æ—¶é—´ä¸º30ç§’</div><div class="line"></div><div class="line">ï¼ˆ2ï¼‰ä¿®æ”¹è„šæœ¬æ‰€åœ¨zabbix_agentdçš„zabbix_agentd.confï¼š</div><div class="line"></div><div class="line">vim /usr/<span class="built_in">local</span>/zabbix/etc/zabbix_agentd.conf</div><div class="line">ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š</div><div class="line">Timeout=30</div><div class="line">ï¼ˆ3ï¼‰é‡å¯zabbixæœåŠ¡ç«¯å’Œè„šæœ¬æ‰€åœ¨å®¢æˆ·ç«¯ï¼š</div><div class="line">service zabbix_server restart</div><div class="line">service zabbix_agentd restart</div></pre></td></tr></table></figure>
<h3 id="15-Zabbix3-0-poller-processes-more-than-75-busyè­¦æŠ¥å¤„ç†"><a href="#15-Zabbix3-0-poller-processes-more-than-75-busyè­¦æŠ¥å¤„ç†" class="headerlink" title="15.Zabbix3.0 poller processes more than 75% busyè­¦æŠ¥å¤„ç†"></a>15.<code>Zabbix3.0 poller processes more than 75% busy</code>è­¦æŠ¥å¤„ç†</h3><p>å‘Šè­¦åŸå› ï¼š</p>
<p>1.æŸä¸ªè¿›ç¨‹å¡ä½äº†ï¼Œ<br>2.åƒµå°¸è¿›ç¨‹å‡ºé”™ï¼Œå¤ªå¤šï¼Œå¯¼è‡´æ…¢äº†<br>3.ç½‘ç»œå»¶è¿Ÿï¼ˆå¯å¿½ç•¥ï¼‰<br>4.zabbixæ¶ˆè€—çš„å†…å­˜å¤šäº†</p>
<p>ä¸€ï¼šç®€å•ï¼Œç²—æš´ï¼ˆé‡å¯zabbix-serverå¯ç»“åˆå®šæ—¶ä»»åŠ¡ä½¿ç”¨ï¼‰</p>
<p>è™½ç„¶Zabbixçš„ç›‘æ§è­¦æŠ¥å„ç§æœ‰ï¼Œä½†<code>yancy</code>ä½¿ç”¨ç¢°åˆ°æœ€å¤šçš„å‡ ä¸ªè«è¿‡äºå†…å­˜è€—å°½ï¼Œç½‘ç»œä¸é€šï¼ŒIOå¤ªæ…¢è¿˜æœ‰è¿™ä¸ªâ€œZabbix poller processes more than 75% busyâ€äº†ã€‚ä¸€å¼€å§‹çš„æ—¶å€™å› ä¸ºè¿™ä¸ªå³ä¸å½±å“ä½¿ç”¨ä¹ŸæŒç»­ä¸€ä¼šå„¿å°±è‡ªè¡Œè§£å†³å°±æ²¡æœ‰å¤šåœ¨æ„ã€‚ç„¶åéšç€æ•°æ®åº“çš„å¢å¤§ï¼ŒZabbixæ¶ˆè€—çš„å†…å­˜å¯æ˜¯è¶Šæ¥è¶Šå¤šï¼ŒPoller processesï¼ˆè½®è¯¢ï¼‰å¼€å§‹å¤©å¤©Busyäº†ï¼Œæœ€ç»ˆ<code>yancy</code>ä¸å¾—ä¸æŠŠZabbixæŒªåˆ°äº†å¦å¤–ä¸€å°æœåŠ¡å™¨ä¸Šã€‚</p>
<p>ä½†è¿™å¹¶æ²¡æœ‰å½»åº•è§£å†³é—®é¢˜ï¼Œè­¦æŠ¥ä»ç„¶ä¸‰å¤©ä¸¤å¤´æ¥å‡ ä¸ªã€‚ä¹‹åKaijiaå¼€å¯äº†Zabbixè­¦æŠ¥çš„é‚®ä»¶åŠŸèƒ½ï¼Œäºæ˜¯å¼€å§‹é¢‘ç¹æ”¶åˆ°è¿™ç±»é‚®ä»¶ï¼Œäºæ˜¯Kaijiaå†³å®šè§£å†³è¿™ä¸ªé—®é¢˜ã€‚Googleäº†ä¸€ä¸‹èµ„æ–™ï¼Œæ²¡æœ‰æ‰¾åˆ°å¾ˆæƒå¨çš„ç­”æ¡ˆï¼Œé€ æˆè½®è¯¢å¿™çš„é—®é¢˜æœ‰å¾ˆå¤šä¸­ï¼Œæ”¯æ’‘Zabbixçš„MySQLå¡ä½äº†ï¼ŒZabbixæœåŠ¡å™¨çš„IOå¡ä½äº†éƒ½æœ‰å¯èƒ½ï¼ŒZabbixè¿›ç¨‹åˆ†é…åˆ°å†…å­˜ä¸è¶³éƒ½æœ‰å¯èƒ½ã€‚ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ˜¯å¢åŠ Zabbix Serverå¯åŠ¨æ—¶åˆå§‹åŒ–çš„è¿›ç¨‹æ•°é‡ï¼Œè¿™æ ·ç›´æ¥å¢åŠ äº†è½®è¯¢çš„è´Ÿè½½é‡ï¼Œä»æ¯”ä¾‹ä¸Šæ¥è®²å¿™çš„æƒ…å†µå°±å°‘äº†ã€‚</p>
<p>å¢åŠ åˆå§‹åŒ–è¿›ç¨‹çš„æ–¹æ³•éå¸¸ç®€å•ï¼Œç¼–è¾‘Zabbix Serverçš„é…ç½®æ–‡ä»¶<code>/etc/zabbix/zabbix_server.conf</code>ï¼Œæ‰¾åˆ°é…ç½®StartPollersçš„æ®µè½ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">1. <span class="comment">### Option: StartPollers</span></div><div class="line">2. <span class="comment">#       Number of pre-forked instances of pollers.</span></div><div class="line">3. <span class="comment">#</span></div><div class="line">4. <span class="comment"># Mandatory: no</span></div><div class="line">5. <span class="comment"># Range: 0-1000</span></div><div class="line">6. <span class="comment"># Default:</span></div><div class="line">7. <span class="comment"># StartPollers=5</span></div></pre></td></tr></table></figure>
<p>å–æ¶ˆStartPollers=ä¸€è¡Œçš„æ³¨é‡Šæˆ–è€…ç›´æ¥åœ¨åé¢å¢åŠ ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">StartPollers=10</div></pre></td></tr></table></figure>
<p>å› ä¸ºä¹‹å‰zabbixé™¤äº†å•ç‹¬è·‘ä¸€ä¸ªserveræœåŠ¡è¿˜æœ‰<code>agent</code>è¿˜æœ‰<code>grafana-server</code>è¿˜æœ‰ä»£ç†ï¼Œåé¢æˆ‘å…ˆæ‰©å¤§å†…å­˜å’ŒæœåŠ¡å™¨CPU.<br>å°†StartPollersæ”¹æˆå¤šå°‘å–å†³äºæœåŠ¡å™¨çš„æ€§èƒ½å’Œç›‘æ§çš„æ•°é‡ï¼ŒKaijiaå°†StartPollersè®¾ç½®æˆ12ä¹‹åå°±å†æ²¡æœ‰é‡åˆ°è¿‡è­¦æŠ¥ã€‚å¦‚æœå†…å­˜è¶³å¤Ÿçš„è¯å¯ä»¥è®¾ç½®æ›´é«˜ã€‚è®¾ç½®å®Œæˆä¹‹åè¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service zabbix-server restart</div></pre></td></tr></table></figure>
<p>é‡å¯Zabbixã€‚å½“ç„¶å¦å¤–ä¸€ç§ä»æ•´ä½“ä¸Šé™ä½ZabbixæœåŠ¡å™¨è´Ÿè½½çš„æ–¹æ³•å°±æ˜¯å®šæœŸé‡å¯Zabbixï¼Œè¿™ç§æ–¹æ³•å¯ä»¥ç”¨Cronå®ç°ï¼Œè¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">crontab <span class="_">-e</span></div></pre></td></tr></table></figure>
<p>åœ¨è°ƒå‡ºçš„Cronç¼–è¾‘å™¨ä¸­å¢åŠ ä¸€ä¸ªè®¡åˆ’ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">00 * * * * service zabbix-server restart &gt; /dev/null 2&gt;&amp;1</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªè®¡åˆ’ä¼šæ¯å¤©è‡ªåŠ¨é‡å¯ZabbixæœåŠ¡ä»¥ç»“æŸåƒµå°¸è¿›ç¨‹å¹¶æ¸…ç†å†…å­˜ç­‰ã€‚ç›®å‰Kaijiaè¿™æ ·é…ç½®Zabbixåè¿˜æ²¡æœ‰å†æ¬¡é‡åˆ°è¿‡â€œZabbix poller processes more than 75% busyâ€çš„é—®é¢˜ã€‚</p>
<h3 id="16ã€Zabbix3-0-monitoringå‡ºç°ä¹±ç "><a href="#16ã€Zabbix3-0-monitoringå‡ºç°ä¹±ç " class="headerlink" title="16ã€Zabbix3.0-monitoringå‡ºç°ä¹±ç "></a>16ã€Zabbix3.0-monitoringå‡ºç°ä¹±ç </h3><p>å‡ºç°ä¹±ç ï¼š</p>
<ul>
<li>ä¹±ç å®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼š<a href="http://oak0aohum.bkt.clouddn.com/simkai.ttf" target="_blank" rel="external">ä¸­æ–‡æ±‰åŒ–ä¹±ç åŒ…</a></li>
</ul>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">* å‚è€ƒæ–‡æ¡£ï¼š</div><div class="line">zabbixç‰ˆæœ¬éƒ½å·²æœ‰æ±‰åŒ–åŠŸèƒ½äº†ï¼Œç›´æ¥é€‰æ‹©ä¸­æ–‡å°±è¡Œã€‚</div><div class="line">å¯æ˜¯ä½ç‰ˆæœ¬çš„å°±éœ€è¦å®‰è£…æ±‰åŒ–ï¼Œå¯æ˜¯å‘ç°æ‰“å¼€å›¾å½¢ç•Œé¢æ˜¯ç©ºç™½å›¾å½¢ï¼š</div><div class="line">é‡åˆ°ä¸­æ–‡ä¹±ç é—®é¢˜ã€‚zabbixä¹±ç æ˜¯æ€ä¹ˆç…§æˆçš„å‘¢ï¼Ÿzabbixä½¿ç”¨DejaVuSan.ttfå­—ä½“ï¼Œä¸æ”¯æŒä¸­æ–‡ï¼Œå¯¼è‡´ä¸­æ–‡å‡ºç°ä¹±ç ã€‚è§£å†³æ–¹æ³•å¾ˆç®€å•ï¼ŒæŠŠæˆ‘ä»¬ç”µè„‘é‡Œé¢å­—ä½“æ–‡ä»¶ä¼ åˆ°zabbixæœåŠ¡å™¨ä¸Šã€‚</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">* åœ¨zabbix<span class="params">-server</span>ç«¯ä¸Šé¢è¿›å…¥å®‰è£…ç›®å½•ï¼š</div><div class="line"></div><div class="line"><span class="built_in">var</span>/www/html/zabbix/fontsç›®å½•ä¸‹é¢æŸ¥çœ‹ï¼Œå‘ç°ä¹‹å‰ä¸Šä¼ å­—ä½“çš„æ–‡ä»¶ååç¼€æ˜¯.ttcï¼ŒçŒœç€ä¸€èˆ¬è§åˆ°çš„éƒ½åç¼€éƒ½æ˜¯ttfçš„ï¼Œä¼šä¸ä¼šæ˜¯è¿™ä¸ªé—®é¢˜å¯¼è‡´çš„å‘¢ã€‚äºæ˜¯åœ¨windowsç³»ç»Ÿä¸Šæ‰¾åˆ°simkai.ttf,ä¸Šä¼ åˆ°fontsä¸‹ï¼Œç¼–è¾‘/<span class="built_in">var</span>/www/html/zabbix/include/defines.inc.phpï¼Œæ›´æ”¹ä¸¤å¤„åœ°æ–¹ï¼š</div><div class="line"></div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">define</span></span>(â€˜ZBX_FONT_NAMEâ€˜, â€˜simkaiâ€˜);</div><div class="line">    <span class="class"><span class="keyword">define</span></span>(â€˜ZBX_GRAPH_FONT_NAMEâ€˜,  â€˜simkaiâ€˜);</div><div class="line">fzytk</div></pre></td></tr></table></figure>
<p>è®¾ç½®å¥½äº†ï¼ŒæœåŠ¡é‡å¯ä¸‹ï¼Œåˆ·æ–°ï¼Œå›¾ä¸‹é¢å°±æœ‰å­—ä½“äº†ï¼š</p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-luanma.png" alt=""><br>graphfont</p>
<p>å¸¸è§é—®é¢˜ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">ä¾æ—§ä¹±ç ï¼šé€šè¿‡ä»¥ä¸Šçš„æ“ä½œï¼Œå¤§éƒ¨åˆ†åŒå­¦çš„ä¹±ç é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯ä¾æ—§æœ‰ä¸€äº›åŒå­¦è¿˜æ˜¯ä¹±ç ï¼Ÿç»†å¿ƒçš„ç¾¤å‹æä¾›å¦å¤–ä¸€ç§æƒ…å†µï¼šåˆå§‹åŒ–æ•°æ®åº“çš„æ—¶å€™æœªä½¿ç”¨utf8ç¼–ç æ‰€è‡´.åˆå§‹åŒ–æ•°æ®åº“ä½¿ç”¨å‘½ä»¤</div><div class="line"></div><div class="line">create database zabbix default charset utf8;</div><div class="line">æˆ–è€…my.cnfå¢åŠ å¦‚ä¸‹é…ç½®</div><div class="line"></div><div class="line">default-character-set = utf8</div><div class="line"></div><div class="line">æ€»ç»“ </div><div class="line">ä¹±ç å¤„ç†æ–¹æ³•å¾ˆç®€å•ï¼Œå®é™…ä¸Šå°±æ˜¯æ›¿æ¢å­—ä½“ã€‚</div></pre></td></tr></table></figure>
<h3 id="äº¤æµå­¦ä¹ ï¼š"><a href="#äº¤æµå­¦ä¹ ï¼š" class="headerlink" title="äº¤æµå­¦ä¹ ï¼š"></a>äº¤æµå­¦ä¹ ï¼š</h3><p>ğŸ§  Linux shell_é«˜çº§è¿ç»´æ´¾: <code>459096184</code>    åœˆå­ (ç³»ç»Ÿè¿ç»´-åº”ç”¨è¿ç»´-è‡ªåŠ¨åŒ–è¿ç»´-è™šæ‹ŸåŒ–æŠ€æœ¯ç ”ç©¶æ¬¢è¿åŠ å…¥)<br>ğŸ§  BigData-Exchange School : <code>521621407</code>  åœˆå­ï¼ˆå¤§æ•°æ®è¿ç»´)ï¼ˆHadoopå¼€å‘äººå‘˜)ï¼ˆå¤§æ•°æ®ç ”ç©¶çˆ±å¥½è€…) æ¬¢è¿åŠ å…¥</p>
<p>ç›¸åº”Bidataæœ‰å†…éƒ¨å¾®ä¿¡äº¤æµç¾¤äº’ç›¸å­¦ä¹ ï¼ŒåŠ å…¥QQç¾¤æœ‰é“¾æ¥ã€‚</p>


                <hr>

                

                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2014/10/05/æ€§èƒ½ç›‘æ§/Zabbix/zabbixé‚®ä»¶å‘Šè­¦/" data-toggle="tooltip" data-placement="top" title="zabbixé‚®ä»¶å‘Šè­¦">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2014/10/03/æ€§èƒ½ç›‘æ§/Zabbix/zabbix2.4æœåŠ¡ç«¯yum-rpmå¿«é€Ÿå®‰è£…éƒ¨ç½²/" data-toggle="tooltip" data-placement="top" title="zabbix2.4æœåŠ¡ç«¯rpmå¿«é€Ÿå®‰è£…éƒ¨ç½²">Next Post &rarr;</a>
                        </li>
                    
                </ul>
		 

                

                
                <!-- disqus è¯„è®ºæ¡† start -->
                <div class="comment">
                    <div id="disqus_thread" class="disqus-thread"></div>
                </div>
                <!-- disqus è¯„è®ºæ¡† end -->
                

            </div>
    <!-- Side Catalog Container -->
        

    <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Zabbix monitoring" title="Zabbix monitoring">Zabbix monitoring</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="http://openskill.cn/" target="_blank">openskill.cn</a></li>
                    
                        <li><a href="http://yuzhouwan.com/" target="_blank">Benedict Jin&#39;s Blog</a></li>
                    
                </ul>
                
            </div>

        </div>
    </div>
</article>





<!-- disqus å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "blog-yancy-cc";
    var disqus_identifier = "http://blog.yancy.cc/2014/10/04/æ€§èƒ½ç›‘æ§/Zabbix/zabbix-æ•…éšœæ€»ç»“/";
    var disqus_url = "http://blog.yancy.cc/2014/10/04/æ€§èƒ½ç›‘æ§/Zabbix/zabbix-æ•…éšœæ€»ç»“/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus å…¬å…±JSä»£ç  end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                    <li>
                        <a target="_blank" href="https://twitter.com/yancyoo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/benet1006">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">çŸ¥</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/yangcvo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/yangcvo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Grocery store 2019 
                    <br>
                 Theme by <a href="http://chengyangyang.com">Chengyangyang.com</a>
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span>
                    Ported by <a href="http://chengyangyang.com">Yancy.blog</a>

                    <!--<iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=kaijun&repo=hexo-theme-huxblog&type=star&count=true" >
                    </iframe>--> 
		</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://blog.yancy.cc/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->




<!-- Baidu Tongji -->


<!-- Side Catalog -->





<!-- Image to hack wechat -->
<img src="http://blog.yancy.cc/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
