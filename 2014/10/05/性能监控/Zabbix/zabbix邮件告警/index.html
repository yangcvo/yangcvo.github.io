<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>zabbixé‚®ä»¶å‘Šè­¦ | Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		<article>
	
		<h1>zabbixé‚®ä»¶å‘Šè­¦</h1>
	
	<div class="article__infos">
		<span class="article__date">2014-10-05</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/monitoring/">monitoring</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Zabbix-monitoring/">Zabbix monitoring</a>
			</span>
		
	</div>

	

	
		<h2 id="æ“ä½œç³»ç»Ÿç¯å¢ƒï¼š"><a href="#æ“ä½œç³»ç»Ÿç¯å¢ƒï¼š" class="headerlink" title="æ“ä½œç³»ç»Ÿç¯å¢ƒï¼š"></a>æ“ä½œç³»ç»Ÿç¯å¢ƒï¼š</h2><p>CentOS release 6.7 (Final)</p>
<p>zabbixç‰ˆæœ¬2.4.7</p>
<p>å…³äºæ“ä½œç³»ç»ŸCentOS6.0 ä»¥ä¸‹ç‰ˆæœ¬éƒ½æ˜¯é€šè¿‡mailå‘½ä»¤è°ƒç”¨sendmailçš„sm-clientå‘é€é‚®ä»¶ï¼Œæ‰€ä»¥å¦‚æœå…³é—­sendmailæŒ‰ç…§å¾ˆå¤šç½‘ä¸Šçš„æ–‡æ¡£æ˜¯å‘ä¸å‡ºé‚®ä»¶çš„ã€‚</p>
<p>centos 6.0ä»¥ä¸Šç‰ˆæœ¬</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">é»˜è®¤å·²ç»å®‰è£…å¥½sendmail</div><div class="line">é»˜è®¤å·²ç»å®‰è£…å¥½postfix</div></pre></td></tr></table></figure>
<p>sendmailå’Œpostfixåªéœ€è¦å®‰è£…ä¸€ä¸ªå³å¯å¹¶å¼€å¯æœåŠ¡å³å¯ã€‚</p>
<h3 id="å®ç°ç›®çš„ï¼š"><a href="#å®ç°ç›®çš„ï¼š" class="headerlink" title="å®ç°ç›®çš„ï¼š"></a>å®ç°ç›®çš„ï¼š</h3><p>åœ¨ZabbixæœåŠ¡ç«¯è®¾ç½®é‚®ä»¶æŠ¥è­¦ï¼Œå½“è¢«ç›‘æ§ä¸»æœºå®•æœºæˆ–è€…è¾¾åˆ°è§¦å‘å™¨é¢„è®¾å€¼æ—¶ï¼Œä¼šè‡ªåŠ¨å‘é€æŠ¥è­¦é‚®ä»¶åˆ°æŒ‡å®šé‚®ç®±ï¼Œå®šä½å“ªé‡Œå‡ºç°é—®é¢˜ï¼Œå¯ä»¥åŠæ—¶çš„è§£å†³ã€‚</p>
<h3 id="1-å®‰è£…é‚®ä»¶å‘é€å·¥å…·mailx"><a href="#1-å®‰è£…é‚®ä»¶å‘é€å·¥å…·mailx" class="headerlink" title="1.å®‰è£…é‚®ä»¶å‘é€å·¥å…·mailx"></a>1.å®‰è£…é‚®ä»¶å‘é€å·¥å…·mailx</h3><p>CentOS 6.x ç¼–è¯‘å®‰è£…mailxï¼Œç›´æ¥yumå®‰è£…çš„mailxç‰ˆæœ¬å¤ªæ—§ï¼Œä½¿ç”¨å¤–éƒ¨é‚®ä»¶å‘é€ä¼šæœ‰é—®é¢˜ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yum <span class="keyword">install</span> mailx <span class="comment">#å®‰è£…</span></div><div class="line"></div><div class="line">yum <span class="keyword">remove</span> mailx <span class="comment">#å¸è½½ç³»ç»Ÿè‡ªå¸¦çš„æ—§ç‰ˆmailx</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ç”¨ç¼–è¯‘å®‰è£…çš„å¾ˆç®€å•å‡ æ­¥å°±å¯ä»¥äº†ã€‚</p>
<p>mailä¸‹è½½åœ°å€:<a href="http://www.linuxfromscratch.org/blfs/view/stable/basicnet/mailx.html" target="_blank" rel="external">Downloads</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root@salt ~]<span class="comment"># curl -O http://ftp.debian.org/debian/pool/main/h/heirloom-mailx/heirloom-mailx_12.5.orig.tar.gz</span></div><div class="line">[root@salt ~]<span class="comment"># tar -zxvf heirloom-mailx_12.5.orig.tar.gz </span></div><div class="line">[root@salt ~]<span class="comment"># cd heirloom-mailx-12.5</span></div><div class="line">[root@salt heirloom-mailx-12.5]<span class="comment"># make</span></div><div class="line">[root@salt heirloom-mailx-12.5]<span class="comment"># make install UCBINSTALL=/usr/bin/install</span></div><div class="line">[root@salt heirloom-mailx-12.5]<span class="comment"># ln -s /usr/local/bin/mailx /bin/mail #åˆ›å»ºmailxåˆ°mailçš„è½¯è¿æ¥</span></div><div class="line">[root@salt heirloom-mailx-12.5]<span class="comment"># ln -s /etc/nail.rc /etc/mail.rc #åˆ›å»ºmailxé…ç½®æ–‡ä»¶è½¯è¿æ¥</span></div><div class="line">[root@salt heirloom-mailx-12.5]<span class="comment"># whereis mailx   #æŸ¥çœ‹å®‰è£…è·¯å¾„</span></div><div class="line">mailx: /bin/mailx /usr/<span class="built_in">local</span>/bin/mailx /usr/share/man/man1p/mailx.1p.gz /usr/share/man/man1/mailx.1.gz   </div><div class="line">[root@salt heirloom-mailx-12.5]<span class="comment"># mailx -V     #æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</span></div><div class="line">12.5 6/20/10</div></pre></td></tr></table></figure>
<p>å®‰è£…å®Œä»¥åæˆ‘ä»¬æ¥æµ‹è¯•ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@salt]<span class="comment"># echo "zabbix test mail" |mail -s zabbix" it@hz-health.cn</span></div><div class="line">[root@salt]<span class="comment"># send-mail: warning: inet_protocols: IPv6 support is disabled: Address family not supported by protocol</span></div><div class="line">send-mail: warning: inet_protocols: configuring <span class="keyword">for</span> IPv4 support only</div><div class="line">postdrop: warning: inet_protocols: IPv6 support is disabled: Address family not supported by protocol</div><div class="line">postdrop: warning: inet_protocols: configuring <span class="keyword">for</span> IPv4 support only</div><div class="line">postdrop: warning: unable to look up public/pickup: No such file or directory</div></pre></td></tr></table></figure>
<p>å¦‚æœæœ‰å‡ºç°è¿™ä¸ªæŠ¥é”™ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸‹é…ç½®æ–‡ä»¶ã€‚<br>æŸ¥çœ‹å½“å‰inet_protocols</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># /usr/sbin/postconf | grep inet_protocols</span></div><div class="line">inet_protocols = all</div><div class="line">ä¿®æ”¹ipv4</div><div class="line"><span class="comment"># vi /etc/postfix/main.cf</span></div><div class="line">inet_protocols = all</div><div class="line">æ”¹ä¸º</div><div class="line">inet_protocols = ipv4</div><div class="line">é‡å¯postfix</div><div class="line">service postfix restart</div></pre></td></tr></table></figure>
<p>ç„¶ååœ¨æµ‹è¯•ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">[root@salt]#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"zabbix test mail"</span> |mail <span class="_">-s</span> <span class="string">"zabbix"</span> it@xxxx.cn</span></div></pre></td></tr></table></figure>
<p>æµ‹è¯•å‘é€é‚®ä»¶ï¼Œæ ‡é¢˜zabbixï¼Œé‚®ä»¶å†…å®¹ï¼šzabbix test mailï¼Œå‘é€åˆ°çš„é‚®ç®±ï¼šxxx.qq.com</p>
<p>è¿™æ—¶å€™ï¼Œé‚®ç®±yyy@qq.comä¼šæ”¶åˆ°æ¥è‡ªxxx@qq.comçš„æµ‹è¯•é‚®ä»¶ã€‚</p>
<h3 id="2ã€åˆ›å»ºé‚®ä»¶å‘Šè­¦çš„pythonè„šæœ¬"><a href="#2ã€åˆ›å»ºé‚®ä»¶å‘Šè­¦çš„pythonè„šæœ¬" class="headerlink" title="2ã€åˆ›å»ºé‚®ä»¶å‘Šè­¦çš„pythonè„šæœ¬"></a>2ã€åˆ›å»ºé‚®ä»¶å‘Šè­¦çš„pythonè„šæœ¬</h3><p>zabbix_serveræ·»åŠ è„šæœ¬é…ç½®:</p>
<ol>
<li>zabbixå®‰è£…è·¯å¾„ï¼šcd /usr/local/zabbix/share/zabbix/alertscripts</li>
</ol>
<p>ç¼–å†™è„šæœ¬ï¼š<br><code>vim /usr/local/zabbix/share/zabbix/alertscripts/zabbix_sendmail.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment">#coding:utf-8</span></div><div class="line"><span class="keyword">import</span> smtplib</div><div class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</div><div class="line"><span class="keyword">import</span> sys</div><div class="line">LOG_FILENAME=<span class="string">"/var/log/email_python.log"</span></div><div class="line">mail_host = <span class="string">'smtp.exmail.qq.com'</span>                  <span class="comment">#å®šä¹‰smtpæœåŠ¡å™¨</span></div><div class="line">mail_user = <span class="string">'it@xxxx.cn'</span>               <span class="comment">#å‘ä»¶äººé‚®ç®±</span></div><div class="line">mail_pass = <span class="string">'xxxxxxx'</span>                        <span class="comment">#å‘ä»¶äººé‚®ç®±å¯†ç </span></div><div class="line">mail_port = <span class="number">465</span>                            <span class="comment">#smtpæœåŠ¡å™¨çš„ç«¯å£å·ï¼Œä¸åŒçš„é‚®ç®±æœåŠ¡å™¨ç«¯å£å·ä¸åŒ</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_mail</span><span class="params">(to_list,subject,content)</span>:</span></div><div class="line">    me=<span class="string">"Zabbix Monitor"</span>+<span class="string">"&lt;"</span>+mail_user+<span class="string">"&gt;"</span>  <span class="comment">#å®šä¹‰å‘ä»¶äººæ˜¾ç¤ºåç§°ä¸ºZabbix Monitor</span></div><div class="line">    msg=MIMEText(content,_subtype=<span class="string">'plain'</span>,_charset=<span class="string">'gb2312'</span>)</div><div class="line">    msg[<span class="string">'Subject'</span>]=subject                 <span class="comment">#å®šä¹‰é‚®ä»¶ä¸»é¢˜</span></div><div class="line">    msg[<span class="string">'From'</span>]=me                         <span class="comment">#å‘é€æ–¹</span></div><div class="line">    msg[<span class="string">'to'</span>]=to_list                      <span class="comment">#æ¥æ”¶æ–¹</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        s=smtplib.SMTP_SSL()               <span class="comment">#åˆ›å»ºä¸€ä¸ªsmtpå¯¹è±¡</span></div><div class="line">        s.connect(mail_host,mail_port)     <span class="comment">#é€šè¿‡connectæ–¹æ³•è¿æ¥smtpä¸»æœº</span></div><div class="line">        s.login(mail_user,mail_pass)       <span class="comment">#é‚®ç®±è´¦æˆ·ç™»å½•è®¤è¯</span></div><div class="line">        s.sendmail(me,to_list,msg.as_string()) <span class="comment">#å‘é€é‚®ä»¶</span></div><div class="line">        s.close()                             <span class="comment">#æ–­å¼€smtpè¿æ¥</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">    <span class="keyword">except</span> Exception,e:</div><div class="line">        <span class="keyword">print</span> str(e)</div><div class="line">        <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    send_mail(sys.argv[<span class="number">1</span>],sys.argv[<span class="number">2</span>],sys.argv[<span class="number">3</span>])</div></pre></td></tr></table></figure>
<p>2ã€è„šæœ¬æ–‡ä»¶è·¯å¾„</p>
<p>å…ˆç¡®è®¤ä¸‹<code>zabbix_server.conf</code>æ–‡ä»¶ä¸­å®šä¹‰çš„å‘Šè­¦è„šæœ¬è·¯å¾„é…ç½®ï¼š</p>
<p>å¦‚æœæ³¨é‡Šäº†ï¼Œæ·»åŠ ä¸€æ¡ç»å¯¹è·¯å¾„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># AlertScriptsPath=$&#123;datadir&#125;/zabbix/alertscripts</span></div><div class="line"> AlertScriptsPath=/usr/<span class="built_in">local</span>/zabbix/share/zabbix/alertscripts</div></pre></td></tr></table></figure>
<p>ç„¶åå°†å‡†å¤‡å¥½çš„pythonè„šæœ¬å­˜æ”¾åˆ°è¯¥è·¯å¾„ä¸‹ï¼Œå¹¶æ›´æ”¹è„šæœ¬æ–‡ä»¶çš„æƒé™å’Œå±ä¸»å±ç»„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chown zabbix.zabbix   /usr/<span class="built_in">local</span>/zabbix/share/zabbix/alertscripts/zabbix_sendmail.py</div><div class="line">chmod +x   /usr/<span class="built_in">local</span>/zabbix/share/zabbix/alertscripts/zabbix_sendmail.py</div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šå¦‚æœåœ¨zabbix_server.confæ–‡ä»¶ä¸­æ²¡æœ‰è®¾ç½®Allow root=1ï¼Œåˆ™è¡¨ç¤ºzabbixæ˜¯ä»¥zabbixç”¨æˆ·å¯åŠ¨è€Œä¸æ˜¯rootï¼Œæ‰€ä»¥è„šæœ¬çš„å±ä¸»å±ç»„éƒ½åº”è¯¥è®¾ç½®ä¸ºzabbixç”¨æˆ·ã€‚è®¾ç½®ä¸ºrootç”¨æˆ·å¯åŠ¨çš„é…ç½®å¦‚ä¸‹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Option: AllowRoot</span></span></div><div class="line"><span class="meta">#</span><span class="bash">   Allow the server to run as <span class="string">'root'</span>. If disabled and the server is started by <span class="string">'root'</span>, the server</span></div><div class="line"><span class="meta">#</span><span class="bash">   will try to switch to user <span class="string">'zabbix'</span> instead. Has no effect <span class="keyword">if</span> started under a regular user.</span></div><div class="line"><span class="meta">#</span><span class="bash">   0 - <span class="keyword">do</span> not allow</span></div><div class="line"><span class="meta">#</span><span class="bash">   1 - allow</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Mandatory: no</span></div><div class="line"><span class="meta">#</span><span class="bash"> Default:</span></div><div class="line">AllowRoot=1</div></pre></td></tr></table></figure>
<p>é‡å¯æœåŠ¡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@salt alertscripts]<span class="comment"># /etc/init.d/zabbix_server restart</span></div><div class="line">Shutting down zabbix_server:                               [ç¡®å®š]</div><div class="line">Starting zabbix_server:                                    [ç¡®å®š]</div></pre></td></tr></table></figure>
<p>3ã€æµ‹è¯•è„šæœ¬æ–‡ä»¶å‘é€é‚®ä»¶æ˜¯å¦æˆåŠŸï¼Œè¿™ä¸€æ­¥å¾ˆé‡è¦</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./zabbix_sendmail.py cheng@health.cn <span class="string">"subject"</span> <span class="string">"zabbix"</span></div></pre></td></tr></table></figure>
<p>å·²ç»æµ‹è¯•okï¼Œå¯ä»¥æ”¶åˆ°é‚®ä»¶ï¼Œè¯´æ˜å†™çš„pythonè„šæœ¬æ²¡æœ‰é—®é¢˜ã€‚</p>
<h3 id="zabbix-webç«¯è®¾ç½®"><a href="#zabbix-webç«¯è®¾ç½®" class="headerlink" title="zabbix-webç«¯è®¾ç½®"></a>zabbix-webç«¯è®¾ç½®</h3><ul>
<li>é¦–å…ˆwebç«¯çš„é…ç½®é¡ºåºå¦‚ä¸‹ï¼š<br>åˆ›å»ºç”¨æˆ·åª’ä»‹â€“&gt;åˆ›å»ºç”¨æˆ·ç»„å’Œç”¨æˆ·â€“&gt;é’ˆå¯¹triggerï¼ˆè§¦å‘å™¨ï¼‰æ·»åŠ æŠ¥è­¦åŠ¨ä½œï¼Œè®¾ç½®é‚®ä»¶å‘é€ç”¨æˆ·åŠåª’ä»‹</li>
</ul>
<p>1.åˆ›å»ºç”¨æˆ·åª’ä»‹</p>
<ul>
<li><p>åˆ›å»ºç”¨æˆ·åª’ä»‹â€“&gt;åˆ›å»ºç”¨æˆ·ç»„å’Œç”¨æˆ·â€“&gt;Media typesâ€“&gt;Createmediatype     </p>
<ul>
<li>Mediatypeè®¾ç½®å¦‚ä¸‹ï¼Œ Nameé¡¹è‡ªå®šä¹‰ï¼ˆåˆ›å»ºç”¨æˆ·æ—¶ä¼šç”¨åˆ°è¿™ä¸ªåå­—),æˆ‘ä»¬ä½¿ç”¨è„šæœ¬æ¥å‘é‚®ä»¶ï¼Œæ‰€ä»¥Typeé¡¹è¯·é€‰æ‹©Scriptï¼ŒScripté¡¹åˆ™æ˜¯ä½ zabbix serverä¸Šçš„å‘é€é‚®ä»¶çš„è„šæœ¬åå­—</li>
<li><p>ï¼ˆæ³¨ï¼šå¦‚è„šæœ¬åå­—æ˜¯snedmail.py,é‚£æ­¤é¡¹å°±å¡«sendmailï¼Œåç¼€ä¸è¦)</p>
</li>
<li><p>zabbixä¼šä¼ ç»™è„šæœ¬ä¸‰ä¸ªå‚æ•°ï¼šæ¥æ”¶ç”¨æˆ·ï¼Œé‚®ä»¶ä¸»é¢˜ï¼Œé‚®ä»¶å†…å®¹</p>
</li>
</ul>
</li>
</ul>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-mail1.png" alt=""></figure></p>
<p>2.è®¾ç½®Zabbixç”¨æˆ·æŠ¥è­¦é‚®ç®±åœ°å€</p>
<ul>
<li>ç»„æ€-ç”¨æˆ·-Admin (Zabbix Administrator)<ul>
<li>å†åˆ°Mediaæ ‡ç­¾ä¸‹ï¼Œç‚¹å‡»Addæ·»åŠ ç”¨æˆ·åŠè¯¥ç”¨æˆ·çš„æŠ¥è­¦æ–¹å¼ï¼Œç„¶åTypeé¡¹é€‰æ‹©ä½ æ‰€åˆ›å»ºçš„é‚®ä»¶æŠ¥è­¦åå­—ï¼ˆMedia Typeï¼‰ï¼Œåœ¨Send toåå¡«å…¥ç”¨æˆ·çš„æŠ¥è­¦é‚®ç®±ï¼Œå…¶ä»–é»˜è®¤å³å¯ã€‚</li>
</ul>
</li>
</ul>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-mail2.png" alt=""></figure></p>
<p>3.è®¾ç½®Zabbixè§¦å‘æŠ¥è­¦çš„åŠ¨ä½œ</p>
<ul>
<li>ç»„æ€-åŠ¨ä½œ-åˆ›å»ºåŠ¨ä½œ</li>
</ul>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-mion3.png" alt=""></figure></p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="xml">åç§°ï¼šAction-Email</span></div><div class="line"></div><div class="line">é»˜è®¤æ¥æ”¶äººï¼šæ•…éšœ<span class="template-variable">&#123;TRIGGER.STATUS&#125;</span><span class="xml">,æœåŠ¡å™¨:</span><span class="template-variable">&#123;HOSTNAME1&#125;</span><span class="xml">å‘ç”Ÿ: </span><span class="template-variable">&#123;TRIGGER.NAME&#125;</span><span class="xml">æ•…éšœ!</span></div><div class="line"></div><div class="line">é»˜è®¤ä¿¡æ¯ï¼š</div><div class="line"></div><div class="line">å‘Šè­¦ä¸»æœº:<span class="template-variable">&#123;HOSTNAME1&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">å‘Šè­¦æ—¶é—´:<span class="template-variable">&#123;EVENT.DATE&#125;</span><span class="xml"> </span><span class="template-variable">&#123;EVENT.TIME&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">å‘Šè­¦ç­‰çº§:<span class="template-variable">&#123;TRIGGER.SEVERITY&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">å‘Šè­¦ä¿¡æ¯: <span class="template-variable">&#123;TRIGGER.NAME&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">å‘Šè­¦é¡¹ç›®:<span class="template-variable">&#123;TRIGGER.KEY1&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">é—®é¢˜è¯¦æƒ…:<span class="template-variable">&#123;ITEM.NAME&#125;</span><span class="xml">:</span><span class="template-variable">&#123;ITEM.VALUE&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">å½“å‰çŠ¶æ€:<span class="template-variable">&#123;TRIGGER.STATUS&#125;</span><span class="xml">:</span><span class="template-variable">&#123;ITEM.VALUE1&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">äº‹ä»¶ID:<span class="template-variable">&#123;EVENT.ID&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">æ¢å¤ä¿¡æ¯ï¼šæ‰“é’©</div><div class="line"></div><div class="line">æ¢å¤ä¸»æ—¨ï¼šæ¢å¤<span class="template-variable">&#123;TRIGGER.STATUS&#125;</span><span class="xml">, æœåŠ¡å™¨:</span><span class="template-variable">&#123;HOSTNAME1&#125;</span><span class="xml">: </span><span class="template-variable">&#123;TRIGGER.NAME&#125;</span><span class="xml">å·²æ¢å¤!</span></div><div class="line"></div><div class="line">æ¢å¤ä¿¡æ¯ï¼š</div><div class="line"></div><div class="line">å‘Šè­¦ä¸»æœº:<span class="template-variable">&#123;HOSTNAME1&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">å‘Šè­¦æ—¶é—´:<span class="template-variable">&#123;EVENT.DATE&#125;</span><span class="xml"> </span><span class="template-variable">&#123;EVENT.TIME&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">å‘Šè­¦ç­‰çº§:<span class="template-variable">&#123;TRIGGER.SEVERITY&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">å‘Šè­¦ä¿¡æ¯: <span class="template-variable">&#123;TRIGGER.NAME&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">å‘Šè­¦é¡¹ç›®:<span class="template-variable">&#123;TRIGGER.KEY1&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">é—®é¢˜è¯¦æƒ…:<span class="template-variable">&#123;ITEM.NAME&#125;</span><span class="xml">:</span><span class="template-variable">&#123;ITEM.VALUE&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">å½“å‰çŠ¶æ€:<span class="template-variable">&#123;TRIGGER.STATUS&#125;</span><span class="xml">:</span><span class="template-variable">&#123;ITEM.VALUE1&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">äº‹ä»¶ID:<span class="template-variable">&#123;EVENT.ID&#125;</span><span class="xml"></span></div><div class="line"></div><div class="line">å·²å¯ç”¨ï¼šæ‰“é’©</div></pre></td></tr></table></figure>
<p>åˆ›å»ºOperations</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-mail4.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-mail5.png" alt=""></figure></p>
<p>åˆ°è¿™é‡Œå°±åŸºæœ¬é…ç½®å®Œæ¯•äº†ã€‚</p>
<p>æµ‹è¯•ä¸‹å…³é—­agent 1åˆ†é’Ÿå·¦å³å¯ä»¥æ”¶åˆ°é‚®ä»¶ã€‚ å…³é—­é˜²ç«å¢™å’Œselinux å³å¯ï¼Œä¸å…³é—­é˜²ç«å¢™å¼€å¯10051ç«¯å£å’Œ10050ç«¯å£</p>
<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>æŸ¥çœ‹zabbixå®¡è®¡åŠ¨æ€æ—¥å¿—ï¼š<br>å‘é€æˆåŠŸ</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-mail7.png" alt=""></figure></p>
<p>é‚®ä»¶å·²æ¥æ”¶æˆåŠŸã€‚</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-mail8.png" alt=""></figure></p>
<p>å¾®ä¿¡å‘Šè­¦ä¹Ÿå·²å†™è¯¦ç»†æ–‡æ¡£ã€‚æ–‡æ¡£fileå·²ä¸Šä¼ githubä¸Šé¢äº†ã€‚</p>
<p>zabbix-server2.4æœåŠ¡ç«¯ç¼–è¯‘å®‰è£… <a href="http://blog.yangcvo.me/2015/01/18/zabbix-serveræœåŠ¡ç«¯ç¼–è¯‘å®‰è£…/" target="_blank" rel="external">zabbix-serveræœåŠ¡ç«¯ç¼–è¯‘å®‰è£…</a></p>
<p>zabbix2.4ç›‘æ§80ç«¯å£çŠ¶æ€ : <a href="http://blog.yangcvo.me/2016/07/20/zabbixç›‘æ§80ç«¯å£çŠ¶æ€/" target="_blank" rel="external">zabbixç›‘æ§80ç«¯å£çŠ¶æ€</a></p>
<p>zabbix+Grafanaå®‰è£…ä½¿ç”¨ç›‘æ§ç»“åˆ ï¼š<a href="http://blog.yangcvo.me/2016/07/13/zabbix-Grafanaå®‰è£…ä½¿ç”¨ç»“åˆ/" target="_blank" rel="external">zabbix+Grafanaå®‰è£…ä½¿ç”¨ç›‘æ§ç»“åˆ</a></p>
<p>zabbixç›‘æ§MySQL-æ·»åŠ è‡ªå®šä¹‰ç›‘æ§é¡¹ : <a href="http://blog.yangcvo.me/2015/09/29/zabbixç›‘æ§MySQL-æ·»åŠ è‡ªå®šä¹‰ç›‘æ§é¡¹/" target="_blank" rel="external">zabbixç›‘æ§MySQL-æ·»åŠ è‡ªå®šä¹‰ç›‘æ§é¡¹</a></p>
<p>zabbixçš„ICMP_Pingæ¨¡ç‰ˆå®ç°å¯¹å®¢æˆ·ç«¯ç½‘ç»œçŠ¶æ€çš„ç›‘æ§ : <a href="http://blog.yangcvo.me/2015/11/18/zabbixçš„ICMP-Pingæ¨¡ç‰ˆå®ç°å¯¹å®¢æˆ·ç«¯ç½‘ç»œçŠ¶æ€çš„ç›‘æ§/" target="_blank" rel="external">zabbixçš„ICMP_Pingæ¨¡ç‰ˆå®ç°å¯¹å®¢æˆ·ç«¯ç½‘ç»œçŠ¶æ€çš„ç›‘æ§</a></p>
<p>zabbixæ€§èƒ½ç›‘æ§æ•…éšœæ€»ç»“ <a href="http://blog.yangcvo.me/2016/02/07/zabbix-æ•…éšœæ€»ç»“/" target="_blank" rel="external">zabbixæ€§èƒ½ç›‘æ§æ•…éšœæ€»ç»“</a></p>

	

	
		<span class="different-posts"><a href="/2014/10/05/æ€§èƒ½ç›‘æ§/Zabbix/zabbixé‚®ä»¶å‘Šè­¦/" onclick="window.history.go(-1); return false;">â¬…ï¸ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2017 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
