<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>ç”¨æœ€ç®€å•çš„æ–¹å¼å®‰è£…smokeping | Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		<article>
	
		<h1>ç”¨æœ€ç®€å•çš„æ–¹å¼å®‰è£…smokeping</h1>
	
	<div class="article__infos">
		<span class="article__date">2014-04-19</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/monitoring/">monitoring</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/IDCç›‘æ§/">IDCç›‘æ§</a> <a class="article__tag-link" href="/tags/Performance-monitoring/">Performance monitoring</a> <a class="article__tag-link" href="/tags/Smokeping/">Smokeping</a>
			</span>
		
	</div>

	

	
		<p>smokepingè¿™ä¸ªç›‘æ§è¿˜æ˜¯å¾ˆå¼ºå¤§çš„ï¼Œç”¨è¿™ä¸ªç›‘æ§æ˜¯åœ¨ç¬¬ä¸€å®¶å…¬å¸åšIDCèµ·å®¶åé¢è½¬å‹CDNäº‘è®¡ç®—äº‘åŠ é€Ÿã€‚<br>è¿™ä¸ªä¹Ÿæ˜¯æˆ‘å­¦çš„æœ€æ—©çš„ä¸€æ¬¾ç›‘æ§ï¼Œåœ¨è¿™é‡Œæˆ‘ç”¨ç¼–è¯‘å®‰è£…æ–¹å¼ã€‚ä¹Ÿæœ‰è„šæœ¬å®‰è£…ä¸è¿‡éœ€è¦äº†è§£è¿‡somkepingå®‰è£…è¿‡ç¨‹ä¼šæ¯”è¾ƒçœ‹çš„æ‡‚è„šæœ¬ã€‚</p>
<p>é€‚ç”¨äºå®½å¸¦è¿è¥å•†ç»´æŠ¤å’ŒIDCæœºæˆ¿ç»´æŠ¤å¯ä»¥æ£€æµ‹æœ¬åœ°ç½‘ç»œçš„åˆ°ä¸Šçº§è¿è¥å•†å‡ºå£è¿™æ®µè·¯ç”±å„ä¸ªèŠ‚ç‚¹çš„ç¨³å®šæ€§            å¯ä»¥æ£€æµ‹æœ¬åœ°ç½‘ç»œåˆ°å„ä¸»è¦é—¨æˆ·ç½‘ç«™çš„<code>å»¶æ—¶ï¼Œä¸¢åŒ…ç‡ï¼Œç¨³å®šæ€§</code><br>å¯ä»¥æ£€æµ‹æœ¬åœ°ç½‘ç»œåˆ°å„åœ°æ¸¸æˆæœåŠ¡å™¨çš„<code>å»¶æ—¶ï¼Œä¸¢åŒ…ç‡ï¼Œç¨³å®šæ€§</code></p>
<p>smokepingç¼ºç‚¹ï¼šä¸èƒ½åœ¨å‰å°Webé¡µé¢æ·»åŠ è¦æ£€æµ‹çš„èŠ‚ç‚¹ï¼Œå¿…é¡»åœ¨åå°smokepingçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  </p>
<h3 id="å®‰è£…å‰çš„å‡†å¤‡ï¼š"><a href="#å®‰è£…å‰çš„å‡†å¤‡ï¼š" class="headerlink" title="å®‰è£…å‰çš„å‡†å¤‡ï¼š"></a>å®‰è£…å‰çš„å‡†å¤‡ï¼š</h3><ol>
<li>æ“ä½œç³»ç»Ÿï¼šé€‰æ‹©centOS6.5æœ€å°åŒ–ç‰ˆï¼Œ é‡Œé¢çš„RPMåŒ…åŸºæœ¬ä¸Šéƒ½æ˜¯æœ€æ–°çš„ã€‚   </li>
<li>æ³¨1: centOS 5.6ç‰ˆæœ¬åœ¨å®‰è£…rpmforge-release-0.5.3-1.el6.rf.x86_64.rpmåŒ…æ˜¯ä¼šé‡åˆ°ä¾èµ–æ€§é—®é¢˜ï¼Œè¦æ±‚å®‰è£…rpmlibåŒ…ï¼Œä½†centOS5.6ç‰ˆæœ¬ä¸­çš„rpmlibç‰ˆæœ¬è¾ƒä½ï¼Œæ— æ³•ç›´æ¥å®‰è£…   </li>
<li>æ³¨2ï¼šåœ¨å®‰è£…centOS6.5æ—¶ï¼Œè¦æ³¨æ„è®¾ç½®ç³»ç»Ÿçš„IPåœ°å€ï¼Œå¦‚ä¸‹å›¾,ç‚¹å‡»ã€configure networkã€‘æŒ‰é’®ï¼Œé€‰æ‹©ã€system eth0ã€‘, ç‚¹å‡» ã€IPv4Setingã€‘,è®¾ç½®IPåœ°å€    </li>
<li>æ³¨3: é€‰æ‹©å®‰è£…åŒ…æ—¶ï¼Œç‚¹é€‰ã€Basic Serverã€‘, è¦å®‰è£…621ä¸ªåŸºæœ¬åŒ… æ³¨4: å…¶ä»–å®‰è£…æ­¥éª¤ï¼ŒæŒ‰ç…§æ­£å¸¸çš„å®‰è£…æµç¨‹æ“ä½œå³å¯ </li>
</ol>
<h3 id="äºŒ-å®‰è£…è¿‡ç¨‹"><a href="#äºŒ-å®‰è£…è¿‡ç¨‹" class="headerlink" title="äºŒ. å®‰è£…è¿‡ç¨‹"></a>äºŒ. å®‰è£…è¿‡ç¨‹</h3><p>ä¿®æ”¹æ—¶åŒº</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">\cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</div></pre></td></tr></table></figure>
<p>åŒæ­¥æ—¶é—´</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ntpdate time.nist.gov</div></pre></td></tr></table></figure>
<p>å†™å…¥BIOS</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hwclock -w</div></pre></td></tr></table></figure>
<p>å…³é—­é˜²ç«å¢™</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service iptables stop</div></pre></td></tr></table></figure>
<h3 id="1-å®‰è£…ç¬¬ä¸‰æ–¹è½¯ä»¶æº"><a href="#1-å®‰è£…ç¬¬ä¸‰æ–¹è½¯ä»¶æº" class="headerlink" title="1. å®‰è£…ç¬¬ä¸‰æ–¹è½¯ä»¶æº"></a>1. å®‰è£…ç¬¬ä¸‰æ–¹è½¯ä»¶æº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">64ä½ç³»ç»Ÿ </div><div class="line">rpm  -Uvh http://apt.sw.be/redhat/el6/en/x86_64/rpmforge/RPMS/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm</div><div class="line">32ä½ç³»ç»Ÿ</div><div class="line">rpm  -Uvh http://apt.sw.be/redhat/el6/en/i386/rpmforge/RPMS/rpmforge-release-0.5.3-1.el6.rf.i686.rpm</div></pre></td></tr></table></figure>
<p>æ³¨ï¼šå®‰è£…è¿™ä¸ªæºåï¼Œæ¥ä¸‹æ¥è¦å®‰è£…çš„å¤§é‡çš„ä¾èµ–åŒ…å°±ä¸ä¼šæŠ¥é”™</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rpm -Uvh  http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm </div><div class="line">sed -i <span class="string">'s/^#baseurl/baseurl/g'</span> /etc/yum.repos.d/epel.repo</div><div class="line">sed -i <span class="string">'s/mirrorlist/#mirrorlist/g'</span> /etc/yum.repos.d/epel.repo</div></pre></td></tr></table></figure>
<h3 id="2-å®‰è£…rrdtoolä¸ä¾èµ–åº“"><a href="#2-å®‰è£…rrdtoolä¸ä¾èµ–åº“" class="headerlink" title="2. å®‰è£…rrdtoolä¸ä¾èµ–åº“"></a>2. å®‰è£…rrdtoolä¸ä¾èµ–åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y install perl perl-Net-Telnet perl-Net-DNS perl-LDAP perl-libwww-perl perl-RadiusPerl perl-IO-Socket-SSL perl-Socket6 perl-CGI-SpeedyCGI perl-FCGI perl-CGI-SpeedCGI perl-Time-HiRes perl-ExtUtils-MakeMaker perl-RRD-Simple rrdtool rrdtool-perl curl fping echoping  httpd httpd-devel gcc make  wget libxml2-devel libpng-devel glib pango pango-devel freetype freetype-devel fontconfig cairo cairo-devel libart_lgpl libart_lgpl-devel mod_fastcgi screen wqy-zenhei-fonts.noarch wqy-zenhei-fonts-common.noarch lrzsz nginx</div></pre></td></tr></table></figure>
<p>æ³¨ï¼š<code>perl-CGI-SpeedyCGIï¼Œperl-CGI-SpeedCGI</code>è¿™ä¸¤ä¸ªåŒ…åœ¨å®‰è£…è¿‡ç¨‹ä¸­ä¼šæç¤ºæ‰¾ä¸åˆ°ï¼Œä½†æ²¡å…³ç³»<br>æ³¨ï¼šç”¨yumå®‰è£…å¤§é‡çš„ä¾èµ–åŒ…è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œè€Œç™¾åº¦ä¸Šæœ‰äº›å…³äºå®‰è£…smokepingçš„æ–‡æ¡£è¦æ±‚ä½¿ç”¨wgetä¸‹è½½åå†ç”¨<code>make,make install</code>æ–¹å¼å®‰è£…ï¼Œè™½ç„¶makeæ–¹å¼ä¸å¤æ‚ï¼Œä½†é€šè¿‡makeç¼–è¯‘å†å®‰è£…å‡ åä¸ªåŒ…å°±æ˜¾å¾—æœ‰ç‚¹ç¹é”äº†ã€‚</p>
<h3 id="3-ä¸‹è½½ä¸å®‰è£…smokeping"><a href="#3-ä¸‹è½½ä¸å®‰è£…smokeping" class="headerlink" title="3.ä¸‹è½½ä¸å®‰è£…smokeping"></a>3.ä¸‹è½½ä¸å®‰è£…smokeping</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">wget http://oss.oetiker.ch/smokeping/pub/smokeping-2.6.8.tar.gz</div><div class="line">wget http://oss.oetiker.ch/smokeping/pub/smokeping-2.6.11.tar.gz    </div><div class="line">tar zxvf smokeping-2.6.8.tar.gz</div><div class="line"><span class="built_in">cd</span> smokeping-2.6.8</div><div class="line">./configure --prefix=/usr/<span class="built_in">local</span>/smokeping</div></pre></td></tr></table></figure>
<p>å‡ºç°é—®é¢˜æ˜¯å› ä¸ºéœ€è¦å®‰è£…perlçš„æ¨¡å—ï¼Œæ‰€ä»¥è¿è¡Œä¸‹é¢å†…å®¹å³å¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">å¦‚æœåªå‡ºç° Config::Grammar<span class="string">' ... Failed</span></div><div class="line">è§£å†³ 'Config::Grammar<span class="string">' ... Failed</span></div><div class="line">wget http://search.cpan.org/CPAN/authors/id/D/DS/DSCHWEI/Config-Grammar-1.10.tar.gz</div><div class="line">tar zxvf Config-Grammar-1.10.tar.gz</div><div class="line">cd Config-Grammar-1.10</div><div class="line">perl Makefile.PL</div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure>
<p>å¦‚æœå‡ºç°å¾ˆå¤šä¸ªfailedï¼Œå°±ç”¨ä¸‹é¢çš„æ–¹æ³•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">./setup/build-perl-modules.sh /usr/<span class="built_in">local</span>/smokeping/thirdparty  è¿™ä¸ªæ˜¯ä¸ºå‰é¢failedåšå®‰è£…  </div><div class="line">./co nfigure --prefix=/usr/<span class="built_in">local</span>/smokeping   </div><div class="line">                                                                      </div><div class="line">å¦‚æœè¿˜å‡ºç°é—®é¢˜å¯ä»¥çœ‹ä¸‹è¿™é‡Œé¢çš„å‚è€ƒã€‚http://bbs.51cto.com/thread-1106181-1.html</div><div class="line">/usr/bin/gmake install</div><div class="line"></div><div class="line">å®‰è£…ä¸‹yum install cpan     perl -MCPAN <span class="_">-e</span> <span class="string">'install CGI'</span>           perl -MCPAN <span class="_">-e</span> <span class="string">'install CGI::Fast '</span>  è¿™ä¸ªå®‰è£…å¥½äº†ç„¶åå†æ‰§è¡Œè¿™ä¸€æ­¥ã€‚</div></pre></td></tr></table></figure>
<p>å¦‚æœä¸Šé¢æç¤ºCGI æ²¡æœ‰å®‰è£…æˆåŠŸã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">wgethttp://www.cpan.org/authors/id/M/MA/MARKSTOS/</div><div class="line">CGI.pm-3.65.tar.gz</div><div class="line">tar zxvf CGI.pm-3.65.tar.gz</div><div class="line"><span class="built_in">cd</span> CGI.pm-3.65</div><div class="line">perl Makefile.PL</div><div class="line">make &amp;&amp; make install</div><div class="line">ç„¶åå†æ‰§è¡Œä¸‹ ./configure --prefix=/usr/<span class="built_in">local</span>/smokeping</div></pre></td></tr></table></figure>
<p>ç°åœ¨smokepingå®‰è£…å®Œæˆ</p>
<h3 id="4-é…ç½®smokeping"><a href="#4-é…ç½®smokeping" class="headerlink" title="4. é…ç½®smokeping"></a>4. é…ç½®smokeping</h3><h2 id="ç¬¬ä¸€ç§-ä½¿ç”¨nginx"><a href="#ç¬¬ä¸€ç§-ä½¿ç”¨nginx" class="headerlink" title="ç¬¬ä¸€ç§ ä½¿ç”¨nginx"></a>ç¬¬ä¸€ç§ ä½¿ç”¨nginx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1.å®‰è£…nginx</div><div class="line">rpm -Uvh  http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</div><div class="line">yum install -y nginx</div><div class="line">https://metacpan.org/pod/release/MSTROUT/ExtUtils-MakeMaker-6.59/lib/ExtUtils/MakeMaker.pm  ä¸‹è½½Make è®©ä»–ç›´æ¥æ‰§è¡Œ</div></pre></td></tr></table></figure>
<p>2.å®‰è£…åŸºç¡€IO </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /root</div><div class="line">wget  http://220.194.199.196/download/IO-All-0.46.tar.gz</div><div class="line">tar xvzf IO-All-0.46.tar.gz</div><div class="line"><span class="built_in">cd</span> IO-All-0.46</div><div class="line">perl Makefile.PL       <span class="comment">#  è¿™é‡Œå‡ºç°è¿™ä¸ªé—®é¢˜ æŠŠé‚£ä¸ªæ–‡ä»¶åˆ äº†å°±è¡Œäº†ã€‚</span></div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure>
<p>3.é…ç½®nginxçš„sock<br>åˆ›å»ºfcgi sock æ–‡ä»¶ï¼Œé…ç½®nginx fcgiä½¿ç”¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#wget http://autonagios.googlecode.com/svn/trunk/autonagios-20100103/files/nginx-fcgi.txt  -O /etc/nginx-fcgi</span></div><div class="line">wget http://117.27.153.133/nginx-fcgi.txt -O /etc/nginx-fcgi </div><div class="line">chmod a+x /etc/nginx-fcgi</div><div class="line">/etc/nginx-fcgi <span class="_">-l</span> /var/<span class="built_in">log</span>/nginx-fcgi.log -pid /var/run/nginx-fcgi.pid -S /var/run/nginx-fcgi.sock</div><div class="line">chmod 777 /var/run/nginx-fcgi.sock</div></pre></td></tr></table></figure>
<p>4.å¢åŠ smokepingä½¿ç”¨çš„dataã€varã€å’Œcacheç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/smokeping</div><div class="line">mkdir data var cache</div><div class="line">mv htdocs/smokeping.fcgi.dist htdocs/smokeping.fcgi</div><div class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/smokeping/etc</div><div class="line">mv config.dist config</div><div class="line">chmod 600 /usr/<span class="built_in">local</span>/smokeping/etc/smokeping_secrets.dist</div></pre></td></tr></table></figure>
<p>5.ä¸Šä¼ ç›‘æ§èŠ‚ç‚¹confæ–‡ä»¶åˆ°smokepingçš„etcç›®å½•<br>6.ä¿®æ”¹smokpeingé…ç½®è„šæœ¬</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">vi config</div><div class="line">åœ¨å¦‚ä¸‹ä½ç½®ä¿®æ”¹</div><div class="line"></div><div class="line">*** Database ***</div><div class="line">step     = 300</div><div class="line">pings    = 20</div><div class="line">ä¿®æ”¹ä¸º</div><div class="line">*** Database ***</div><div class="line">step     = 60</div><div class="line">pings    = 20</div><div class="line"></div><div class="line">åœ¨å¦‚ä¸‹ä½ç½®æ·»åŠ ä¸€å¥è¯</div><div class="line">*** Presentation ***</div><div class="line">template = /usr/<span class="built_in">local</span>/smokeping/etc/basepage.html.dist</div><div class="line">charset=utf-8</div></pre></td></tr></table></figure>
<p>åœ¨ç¬¬ä¸€ä¸ªåŠ å·ä½ç½®ä¸‹å°†ç›‘æ§èŠ‚ç‚¹æ–‡ä»¶å¼•å…¥ï¼Œå¦‚ä¸‹ä¾‹å­</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">+ testnetwork</div><div class="line">menu=æµ‹è¯•ç½‘ç»œçŠ¶å†µ</div><div class="line">title= æµ‹è¯•ç½‘ç»œçŠ¶å†µ</div><div class="line">@include CT-IP.conf</div><div class="line">@include CN-IP.conf</div><div class="line">@include CT_IDC.conf</div><div class="line">@include CNC-IDC.conf</div></pre></td></tr></table></figure>
<p>ä¿å­˜é€€å‡º</p>
<p>7.å¢åŠ dataã€varã€cacheç›®å½•çš„è½¯è¿æ¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ln <span class="_">-s</span> /usr/<span class="built_in">local</span>/smokeping/data/ /usr/share/nginx/html/data</div><div class="line">ln <span class="_">-s</span>  /usr/<span class="built_in">local</span>/smokeping/cache/ /usr/share/nginx/html/cache</div><div class="line">ln <span class="_">-s</span> /usr/<span class="built_in">local</span>/smokeping/htdocs/cropper/ /usr/share/nginx/html/cropper</div></pre></td></tr></table></figure>
<p>8.ä¿®æ”¹nginx é…ç½®æ–‡ä»¶<br>æŸ¥çœ‹ä¸‹nginxçš„ç‰ˆæœ¬ï¼Œä½¿ç”¨nginx -v æŸ¥çœ‹ï¼Œå¦‚ä¸‹ä¾‹å­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"> nginx -v</div><div class="line">nginx version: nginx/1.0.15</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹nginxé…ç½®</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">vi</span> /etc/nginx/conf.d/default.conf</div><div class="line">--å¢åŠ fcgi æŒ‡å‘</div><div class="line">    location  <span class="regexp">~ .*\.fcgi$</span> &#123;</div><div class="line">        <span class="attribute">root</span> /usr/local/smokeping/htdocs/;</div><div class="line">        <span class="attribute">gzip</span> <span class="literal">off</span>;</div><div class="line">        <span class="attribute">fastcgi_pass</span>  unix:/var/run/nginx-fcgi.sock;</div><div class="line">        <span class="attribute">fastcgi_index</span> smokeping.fcgi;</div><div class="line">        <span class="attribute">include</span> fastcgi.conf;                 <span class="comment">#1.0.x ä¸0.8.x ç”¨è¿™ä¸ª</span></div><div class="line">        <span class="comment">#include fastcgi_params;            #1.4.xç‰ˆæœ¬ç”¨ fastcgi_params</span></div><div class="line">        <span class="comment">#fastcgi_param   SCRIPT_FILENAME /opt/smokeping/htdocs$fastcgi_script_name; #1.4.xç‰ˆæœ¬å¿…åŠ </span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>ä¿å­˜é€€å‡º</p>
<h2 id="ç¬¬äºŒç§-ä½¿ç”¨apache"><a href="#ç¬¬äºŒç§-ä½¿ç”¨apache" class="headerlink" title="ç¬¬äºŒç§ ä½¿ç”¨apache"></a>ç¬¬äºŒç§ ä½¿ç”¨apache</h2><p>(1) åˆ›å»ºcacheã€dataã€varç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/smokeping</div><div class="line">mkdir htdocs/cache data var</div></pre></td></tr></table></figure>
<p>(2) åœ¨åˆ›å»ºæ—¥å¿—</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">touch /var/<span class="built_in">log</span>/smokeping.log</div></pre></td></tr></table></figure>
<p>(3) ä¸Šä¼ ç›‘æ§èŠ‚ç‚¹çš„confæ–‡ä»¶åˆ°smokepingçš„etcç›®å½•ä¸‹<br>ä¿®æ”¹smokepingç›®å½•çš„ç”¨æˆ·å’Œç»„æƒé™</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chown apache:apache -R /usr/<span class="built_in">local</span>/smokeping</div><div class="line">chown apache:apache /var/<span class="built_in">log</span>/smokeping.log</div></pre></td></tr></table></figure>
<p>(4) ä¿®æ”¹é…ç½®æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/smokeping/htdocs/</div><div class="line">mv smokeping.fcgi.dist smokeping.fcgi</div><div class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/smokeping/etc</div><div class="line">mv config.dist config</div><div class="line">vi config</div><div class="line"></div><div class="line">ä¿®æ”¹æ”¹è¡Œè®¾ç½®</div><div class="line">imgcache = /usr/<span class="built_in">local</span>/smokeping/cache</div><div class="line">imgcache = /usr/<span class="built_in">local</span>/smokeping/htdocs/cache</div><div class="line"></div><div class="line"> *** Database ***</div><div class="line">step  = 300</div><div class="line">pings  = 60</div><div class="line">ç„¶åä¿®æ”¹stepï¼Œä»300æ”¹ä¸º60ï¼Œè¿™æ˜¯æ£€æµ‹çš„æ—¶é—´, pings ä»20 æ”¹ä¸º60, å³60ç§’ping 60æ¬¡</div><div class="line"></div><div class="line">åœ¨å¦‚ä¸‹ä½ç½®æ·»åŠ ä¸€å¥è¯</div><div class="line">*** Presentation ***</div><div class="line">template = /usr/<span class="built_in">local</span>/smokeping/etc/basepage.html.dist</div><div class="line">charset=utf-8</div><div class="line"></div><div class="line">åœ¨ç¬¬ä¸€ä¸ªåŠ å·ä½ç½®ä¸‹å°†ç›‘æ§èŠ‚ç‚¹æ–‡ä»¶å¼•å…¥ï¼Œå¦‚ä¸‹ä¾‹å­</div><div class="line">+ testnetwork</div><div class="line">menu=æµ‹è¯•ç½‘ç»œçŠ¶å†µ</div><div class="line">title= æµ‹è¯•ç½‘ç»œçŠ¶å†µ</div><div class="line">@include CT-IP.conf</div><div class="line">@include CN-IP.conf</div><div class="line">@include CT_IDC.conf</div><div class="line">@include CNC-IDC.conf</div></pre></td></tr></table></figure>
<p>ä¿å­˜é€€å‡º </p>
<p> (5) é…ç½®å®Œæˆä¹‹åä¿®æ”¹å¯†ç æ–‡ä»¶æƒé™</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod 600 /usr/<span class="built_in">local</span>/smokeping/etc/smokeping_secrets.dist</div></pre></td></tr></table></figure>
<ol>
<li>ä¿®æ”¹apacheçš„é…ç½®</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">vim /etc/httpd/conf/httpd.conf</div><div class="line">åœ¨DocumentRoot <span class="string">"/var/www/html"</span> è¿™ä¸€è¡Œä¹‹ä¸‹æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</div><div class="line"></div><div class="line">Alias /cache <span class="string">"/usr/local/smokeping/htdocs/cache"</span></div><div class="line">Alias /cropper <span class="string">"/usr/local/smokeping/htdocs/cropper"</span></div><div class="line">Alias /smokeping <span class="string">"/usr/local/smokeping/htdocs"</span></div><div class="line">&lt;Directory <span class="string">"/usr/local/smokeping/htdocs"</span>&gt;</div><div class="line">  AllowOverride None</div><div class="line">  AddHandler cgi-script .fcgi .cgi</div><div class="line">  Options ExecCGI</div><div class="line">  &lt;IfModule dir_module&gt;</div><div class="line">     DirectoryIndex smokeping.fcgi</div><div class="line">  &lt;/IfModule&gt;</div><div class="line">  Order allow,deny</div><div class="line">  Allow from all </div><div class="line">&lt;/Directory&gt;</div></pre></td></tr></table></figure>
<ol>
<li>è®¾ç½®å¼€æœºå¯åŠ¨httpd, smokeping,å¹¶å…³é—­iptables.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="string">"/usr/local/smokeping/bin/smokeping --logfile=/var/log/smokeping.log 2&gt;&amp;1 &amp;"</span> &gt;&gt; /etc/rc.local</div><div class="line">chkconfig httpd on      <span class="comment">#å¼€æœºå¯åŠ¨httpdè¿›ç¨‹</span></div><div class="line">chkconfig iptables off  <span class="comment">#å¼€æœºä¸å¯åŠ¨iptablesæœåŠ¡</span></div><div class="line">chkconfig nginx on</div></pre></td></tr></table></figure>
<ol>
<li>å¯åŠ¨httpæˆ–è€…nginxä»¥åŠsmokeping</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">service httpd start service nginx start</div><div class="line">/usr/<span class="built_in">local</span>/smokeping/bin/smokeping --debug-daemon</div><div class="line">chown apache:apache -R /usr/<span class="built_in">local</span>/smokeping</div></pre></td></tr></table></figure>
<ol>
<li>æ‰“å¼€æ£€æµ‹ä¸»æœºçš„Webé¡µé¢.</li>
</ol>
<p>ä½¿ç”¨httpdåšwebï¼Œåœ¨Webæµè§ˆå™¨é‡Œè¾“å…¥<code>http://æ‚¨çš„ç›‘æ§ä¸»æœºIP/smokeping</code>      è¿™é‡Œå¯åŠ¨ä¸äº†ï¼Œçœ‹ä¸‹ä»€ä¹ˆåŸå› ã€‚æ˜¯ä¸æ˜¯CT-IDC.conf æ²¡æœ‰ä¸Šä¼ åˆ°etcä¸‹é¢</p>
<p>æ‰“å¼€è¿™é‡Œå‡ºç°500  è¯´æ˜é…ç½®æ­£ç¡®é˜²ç«å¢™çœ‹ä¸‹ã€‚<code>serenfroce 0</code> æœ‰æ²¡æœ‰å…³é—­ã€‚</p>
<p>ä½¿ç”¨nginxåšwebï¼Œåœ¨Webæµè§ˆå™¨é‡Œè¾“å…¥ <a href="http://æ‚¨çš„ç›‘æ§ä¸»æœºIP/smokeping.fcgi" target="_blank" rel="external">http://æ‚¨çš„ç›‘æ§ä¸»æœºIP/smokeping.fcgi</a>    è¿™é‡Œå¯åŠ¨ä¸äº†ï¼Œçœ‹ä¸‹ä»€ä¹ˆåŸå› ã€‚æ˜¯ä¸æ˜¯CT-IDC.conf æ²¡æœ‰ä¸Šä¼ åˆ°etcä¸‹é¢</p>
<p>å¦‚æœé‡åˆ°500é”™è¯¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Internal Server Error</div><div class="line">The server encountered an internal error or misconfiguration and was unable to complete your request.</div><div class="line">Please contact the server administrator, root@localhost and inform them of the time the error occurred, and anything you might have <span class="keyword">done</span> that may have caused the error.</div><div class="line">More information about this error may be available <span class="keyword">in</span> the server error log.</div><div class="line">--------------------------------------------------------------------------------</div><div class="line">Apache/2.2.15 (CentOS) Server at 192.168.2.101 Port 80</div><div class="line"></div><div class="line">è¯´æ˜æ²¡æœ‰å…³é—­SElinux é€‰é¡¹ï¼Œå…³é—­å°±æ­£å¸¸äº†</div><div class="line">vi /etc/sysconfig/selinux</div><div class="line">SELINUX=permissive</div><div class="line">[root@localhost ~]<span class="comment"># getenforce     #æŸ¥çœ‹SElinux çš„å‘½ä»¤</span></div><div class="line">Permissive                      <span class="comment">#è¿”å›çš„ç»“æœæ˜¯Permissive, è¡¨ç¤ºå·²ç»å…³é—­SElinuxäº†</span></div></pre></td></tr></table></figure>
<ol>
<li>åœ¨Webé¡µé¢å¢åŠ éªŒè¯ç”¨æˆ·åå’Œå¯†ç (å¯é€‰æ­¥éª¤)</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">(1)ä¿®æ”¹httpd.confé‡Œçš„å†…å®¹</div><div class="line">&lt;Directory <span class="string">"/usr/local/smokeping"</span>&gt;</div><div class="line">AllowOverride None</div><div class="line">Options All</div><div class="line">AddHandler cgi-script .fcgi .cgi</div><div class="line">AllowOverride AuthConfig</div><div class="line">Order allow,deny</div><div class="line">Allow from all</div><div class="line">AuthName <span class="string">"Smokeping"</span></div><div class="line">AuthType Basic</div><div class="line">AuthUserFile /usr/<span class="built_in">local</span>/smokeping/htdocs/htpasswd</div><div class="line">Require valid-user</div><div class="line">DirectoryIndex smokeping.fcgi</div><div class="line">&lt;/Directory&gt;</div></pre></td></tr></table></figure>
<p>æ³¨ï¼šä¸Šé¢çš„å†…å®¹éƒ¨åˆ†å·²ç»æ·»åŠ ï¼Œè¿™é‡Œä»…æ·»åŠ çº¢è‰²å­—ä½“å†…å®¹å³å¯ã€‚</p>
<p>(2) è®¾ç½®ç™»å½•è´¦æˆ·ä¸å¯†ç <br>è¿›å…¥cd /usr/local/smokeping/htdocsç›®å½•ï¼Œ æ‰§è¡Œå‘½ä»¤ï¼šhtpasswd -c /usr/local/smokeping/htdocs/htpasswd admin<br>è¿™ä¸ªæ˜¯è®¾ç½®ç™»å½•è´¦æˆ·ä¸ºadminï¼Œå¯†ç åœ¨åé¢è¾“å…¥ï¼Œç„¶åé‡å¯httpdå°±å¯ä»¥å®ç°å¯†ç éªŒè¯ç™»å½•<br>é‡æ–°ç™»å½•webé¡µé¢ï¼Œä¼šè¦æ±‚è¾“å…¥ç”¨æˆ·åå’Œå¯†ç .</p>
<ol>
<li>ä¸€å®šè¦åŒæ­¥å¥½æ—¶é—´</li>
</ol>
<p>åœ¨ESXI4çš„è™šæ‹Ÿæœºä¸­ï¼Œå®šæœŸæ‰§è¡Œ<code>ntpdate 210.72.145.44</code>    #æˆ–è€…ä¸æœ¬åœ°çš„æ—¶é—´æœåŠ¡å™¨åŒæ­¥<br>åœ¨vmware workstationä¸­ï¼Œå®‰è£…vmware-toolsï¼Œ è™šæ‹Ÿæœºçš„æ—¶é—´ä¼šè‡ªåŠ¨ä¸å…¶å®¿ä¸»æœºæ—¶é—´åŒæ­¥</p>
<p>æ³¨ï¼š å¦‚æœvmware workstationä¸­çš„è™šæ‹Ÿæœºä¸å®‰è£…vmware-toolsï¼Œåˆ™è™šæ‹Ÿæœºæ—¶é—´ä¼šä¸å®¿ä¸»æœºæ—¶é—´ç›¸éš”æ•´æ•´8ä¸ªå°æ—¶(è™šæ‹Ÿæœºæ—¶é—´æ—©äºå®¿ä¸»æœºæ—¶é—´)<br> vmware-toolsçš„å®‰è£…ä¸åœ¨æ­¤å™è¿°</p>
<ol>
<li><p>ç‰¹åˆ«è¯´æ˜: ä¿®æ”¹/usr/local/smokeping/etc/config æ–‡ä»¶çš„é…ç½®å‚æ•°ï¼Œå¿…é¡»é‡å¯åŠ¨smokepingç¨‹åº</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(1)å¦‚æœé‡å¯åŠ¨smokepingç¨‹åºå¤±è´¥ï¼Œæ ¹æ®æŠ¥é”™æç¤ºåˆ é™¤/usr/<span class="built_in">local</span>/smokeping/dataå­æ–‡ä»¶å¤¹çš„rrdæ–‡ä»¶</div><div class="line">(2)ä¸­æ–‡é—®é¢˜ï¼šå¦‚æœéœ€è¦åœ¨ç½‘é¡µé‡Œå±•ç¤ºä¸­æ–‡ï¼Œä¿®æ”¹/usr/<span class="built_in">local</span>/smokeping/etcçš„configæ–‡ä»¶</div><div class="line">*** Presentation ***</div><div class="line">charset = utf-8 //æ³¨ï¼šåœ¨è¿™é‡Œæ·»åŠ </div><div class="line">ç„¶ååœ¨menuä¸titileé‡Œä¿®æ”¹ä¸­æ–‡ï¼Œé‡å¯å³å¯</div></pre></td></tr></table></figure>
<p>æœ‰ä¸€ä¸ªè¦æ³¨æ„çš„åœ°æ–¹å°±æ˜¯ï¼Œä½ è¾“å…¥çš„ä¸­æ–‡å¿…é¡»åœ¨utf-8çš„å­—ç¬¦ç¼–ç ä¸‹è¾“å…¥çš„ä¸­æ–‡å­—ç¬¦ï¼Œä¸ç„¶ä¼šå‡ºç°ä¹±ç ã€‚<br> å¦‚æœåœ¨xshelä¸‹ï¼Œé€‰æ‹©file-properities-terminal<br>å¦‚æœè¿˜æ˜¯ä¸æ˜¾ç¤ºå°±çœ‹çœ‹ä½ ç³»ç»Ÿé‡Œæ˜¯å¦å®‰è£…äº†ä¸­æ–‡å­—ä½“ï¼Œæˆ–è€…åœ¨å®‰è£…ä¸€ä¸ª</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@smokeping data]<span class="comment"># ps -ef |grep smoke   #æŸ¥æ‰¾smokepingè¿›ç¨‹</span></div><div class="line">root      8740     1  0 09:08 ?        00:00:00 /usr/<span class="built_in">local</span>/smokeping/bin/smokeping [FPing]</div><div class="line">root     35552 35529  0 09:33 pts/2    00:00:00 grep smoke</div><div class="line">[root@smokeping data]<span class="comment"># kill 8740     #æ€æ‰smokepingè¿›ç¨‹</span></div><div class="line">[root@smokeping data]<span class="comment"># ps -ef |grep smoke</span></div><div class="line">root     35554 35529  4 09:33 pts/2    00:00:00 grep smoke</div><div class="line">smokepingè¿›ç¨‹å·²ç»è¢«æ€æ‰</div><div class="line">[root@smokeping data]<span class="comment">#screen                    #å¦‚æœé€šè¿‡SSHè¿œç¨‹ç™»å½•åˆ°ç›‘æ§ä¸»æœºï¼Œæœ€åæ‰§è¡Œscreenï¼Œåœ¨è™šæ‹Ÿçª—å£ä¸­å¯åŠ¨smokeping</span></div><div class="line">/usr/<span class="built_in">local</span>/smokeping/bin/smokeping --logfile=/var/<span class="built_in">log</span>/smokeping.log 2&gt;&amp;1 &amp;</div></pre></td></tr></table></figure>
<p>ä¸‰. æ·»åŠ éœ€è¦ç›‘æ§çš„ç½‘ç«™å’ŒèŠ‚ç‚¹(åœ¨/usr/local/smokeping/etc/configä¸­æ·»åŠ )</p>
<ul>
<li><p>smokepingå°±è¿™ç‚¹ä¸å¥½ï¼Œæ·»åŠ èŠ‚ç‚¹ä¸èƒ½åœ¨å‰å°Webé¡µé¢æ·»åŠ ï¼Œä¸€å®šè¦åœ¨åå°çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ,å¸Œæœ›ä»¥åçš„ç‰ˆæœ¬ä¸­èƒ½æ”¹è¿›ä¸€ä¸‹  *</p>
</li>
<li><p>ä¿®æ”¹/usr/local/smokeping/etc/config åï¼Œå¿…é¡»é‡å¯smokeping ç¨‹åºï¼Œé…ç½®æ‰ä¼šç”Ÿæ•ˆ  *  </p>
</li>
<li><p>smokeping ä¼šæ ¹æ®é…ç½®æ–‡ä»¶config åœ¨/usr/local/smokeping/data ä¹‹ä¸‹æ·»åŠ moniteræ–‡ä»¶å¤¹ï¼Œå…¶ä¸‹åŒ…å«websiteå­æ–‡ä»¶å¤¹ *</p>
</li>
<li><p>ç”¨vmware workstationçš„è™šæ‹Ÿæœºæµ‹è¯•æœ‰ä¸€ç‚¹å¥½å¤„ï¼Œworkstationä¸‹çš„è™šæ‹Ÿç½‘å¡å¯ä»¥è®¾ç½®å‡ºå…¥çš„ä¸¢åŒ…ç‡ï¼Œé€‚åˆsmokepingåšä¸¢åŒ…æµ‹è¯•, ç»è¿‡æµ‹è¯•smokepingæ£€æµ‹å‡ºçš„ä¸¢åŒ…ç‡ä¸vmware worksationè™šæ‹Ÿç½‘å¡è®¾ç½®çš„ä¸¢åŒ…ç‡åŸºæœ¬ç›¸åŒ,ä¹Ÿå°±æ˜¯è¯´smokeping èƒ½å¤Ÿååº”ç½‘ç»œçš„çœŸå®çŠ¶å†µ *<br> æ·»åŠ ç›‘æ§èŠ‚ç‚¹ç¤ºä¾‹ï¼šæ³¨æ„+æ˜¯ç¬¬ä¸€å±‚ï¼Œ++æ˜¯ç¬¬äºŒå±‚ï¼Œ+++ æ˜¯ç¬¬ä¸‰å±‚</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">+ moniter                       </div><div class="line">menu = moniter</div><div class="line">++ website</div><div class="line">menu = website</div><div class="line">title = moniter website</div><div class="line"><span class="comment">#host = /moniter/website/baidu /moniter/website/sina /moniter/website/taobao /moniter/website/QQ</span></div><div class="line"></div><div class="line">+++ baidu</div><div class="line">menu = baidu</div><div class="line">title = baidu.com</div><div class="line">alerts = someloss</div><div class="line">host = www.baidu.com</div><div class="line"></div><div class="line">+++ sina</div><div class="line">menu = sina</div><div class="line">title = sina.com.cn</div><div class="line">alerts = someloss</div><div class="line">host = www.sina.com.cn</div><div class="line"></div><div class="line">+++ taobao</div><div class="line">menu = taobao</div><div class="line">title = taobao.com</div><div class="line">alerts = someloss</div><div class="line">host = www.taobao.com</div><div class="line"></div><div class="line">+++ QQ</div><div class="line">menu = QQ</div><div class="line">title = QQ</div><div class="line">alerts = someloss</div><div class="line">host = www.qq.com.cn</div><div class="line"></div><div class="line">+++ sohu</div><div class="line">menu = sohu</div><div class="line">title = sohu</div><div class="line">alerts = someloss</div><div class="line">host = www.sohu.com</div></pre></td></tr></table></figure>
<p>æ•ˆæœå›¾ï¼šå½“å‰èœå•ä¸‹ä¸»æœºå»¶æ—¶ï¼Œä¸¢åŒ…å›¾</p>
<p>æ•ˆæœå›¾ï¼šå½“å‰èœå•ä¸‹æŸä¸»æœºå»¶æ—¶ï¼Œä¸¢åŒ…è¯¦ç»†å›¾</p>
<p>13.å›¾ä¾‹è¯´æ˜</p>
<p>ç»¿å—è¡¨ç¤ºä¸ä¸¢åŒ…ï¼Œå…¶ä»–é¢œè‰²çš„å—è¡¨ç¤ºä¸åŒç¨‹åºçš„ä¸¢åŒ…ã€‚<br>å›¾å½¢è¶Šå¹³ç¨³ï¼Œè¡¨ç¤ºç½‘ç»œè¶Šç¨³å®šï¼Œå¦‚æœå›¾å½¢å³°å€¼å’Œä½è°·å¾ˆå¤šï¼Œåˆ™è¡¨ç¤ºç½‘ç»œæ—¶å»¶ä¸ç¨³å®šï¼Œå¿½é«˜å¿½ä½ã€‚</p>
<p>è¿™é‡Œapache å¦‚æœè¦ä½ åšä¸ªURLçš„æ–‡ä»¶ä¸‹è½½æµ‹è¯• </p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dd <span class="keyword">if</span>=<span class="regexp">/dev/</span><span class="keyword">null</span> bs=<span class="number">1</span>M <span class="keyword">count</span>=<span class="number">1</span> of=<span class="regexp">/var/</span>www<span class="regexp">/html/i</span>ndex.html</div></pre></td></tr></table></figure>

	

	
		<span class="different-posts"><a href="/2014/04/19/æ€§èƒ½ç›‘æ§/Somekeping/ç”¨æœ€ç®€å•æ˜“æ‡‚çš„æ–¹å¼å®‰è£…smokeping/" onclick="window.history.go(-1); return false;">â¬…ï¸ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2017 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
