<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 运维自动化个人总结 · Cheng yang's Blog</title><meta name="description" content="运维自动化个人总结 - yangc"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://blog.yangcvo.me/atom.xml" title="Cheng yang's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/yangcvo" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/yangcvo" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://blog.yangcvo.me/2014/05/04/%E4%B8%AA%E4%BA%BA%E8%AE%B0%E5%BD%95/About-me/" target="_blank" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">运维自动化个人总结</h1><div class="post-info">2016年7月3日</div><div class="post-content"><h3 id="运维自动化个人总结"><a href="#运维自动化个人总结" class="headerlink" title="运维自动化个人总结"></a>运维自动化个人总结</h3><h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><p>个人2014年开始玩自动化的也是刚从业<code>自动化运维</code>岗位第一份工作，在一家<code>cdn</code>做云加速的应该很多玩cdn的都听说这家公司－<code>mmtrix</code>。</p>
<p>一开始开始深度学习的是SaltStack所以掌握的比较深更加熟练，其实也是一个好朋友推荐我看了一本书<code>python入门到精通</code> 里面有详细讲到salt安装和使用部署自动化各种操作，的确很方便。后面在测试环境我自己管理几十台服务器－学习使用<code>Ansible</code>去操作，因为salt跟ansible最大的区别，除了ansible快速上手和不需要复杂的安装，主要在内网方面比salt更稳定架构也比salt好。</p>
<p>在线上我们都是用salt去操作的，可是当时公司有运维开发的人员，所以后来salt在终端操作出了很多错：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">第一：人员操作失误一次，可能会导致所有的服务器都会受影响。</span><br><span class="line">第二：命令太多服务权限需要一一统一分配登陆终端操作。</span><br></pre></td></tr></table></figure>
<p>后面运维开发开发了一套基于salt自动化一套web版的管理平台。对我们后面的做部署初始化的确减轻了很多。</p>
<h3 id="经历："><a href="#经历：" class="headerlink" title="经历："></a>经历：</h3><p>2016年底4月份去参加360的一次运维大会，王浩宇360的运维开发人员分享了一片文章：<code>大规模集群上的多业务线环境部署.</code></p>
<p>讲的非常好，用的是Puppet去实现3000多台的服务器部署，指定部署安装包等等。非常方便。</p>
<p>这里也在Infoq上面有他的分享作品我这里粘贴出来了：<a href="http://www.infoq.com/cn/articles/multi-service-line-environment-deployment" target="_blank" rel="external">大规模集群上的多业务线环境部署</a></p>
<p>现在我们公司用的是ansible基python开发出来一套自动化部署的。发布部署测试一体系：<br>刚开发出来的截了一张图：</p>
<p><img src="http://7xrthw.com1.z0.glb.clouddn.com/zidonhua1.png" alt=""></p>
<h3 id="个人总结："><a href="#个人总结：" class="headerlink" title="个人总结："></a>个人总结：</h3><p>系统标准化：</p>
<p>要想自动化，首先第一就是标准化。比如软件的安装位置、版本、脚本，注册到init.d下面，这些应该是标准的，所有服务器都统一的。或者说你使用salt就是为了达到这样的标准化做自动化运维要经历的标准化–》自动化—-》服务化—-》数据化。</p>
<p>个人意见</p>
<ol>
<li>只有标准了，才能自动，至少你相同的业务都应该是一样的。</li>
<li>自动化，这个自动化讲的是工具，所有的操作是工具再做，不是人。也有小公司说我们半自动，的确是有的，就写写脚本然后靠工具去管理。</li>
<li>服务化，你平台搞的很牛逼了，直接给业务提供接口。DNS、负载均衡、分布式存储、你都封装好了，上层不需要关心，你相当于为上层服务提供服务。各种API都写好了。</li>
<li>数据化，或者说可视化，运维平台做的很牛逼，直接对业务负责，以业务为导向，今天订单量减少了，通过你的运维平台，直接定位问题，不需要各种查找，因为订单量的减少，肯定有相关的监控指标发生变化。</li>
</ol>
<p>那么在工具自动化建设的开始，你需要有一个理论支持，比如ITIL。不能瞎搞。没有流程的自动化运维就是耍流氓如果上线没有走上线流程，动不动，开发自己登录服务器执行了git pull。那还自动化什么呢。</p>
<p>我个人的概念就是生产就是咱们运维的地盘。谁都不能动。开发想动，你可以提供接口，或者提供平台让开发点点鼠标就可以了。</p>
<h3 id="题外话："><a href="#题外话：" class="headerlink" title="题外话："></a>题外话：</h3><p>说个很蛋疼的事情，之前在一家创业公司开发人员都可以随便要权限，然后解决问题运维不用参与都是开发去操作。所以后来我进那家创业公司之间权限这些都是避免了。统一管理，统一分配，不同部门，不同岗位，不同权限。</p>
<p>这个是自动化里面最常见的部署自动化，对于ITIL的流程就是发布与部署管理。</p>
<p>构建—打包—测试—发布都需要是自动的；所以这块需要测试的支持。需要有自动化测试。没有就卡到测试了。</p>
<p>最简单的就是发布流程和开发流程分开。</p>
<p>自动化运维减轻了很多的事情，也让更多的运维小伙伴可以研究更多的知识。<br>这篇文章也是自己对这两年多运维的这一方面的自动化运维的总结。</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/07/12/Docker/Docker学习(一)：简介/" class="prev">PREV</a><a href="/2016/07/03/运维笔记/运维笔记/" class="next">NEXT</a></div><div data-thread-key="2016/07/03/个人记录/运维自动化个人总结/" data-title="运维自动化个人总结" data-url="http://blog.yangcvo.me/2016/07/03/个人记录/运维自动化个人总结/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"true"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2014 - 2016 <a href="http://blog.yangcvo.me">yangc</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yangcvo" target="_blank">Github-yangcvo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>