<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>ä½¿ç”¨shellè„šæœ¬å®ç°sshç™»å½•æŠ¥è­¦ | Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		<article>
	
		<h1>ä½¿ç”¨shellè„šæœ¬å®ç°sshç™»å½•æŠ¥è­¦</h1>
	
	<div class="article__infos">
		<span class="article__date">2016-07-19</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/è¿ç»´ç¬”è®°/">è¿ç»´ç¬”è®°</a>
			</span><br />
		
		
	</div>

	

	
		<p>å¦‚æœä½ æœåŠ¡å™¨è¢«å…¥ä¾µäº†ï¼Œè¯¥æ€ä¹ˆåšæ‰èƒ½è®©è‡ªå·±ç¬¬ä¸€æ—¶é—´çŸ¥æ™“ï¼Ÿå¯¹å¤§éƒ¨åˆ†çš„äººæ¥è¯´ï¼Œè¿™ä¸ªçš„ç¡®å¾ˆä¸å¥½å®šä½ï¼Œå…¶å®ä¹Ÿå¯ä»¥ç®€å•äº›ä¸ªå˜é‡ç¯å¢ƒï¼Œè¿™æ ·ä¸‹æ¬¡ç™»å½•ä»¥åå¯ä»¥çœ‹åˆ°ç™»å½•çš„è®°å½•ï¼Œå¯æ˜¯è¿™æ ·çš„è¯ä¼šè¢«é»‘å®¢å‘ç°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡ŒæŒ‰è„šæœ¬è‡ªåŠ¨å‘é€ã€‚</p>
<p>åœ¨é€›ä¸€äº›åšå®¢ä¸Šé¢çœ‹åˆ°ä¸€ç¯‡è¿™æ–‡ç« ï¼Œæ‰€ä»¥è§‰å¾—ä¸é”™ï¼Œè¿™é‡Œæ•´ç†äº†ä¸‹ï¼Œå‘ç»™å¤§å®¶ã€‚<br>å…¶å®è¿™ç§è„šæœ¬å¯ä»¥æ”¾åˆ°å¯¹åº”çš„å ¡å’æœºæˆ–è€…è·³æ¿æœºæœºå™¨ä¸Šé¢å› ä¸ºå¯¹ä¸€å°åšç®¡ç†ï¼Œä¸‹é¢åšäº†è®¾ç½®ï¼Œå°±å¾ˆæ–¹ä¾¿äº†ã€‚</p>
<h3 id="1ã€é¦–å…ˆæ¥é…ç½®å‘ä»¶ç¯å¢ƒï¼Œè¿™é‡Œä»‹ç»CentOS"><a href="#1ã€é¦–å…ˆæ¥é…ç½®å‘ä»¶ç¯å¢ƒï¼Œè¿™é‡Œä»‹ç»CentOS" class="headerlink" title="1ã€é¦–å…ˆæ¥é…ç½®å‘ä»¶ç¯å¢ƒï¼Œè¿™é‡Œä»‹ç»CentOS"></a>1ã€é¦–å…ˆæ¥é…ç½®å‘ä»¶ç¯å¢ƒï¼Œè¿™é‡Œä»‹ç»CentOS</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">yum install perl-IO-Socket-SSL perl-Net-SSLeay -y</div><div class="line">wget http://oak0aohum.bkt.clouddn.com/sendEmail-v1.56.tar.gz -O /tmp/sendEmail-v1.56.tar.gz</div><div class="line"><span class="built_in">cd</span> /tmp</div><div class="line">tar xf sendEmail-v1.56.tar.gz</div><div class="line">mv sendEmail-v1.56/sendEmail /usr/<span class="built_in">local</span>/bin/</div><div class="line">chmod +x /usr/<span class="built_in">local</span>/bin/sendEmail &amp;&amp; <span class="built_in">cd</span></div><div class="line">wget http://oak0aohum.bkt.clouddn.com/jq  -O /usr/<span class="built_in">local</span>/bin/jq</div><div class="line">chmod +x /usr/<span class="built_in">local</span>/bin/jq</div></pre></td></tr></table></figure>
<h3 id="2ã€ç„¶åé…ç½®æŠ¥è­¦é‚®ä»¶"><a href="#2ã€ç„¶åé…ç½®æŠ¥è­¦é‚®ä»¶" class="headerlink" title="2ã€ç„¶åé…ç½®æŠ¥è­¦é‚®ä»¶"></a>2ã€ç„¶åé…ç½®æŠ¥è­¦é‚®ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">wget http://oak0aohum.bkt.clouddn.com/WarringLoging.sh  -O /etc/WarringLoging.sh</div><div class="line">chmod +x /etc/WarringLoging.sh</div><div class="line">yum install -y screen å®‰è£…screen </div><div class="line"><span class="comment">#echo "screen -fa -d -m -S WL /etc/WarringLoging.sh" &gt;&gt; /etc/profile #ç¬¬ä¸€ç§æ–¹æ³•ï¼Œæ–°å¼€ç»ˆç«¯å¤åˆ¶ç»ˆç«¯éƒ½ä¼šæŠ¥è­¦</span></div><div class="line"><span class="comment">#echo -e "#!/bin/bash\nbash /etc/WarringLoging.sh" &gt;&gt; /etc/ssh/sshrc #ç¬¬äºŒç§æ–¹æ³•ï¼Œåªæœ‰sshç™»å½•æ‰ä¼šæŠ¥è­¦</span></div><div class="line"><span class="comment">#ä¸Šé¢ä¸¤ç§æ–¹æ³•ä»»é€‰ä¸€ä¸ªéƒ½å¯ä»¥</span></div></pre></td></tr></table></figure>
<h3 id="3ã€æœ€åç¼–è¾‘æ”¶å‘é‚®ä»¶çš„ä¿¡æ¯"><a href="#3ã€æœ€åç¼–è¾‘æ”¶å‘é‚®ä»¶çš„ä¿¡æ¯" class="headerlink" title="3ã€æœ€åç¼–è¾‘æ”¶å‘é‚®ä»¶çš„ä¿¡æ¯"></a>3ã€æœ€åç¼–è¾‘æ”¶å‘é‚®ä»¶çš„ä¿¡æ¯</h3><p>vim /etc/WarringLoging.sh</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">#!/bin/bash</span></div><div class="line"><span class="comment">#########################################################################</span></div><div class="line"><span class="comment"># File Name: WarringLoging.sh</span></div><div class="line"><span class="comment"># Author: yangc</span></div><div class="line"><span class="comment"># Email: yangcvo@gmail.com</span></div><div class="line"><span class="comment"># Version:</span></div><div class="line"><span class="comment"># Created Time: Wed 22 Jul 2015 01:41:09 AM CST</span></div><div class="line"><span class="comment">#########################################################################</span></div><div class="line"></div><div class="line"><span class="built_in">eval</span> `curl <span class="_">-s</span> <span class="string">"http://ip.taobao.com/service/getIpInfo.php?ip=<span class="variable">$&#123;SSH_CLIENT%% *&#125;</span>"</span> | jq . | awk -F<span class="string">':|[ ]+|"'</span> <span class="string">'$3~/^(country|area|region|city|isp)$/&#123;print $3"="$7&#125;'</span>`</div><div class="line"></div><div class="line">EMAIL=`<span class="built_in">which</span> sendEmail`</div><div class="line">FEMAIL=<span class="string">"it@health.com"</span> <span class="comment">#å‘ä»¶é‚®ç®±</span></div><div class="line">MAILP=<span class="string">"MzU0ODZjOWI0MWU3"</span> <span class="comment">#å‘ä»¶é‚®ç®±å¯†ç </span></div><div class="line">MAILSMTP=<span class="string">"smtp.exmail.qq.com"</span> <span class="comment">#å‘ä»¶é‚®ç®±çš„SMTP</span></div><div class="line">MAILT=<span class="string">"chengyangyang@health.com"</span> <span class="comment">#æ”¶ä»¶é‚®ç®±</span></div><div class="line">MAILmessage=<span class="string">"ç™»å…¥è€…IPåœ°å€ï¼š<span class="variable">$&#123;SSH_CLIENT%% *&#125;</span>\n\</span></div><div class="line">IPå½’å±åœ°ï¼š<span class="variable">$&#123;country&#125;</span>_<span class="variable">$&#123;area&#125;</span>_<span class="variable">$&#123;region&#125;</span>_<span class="variable">$&#123;city&#125;</span>_<span class="variable">$&#123;isp&#125;</span>\n\</div><div class="line">è¢«ç™»å½•æœåŠ¡å™¨IPï¼š<span class="variable">$(curl -s ip.cn| grep -Eo '([0-9]&#123;1,3&#125;[\.])</span>&#123;3&#125;[0-9]&#123;1,3&#125;')"</div><div class="line"></div><div class="line"><span class="variable">$EMAIL</span> -q <span class="_">-f</span> <span class="variable">$FEMAIL</span> -t <span class="variable">$MAILT</span> -u <span class="string">"æ‚¨æœåŠ¡å™¨æœ‰äººç™»å½•SSH"</span> -m <span class="string">"<span class="variable">$MAILmessage</span>"</span> <span class="_">-s</span> <span class="variable">$MAILSMTP</span> -o message-charset=utf-8 -xu <span class="variable">$FEMAIL</span> -xp <span class="variable">$MAILP</span></div></pre></td></tr></table></figure>
<p> ä¸‹è½½è„šæœ¬åœ°å€ï¼š<a href="http://oak0aohum.bkt.clouddn.com/WarringLoging.sh" target="_blank" rel="external">WarringLoging.sh</a></p>
<p>ç»™äºˆæ‰§è¡Œæƒé™ï¼šchmod +x /etc/WarringLoging.sh</p>
<p>å…¶å®è¿™é‡Œè„šæœ¬ä¸‹é¢å¯ä»¥è‡ªå®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="_">-f</span> è¡¨ç¤ºfromï¼Œå‘ä»¶äººåœ°å€</div><div class="line">-t è¡¨ç¤ºtoï¼Œæ”¶ä»¶äººåœ°å€</div><div class="line"><span class="_">-s</span> mailæœåŠ¡å™¨åŸŸå</div><div class="line">-u ä¸»é¢˜</div><div class="line">-xu ç”¨æˆ·åï¼ˆ@ä¹‹å‰çš„ï¼‰</div><div class="line">-xp ç”¨æˆ·å¯†ç </div><div class="line">-m çº¯æ–‡æœ¬ä¿¡æ¯</div><div class="line">-o message-file=/root/.. å‘é€æ–‡ä»¶ä¸­çš„å†…å®¹</div><div class="line"><span class="_">-a</span> å‘é€é™„ä»¶ ï¼ˆ-m,-o,<span class="_">-a</span>å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼‰</div></pre></td></tr></table></figure>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/ssh-shell.png" alt=""></figure></p>
<p>é‚®ä»¶å‘é€å®ç°æ•ˆæœã€‚</p>
<p>iPhoneæ‰‹æœºæé†’æ•ˆæœï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/ssh-shell2.png" alt=""></figure></p>
<h3 id="äº¤æµå­¦ä¹ ï¼š"><a href="#äº¤æµå­¦ä¹ ï¼š" class="headerlink" title="äº¤æµå­¦ä¹ ï¼š"></a>äº¤æµå­¦ä¹ ï¼š</h3><p>ğŸ§  Linux shell_é«˜çº§è¿ç»´æ´¾: <code>459096184</code>    åœˆå­ (ç³»ç»Ÿè¿ç»´-åº”ç”¨è¿ç»´-è‡ªåŠ¨åŒ–è¿ç»´-è™šæ‹ŸåŒ–æŠ€æœ¯ç ”ç©¶æ¬¢è¿åŠ å…¥)<br>ğŸ§  BigData-Exchange School : <code>521621407</code>  åœˆå­ï¼ˆå¤§æ•°æ®è¿ç»´)ï¼ˆHadoopå¼€å‘äººå‘˜)ï¼ˆå¤§æ•°æ®ç ”ç©¶çˆ±å¥½è€…) æ¬¢è¿åŠ å…¥</p>
<p>ç›¸åº”Bidataæœ‰å†…éƒ¨å¾®ä¿¡äº¤æµç¾¤äº’ç›¸å­¦ä¹ ï¼ŒåŠ å…¥QQç¾¤æœ‰é“¾æ¥ã€‚</p>

	

	
		<span class="different-posts"><a href="/2016/07/19/è¿ç»´å®‰å…¨/ä½¿ç”¨shellè„šæœ¬å®ç°sshç™»å½•æŠ¥è­¦/" onclick="window.history.go(-1); return false;">â¬…ï¸ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2017 Yancy | Powered by <a href="http://weblog.chengyangyang.com/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
