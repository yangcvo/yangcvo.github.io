<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>zabbix3.0éƒ¨ç½²jmxç›‘æ§tomcat | Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		<article>
	
		<h1>zabbix3.0éƒ¨ç½²jmxç›‘æ§tomcat</h1>
	
	<div class="article__infos">
		<span class="article__date">2016-06-21</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/monitoring/">monitoring</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Zabbix-monitoring/">Zabbix monitoring</a>
			</span>
		
	</div>

	

	
		<p>zabbixæä¾›äº†ä¸€ä¸ªjava gatewayçš„åº”ç”¨å»ç›‘æ§jmxï¼ˆJava Management Extensionsï¼Œå³Javaç®¡ç†æ‰©å±•ï¼‰æ˜¯ä¸€ä¸ªä¸ºåº”ç”¨ç¨‹åºã€è®¾å¤‡ã€ç³»ç»Ÿç­‰æ¤å…¥ç®¡ç†åŠŸèƒ½çš„æ¡†æ¶ã€‚JMXå¯ä»¥è·¨è¶Šä¸€ç³»åˆ—å¼‚æ„æ“ä½œç³»ç»Ÿå¹³å°ã€ç³»ç»Ÿä½“ç³»ç»“æ„å’Œç½‘ç»œä¼ è¾“åè®®ï¼Œçµæ´»çš„å¼€å‘æ— ç¼é›†æˆçš„ç³»ç»Ÿã€ç½‘ç»œå’ŒæœåŠ¡ç®¡ç†åº”ç”¨ã€‚</p>
<h2 id="ä¸€-Zabbix-çš„JMXç›‘æ§æ¶æ„"><a href="#ä¸€-Zabbix-çš„JMXç›‘æ§æ¶æ„" class="headerlink" title="ä¸€. Zabbix çš„JMXç›‘æ§æ¶æ„"></a>ä¸€. Zabbix çš„JMXç›‘æ§æ¶æ„</h2><p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat1.png" alt=""></figure></p>
<h3 id="ä¸€ï¼šéƒ¨ç½²ç¯å¢ƒ"><a href="#ä¸€ï¼šéƒ¨ç½²ç¯å¢ƒ" class="headerlink" title="ä¸€ï¼šéƒ¨ç½²ç¯å¢ƒ"></a>ä¸€ï¼šéƒ¨ç½²ç¯å¢ƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Centos   6.7</div><div class="line">Zabbix     3.0.3</div><div class="line">Tomcat     7.0.55</div></pre></td></tr></table></figure>
<h3 id="æœåŠ¡ç«¯é…ç½®"><a href="#æœåŠ¡ç«¯é…ç½®" class="headerlink" title="æœåŠ¡ç«¯é…ç½®"></a>æœåŠ¡ç«¯é…ç½®</h3><h3 id="1ã€å®‰è£…jdkï¼ˆç‰ˆæœ¬1-7-0-79ï¼‰"><a href="#1ã€å®‰è£…jdkï¼ˆç‰ˆæœ¬1-7-0-79ï¼‰" class="headerlink" title="1ã€å®‰è£…jdkï¼ˆç‰ˆæœ¬1.7.0_79ï¼‰"></a>1ã€å®‰è£…jdkï¼ˆç‰ˆæœ¬1.7.0_79ï¼‰</h3><p>JDK å„è‡ªçš„ç‰ˆæœ¬7.0 è¿˜æ˜¯8.0 ç‰ˆæœ¬å®˜ç½‘ä¸‹è½½ï¼š<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="external">JDK</a></p>
<p>æˆ‘è¿™é‡Œä¹Ÿä¸Šä¼ äº†7.0.67 ç‰ˆæœ¬çš„å’Œ8.0ç‰ˆæœ¬çš„jdkæºç åŒ…ï¼š</p>
<p><a href="http://oak0aohum.bkt.clouddn.com/jdk1.7.0_67.tar.gz" target="_blank" rel="external">7.0JDKæºç åŒ…</a></p>
<p><a href="http://oak0aohum.bkt.clouddn.com/jdk1.8.0_66.tar.gz" target="_blank" rel="external">8.0JDKæºç åŒ…</a></p>
<p>å¹¶ä¸Šä¼ åˆ°zabbix server</p>
<p>ç›´æ¥è§£å‹ä¸‹è½½ä¸‹æ¥çš„åŒ…åˆ°è‡ªå®šä¹‰çš„ç›®å½•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf jdk1.7.0_67.tar.gz -C /srv/</div></pre></td></tr></table></figure>
<p>å®‰è£…æˆåŠŸä¹‹åæ·»åŠ ç³»ç»Ÿç¯å¢ƒå˜é‡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">cd</span> /etc/profile.d</div><div class="line">vim java.sh</div><div class="line"><span class="built_in">export</span> JAVA_HOME=/srv/jdk1.7.0_67</div><div class="line"><span class="built_in">export</span> CLASS_PATH=<span class="string">"<span class="variable">$JAVA_HOME</span>/lib:<span class="variable">$JAVA_HOME</span>/jre/lib"</span></div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</div></pre></td></tr></table></figure>
<p>ä½¿é…ç½®ç”Ÿæ•ˆ</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">source</span> <span class="regexp">/etc/</span>profile</div></pre></td></tr></table></figure>
<p>å®‰è£…ä¸é…ç½®æ¯”è¾ƒç®€å•ã€‚æ‰§è¡Œjava -versionå‘½ä»¤ï¼Œå‡ºç°ç±»ä¼¼ç•Œé¢è¡¨ç¤ºæˆåŠŸã€‚</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">java </span>-version</div><div class="line"><span class="keyword">java </span>version <span class="string">"1.7.0_67"</span></div><div class="line"><span class="keyword">Java(TM) </span>SE Runtime Environment (<span class="keyword">build </span><span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span>_67-<span class="keyword">b01)</span></div><div class="line"><span class="keyword">Java </span>HotSpot(TM) <span class="number">64</span>-<span class="keyword">Bit </span>Server VM (<span class="keyword">build </span><span class="number">24</span>.<span class="number">65</span>-<span class="keyword">b04, </span>mixed mode)</div></pre></td></tr></table></figure>
<p>å¦‚æœå‡ºç°é—®é¢˜ï¼ŒæŸ¥çœ‹ä¸‹ç¯å¢ƒå˜é‡æ˜¯å¦è®¾ç½®ã€‚</p>
<h3 id="2ã€å®‰è£…Zabbix-Java-gateway"><a href="#2ã€å®‰è£…Zabbix-Java-gateway" class="headerlink" title="2ã€å®‰è£…Zabbix-Java-gateway"></a>2ã€å®‰è£…<code>Zabbix-Java-gateway</code></h3><p>Zabbix2.0èµ·æ·»åŠ äº†æ”¯æŒç”¨äºç›‘æ§JMXåº”ç”¨ç¨‹åºçš„æœåŠ¡è¿›ç¨‹ï¼Œç§°ä¸ºâ€œZabbix-Java-gatewayâ€ï¼Œå®ƒæ˜¯ç”¨javaå†™çš„ä¸€ä¸ªç¨‹åºã€‚</p>
<p>å¯ä½¿ç”¨rpmè¿›è¡Œå®‰è£…ï¼Œæˆ‘ä½¿ç”¨æºç å®‰è£…ï¼Œå¤§å®¶å¯åœ¨å®‰è£…zabbixæ—¶å¯ç”¨â€“enable-javaå‚æ•°å³å¯å®‰è£…zabbix java gatewayï¼Œå¦‚æœç¬¬ä¸€æ¬¡æ²¡æœ‰åŠ è½½ï¼Œå¯é‡æ–°åŠ è½½ç¼–è¯‘å®‰è£…</p>
<p>æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®‰è£…Zabbix-Java-gatewayï¼Œç¬¬1ç§æ˜¯ç¼–è¯‘å®‰è£…zabbixæ—¶æ·»åŠ â€“enable javaå‚æ•°ã€‚ç¬¬2ç§æ˜¯å•ç‹¬å®‰è£…ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>ç¬¬ä¸€ç§æ–¹æ³•</code>ï¼š</li>
</ul>
<p>å®‰è£…gatewayï¼Œéœ€è¦javaï¼Œjava-develä¾èµ–</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yumã€€installã€€ï¼ï½™ã€€</div><div class="line">http://repo.zabbix.com/zabbix/2.4/rhel/6/x86_64/zabbix-release-2.4-1.el6.noarch.rpmã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€    å®‰è£…yumæº</div><div class="line">yum install -y  java  java-devel  zabbix-java-gatewayã€€ã€€å®‰è£…gateway</div></pre></td></tr></table></figure>
<p>æµ‹è¯•æ˜¯å¦æˆåŠŸï¼š</p>
<p>ç¬¬ä¸€ï¼šæµ‹è¯•javaæ˜¯å¦æˆåŠŸ</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">java </span>-version</div><div class="line"><span class="keyword">java </span>version <span class="string">"1.7.0_67"</span></div><div class="line"><span class="keyword">Java(TM) </span>SE Runtime Environment (<span class="keyword">build </span><span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span>_67-<span class="keyword">b01)</span></div><div class="line"><span class="keyword">Java </span>HotSpot(TM) <span class="number">64</span>-<span class="keyword">Bit </span>Server VM (<span class="keyword">build </span><span class="number">24</span>.<span class="number">65</span>-<span class="keyword">b04, </span>mixed mode)</div></pre></td></tr></table></figure>
<p>ç¬¬äºŒï¼šæµ‹è¯•gatewayæ˜¯å¦å®‰è£…æˆåŠŸ</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">service zabbix-java-gateway <span class="built_in">status</span></div><div class="line">zabbix-java-gateway <span class="built_in">is</span> stopped</div></pre></td></tr></table></figure>
<ul>
<li><code>ç¬¬äºŒç§æ–¹æ³•</code>ï¼š</li>
</ul>
<p>æˆ‘è¿™é‡Œå‡çº§3.0.3ç‰ˆæœ¬çš„æ—¶å€™å·²ç»å®‰è£…å¥½äº†ã€‚æ‰€ä»¥å¦‚æœæ²¡æœ‰å®‰è£…ä¸Šçš„å¯ä»¥å•ç‹¬å®‰è£…æ²¡å…³ç³»çš„ï¼š</p>
<p>ä¸å—å½±å“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># tar zxvf zabbix-3.0.3.tar.gz</span></div><div class="line"><span class="comment"># cd zabbix-3.0.3</span></div><div class="line"><span class="comment"># ./configure  --enable-java  --prefix=/data/zabbix/zabbix_java  #/data/zabbixæ˜¯æˆ‘çš„zabbixå®‰è£…ç›®å½•</span></div><div class="line"><span class="comment"># make &amp;&amp; make install</span></div></pre></td></tr></table></figure>
<p>æˆ‘çš„ç›®å½•æ˜¯é»˜è®¤åœ¨/usr/local/zabbix/sbin/zabbix_java/</p>
<h3 id="3ã€ä¿®æ”¹Java-gatewayçš„é…ç½®æ–‡ä»¶å¹¶å¯åŠ¨å®ƒ"><a href="#3ã€ä¿®æ”¹Java-gatewayçš„é…ç½®æ–‡ä»¶å¹¶å¯åŠ¨å®ƒ" class="headerlink" title="3ã€ä¿®æ”¹Java-gatewayçš„é…ç½®æ–‡ä»¶å¹¶å¯åŠ¨å®ƒ"></a>3ã€ä¿®æ”¹<code>Java-gateway</code>çš„é…ç½®æ–‡ä»¶å¹¶å¯åŠ¨å®ƒ</h3><p>é…ç½®æ–‡ä»¶å•ç‹¬å®‰è£…çš„è·¯å¾„ä¸º/data/zabbix/zabbix_java/sbin/zabbix_java/settings.sh<br>æˆ‘è¿™é‡Œæ˜¯è¿™ä¸ªç›®å½•ã€‚å…·ä½“æ ¹æ®å®é™…å®‰è£…æƒ…å†µï¼‰ /usr/local/zabbix/sbin/zabbix_java/settings.sh<br>å¯ç”¨ä»¥ä¸‹å‚æ•°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">LISTEN_IP=<span class="string">"127.0.0.1"</span>       <span class="comment">#ç›‘å¬åœ°å€</span></div><div class="line">LISTEN_PORT=10052      <span class="comment">#ç›‘å¬ç«¯å£</span></div><div class="line">START_POLLERS=50        <span class="comment"># å¼€å¯çš„å·¥ä½œçº¿ç¨‹æ•°ï¼ˆå¿…é¡»å¤§äºç­‰äºåé¢zabbix_server.confæ–‡ä»¶çš„StartJavaPollerså‚æ•°ï¼‰ #å¿…é¡»é…ç½®ï¼Œå¯åŠ¨çš„è¿›å‡ºæ•°</span></div></pre></td></tr></table></figure>
<p><code>æ³¨æ„äº‹é¡¹ï¼š</code></p>
<ol>
<li>é…ç½®æ–‡ä»¶PID_FILEçš„è·¯å¾„å¿…é¡»æ˜¯æ­£ç¡®çš„ï¼Œå¯ä»¥è‡ªå·±å»cdæ‰¾ï¼Œyumå®‰è£…é»˜è®¤æƒ…å†µä¸‹ä¸ç”¨æ”¹åŠ¨ã€‚</li>
<li>START_POLLERSé¡¹æ˜¯é…ç½®å¯åŠ¨çš„è¿›å‡ºæ•°ï¼Œè¯¥å€¼å¿…é¡»å¤§äºç­‰äºZabbix-Serveré‡Œé¢çš„startJavaPollersé¡¹ã€‚</li>
</ol>
<p>è¿›å…¥/usr/local/zabbix/sbin/zabbix_java/ç›®å½•ï¼Œæ‰§è¡Œ./startup.sh</p>
<p>æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">netstat -anp|grep 10052</div><div class="line">tcp        0      0 0.0.0.0:10052               0.0.0.0:*                   LISTEN      21949/java</div></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ˜¯å¦å·²ç»ç›‘å¬10052ç«¯å£ï¼Œå¦‚æœå·²ç›‘å¬ï¼Œè¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¯é€šè¿‡zabbix_serveræ—¥å¿—æŸ¥çœ‹è§£å†³</p>
<h3 id="4ã€ä¿®æ”¹zabbix-serverçš„é…ç½®æ–‡ä»¶å¹¶é‡å¯"><a href="#4ã€ä¿®æ”¹zabbix-serverçš„é…ç½®æ–‡ä»¶å¹¶é‡å¯" class="headerlink" title="4ã€ä¿®æ”¹zabbix_serverçš„é…ç½®æ–‡ä»¶å¹¶é‡å¯"></a>4ã€ä¿®æ”¹<code>zabbix_server</code>çš„é…ç½®æ–‡ä»¶å¹¶é‡å¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">vim /usr/<span class="built_in">local</span>/zabbix/etc/zabbix_server.conf</div><div class="line"></div><div class="line">JavaGateway=127.0.0.1      <span class="comment"># JavaGateway æœåŠ¡å™¨åœ°å€ï¼Œzabbix_serverä¸zabbix_java_gatewayåœ¨åŒä¸€å°ä¸»æœº</span></div><div class="line">JavaGatewayPort=10052       <span class="comment">#ç«¯å£</span></div><div class="line">StartJavaPollers=5          <span class="comment"># #è®¾å®šè¿æ¥java gateway çš„è¿›ç¨‹æ•°ï¼Œå½“è®¾ç½®ä¸º0æ—¶è¡¨ç¤ºä¸å…·æœ‰æŠ“å–javaä¿¡æ¯çš„èƒ½åŠ›</span></div></pre></td></tr></table></figure>
<h3 id="5ã€-æ·»åŠ catalina-jmx-remote-jar"><a href="#5ã€-æ·»åŠ catalina-jmx-remote-jar" class="headerlink" title="5ã€ æ·»åŠ catalina-jmx-remote.jar"></a>5ã€ æ·»åŠ catalina-jmx-remote.jar</h3><p>æ·»åŠ catalina-jmx-remote.jaråˆ°zabbix java gatewayçš„libç›®å½•ä¸‹ï¼Œcatalina-jmx-remote.jaråŒ…å¯åœ¨<a href="http://archive.apache.org/dist/tomcat/ä¸‹ï¼Œåœ¨å„ç‰ˆæœ¬ç›®å½•çš„bin/extras/å­ç›®å½•ä¸‹" target="_blank" rel="external">http://archive.apache.org/dist/tomcat/ä¸‹ï¼Œåœ¨å„ç‰ˆæœ¬ç›®å½•çš„bin/extras/å­ç›®å½•ä¸‹</a></p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /usr/local/zabbix/sbin/zabbix_java/<span class="class"><span class="keyword">lib</span>/</span></div><div class="line">wget <span class="symbol">http:</span>/<span class="regexp">/archive.apache.org/dist</span><span class="regexp">/tomcat/tomcat</span>-<span class="number">7</span>/v7.<span class="number">0.55</span>/bin/extras/catalina-jmx-remote.jar</div></pre></td></tr></table></figure>
<p>é‡å¯æœåŠ¡zabbixå’Œjava gateway å¹¶åŠ å…¥å¯åŠ¨é¡¹å¹¶éªŒè¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/zabbix_server restart</div><div class="line">/usr/<span class="built_in">local</span>/zabbix/sbin/zabbix_java/shutdown.sh</div><div class="line">/usr/<span class="built_in">local</span>/zabbix/sbin/zabbix_java/startup.sh</div></pre></td></tr></table></figure>
<h3 id="6-ä¸‹è½½æµ‹è¯•å·¥å…·cmdline-jmxclient-0-10-3-jar"><a href="#6-ä¸‹è½½æµ‹è¯•å·¥å…·cmdline-jmxclient-0-10-3-jar" class="headerlink" title="6.ä¸‹è½½æµ‹è¯•å·¥å…·cmdline-jmxclient-0.10.3.jar"></a>6.ä¸‹è½½æµ‹è¯•å·¥å…·<code>cmdline-jmxclient-0.10.3.jar</code></h3><p>cmdline-jmxclient-0.10.3.jarä¸ºä¸€ä¸ªæµ‹è¯•å·¥å…·ï¼Œå¯ç”¨æ¥æµ‹è¯•jmxæ˜¯å¦é…ç½®æ­£ç¡®ï¼Œä¸‹è½½cmdline-jmxclient-0.10.3.jar(ä¸‹è½½åˆ°ä»»æ„ç›®å½•)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget http://crawler.archive.org/cmdline-jmxclient/cmdline-jmxclient-0.10.3.jar</div></pre></td></tr></table></figure>
<h2 id="äºŒã€è¢«ç›‘æ§tomcat-é…ç½®ï¼»è¢«ç›‘æ§tomcatæ“ä½œï¼½"><a href="#äºŒã€è¢«ç›‘æ§tomcat-é…ç½®ï¼»è¢«ç›‘æ§tomcatæ“ä½œï¼½" class="headerlink" title="äºŒã€è¢«ç›‘æ§tomcat é…ç½®ï¼»è¢«ç›‘æ§tomcatæ“ä½œï¼½"></a>äºŒã€è¢«ç›‘æ§tomcat é…ç½®ï¼»è¢«ç›‘æ§tomcatæ“ä½œï¼½</h2><h3 id="ä¸‹è½½catalina-jmx-remote-jar"><a href="#ä¸‹è½½catalina-jmx-remote-jar" class="headerlink" title="ä¸‹è½½catalina-jmx-remote.jar"></a>ä¸‹è½½catalina-jmx-remote.jar</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /srv/tomcat/tomcat-account/lib/</div><div class="line">wget http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.55/bin/extras/catalina-jmx-remote.jar <span class="comment">#æˆ‘çš„tomcatç‰ˆæœ¬æ˜¯7.0.55</span></div><div class="line">chown -R tomcat:tomcat catalina-jmx-remote.jar</div><div class="line">chmod +x catalina-jmx-remote.jar</div></pre></td></tr></table></figure>
<p>æˆ‘çš„tomcatç‰ˆæœ¬æ˜¯<code>7.0.55</code>  å°†ä¸‹è½½ååçš„jaråŒ…æ”¾åˆ°è¢«ç›‘æ§çš„tomcatå®ä¾‹çš„libç›®å½•ä¸‹ã€‚ </p>
<h3 id="æŸ¥çœ‹tomcatçš„ç‰ˆæœ¬"><a href="#æŸ¥çœ‹tomcatçš„ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹tomcatçš„ç‰ˆæœ¬"></a>æŸ¥çœ‹tomcatçš„ç‰ˆæœ¬</h3><ul>
<li>è¿™é‡Œä¹‹å‰ä¹Ÿè‡ªå·±ä¹Ÿå¿˜è®°äº†tomcatçš„ç‰ˆæœ¬æ˜¯å¤šå°‘äº†ï¼Œæ‰€ä»¥æˆ‘å…ˆæŸ¥çœ‹ä¸‹ç„¶ååœ¨ä¸‹è½½ï¼š</li>
</ul>
<figure class="highlight ldif"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">cd /srv/tomcat/tomcat_account/bin</span></div><div class="line">[root@tomcat_A1 bin]# ./version.sh --</div><div class="line">Using CATALINA_BASE:   /srv/tomcat/tomcat_account</div><div class="line"><span class="attribute">Using CATALINA_HOME</span>:   /srv/tomcat/tomcat_account</div><div class="line"><span class="attribute">Using CATALINA_TMPDIR</span>: /srv/tomcat/tomcat_account/temp</div><div class="line"><span class="attribute">Using JRE_HOME</span>:        /srv/jdk1.7.0_67</div><div class="line"><span class="attribute">Using CLASSPATH</span>:       /srv/tomcat/tomcat_account/bin/bootstrap.jar:/srv/tomcat/tomcat_account/bin/tomcat-juli.jar</div><div class="line"><span class="attribute">Server version</span>: Apache Tomcat/7.0.55</div><div class="line"><span class="attribute">Server built</span>:   Jul 18 2014 05:34:04</div><div class="line"><span class="attribute">Server number</span>:  7.0.55.0</div><div class="line"><span class="attribute">OS Name</span>:        Linux</div><div class="line"><span class="attribute">OS Version</span>:     2.6.32-573.8.1.el6.x86_64</div><div class="line"><span class="attribute">Architecture</span>:   amd64</div><div class="line"><span class="attribute">JVM Version</span>:    1.7.0_67-b01</div><div class="line"><span class="attribute">JVM Vendor</span>:     Oracle Corporation</div></pre></td></tr></table></figure>
<p>åœ¨tomcatç«¯é…ç½®JMXã€‚ï¼ˆtomcat/bin/catalina.shï¼‰è‡ªå·±å®‰è£…çš„tomcatè·¯å¾„ï¼Œæ‰¾åˆ°catalina.shæ–‡ä»¶ã€‚</p>
<p>ç½‘ä¸Šå¾ˆå¤šäººä¿®æ”¹tomcat/bin/ä¸‹çš„catalina.shï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CATALINA_OPTS=<span class="string">"-Dcom.sun.management.jmxremote</span></div><div class="line">-Dcom.sun.management.jmxremote.authenticate=false</div><div class="line">-Dcom.sun.management.jmxremote.ssl=false</div><div class="line">-Dcom.sun.management.jmxremote.port=12345  #å®šä¹‰jmxç›‘å¬ç«¯å£</div><div class="line">-Djava.rmi.server.hostname=192.168.7.186"</div></pre></td></tr></table></figure>
<ul>
<li>æˆ‘è¿™é‡Œæ˜¯ç›´æ¥åœ¨binç›®å½•ä¸‹é¢åˆ›å»ºè‡ªå®šä¹‰çš„è„šæœ¬ã€‚</li>
</ul>
<h3 id="ä¿®æ”¹setenv-sh"><a href="#ä¿®æ”¹setenv-sh" class="headerlink" title="ä¿®æ”¹setenv.sh"></a>ä¿®æ”¹setenv.sh</h3><p>vi /srv/tomcat/tomcat-account/bin/setenv.sh</p>
<p>æ·»åŠ å¦‚ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CATALINA_OPTS=<span class="string">"<span class="variable">$&#123;CATALINA_OPTS&#125;</span> -Djava.rmi.server.hostname=192.168.7.186"</span></div><div class="line">CATALINA_OPTS=<span class="string">"<span class="variable">$&#123;CATALINA_OPTS&#125;</span> -Djavax.management.builder.initial="</span></div><div class="line">CATALINA_OPTS=<span class="string">"<span class="variable">$&#123;CATALINA_OPTS&#125;</span> -Dcom.sun.management.jmxremote=true"</span></div><div class="line">CATALINA_OPTS=<span class="string">"<span class="variable">$&#123;CATALINA_OPTS&#125;</span> -Dcom.sun.management.jmxremote.ssl=false"</span></div><div class="line">CATALINA_OPTS=<span class="string">"<span class="variable">$&#123;CATALINA_OPTS&#125;</span> -Dcom.sun.management.jmxremote.authenticate=false"</span></div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šhostnameä½æœºå™¨ipåœ°å€ï¼Œå³è¢«ç›‘æ§æœºå™¨å¯¹å¤–æœåŠ¡åœ°å€</p>
<h3 id="3-ä¿®æ”¹server-xml"><a href="#3-ä¿®æ”¹server-xml" class="headerlink" title="3.ä¿®æ”¹server.xml"></a>3.ä¿®æ”¹server.xml</h3><p>vi /opt/apache-tomcat/conf/server.xml<br>æ·»åŠ å¦‚ä¸‹ï¼Œæ³¨æ„æ·»åŠ ä½ç½®åœ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Listener className=<span class="string">"org.apache.catalina.core.ThreadLocalLeakPreventionListener"</span> /&gt;</div></pre></td></tr></table></figure>
<p>ä¹‹åæ·»åŠ å¦‚ä¸‹ä»£ç </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Listener className=<span class="string">"org.apache.catalina.mbeans.JmxRemoteLifecycleListener"</span> rmiRegistryPortPlatform=<span class="string">"12345"</span> rmiServerPortPlatform=<span class="string">"12345"</span> /&gt;</div></pre></td></tr></table></figure>
<p>3ã€é‡å¯<code>tomcat</code><br>è¿™é‡Œæˆ‘ä¹‹å‰æ˜¯ç”¨å†™å¥½çš„å¯åŠ¨è„šæœ¬å»å¯åŠ¨çš„ï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ã€‚<br>å› ä¸ºæˆ‘éƒ½æ˜¯ç”¨/etc/init.d/tomcat stop start æ¥å¯åŠ¨ã€‚<br>å¯æ˜¯å‘ç°æœåŠ¡å¯åŠ¨äº†ï¼Œå¯æ˜¯ä¹‹å‰çš„tomcatæœåŠ¡ç«¯å£ä¸è§äº†ã€‚æˆ‘ä¹‹å‰çš„tomcatæœåŠ¡ç«¯å£<code>10001</code></p>
<p>ç„¶åæŸ¥çœ‹æ—¥å¿—å‡ºç°æŠ¥é”™ï¼š</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">	at java<span class="selector-class">.lang</span><span class="selector-class">.reflect</span><span class="selector-class">.Method</span><span class="selector-class">.invoke</span>(Method<span class="selector-class">.java</span>:<span class="number">606</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.commons</span><span class="selector-class">.daemon</span><span class="selector-class">.support</span><span class="selector-class">.DaemonLoader</span><span class="selector-class">.start</span>(DaemonLoader<span class="selector-class">.java</span>:<span class="number">243</span>)</div><div class="line">Caused by: java<span class="selector-class">.lang</span><span class="selector-class">.IllegalArgumentException</span>: jmxremote<span class="selector-class">.access</span> (æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•)</div><div class="line">	at javax<span class="selector-class">.management</span><span class="selector-class">.remote</span><span class="selector-class">.rmi</span><span class="selector-class">.RMIConnectorServer</span><span class="selector-class">.start</span>(RMIConnectorServer<span class="selector-class">.java</span>:<span class="number">373</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.mbeans</span><span class="selector-class">.JmxRemoteLifecycleListener</span><span class="selector-class">.createServer</span>(JmxRemoteLifecycleListener<span class="selector-class">.java</span>:<span class="number">313</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.mbeans</span><span class="selector-class">.JmxRemoteLifecycleListener</span><span class="selector-class">.lifecycleEvent</span>(JmxRemoteLifecycleListener<span class="selector-class">.java</span>:<span class="number">259</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.util</span><span class="selector-class">.LifecycleSupport</span><span class="selector-class">.fireLifecycleEvent</span>(LifecycleSupport<span class="selector-class">.java</span>:<span class="number">117</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.util</span><span class="selector-class">.LifecycleBase</span><span class="selector-class">.fireLifecycleEvent</span>(LifecycleBase<span class="selector-class">.java</span>:<span class="number">90</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.util</span><span class="selector-class">.LifecycleBase</span><span class="selector-class">.setStateInternal</span>(LifecycleBase<span class="selector-class">.java</span>:<span class="number">402</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.util</span><span class="selector-class">.LifecycleBase</span><span class="selector-class">.setState</span>(LifecycleBase<span class="selector-class">.java</span>:<span class="number">347</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.core</span><span class="selector-class">.StandardServer</span><span class="selector-class">.startInternal</span>(StandardServer<span class="selector-class">.java</span>:<span class="number">732</span>)</div><div class="line">	at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.util</span><span class="selector-class">.LifecycleBase</span><span class="selector-class">.start</span>(LifecycleBase<span class="selector-class">.java</span>:<span class="number">150</span>)</div><div class="line">	... <span class="number">11</span> more</div><div class="line">Caused by: java<span class="selector-class">.io</span><span class="selector-class">.FileNotFoundException</span>: jmxremote<span class="selector-class">.access</span> (æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•)</div><div class="line">	at java<span class="selector-class">.io</span><span class="selector-class">.FileInputStream</span><span class="selector-class">.open</span>(Native Method)</div><div class="line">	at java<span class="selector-class">.io</span><span class="selector-class">.FileInputStream</span>.&lt;init&gt;(FileInputStream<span class="selector-class">.java</span>:<span class="number">146</span>)</div><div class="line">	at java<span class="selector-class">.io</span><span class="selector-class">.FileInputStream</span>.&lt;init&gt;(FileInputStream<span class="selector-class">.java</span>:<span class="number">101</span>)</div><div class="line">	at com<span class="selector-class">.sun</span><span class="selector-class">.jmx</span><span class="selector-class">.remote</span><span class="selector-class">.security</span><span class="selector-class">.MBeanServerFileAccessController</span><span class="selector-class">.propertiesFromFile</span>(MBeanServerFileAccessController<span class="selector-class">.java</span>:<span class="number">294</span>)</div><div class="line">	at com<span class="selector-class">.sun</span><span class="selector-class">.jmx</span><span class="selector-class">.remote</span><span class="selector-class">.security</span><span class="selector-class">.MBeanServerFileAccessController</span>.&lt;init&gt;(MBeanServerFileAccessController<span class="selector-class">.java</span>:<span class="number">133</span>)</div><div class="line">	at javax<span class="selector-class">.management</span><span class="selector-class">.remote</span><span class="selector-class">.rmi</span><span class="selector-class">.RMIConnectorServer</span><span class="selector-class">.start</span>(RMIConnectorServer<span class="selector-class">.java</span>:<span class="number">371</span>)</div><div class="line">	... <span class="number">19</span> more</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå…ˆkill -9 tomcatè¿›ç¨‹<br>åªéœ€è¦åœ¨/bin/ç›®å½•ä¸‹é¢å¯åŠ¨æœåŠ¡ã€‚<code>./startup.sh</code><br>ç„¶åæŸ¥çœ‹æœ‰ä¸‹é¢çš„12345 12346 è¿›ç¨‹ å’Œtomcatè¿›ç¨‹10001 è¯´æ˜å°±å¯¹äº†ã€‚</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@tomcat_A1 bin]# netstat -ntulp</div><div class="line">Active Internet connections (only servers)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">10.46</span><span class="meta">.72</span><span class="meta">.172</span>:<span class="number">10050</span>          <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">8483</span>/zabbix_agentd</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span><span class="meta">.0</span><span class="meta">.1</span>:<span class="number">8006</span>              <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">8942</span>/java</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">4041</span>                <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">8942</span>/java</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">10001</span>               <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">8942</span>/java</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">22</span>                  <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">1363</span>/sshd</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">36440</span>               <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">8942</span>/java</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">12345</span>               <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">8942</span>/java</div><div class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">12346</span>               <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   <span class="number">1374</span>/ntpd</div><div class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">10.46</span><span class="meta">.72</span><span class="meta">.172</span>:<span class="number">123</span>            <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                               <span class="number">1374</span>/ntpd</div><div class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span><span class="meta">.0</span><span class="meta">.1</span>:<span class="number">123</span>               <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                               <span class="number">1374</span>/ntpd</div><div class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">123</span>                 <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                               <span class="number">1374</span>/ntpd</div></pre></td></tr></table></figure>
<p>é‡å¯zabbix agent</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">service zabbix-agent restart</span></div></pre></td></tr></table></figure>
<p>æ³¨ï¼šé˜²ç«å¢™éœ€è¦å¼€æ”¾12345ï¼Œ12346ç«¯å£</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">-A INPUT -i  eth0 -p tcp -m <span class="keyword">state</span> --state NEW -m tcp --dport <span class="number">12345</span> -j ACCEPT</div><div class="line">-A INPUT -i  eth0 -p tcp -m <span class="keyword">state</span> --state NEW -m tcp --dport <span class="number">12346</span> -j ACCEPT</div></pre></td></tr></table></figure>
<p>###4ã€æœåŠ¡ç«¯æµ‹è¯•æ˜¯å¦å¯ä»¥è·å–æ•°æ®</p>
<p>å‘½ä»¤è¡Œä¸‹æµ‹è¯•éœ€è¦cmdline-jmxclient-0.10.3.jarè¿™ä¸ªåŒ…ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>
<p>è¿™ä¸ªåŒ…ä¸‹è½½åœ°å€:<a href="http://oak0aohum.bkt.clouddn.com/cmdline-jmxclient-0.10.3.jar" target="_blank" rel="external">cmdline-jmxclient-0.10.3.jar</a></p>
<p>åœ¨zabbix serverä¸Šæ‰§è¡Œ</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java -jar /tmp/cmdline-jmxclient-<span class="number">0.10</span>.<span class="number">3</span><span class="selector-class">.jar</span> - <span class="number">192.168</span>.<span class="number">7.186</span>:<span class="number">12345</span> java<span class="selector-class">.lang</span>:type=Memory NonHeapMemoryUsage</div></pre></td></tr></table></figure>
<p>å¦‚æœæœ‰å¦‚ä¸‹å›æ˜¾è¡¨ç¤ºjmxé…ç½®æ­£ç¡®ï¼Œå¦‚ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥é…ç½®,çœ‹ä¸‹ç«¯å£å¯åŠ¨æ˜¯å¦æ­£å¸¸ï¼Œserver.xml é…ç½®ã€‚</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">07</span><span class="regexp">/22/</span><span class="number">2016</span> <span class="number">14</span>:<span class="number">45</span>:<span class="number">28</span> +<span class="number">0800</span> org.archive.jmx.Client <span class="string">NonHeapMemoryUsage:</span></div><div class="line"><span class="string">committed:</span> <span class="number">80347136</span></div><div class="line"><span class="string">init:</span> <span class="number">24576000</span></div><div class="line"><span class="string">max:</span> <span class="number">136314880</span></div><div class="line"><span class="string">used:</span> <span class="number">46634984</span></div></pre></td></tr></table></figure>
<p>å†™ä¸ªè„šæœ¬è‡ªåŠ¨åˆ¤æ–­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">vim context.sh</div><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">java -jar /opt/tomcat/cmdline-jmxclient-0.10.3.jar - 10.46.72.172:12345 Catalina:<span class="built_in">type</span>=Manager,*| awk -F <span class="string">","</span> <span class="string">'&#123; print $1 &#125;'</span>|awk -F: <span class="string">'&#123; print $2 &#125;'</span>&gt;/tmp/tomcat/context.csv</div></pre></td></tr></table></figure>
<h2 id="ä¸‰ã€å¯¼å…¥æ¨¡æ¿åˆ°zabbixï¼Œå¹¶å…³è”åˆ°ä¸»æœºï¼Œæ·»åŠ ç›‘æ§"><a href="#ä¸‰ã€å¯¼å…¥æ¨¡æ¿åˆ°zabbixï¼Œå¹¶å…³è”åˆ°ä¸»æœºï¼Œæ·»åŠ ç›‘æ§" class="headerlink" title="ä¸‰ã€å¯¼å…¥æ¨¡æ¿åˆ°zabbixï¼Œå¹¶å…³è”åˆ°ä¸»æœºï¼Œæ·»åŠ ç›‘æ§"></a>ä¸‰ã€å¯¼å…¥æ¨¡æ¿åˆ°zabbixï¼Œå¹¶å…³è”åˆ°ä¸»æœºï¼Œæ·»åŠ ç›‘æ§</h2><p>è¿™æ ·ä¹Ÿå¯ä»¥é€‰æ‹©ç³»ç»Ÿè‡ªå¸¦çš„ï¼Œæˆ‘è¿™é‡Œzabbixç‰ˆæœ¬æ˜¯3.0çš„ï¼Œç³»ç»Ÿè‡ªå¸¦çš„å¯ä»¥é€‰æ‹©ï¼š<br>é€‰æ‹©é…ç½®ï¼šä¸»æœº-æ¨¡æ¿-é€‰æ‹©-æ¨¡æ¿-ï¼š<br>Template JMX Tomcat<br>Template JMX Generic</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat4.png" alt=""></figure></p>
<p>ä»ç½‘ä¸Šä¸‹è½½äº†ä¸€ä¸ªä¸é”™çš„æ¨¡æ¿ï¼Œå¯¼å…¥åå¦‚ä¸‹ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat2.png" alt=""></figure><br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat3.png" alt=""></figure></p>
<p>å¯¼å…¥æ¨¡æ¿ä»¥åä¸»æœºæ·»åŠ ç«¯å£ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat6.png" alt=""></figure></p>
<p>ç„¶åæŸ¥çœ‹å›¾å½¢ï¼š<br><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat5.png" alt=""></figure></p>
<p>å°±æœ‰äº†ã€‚</p>
<h3 id="å››ã€å¦‚ä½•ç›‘æ§å•ä¸»æœºå¤šä¸ªtomcat"><a href="#å››ã€å¦‚ä½•ç›‘æ§å•ä¸»æœºå¤šä¸ªtomcat" class="headerlink" title="å››ã€å¦‚ä½•ç›‘æ§å•ä¸»æœºå¤šä¸ªtomcat"></a>å››ã€å¦‚ä½•ç›‘æ§å•ä¸»æœºå¤šä¸ªtomcat</h3><p>ç›‘æ§å¤šä¸ªtomcatå®ä¾‹ï¼Œç½‘ä¸Šçš„è¯¦ç»†çš„é…ç½®æ–‡æ¡£å¾ˆå°‘ï¼Œå‡ ä¹æ²¡æœ‰ã€‚æ¯”è¾ƒå¥½çš„åŠæ³•æ˜¯ä½¿ç”¨è‡ªåŠ¨å‘ç°ï¼Œä½†åˆšä½¿ç”¨zabbixï¼Œæ¥ä¸åŠç ”ç©¶ï¼Œæ‰€ä»¥é‡‡ç”¨ç¬¨æ³•ï¼Œä¿®æ”¹æ¨¡æ¿ã€ç›‘æ§é¡¹ã€å›¾å½¢æ¥è¾¾åˆ°æœ€ç»ˆç›®çš„ã€‚<br>å…³é”®é…ç½®ï¼š<br>1ã€æ·»åŠ ä¸»æœºæ—¶æ·»åŠ å¤šä¸ªjmxç«¯å£</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat7.png" alt=""></figure></p>
<p>2ã€ä¿®æ”¹ç›‘æ§é¡¹ã€é”®å€¼<br>åœ¨åŒä¸€ä¸»æœºä¸Šï¼Œzabbixä¸å…é”®å€¼é‡å¤ï¼Œä½†æ˜¯ç›‘æ§çš„é¡¹ç›®æ˜¯ä¸€æ ·çš„ï¼Œä¸å¯èƒ½é”®å€¼å†™çš„ä¸é‡å¤ï¼Œç»è¿‡å‡ ç•ªæœç´¢ï¼Œæ‰¾åˆ°æ–¹æ³•å¦‚ä¸‹ï¼š<br>åªè¦åœ¨ç®­å¤´å¤„æ·»åŠ 1ä¸ªç©ºæ ¼å°±å¯ä»¥ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªã€‚ï¼ˆæ³¨æ„ä½ç½®ä¸è¦é”™ï¼Œåœ¨é€—åˆ°åé¢ï¼‰</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat8.png" alt=""></figure></p>
<p>å‰©ä¸‹çš„å°±æ˜¯ä½“åŠ›æ´»äº†ï¼Œå…‹éš†ç›‘æ§é¡¹ã€ä¿®æ”¹ç›‘æ§é¡¹ã€å…‹éš†å›¾å½¢ã€ä¿®æ”¹å›¾å½¢ã€‚ã€‚ã€‚<br>ä»¥ä¸‹æ˜¯ä¸¤ä¸ªtomcatå®ä¾‹çš„ç›‘æ§é¡¹ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat10.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat9.png" alt=""></figure></p>
<p>å¤šä¸ªtomcatåœ¨ä¸€å°ä¸»æœºä¸Šé¢æœ€åçš„ç›‘æ§æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat11.png" alt=""></figure></p>
<p><figure class="figure"><img src="http://7xrthw.com1.z0.glb.clouddn.com/zabbix-tomcat12.png" alt=""></figure></p>
<p>ä¸€å¼€å§‹zabbixç›‘æ§tomcat ä¸€è·¯é¡ºç•…ï¼Œå¯æ˜¯åˆ°æµ‹è¯•æ­£ä¸æ­£å¸¸æ—¶å€™ï¼Œè¿”å›æ‹’ç»è¿æ¥ï¼Œç¬¬ä¸€æ—¶é—´æƒ³åˆ°å°±æ˜¯é…ç½®æœ‰é—®é¢˜ï¼š</p>
<p>æˆ‘æ˜¯å‚è€ƒè¿™ä¸ªè§£å†³äº†ã€‚</p>
<p>å…·ä½“å‚æ•°å†…å®¹è¯·å‚è€ƒ <a href="https://tomcat.apache.org/tomcat-7.0-doc/config/listeners.html#Additional_Implementations" target="_blank" rel="external">apache tomcat æ–‡æ¡£</a></p>
<p>ä¹Ÿéå¸¸æ„Ÿè°¢ï¼šå¼ çˆ±å¾·å¤§ç¥ ä¸€è·¯zabbixä¸Šé¢çš„å¸®æˆ‘ä¸€èµ·æ’å‘ï¼š</p>
<p>zabbixå¤§ç¥ ä»–çš„åšå®¢blogï¼š<a href="https://blog.cactifans.com" target="_blank" rel="external">https://blog.cactifans.com</a></p>

	

	
		<span class="different-posts"><a href="/2016/06/21/æ€§èƒ½ç›‘æ§/Zabbix/zabbix3-0éƒ¨ç½²jmxç›‘æ§tomcat/" onclick="window.history.go(-1); return false;">â¬…ï¸ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2019 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
