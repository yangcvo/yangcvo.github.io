<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>zabbix-server2.4å…¨æ–°å‡çº§3.0ç‰ˆæœ¬ | Yancy&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Yancy&#39;s blog" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link">Home</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/archives" class="header__link">ARCHIVES</a>
			
				<a href="/about/About" class="header__link">ABOUT</a>
			
				<a href="http://weibo.com/yangcvo" class="header__link">Weibo</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Yancy&#39;s blog</a></h1>
		<h2 class="header__subtitle">SIMPLICITY IS PREREQUISITE FOR  RELIABILITY</h2>
	</header>

	<main>
		<article>
	
		<h1>zabbix-server2.4å…¨æ–°å‡çº§3.0ç‰ˆæœ¬</h1>
	
	<div class="article__infos">
		<span class="article__date">2016-06-18</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/monitoring/">monitoring</a>
			</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Zabbix-monitoring/">Zabbix monitoring</a>
			</span>
		
	</div>

	

	
		<p>zabbix3.0å‡ºæ¥äº†ä¸€æ®µæ—¶é—´äº†ï¼Œæœ€è¿‘å¿ä¸ä½æŠŠå…¬å¸åŸæ¥çš„2.4.7ç‰ˆæœ¬å‡çº§åˆ°äº†3.0ã€‚zabbixå‡çº§å…¶å®å¾ˆç®€å•ï¼ŒåŸºæœ¬æ­¥éª¤ä¸ºï¼šå¤‡ä»½-&gt;é‡æ–°å®‰è£…æ–°ç‰ˆæœ¬ã€‚æ¥ä¸‹æ¥ç®€å•å†™ä¸‹è¿™æ¬¡å‡çº§çš„æ“ä½œå’Œé—®é¢˜</p>
<h4 id="1ã€-å…³é—­zabbix-server"><a href="#1ã€-å…³é—­zabbix-server" class="headerlink" title="1ã€ å…³é—­zabbix server"></a>1ã€ å…³é—­zabbix server</h4><p>é˜²æ­¢æœ‰æ–°çš„æ•°æ®æäº¤åˆ°æ•°æ®åº“ä¸­ã€ç›´æ¥å…³é—­æ•°æ®åº“æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚è¿™é‡Œæˆ‘å…ˆå…³é—­æ‰æˆ‘çš„æœåŠ¡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/zabbix_server stop  å…³é—­äº†serveræœåŠ¡ç«¯</div><div class="line">/etc/init.d/zabbix_agentd stop   å…³é—­äº†agentå®¢æˆ·ç«¯</div></pre></td></tr></table></figure>
<h3 id="2ã€-å¤‡ä»½"><a href="#2ã€-å¤‡ä»½" class="headerlink" title="2ã€ å¤‡ä»½"></a>2ã€ å¤‡ä»½</h3><h4 id="2-1-å¤‡ä»½æ•°æ®åº“"><a href="#2-1-å¤‡ä»½æ•°æ®åº“" class="headerlink" title="2.1 å¤‡ä»½æ•°æ®åº“"></a>2.1 å¤‡ä»½æ•°æ®åº“</h4><p>æœ€ç®€å•çš„å¤‡ä»½ï¼šå…³é—­æ•°æ®ï¼Œæ•´ä¸ªæ•°æ®åº“ç›®å½•copyä¸€ä»½ã€‚è™½è¯´å‡çº§ä¸€èˆ¬ä¸ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å®‰å…¨èµ·è§è¿˜æ˜¯æœ‰å¿…è¦å¤‡ä»½ä¸€ä¸‹ï¼Œå°±ç®—å‡çº§æˆåŠŸï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æ–°ç‰ˆæœ¬è®©ä½ å–œæ¬¢ï¼Œè¿™ä¸ªæ—¶å€™å›é€€ä¹Ÿæœ‰åè·¯ã€‚</p>
<p>è¿™é‡Œæˆ‘ç”¨çš„æ˜¯å‘½ä»¤å¯¼å‡ºçš„ï¼š<br>ä¹Ÿå¯ä»¥ç”¨NAvicatï¼Œå¯¼å‡ºç»“æ„å’Œæ•°æ®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">mysqldump -u root -p*****  -h MySQLIPåœ°å€ --opt --skip-lock-tables --flush-logs --database zabbix &gt;  /tmp/zabbix.sql</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">mysqldump -uroot -p -P7306 --opt --skip-lock-tables --flush-logs --database zabbix3 --ignore-table=zabbix.history --ignore-table=zabbix.history_log --ignore-table=zabbix.history_str --ignore-table=zabbix.history_text --ignore-table=zabbix.history_uint --ignore-table=zabbix.trends --ignore-table=zabbix.trends_uint  &gt;/root/zabbix20183026.sql</div><div class="line"></div><div class="line"></div><div class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</div><div class="line">Warning: Using unique option prefix database instead of databases is deprecated and will be removed <span class="keyword">in</span> a future release. Please use the full name instead.</div><div class="line">mysqldump: Got error: 1227: Access denied; you need (at least one of) the RELOAD privilege(s) <span class="keyword">for</span> this operation when doing refresh</div><div class="line"></div><div class="line">æç¤ºï¼š</div><div class="line"></div><div class="line">Login to mysql as root and enter your <span class="built_in">command</span>:</div><div class="line"></div><div class="line">FLUSH PRIVILEGES;</div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šzabbixæ•°æ®åº“å¤‡ä»½å¯ä»¥å¤‡ä»½æ•´ä¸ª/var/lib/zabbixç›®å½•ä¸‹æ‰€æœ‰æ•°æ®ï¼Œä½†æ˜¯æ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œå¾ˆå ç©ºé—´ã€‚ä¸å»ºè®®è¿™ä¹ˆåšã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œåªå¤‡ä»½zabbixçš„è¡¨æ–‡ä»¶ï¼Œå†å²æ•°æ®å’Œè¶‹åŠ¿æ•°æ®çš„è¡¨ä¸å¤‡ä»½ã€‚</p>
<h4 id="2-2-å¤‡ä»½æ–‡ä»¶"><a href="#2-2-å¤‡ä»½æ–‡ä»¶" class="headerlink" title="2.2 å¤‡ä»½æ–‡ä»¶"></a>2.2 å¤‡ä»½æ–‡ä»¶</h4><p>å¤‡ä»½é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯/etc/zabbixï¼‰ã€phpç½‘ç«™æºç ã€zabbixäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆæ•´ä¸ªç¨‹åºç›®å½•å¤‡ä»½å°±OKï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">å¤‡ä»½é…ç½®æ–‡ä»¶ï¼š mv /usr/<span class="built_in">local</span>/zabbix/ /usr/<span class="built_in">local</span>/zabbix.2.4.7</div><div class="line"></div><div class="line">å¤‡ä»½å¯åŠ¨è„šæœ¬ï¼š</div><div class="line"> mv /etc/init.d/zabbix_server /etc/init.d/zabbix_server.2.4.7</div><div class="line"> mv /etc/init.d/zabbix_agentd /etc/init.d/zabbix_agentd.2.4.7</div><div class="line"></div><div class="line">å¤‡ä»½zabbix.phpæ–‡ä»¶ï¼š</div><div class="line"></div><div class="line"> mv /var/www/html/zabbix/ /var/www/html/zabbix.2.4.7</div></pre></td></tr></table></figure>
<h2 id="3ã€å®‰è£…é…ç½®"><a href="#3ã€å®‰è£…é…ç½®" class="headerlink" title="3ã€å®‰è£…é…ç½®"></a>3ã€å®‰è£…é…ç½®</h2><h4 id="3-1-å®‰è£…Zabbix-server-é‡æ–°å®‰è£…æ–°ç‰ˆæœ¬"><a href="#3-1-å®‰è£…Zabbix-server-é‡æ–°å®‰è£…æ–°ç‰ˆæœ¬" class="headerlink" title="3.1 å®‰è£…Zabbix server é‡æ–°å®‰è£…æ–°ç‰ˆæœ¬"></a>3.1 å®‰è£…Zabbix server é‡æ–°å®‰è£…æ–°ç‰ˆæœ¬</h4><p>é‡å¤´å®‰è£…ä¸€æ¬¡zabbixï¼Œä¹Ÿå°±æ˜¯configure â€“â€¦ make make install.<br>å¤‡æ³¨ï¼šä¸€èˆ¬é«˜ç‰ˆæœ¬zabbix serverå…¼å®¹ä½ç‰ˆæœ¬zabbixå®¢æˆ·ç«¯ã€‚å¦‚æœå‘ç°æœ‰å¼‚å¸¸ï¼Œé‚£ä¹ˆä½ çš„zabbixå®¢æˆ·ç«¯ä¹Ÿç›¸åº”å‡çº§ä¸€ä¸‹ã€‚å®¢æˆ·ç«¯å‡çº§æ¯”è¾ƒç®€å•ï¼šæ›´æ–°äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶å¯¹ç…§ä¸‹æ˜¯å¦æœ‰ä¿®æ”¹å³å¯ã€‚</p>
<p>ä¸‹è½½zabbix3.0ç‰ˆæœ¬ï¼Œè§£å‹å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">wget http://oak0aohum.bkt.clouddn.com/zabbix-3.0.3.tar.gz  -c /tmp/</div><div class="line"><span class="built_in">cd</span> /tmp/</div><div class="line">tar zxf zabbix-3.0.3.tar.gz</div><div class="line">./configure --prefix=/usr/<span class="built_in">local</span>/zabbix --enable-server --with-mysql --with-net-snmp --with-libxml2 --with-libcurl --with-openipmi --enable-proxy --enable-agent --enable-java --with-ldap</div><div class="line"></div><div class="line">å¦‚æœç¼–è¯‘å¤±è´¥æ²¡æœ‰libxml2 ldap éœ€è¦yumå®‰è£…ä¸‹ï¼š</div><div class="line">yum install openldap openldap-devel libxml2* -y </div><div class="line"> </div><div class="line">ç¼–è¯‘æˆåŠŸè¿™é‡Œä¼šå‡ºç°ï¼š</div><div class="line">***********************************************************</div><div class="line">*            Now run <span class="string">'make install'</span>                       *</div><div class="line">*                                                         *</div><div class="line">*            Thank you <span class="keyword">for</span> using Zabbix!                  *</div><div class="line">*              &lt;http://www.zabbix.com&gt;                    *</div><div class="line">***********************************************************</div><div class="line"><span class="comment">#ç›´æ¥make install å®‰è£…å³å¯ï¼š</span></div><div class="line"> </div><div class="line">make install</div></pre></td></tr></table></figure>
<p>è¿™é‡Œç¼–è¯‘å®‰è£… æˆ‘åŠ ä¸Šäº†ï¼šâ€“enable-java è¿™æ ·é˜²æ­¢åæœŸç›‘æ§tomcatéœ€è¦é‡æ–°ç¼–è¯‘ã€‚<br>å®‰è£…å¥½ä»¥åï¼š</p>
<p>3.2 æ£€æŸ¥é…ç½®æ–‡ä»¶<br>zabbix_server.confé…ç½®å‚æ•°å¯èƒ½ä¼šæœ‰å˜åŒ–ï¼Œä¿®æ”¹å˜æ›´åçš„å‚æ•°ï¼Œæˆ–è€…ç›´æ¥ä¿®æ”¹æ–°çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>1.1 å¯¹ç…§è€ç‰ˆæœ¬çš„zabbix_server.confè¿›è¡Œä¿®æ”¹ï¼Œä¸èƒ½ç›´æ¥æ›¿æ¢ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">vim /usr/<span class="built_in">local</span>/zabbix/etc/</div><div class="line"></div><div class="line">LogFile=/tmp/zabbix_server.log</div><div class="line">DBHost=rdsm5t6w65741u8q1y53.mysql.rds.aliyuncs.com</div><div class="line">DBName=zabbix</div><div class="line">DBUser=zabbix</div><div class="line">DBPassword=zabbix2015</div><div class="line">StartPollers=12</div><div class="line">JavaGateway=127.0.0.1</div><div class="line">JavaGatewayPort=10052</div><div class="line">StartJavaPollers=5</div><div class="line">Timeout=4</div><div class="line">FpingLocation=/usr/<span class="built_in">local</span>/fping/sbin/fping</div><div class="line">LogSlowQueries=3000</div><div class="line">AlertScriptsPath=/usr/<span class="built_in">local</span>/zabbix/share/zabbix/alertscripts</div></pre></td></tr></table></figure>
<p>1.2 COPYç›¸å…³è„šæœ¬åˆ°æ–°ç¼–è¯‘çš„ç›®å½•ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> cp /tmp/zabbix-3.0.3/misc/init.d/fedora/core/zabbix_server  /etc/rc.d/init.d/zabbix_server</div><div class="line">[root@salt etc]<span class="comment"># cp /tmp/zabbix-3.0.3/misc/init.d/fedora/core/zabbix_agentd /etc/rc.d/init.d/zabbix_agentd</span></div><div class="line"></div><div class="line">vim /etc/init.d/zabbix_server </div><div class="line"> BASEDIR=/usr/<span class="built_in">local</span>/zabbix/</div><div class="line"> </div><div class="line">vim /etc/init.d/zabbix_agentd</div><div class="line">BASEDIR=/usr/<span class="built_in">local</span>/zabbix</div></pre></td></tr></table></figure>
<p>1.3 alertscriptså’Œexternalscripts é‡Œé¢çš„ç›¸å…³è„šæœ¬å¤åˆ¶åˆ°æ–°çš„å®‰è£…ç›®å½•ä¸‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cp /usr/<span class="built_in">local</span>/zabbix.2.4.7/share/zabbix/alertscripts/* /usr/<span class="built_in">local</span>/zabbix/share/zabbix/alertscripts/.</div><div class="line">chown -R zabbix:zabbix /usr/<span class="built_in">local</span>/zabbix/share/zabbix/alertscripts/*</div></pre></td></tr></table></figure>
<p>4ã€ éƒ¨ç½²zabbix PHPæºç <br>4.1 å°†æ–°çš„å‰ç«¯PHPä»£ç ä¹ŸCOPYåˆ°å¯¹åº”çš„ç›®å½•ä¸‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /tmp/</div><div class="line">cp -r /zabbix-3.0.3/frontends/php /var/www/html/zabbix</div><div class="line"><span class="built_in">cd</span> /var/www/html/</div><div class="line">chown -R zabbix:zabbix zabbix</div><div class="line"></div><div class="line">cp zabbix.2.4.7/conf/zabbix.conf.php zabbix/conf/zabbix.conf.php</div></pre></td></tr></table></figure>
<p> æ‹·è´ä¸‹phpæ–‡ä»¶è¿™æ ·æ•°æ®å°±èƒ½è®¿é—®åŒæ­¥è¿‡æ¥äº†ã€‚ </p>
<p>ç„¶åé‡å¯æœåŠ¡ã€‚</p>
<p>å‘ç°å‡ºç°<code>500</code> ç½‘é¡µæ— æ³•æ˜¾ç¤ºï¼Œæˆ‘å»ç½‘ä¸ŠGoogleäº†ä¸‹ï¼Œè¯´æˆ‘çš„PHPæ–‡ä»¶ç‰ˆæœ¬è¿‡ä½ã€‚</p>
<p>æˆ‘æŸ¥çœ‹äº†ä¸‹æˆ‘çš„ç‰ˆæœ¬ï¼š</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">php -version</div><div class="line">PHP <span class="number">5.3</span><span class="number">.3</span> (cli) (<span class="string">built:</span> Feb  <span class="number">9</span> <span class="number">2016</span> <span class="number">10</span>:<span class="number">36</span>:<span class="number">17</span>)</div><div class="line">Copyright (c) <span class="number">1997</span><span class="number">-2010</span> The PHP Group</div><div class="line">Zend Engine v2<span class="number">.3</span><span class="number">.0</span>, Copyright (c) <span class="number">1998</span><span class="number">-2010</span> Zend Technologies</div><div class="line"></div><div class="line">whereis php</div><div class="line"><span class="string">php:</span> <span class="regexp">/usr/</span>bin<span class="regexp">/php /</span>etc<span class="regexp">/php.d /</span>etc<span class="regexp">/php.ini /</span>usr<span class="regexp">/lib64/</span>php <span class="regexp">/usr/</span>share<span class="regexp">/php /</span>usr<span class="regexp">/share/</span>man<span class="regexp">/man1/</span>php<span class="number">.1</span>.gz</div></pre></td></tr></table></figure>
<p>æŸ¥è¯¢äº†ä¸‹è¿™æ˜¯é»˜è®¤å®‰è£…çš„ï¼Œyumå®‰è£…çš„ã€‚</p>
<p>mv /usr/share/php/ /usr/share/php.5.3.3<br>å¤‡ä»½ä¹‹å‰çš„æ–¹ä¾¿å›æ»šï¼Œç„¶åå‡çº§PHPï¼š</p>
<h3 id="å¿«é€Ÿå°†PHP-5-3å‡çº§è‡³PHP-5-5"><a href="#å¿«é€Ÿå°†PHP-5-3å‡çº§è‡³PHP-5-5" class="headerlink" title="å¿«é€Ÿå°†PHP 5.3å‡çº§è‡³PHP 5.5"></a>å¿«é€Ÿå°†PHP 5.3å‡çº§è‡³PHP 5.5</h3><p>CentOS 6.7<br>ä»¥ä¸‹ä¸º CentOS ä¸‹å®‰è£… PHP æ–¹æ³•ï¼š</p>
<p>æ·»åŠ  epel æº</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># rpm -Uvh http:<span class="comment">//download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</span></span></div></pre></td></tr></table></figure>
<p>æ·»åŠ  remi æº</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># rpm -Uvh http:<span class="comment">//rpms.famillecollet.com/enterprise/remi-release-6.rpm</span></span></div></pre></td></tr></table></figure>
<p>å®‰è£… PHP</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> yum --enablerepo=remi,remi-php55 install php-fpm php-common php-devel php-mysqlnd php-mbstring php-mcrypt</span></div></pre></td></tr></table></figure>
<p>æŸ¥çœ‹ PHP ç‰ˆæœ¬</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">php</span> <span class="selector-tag">-v</span></div><div class="line"><span class="selector-tag">PHP</span> 5<span class="selector-class">.5</span><span class="selector-class">.9</span> (<span class="selector-tag">cli</span>) (<span class="selector-tag">built</span>: <span class="selector-tag">Feb</span> 11 2014 08<span class="selector-pseudo">:25</span><span class="selector-pseudo">:33)</span></div><div class="line"><span class="selector-tag">Copyright</span> (<span class="selector-tag">c</span>) 1997<span class="selector-tag">-2014</span> <span class="selector-tag">The</span> <span class="selector-tag">PHP</span> <span class="selector-tag">Group</span></div><div class="line"><span class="selector-tag">Zend</span> <span class="selector-tag">Engine</span> <span class="selector-tag">v2</span><span class="selector-class">.5</span><span class="selector-class">.0</span>, <span class="selector-tag">Copyright</span> (<span class="selector-tag">c</span>) 1998<span class="selector-tag">-2014</span> <span class="selector-tag">Zend</span> <span class="selector-tag">Technologies</span></div></pre></td></tr></table></figure>
<p>å¯åŠ¨ php-fpm</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># service php-fpm start</span></div><div class="line"><span class="attribute">Starting</span> php-fpm:ã€€<span class="meta">ã€€[  OK  ]</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œé‡å¯å®Œä»¥åï¼Œè®°å¾—è¦è®©phpç”Ÿæ•ˆï¼Œä¸ç„¶çš„è¯ä¸è¡Œã€‚</p>
<p>æˆ‘ä¸€å¼€å§‹åˆ·æ–°è¿˜æ˜¯å‡ºç°äº†500é”™è¯¯ï¼Œåæ¥ç”¨phpæŒ‡é’ˆæµ‹è¯•äº†ä¸‹ç‰ˆæœ¬æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>wwwç«™ç‚¹æ·»åŠ ã€‚info.php </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"></div><div class="line"> phpinfo();</div><div class="line"></div><div class="line"><span class="meta">?&gt;</span>;</div></pre></td></tr></table></figure>
<p>è®¿é—®åœ°å€/info.php  å‡ºç°ç‰ˆæœ¬æ˜¯5.3 ç¯å¢ƒé—®é¢˜ï¼Œé‡å¯httpå°±å¯ä»¥äº†ã€‚</p>
<p>è¿™é‡Œå·²ç»æå®šå’¯ã€‚</p>
<p> å¦‚æœå‡ºç°å›¾å½¢ä¹±ç ï¼šå¯ä»¥å‚è€ƒä¸‹é¢çš„æ–‡æ¡£ã€‚</p>
<p>å…¶å®æŠŠä¹‹å‰çš„å­—ä½“æ‹·è´è¿‡å»ï¼Œç„¶åå…ˆä¿®æ”¹ä¸‹é…ç½®æ–‡ä»¶å³å¯ã€‚</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp <span class="regexp">/var/</span>www<span class="regexp">/html/</span>zabbix.<span class="number">2.4</span>.<span class="number">7</span><span class="regexp">/fonts/</span>simkai.ttf <span class="regexp">/var/</span>www<span class="regexp">/html/</span>zabbix<span class="regexp">/fonts/</span>.</div></pre></td></tr></table></figure>
<p>3.0ç‰ˆæœ¬å‡çº§ä»¥åå…¶å®å°±æ˜¯ä¸ªæ•°æ®åº“ä¸å˜ï¼Œå…¶ä»–çš„é‡æ–°å®‰è£…ä¸€éå³å¯ã€‚ 10å¤šåˆ†é’Ÿå°±å¯ä»¥æå®šçš„ã€‚</p>
<h4 id="å‡çº§é‡åˆ°çš„é—®é¢˜"><a href="#å‡çº§é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å‡çº§é‡åˆ°çš„é—®é¢˜"></a>å‡çº§é‡åˆ°çš„é—®é¢˜</h4><ol>
<li><code>The frontend does not match Zabbix database. Current database version (mandatory/optional): 2050119/2050119. Required mandatory version: 3000000. Contact your system administrator.</code><br>ç™»å½•åˆ°æ•°æ®åº“æ‰§è¡Œä¸‹é¢çš„sql,å°±å¯ä»¥ä¿®å¤è¿™ä¸ªé—®é¢˜</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt;update dbversion <span class="built_in">set</span> mandatory=3000000;</div></pre></td></tr></table></figure>
<ol>
<li>2 zabbix å†…å­˜æº¢å‡º<br>è·‘äº†æ–°ç‰ˆæœ¬1å¤©ï¼Œè€æ˜¯å¯åŠ¨ä¸èµ·æ¥zabbix_server ï¼Œçœ‹æ—¥å¿—å‡ºç°ä¸‹åˆ—é—®é¢˜</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">16701:20140925:191733.530 Starting Zabbix Server. Zabbix 3.0.3 (revision 48953).</div><div class="line">16701:20140925:191733.530 ****** Enabled features ******</div><div class="line">16701:20140925:191733.530 SNMP monitoring: YES</div><div class="line">16701:20140925:191733.530 IPMI monitoring: YES</div><div class="line">16701:20140925:191733.530 WEB monitoring: YES</div><div class="line">16701:20140925:191733.530 VMware monitoring: NO</div><div class="line">16701:20140925:191733.530 Jabber notifications: NO</div><div class="line">16701:20140925:191733.530 Ez Texting notifications: YES</div><div class="line">16701:20140925:191733.530 ODBC: NO</div><div class="line">16701:20140925:191733.530 SSH2 support: NO</div><div class="line">16701:20140925:191733.531 IPv6 support: NO</div><div class="line">16701:20140925:191733.531 ******************************</div><div class="line">16701:20140925:191733.531 using configuration file: /opt/zabbix/etc/zabbix_server.conf</div><div class="line">15996:20140925:191145.759 completed 97% of database upgrade</div><div class="line">15996:20140925:191147.139 completed 98% of database upgrade</div><div class="line">15996:20140925:191147.422 completed 99% of database upgrade</div><div class="line">15996:20140925:191147.428 completed 100% of database upgrade</div><div class="line">15996:20140925:191147.428 database upgrade fully completed</div><div class="line">15996:20140925:191148.800 __mem_malloc: skipped 0 asked 48 skip_min 0 skip_max 4294967295</div><div class="line">15996:20140925:191148.800 [file:dbconfig.c,line:445] zbx_mem_malloc(): out of memory (requested 44 bytes)</div><div class="line">15996:20140925:191148.800 [file:dbconfig.c,line:445] zbx_mem_malloc(): please increase CacheSize configuration parameter</div><div class="line">15996:20140925:191148.800 [file:dbconfig.c,line:445] zbx_mem_malloc(): out of memory (requested 44 bytes)</div><div class="line">15996:20140925:191148.800 [file:dbconfig.c,line:445] zbx_mem_malloc(): please increase CacheSize configuration parameter</div></pre></td></tr></table></figure>
<p>è§£å†³<br>æ‰“å¼€<code>zabbix_server.conf</code>æ‰¾åˆ° <code>Option: CacheSize</code><br>æŠŠåŸæ¥çš„<code># CacheSize=8M</code> å‰é¢çš„#æ³¨é‡Šå»æ‰ï¼Œå°†8Mä¿®æ”¹ä¸º1024ï¼Œè¿™ä¸ª1024æ ¹æ®æœåŠ¡å™¨æ€§èƒ½ä¿®æ”¹ã€‚</p>
<h3 id="äº¤æµå­¦ä¹ ï¼š"><a href="#äº¤æµå­¦ä¹ ï¼š" class="headerlink" title="äº¤æµå­¦ä¹ ï¼š"></a>äº¤æµå­¦ä¹ ï¼š</h3><p>ğŸ§  Linux shell_é«˜çº§è¿ç»´æ´¾: <code>459096184</code>    åœˆå­ (ç³»ç»Ÿè¿ç»´-åº”ç”¨è¿ç»´-è‡ªåŠ¨åŒ–è¿ç»´-è™šæ‹ŸåŒ–æŠ€æœ¯ç ”ç©¶æ¬¢è¿åŠ å…¥)<br>ğŸ§  BigData-Exchange School : <code>521621407</code>  åœˆå­ï¼ˆå¤§æ•°æ®è¿ç»´)ï¼ˆHadoopå¼€å‘äººå‘˜)ï¼ˆå¤§æ•°æ®ç ”ç©¶çˆ±å¥½è€…) æ¬¢è¿åŠ å…¥</p>
<p>ç›¸åº”Bidataæœ‰å†…éƒ¨å¾®ä¿¡äº¤æµç¾¤äº’ç›¸å­¦ä¹ ï¼ŒåŠ å…¥QQç¾¤æœ‰é“¾æ¥ã€‚</p>

	

	
		<span class="different-posts"><a href="/2016/06/18/æ€§èƒ½ç›‘æ§/Zabbix/zabbix-server2-4å…¨æ–°å‡çº§3-0ç‰ˆæœ¬/" onclick="window.history.go(-1); return false;">â¬…ï¸ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<h5>Hi there,</h5>
	<p style="text-align:justify;">my name is Yancy, they know me as RadiantğŸ‘ğŸ‘. This blog is about Bi-data and my live.<br> I like ğŸŒ³ğŸŒ³ğŸŒ³</p>
</div>


	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2019 Yancy | Powered by <a href="http://blog.yancy.cc/">Yancy</a> | Theme <a href="https://github.com/yangcvo">Yancy_GitHub</a></span>
		</div>

	</div>


</footer>



</body>

</html>
